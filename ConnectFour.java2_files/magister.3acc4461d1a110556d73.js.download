(window.webpackJsonp=window.webpackJsonp||[]).push([[10],Array(84).concat([function(e,t,n){"use strict";n.r(t);var i,r=n(1),o=(n(139),n(140),n(141),n(142),n(143)),a=n(149),s=n(151),l=n(168),d=n(171),c=n(174);!function(e){e[e.Default=0]="Default",e[e.Leerling=1]="Leerling",e[e.Ouder=2]="Ouder",e[e.Docent=3]="Docent"}(i||(i={}));var u=n(5),h=n(4),p=n(197),f=n(200),g=function(){function e(e,t,n,i){this.$http=e,this.$sce=t,this.cookieService=n,this.currentUser=i,this.KENNISNET_LOGGED_IN_COOKIE="KENNISNET_LOGGED_IN",this.kennisnetUrl=""}return e.prototype.$onInit=function(){var e=this;!globalSettings.kennisnetLogin||this.isParent()||this.isAlreadyLoggedIn()||this.$http.get("/api/kennisnet/info").then(function(t){e.kennisnetUrl=e.$sce.trustAsResourceUrl(t.data),e.registerLoggedIn()})},e.prototype.isParent=function(){return this.currentUser.isInRole(h.a.Ouder)},e.prototype.isAlreadyLoggedIn=function(){return this.cookieService.readSessionCookie(this.KENNISNET_LOGGED_IN_COOKIE)},e.prototype.registerLoggedIn=function(){this.cookieService.createSessionCookie(this.KENNISNET_LOGGED_IN_COOKIE,!0)},e}();var m=n(204),v=n(208),b=n(210),_=n(212),k=n(214),w=n(223),y=n(8),x=function(){function e(e,t,n){this.$q=e,this.currentUser=t,this.aanmeldingenService=n}return e.prototype.showItem=function(){var e=this.$q.defer();return this.validate().then(function(t){t?e.resolve(y.i.SHOW):e.resolve(y.i.HIDDEN)}),e.promise},e.prototype.validate=function(){var e=this,t=this.$q.defer();return this.aanmeldingenService.getLeerlingAanmeldingen(this.currentUser.relatedPersons.current.id).then(function(n){n.length>0&&e.aanmeldingenService.getLeerlingAanmelding(n[0]).then(function(e){t.resolve(e.isExamen)})}),t.promise},e.$inject=["$q","currentUser","aanmeldingenService",e],e}(),C=n(225),S=n(227),T=n(229),D=function(){return function(){this.isPrimary=!1,this.isSecondary=!1,this.isDisabled=!1}}();var I={template:'\n    <div class="appbar">\n    <div class="gripper" ng-if="ctrl.showGripper" ng-click="ctrl.onOpenExterneKoppeling()">\n        <i></i><i></i>\n        <i></i><i></i>\n    </div>\n    <div class="spacer"></div>\n    <div class="menu-button" ng-if="ctrl.buttonVisibility.messages" data-sm-logged-in-user></div>\n    <div class="menu-button">\n        <a id="help-menu" ng-click="ctrl.toggleHelpMenu($event)">\n            <i class="far fa-question-circle"></i>\n            <span>Help</span>\n        </a>\n        <div class="popup-menu user-menu" ng-if="ctrl.showHelpMenu">\n            <h3>Help</h3>\n            <div class="help-menu">\n                <a href="https://www.iddinkgroup.com/responsible-disclosure/" target="_blank" rel="noopener noreferrer">Responsible disclosure<i class="far fa-external-link-alt"></i></a>\n                <span>Versie {{ ctrl.version }}</span>\n            </div>\n        </div>\n    </div>\n    <div class="menu-button" data-ng-if="$root.showPersoonKiezer" data-sm-kindkiezer="ouder" id="kind-kiezer"></div>\n    <div class="menu-button">\n        <a id="user-menu" ng-click="ctrl.toggleShowUserMenu($event)">\n            <figure ng-if="ctrl.isStudent">\n                <img alt="{{ctrl.Naam}}" mg-http-src="{{ctrl.ImageSrc}}">\n                <i class="far fa-user-cog"></i>\n            </figure>\n            <i class="far fa-user-cog" ng-if="!ctrl.isStudent"></i>\n            <span>Beheer/account</span>\n        </a>\n        <div class="popup-menu user-menu" ng-if="ctrl.showUserMenu">\n            <h3>Account</h3>\n            <div>\n                <div class="profile">\n                    <figure ng-if="ctrl.isStudent">\n                        <img alt="{{ctrl.Naam}}" mg-http-src="{{ctrl.ImageSrc}}">\n                        <i class="far fa-user"></i>\n                    </figure>\n                    <div>\n                        {{ ::ctrl.Naam}}\n                    </div>\n                </div>\n            </div>\n            <ul>\n                <li>\n                    <a href="#/mijn-instellingen" id="mijn-instellingen">Instellingen</a>\n                </li>\n                <li>\n                    <a ng-click="ctrl.logOff()" id="log-off">Uitloggen</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n\n<mg-feedback-dialog show="ctrl.showFeedback" on-close="ctrl.closeFeedbackDialog()"></mg-feedback-dialog>\n\n    ',controller:["$rootScope","$window","currentUser","$timeout","sessieService","toestemmingsService","externeKoppelingenService",n(253).a],controllerAs:"ctrl"},E={template:'\n    <div class="psw-overlay">\n        <header>\n            <button ng-click="ctrl.onClose()" id="close" title="sluiten">\n                <i class="fas fa-times"></i>\n                <span>(ESC)</span>\n            </button>\n        </header>\n        <main role="main">\n            <button ng-click="ctrl.onClose()">\n                <svg><use xlink:href="#logo"></use></svg>\n                <span>Magister</span>\n            </button>\n            <button ng-click="ctrl.onOpenExterneKoppeling(\'magisterMe\')">\n                <svg><use xlink:href="#logo"></use></svg>\n                <span>Magister.me</span>\n            </button>\n        </main>\n    </div>',controller:["$rootScope","$window","externeKoppelingenService",function(){function e(e,t,n){this.$rootScope=e,this.$window=t,this.externeKoppelingenService=n}return e.prototype.onOpenExterneKoppeling=function(e){var t=this;this.externeKoppelingenService.getExterneKoppelingen().then(function(e){e.links.magisterMe&&t.$window.open(e.links.magisterMe.href,"_self")})},e.prototype.onClose=function(){this.$rootScope.isProductswitchVisible=!1},e}()],controllerAs:"ctrl"},A=n(254),O=function(){function e(e,t){var n=this;this.sessieService=e,this.toestemmingsService=t,this.link=function(e,t,i){return n.linkFn(e,t,i)},this.template="<a id='uitloggen' href='' ng-click='logoff()' title='uitloggen'><span class='icon-logout'></span>uitloggen</a>",this.replace=!1}return e.prototype.linkFn=function(e,t,n){var i=this;e.logoff=function(){i.toestemmingsService.skipReminder=!1,i.sessieService.logoff()}},e.$inject=["sessieService","toestemmingsService",function(t,n){return new e(t,n)}],e}(),R=n(255),P=function(){function e(e){var t=this;this.schoolConfiguratieService=e,this.schoolConfiguratieService.getSchoolinformatie().then(function(e){return t.setLicentie(e)})}return e.prototype.setLicentie=function(e){this.licentie=e.Licentie},e.$inject=["schoolConfiguratieService"],e}();var M=function(){function e(e,t){var n=this;this.$scope=e,this.tabService=t,this.tabs=[],this.tabService.addContainer(),this.tabService.subscribeTabAdded(function(e){n.tabs.push(e)},this),this.tabState=this.tabService.tabState,this.openTab=function(e){n.tabService.openTab(e)},this.toggleVisibilityTabContainer=function(){n.tabService.tabState.tabContainerVisible=!n.tabService.tabState.tabContainerVisible},this.$scope.$on("$destroy",function(){n.tabService.removeContainer()})}return e.$inject=["$scope","tabService",e],e}(),F=function(){function e(){this.restrict="E",this.template=n(262),this.replace=!0,this.transclude=!0,this.controllerAs="vm",this.controller=M.$inject,this.scope={}}return e.$inject=[function(){return new e}],e}(),H=function(){function e(e,t,n){var i=this;this.$scope=e,this.tabService=t,this.attributes=n,this.tab={id:n.id,title:n.title,class:n.class||null,active:!1,enabled:!0,getActive:function(){return i.tab.active},getEnabled:function(){return i.tab.enabled}},this.tabService.addTab(this.tab),n.active&&this.tabService.openTab(this.tab),this.$scope.$on("$destroy",function(){i.tabService.removeTab(i.tab)})}return e.$inject=["$scope","tabService","$attrs",e],e}(),N=function(){function e(){this.require="^smTabs",this.restrict="E",this.template=n(263),this.replace=!1,this.transclude=!0,this.controllerAs="vm",this.controller=H.$inject,this.scope={}}return e.$inject=[function(){return new e}],e}(),$=n(264),L=n(21),z=function(){function e(e){this.$resource=e,this.versieResource=this.$resource(globalSettings.apiHost+"api/versie")}return e.prototype.get=function(){return this.versieResource.get().$promise},e.$inject=["$resource",e],e}(),j=n(275),B=n(35),U=n(276),V=n(28),W=n(277),G=n(131),q=n(130),K=n(129),Y=n(282),Q=n(291),X=n(292),J=n(296),Z="mg-reminder-dialog";var ee,te=[(ee=function(e,t,n){return t.skipReminder?e.resolve():t.getEntrypointCollection().then(function(t){var i=t.items.filter(function(e){return e.controle&&e.controle.moetInvullen});return i.length?n.openFromComponent(Z,{toBeChecked:i}).afterClosed:e.resolve()}).catch(function(){})},ee.$inject=["$q","toestemmingsService","modalService"],ee)],ne=function(){function e(e,t,n){this.$injector=e,this.$q=t,this.startupPromptQueue=n}return e.prototype.triggerStartupPrompts=function(){return this.triggerNextPrompt(0)},e.prototype.triggerNextPrompt=function(e){var t=this;return e<this.startupPromptQueue.length?this.$injector.invoke(this.startupPromptQueue[e]).then(function(){return t.triggerNextPrompt(e+1)}):this.$q.resolve()},e.$inject=["$injector","$q","startupPromptQueue"],e}(),ie=n(371),re=n(391),oe=n(392),ae=n(394),se=n(396),le=function(){function e(e,t){this.resourceService=e,this.$rootScope=t,this.unread=0}return e.prototype.setUnread=function(e){this.unread=e,this.$rootScope.$digest()},e.prototype.fetchUnreadMessages=function(){var e=this;this.resourceService.get("/berichten/mappen/alle").then(function(t){e.unread=t.items.map(function(e){return e.aantalOngelezen}).reduce(function(e,t){return e+t})})},e.$inject=["resourceService","$rootScope",e],e}();n.d(t,"app",function(){return De});var de="/vandaag",ce="/agenda",ue="/cijfers",he="/afwezigheid",pe="/examen",fe="/elo/studiewijzer",ge="/elo/activiteiten",me="/elo/bronnen",ve="/elo/opdrachten",be="/leermiddelen",_e="/elo/portfolio/profiel",ke="/elo/portfolio/documenten",we="/elo/portfolio/beoordeeldeproducten",ye="/vakkenpakketkeuze",xe="/ouderavond-overzicht",Ce="/lvs",Se="/bestellen",Te=[J.a,X.a,se.a,l.a,w.a,s.a,W.a,o.a,k.a,m.a,p.a,f.a,S.a,c.a,Y.a,oe.a,T.a,Q.a,v.a,b.a,_.a].map(function(e){return e.name}),De=r.module("Magister.app",Te.concat(["kendo.directives","oc.lazyLoad","ngGrid","ngRoute","ngResource",d.a.name,C.a.name,ie.a.name]));De.value("magisterLocale",new L.a),De.service("personInfoService",B.a.$inject).service("versieResource",z.$inject).service("ouderavondService",K.a.$inject).service("ouderavondenResource",G.a.$inject).service("menuDependencyService",j.a.$inject).service("vakkenPakketMenuService",re.a.$inject).service("schoolConfiguratieService",U.a.$inject).service("ouderavondOverzichtMenuService",q.a.$inject).service("examenMenuService",x.$inject).service("passwordValidator",V.a.$inject).service("startupPromptService",ne).service("unreadMessageService",le.$inject),De.directive("logoff",O.$inject).directive("smMenu",R.a.$inject).directive("smKindkiezer",a.a.$inject).directive("berichtenWidget",ae.a.$inject).directive("smSchoolkiezer",function(){return{template:n(261),restrict:"A",controller:P,controllerAs:"vm"}}).directive("smGrid",$.a).directive("smTabContainer",F.$inject).directive("smTab",N.$inject).directive("responsiveGridOptions",A.a.$inject).directive("mgDialog2",function(){return{template:['<div ng-if="vm.isVisible">','    <div class="dialog" ng-class="{\'login-dialog\': true}">','        <div class="content-pane">','            <h2 class="title indent">{{vm.heading}}</h2>','            <div class="preview">',"                <figure></figure>","            </div>",'            <div class="content" ng-transclude>',"            </div>","        </div>","    </div>",'    <div class="overlay"></div>',"</div>"].join("\n"),restrict:"E",transclude:!0,replace:!1,scope:{heading:"@?"},controller:null,controllerAs:"vm",bindToController:!0,link:function(e,t,n,i){e.$on("SHOW_DIALOG",function(e,n){t.attr("id")===n&&(i.isVisible=!0)}),e.$on("HIDE_DIALOG",function(e,n){t.attr("id")===n&&(i.isVisible=!1)}),"noOverlay"in n&&(i.showOverlay=!1)}}}).directive("mgButton",function(){return{template:"<a ng-transclude class=\"btn noselect\" ng-class=\"{'primary': vm.isPrimary, 'secondary': vm.isSecondary, 'disabled': vm.state === 'disabled'}\"></a>",restrict:"E",transclude:!0,controller:D,controllerAs:"vm",bindToController:!0,scope:{state:"@"},link:function(e,t,n,i){i.isPrimary="primary"in n,i.isSecondary="secondary"in n}}}).directive("mgKennisnetLogin",function(){return{restrict:"E",template:'<iframe width="0" height="0" sandbox="allow-scripts" ng-src="{{ctrl.kennisnetUrl}}"></iframe>',controller:["$http","$sce","cookieService","currentUser",g],controllerAs:"ctrl"}}),De.component("iclLikeSpinner",{template:' <svg class="spinning-indicator" focusable="false" preserveAspectRatio="xMidYMid meet" viewbox="0 0 100 100">\n                    <circle cx="50%" cy="50%" fill="none" r="44" style="stroke-dasharray: 276.46px; stroke-dashoffset: 138.23px; stroke-width: 12px; stroke: currentColor"></circle>\n                </svg>',controller:function(){}}).component("mgAppbar",I).component("mgProductSwitch",E),De.constant("MenuItems",[{title:"Vandaag",privileges:[u.a.NoPrivilege],icon:"fa-home",dependency:"",visibleState:y.i.SHOW,url:de,roles:[h.a.Leerling,h.a.Ouder]},{title:"Agenda",privileges:[u.a.Afspraken],icon:"fa-calendar-alt",dependency:"",visibleState:y.i.SHOW,url:ce,roles:[h.a.Leerling,h.a.Ouder]},{title:"Afwezigheid",privileges:[u.a.Absenties],icon:"fa-check-circle",dependency:"",visibleState:y.i.SHOW,url:he,roles:[h.a.Leerling,h.a.Ouder]},{title:"Cijfers",privileges:[u.a.Cijfers],text:"10",dependency:"",visibleState:y.i.SHOW,url:ue,roles:[h.a.Leerling,h.a.Ouder]},{title:"Examen",privileges:[u.a.NoPrivilege],icon:"fa-file-certificate",dependency:"examenMenuService",visibleState:y.i.HIDDEN,url:pe,roles:[h.a.Leerling,h.a.Ouder]},{title:"Leerlingvolgsysteem",privileges:[u.a.Logboeken],icon:"fa-book-user",dependency:"",visibleState:y.i.SHOW,url:Ce,roles:[h.a.Leerling,h.a.Ouder]},{title:"ELO",privileges:[u.a.NoPrivilege],icon:"fa-book-reader",dependency:"",visibleState:y.i.SHOW,roles:[h.a.Leerling,h.a.Ouder],children:[{title:"Bronnen",privileges:[u.a.Bronnen],icon:"icon-group",dependency:"",visibleState:y.i.SHOW,url:me,roles:[h.a.Leerling]},{title:"Studiewijzers",privileges:[u.a.Studiewijzers,u.a.Projecten],icon:"icon-group",dependency:"",visibleState:y.i.SHOW,url:fe,roles:[h.a.Leerling,h.a.Ouder]},{title:"Opdrachten",privileges:[u.a.EloOpdracht],icon:"icon-group",dependency:"",visibleState:y.i.SHOW,url:ve,roles:[h.a.Leerling,h.a.Ouder]}]},{title:"Portfolio",privileges:[u.a.Portfolio],icon:"fa-file-user",dependency:"",visibleState:y.i.SHOW,roles:[h.a.Leerling],children:[{title:"Profiel",privileges:[u.a.NoPrivilege],icon:"icon-group",dependency:"",visibleState:y.i.SHOW,url:_e,roles:[h.a.Leerling]},{title:"Portfoliodocumenten",privileges:[u.a.NoPrivilege],icon:"icon-group",dependency:"",visibleState:y.i.SHOW,url:ke,roles:[h.a.Leerling]},{title:"Beoordeelde producten",privileges:[u.a.NoPrivilege],icon:"icon-group",dependency:"",visibleState:y.i.SHOW,url:we,roles:[h.a.Leerling]}]},{title:"Activiteiten",privileges:[u.a.Activiteiten],icon:"fa-calendar-star",dependency:"",visibleState:y.i.SHOW,url:ge,roles:[h.a.Leerling]},{title:"Leermiddelen",privileges:[u.a.DigitaalLesmateriaal],icon:"fa-books",dependency:"",visibleState:y.i.SHOW,url:be,roles:[h.a.Leerling,h.a.Ouder]},{title:"Bestellen",privileges:[u.a.NoPrivilege],icon:"fa-shopping-cart",dependency:"",url:Se,visibleState:y.i.HIDDEN,roles:[h.a.Leerling,h.a.Ouder]},{title:"Vakkenpakketkeuze",privileges:[u.a.Vakkenpakketkeuze],icon:"fa-ballot-check",dependency:"vakkenPakketMenuService",visibleState:y.i.HIDDEN,url:ye,roles:[i.Leerling,i.Ouder]},{title:"Ouderavond",privileges:[u.a.Ouderavond],icon:"fa-user-clock",dependency:"ouderavondOverzichtMenuService",visibleState:y.i.HIDDEN,url:xe,roles:[i.Ouder]}]),De.constant("startupPromptQueue",te),De.run(["$http","$window","currentUser","startupPromptService",function(e,t,n,i){e.get(n.sessie.links.account.href).then(function(e){r.isDefined(e.data.links.medewerker)&&t.location.replace("/op/#")}),i.triggerStartupPrompts()}]),De.constant("interceptorExcludes",[{pattern:/api\/personen\/[0-9]*\/afspraken\/[0-9]*\/aansluitend/,statusCode:404},{pattern:/api\/personen\/[0-9]*\/instellingen\/(tablet|desktop|mobile)/,statusCode:404},{pattern:/api\/personen\/[0-9]*\/bronnen\/[0-9]*/,statusCode:400},{pattern:/api\/personen\/[0-9]*\/bronnen/,statusCode:400,httpMethods:[y.h.POST]},{pattern:/api\/personen\/[0-9]*\/bronnen/,statusCode:403,httpMethods:[y.h.POST]},{pattern:/api\/personen\/[0-9]*\/vakkenpakketkeuze\/kanvakkenpakketkiezen/,statusCode:404,httpMethods:[y.h.GET]},{pattern:/aanmeldingen\/[0-9]*\/mentor/,statusCode:404},{pattern:/api\/leerlingen\/[0-9]*\/portfolio\/documenten\/[0-9]*/,statusCode:400},{pattern:/api\/sessuibs\/current\/valideer/,statusCode:400,httpMethods:[y.h.POST]},{pattern:/api\/accounts\/[0-9]*\/wachtwoord/,statusCode:400,httpMethods:[y.h.PUT]},{pattern:/api\/documenten\/onedriveforbusiness\/items/,statusCode:400,httpMethods:[y.h.POST]},{pattern:/api\/documenten\/onedriveforbusiness\/mappen\/.*\/items/,statusCode:400,httpMethods:[y.h.POST]},{pattern:/api\/documenten\/onedriveforbusiness\/documenten\/.*\/tolocal/,statusCode:400,httpMethods:[y.h.GET]},{pattern:/api\/documenten\/onedrive\/documenten\/.*\/tolocal/,statusCode:400,httpMethods:[y.h.GET]},{pattern:/api\/sessies\/huidige\/valideer/,statusCode:400},{pattern:/api\/leerlingen\/[0-9]*\/absentiemeldingen/,statusCode:400,httpMethods:[y.h.POST]},{pattern:/api\/toestemmingen/,statusCode:400,httpMethods:[y.h.POST]},{pattern:/api\/toestemmingen/,statusCode:403,httpMethods:[y.h.POST]},{pattern:/api\/toestemmingen/,statusCode:404,httpMethods:[y.h.POST,y.h.GET]},{pattern:/api\/toestemmingen/,statusCode:500,httpMethods:[y.h.POST,y.h.GET]}]).constant("apiHost",globalSettings.apiHost)},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Continue=0]="Continue",e[e.Save=1]="Save",e[e.Done=2]="Done",e[e.Ok=3]="Ok",e[e.Yes=4]="Yes",e[e.No=5]="No",e[e.Cancel=6]="Cancel",e[e.CustomSecondary=7]="CustomSecondary",e[e.CustomPrimary=8]="CustomPrimary",e[e.LeavePage=9]="LeavePage"}(i||(i={}))},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.MijnEloDocumenten=-1]="MijnEloDocumenten",e[e.GedeeldeDocumenten=-9]="GedeeldeDocumenten",e[e.PortFolioDocumenten=-12]="PortFolioDocumenten",e[e.ProjectDocumenten=-18]="ProjectDocumenten",e[e.Prullenbak=-99]="Prullenbak",e[e.Kennisnet=-100]="Kennisnet",e[e.OneDriveForBusiness=-102]="OneDriveForBusiness"}(i||(i={}))},,function(e,t,n){"use strict";var i,r,o,a,s,l;n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return l}),function(e){e[e.Actief=0]="Actief",e[e.Alles=1]="Alles"}(i||(i={})),function(e){e[e.Alle=0]="Alle",e[e.ActievePeriode=1]="ActievePeriode",e[e.BerekendeKolommen=2]="BerekendeKolommen",e[e.PtaKolommen=3]="PtaKolommen"}(r||(r={})),function(e){e[e.laatsten=0]="laatsten",e[e.gemiddelden=1]="gemiddelden",e[e.overzicht=2]="overzicht",e[e.gerelateerdeCijferKolommen=3]="gerelateerdeCijferKolommen",e[e.cijferKolomInfo=4]="cijferKolomInfo",e[e.cijferPerioden=5]="cijferPerioden"}(o||(o={})),function(e){e[e.alleCijfers=0]="alleCijfers",e[e.actieveCijferPerioden=1]="actieveCijferPerioden",e[e.berekendeKolommen=2]="berekendeKolommen",e[e.gerelateerdeCijferKolommen=3]="gerelateerdeCijferKolommen"}(a||(a={})),function(e){e[e.IsPresent=0]="IsPresent",e[e.IsAbsent=1]="IsAbsent",e[e.Unknown=2]="Unknown"}(s||(s={})),function(e){e[e.KolomNummers=0]="KolomNummers",e[e.KolomKop=1]="KolomKop"}(l||(l={}))},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Audio=0]="Audio",e[e.Video=1]="Video",e[e.Anders=3]="Anders",e[e.YouTube=4]="YouTube"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.prototype.$onInit=function(){!0===this.editable&&this.model&&!0===this.model.required&&this.model.titel&&(this.model.titel=this.model.titel+"*")},e}()},,,,function(e,t,n){"use strict";var i,r,o,a;n.d(t,"c",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a}),function(e){e[e.studiewijzers=0]="studiewijzers",e[e.projecten=1]="projecten"}(i||(i={})),function(e){e[e.studiewijzer=0]="studiewijzer",e[e.project=1]="project"}(r||(r={})),function(e){e[e.Actueel=0]="Actueel",e[e.Archief=1]="Archief"}(o||(o={})),function(e){e[e.Audio=0]="Audio",e[e.Video=1]="Video",e[e.Afbeelding=2]="Afbeelding",e[e.Anders=3]="Anders"}(a||(a={}))},,,function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large"}(i||(i={}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(){this.EDIT_MODE="TOGGLE-EDIT-MODE"}return t.prototype.linkFn=function(t,n,i){var r=this;t.$on(this.EDIT_MODE,function(i,o){var a=n.find(".block");o?(e.element(a).addClass("editmode"),r.initializeDrag(t,n),r.initializeDrop(t,n)):(e.element(a).removeClass("editmode"),r.disableDragAndDrop(n))})},t.prototype.initializeDrag=function(e,t){var n=e.$parent.$parent,i=e.$parent;t.kendoDraggable({hint:function(){var e=t.clone();return e.addClass("manualTextAlign"),e.width(t.context.clientWidth),e.height(t.context.clientHeight),e},dragstart:function(e){var t=i.widget;n.sourceForDrag=t}})},t.prototype.initializeDrop=function(t,n){var i=this,r=t.$parent.$parent,o=t.$parent;n.kendoDropTarget({dragenter:function(t){e.element(n).addClass("manualhover")},dragleave:function(t){e.element(n).removeClass("manualhover")},drop:function(t){e.element(n).removeClass("manualhover");var a=o.widget,s=r.sourceForDrag;i.switchWidgets(r,a,s)}})},t.prototype.switchWidgets=function(e,t,n){e.$apply(function(){var e=t.Positie.Volgnummer;t.Positie.Volgnummer=n.Positie.Volgnummer,n.Positie.Volgnummer=e})},t.prototype.disableDragAndDrop=function(e){e.removeData("kendoDraggable"),e.removeData("role"),e.unbind("mousedown"),e.unbind("selectstart")},t}()}).call(this,n(1))},function(e,t,n){"use strict";var i,r,o;n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),function(e){e[e.onbekend=0]="onbekend",e[e.aanwezig=1]="aanwezig",e[e.geoorloofd=2]="geoorloofd",e[e.ongeoorloofd=3]="ongeoorloofd"}(i||(i={})),function(e){e[e.huiswerkBlock=1]="huiswerkBlock",e[e.huiswerkInhoud=2]="huiswerkInhoud",e[e.huiswerkAttachments=4]="huiswerkAttachments",e[e.eloOpdrachtBlock=8]="eloOpdrachtBlock",e[e.studiewijzersBlock=16]="studiewijzersBlock",e[e.KWTBlock=32]="KWTBlock"}(r||(r={})),function(e){e[e.Alle=0]="Alle",e[e.Actief=1]="Actief"}(o||(o={}))},,function(e,t){e.exports='<div id="agenda-afspraak-bewerken-container" class="container" data-sm-check-dirty="isDirty()">\r\n    <div class="head-bar">\r\n        <div>\r\n            <a class="text-button" title="Opslaan" data-ng-click="opslaan();" data-ng-class="{\'grayed\': !canOpslaan()}">\r\n                <span>\r\n                    Opslaan\r\n                </span>\r\n            </a>\r\n        </div>\r\n        <div>\r\n            <a title="Annuleren" class="text-button" data-ng-show="magVerwijderen" data-ng-class="{\'grayed\' : !kanVerwijderen}" data-ng-click="terug();">\r\n                <span>\r\n                    Annuleren\r\n                </span>\r\n            </a>\r\n        </div>\r\n\r\n        <h1>\r\n            <a data-ng-click="terug();">\r\n                <i class="far fa-chevron-circle-left"></i>\r\n            </a>\r\n            <span data-ng-bind="titel"></span>\r\n        </h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container container-wide">\r\n            <div class="widget wide new-appointment-block">\r\n                <fieldset>\r\n                    <ul>\r\n                        <li>\r\n                            <label>Afspraak</label>\r\n                            <span class="radio-buttons">\r\n                                <span class="radio">\r\n                                    <input type="radio" name="weergave" ng-value="16" data-ng-model="afspraak.Type" id="planning">\r\n                                    <label for="planning">planning</label>\r\n                                </span>\r\n                                <span class="radio" style="width:50px">\r\n                                    <input type="radio" name="weergave" ng-value="1" data-ng-model="afspraak.Type" id="persoonlijk">\r\n                                    <label for="persoonlijk">persoonlijk</label>\r\n                                </span>\r\n                            </span>\r\n                        </li>\r\n                        <li>\r\n                            <label>Onderwerp</label>\r\n                            <input type="text" maxlength="255" required="required" data-ng-model="afspraak.Omschrijving" class="ng-pristine ng-invalid ng-invalid-required" data-sm-focus="true" />\r\n                        </li>\r\n                        <li>\r\n                            <label>Locatie</label>\r\n                            <input type="text" maxlength="255" data-ng-model="afspraak.Lokatie" class="input-city" />\r\n                        </li>\r\n                        <li>\r\n                            <label>Datum</label>\r\n                            <div>\r\n                                <input type="text" id="calendar" data-kendo-date-picker="agendaCalendar" data-k-options="agendaCalendarOptions"\r\n                                       data-ng-bind="calendarSelectedDate" data-k-on-change="calendarOnChange(kendoEvent)" />\r\n                                <span class="check">\r\n                                    <input type="checkbox" class="checkbox" name="heledag" data-ng-model="afspraak.DuurtHeleDag" id="heledag" tabindex="3"><label for="heledag"><span></span>de hele dag</label>\r\n                                </span>\r\n                            </div>\r\n                        </li>\r\n                        <li data-ng-hide="afspraak.DuurtHeleDag" class="multiple-fancy-box">\r\n                            <label>Tijdstip</label>\r\n                            <div class="fancy-select">\r\n                                <select id="contacttypeselectie" name="contacttypeselectie"\r\n                                        class="select"\r\n                                        data-ng-class="{\'grayed\': !afspraak.DuurtHeleDag}"\r\n                                        data-kendo-drop-down-list="contacttypeselectie"\r\n                                        data-k-data-source="uren"\r\n                                        data-k-ng-model="start"\r\n                                        data-k-value-primitive="true"\r\n                                        required="required"></select>\r\n                            </div>\r\n                            <div class="fancy-divider">-</div>\r\n                            <div class="fancy-select">\r\n                                <select id="contacttypeselectie" name="contacttypeselectie"\r\n                                        class="select"\r\n                                        data-ng-class="{\'grayed\': !afspraak.DuurtHeleDag}"\r\n                                        data-kendo-drop-down-list="contacttypeselectie"\r\n                                        data-k-data-source="uren"\r\n                                        data-k-ng-model="eind"\r\n                                        data-k-value-primitive="true"\r\n                                        required="required"></select>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </fieldset>\r\n            </div>\r\n            <div class="widget wide wysiwyg k-content">\r\n                <textarea id="editor"\r\n                          data-ng-blur="onChange()"\r\n                          data-kendo-editor="editor"\r\n                          data-k-options="{encoded: false}"\r\n                          data-ng-model="afspraak.Inhoud"\r\n                          data-k-messages="wysiwyg.messages"\r\n                          data-k-tools="wysiwyg.tools"></textarea>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>'},function(e,t,n){"use strict";var i,r;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),function(e){e[e.Normaal=0]="Normaal",e[e.Herkansing=1]="Herkansing",e[e.Docent=2]="Docent"}(i||(i={})),function(e){e[e.Onbekend=0]="Onbekend",e[e.Cijfers=1]="Cijfers",e[e.Gemiddelden=2]="Gemiddelden",e[e.Maxima=3]="Maxima",e[e.Formule=4]="Formule",e[e.Minima=5]="Minima",e[e.Som=6]="Som",e[e.Tel=7]="Tel",e[e.Cevo=8]="Cevo",e[e.Tekst=9]="Tekst",e[e.CevoKolCPE=10]="CevoKolCPE",e[e.CevoKolCIE=11]="CevoKolCIE",e[e.Weegfactor=12]="Weegfactor",e[e.Eindcijfer=13]="Eindcijfer",e[e.TekortPunten=14]="TekortPunten"}(r||(r={}))},function(e,t,n){"use strict";var i,r;n.d(t,"a",function(){return r}),function(e){e[e.readonly=0]="readonly",e[e.editmode=1]="editmode",e[e.nieuweVersie=2]="nieuweVersie"}(i||(i={})),function(e){e[e.alle=0]="alle",e[e.ingeleverd=1]="ingeleverd",e[e.openstaand=2]="openstaand",e[e.beoordeeld=3]="beoordeeld",e[e.geen=4]="geen",e[e.afgesloten=5]="afgesloten"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){var n=this;this.$scope=e,this.model=t,e.model=t,e.onClose=function(){return n.onClose()},e.onFinish=function(){return n.onFinish()},e.getInitStep=function(){return n.getInitStep()}}return e.prototype.onClose=function(){throw new Error("The onClose method has not been implemented")},e.prototype.onFinish=function(){throw new Error("The onFinish method has not been implemented")},e.prototype.getInitStep=function(){return null},e.GET_INIT_STEP_FN="getInitStep",e}()},function(e,t){e.exports='<div class="new-message-block">\r\n    \x3c!--TODO: andere class naam--\x3e\r\n    <ul>\r\n        <li class="text-input">\r\n            <label for="Naam">{{vm.labelnaam}}</label>\r\n            <input\r\n                id="single-input-dialog-mapname"\r\n                type="text"\r\n                required="required"\r\n                data-ng-model="vm.mapnaam"\r\n                data-ng-class="{\'invalid-field\': vm.mapnaamIsInValid}" />\r\n        </li>\r\n    </ul>\r\n</div>'},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.left=0]="left",e[e.right=1]="right",e[e.above=2]="above",e[e.below=3]="below"}(i||(i={}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(){this.subscriptionTypes=[]}return t.prototype.subscribe=function(e,t,n,r){var o=this;Object(i.w)(t)||Object(i.w)(n)||(this.findSubscriptionType(e).callbackInfos.push({callback:t,objectToCallOn:n}),r.$on("$destroy",function(){o.unSubscribe(e,t)}))},t.prototype.unSubscribe=function(t,n){if(!Object(i.w)(n)){var r=this.findSubscriptionType(t);r.callbackInfos=e.filter(r.callbackInfos,function(e){return!(e.callback===n)})}},t.prototype.callSubscribers=function(t,n){var i=this.findSubscriptionType(t);e.each(i.callbackInfos,function(e){e.callback.call(e.objectToCallOn,n)})},t.prototype.findSubscriptionType=function(t){var n=e.find(this.subscriptionTypes,function(e){return e.type===t});return Object(i.w)(n)&&(n={type:t,callbackInfos:[]},this.subscriptionTypes.push(n)),n},t}()}).call(this,n(3))},,,,,,,,,,,function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r=n(99),o=n(8),a=n(0),s=function(){function t(e){this.applicationServiceBase=e}return t.prototype.convertResponseToViewData=function(e){for(var t,n=this.getEmptyList(),i=0;i<e.Items.length;i++)t=this.createAgendaItem(e.Items[i],r.a.onbekend),n.agendaItems.push(t);return n},t.prototype.handleErrorResult=function(e,t,n){void 0===t&&(t=o.j.ERROR),void 0===n&&(n=0),this.applicationServiceBase.showMessage(e,t,n)},t.prototype.buildLesuurString=function(e,t){return Object(a.w)(e)||Object(a.w)(t)||e!==t?e!==t?e.toString()+"-"+t.toString():"":e.toString()},t.prototype.getEmptyList=function(){return{agendaItems:[]}},t.prototype.createAgendaItem=function(e,t){return{isWijziging:!1,id:e.Id,start:e.Start.toString(),einde:e.Einde.toString(),omschrijving:e.Omschrijving||"-",bijlagen:e.Bijlagen,inhoud:e.Inhoud,afgerond:e.Afgerond,aantekeningLeerling:e.Aantekening,lesuur:this.buildLesuurString(e.LesuurVan,e.LesuurTotMet),afspraakType:e.Type,locatie:e.Lokatie,absentieType:t,absentieOmschrijving:"",absentieCode:"",infoType:e.InfoType,docent:this.createConcatString(e.Docenten),lokaal:this.createConcatString(e.Lokalen),vak:this.createConcatString(e.Vakken),status:e.Status,heeftBijlagen:e.HeeftBijlagen,opdrachtId:e.OpdrachtId,herhaalStatus:e.HerhaalStatus,herhaling:e.Herhaling,isOnlineDeelname:e.IsOnlineDeelname}},t.prototype.createConcatString=function(t){var n="";if(null!==t&&e.isDefined(t)&&t.length){var r=i.pluck(t,"Naam");r.length>0&&(n=r.join(", "))}return n},t}()}).call(this,n(1),n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(8),r=function(){function e(){this.ConfigItems=new Map;var e=new Map;e.set(i.h.GET,{DataTemplate:globalSettings.apiHost+"api/personen/:persoonId/berichten"}),this.ConfigItems.set("berichten",e);var t=globalSettings.apiHost+"api/personen/:persoonId/berichten/:berichtId",n=new Map;n.set(i.h.GET,{DataTemplate:t}),n.set(i.h.PUT,{DataTemplate:t}),n.set(i.h.DELETE,{DataTemplate:t}),n.set(i.h.POST,{DataTemplate:globalSettings.apiHost+"api/personen/:persoonId/berichten"}),this.ConfigItems.set("berichtDetail",n)}return e.$inject=[e],e}()},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(0),o=function(){function t(){}return t.prototype.appendApiKey=function(){return function(n){if(e.isString(n)&&""!==n)return(n+=-1===n.indexOf("?")?"?":"&")+t.APIKEY_QUERY_STRING}},t.prototype.limitCharacters=function(){var t=this;return function(n,i,r,o,a){return void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===a&&(a="..."),e.isDefined(n)?e.isNumber(i)?i<=0?"":n&&n.length>i?(n=t.chopInput(n,i,o,r))+a:n:n:""}},t.prototype.chopInput=function(e,t,n,i){if(n)e=e.substring(0,t);else{var r=e.trim().match(/\s/g).length;e=e.substring(0,t+r)}if(i)for(;" "===e.charAt(e.length-1);)e=e.substr(0,e.length-1);else{var o=e.lastIndexOf(" ");-1!==o&&(e=e.substr(0,o))}return e},t.prototype.limitWords=function(){return function(t,n,i){if(!e.isDefined(t))return"";if(!e.isNumber(n))return t;if(n<=0)return"";e.isDefined(i)||(i="...");var r=t.split(/\s+/);return r.length>n&&(t=r.slice(0,n).join(" ")+i),t}},t.prototype.capitalize=function(){return function(e){return Object(r.d)(e)}},t.prototype.commaseparated=function(){return function(e,t,n){return null!=e?null!=n?i.map(e,function(e){return e[n]}).join(t):e.join(t):""}},t.prototype.stripHtml=function(){return function(e){if(null!=e&&0!==e.length){var t=document.createElement("div");return t.innerHTML=e,t.textContent}return e}},t.prototype.stripHtmlShowFirstLine=function(){return function(e){if(null!=e&&0!==e.length){var t=document.createElement("div");return t.innerHTML=e,t.textContent.replace(/^\s+|\s+$/g,"").split("\n")[0]}return e}},t.prototype.mappen=function(){return function(e){return e.Type>=Contracts.Bronnen.Enums.BronType.Map?e:null}},t.prototype.determineFileIcon=function(){return function(e){var n=t.getContentTypeIconMap();if(void 0===e.Naam||null===e.Naam||Object(r.u)(e.ContentType))return"icon-unknown";var i=e.ContentType.substr(0,e.ContentType.lastIndexOf("/")).toLowerCase();"application"===i&&(i=e.ContentType);var o=n[i];return Object(r.w)(o)&&t.isHyperlink(e.Url)&&(o="icon-link"),o||"icon-unknown"}},t.isHyperlink=function(e){return!Object(r.w)(e)&&(0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("www."))},t.getContentTypeIconMap=function(){return{audio:"icon-sound-on",image:"icon-picture",message:"icon-document",text:"icon-document",video:"icon-movie","application/msword":"icon-document","application/pdf":"icon-document","application/vnd.ms-excel":"icon-document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"icon-document","application/vnd.ms-powerpoint":"icon-presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation":"icon-presentation","application/vnd.visio":"icon-presentation","application/vnd.ms-works":"icon-document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"icon-document"}},t.prototype.sizeConverter=function(){return function(e,t){if(!isFinite(e)||0===e)return"-";void 0===t&&(t=1);var n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(n))).toFixed(t)+" "+["bytes","kB","MB","GB","TB","PB"][n]}},t.prototype.getLinkNavigateUrl=function(){return function(e,t){var n=r.a[t];if(Object(r.w)(n))throw"MagisterFilters::getLinkNavigateUrl() "+t+" is een ongeldig LinkType";return Object(r.j)(e,n)}},t.prototype.mapColor=function(){return function(t,n){var i=n+"-",r=["blauw","geel","groen","rood","paars","cyan","donker-oranje","magenta","blauwemist","paarsemint","licht-oranje","citroengeel","appel","groenblauw","rodekalk","zilver"];return e.isDefined(r[t])?i+=r[t]:i+="white",i}},t.prototype.concatenateItemsWithSeparator=function(){return function(t,n,o){var a="";return e.isDefined(t)&&e.isDefined(n)?(i.each(t,function(e){Object(r.w)(e[n])||(a+=e[n],a+=o)}),a[a.length-1]===o&&(a=a.substr(0,a.length-1)),a):a}},t.prototype.getValuesFromProperties=function(){return function(n,r,o){if(void 0===o&&(o=","),e.isUndefined(n))return"";var a=r.substr(0,r.lastIndexOf("|")),s="true"===r.substr(r.lastIndexOf("|")+1,r.length-1).trim(),l=[],d=a.split(",");return i.each(d,function(i){var r=i.trim();e.isDefined(n[r])?s?0===l.length&&l.push(n[r]):l.push(n[r]):-1===r.indexOf(".")||s&&0!==l.length||(l=t.getValueFromDeepProperty(n,r,l))}),l.join(o)}},t.getValueFromDeepProperty=function(t,n,r){var o=n.split(".");i.each(o,function(e,t){var n=e.indexOf("[");if(-1!==n){var i=e.substring(0,n),r=e.substring(n+1,e.indexOf("]"));o.splice(t,1,i),o.splice(t+1,0,r)}});var a=t[o[0]];if(e.isUndefined(a))return r;for(var s=1;s<o.length&&(!e.isUndefined(a)&&null!==a);s++){a=a[o[s]]}return e.isDefined(a)&&null!==a&&r.push(a),r},t.prototype.insertString=function(){return function(e,t,n){return e.slice(0,t)+n+e.slice(t)}},t.prototype.highLightSubString=function(){return function(e,n){if(n=n.toLowerCase(),!Object(r.p)(e)){var i=e.toLowerCase().indexOf(n),o=e.toLowerCase().indexOf(n)+n.length;i>-1&&(e=t.prototype.insertString()(e,o,"</b>"),e=t.prototype.insertString()(e,i,"<b>"))}return e}},t.prototype.unique=function(t){return function(n,r,o){var a=[],s=[];return e.forEach(n,function(n){var l=n[r];e.isDefined(o)&&(l=t("date")(l,o)),-1===i.indexOf(s,l)&&(s.push(l),a.push(n))}),a}},t.prototype.numberZeroPadding=function(e){return function(e,t,n){void 0===n&&(n=!0);var i=parseFloat(e),o=parseInt(t,r.b);if(isNaN(i)||isNaN(o))return e;for(var a=i.toString();a.length<o;)a=(n?"0":"")+a+(n?"":"0");return a}},t.prototype.concatenateVakOmschrHnivoDispVrij=function(e){return function(e,t,n,i){if(!Object(r.p)(e))return Object(r.h)("{0}{1} {2} {3}",e,t?"*":"",n?" (O)":"",i?" (Vr)":"")}},t.APIKEY_QUERY_STRING=globalSettings.apiKeyHeader+"="+globalSettings.apiKey,t}()}).call(this,n(1),n(3))},function(e,t){e.exports='<div>\r\n    <div class="content">\r\n        <div ng-show="mediaType === undefined || mediaType === 3">\r\n            <img width="274" height="128" data-ng-src="assets/images/PlayerPlaceHolder.png" />\r\n        </div>\r\n        <div ng-show="mediaType === 1">\r\n            <video class="smVideo" width="274" height="128" data-ng-src="{{videoSource}}" controls autoplay></video>\r\n        </div>\r\n        <div ng-show="mediaType === 0">\r\n            <audio data-ng-src="{{audioSource}}" controls autoplay></audio>\r\n        </div>\r\n        <div data-ng-if="mediaType == 4">\r\n            <div style="height:226px;">\r\n                <iframe style="overflow:hidden;height:100%;width:100%" width="100%" height="100%" data-ng-src="{{youTubeUrl}}" frameborder="0" allowfullscreen></iframe>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <footer class="endlink">\r\n        <a ng-show="mediaType === 1 || mediaType === 0" mg-download-file="{{getContentUri()}}" class="left">download bestand</a>\r\n    </footer>\r\n</div>\r\n'},function(e,t){e.exports='<div class="widget">\r\n    <div class="block">\r\n        <h3>Bronnen</h3>\r\n        \x3c!--<div data-loading-indicator=\'\'></div>--\x3e\r\n        <div class="sources">\r\n            <h3 data-ng-click="selectParent()">\r\n                <span data-ng-show="navigationToParent()" class="glyph icon-back"></span>\r\n                <b data-ng-bind="selectedBron.Naam"></b>\r\n            </h3>\r\n            <div class="content-auto" data-sm-loading-indicator="{domain: \'bronnen\', className: \'icon-paper\', overlay: false}">\r\n                <ul class="list">\r\n                    <li data-ng-repeat="bron in bronnen.mappen"\r\n                        class="map"\r\n                        data-ng-click="selectItem(bron)"\r\n                        id="{{bron.Id}}">\r\n                        <a data-ng-bind="bron.Naam"></a>\r\n                    </li>\r\n                    <li data-ng-repeat="bron in bronnen.bestanden | orderBy: \'Naam\'"\r\n                        class="{{bron | determineFileIconBronnen}}"\r\n                        data-ng-class="{\'selected\': bron.Id === selectedFile.Id}"\r\n                        data-sm-drag-drop="{drag: true}" data-hint-element="createHintElement"\r\n                        id="{{bron}}"\r\n                        data-type="2"\r\n                        data-ng-click="selectBron(bron)"\r\n                        data-sm-open-linked-resource="getContentUri(bron)">\r\n                            <a><span data-ng-bind="bron.Naam"></span></a>\r\n                    </li>\r\n                </ul>\r\n                <p class="empty-message" data-ng-show="bronnen.mappen.length === 0 && bronnen.bestanden.length === 0">Geen items in deze map.</p>\r\n            </div>\r\n        </div>\r\n        <footer class="endlink" data-ng-show="showAddBron">\r\n            <a data-ng-click="addSelectedBron()" id="bronnen-toevoegen" data-ng-class="{\'active\': selectedFile}" data-ng-bind="labelToevoegen"></a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e,i,r){n.d(t,"a",function(){return c});var o=n(124),a=n(89),s=n(86),l=n(0),d=Contracts.Bronnen.Enums.BronType,c=function(){function t(e,t,n,i,r,o){this.$http=e,this.$resource=t,this.$q=n,this.applicationService=i,this.bronHelper=r,this.oneDriveForBusinessResource=o,this.kennisnetDienstenUri=globalSettings.apiHost+"api/personen/:persoonId/kennisnet/diensten",this.bronnenUri=globalSettings.apiHost+"api/personen/:persoonId/bronnen",this.videoExtensions="mp4 avi 264 m2v vc1 yuv wmv f4v raw m2ts m3u8 ismv mov 3gpp 3gp 3g2 flv mkv m2v m1v mts ts trp mpg mpeg mp4 h264 mxf divx xvid vob asf",this.audioExtensions="aac aif aifc aiff au flac m4a mid midi mp3 mpa opus rmi snd wav",this.bronDetailResource=t(this.bronnenUri+"/:bronId",{persoonId:"@persoonId",bronId:"@Id"},{update:{method:"PUT"},verwijderBron:{method:"DELETE"}}),this.bronnenOverzichtResource=t(this.bronnenUri,{persoonId:"@persoonId",parentId:"@parentId",soort:"@soort"}),this.kennisnetResource=t(this.kennisnetDienstenUri,{persoonId:"@persoonId"})}return t.prototype.getBron=function(e,t){var n={persoonId:e,bronId:t};return this.bronDetailResource.get(n).$promise},t.prototype.getBronByUri=function(e){return this.$resource(e).get().$promise},t.prototype.crossloadLiveFile=function(e){return this.$resource(e).get().$promise},t.prototype.oneDriveForBusinessToLocal=function(e){return this.$resource(e).get().$promise},t.prototype.getRoot=function(e){var t={persoonId:e,soort:o.b.DocumentOfMap};return this.bronnenOverzichtResource.get(t).$promise},t.prototype.findRootId=function(e){return e.parent&&0!==e.parent.Id?this.findRootId(e.parent):e.Id},t.prototype.getBronnen=function(t,n){var i=this;void 0===n&&(n=0);var r=this.$q.defer(),o=t.Links;o||(o=t.links);var a=Object(l.j)(o,l.a.Children);if(null===a&&(a=Object(l.j)(o,l.a.children)),Object(l.w)(a)){r.resolve({Items:[],Links:[],TotalCount:0})}else this.$resource(a).get().$promise.then(function(o){o.items?(o.Items=e.map(o.items,function(e,r){return i.mapToItem(t,n,e,r)}),o.Links=o.links):o.Items=e.map(o.Items,function(t){return e.extend(t,{RootId:n})}),r.resolve(o)});return r.promise},t.prototype.getQuota=function(e,t){var n=this.$q.defer();return"onbekend"===this.getMapIdentifierFromFolderId(e)&&n.reject("Bibliotheek met ID "+e+" lijkt geen bibliotheek te zijn waarvoor quota informatie beschikbaar is."),t||n.reject("Quota informatie kan niet opgehaald worden"),this.$http.get(t.Href).then(function(e){var t={totaal:e.data.totaal,beschikbaar:e.data.beschikbaar,gebruikt:e.data.totaal-e.data.beschikbaar};n.resolve(t)}).catch(function(e){n.reject(e)}),n.promise},t.prototype.extractDownloadLInk=function(e){if((e.Type&d.OneDriveForBusiness)===d.OneDriveForBusiness)return Object(l.j)(e.Links,l.a.download);var t=Object(l.j)(e.Links,l.a.Contents);return this.getMediaType(e)===a.a.Video?t+"?download=true":t},t.prototype.mapToItem=function(e,t,n,r){return{UniqueId:n.id,Id:this.getUniqueId(),ParentId:e.Id,Volgnr:r,Naam:n.naam,Type:this.getBronType(n.type,t),ContentType:n.contentType,Links:n.links,Uri:this.getDownloadLink(n.links),Privilege:Contracts.Bronnen.Enums.BronPrivilege.Eigenaar,RootId:t,Grootte:i.isDefined(n.grootte)?n.grootte:0}},t.prototype.getUniqueId=function(){return this.uniqueIdBase&&0!==this.uniqueIdBase||(this.uniqueIdBase=r().valueOf()),this.uniqueIdBase=this.uniqueIdBase+1,this.uniqueIdBase},t.prototype.getDownloadLink=function(t){var n=e.find(t,function(e){return"download"===e.rel});return n?n.href:""},t.prototype.getBronType=function(t,n){var i=d.Onbekend;return e.contains(t,"map")&&(i|=d.Map),e.contains(t,"document")&&(i|=d.Document),n===s.a.OneDriveForBusiness&&(i|=d.OneDriveForBusiness),i},t.prototype.verwijderBron=function(e,t){var n={persoonId:e,bronId:t};return this.bronDetailResource.verwijderBron(n).$promise},t.prototype.wijzigBron=function(e,t,n){var i={persoonId:e,bronId:t},r=this.$q.defer();return n.RootId===s.a.OneDriveForBusiness?this.oneDriveForBusinessResource.updateDetail(n,e,t).then(function(e){r.resolve(e)},function(e){r.reject(e)}):this.bronDetailResource.update(i,n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},t.prototype.wijzigBronNaam=function(e,t,n){return t.Naam=n,this.wijzigBron(e,t.Id,t)},t.prototype.wijzigBronUrl=function(e,t,n){return t.Uri=n,this.wijzigBron(e,t.Id,t)},t.prototype.nieuwUrl=function(e,t,n,i){var r={BronSoort:Contracts.Bronnen.Enums.BronSoort.Url,Naam:n,Uri:i,Type:d.Link,Privilege:Contracts.Bronnen.Enums.BronPrivilege.Eigenaar,ParentId:t};return this.maakNieuweBron(e,r)},t.prototype.maakNieuweBron=function(e,t,n){return void 0===n&&(n=null),t.RootId===s.a.OneDriveForBusiness?this.submitOneDriveForBusinessBron(e,t,n):this.submitRegularBron(e,t)},t.prototype.submitOneDriveForBusinessBron=function(e,t,n){return this.submitOneDriveBron(this.oneDriveForBusinessResource,e,t,n)},t.prototype.submitOneDriveBron=function(e,t,n,i){var r=this.$q.defer();return n.RootId===n.ParentId?e.saveRootItem(n,t).then(function(e){r.resolve(e)},function(e){var t=e;Object(l.w)(e.data)||Object(l.w)(e.data.Message)||(t=e.data.Message),r.reject(t)}):e.saveItem(n,t,i.map.UniqueId).then(function(e){r.resolve(e)},function(e){var t=e;Object(l.w)(e.data)||Object(l.w)(e.data.Message)||(t=e.data.Message),r.reject(t)}),r.promise},t.prototype.submitRegularBron=function(e,t){var n,i=this.$q.defer();return n={persoonId:e},this.bronnenOverzichtResource.save(n,t,function(e){i.resolve(e)},function(e){var t=e;Object(l.w)(e.data)||Object(l.w)(e.data.Message)||(t=e.data.Message),i.reject(t)}),i.promise},t.prototype.getKennisnetDiensten=function(t){var n=this,i=this.$q.defer(),r=[],o={persoonId:t};return this.kennisnetResource.get(o,function(t){e.each(t.Items,function(e,t){var i=n.mapKennisnetDienstToBronDto(t+1,e.Omschrijving,e.Url);r.push(i)}),i.resolve(r)}),i.promise},t.prototype.mapKennisnetDienstToBronDto=function(e,t,n){return{Id:e,Links:[{Rel:l.a[l.a.redirect],Href:n}],BronSoort:Contracts.Bronnen.Enums.BronSoort.Url,Naam:t,Referentie:0,Uri:n,Grootte:0,Privilege:Contracts.Bronnen.Enums.BronPrivilege.Eigenaar,Type:d.Link|d.Kennisnet,ContentType:"",GewijzigdOp:new Date,GeplaatstDoor:"",GemaaktOp:new Date,FileBlobId:0,ParentId:0,UniqueId:"",Volgnr:0,ModuleSoort:null}},t.prototype.createMap=function(e,t,n){var i={Links:[],BronSoort:0,Naam:n,Referentie:0,Privilege:Contracts.Bronnen.Enums.BronPrivilege.Eigenaar,Type:d.Map,ContentType:"",ParentId:t};return this.maakNieuweBron(e,i)},t.prototype.createFolder=function(e,t){return{map:{Id:null,Links:[],BronSoort:Contracts.Bronnen.Enums.BronSoort.Bestand,Naam:e,Referentie:0,Uri:"",Grootte:0,Privilege:Contracts.Bronnen.Enums.BronPrivilege.Eigenaar,Type:d.Map,ContentType:"",GewijzigdOp:new Date,GeplaatstDoor:"",GemaaktOp:new Date,FileBlobId:0,ParentId:t,UniqueId:"",Volgnr:0,ModuleSoort:null},Id:0,bestanden:[],mappen:[],parent:null,isCollapsed:!0,caption:e}},t.prototype.addStateToBronnen=function(t,n,i){e.each(t.Items,function(e){})},t.prototype.relocateOneDriveFolder=function(t){return t=e.sortBy(t,function(e){return e.Id===s.a.OneDriveForBusiness?3:-1*e.Id})},t.prototype.getMediaType=function(e){return this.bronHelper.getMediaType(e.Naam,e.Uri)},t.prototype.resetBronContentUri=function(e){var t=Object(l.j)(e.Links,l.a.Contents);null===t&&(t=Object(l.j)(e.Links,l.a.download)),t&&(e.Uri=t)},t.prototype.decomposeFileName=function(e){var t={name:"",extension:""};return!Object(l.w)(e)&&e.length>0&&("."===e.substr(e.length-1,1)||-1===e.lastIndexOf(".")?t.name=e:(t.extension=e.substr(e.lastIndexOf(".")+1,e.length),t.name=e.substr(0,e.lastIndexOf(".")))),t},t.prototype.getMapIdentifierFromFolderId=function(e){var t;switch(e){case-1:t="persoonlijk";break;case-9:t="gedeeld";break;case-99:t="prullenbak";break;default:t="onbekend"}return t},t.$inject=["$http","$resource","$q","applicationService","bronHelper","oneDriveForBusinessResource",t],t}()}).call(this,n(3),n(1),n(15))},function(e,t,n){"use strict";var i,r;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),function(e){e[e.DocumentOfMap=0]="DocumentOfMap",e[e.Document=1]="Document",e[e.Map=2]="Map"}(i||(i={})),function(e){e[e.Weergave=0]="Weergave",e[e.Toegang=1]="Toegang",e[e.Multimedia=2]="Multimedia"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i,r){this.$q=e,this.$resource=t,this.utilitiesResource=n,this.hateOsResource=i,this.currentUser=r}return e.prototype.getUtilities=function(){var e=this.$q.defer();return this.utilitiesResource.get().then(function(t){e.resolve(t)}),e.promise},e.prototype.redirectToUtility=function(e){this.utilitiesResource.redirect(e)},e.$inject=["$q","$resource","utilitiesResource","hateOsResource","currentUser",e],e}()},function(e,t){e.exports='<div id="opdrachten-container" class="container sidecolumn" tabindex="0" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Opdrachten</h1>\r\n        <div id="quayn-link" ng-show="shownQuaynLink">\r\n            <a data-ng-click="onClickQuaynCursistenPortaal()">\r\n                <i class="far fa-external-link-square-alt"></i>\r\n                <span>Toetsportaal</span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container full-width" data-sm-loading-indicator="{domain: \'opdrachten\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-pencil\', overlay: true}">\r\n            <div class="scroll-table opdrachten-list {{rijHoogte}}">\r\n                <table class="data-overview table-grid-layout">\r\n                    <colgroup>\r\n                        <col width="100" />\r\n                        <col width="50%" />\r\n                        <col width="100" />\r\n                        <col width="150" />\r\n                        <col width="100" />\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr class="head">\r\n                            <th>Vak</th>\r\n                            <th>Opdracht</th>\r\n                            <th>Inleveren</th>\r\n                            <th>Status</th>\r\n                            <th>Beoordeling</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr data-ng-repeat="opdracht in opdrachten" data-ng-class="{\'overdue\': opdracht.IsOverdue && (opdracht.OpdrachtStatus === 2 || opdracht.OpdrachtStatus === 0), \'selected\': selectedOpdracht.Id === opdracht.Id}" data-ng-click="selectOpdracht(opdracht.Id)" data-sm-notify-complete="opdrachten">\r\n                            <td data-ng-bind="opdracht.Vak"></td>\r\n                            <td data-ng-bind="opdracht.Titel"></td>\r\n                            <td data-ng-bind="opdracht.InleverenVoor | date:\'dd-MM-yy\'"></td>\r\n                            <td>\r\n                                <div ng-if="!opdracht.Afgesloten" data-ng-switch="opdracht.OpdrachtStatus">\r\n                                    <span data-ng-switch-when="0">Openstaand</span>\r\n                                    <span data-ng-switch-when="1">Ingeleverd ({{opdracht.LaatsteOpdrachtVersienummer  || \'onbekend\'}})</span>\r\n                                    <span data-ng-switch-when="2">Openstaand</span>\r\n                                    <span data-ng-switch-when="3">Beoordeeld</span>\r\n                                </div>\r\n                                <div ng-if="opdracht.Afgesloten">\r\n                                    <span>Afgesloten</span>\r\n                                </div>\r\n                            </td>\r\n                            <td data-ng-bind="getBeoordeling(opdracht)"></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div sm-no-items="sm-no-items" data-items="opdrachten"></div>\r\n        </div>\r\n    </section>\r\n    <div data-sm-opdracht-instellingen-directive="instellingen"></div>\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-sm-opdrachten-selectie-filter></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t){e.exports='<div id="studiewijzer-detail-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <div class="head-bar studiewijzer-details">\r\n        <a href="" data-ng-click="terug()">\r\n            <h1>\r\n                <a ng-click="terug()">\r\n                    <i class="far fa-chevron-circle-left"></i>\r\n                </a>\r\n                <span data-ng-bind="studiewijzer.Titel"></span>\r\n            </h1>\r\n        </a>\r\n        <div aria-haspopup="true" class="dropdown-menu">\r\n            <a title="onderdelen">\r\n                onderdelen\r\n            </a>\r\n            <ul class="foldout">\r\n                <li><a data-ng-click="unFoldAll()">alles openvouwen</a></li>\r\n                <li><a data-ng-click="foldAll()">alles dichtvouwen</a></li>\r\n            </ul>\r\n        </div>\r\n        <div data-ng-if="showBronnen()">\r\n            \x3c!--project--\x3e\r\n            <a data-ng-click="projectFolderClick(projectFolder)">projectmap openen</a>\r\n        </div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container widget-container studiewijzer-content-container" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false"\r\n        ng-class="{\'menu-is-collapsed\': !$root.menuExpanded}">\r\n            <ul>\r\n                <li class="studiewijzer-onderdeel" data-ng-repeat="item in studiewijzer.Onderdelen.Items">\r\n                    <div data-studiewijzer-onderdeel-directive="onderdeel"></div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Studiewijzers" id="idStudiewijzers">\r\n            <div data-studiewijzer-selectie="studiewijzer-selectie-directive" class="full-height"></div>\r\n        </sm-tab>\r\n        <sm-tab title="Multimedia" id="idMultimedia">\r\n            <div data-studiewijzer-multimedia="studiewijzer-multimedia-directive"></div>\r\n        </sm-tab>\r\n        <sm-tab title="Bronnen" id="idBronnen">\r\n            <div data-studiewijzer-bronnen="studiewijzer-bronnen-directive" class="full-height"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(0),r=function(){function e(e,t){this.ouderavondResource=e,this.currentUser=t}return e.prototype.getPersoneel=function(e){return this.ouderavondResource.ouderavonden.getPersoneelVoorOuderavond(e)},e.prototype.getConfiguratie=function(e){return this.ouderavondResource.ouderavonden.getOuderavondConfiguratie(e)},e.prototype.getGespreksverzoeken=function(e){return this.ouderavondResource.ouderavonden.getOuderavondGespreksverzoeken(e)},e.prototype.getUitnodigingen=function(){return this.ouderavondResource.ouderavonden.uitnodigingen.get()},e.prototype.getUitnodiging=function(e,t){return this.ouderavondResource.ouderavonden.uitnodigingen.getUitnodiging(e,t)},e.prototype.putUitnodiging=function(e,t){return this.ouderavondResource.ouderavonden.uitnodigingen.put(e,t)},e.prototype.getInschrijving=function(e){return this.ouderavondResource.ouderavonden.uitnodigingen.inschrijving.get(e)},e.prototype.postInschrijving=function(e,t){return this.ouderavondResource.ouderavonden.uitnodigingen.inschrijving.post(e,t)},e.prototype.putInschrijving=function(e,t){return this.ouderavondResource.ouderavonden.uitnodigingen.inschrijving.put(e,t)},e.prototype.getMenuButtonStatus=function(){return this.ouderavondResource.getMenuButtonStatus()},e.prototype.getLeerlingNaamById=function(e){var t=this.currentUser.relatedPersons.getById(e);return Object(i.w)(t)?null:t.fullName},e.$inject=["ouderavondenResource","currentUser",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(8),r=function(){function e(e,t){this.$q=e,this.ouderavondService=t}return e.prototype.showItem=function(){var e=this.$q.defer();return this.getMenuButtonStatus().then(function(t){switch(t.Status){case 1:e.resolve(i.i.SHOW);break;case 2:e.resolve(i.i.HIGHLIGHT);break;default:e.resolve(i.i.HIDDEN)}}),e.promise},e.prototype.getMenuButtonStatus=function(){var e=this.$q.defer();return this.ouderavondService.getMenuButtonStatus().then(function(t){e.resolve(t)}),e.promise},e.$inject=["$q","ouderavondService",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.createResource(this.ouderavonden,this.$resource)}return e.prototype.createResource=function(t,n){var i=e.ouderavondenUitnodigingenUri+"/:uitnodigingId",r=e.ouderavondenUri+"/:ouderavondId/inschrijvingen",o=i+"/personeel",a=e.ouderavondenUri+"/:ouderavondId/configuratie",s=globalSettings.apiHost+"api/personen/:persoonId/ouderavonden/:ouderavondId/uitnodiging",l=globalSettings.apiHost+"api/ouderavonden/:ouderavondId/gespreksverzoeken",d=globalSettings.apiHost+"api/ouderavonden/weergavestatus";this.getMenuButtonStatus=function(){return n(d).get().$promise},this.ouderavonden={getPersoneelVoorOuderavond:function(e){return n(o,{uitnodigingId:"@uitnodigingId"}).get({uitnodigingId:e}).$promise},getOuderavondConfiguratie:function(e){return n(a,{ouderavondId:"@ouderavondId"}).get({ouderavondId:e}).$promise},getOuderavondGespreksverzoeken:function(e){return n(l,{ouderavondId:"@ouderavondId"}).get({ouderavondId:e}).$promise},uitnodigingen:{get:function(){return n(e.ouderavondenUitnodigingenUri).get().$promise},put:function(e,t){return n(i,{uitnodigingId:"@uitnodigingId"},{put:{method:"PUT"}}).put({uitnodigingId:e},t).$promise},getUitnodiging:function(e,t){return n(s,{persoonId:"@persoonId",ouderavondId:"@ouderavondId"}).get({persoonId:t,ouderavondId:e}).$promise},inschrijving:{get:function(e){return n(e).get().$promise},post:function(e,t){return n(r,{ouderavondId:"@ouderavondId"}).save({ouderavondId:e},t).$promise},put:function(e,t){return n(e,{},{put:{method:"PUT"}}).put({},t).$promise}}}}},e.ouderavondenUri=globalSettings.apiHost+"api/ouderavonden",e.ouderavondenUitnodigingenUri=e.ouderavondenUri+"/uitnodigingen",e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$q=e,this.$resource=t}return e.prototype.getKlasseMentoren=function(e){return this.getResource("api/groepen/:groepId/mentoren",{groepId:e},"GET",!1)},e.prototype.getResource=function(e,t,n,i){var r=t,o=globalSettings.apiHost+e;return this.$resource(o,r,{get:{isArray:i,method:n}}).get().$promise},e.$inject=["$q","$resource",e],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(e,t,n){this.$q=e,this.$resource=t,this.aanmeldingService=n}return t.prototype.getVakken=function(t,n){return e.isDefined(n)?this.getInternalVakken(t,n):this.getVakkenVoorHudigeAanmelding(t)},t.prototype.getVakkenVoorHudigeAanmelding=function(e){var t,n=this,i=this.$q.defer();return this.aanmeldingService.getLeerlingAanmeldingen(Number.parseInt(e)).then(function(r){var o=r;o.length>0?(t=o[0],n.getInternalVakken(e,t.Id.toString()).then(function(e){i.resolve(e)})):i.resolve([])}),i.promise},t.prototype.getInternalVakken=function(e,t){return this.getResource("api/personen/:persoonId/aanmeldingen/:aanmeldingId/vakken",{persoonId:e,aanmeldingId:t},"GET",!0)},t.prototype.getResource=function(e,t,n,i){var r=t,o=globalSettings.apiHost+e;return this.$resource(o,r,{get:{isArray:i,method:n}}).get().$promise},t.$inject=["$q","$resource","aanmeldingenService",t],t}()}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o});var i={SUCCESS_MESSAGE:"U kunt uw keuze terugvinden en aanpassen bij de gegevens van uw kind.",ERROR_MESSAGE:"Er is iets misgegaan bij het opslaan van uw selectie.",PENDING_MESSAGE:"Uw selectie wordt opgeslagen.",CLOSE_BUTTON:"Terug naar het gegevensscherm"},r={SUCCESS_MESSAGE:"Je kunt je keuze terugvinden en aanpassen bij je gegevens.",ERROR_MESSAGE:"Er is iets misgegaan bij het opslaan van je selectie",PENDING_MESSAGE:"Je selectie wordt opgeslagen.",CLOSE_BUTTON:"Terug naar mijn gegevens"},o={header:"Pagina verlaten?",message:"De gewijzigde inhoud gaat hiermee verloren.",labels:{cancel:"Annuleren",confirm:"Ja, verlaten"}}},,,,,,function(e,t,n){(function(i,r,o){var a,s,l;n(117),s=[],void 0===(l="function"==typeof(a=function(){return function(e,t,n){function r(){}function o(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),i=e.substring(1);return"="===n?"+("+i+")+":":"===n?"+$kendoHtmlEncode("+i+")+":";"+e+";$kendoOutput+="}function a(e,t,n){return(n=(t=t||2)-(e+="").length)?R[t].substring(0,n)+e:e}function s(e){var t=e.css(ae.support.transitions.css+"box-shadow")||e.css("box-shadow"),n=t&&t.match(ve)||[0,0,0,0,0],i=he.max(+n[3],+(n[4]||0));return{left:-n[1]+i,right:+n[1]+i,bottom:+n[2]+i}}function l(e){var t=1,n=arguments.length;for(t=1;n>t;t++)d(e,arguments[t]);return e}function d(e,t){var n,i,r,o,a,s=ae.data.ObservableArray,l=ae.data.LazyObservableArray,c=ae.data.DataSource,u=ae.data.HierarchicalDataSource;for(n in t)(o=(r=typeof(i=t[n]))===ye&&null!==i?i.constructor:null)&&o!==Array&&o!==s&&o!==l&&o!==c&&o!==u?i instanceof Date?e[n]=new Date(i.getTime()):y(i.clone)?e[n]=i.clone():(a=e[n],e[n]=typeof a===ye&&a||{},d(e[n],i)):r!==Se&&(e[n]=i);return e}function c(e,t,i){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return i!==n?i:e}function u(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function h(t,n){var i,r={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),n&&e.each(n,function(e,t){r[t]=i.getPropertyValue(t)})):(i=t.currentStyle,n&&e.each(n,function(e,t){r[t]=i[u(t)]})),ae.size(r)||(r=i),r}function p(e,t,n,i){return typeof e===ke&&(y(t)&&(i=t,t=400,n=!1),y(n)&&(i=n,n=!1),typeof t===Ce&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),se({effects:{},duration:400,reverse:!1,init:ue,teardown:ue,hide:!1},e,{completeCallback:e.complete,complete:ue})}function f(t,n,i,r,o){for(var a,s=0,l=t.length;l>s;s++)(a=e(t[s])).queue(function(){M.promise(a,p(n,i,r,o))});return t}function g(e,t){var i;return 0===t.indexOf("data")&&(t=(t=t.substring(4)).charAt(0).toLowerCase()+t.substring(1)),t=t.replace(K,"-$1"),null===(i=e.getAttribute("data-"+ae.ns+t))?i=n:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:be.test(i)?i=parseFloat(i):G.test(i)&&!q.test(i)&&(i=Function("return ("+i+")")()),i}function m(t,i){var r,o,a={};for(r in i)(o=g(t,r))!==n&&(W.test(r)&&(o=ae.template(e("#"+o).html())),a[r]=o);return a}function v(t,n){return e.contains(t,n)?-1:1}function b(){var t=e(this);return e.inArray(t.attr("data-"+ae.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function _(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function k(e,t){return new k.fn.init(e,t)}var w,y,x,C,S,T,D,I,E,A,O,R,P,M,F,H,N,$,L,z,j,B,U,V,W,G,q,K,Y,Q,X,J,Z,ee,te,ne,ie,re,oe,ae=t.kendo=t.kendo||{cultures:{}},se=e.extend,le=e.each,de=e.isArray,ce=e.proxy,ue=e.noop,he=Math,pe=t.JSON||{},fe={},ge=/%/,me=/\{(\d+)(:[^\}]+)?\}/g,ve=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,be=/^(\+|-?)\d+(\.?)\d*$/,_e="function",ke="string",we="number",ye="object",xe="null",Ce="boolean",Se="undefined",Te={},De={},Ie=[].slice,Ee=t.Globalize;ae.version="2015.2.902",r.extend=function(e){var t,n,i=function(){},r=this,o=e&&e.init?e.init:function(){r.apply(this,arguments)};for(t in i.prototype=r.prototype,n=o.fn=o.prototype=new i,e)n[t]=null!=e[t]&&e[t].constructor===Object?se(!0,{},i.prototype[t],e[t]):e[t];return n.constructor=o,o.extend=r.extend,o},r.prototype._initOptions=function(e){this.options=l({},this.options,e)},y=ae.isFunction=function(e){return"function"==typeof e},x=function(){this._defaultPrevented=!0},C=function(){return!0===this._defaultPrevented},S=r.extend({init:function(){this._events={}},bind:function(e,t,i){var r,o,a,s,l=this,d=typeof e===ke?[e]:e,c=typeof t===_e;if(t===n){for(r in e)l.bind(r,e[r]);return l}for(r=0,o=d.length;o>r;r++)e=d[r],(s=c?t:t[e])&&(i&&(a=s,(s=function(){l.unbind(e,s),a.apply(l,arguments)}).original=a),(l._events[e]=l._events[e]||[]).push(s));return l},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,i,r,o=this,a=typeof e===ke?[e]:e,s=typeof t===_e;for(n=0,i=a.length;i>n;n++)e=a[n],(r=s?t:t[e])&&(o._events[e]=o._events[e]||[]).unshift(r);return o},trigger:function(e,t){var n,i,r=this,o=r._events[e];if(o){for((t=t||{}).sender=r,t._defaultPrevented=!1,t.preventDefault=x,t.isDefaultPrevented=C,n=0,i=(o=o.slice()).length;i>n;n++)o[n].call(r,t);return!0===t._defaultPrevented}return!1},unbind:function(e,t){var i,r=this,o=r._events[e];if(e===n)r._events={};else if(o)if(t)for(i=o.length-1;i>=0;i--)(o[i]===t||o[i].original===t)&&o.splice(i,1);else r._events[e]=[];return r}}),T=/^\w+/,D=/\$\{([^}]*)\}/g,I=/\\\}/g,E=/__CURLY__/g,A=/\\#/g,O=/__SHARP__/g,R=["","0","00","000","0000"],w={paramName:"data",useWithBlock:!0,render:function(e,t){var n,i,r="";for(n=0,i=t.length;i>n;n++)r+=e(t[n]);return r},compile:function(e,t){var n,i,r,a=se({},this,t),s=a.paramName,l=s.match(T)[0],d=a.useWithBlock,c="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(y(e))return e;for(c+=d?"with("+s+"){":"",c+="$kendoOutput=",i=e.replace(I,"__CURLY__").replace(D,"#=$kendoHtmlEncode($1)#").replace(E,"}").replace(A,"__SHARP__").split("#"),r=0;i.length>r;r++)c+=o(i[r],r%2==0);c+=d?";}":";",c=(c+="return $kendoOutput;").replace(O,"#");try{return(n=Function(l,c))._slotCount=Math.floor(i.length/2),n}catch(t){throw Error(ae.format("Invalid template:'{0}' Generated code:'{1}'",e,c))}}},function(){function e(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return typeof t===ke?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(o,a){var s,d,c,u,h,p,f=n,g=a[o];if(g&&typeof g===ye&&typeof g.toJSON===_e&&(g=g.toJSON(o)),typeof r===_e&&(g=r.call(a,o,g)),(p=typeof g)===ke)return e(g);if(p===we)return isFinite(g)?g+"":xe;if(p===Ce||p===xe)return g+"";if(p===ye){if(!g)return xe;if(n+=i,h=[],"[object Array]"===l.apply(g)){for(u=g.length,s=0;u>s;s++)h[s]=t(s,g)||xe;return c=0===h.length?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+f+"]":"["+h.join(",")+"]",n=f,c}if(r&&typeof r===ye)for(u=r.length,s=0;u>s;s++)typeof r[s]===ke&&(c=t(d=r[s],g))&&h.push(e(d)+(n?": ":":")+c);else for(d in g)Object.hasOwnProperty.call(g,d)&&(c=t(d,g))&&h.push(e(d)+(n?": ":":")+c);return c=0===h.length?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+f+"}":"{"+h.join(",")+"}",n=f,c}}var n,i,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==_e&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?a(e.getUTCFullYear(),4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof pe.stringify!==_e&&(pe.stringify=function(e,o,a){var s;if(n="",i="",typeof a===we)for(s=0;a>s;s+=1)i+=" ";else typeof a===ke&&(i=a);if(r=o,o&&typeof o!==_e&&(typeof o!==ye||typeof o.length!==we))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function t(e){if(e){if(e.numberFormat)return e;if(typeof e===ke){var t=ae.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function i(e){return e&&(e=t(e)),e||ae.cultures.current}function r(e,t,r){var o=(r=i(r)).calendars.standard,s=o.days,l=o.months;return(t=o.patterns[t]||t).replace(d,function(t){var i,r,d;return"d"===t?r=e.getDate():"dd"===t?r=a(e.getDate()):"ddd"===t?r=s.namesAbbr[e.getDay()]:"dddd"===t?r=s.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=a(e.getMonth()+1):"MMM"===t?r=l.namesAbbr[e.getMonth()]:"MMMM"===t?r=l.names[e.getMonth()]:"yy"===t?r=a(e.getFullYear()%100):"yyyy"===t?r=a(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=a(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=a(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=a(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=a(e.getSeconds()):"f"===t?r=he.floor(e.getMilliseconds()/100):"ff"===t?((r=e.getMilliseconds())>99&&(r=he.floor(r/10)),r=a(r)):"fff"===t?r=a(e.getMilliseconds(),3):"tt"===t?r=e.getHours()<12?o.AM[0]:o.PM[0]:"zzz"===t?(d=0>(i=e.getTimezoneOffset()),r=(""+he.abs(i/60)).split(".")[0],i=he.abs(i)-60*r,r=(d?"+":"-")+a(r),r+=":"+a(i)):("zz"===t||"z"===t)&&(d=0>(r=e.getTimezoneOffset()/60),r=(""+he.abs(r)).split(".")[0],r=(d?"+":"-")+("zz"===t?a(r):r)),r!==n?r:t.slice(1,t.length-1)})}function o(e,t,r){var o,a,l,d,_,k,w,y,x,C,S,T,D,I,E,A,O,R,P,M,F,H,N=(r=i(r)).numberFormat,$=N.groupSize[0],L=N[g],z=N[f],j=N.decimals,B=N.pattern[0],U=[],V=0>e,W=p,G=p;if(e===n)return p;if(!isFinite(e))return e;if(!t)return r.name.length?e.toLocaleString():""+e;if(_=c.exec(t)){if(l="p"===(t=_[1].toLowerCase()),((a="c"===t)||l)&&($=(N=a?N.currency:N.percent).groupSize[0],L=N[g],z=N[f],j=N.decimals,o=N.symbol,B=N.pattern[V?0:1]),(d=_[2])&&(j=+d),"e"===t)return d?e.toExponential(j):e.toExponential();if(l&&(e*=100),V=0>(e=s(e,j)),k=(e=e.split(f))[0],w=e[1],V&&(k=k.substring(1)),G=k,(y=k.length)>=$)for(G=p,x=0;y>x;x++)x>0&&(y-x)%$==0&&(G+=L),G+=k.charAt(x);if(w&&(G+=z+w),"n"===t&&!V)return G;for(e=p,x=0,C=B.length;C>x;x++)e+="n"===(S=B.charAt(x))?G:"$"===S||"%"===S?o:S;return e}if(V&&(e=-e),(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)&&(t=t.replace(u,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return U.push(n),b})),t=t.split(";"),V&&t[1])t=t[1],D=!0;else if(0===e){if(-1==(t=t[2]||t[0]).indexOf(m)&&-1==t.indexOf(v))return t}else t=t[0];if((l=-1!=t.indexOf("%"))&&(e*=100),(a=-1!=(P=t.indexOf("$")))&&"\\"===t[P-1]&&(t=t.split("\\").join(""),a=!1),(a||l)&&($=(N=a?N.currency:N.percent).groupSize[0],L=N[g],z=N[f],j=N.decimals,o=N.symbol),(T=t.indexOf(g)>-1)&&(t=t.replace(h,p)),I=t.indexOf(f),C=t.length,-1!=I?(w=(w=(w=(""+e).split("e"))[1]?s(e,Math.abs(w[1])):w[0]).split(f)[1]||p,O=(A=t.lastIndexOf(v)-I)>-1,R=(E=t.lastIndexOf(m)-I)>-1,x=w.length,O||R||(C=(t=t.substring(0,I)+t.substring(I+1)).length,I=-1,x=0),O&&A>E?x=A:E>A&&(R&&x>E?x=E:O&&A>x&&(x=A)),x>-1&&(e=s(e,x))):e=s(e),E=t.indexOf(m),M=A=t.indexOf(v),H=-1==E&&-1!=A?A:-1!=E&&-1==A?E:E>A?A:E,E=t.lastIndexOf(m),A=t.lastIndexOf(v),F=-1==E&&-1!=A?A:-1!=E&&-1==A?E:E>A?E:A,H==C&&(F=H),-1!=H){if(k=(G=(""+e).split(f))[0],w=G[1]||p,y=k.length,w.length,V&&-1*e>=0&&(V=!1),T)if(y===$&&I-M>y)k=L+k;else if(y>$){for(G=p,x=0;y>x;x++)x>0&&(y-x)%$==0&&(G+=L),G+=k.charAt(x);k=G}for(e=t.substring(0,H),V&&!D&&(e+="-"),x=H;C>x;x++){if(S=t.charAt(x),-1==I){if(y>F-x){e+=k;break}}else if(-1!=A&&x>A&&(W=p),y>=I-x&&I-x>-1&&(e+=k,x=I),I===x){e+=(w?z:p)+w,x+=F-I+1;continue}S===v?(e+=S,W=S):S===m&&(e+=W)}if(F>=H&&(e+=t.substring(F+1)),a||l){for(G=p,x=0,C=e.length;C>x;x++)G+="$"===(S=e.charAt(x))||"%"===S?o:S;e=G}if(C=U.length)for(x=0;C>x;x++)e=e.replace(b,U[x])}return e}var s,l,d=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,c=/^(n|c|p|e)(\d*)$/i,u=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,h=/\,/g,p="",f=".",g=",",m="#",v="0",b="??",_="en-US",k={}.toString;ae.cultures["en-US"]={name:_,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},ae.culture=function(e){var i,r=ae.cultures;return e===n?r.current:((i=t(e)||r[_]).calendar=i.calendars.standard,r.current=i,Ee&&!Ee.load&&function(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}(i.numberFormat),n)},ae.findCulture=t,ae.getCulture=i,ae.culture(_),s=function(e,t){return t=t||0,e=(""+e).split("e"),(e=+((e=(""+(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))))).split("e"))[0]+"e"+(e[1]?+e[1]-t:-t))).toFixed(t)},l=function(e,t,i){if(t){if("[object Date]"===k.call(e))return r(e,t,i);if(typeof e===we)return o(e,t,i)}return e!==n?e:""},Ee&&!Ee.load&&(l=function(t,n,i){return e.isPlainObject(i)&&(i=i.name),Ee.format(t,n,i)}),ae.format=function(e){var t=arguments;return e.replace(me,function(e,n,i){var r=t[parseInt(n,10)+1];return l(r,i?i.substring(1):"")})},ae._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},ae._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},ae._round=s,ae.toString=l}(),function(){function t(e,t,n){return!(e>=t&&n>=e)}function i(e){return e.charAt(0)}function r(t){return e.map(t,i)}function o(e){for(var t=0,n=e.length,i=[];n>t;t++)i[t]=(e[t]+"").toLowerCase();return i}function a(e){var t,n={};for(t in e)n[t]=o(e[t]);return n}function s(e,i,o){if(!e)return null;var s,l,d,h,p,f,m,v,b,_,k,w,y=function(e){for(var t=0;i[M]===e;)t++,M++;return t>0&&(M-=1),t},x=function(t){var n=g[t]||RegExp("^\\d{1,"+t+"}"),i=e.substr(F,t).match(n);return i?(i=i[0],F+=i.length,parseInt(i,10)):null},C=function(t,n){for(var i,r,o,a=0,s=t.length,l=0,d=0;s>a;a++)r=(i=t[a]).length,o=e.substr(F,r),n&&(o=o.toLowerCase()),o==i&&r>l&&(l=r,d=a);return l?(F+=l,d+1):null},S=function(){var t=!1;return e.charAt(F)===i[M]&&(F++,t=!0),t},T=o.calendars.standard,D=null,I=null,E=null,A=null,O=null,R=null,P=null,M=0,F=0,H=!1,N=new Date,$=T.twoDigitYearMax||2029,L=N.getFullYear();for(i||(i="d"),(h=T.patterns[i])&&(i=h),d=(i=i.split("")).length;d>M;M++)if(s=i[M],H)"'"===s?H=!1:S();else if("d"===s){if(l=y("d"),T._lowerDays||(T._lowerDays=a(T.days)),null!==E&&l>2)continue;if(null===(E=3>l?x(2):C(T._lowerDays[3==l?"namesAbbr":"names"],!0))||t(E,1,31))return null}else if("M"===s){if(l=y("M"),T._lowerMonths||(T._lowerMonths=a(T.months)),null===(I=3>l?x(2):C(T._lowerMonths[3==l?"namesAbbr":"names"],!0))||t(I,1,12))return null;I-=1}else if("y"===s){if(null===(D=x(l=y("y"))))return null;2==l&&("string"==typeof $&&($=L+parseInt($,10)),(D=L-L%100+D)>$&&(D-=100))}else if("h"===s){if(y("h"),12==(A=x(2))&&(A=0),null===A||t(A,0,11))return null}else if("H"===s){if(y("H"),null===(A=x(2))||t(A,0,23))return null}else if("m"===s){if(y("m"),null===(O=x(2))||t(O,0,59))return null}else if("s"===s){if(y("s"),null===(R=x(2))||t(R,0,59))return null}else if("f"===s){if(l=y("f"),w=e.substr(F,l).match(g[3]),null!==(P=x(l))&&(3>(w=w[0].length)&&(P*=Math.pow(10,3-w)),l>3&&(P=parseInt((""+P).substring(0,3),10))),null===P||t(P,0,999))return null}else if("t"===s){if(l=y("t"),v=T.AM,b=T.PM,1===l&&(v=r(v),b=r(b)),!(p=C(b))&&!C(v))return null}else if("z"===s){if(f=!0,l=y("z"),"Z"===e.substr(F,1)){S();continue}if(!(m=e.substr(F,6).match(l>2?u:c)))return null;if(_=(m=m[0].split(":"))[0],!(k=m[1])&&_.length>3&&(F=_.length-2,k=_.substring(F),_=_.substring(0,F)),t(_=parseInt(_,10),-12,13))return null;if(l>2&&(k=parseInt(k,10),isNaN(k)||t(k,0,59)))return null}else if("'"===s)H=!0,S();else if(!S())return null;return null!==D||null!==I||null!==E||null===A&&null===O&&!R?(null===D&&(D=L),null===E&&(E=1)):(D=L,I=N.getMonth(),E=N.getDate()),p&&12>A&&(A+=12),f?(_&&(A+=-_),k&&(O+=-k),e=new Date(Date.UTC(D,I,E,A,O,R,P))):function(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}(e=new Date(D,I,E,A,O,R,P),A),100>D&&e.setFullYear(D),e.getDate()!==E&&f===n?null:e}var l=/\u00A0/g,d=/[eE][\-+]?[0-9]+/,c=/[+|\-]\d{1,2}/,u=/[+|\-]\d{1,2}:?\d{2}/,h=/^\/Date\((.*?)\)\/$/,p=/[+-]\d*/,f=["G","g","d","F","D","y","m","T","t"],g={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},m={}.toString;ae.parseDate=function(e,t,n){var i,r,o,a,l;if("[object Date]"===m.call(e))return e;if(i=0,r=null,e&&0===e.indexOf("/D")&&(r=h.exec(e)))return r=r[1],l=p.exec(r.substring(1)),r=new Date(parseInt(r,10)),l&&(l=function(e){var t="-"===e.substr(0,1)?-1:1;return e=e.substring(1),t*(e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10))}(l[0]),r=ae.timezone.apply(r,0),r=ae.timezone.convert(r,0,-1*l)),r;if(n=ae.getCulture(n),!t){for(t=[],a=n.calendar.patterns,o=f.length;o>i;i++)t[i]=a[f[i]];i=0,t=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(t)}for(o=(t=de(t)?t:[t]).length;o>i;i++)if(r=s(e,t[i],n))return r;return r},ae.parseInt=function(e,t){var n=ae.parseFloat(e,t);return n&&(n|=0),n},ae.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===we)return e;e=""+e;var i,r,o=(t=ae.getCulture(t)).numberFormat,a=o.percent,s=o.currency,c=s.symbol,u=a.symbol,h=e.indexOf("-");return d.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):h>0?null:(h=h>-1,e.indexOf(c)>-1||n&&n.toLowerCase().indexOf("c")>-1?(i=(o=s).pattern[0].replace("$",c).split("n"),e.indexOf(i[0])>-1&&e.indexOf(i[1])>-1&&(e=e.replace(i[0],"").replace(i[1],""),h=!0)):e.indexOf(u)>-1&&(r=!0,o=a,c=u),e=e.replace("-","").replace(c,"").replace(l," ").split(o[","].replace(l," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:h&&(e*=-1),e&&r&&(e/=100),e)},Ee&&!Ee.load&&(ae.parseDate=function(e,t,n){return"[object Date]"===m.call(e)?e:Ee.parseDate(e,t,n)},ae.parseFloat=function(t,i){return typeof t===we?t:t===n||null===t?null:(e.isPlainObject(i)&&(i=i.name),t=Ee.parseFloat(t,i),isNaN(t)?null:t)})}(),function(){var i,r,o,a,s,l,d;fe._scrollbar=n,fe.scrollbar=function(e){if(isNaN(fe._scrollbar)||e){var t,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),fe._scrollbar=t=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),t}return fe._scrollbar},fe.isRtl=function(t){return e(t).closest(".k-rtl").length>0},i=document.createElement("table");try{i.innerHTML="<tr><td></td></tr>",fe.tbodyInnerHtml=!0}catch(e){fe.tbodyInnerHtml=!1}fe.touch="ontouchstart"in t,fe.msPointers=t.MSPointerEvent,fe.pointers=t.PointerEvent,r=fe.transitions=!1,o=fe.transforms=!1,a="HTMLElement"in t?HTMLElement.prototype:[],fe.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,le(["Moz","webkit","O","ms"],function(){var e,t=""+this,a=typeof i.style[t+"Transition"]===ke;return a||typeof i.style[t+"Transform"]===ke?(e=t.toLowerCase(),o={css:"ms"!=e?"-"+e+"-":"",prefix:t,event:"o"===e||"webkit"===e?e:""},a&&((r=o).event=r.event?r.event+"TransitionEnd":"transitionend"),!1):n}),i=null,fe.transforms=o,fe.transitions=r,fe.devicePixelRatio=t.devicePixelRatio===n?1:t.devicePixelRatio;try{fe.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,fe.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(e){fe.screenWidth=t.screen.availWidth,fe.screenHeight=t.screen.availHeight}fe.detectOS=function(e){var n,i,r=!1,o=[],a=!/mobile safari/i.test(e),s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},l={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},d={tablet:/playbook|ipad|fire/i},u={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(i in s)if(s.hasOwnProperty(i)&&(o=e.match(s[i]))){if("windows"==i&&"plugins"in navigator)return!1;(r={}).device=i,r.tablet=c(i,d,!1),r.browser=c(e,u,"default"),r.name=c(i,l),r[r.name]=!0,r.majorVersion=o[2],r.minorVersion=o[3].replace("_","."),n=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+n+Array(3-(3>n.length?n.length:2)).join("0"),r.cordova=typeof t.PhoneGap!==Se||typeof t.cordova!==Se,r.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||r.cordova,r.android&&(1.5>fe.devicePixelRatio&&400>r.flatVersion||a)&&(fe.screenWidth>800||fe.screenHeight>800)&&(r.tablet=i);break}return r},s=fe.mobileOS=fe.detectOS(navigator.userAgent),fe.wpDevicePixelRatio=s.wp?screen.width/320:0,fe.kineticScrollNeeded=s&&(fe.touch||fe.msPointers||fe.pointers),fe.hasNativeScrolling=!1,(s.ios||s.android&&s.majorVersion>2||s.wp)&&(fe.hasNativeScrolling=s),fe.mouseAndTouchPresent=fe.touch&&!(fe.mobileOS.ios||fe.mobileOS.android),fe.detectBrowser=function(e){var t,n=!1,i=[],r={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in r)if(r.hasOwnProperty(t)&&(i=e.match(r[t]))){(n={})[t]=!0,n[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,n.version=parseInt(document.documentMode||i[2],10);break}return n},fe.browser=fe.detectBrowser(navigator.userAgent),fe.zoomLevel=function(){var e,n,i;try{return e=fe.browser,n=0,i=document.documentElement,e.msie&&11==e.version&&i.scrollHeight>i.clientHeight&&!fe.touch&&(n=fe.scrollbar()),fe.touch?i.clientWidth/t.innerWidth:e.msie&&e.version>=10?((top||t).document.documentElement.offsetWidth+n)/(top||t).innerWidth:1}catch(e){return 1}},fe.cssBorderSpacing=n!==document.documentElement.style.borderSpacing&&!(fe.browser.msie&&8>fe.browser.version),function(t){var n="",i=e(document.documentElement),r=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&(n="k-"+n+" k-"+n+r),fe.mobileOS&&(n+=" k-mobile"),i.addClass(n)}(fe.browser),fe.eventCapture=document.documentElement.addEventListener,l=document.createElement("input"),fe.placeholder="placeholder"in l,fe.propertyChangeEvent="onpropertychange"in l,fe.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],n=t.length,i="test",r={},o=0;n>o;o++)e=t[o],l.setAttribute("type",e),l.value=i,r[e.replace("-","")]="text"!==l.type&&l.value!==i;return r}(),l.style.cssText="float:left;",fe.cssFloat=!!l.style.cssFloat,l=null,fe.stableSort=function(){var e,t=[{index:0,field:"b"}];for(e=1;513>e;e++)t.push({index:e,field:"a"});return t.sort(function(e,t){return e.field>t.field?1:t.field>e.field?-1:0}),1===t[0].index}(),fe.matchesSelector=a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.matchesSelector||a.matches||function(t){for(var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),i=n.length;i--;)if(n[i]==this)return!0;return!1},fe.pushState=t.history&&t.history.pushState,d=document.documentMode,fe.hashChange="onhashchange"in t&&!(fe.browser.msie&&(!d||8>=d))}(),P={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},M={},e.extend(M,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),M.promiseShim=M.promise,"kendoAnimate"in e.fn||se(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,i){return f(this,e,t,n,i)},kendoAddClass:function(e,t){return ae.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return ae.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,n){return ae.toggleClass(this,e,t,n)}}),F=/&/g,H=/</g,N=/"/g,$=/'/g,L=/>/g,z=function(e){return e.target},fe.touch&&(z=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},le(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),fe.touch?fe.mobileOS?(fe.mousedown="touchstart",fe.mouseup="touchend",fe.mousemove="touchmove",fe.mousecancel="touchcancel",fe.click="touchend",fe.resize="orientationchange"):(fe.mousedown="mousedown touchstart",fe.mouseup="mouseup touchend",fe.mousemove="mousemove touchmove",fe.mousecancel="mouseleave touchcancel",fe.click="click",fe.resize="resize"):fe.pointers?(fe.mousemove="pointermove",fe.mousedown="pointerdown",fe.mouseup="pointerup",fe.mousecancel="pointercancel",fe.click="pointerup",fe.resize="orientationchange resize"):fe.msPointers?(fe.mousemove="MSPointerMove",fe.mousedown="MSPointerDown",fe.mouseup="MSPointerUp",fe.mousecancel="MSPointerCancel",fe.click="MSPointerUp",fe.resize="orientationchange resize"):(fe.mousemove="mousemove",fe.mousedown="mousedown",fe.mouseup="mouseup",fe.mousecancel="mouseleave",fe.click="click",fe.resize="resize"),j=function(e,t){var n,i,r,o,a=t||"d",s=1;for(i=0,r=e.length;r>i;i++)""!==(o=e[i])&&(0!==(n=o.indexOf("["))&&(-1==n?o="."+o:(s++,o="."+o.substring(0,n)+" || {})"+o.substring(n))),s++,a+=o+(r-1>i?" || {})":")"));return Array(s).join("(")+a},B=/^([a-z]+:)?\/\//i,se(ae,{ui:ae.ui||{},fx:ae.fx||function(e){return new ae.effects.Element(e)},effects:ae.effects||M,mobile:ae.mobile||{},data:ae.data||{},dataviz:ae.dataviz||{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:ae.support||fe,animate:ae.animate||f,ns:"",attr:function(e){return"data-"+ae.ns+e},getShadows:s,wrap:function(t,n){var i,r,o,a,l,d,c,u,h=fe.browser,p="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(u=(c=t.parent(".k-animation-container"))[0].style,c.is(":hidden")&&c.show(),(i=ge.test(u.width)||ge.test(u.height))||c.css({width:t.outerWidth(),height:t.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(r=s(t),o=t[0].style.width,a=t[0].style.height,l=ge.test(o),d=ge.test(a),h.opera&&(r.left=r.right=r.bottom=5),i=l||d,!l&&(!n||n&&o)&&(o=t.outerWidth()),!d&&(!n||n&&a)&&(a=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:o,height:a,marginLeft:r.left*(p?1:-1),paddingLeft:r.left,paddingRight:r.right,paddingBottom:r.bottom})),i&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),h.msie&&he.floor(h.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()},deepExtend:l,getComputedStyles:h,isScrollable:function(e){var t=h(e,["overflow"]).overflow;return"auto"==t||"scroll"==t},size:function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n},toCamelCase:u,toHyphens:function(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},getOffset:ae.getOffset||function(e,n,i){n||(n="offset");var r=e[n]();return fe.browser.msie&&(fe.pointers||fe.msPointers)&&!i&&(r.top-=t.pageYOffset-document.documentElement.scrollTop,r.left-=t.pageXOffset-document.documentElement.scrollLeft),r},parseEffects:ae.parseEffects||function(e){var t={};return le("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t},toggleClass:ae.toggleClass||function(e,t,n,i){return t&&(t=t.split(" "),le(t,function(t,n){e.toggleClass(n,i)})),e},directions:ae.directions||P,Observable:S,Class:r,Template:w,template:ce(w.compile,w),render:ce(w.render,w),stringify:ce(pe.stringify,pe),eventTarget:z,htmlEncode:function(e){return(""+e).replace(F,"&amp;").replace(H,"&lt;").replace(L,"&gt;").replace(N,"&quot;").replace($,"&#39;")},isLocalUrl:function(e){return e&&!B.test(e)},expr:function(e,t,n){return typeof t==ke&&(n=t,t=!1),n=n||"d",(e=e||"")&&"["!==e.charAt(0)&&(e="."+e),t?(e=(e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"')).replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),e=(e=j(e.split("."),n)).replace(/_\$DOT\$_/g,".")):e=n+e,e},getter:function(e,t){var n=e+t;return Te[n]=Te[n]||Function("d","return "+ae.expr(e,t))},setter:function(e){return De[e]=De[e]||Function("d,value",ae.expr(e)+"=value")},accessor:function(e){return{get:ae.getter(e),set:ae.setter(e)}},guid:function(){var e,t,n="";for(e=0;32>e;e++)t=16*he.random()|0,(8==e||12==e||16==e||20==e)&&(n+="-"),n+=(12==e?4:16==e?3&t|8:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+ae.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t,n=e.split(" ");if(n)for(t=0;n.length>t;t++)"view"!=n[t]&&(n[t]=n[t].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return n.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var i=t.console;!ae.suppressLog&&n!==i&&i.log&&i.log(e)}}),V=(U=S.extend({init:function(e,t){var n,i=this;i.element=ae.jQuery(e).handler(i),i.angular("init",t),S.fn.init.call(i),(n=t?t.dataSource:null)&&(t=se({},t,{dataSource:{}})),t=i.options=se(!0,{},i.options,t),n&&(t.dataSource=n),i.element.attr(ae.attr("role"))||i.element.attr(ae.attr("role"),(t.name||"").toLowerCase()),i.element.data("kendo"+t.prefix+t.name,i),i.bind(i.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",i=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(i)?0:i)},setOptions:function(t){this._setEvents(t),e.extend(this.options,t)},_setEvents:function(e){for(var t,n=this,i=0,r=n.events.length;r>i;i++)t=n.events[i],n.options[t]&&e[t]&&n.unbind(t,n.options[t]);n.bind(n.events,e)},resize:function(e){var t=this.getSize(),n=this._size;(e||(t.width>0||t.height>0)&&(!n||t.width!==n.width||t.height!==n.height))&&(this._size=t,this._resize(t,e),this.trigger("resize",t))},getSize:function(){return ae.dimensions(this.element)},size:function(e){return e?(this.setSize(e),n):this.getSize()},setSize:e.noop,_resize:e.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()},_destroy:function(){this.destroy()},angular:function(){}})).extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var n=this;n.angular(t,function(){return{elements:n.items(),data:e.map(n.dataItems(),function(e){return{dataItem:e}})}})}}),ae.dimensions=function(e,t){var n=e[0];return t&&e.css(t),{width:n.offsetWidth,height:n.offsetHeight}},ae.notify=ue,W=/template$/i,G=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,q=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,K=/([A-Z])/g,ae.initWidget=function(i,r,o){var a,s,l,d,c,u,h,p,f,v,b,_,k;if(o?o.roles&&(o=o.roles):o=ae.ui.roles,u=(i=i.nodeType?i:i[0]).getAttribute("data-"+ae.ns+"role")){for(k in l=(f=-1===u.indexOf("."))?o[u]:ae.getter(u)(t),b=e(i).data(),_=l?"kendo"+l.fn.options.prefix+l.fn.options.name:"",v=f?RegExp("^kendo.*"+u+"$","i"):RegExp("^"+_+"$","i"),b)if(k.match(v)){if(k!==_)return b[k];a=b[k]}if(l){for(p=g(i,"dataSource"),r=e.extend({},m(i,l.fn.options),r),p&&(r.dataSource=typeof p===ke?ae.getter(p)(t):p),d=0,c=l.fn.events.length;c>d;d++)(h=g(i,s=l.fn.events[d]))!==n&&(r[s]=ae.getter(h)(t));return a?e.isEmptyObject(r)||a.setOptions(r):a=new l(i,r),a}}},ae.rolesFromNamespaces=function(e){var t,n,i=[];for(e[0]||(e=[ae.ui,ae.dataviz.ui]),t=0,n=e.length;n>t;t++)i[t]=e[t].roles;return se.apply(null,[{}].concat(i.reverse()))},ae.init=function(t){var n=ae.rolesFromNamespaces(Ie.call(arguments,1));e(t).find("[data-"+ae.ns+"role]").addBack().each(function(){ae.initWidget(this,{},n)})},ae.destroy=function(t){e(t).find("[data-"+ae.ns+"role]").addBack().each(function(){var t,n=e(this).data();for(t in n)0===t.indexOf("kendo")&&typeof n[t].destroy===_e&&n[t].destroy()})},ae.resize=function(t,n){var i,r=e(t).find("[data-"+ae.ns+"role]").addBack().filter(b);r.length&&((i=e.makeArray(r)).sort(v),e.each(i,function(){var t=ae.widgetInstance(e(this));t&&t.resize(n)}))},ae.parseOptions=m,se(ae.ui,{Widget:U,DataBoundWidget:V,roles:{},progress:function(t,n){var i,r,o,a,s=t.find(".k-loading-mask"),l=ae.support,d=l.browser;n?s.length||(r=(i=l.isRtl(t))?"right":"left",a=t.scrollLeft(),o=d.webkit&&i?t[0].scrollWidth-t.width()-2*a:0,s=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(a)+o).prependTo(t)):s&&s.remove()},plugin:function(t,i,r){var o,a=t.fn.options.name;r=r||"",(i=i||ae.ui)[a]=t,i.roles[a.toLowerCase()]=t,o="getKendo"+r+a,a="kendo"+r+a,e.fn[a]=function(i){var r,o=this;return typeof i===ke?(r=Ie.call(arguments,1),this.each(function(){var t,s,l=e.data(this,a);if(!l)throw Error(ae.format("Cannot call method '{0}' of {1} before it is initialized",i,a));if(typeof(t=l[i])!==_e)throw Error(ae.format("Cannot find method '{0}' of {1}",i,a));return(s=t.apply(l,r))!==n?(o=s,!1):n})):this.each(function(){new t(this,i)}),o},e.fn[a].widget=t,e.fn[o]=function(){return this.data(a)}}}),Y={bind:function(){return this},nullObject:!0,options:{}},Q=U.extend({init:function(e,t){U.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){U.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(ae.roleSelector("view splitview modalview drawer"));return ae.widgetInstance(e,ae.mobile.ui)||Y},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(ae.roleSelector("view layout modalview drawer splitview"));return ae.widgetInstance(e.eq(0),ae.mobile.ui)||Y}}),se(ae.mobile,{init:function(e){ae.init(e,ae.mobile.ui,ae.ui,ae.dataviz.ui)},appLevelNativeScrolling:function(){return ae.mobile.application&&ae.mobile.application.options&&ae.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:Q,DataBoundWidget:V.extend(Q.prototype),roles:{},plugin:function(e){ae.ui.plugin(e,ae.mobile.ui,"Mobile")}}}),l(ae.dataviz,{init:function(e){ae.init(e,ae.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){ae.ui.plugin(e,ae.dataviz.ui)}},roles:{}}),ae.touchScroller=function(t,n){return e(t).map(function(t,i){return i=e(i),!(!fe.kineticScrollNeeded||!ae.mobile.ui.Scroller||i.data("kendoMobileScroller"))&&(i.kendoMobileScroller(n),i.data("kendoMobileScroller"))})[0]},ae.preventDefault=function(e){e.preventDefault()},ae.widgetInstance=function(e,n){var i,r,o,a,s=e.data(ae.ns+"role"),l=[];if(s){if("content"===s&&(s="scroller"),n)if(n[0])for(i=0,r=n.length;r>i;i++)l.push(n[i].roles[s]);else l.push(n.roles[s]);else l=[ae.ui.roles[s],ae.dataviz.ui.roles[s],ae.mobile.ui.roles[s]];for(s.indexOf(".")>=0&&(l=[ae.getter(s)(t)]),i=0,r=l.length;r>i;i++)if((o=l[i])&&(a=e.data("kendo"+o.fn.options.prefix+o.fn.options.name)))return a}},ae.onResize=function(n){var i=n;return fe.mobileOS.android&&(i=function(){setTimeout(n,600)}),e(t).on(fe.resize,i),i},ae.unbindResize=function(n){e(t).off(fe.resize,n)},ae.attrValue=function(e,t){return e.data(ae.ns+t)},ae.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{kendoFocusable:function(t){var n=e.attr(t,"tabindex");return function(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n&&e.href||t)&&_(e)}(t,!isNaN(n)&&n>-1)}}),X=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],J={setupMouseMute:function(){var t,n=0,i=X.length,r=document.documentElement;if(!J.mouseTrap&&fe.eventCapture)for(J.mouseTrap=!0,J.bustClick=!1,J.captureMouse=!1,t=function(t){J.captureMouse&&("click"===t.type?J.bustClick&&!e(t.target).is("label, input, [data-rel=external]")&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};i>n;n++)r.addEventListener(X[n],t,!0)},muteMouse:function(e){J.captureMouse=!0,e.data.bustClick&&(J.bustClick=!0),clearTimeout(J.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(J.mouseTrapTimeoutID),J.mouseTrapTimeoutID=setTimeout(function(){J.captureMouse=!1,J.bustClick=!1},400)}},Z={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},fe.touch&&(fe.mobileOS.ios||fe.mobileOS.android)?Z={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:fe.pointers?Z={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:fe.msPointers&&(Z={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!fe.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=t.relatedTarget,o=t.handleObj;return(!r||r!==this&&!e.contains(this,r))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=n),i}}}),ee=function(e){return Z[e]||e},te=/([^ ]+)/g,ae.applyEventMap=function(e,t){return e=e.replace(te,ee),t&&(e=e.replace(te,"$1."+t)),e},ne=e.fn.on,se(!0,k,e),k.fn=k.prototype=new e,k.fn.constructor=k,k.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof k)&&(n=k(n)),e.fn.init.call(this,t,n,ie)},k.fn.init.prototype=k.fn,ie=k(document),se(k.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||ae.guid()),this},on:function(){var e,t,n,i,r,o,a=this,s=a.data("kendoNS");return 1===arguments.length?ne.call(a,arguments[0]):(e=a,typeof(t=Ie.call(arguments))[t.length-1]===Se&&t.pop(),n=t[t.length-1],i=ae.applyEventMap(t[0],s),fe.mouseAndTouchPresent&&i.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(J.setupMouseMute(),r=2===t.length?null:t[1],o=i.indexOf("click")>-1&&i.indexOf("touchend")>-1,ne.call(this,{touchstart:J.muteMouse,touchend:J.unMuteMouse},r,{bustClick:o})),typeof n===ke&&(e=a.data("handler"),n=e[n],t[t.length-1]=function(t){n.call(e,t)}),t[0]=i,ne.apply(a,t),a)},kendoDestroy:function(e){return(e=e||this.data("kendoNS"))&&this.off("."+e),this}}),ae.jQuery=k,ae.eventMap=Z,ae.timezone=function(){function e(e,t){var n,i,a,s=t[3],l=t[4],d=t[5],c=t[8];return c||(t[8]=c={}),c[e]?c[e]:(isNaN(l)?0===l.indexOf("last")?(n=new Date(Date.UTC(e,r[s]+1,1,d[0]-24,d[1],d[2],0)),i=o[l.substr(4,3)],a=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-a-(i>a?7:0))):l.indexOf(">=")>=0&&(n=new Date(Date.UTC(e,r[s],l.substr(5),d[0],d[1],d[2],0)),i=o[l.substr(0,3)],a=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-a+(a>i?7:0))):n=new Date(Date.UTC(e,r[s],l,d[0],d[1],d[2],0)),c[e]=n)}function t(t,n,r){var o,a,s,l;return(n=n[r])?(s=new Date(t).getUTCFullYear(),(n=i.grep(n,function(e){var t=e[0],n=e[1];return s>=t&&(n>=s||t==s&&"only"==n||"max"==n)})).push(t),n.sort(function(t,n){return"number"!=typeof t&&(t=+e(s,t)),"number"!=typeof n&&(n=+e(s,n)),t-n}),l=n[i.inArray(t,n)-1]||n[n.length-1],isNaN(l)?l:null):(a=0,(o=r.split(":")).length>1&&(a=60*o[0]+ +o[1]),[-1e6,"max","-","Jan",1,[0,0,0],a,"-"])}function n(e,n,i,r){typeof e!=we&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var o=function(e,t,n){var i,r,o,a=t[n];if("string"==typeof a&&(a=t[a]),!a)throw Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(i=a.length-1;i>=0&&!((r=a[i][3])&&e>r);i--);if(!(o=a[i+1]))throw Error('Timezone "'+n+'" not found on '+e+".");return o}(e,n,r);return{zone:o,rule:t(e,i,o[1])}}var r={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},o={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:function(e,t){var i,r,o;return"Etc/UTC"==t||"Etc/GMT"==t?0:(r=(i=n(e,this.zones,this.rules,t)).zone,o=i.rule,ae.parseFloat(o?r[0]-o[6]:r[0]))},convert:function(e,t,n){var i,r;return typeof t==ke&&(t=this.offset(e,t)),typeof n==ke&&(n=this.offset(e,n)),i=e.getTimezoneOffset(),r=(e=new Date(e.getTime()+6e4*(t-n))).getTimezoneOffset(),new Date(e.getTime()+6e4*(r-i))},apply:function(e,t){return this.convert(e,e.getTimezoneOffset(),t)},remove:function(e,t){return this.convert(e,t,e.getTimezoneOffset())},abbr:function(e,t){var i=n(e,this.zones,this.rules,t),r=i.zone,o=i.rule,a=r[2];return a.indexOf("/")>=0?a.split("/")[o&&+o[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",o&&"-"!=o[7]?o[7]:""):a},toLocalDate:function(e){return this.apply(new Date(e),"Etc/UTC")}}}(),ae.date=function(){function e(e,t){return 0===t&&23===e.getHours()&&(e.setHours(e.getHours()+2),!0)}function t(t,n,i){var r=t.getHours();i=i||1,n=(n-t.getDay()+7*i)%7,t.setDate(t.getDate()+n),e(t,r)}function n(e){return new Date(e.getFullYear(),e.getMonth(),1)}function i(t){return e(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),0),t}function r(e){return e.getTime()-i(e)}function o(t,n){var i=t.getHours();return a(t=new Date(t),n*d),e(t,i),t}function a(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*l))}function s(){return i(new Date)}var l=6e4,d=864e5;return{adjustDST:e,dayOfWeek:function(e,n,i){return t(e=new Date(e),n,i),e},setDayOfWeek:t,getDate:i,isInDateRange:function(e,t,n){var i,r=t.getTime(),o=n.getTime();return r>=o&&(o+=d),(i=e.getTime())>=r&&o>=i},isInTimeRange:function(e,t,n){var i,o=r(t),a=r(n);return!e||o==a||(t>=n&&(n+=d),o>(i=r(e))&&(i+=d),o>a&&(a+=d),i>=o&&a>=i)},isToday:function(e){return i(e).getTime()==s().getTime()},nextDay:function(e){return o(e,1)},previousDay:function(e){return o(e,-1)},toUtcTime:function(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},MS_PER_DAY:d,MS_PER_HOUR:60*l,MS_PER_MINUTE:l,setTime:a,addDays:o,today:s,toInvariantTime:function(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},firstDayOfMonth:n,lastDayOfMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=n(e),r=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());return r&&t.setHours(i.getHours()+r/60),t},getMilliseconds:r}}(),ae.stripWhitespace=function(e){var t,n,i;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(n=0;e.childNodes.length>n;n++)3!=(i=e.childNodes[n]).nodeType||/\S/.test(i.nodeValue)||(e.removeChild(i),n--),1==i.nodeType&&ae.stripWhitespace(i)},re=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},ae.animationFrame=function(e){re.call(t,e)},oe=[],ae.queueAnimation=function(e){oe[oe.length]=e,1===oe.length&&ae.runNextAnimation()},ae.runNextAnimation=function(){ae.animationFrame(function(){oe[0]&&(oe.shift()(),oe[0]&&ae.runNextAnimation())})},ae.parseQueryStringParams=function(e){for(var t={},n=(e.split("?")[1]||"").split(/&|=/),i=n.length,r=0;i>r;r+=2)""!==n[r]&&(t[decodeURIComponent(n[r])]=decodeURIComponent(n[r+1]));return t},ae.elementUnderCursor=function(e){return n!==e.x.client?document.elementFromPoint(e.x.client,e.y.client):n},ae.wheelDeltaY=function(e){var t,i=e.originalEvent,r=i.wheelDeltaY;return i.wheelDelta?(r===n||r)&&(t=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(t=10*-i.detail),t},ae.throttle=function(e,t){var i,r,o=0;return!t||0>=t?e:((r=function(){function r(){e.apply(a,l),o=+new Date}var a=this,s=+new Date-o,l=arguments;return o?(i&&clearTimeout(i),s>t?r():i=setTimeout(r,t-s),n):r()}).cancel=function(){clearTimeout(i)},r)},ae.caret=function(t,i,r){var o,a,s,l=i!==n;if(r===n&&(r=i),t[0]&&(t=t[0]),!l||!t.disabled){try{t.selectionStart!==n?l?(t.focus(),t.setSelectionRange(i,r)):i=[t.selectionStart,t.selectionEnd]:document.selection&&(e(t).is(":visible")&&t.focus(),o=t.createTextRange(),l?(o.collapse(!0),o.moveStart("character",i),o.moveEnd("character",r-i),o.select()):(a=o.duplicate(),o.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",o),i=[s=a.text.length,s+o.text.length]))}catch(e){i=[]}return i}},ae.compileMobileDirective=function(e,n){var i=t.angular;return e.attr("data-"+ae.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),i.element(e).injector().invoke(["$compile",function(t){t(e)(n),/^\$(digest|apply)$/.test(n.$$phase)||n.$digest()}]),ae.widgetInstance(e,ae.mobile.ui)},ae.antiForgeryTokens=function(){var t={},i=e("meta[name=csrf-token],meta[name=_csrf]").attr("content"),r=e("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){t[this.name]=this.value}),r!==n&&i!==n&&(t[r]=i),t},ae.cycleForm=function(e){function t(e){var t=ae.widgetInstance(e);t&&t.focus?t.focus():e.focus()}var n=e.find("input, .k-widget").first(),i=e.find("button, .k-button").last();i.on("keydown",function(e){e.keyCode!=ae.keys.TAB||e.shiftKey||(e.preventDefault(),t(n))}),n.on("keydown",function(e){e.keyCode==ae.keys.TAB&&e.shiftKey&&(e.preventDefault(),t(i))})},function(){function n(t,n,i,r){var o,a,s=e("<form>").attr({action:i,method:"POST",target:r}),l=ae.antiForgeryTokens();for(a in l.fileName=n,o=t.split(";base64,"),l.contentType=o[0].replace("data:",""),l.base64=o[1],l)l.hasOwnProperty(a)&&e("<input>").attr({value:l[a],name:a,type:"hidden"}).appendTo(s);s.appendTo("body").submit().remove()}function i(e,t){var n,i,r,o,a,s=e;if("string"==typeof e){for(i=(n=e.split(";base64,"))[0],r=atob(n[1]),o=new Uint8Array(r.length),a=0;r.length>a;a++)o[a]=r.charCodeAt(a);s=new Blob([o.buffer],{type:i})}navigator.msSaveBlob(s,t)}function r(e,n){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),o.download=n,o.href=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}var o=document.createElement("a"),a="download"in o;ae.saveAs=function(e){var t=n;e.forceProxy||(a?t=r:navigator.msSaveBlob&&(t=i)),t(e.dataURI,e.fileName,e.proxyURL,e.proxyTarget)}}()}(i,window),function(e,t){function n(e,t){return t?(e+"/"===t&&(e=t),RegExp("^"+t,"i").test(e)||(e=t+"/"+e),h.protocol+"//"+(h.host+"/"+e).replace(/\/\/+/g,"/")):e}function i(e){return e?"#!":"#"}function r(e){var t=h.href;return"#!"===e&&t.indexOf("#")>-1&&t.indexOf("#!")<0?null:t.split(e)[1]||""}function o(e,t){return 0===t.indexOf(e)?t.substr(e.length).replace(/\/\//g,"/"):t}function a(e){return e.replace(/^(#)?/,"#")}function s(e){return e.replace(/^(#(!)?)?/,"#!")}var l=window.kendo,d="change",c="same",u=l.support,h=window.location,p=window.history,f=l.support.browser.msie,g=/^#*/,m=window.document,v=l.Class.extend({back:function(){f?setTimeout(function(){p.back()}):p.back()},forward:function(){f?setTimeout(function(){p.forward()}):p.forward()},length:function(){return p.length},replaceLocation:function(e){h.replace(e)}}),b=v.extend({init:function(e){this.root=e},navigate:function(e){p.pushState({},m.title,n(e,this.root))},replace:function(e){p.replaceState({},m.title,n(e,this.root))},normalize:function(e){return o(this.root,e)},current:function(){var e=h.pathname;return h.search&&(e+=h.search),o(this.root,e)},change:function(t){e(window).bind("popstate.kendo",t)},stop:function(){e(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,o=e.root,a=h.pathname,s=r(i(e.hashBang));o===a+"/"&&(t=o),o===a&&s&&(t=n(s.replace(g,""),o)),t&&p.pushState({},m.title,t)}}),_=v.extend({init:function(e){this._id=l.guid(),this.prefix=i(e),this.fix=e?s:a},navigate:function(e){h.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){return e.indexOf(this.prefix)<0?e:e.split(this.prefix)[1]},change:function(t){u.hashChange?e(window).on("hashchange."+this._id,t):this._interval=setInterval(t,50)},stop:function(){e(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return r(this.prefix)},normalizeCurrent:function(e){var t=h.pathname,n=e.root;return!(!e.pushState||n===t||(this.replaceLocation(n+this.prefix+o(n,t)),0))}}),k=l.Observable.extend({start:function(t){if(t=t||{},this.bind([d,"back",c],t),!this._started){this._started=!0,t.root=t.root||"/";var n,i=this.createAdapter(t);i.normalizeCurrent(t)||(n=i.current(),e.extend(this,{adapter:i,root:t.root,historyLength:i.length(),current:n,locations:[n]}),i.change(e.proxy(this,"_checkUrl")))}},createAdapter:function(e){return u.pushState&&e.pushState?new b(e.root):new _(e.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind(d),this._started=!1)},change:function(e){this.bind(d,e)},replace:function(e,t){this._navigate(e,t,function(t){t.replace(e),this.locations[this.locations.length-1]=this.current})},navigate:function(e,n){return"#:back"===e?(this.backCalled=!0,this.adapter.back(),t):(this._navigate(e,n,function(t){t.navigate(e),this.locations.push(this.current)}),t)},_navigate:function(e,n,i){var r=this.adapter;return e=r.normalize(e),this.current===e||this.current===decodeURIComponent(e)?(this.trigger(c),t):((n||!this.trigger(d,{url:e}))&&(this.current=e,i.call(this,r),this.historyLength=r.length()),t)},_checkUrl:function(){var e=this.adapter,n=e.current(),i=e.length(),r=this.historyLength===i,o=n===this.locations[this.locations.length-2]&&r,a=this.backCalled,s=this.current;return null===n||this.current===n||this.current===decodeURIComponent(n)||(this.historyLength=i,this.backCalled=!1,this.current=n,o&&this.trigger("back",{url:s,to:n})?(e.forward(),this.current=s,t):this.trigger(d,{url:n,backButtonPressed:!a})?(o?e.forward():(e.back(),this.historyLength--),this.current=s,t):(o?this.locations.pop():this.locations.push(n),t))}});l.History=k,l.History.HistoryAdapter=v,l.History.HashAdapter=_,l.History.PushStateAdapter=b,l.absoluteURL=n,l.history=new k}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(t,n){return RegExp("^"+t.replace(g,"\\$&").replace(h,"(?:$1)?").replace(p,e).replace(f,"(.*?)")+"$",n?"i":"")}function n(e){return e.replace(/(\?.*)|(#.*)/g,"")}var i=window.kendo,o=i.history,a=i.Observable,s="init",l="routeMissing",d="change",c="back",u="same",h=/\((.*?)\)/g,p=/(\(\?)?:\w+/g,f=/\*\w+/g,g=/[\-{}\[\]+?.,\\\^$|#\s]/g,m=i.Class.extend({init:function(e,n,i){e instanceof RegExp||(e=t(e,i)),this.route=e,this._callback=n},callback:function(e){var t,r,o=0,a=i.parseQueryStringParams(e);for(e=n(e),r=(t=this.route.exec(e).slice(1)).length;r>o;o++)void 0!==t[o]&&(t[o]=decodeURIComponent(t[o]));t.push(a),this._callback.apply(null,t)},worksWith:function(e){return!!this.route.test(n(e))&&(this.callback(e),!0)}}),v=a.extend({init:function(e){e||(e={}),a.fn.init.call(this),this.routes=[],this.pushState=e.pushState,this.hashBang=e.hashBang,this.root=e.root,this.ignoreCase=!1!==e.ignoreCase,this.bind([s,l,d,u],e)},destroy:function(){o.unbind(d,this._urlChangedProxy),o.unbind(u,this._sameProxy),o.unbind(c,this._backProxy),this.unbind()},start:function(){var e,t=this,n=function(e){t._back(e)},i=function(e){t._urlChanged(e)};o.start({same:function(){t._same()},change:i,back:n,pushState:t.pushState,hashBang:t.hashBang,root:t.root}),e={url:o.current||"/",preventDefault:r.noop},t.trigger(s,e)||t._urlChanged(e),this._urlChangedProxy=i,this._backProxy=n},route:function(e,t){this.routes.push(new m(e,t,this.ignoreCase))},navigate:function(e,t){i.history.navigate(e,t)},replace:function(e,t){i.history.replace(e,t)},_back:function(e){this.trigger(c,{url:e.url,to:e.to})&&e.preventDefault()},_same:function(){this.trigger(u)},_urlChanged:function(e){var t,n,r,o=e.url;if(o||(o="/"),this.trigger(d,{url:e.url,params:i.parseQueryStringParams(e.url),backButtonPressed:e.backButtonPressed}))e.preventDefault();else{for(t=0,r=(n=this.routes).length;r>t;t++)if(n[t].worksWith(o))return;this.trigger(l,{url:o,params:i.parseQueryStringParams(o),backButtonPressed:e.backButtonPressed})&&e.preventDefault()}}});i.Router=v}(),function(e,t){function n(r,s){var l,d,c,u,h,p,f,g,m=[],v=r.logic||"and",b=r.filters;for(l=0,d=b.length;d>l;l++)c=(r=b[l]).field,f=r.value,p=r.operator,r.filters?r=n(r,s):(g=r.ignoreCase,c=c.replace(/\./g,"/"),r=o[p],s&&(r=a[p]),r&&f!==t&&("string"===(u=e.type(f))?(h="'{1}'",f=f.replace(/'/g,"''"),!0===g&&(c="tolower("+c+")")):h="date"===u?s?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===p&&(s?(h="{0}({2},'{1}') eq -1",r="indexof"):h+=" eq false")):h="{2} {0} "+h,r=i.format(h,r,f,c))),m.push(r);return r=m.join(" "+v+" "),m.length>1&&(r="("+r+")"),r}var i=window.kendo,r=e.extend,o={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},a=r({},o,{contains:"contains"}),s={pageSize:e.noop,page:e.noop,filter:function(e,t,i){t&&(t=n(t,i))&&(e.$filter=t)},sort:function(t,n){var i=e.map(n,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");i&&(t.$orderby=i)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},l={read:{dataType:"jsonp"}};r(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,n){var r,o,a,d;if(e=e||{},t=t||"read",d=(d=(this.options||l)[t])?d.dataType:"json","read"===t)for(a in r={$inlinecount:"allpages"},"json"!=d&&(r.$format="json"),e)s[a]?s[a](r,e[a],n):r[a]=e[a];else{if("json"!==d)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(a in e)"number"==typeof(o=e[a])&&(e[a]=o+"");r=i.stringify(e)}}return r}}}}),r(!0,i.data,{schemas:{"odata-v4":{type:"json",data:function(t){return function(e){for(var t in e)0===t.indexOf("@odata")&&delete e[t]}(t=e.extend({},t)),t.value?t.value:[t]},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n=i.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(n.$count=!0,delete n.$inlinecount),n}}}})}(window.kendo.jQuery),e=window.kendo.jQuery,t=window.kendo,n=e.isArray,a=e.isPlainObject,s=e.map,l=e.each,d=e.extend,c=t.getter,u=t.Class.extend({init:function(i){var r,o,c,u,h=this,p=i.total,f=i.model,g=i.parse,m=i.errors,v=i.serialize,b=i.data;f&&(a(f)&&(r=i.modelBase||t.data.Model,f.fields&&l(f.fields,function(t,n){a(n)&&n.field?e.isFunction(n.field)||(n=d(n,{field:h.getter(n.field)})):n={field:h.getter(n)},f.fields[t]=n}),(o=f.id)&&((c={})[h.xpathToMember(o,!0)]={field:h.getter(o)},f.fields=d(c,f.fields),f.id=h.xpathToMember(o)),f=r.define(f)),h.model=f),p&&("string"==typeof p?(p=h.getter(p),h.total=function(e){return parseInt(p(e),10)}):"function"==typeof p&&(h.total=p)),m&&("string"==typeof m?(m=h.getter(m),h.errors=function(e){return m(e)||null}):"function"==typeof m&&(h.errors=m)),b&&("string"==typeof b?(b=h.xpathToMember(b),h.data=function(e){var t,i=h.evaluate(e,b);return i=n(i)?i:[i],h.model&&f.fields?(t=new h.model,s(i,function(e){if(e){var n,i={};for(n in f.fields)i[n]=t._parse(n,f.fields[n].field(e));return i}})):i}):"function"==typeof b&&(h.data=b)),"function"==typeof g&&(u=h.parse,h.parse=function(e){var t=g.call(h,e);return u.call(h,t)}),"function"==typeof v&&(h.serialize=v)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var t,i,r,o,a,s,l,d={},c=e.attributes,u=c.length;for(l=0;u>l;l++)d["@"+(s=c[l]).nodeName]=s.nodeValue;for(i=e.firstChild;i;i=i.nextSibling)3===(r=i.nodeType)||4===r?d["#text"]=i.nodeValue:1===r&&(t=this.parseDOM(i),a=d[o=i.nodeName],n(a)?a.push(t):a=void 0!==a?[a,t]:t,d[o]=a);return d},evaluate:function(e,t){for(var i,r,o,a,s,l=t.split(".");i=l.shift();)if(e=e[i],n(e)){for(r=[],t=l.join("."),s=0,o=e.length;o>s;s++)a=this.evaluate(e[s],t),a=n(a)?a:[a],r.push.apply(r,a);return r}return e},parse:function(t){var n,i,r={};return n=t.documentElement||e.parseXML(t).documentElement,i=this.parseDOM(n),r[n.nodeName]=i,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,".")).indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e:""},getter:function(e){return c(this.xpathToMember(e),!0)}}),e.extend(!0,t.data,{XmlDataReader:u,readers:{xml:u}}),function(e,t){function n(e,t,n,i){return function(r){var o,a={};for(o in r)a[o]=r[o];a.field=i?n+"."+r.field:n,t==de&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}function i(t,n){if(t===n)return!0;var r,o=e.type(t);if(o!==e.type(n))return!1;if("date"===o)return t.getTime()===n.getTime();if("object"!==o&&"array"!==o)return!1;for(r in t)if(!i(t[r],n[r]))return!1;return!0}function r(e){this.data=e||[]}function o(e,n){if(e){var i=typeof e===ae?{field:e,dir:n}:e,r=X(i)?i:i!==t?[i]:[];return J(r,function(e){return!!e.dir})}}function a(e){return e&&!Q(e)?((X(e)||!e.filters)&&(e={logic:"and",filters:X(e)?e:[e]}),function e(t){var n,i,r,o,a=t.filters;if(a)for(n=0,i=a.length;i>n;n++)(o=(r=a[n]).operator)&&typeof o===ae&&(r.operator=F[o.toLowerCase()]||o),e(r)}(e),e):t}function s(e,n){var i=typeof e===ae?{field:e,dir:n}:e,r=X(i)?i:i!==t?[i]:[];return O(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function l(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function d(e,t,n,i,r,o){var a,s,l,d,c;for(d=(t=t||[]).length,a=0;d>a;a++)l=(s=t[a]).aggregate,e[c=s.field]=e[c]||{},o[c]=o[c]||{},o[c][l]=o[c][l]||{},e[c][l]=H[l.toLowerCase()](e[c][l],n,ne.accessor(c),i,r,o[c][l])}function c(e){return"number"==typeof e&&!isNaN(e)}function u(e){return e&&e.getTime}function h(e){var t,n=e.length,i=Array(n);for(t=0;n>t;t++)i[t]=e[t].toJSON();return i}function p(e,t,n,i,r){var o,a,s,l,d;for(l=0,d=e.length;d>l;l++)for(a in o=e[l],t)(s=r[a])&&s!==a&&(o[s]=t[a](o),delete o[a])}function f(e,t,n,i,r){var o,a,s,l,d;for(l=0,d=e.length;d>l;l++)for(a in o=e[l],t)o[a]=n._parse(a,t[a](o)),(s=r[a])&&s!==a&&delete o[s]}function g(e,t,n,i,r){var o,a,s,l;for(a=0,l=e.length;l>a;a++)(s=i[(o=e[a]).field])&&s!=o.field&&(o.field=s),o.value=n._parse(o.field,o.value),o.hasSubgroups?g(o.items,t,n,i,r):f(o.items,t,n,0,r)}function m(e,t,n,i,r,o){return function(a){return(a=e(a))&&!Q(i)&&("[object Array]"===Te.call(a)||a instanceof Oe||(a=[a]),n(a,i,new t,r,o)),a||[]}}function v(e){var t,n,i,r,o,a=[];for(t=0,n=e.length;n>t;t++)if((o=e.at(t)).hasSubgroups)a=a.concat(v(o.items));else for(i=o.items,r=0;i.length>r;r++)a.push(i.at(r));return a}function b(e,t,n,i){for(var r=0;e.length>r&&e[r].data!==t&&!_(e[r].data,n,i);r++);}function _(e,t,n){for(var i=0,r=e.length;r>i;i++){if(e[i]&&e[i].hasSubgroups)return _(e[i].items,t,n);if(e[i]===t||e[i]===n)return e[i]=n,!0}}function k(e,n,i,r,o){var a,s,l,d;for(a=0,s=e.length;s>a;a++)if((l=e[a])&&!(l instanceof r))if(l.hasSubgroups===t||o){for(d=0;n.length>d;d++)if(n[d]===l){e[a]=n.at(d),b(i,n,l,e[a]);break}}else k(l.items,n,i,r,o)}function w(e,t){var n,i,r;for(n=0,i=e.length;i>n;n++)if((r=e.at(n)).uid==t.uid)return e.splice(n,1),r}function y(e,t){return t?C(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId}):-1}function x(e,t){return t?C(e,function(e){return e.uid==t.uid}):-1}function C(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(t(e[n]))return n;return-1}function S(e,t){var n,i;return e&&!Q(e)?(n=e[t],i=Y(n)?n.from||n.field||t:e[t]||t,ie(i)?t:i):t}function T(e,t){var n,i,r,o,a,s=[];for(n=0,i=e.length;i>n;n++){for(a in r={},o=e[n])r[a]=o[a];r.field=S(t.fields,r.field),r.aggregates&&X(r.aggregates)&&(r.aggregates=T(r.aggregates,t)),s.push(r)}return s}function D(t,n){var i,r,o,a,s,l,d,c,u,h;for(i=(t=e(t)[0]).options,r=n[0],o=n[1],a=[],s=0,l=i.length;l>s;s++)u={},(d=(c=i[s]).parentNode)===t&&(d=null),c.disabled||d&&d.disabled||(d&&(u.optgroup=d.label),u[r.field]=c.text,h=(h=c.attributes.value)&&h.specified?c.value:c.text,u[o.field]=h,a.push(u));return a}function I(t,n){var i,r,o,a,s,l,d,c=e(t)[0].tBodies[0],u=c?c.rows:[],h=n.length,p=[];for(i=0,r=u.length;r>i;i++){for(s={},d=!0,a=u[i].cells,o=0;h>o;o++)"th"!==(l=a[o]).nodeName.toLowerCase()&&(d=!1,s[n[o].field]=l.innerHTML);d||p.push(s)}return p}function E(e){return function(){var t=this._data,n=j.fn[e].apply(this,Ce.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function A(t,n){function i(e,t){return e.filter(t).add(e.find(t))}var r,o,a,s,l,d,c,u,h=e(t).children(),p=[],f=n[0].field,g=n[1]&&n[1].field,m=n[2]&&n[2].field,v=n[3]&&n[3].field;for(r=0,o=h.length;o>r;r++)a={_loaded:!0},d=(s=h.eq(r))[0].firstChild,t=(u=s.children()).filter("ul"),u=u.filter(":not(ul)"),(l=s.attr("data-id"))&&(a.id=l),d&&(a[f]=3==d.nodeType?d.nodeValue:u.text()),g&&(a[g]=i(u,"a").attr("href")),v&&(a[v]=i(u,"img").attr("src")),m&&(c=i(u,".k-sprite").prop("className"),a[m]=c&&e.trim(c.replace("k-sprite",""))),t.length&&(a.items=A(t.eq(0),n)),"true"==s.attr("data-hasChildren")&&(a.hasChildren=!0),p.push(a);return p}var O,R,P,M,F,H,N,$,L,z,j,B,U,V,W,G,q=e.extend,K=e.proxy,Y=e.isPlainObject,Q=e.isEmptyObject,X=e.isArray,J=e.grep,Z=e.ajax,ee=e.each,te=e.noop,ne=window.kendo,ie=ne.isFunction,re=ne.Observable,oe=ne.Class,ae="string",se="function",le="destroy",de="change",ce="error",ue="requestStart",he="progress",pe="requestEnd",fe=["create","read","update",le],ge=function(e){return e},me=ne.getter,ve=ne.stringify,be=Math,_e=[].push,ke=[].join,we=[].pop,ye=[].splice,xe=[].shift,Ce=[].slice,Se=[].unshift,Te={}.toString,De=ne.support.stableSort,Ie=/^\/Date\((.*?)\)\/$/,Ee=/(\r+|\n+)/g,Ae=/(?=['\\])/g,Oe=re.extend({init:function(e,t){var n=this;n.type=t||Pe,re.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},at:function(e){return this[e]},toJSON:function(){var e,t,n=this.length,i=Array(n);for(e=0;n>e;e++)(t=this[e])instanceof Pe&&(t=t.toJSON()),i[e]=t;return i},parent:te,wrapAll:function(e,t){var n,i,r=this,o=function(){return r};for(t=t||[],n=0,i=e.length;i>n;n++)t[n]=r.wrap(e[n],o);return t},wrap:function(e,t){var n=this;return null!==e&&"[object Object]"===Te.call(e)&&(e instanceof n.type||e instanceof He||(e=e instanceof Pe?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(de,function(e){n.trigger(de,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=_e.apply(this,n),this.trigger(de,{action:"add",index:t,items:n}),e},slice:Ce,sort:[].sort,join:ke,pop:function(){var e=this.length,t=we.apply(this);return e&&this.trigger(de,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,o,a=this.wrapAll(Ce.call(arguments,2));if((i=ye.apply(this,[e,t].concat(a))).length)for(this.trigger(de,{action:"remove",index:e,items:i}),r=0,o=i.length;o>r;r++)i[r]&&i[r].children&&i[r].unbind(de);return n&&this.trigger(de,{action:"add",index:e,items:a}),i},shift:function(){var e=this.length,t=xe.apply(this);return e&&this.trigger(de,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=Se.apply(this,t),this.trigger(de,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n;for(t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],i=this.length;i>t;t++)n[t]=e(this[t],t,this);return n},reduce:function(e){var t,n=0,i=this.length;for(2==arguments.length?t=arguments[1]:i>n&&(t=this[n++]);i>n;n++)t=e(t,this[n],n,this);return t},reduceRight:function(e){var t,n=this.length-1;for(2==arguments.length?t=arguments[1]:n>0&&(t=this[n--]);n>=0;n--)t=e(t,this[n],n,this);return t},filter:function(e){for(var t,n=0,i=[],r=this.length;r>n;n++)e(t=this[n],n,this)&&(i[i.length]=t);return i},find:function(e){for(var t,n=0,i=this.length;i>n;n++)if(e(t=this[n],n,this))return t},every:function(e){for(var t=0,n=this.length;n>t;t++)if(!e(this[t],t,this))return!1;return!0},some:function(e){for(var t=0,n=this.length;n>t;t++)if(e(this[t],t,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),Re=Oe.extend({init:function(e,t){re.fn.init.call(this),this.type=t||Pe;for(var n=0;e.length>n;n++)this[n]=e[n];this.length=n,this._parent=K(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),Pe=re.extend({init:function(e){var t,n,i=this,r=function(){return i};for(n in re.fn.init.call(this),e)"object"==typeof(t=e[n])&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=i.wrap(t,n,r)),i[n]=t;i.uid=ne.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==se&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(((e=this[t])instanceof Pe||e instanceof Oe)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t=this;return t.trigger("get",{field:e}),"this"===e?t:ne.getter(e,!0)(t)},_set:function(e,t){var n,i,r,o=e.indexOf(".")>=0;if(o)for(n=e.split("."),i="";n.length>1;){if(i+=n.shift(),(r=ne.getter(i,!0)(this))instanceof Pe)return r.set(n.join("."),t),o;i+="."}return ne.setter(e)(this,t),o},set:function(e,t){var n=this,i=e.indexOf(".")>=0;ne.getter(e,!0)(n)!==t&&(n.trigger("set",{field:e,value:t})||(i||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(de,{field:e})))},parent:te,wrap:function(e,t,i){var r,o,a=this,s=Te.call(e);return null==e||"[object Object]"!==s&&"[object Array]"!==s||(r=e instanceof Oe,o=e instanceof j,"[object Object]"!==s||o||r?("[object Array]"===s||r||o)&&(r||o||(e=new Oe(e)),e.parent()!=i()&&e.bind(de,n(a,de,t,!1))):(e instanceof Pe||(e=new Pe(e)),e.parent()!=i()&&(e.bind("get",n(a,"get",t,!0)),e.bind(de,n(a,de,t,!0)))),e.parent=i),e}}),Me={number:function(e){return ne.parseFloat(e)},date:function(e){return ne.parseDate(e)},boolean:function(e){return typeof e===ae?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},default:function(e){return e}},Fe={string:"",number:0,date:new Date,boolean:!1,default:""},He=Pe.extend({init:function(n){var i,r,o=this;if((!n||e.isEmptyObject(n))&&(n=e.extend({},o.defaults,n),o._initializers))for(i=0;o._initializers.length>i;i++)n[r=o._initializers[i]]=o.defaults[r]();Pe.fn.init.call(o,n),o.dirty=!1,o.idField&&(o.id=o.get(o.idField),o.id===t&&(o.id=o._defaultId))},shouldSerialize:function(e){return Pe.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,i=e,r=this.fields||{};return(e=r[e])||(e=function(e,t){var n,i;for(i in e){if(n=e[i],Y(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}(r,i)),e&&!(n=e.parse)&&e.type&&(n=Me[e.type.toLowerCase()]),n?n(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return!(e=(this.fields||{})[e])||!1!==e.editable},set:function(e,t,n){var r=this;r.editable(e)&&(i(t=r._parse(e,t),r.get(e))||(r.dirty=!0,Pe.fn.set.call(r,e,t,n)))},accept:function(e){var t,n,i=this,r=function(){return i};for(t in e)n=e[t],"_"!=t.charAt(0)&&(n=i.wrap(e[t],t,r)),i._set(t,n);i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});He.define=function(e,n){n===t&&(n=e,e=He);var i,r,o,a,s,l,d,c,u=q({defaults:{}},n),h={},p=u.id,f=[];if(p&&(u.idField=p),u.id&&delete u.id,p&&(u.defaults[p]=u._defaultId=""),"[object Array]"===Te.call(u.fields)){for(l=0,d=u.fields.length;d>l;l++)typeof(o=u.fields[l])===ae?h[o]={}:o.field&&(h[o.field]=o);u.fields=h}for(r in u.fields)a=(o=u.fields[r]).type||"default",s=null,c=r,r=typeof o.field===ae?o.field:r,o.nullable||"function"==typeof(s=u.defaults[c!==r?c:r]=o.defaultValue!==t?o.defaultValue:Fe[a.toLowerCase()])&&f.push(r),n.id===r&&(u._defaultId=s),u.defaults[c!==r?c:r]=s,o.parse=o.parse||Me[a];return f.length>0&&(u._initializers=f),(i=e.extend(u)).define=function(e){return He.define(i,e)},u.fields&&(i.fields=u.fields,i.idField=u.idField),i},P=q({},R={selector:function(e){return ie(e)?e:me(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:n>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var i,r,o=e[0](t,n);for(i=1,r=e.length;r>i;i++)o=o||e[i](t,n);return o}}},{asc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?-1:null==r?1:i.localeCompare?i.localeCompare(r):i>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?1:null==r?-1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},create:function(e){return this[e.dir](e.field)}}),O=function(e,t){var n,i=e.length,r=Array(i);for(n=0;i>n;n++)r[n]=t(e[n],n,e);return r},M=function(){function e(e){return e.replace(Ae,"\\").replace(Ee,"")}function t(t,n,i,r){var o;return null!=i&&(typeof i===ae&&(i=e(i),(o=Ie.exec(i))?i=new Date(+o[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":"string"==typeof t?"'"+e(t)+"'":""+t},eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),r.filterExpr=function(e){var n,i,o,a,s,l,d=[],c=[],u=[],h=e.filters;for(n=0,i=h.length;i>n;n++)s=(o=h[n]).field,l=o.operator,o.filters?(o=(a=r.filterExpr(o)).expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(u.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(c.length+t)+"]"}),u.push.apply(u,a.operators),c.push.apply(c,a.fields)):(typeof s===se?(a="__f["+c.length+"](d)",c.push(s)):a=ne.expr(s),typeof l===se?(o="__o["+u.length+"]("+a+", "+M.quote(o.value)+")",u.push(l)):o=M[(l||"eq").toLowerCase()](a,o.value,o.ignoreCase===t||o.ignoreCase)),d.push(o);return{expression:"("+d.join({and:" && ",or:" || "}[e.logic])+")",fields:c,operators:u}},F={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"},r.normalizeFilter=a,r.prototype={toArray:function(){return this.data},range:function(e,t){return new r(this.data.slice(e,e+t))},skip:function(e){return new r(this.data.slice(e))},take:function(e){return new r(this.data.slice(0,e))},select:function(e){return new r(O(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new r(this.data.slice(0).sort(R.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var i,r,a=o(e,t),s=[];if(n=n||R,a.length){for(i=0,r=a.length;r>i;i++)s.push(n.create(a[i]));return this.orderBy({compare:n.combine(s)})}return this},filter:function(e){var t,n,i,o,s,l,d,c,u=this.data,h=[];if(!(e=a(e))||0===e.filters.length)return this;for(o=r.filterExpr(e),l=o.fields,d=o.operators,s=c=Function("d, __f, __o","return "+o.expression),(l.length||d.length)&&(c=function(e){return s(e,l,d)}),t=0,i=u.length;i>t;t++)c(n=u[t])&&h.push(n);return new r(h)},group:function(e,t){e=s(e||[]),t=t||this.data;var n,i=new r(this.data);return e.length>0&&(n=e[0],i=i.groupBy(n).select(function(i){var o=new r(t).filter([{field:i.field,operator:"eq",value:i.value,ignoreCase:!1}]);return{field:i.field,value:i.value,items:e.length>1?new r(i.items).group(e.slice(1),o.toArray()).toArray():i.items,hasSubgroups:e.length>1,aggregates:o.aggregate(n.aggregates)}})),i},groupBy:function(e){if(Q(e)||!this.data.length)return new r([]);var t,n,i,o,a=e.field,s=this._sortForGrouping(a,e.dir||"asc"),d=ne.accessor(a),c=d.get(s[0],a),u={field:a,value:c,items:[]},h=[u];for(i=0,o=s.length;o>i;i++)t=s[i],l(c,n=d.get(t,a))||(u={field:a,value:c=n,items:[]},h.push(u)),u.items.push(t);return new r(h)},_sortForGrouping:function(e,t){var n,i,o=this.data;if(!De){for(n=0,i=o.length;i>n;n++)o[n].__position=n;for(n=0,i=(o=new r(o).sort(e,t,P).toArray()).length;i>n;n++)delete o[n].__position;return o}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,i={},r={};if(e&&e.length)for(t=0,n=this.data.length;n>t;t++)d(i,e,this.data[t],t,n,r);return i}},H={sum:function(e,t,n){var i=n.get(t);return c(e)?c(i)&&(e+=i):e=i,e},count:function(e){return(e||0)+1},average:function(e,n,i,r,o,a){var s=i.get(n);return a.count===t&&(a.count=0),c(e)?c(s)&&(e+=s):e=s,c(s)&&a.count++,r==o-1&&c(e)&&(e/=a.count),e},max:function(e,t,n){var i=n.get(t);return c(e)||u(e)||(e=i),i>e&&(c(i)||u(i))&&(e=i),e},min:function(e,t,n){var i=n.get(t);return c(e)||u(e)||(e=i),e>i&&(c(i)||u(i))&&(e=i),e}},r.process=function(e,n){n=n||{};var i,a=new r(e),l=n.group,d=s(l||[]).concat(o(n.sort||[])),c=n.filterCallback,u=n.filter,h=n.skip,p=n.take;return u&&(a=a.filter(u),c&&(a=c(a)),i=a.toArray().length),d&&(a=a.sort(d),l&&(e=a.toArray())),h!==t&&p!==t&&(a=a.range(h,p)),l&&(a=a.group(l,e)),{total:i,data:a.toArray()}},N=oe.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),$=oe.extend({init:function(e){var t,n=this;e=n.options=q({},n.options,e),ee(fe,function(t,n){typeof e[n]===ae&&(e[n]={url:e[n]})}),n.cache=e.cache?L.create(e.cache):{find:te,add:te},t=e.parameterMap,ie(e.push)&&(n.push=e.push),n.push||(n.push=ge),n.parameterMap=ie(t)?t:function(e){var n={};return ee(e,function(e,i){e in t&&(e=t[e],Y(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:ge},create:function(e){return Z(this.setup(e,"create"))},read:function(n){var i,r,o=this.cache;n=this.setup(n,"read"),i=n.success||te,n.error,(r=o.find(n.data))!==t?i(r):(n.success=function(e){o.add(n.data,e),i(e)},e.ajax(n))},update:function(e){return Z(this.setup(e,"update"))},destroy:function(e){return Z(this.setup(e,le))},setup:function(e,t){e=e||{};var n,i=this.options[t],r=ie(i.data)?i.data(e.data):i.data;return e=q(!0,{},i,e),n=q(!0,{},r,e.data),e.data=this.parameterMap(n,t),ie(e.url)&&(e.url=e.url(n)),e}}),(L=oe.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[ve(e)]=n)},find:function(e){return this._store[ve(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[ve(e)]}})).create=function(e){var t={inmemory:function(){return new L}};return Y(e)&&ie(e.find)?e:!0===e?new L:t[e]()},z=oe.extend({init:function(e){var t,n,i,r,o,a,s,l,d,c,u,h,v,b=this;for(t in e=e||{})n=e[t],b[t]=typeof n===ae?me(n):n;r=e.modelBase||He,Y(b.model)&&(b.model=i=r.define(b.model)),o=K(b.data,b),b._dataAccessFunction=o,b.model&&(a=K(b.groups,b),s=K(b.serialize,b),l={},d={},c={},u={},h=!1,(i=b.model).fields&&(ee(i.fields,function(e,t){var n;v=e,Y(t)&&t.field?v=t.field:typeof t===ae&&(v=t),Y(t)&&t.from&&(n=t.from),h=h||n&&n!==e||v!==e,d[e]=me(n||v),c[e]=me(e),l[n||v]=e,u[e]=n||v}),!e.serialize&&h&&(b.serialize=m(s,i,p,c,l,u))),b._dataAccessFunction=o,b.data=m(o,i,f,d,l,u),b.groups=m(a,i,g,d,l,u))},errors:function(e){return e?e.errors:null},parse:ge,data:ge,total:function(e){return e.length},groups:ge,aggregates:function(){return{}},serialize:function(e){return e}}),j=re.extend({init:function(e){var n,i,r=this;e&&(n=e.data),e=r.options=q({},r.options,e),r._map={},r._prefetch={},r._data=[],r._pristineData=[],r._ranges=[],r._view=[],r._pristineTotal=0,r._destroyed=[],r._pageSize=e.pageSize,r._page=e.page||(e.pageSize?1:t),r._sort=o(e.sort),r._filter=a(e.filter),r._group=s(e.group),r._aggregate=e.aggregate,r._total=e.total,r._shouldDetachObservableParents=!0,re.fn.init.call(r),r.transport=B.create(e,n,r),ie(r.transport.push)&&r.transport.push({pushCreate:K(r._pushCreate,r),pushUpdate:K(r._pushUpdate,r),pushDestroy:K(r._pushDestroy,r)}),null!=e.offlineStorage&&("string"==typeof e.offlineStorage?(i=e.offlineStorage,r._storage={getItem:function(){return JSON.parse(localStorage.getItem(i))},setItem:function(e){localStorage.setItem(i,ve(r.reader.serialize(e)))}}):r._storage=e.offlineStorage),r.reader=new ne.data.readers[e.schema.type||"json"](e.schema),r.reader.model,r._detachObservableParents(),r._data=r._observe(r._data),r._online=!0,r.bind(["push",ce,de,ue,"sync",pe,he],e)},options:{data:null,schema:{modelBase:He},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},clone:function(){return this},online:function(n){return n!==t?this._online!=n&&(this._online=n,n)?this.sync():e.Deferred().resolve().promise():this._online},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||[]},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return v(e);if(!t)for(var n=0;e.length>n;n++)e.at(n)}return e},parent:te,get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;n>t;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);if(i)for(t=0,n=i.length;n>t;t++)if(i[t].uid==e)return i[t]},indexOf:function(e){return x(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var n,i=this;if(e===t){if(i._data)for(n=0;i._data.length>n;n++)i._data.at(n);return i._data}i._detachObservableParents(),i._data=this._observe(e),i._pristineData=e.slice(0),i._storeData(),i._ranges=[],i.trigger("reset"),i._addRange(i._data),i._total=i._data.length,i._pristineTotal=i._total,i._process(i._data)},view:function(e){return e===t?this._view:(this._view=this._observeView(e),t)},_observeView:function(e){var t,n=this;return k(e,n._data,n._ranges,n.reader.model||Pe,n._isServerGrouped()),(t=new Re(e,n.reader.model)).parent=function(){return n.parent()},t},flatView:function(){return(this.group()||[]).length?v(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof Pe?e:new Pe(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof He||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,this._wrapInEmptyGroup(t)):this._data.splice(e,0,t),t},pushCreate:function(e){var t,n,i,r,o,a;X(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this.add(r),t.push(o),a=o.toJSON(),this._isServerGrouped()&&(a=this._wrapInEmptyGroup(a)),this._pristineData.push(a)}finally{this.options.autoSync=n}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){var t,n,i,r,o;for(X(e)||(e=[e]),t=[],n=0;e.length>n;n++)i=e[n],r=this._createNewModel(i),(o=this.get(r.id))?(t.push(o),o.accept(i),o.trigger(de),this._updatePristineForModel(o,i)):this.pushCreate(i);t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){var t,n,i,r,o,a;X(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this._createNewModel(r),a=!1,this._eachItem(this._data,function(e){var n,i;for(n=0;e.length>n;n++)if((i=e.at(n)).id===o.id){t.push(i),e.splice(n,1),a=!0;break}}),a&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=n}return t},remove:function(e){var n,i=this,r=i._isServerGrouped();return this._eachItem(i._data,function(o){return(n=w(o,e))&&r?(n.isNew&&n.isNew()||i._destroyed.push(n),!0):t}),this._removeModelFromRanges(e),this._updateRangesLength(),e},destroyed:function(){return this._destroyed},created:function(){var e,t,n=[],i=this._flatData(this._data);for(e=0,t=i.length;t>e;e++)i[e].isNew&&i[e].isNew()&&n.push(i[e]);return n},updated:function(){var e,t,n=[],i=this._flatData(this._data);for(e=0,t=i.length;t>e;e++)i[e].isNew&&!i[e].isNew()&&i[e].dirty&&n.push(i[e]);return n},sync:function(){var t,n=this,i=[],r=[],o=n._destroyed,a=(n._flatData(n._data),e.Deferred().resolve().promise());if(n.online()){if(!n.reader.model)return a;i=n.created(),r=n.updated(),t=[],n.options.batch&&n.transport.submit?t=n._sendSubmit(i,r,o):(t.push.apply(t,n._send("create",i)),t.push.apply(t,n._send("update",r)),t.push.apply(t,n._send("destroy",o))),a=e.when.apply(null,t).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)n._accept(arguments[e]);n._storeData(!0),n._change({action:"sync"}),n.trigger("sync")})}else n._storeData(!0),n._change({action:"sync"});return a},cancelChanges:function(e){var t=this;e instanceof ne.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._ranges=[],t._addRange(t._data),t._change())},hasChanges:function(){var e,t,n=this._flatData(this._data);if(this._destroyed.length)return!0;for(e=0,t=n.length;t>e;e++)if(n[e].isNew&&n[e].isNew()||n[e].dirty)return!0;return!1},_accept:function(t){var n,i=this,r=t.models,o=t.response,a=0,s=i._isServerGrouped(),l=i._pristineData,d=t.type;if(i.trigger(pe,{response:o,type:d}),o&&!Q(o)){if(o=i.reader.parse(o),i._handleCustomErrors(o))return;o=i.reader.data(o),X(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for("destroy"===d&&(i._destroyed=[]),a=0,n=r.length;n>a;a++)"destroy"!==d?(r[a].accept(o[a]),"create"===d?l.push(s?i._wrapInEmptyGroup(r[a]):o[a]):"update"===d&&i._updatePristineForModel(r[a],o[a])):i._removePristineForModel(r[a])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){ne.deepExtend(n[e],t)})},_executeOnPristineForModel:function(e,n){this._eachPristineItem(function(i){var r=y(i,e);return r>-1?(n(r,i),!0):t})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){return(this._isServerGrouped()?this.reader.groups:this.reader.data).call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?function e(t,n){for(var i=0,r=t.length;r>i;i++)if(t[i].hasSubgroups){if(e(t[i].items,n))return!0}else if(n(t[i].items,t[i]))return!0}(e,t):t(e))},_pristineForModel:function(e){var n,i;return this._eachPristineItem(function(r){return(i=y(r,e))>-1?(n=r[i],!0):t}),n},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(n){var i=x(n,e);i>=0&&(!t||e.isNew()&&!t.__state__?n.splice(i,1):n[i].accept(t))})},_submit:function(t,n){var i=this;i.trigger(ue,{type:"submit"}),i.transport.submit(q({success:function(n,i){var r=e.grep(t,function(e){return e.type==i})[0];r&&r.resolve({response:n,models:r.models,type:i})},error:function(e,n,r){for(var o=0;t.length>o;o++)t[o].reject(e);i.error(e,n,r)}},n))},_sendSubmit:function(t,n,i){var r=this,o=[];return r.options.batch&&(t.length&&o.push(e.Deferred(function(e){e.type="create",e.models=t})),n.length&&o.push(e.Deferred(function(e){e.type="update",e.models=n})),i.length&&o.push(e.Deferred(function(e){e.type="destroy",e.models=i})),r._submit(o,{data:{created:r.reader.serialize(h(t)),updated:r.reader.serialize(h(n)),destroyed:r.reader.serialize(h(i))}})),o},_promise:function(t,n,i){var r=this;return e.Deferred(function(e){r.trigger(ue,{type:i}),r.transport[i].call(r.transport,q({success:function(t){e.resolve({response:t,models:n,type:i})},error:function(t,n,i){e.reject(t),r.error(t,n,i)}},t))}).promise()},_send:function(e,t){var n,i,r=this,o=[],a=r.reader.serialize(h(t));if(r.options.batch)t.length&&o.push(r._promise({data:{models:a}},t,e));else for(n=0,i=t.length;i>n;n++)o.push(r._promise({data:a[n]},[t[n]],e));return o},read:function(t){var n=this,i=n._params(t),r=e.Deferred();return n._queueRequest(i,function(){var e=n.trigger(ue,{type:"read"});e?(n._dequeueRequest(),r.resolve(e)):(n.trigger(he),n._ranges=[],n.trigger("reset"),n.online()?n.transport.read({data:i,success:function(e){n.success(e,i),r.resolve()},error:function(){var e=Ce.call(arguments);n.error.apply(n,e),r.reject.apply(r,e)}}):null!=n.options.offlineStorage&&(n.success(n.offlineData(),i),r.resolve()))}),r.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var n,i,r,o,a,s,l,d=this,c=d.options;if(d.trigger(pe,{response:e,type:"read"}),d.online()){if(e=d.reader.parse(e),d._handleCustomErrors(e))return d._dequeueRequest(),t;d._total=d.reader.total(e),d._aggregate&&c.serverAggregates&&(d._aggregateResult=d._readAggregates(e)),e=d._readData(e)}else{for(e=d._readData(e),n=[],i={},o=(r=d.reader.model)?r.idField:"id",a=0;this._destroyed.length>a;a++)i[s=this._destroyed[a][o]]=s;for(a=0;e.length>a;a++)"destroy"==(l=e[a]).__state__?i[l[o]]||this._destroyed.push(this._createNewModel(l)):n.push(l);e=n,d._total=e.length}d._pristineTotal=d._total,d._pristineData=e.slice(0),d._detachObservableParents(),d._data=d._observe(e),null!=d.options.offlineStorage&&d._eachItem(d._data,function(e){var t,n;for(t=0;e.length>t;t++)"update"==(n=e.at(t)).__state__&&(n.dirty=!0)}),d._storeData(),d._addRange(d._data),d._process(d._data),d._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;this._data.length>e;e++)this._data[e].parent&&(this._data[e].parent=te)},_storeData:function(e){var t,n,i,r=this._isServerGrouped(),o=this.reader.model;if(null!=this.options.offlineStorage){for(t=function e(t){var n,i,a,s=[];for(n=0;t.length>n;n++)a=(i=t.at(n)).toJSON(),r&&i.items?a.items=e(i.items):(a.uid=i.uid,o&&(i.isNew()?a.__state__="create":i.dirty&&(a.__state__="update"))),s.push(a);return s}(this._data),n=0;this._destroyed.length>n;n++)(i=this._destroyed[n].toJSON()).__state__="destroy",t.push(i);this.offlineData(t),e&&(this._pristineData=t)}},_addRange:function(e){var t=this,n=t._skip||0,i=n+t._flatData(e,!0).length;t._ranges.push({start:n,end:i,data:e,timestamp:(new Date).getTime()}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(pe,{}),this.trigger(ce,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,n=q({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete n.take,delete n.skip,delete n.page,delete n.pageSize),t.options.serverGrouping?t.reader.model&&n.group&&(n.group=T(n.group,t.reader.model)):delete n.group,t.options.serverFiltering?t.reader.model&&n.filter&&(n.filter=function e(t,n){var i,r,o,a={};for(o in t)"filters"!==o&&(a[o]=t[o]);if(t.filters)for(a.filters=[],i=0,r=t.filters.length;r>i;i++)a.filters[i]=e(t.filters[i],n);else a.field=S(n.fields,a.field);return a}(n.filter,t.reader.model)):delete n.filter,t.options.serverSorting?t.reader.model&&n.sort&&(n.sort=T(n.sort,t.reader.model)):delete n.sort,t.options.serverAggregates?t.reader.model&&n.aggregate&&(n.aggregate=T(n.aggregate,t.reader.model)):delete n.aggregate,n},_queueRequest:function(e,n){var i=this;i._requestInProgress?i._pending={callback:K(n,i),options:e}:(i._requestInProgress=!0,i._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(ce,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_shouldWrap:function(e){var t=this.reader.model;return!(!t||!e.length||e[0]instanceof t)},_observe:function(e){var t=this,n=t.reader.model;return t._shouldDetachObservableParents=!0,e instanceof Oe?(t._shouldDetachObservableParents=!1,t._shouldWrap(e)&&(e.type=t.reader.model,e.wrapAll(e,e))):(e=new(t.pageSize()&&!t.options.serverPaging?Re:Oe)(e,t.reader.model)).parent=function(){return t.parent()},t._isServerGrouped()&&function e(t,n){var i,r,o;if(n)for(i=0,r=t.length;r>i;i++)(o=t.at(i)).hasSubgroups?e(o.items,n):o.items=new Re(o.items,n)}(e,n),t._changeHandler&&t._data&&t._data instanceof Oe?t._data.unbind(de,t._changeHandler):t._changeHandler=K(t._change,t),e.bind(de,t._changeHandler)},_change:function(e){var t,n,i,r=this,o=e?e.action:"";if("remove"===o)for(t=0,n=e.items.length;n>t;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==o&&"remove"!==o&&"itemchange"!==o?(i=parseInt(r._total,10),c(r._total)||(i=parseInt(r._pristineTotal,10)),"add"===o?i+=e.items.length:"remove"===o?i-=e.items.length:"itemchange"===o||"sync"===o||r.options.serverPaging?"sync"===o&&(i=r._pristineTotal=parseInt(r._total,10)):i=r._pristineTotal,r._total=i,r._process(r._data,e)):r.sync()},_calculateAggregates:function(e,t){t=t||{};var n=new r(e),i=t.aggregate,o=t.filter;return o&&(n=n.filter(o)),n.aggregate(i)},_process:function(e,n){var i,r=this,o={};!0!==r.options.serverPaging&&(o.skip=r._skip,o.take=r._take||r._pageSize,o.skip===t&&r._page!==t&&r._pageSize!==t&&(o.skip=(r._page-1)*r._pageSize)),!0!==r.options.serverSorting&&(o.sort=r._sort),!0!==r.options.serverFiltering&&(o.filter=r._filter),!0!==r.options.serverGrouping&&(o.group=r._group),!0!==r.options.serverAggregates&&(o.aggregate=r._aggregate,r._aggregateResult=r._calculateAggregates(e,o)),i=r._queryProcess(e,o),r.view(i.data),i.total===t||r.options.serverFiltering||(r._total=i.total),(n=n||{}).items=n.items||r._view,r.trigger(de,n)},_queryProcess:function(e,t){return r.process(e,t)},_mergeState:function(e){var n=this;return e!==t&&(n._pageSize=e.pageSize,n._page=e.page,n._sort=e.sort,n._filter=e.filter,n._group=e.group,n._aggregate=e.aggregate,n._skip=e.skip,n._take=e.take,n._skip===t&&(n._skip=n.skip(),e.skip=n.skip()),n._take===t&&n._pageSize!==t&&(n._take=n._pageSize,e.take=n._take),e.sort&&(n._sort=e.sort=o(e.sort)),e.filter&&(n._filter=e.filter=a(e.filter)),e.group&&(n._group=e.group=s(e.group)),e.aggregate&&(n._aggregate=e.aggregate=function(e){return X(e)?e:[e]}(e.aggregate))),e},query:function(n){var i,r;return this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates||(this._data===t||0===this._data.length)&&!this._destroyed.length?this.read(this._mergeState(n)):((r=this.trigger(ue,{type:"read"}))||(this.trigger(he),i=this._queryProcess(this._data,this._mergeState(n)),this.options.serverFiltering||(this._total=i.total!==t?i.total:this._data.length),this._aggregateResult=this._calculateAggregates(this._data,n),this.view(i.data),this.trigger(pe,{type:"read"}),this.trigger(de,{items:i.data})),e.Deferred().resolve(r).promise())},fetch:function(e){var t=this;return this._query().then(function(n){!0!==n&&ie(e)&&e.call(t)})},_query:function(e){var t=this;return t.query(q({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var n=this,i=n.page(),r=n.total();return e=e||{},!i||r&&i+1>n.totalPages()?t:(n._skip=i*n.take(),i+=1,e.page=i,n._query(e),i)},prev:function(e){var n=this,i=n.page();return e=e||{},i&&1!==i?(n._skip=n._skip-n.take(),i-=1,e.page=i,n._query(e),i):t},page:function(e){var n,i=this;return e!==t?(e=be.max(be.min(be.max(e,1),i.totalPages()),1),i._query({page:e}),t):(n=i.skip())!==t?be.round((n||0)/(i.take()||1))+1:t},pageSize:function(e){return e!==t?(this._query({pageSize:e,page:1}),t):this.take()},sort:function(e){return e!==t?(this._query({sort:e}),t):this._sort},filter:function(e){var n=this;return e===t?n._filter:(n.trigger("reset"),n._query({filter:e,page:1}),t)},group:function(e){return e!==t?(this._query({group:e}),t):this._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){return e!==t?(this._query({aggregate:e}),t):this._aggregate},aggregates:function(){var e=this._aggregateResult;return Q(e)&&(e=this._emptyAggregates(this.aggregate())),e},_emptyAggregates:function(e){var t,n,i={};if(!Q(e))for(t={},X(e)||(e=[e]),n=0;e.length>n;n++)t[e[n].aggregate]=0,i[e[n].field]=t;return i},_wrapInEmptyGroup:function(e){var t,n,i,r=this.group();for(i=r.length-1;i>=0;i--)n=r[i],t={value:e.get(n.field),field:n.field,items:t?[t]:[e],hasSubgroups:!!t,aggregates:this._emptyAggregates(n.aggregates)};return t},totalPages:function(){var e=this,t=e.pageSize()||e.total();return be.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=be.min(e+t,n.total());return!n.options.serverPaging&&n._data.length>0||n._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(e,n){var i,r,o,a,s,l,d,c;if(this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0,e=be.min(e||0,this.total()),i=this,r=be.max(be.floor(e/n),0)*n,o=be.min(r+n,i.total()),(a=i._findRange(e,be.min(e+n,i.total()))).length){i._pending=t,i._skip=e>i.skip()?be.min(o,(i.totalPages()-1)*i.take()):r,i._take=n,s=i.options.serverPaging,l=i.options.serverSorting,d=i.options.serverFiltering,c=i.options.serverAggregates;try{i.options.serverPaging=!0,i._isServerGrouped()||i.group()&&i.group().length||(i.options.serverSorting=!0),i.options.serverFiltering=!0,i.options.serverPaging=!0,i.options.serverAggregates=!0,s&&(i._detachObservableParents(),i._data=a=i._observe(a)),i._process(a)}finally{i.options.serverPaging=s,i.options.serverSorting=l,i.options.serverFiltering=d,i.options.serverAggregates=c}}else n!==t&&(i._rangeExists(r,o)?e>r&&i.prefetch(o,n,function(){i.range(e,n)}):i.prefetch(r,n,function(){e>r&&o<i.total()&&!i._rangeExists(o,be.min(o+n,i.total()))?i.prefetch(o,n,function(){i.range(e,n)}):i.range(e,n)}))},_findRange:function(e,n){var i,r,a,l,d,c,u,h,p,f,g,m,v=this,b=v._ranges,_=[],k=v.options,w=k.serverSorting||k.serverPaging||k.serverFiltering||k.serverGrouping||k.serverAggregates;for(r=0,g=b.length;g>r;r++)if(e>=(i=b[r]).start&&i.end>=e){for(f=0,a=r;g>a;a++)if(i=b[a],(p=v._flatData(i.data,!0)).length&&e+f>=i.start&&(c=i.data,u=i.end,w||(m=s(v.group()||[]).concat(o(v.sort()||[])),p=c=(h=v._queryProcess(i.data,{sort:m,filter:v.filter()})).data,h.total!==t&&(u=h.total)),l=0,e+f>i.start&&(l=e+f-i.start),d=p.length,u>n&&(d-=u-n),f+=d-l,_=v._mergeGroups(_,c,l,d),i.end>=n&&f==n-e))return _;break}return[]},_mergeGroups:function(e,t,n,i){if(this._isServerGrouped()){var r,o=t.toJSON();return e.length&&(r=e[e.length-1]),function e(t,n,i,r){for(var o,a,s,l=0;n.length&&r&&(s=(a=(o=n[l]).items).length,t&&t.field===o.field&&t.value===o.value?(t.hasSubgroups&&t.items.length?e(t.items[t.items.length-1],o.items,i,r):(a=a.slice(i,i+r),t.items=t.items.concat(a)),n.splice(l--,1)):o.hasSubgroups&&a.length?(e(o,a,i,r),o.items.length||n.splice(l--,1)):(a=a.slice(i,i+r),o.items=a,o.items.length||n.splice(l--,1)),0===a.length?i-=s:(i=0,r-=a.length),!(++l>=n.length)););n.length>l&&n.splice(l,n.length-l)}(r,o,n,i),e.concat(o)}return e.concat(t.slice(n,i))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n,i){var r=this,o=r._timeStamp();return function(a){var s,l,d,c=!1,u={start:e,end:t,data:[],timestamp:r._timeStamp()};if(r._dequeueRequest(),r.trigger(pe,{response:a,type:"read"}),a=r.reader.parse(a),(d=r._readData(a)).length){for(s=0,l=r._ranges.length;l>s;s++)if(r._ranges[s].start===e){c=!0,u=r._ranges[s];break}c||r._ranges.push(u)}u.data=r._observe(d),u.end=u.start+r._flatData(u.data,!0).length,r._ranges.sort(function(e,t){return e.start-t.start}),r._total=r.reader.total(a),(i||o>=r._currentRequestTimeStamp||!r._skipRequestsInProgress)&&(n&&d.length?n():r.trigger(de,{}))}},prefetch:function(e,t,n){var i=this,r=be.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(o,function(){i.trigger(ue,{type:"read"})?i._dequeueRequest():i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n),error:function(){var e=Ce.call(arguments);i.error.apply(i,e)}})})},100))},_multiplePrefetch:function(e,t,n){var i=this,r=be.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():i.trigger(ue,{type:"read"})||i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n,!0)})},_rangeExists:function(e,t){var n,i,r=this._ranges;for(n=0,i=r.length;i>n;n++)if(e>=r[n].start&&r[n].end>=t)return!0;return!1},_removeModelFromRanges:function(e){var t,n,i,r;for(i=0,r=this._ranges.length;r>i&&(n=this._ranges[i],this._eachItem(n.data,function(n){w(n,e)&&(t=!0)}),!t);i++);},_updateRangesLength:function(){var e,t,n,i,r=0;for(n=0,i=this._ranges.length;i>n;n++)(e=this._ranges[n]).start=e.start-r,t=this._flatData(e.data,!0).length,r=e.end-t,e.end=e.start+t}}),(B={}).create=function(t,n,i){var r,o=t.transport?e.extend({},t.transport):null;return o?(o.read=typeof o.read===ae?{url:o.read}:o.read,"jsdo"===t.type&&(o.dataSource=i),t.type&&(ne.data.transports=ne.data.transports||{},ne.data.schemas=ne.data.schemas||{},ne.data.transports[t.type]&&!Y(ne.data.transports[t.type])?r=new ne.data.transports[t.type](q(o,{data:n})):o=q(!0,{},ne.data.transports[t.type],o),t.schema=q(!0,{},ne.data.schemas[t.type],t.schema)),r||(r=ie(o.read)?o:new $(o))):r=new N({data:t.data||[]}),r},j.create=function(e){(X(e)||e instanceof Oe)&&(e={data:e});var n,i,r,o=e||{},a=o.data,s=o.fields,l=o.table,d=o.select,c={};if(a||!s||o.transport||(l?a=I(l,s):d&&(a=D(d,s),o.group===t&&a[0]&&a[0].optgroup!==t&&(o.group="optgroup"))),ne.data.Model&&s&&(!o.schema||!o.schema.model)){for(n=0,i=s.length;i>n;n++)(r=s[n]).type&&(c[r.field]=r);Q(c)||(o.schema=q(!0,o.schema,{model:{fields:c}}))}return o.data=a,d=null,o.select=null,l=null,o.table=null,o instanceof j?o:new j(o)},U=He.define({idField:"id",init:function(e){var t=this,n=t.hasChildren||e&&e.hasChildren,i="items",r={};ne.data.Model.fn.init.call(t,e),typeof t.children===ae&&(i=t.children),r={schema:{data:i,model:{hasChildren:n,id:t.idField,fields:t.fields}}},typeof t.children!==ae&&q(r,t.children),r.data=e,n||(n=r.schema.data),typeof n===ae&&(n=ne.getter(n)),ie(n)&&(t.hasChildren=!!n.call(t,t)),t._childrenOptions=r,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[i]&&!e._loaded)},_initChildren:function(){var e,t,n,i=this;i.children instanceof V||(t=(e=i.children=new V(i._childrenOptions)).transport,n=t.parameterMap,t.parameterMap=function(e,t){return e[i.idField||"id"]=i.id,n&&(e=n(e,t)),e},e.parent=function(){return i},e.bind(de,function(e){e.node=e.node||i,i.trigger(de,e)}),e.bind(ce,function(e){var t=i.parent();t&&(e.node=e.node||i,t.trigger(ce,e))}),i._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){this[this._childrenOptions.schema.data||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var n,i,r={},o="_query";return this.hasChildren?(this._initChildren(),n=this.children,r[this.idField||"id"]=this.id,this._loaded||(n._data=t,o="read"),n.one(de,K(this._childrenLoaded,this)),i=n[o](r)):this.loaded(!0),i||e.Deferred().resolve().promise()},parentNode:function(){return this.parent().parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return He.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),(V=j.extend({init:function(e){var t=U.define({children:e});j.fn.init.call(this,q(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(ce,function(t){e.trigger(ce,t)})},remove:function(e){var t,n=e.parentNode(),i=this;return n&&n._initChildren&&(i=n.children),t=j.fn.remove.call(i,e),n&&!i.data().length&&(n.hasChildren=!1),t},success:E("success"),data:E("data"),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),j.fn.insert.call(this,e,t)},_find:function(e,t){var n,i,r,o,a=this._data;if(a){if(r=j.fn[e].call(this,t))return r;for(n=0,i=(a=this._flatData(this._data)).length;i>n;n++)if((o=a[n].children)instanceof V&&(r=o[e](t)))return r}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}})).create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},n=t.data,i=t.fields,r=t.list;return n&&n._dataSource?n._dataSource:(n||!i||t.transport||r&&(n=A(r,i)),t.data=n,t instanceof V?t:new V(t))},W=ne.Observable.extend({init:function(e,t,n){ne.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!n;var i=this;e.bind("change",function(){i._change()}),e.bind("reset",function(){i._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var n=this.pageSize,i=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),null):this.useRanges?this.useRanges?((this.dataOffset>e||e>=this.skip+n)&&(i=this.range(Math.floor(e/n)*n)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),i?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):t:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize+t,i=be.max(be.floor(n/t),0)*t;this.offset=n,this.dataSource.prefetch(i,t,function(){e._goToRange(n,!0)})},range:function(e,t){if(this.offset===e)return!0;var n=this,i=this.pageSize,r=be.max(be.floor(e/i),0)*i,o=this.dataSource;return t&&(r+=i),o.inRange(e,i)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):!this.prefetch||(o.prefetch(r,i,function(){n.offset=e,n._recalculate(),n._goToRange(e,!0)}),!1)},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,i=this.dataSource;i.inRange(n,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:n,take:t}),i.prefetch(n,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:n,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,n=this.viewSize,i=Math.ceil(t/e)*e;this.skip=i,this.midPageThreshold=i+e-1,this.nextPageThreshold=i+n-1,this.prefetchThreshold=i+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=i+e-n,this.nextFullRange=i,this.previousMidRange=t-n,this.previousFullRange=i-e}}),G=ne.Observable.extend({init:function(e,t){var n=this;ne.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new W(e,3*t),this.buffer.bind({endreached:function(e){n.trigger("endreached",{index:e.index})},prefetching:function(e){n.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){n._total=0,n.trigger("reset")},resize:function(){n._total=Math.ceil(this.length/n.batchSize),n.trigger("resize",{total:n.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t,n,i=this.buffer,r=e*this.batchSize,o=this.batchSize,a=[];for(i.offset>r&&i.at(i.offset-1),n=0;o>n&&null!==(t=i.at(r+n));n++)a.push(t);return a},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}}),q(!0,ne.data,{readers:{json:z},Query:r,DataSource:j,HierarchicalDataSource:V,Node:U,ObservableObject:Pe,ObservableArray:Oe,LazyObservableArray:Re,LocalTransport:N,RemoteTransport:$,Cache:L,DataReader:z,Model:He,Buffer:W,BatchBuffer:G})}(window.kendo.jQuery),function(e,t){function n(t,n,i){return f.extend({init:function(e,t,n){var i=this;f.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=I(i.dataBinding,i),i._dataBound=I(i.dataBound,i),i._itemChange=I(i.itemChange,i)},itemChange:function(e){o(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,n,i=this.widget,r=e.removedItems||i.items();for(t=0,n=r.length;n>t;t++)l(r[t])},_ns:function(t){t=t||w.ui;var n=[w.ui,w.dataviz.ui,w.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),w.rolesFromNamespaces(n)},dataBound:function(e){var i,r,a,s,l=this.widget,d=e.addedItems||l.items(),c=l[n],u=(c.group(),w.data.HierarchicalDataSource);if(!(u&&c instanceof u)&&d.length)for(a=e.addedDataItems||c.flatView(),s=this.bindings[t]._parents(),i=0,r=a.length;r>i;i++)o(d[i],a[i],this._ns(e.ns),[a[i]].concat(s))},refresh:function(e){var r,o=this,a=o.widget;(e=e||{}).action||(o.destroy(),a.bind("dataBinding",o._dataBinding),a.bind("dataBound",o._dataBound),a.bind("itemChange",o._itemChange),r=o.bindings[t].get(),a[n]instanceof w.data.DataSource&&a[n]!=r&&(r instanceof w.data.DataSource?a[i](r):r&&r._dataSource?a[i](r._dataSource):(a[n].data(r),o.bindings.value&&(a instanceof w.ui.Select||a instanceof w.ui.MultiSelect)&&a.value(c(o.bindings.value.get(),a.options.dataValueField)))))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}function i(e,n){var i=w.initWidget(e,{},n);return i?new b(i):t}function r(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function o(e,t,n,a){var l,d,c,f=e.getAttribute("data-"+w.ns+"role"),g=e.getAttribute("data-"+w.ns+"bind"),m=e.children,b=[],y=!0,x={};if(a=a||[t],(f||g)&&s(e),f&&(c=i(e,n)),g&&(g=function e(t){var n,i,r,o,a,s,l,d={};for(n=0,i=(l=t.match(_)).length;i>n;n++)o=(r=l[n]).indexOf(":"),a=r.substring(0,o),"{"==(s=r.substring(o+1)).charAt(0)&&(s=e(s)),d[a]=s;return d}(g.replace(k,"")),c||((x=w.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:M,valuePrimitive:!1,autoBind:!0})).roles=n,c=new v(e,x)),c.source=t,d=r(g,a,u),x.template&&(d.template=new p(a,"",x.template)),d.click&&(g.events=g.events||{},g.events.click=g.click,d.click.destroy(),delete d.click),d.source&&(y=!1),g.attr&&(d.attr=r(g.attr,a,u)),g.style&&(d.style=r(g.style,a,u)),g.events&&(d.events=r(g.events,a,h)),g.css&&(d.css=r(g.css,a,u)),c.bind(d)),c&&(e.kendoBindingTarget=c),y&&m){for(l=0;m.length>l;l++)b[l]=m[l];for(l=0;b.length>l;l++)o(b[l],t,n,a)}}function a(t,n){var i,r,a,s=w.rolesFromNamespaces([].slice.call(arguments,2));for(n=w.observable(n),i=0,r=(t=e(t)).length;r>i;i++)1===(a=t[i]).nodeType&&o(a,n,s)}function s(e){var t=e.kendoBindingTarget;t&&(t.destroy(),P?delete e.kendoBindingTarget:e.removeAttribute?e.removeAttribute("kendoBindingTarget"):e.kendoBindingTarget=null)}function l(e){s(e),d(e)}function d(e){var t,n,i=e.children;if(i)for(t=0,n=i.length;n>t;t++)l(i[t])}function c(e,t){var n,i,r=[],o=0;if(!t)return e;if(e instanceof C){for(n=e.length;n>o;o++)i=e[o],r[o]=i.get?i.get(t):i[t];e=r}else e instanceof x&&(e=e.get(t));return e}var u,h,p,f,g,m,v,b,_,k,w=window.kendo,y=w.Observable,x=w.data.ObservableObject,C=w.data.ObservableArray,S={}.toString,T={},D=w.Class,I=e.proxy,E="value",A="source",O="events",R="checked",P=!0,M="change";!function(){var e=document.createElement("a");try{delete e.test}catch(e){P=!1}}(),u=y.extend({init:function(e,t){var n=this;y.fn.init.call(n),n.source=e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof y,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(M,n._change))},_parents:function(){var t,n=this.parents,i=this.get();return i&&"function"==typeof i.parent&&(t=i.parent(),e.inArray(t,n)<0&&(n=[t].concat(n))),n},change:function(e){var t,n,i=e.field,r=this;if("this"===r.path)r.trigger(M,e);else for(t in r.dependencies)if(0===t.indexOf(i)&&(!(n=t.charAt(i.length))||"."===n||"["===n)){r.trigger(M,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,n=e.source,i=0,r=e.path,o=n;if(!e.observable)return o;for(e.start(e.source),o=n.get(r);o===t&&n;)(n=e.parents[++i])instanceof x&&(o=n.get(r));if(o===t)for(n=e.source;o===t&&n;)(n=n.parent())instanceof x&&(o=n.get(r));return"function"==typeof o&&((i=r.lastIndexOf("."))>0&&(n=n.get(r.substring(0,i))),e.start(n),o=n!==e.source?o.call(n,e.source):o.call(n),e.stop(n)),n&&n!==e.source&&(e.currentSource=n,n.unbind(M,e._change).bind(M,e._change)),e.stop(e.source),o},set:function(e){var t=this.currentSource||this.source,n=w.getter(this.path)(t);"function"==typeof n?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(M,this._change),this.currentSource&&this.currentSource.unbind(M,this._change)),this.unbind()}}),h=u.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)(t=this.parents[++i])instanceof x&&(e=t.get(n));return I(e,t)}}),p=u.extend({init:function(e,t,n){u.fn.init.call(this,e,t),this.template=n},render:function(e){var t;return this.start(this.source),t=w.render(this.template,e),this.stop(this.source),t}}),f=D.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;(e=t?e[t]:e).bind(M,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),g=f.extend({dataType:function(){return(this.element.getAttribute("data-type")||this.element.type||"text").toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){return"date"==t?e=w.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=w.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t?e=w.parseFloat(e):"boolean"==t&&(e=e.toLowerCase(),e=null!==w.parseFloat(e)?!!w.parseFloat(e):"true"===e.toLowerCase()),e}}),T.attr=f.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),T.css=f.extend({init:function(e,t,n){f.fn.init.call(this,e,t,n),this.classes={}},refresh:function(t){var n=e(this.element),i=this.bindings.css[t];(this.classes[t]=i.get())?n.addClass(t):n.removeClass(t)}}),T.style=f.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),T.enabled=f.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),T.readonly=f.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),T.disabled=f.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),T.events=f.extend({init:function(e,t,n){f.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=e(this.element),i=this.bindings.events[t],r=this.handlers[t];r&&n.off(t,r),r=this.handlers[t]=i.get(),n.on(t,i.source,r)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.off(t,this.handlers[t])}}),T.text=f.extend({refresh:function(){var t=this.bindings.text.get(),n=this.element.getAttribute("data-format")||"";null==t&&(t=""),e(this.element).text(w.toString(t,n))}}),T.visible=f.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),T.invisible=f.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),T.html=f.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),T.value=g.extend({init:function(t,n,i){g.fn.init.call(this,t,n,i),this._change=I(this.change,this),this.eventName=i.valueUpdate||M,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=M,this.bindings[E].set(this.parsedValue()),this._initChange=!1},refresh:function(){var e,t;this._initChange||(null==(e=this.bindings[E].get())&&(e=""),"date"==(t=this.dataType())?e=w.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=w.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e),this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),T.source=f.extend({init:function(e,t,n){f.fn.init.call(this,e,t,n);var i=this.bindings.source.get();i instanceof w.data.DataSource&&!1!==n.autoBind&&i.fetch()},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof C||n instanceof w.data.DataSource?"add"==(e=e||{}).action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render():t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?w.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=w.template(t)),t},add:function(t,n){var i,r,a,s,l=this.container(),d=l.cloneNode(!1),c=l.children[t];if(e(d).html(w.render(this.template(),n)),d.children.length)for(i=this.bindings.source._parents(),r=0,a=n.length;a>r;r++)s=d.children[0],l.insertBefore(s,c||null),o(s,n[r],this.options.roles,[n[r]].concat(i))},remove:function(e,t){var n,i,r=this.container();for(n=0;t.length>n;n++)l(i=r.children[e]),r.removeChild(i)},render:function(){var t,n,i,r=this.bindings.source.get(),a=this.container(),s=this.template();if(r instanceof w.data.DataSource&&(r=r.view()),r instanceof C||"[object Array]"===S.call(r)||(r=[r]),this.bindings.template){if(d(a),e(a).html(this.bindings.template.render(r)),a.children.length)for(t=this.bindings.source._parents(),n=0,i=r.length;i>n;n++)o(a.children[n],r[n],this.options.roles,[r[n]].concat(t))}else e(a).html(w.render(s,r))}}),T.input={checked:g.extend({init:function(t,n,i){g.fn.init.call(this,t,n,i),this._change=I(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n,i=this.element,r=this.value();if("radio"==i.type)r=this.parsedValue(),this.bindings[R].set(r);else if("checkbox"==i.type)if((e=this.bindings[R].get())instanceof C){if((r=this.parsedValue())instanceof Date){for(n=0;e.length>n;n++)if(e[n]instanceof Date&&+e[n]==+r){t=n;break}}else t=e.indexOf(r);t>-1?e.splice(t,1):e.push(r)}else this.bindings[R].set(r)},refresh:function(){var e,t,n=this.bindings[R].get(),i=n,r=this.dataType(),o=this.element;if("checkbox"==o.type)if(i instanceof C){if(e=-1,(n=this.parsedValue())instanceof Date){for(t=0;i.length>t;t++)if(i[t]instanceof Date&&+i[t]==+n){e=t;break}}else e=i.indexOf(n);o.checked=e>=0}else o.checked=i;else"radio"==o.type&&null!=n&&("date"==r?n=w.toString(n,"yyyy-MM-dd"):"datetime-local"==r&&(n=w.toString(n,"yyyy-MM-ddTHH:mm:ss")),o.value===""+n&&(o.checked=!0))},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(M,this._change)}})},T.select={source:T.source.extend({refresh:function(n){var i=this,r=i.bindings.source.get();r instanceof C||r instanceof w.data.DataSource?"add"==(n=n||{}).action?i.add(n.index,n.items):"remove"==n.action?i.remove(n.index,n.items):("itemchange"==n.action||n.action===t)&&(i.render(),i.bindings.value&&i.bindings.value&&(i.element.value=c(i.bindings.value.get(),e(i.element).data("valueField")))):i.render()}}),value:g.extend({init:function(t,n,i){g.fn.init.call(this,t,n,i),this._change=I(this.change,this),e(this.element).change(this._change)},parsedValue:function(){var e,t,n,i,r=this.dataType(),o=[];for(n=0,i=this.element.options.length;i>n;n++)(t=this.element.options[n]).selected&&(e=(e=t.attributes.value)&&e.specified?t.value:t.text,o.push(this._parseValue(e,r)));return o},change:function(){var e,n,i,r,o,a,s=[],l=this.element,d=this.options.valueField||this.options.textField,c=this.options.valuePrimitive;for(o=0,a=l.options.length;a>o;o++)(n=l.options[o]).selected&&(r=(r=n.attributes.value)&&r.specified?n.value:n.text,s.push(this._parseValue(r,this.dataType())));if(d)for((e=this.bindings.source.get())instanceof w.data.DataSource&&(e=e.view()),i=0;s.length>i;i++)for(o=0,a=e.length;a>o;o++)if(this._parseValue(e[o].get(d),this.dataType())+""===s[i]){s[i]=e[o];break}(r=this.bindings[E].get())instanceof C?r.splice.apply(r,[0,r.length].concat(s)):this.bindings[E].set(c||!(r instanceof x||null===r||r===t)&&d?s[0].get(d):s[0])},refresh:function(){var e,t,n,i=this.element,r=i.options,o=this.bindings[E].get(),a=o,s=this.options.valueField||this.options.textField,l=this.dataType();for(a instanceof C||(a=new C([o])),i.selectedIndex=-1,n=0;a.length>n;n++)for(o=a[n],s&&o instanceof x&&(o=o.get(s)),"date"==l?o=w.toString(a[n],"yyyy-MM-dd"):"datetime-local"==l&&(o=w.toString(a[n],"yyyy-MM-ddTHH:mm:ss")),e=0;r.length>e;e++)""===(t=r[e].value)&&""!==o&&(t=r[e].text),null!=o&&t==""+o&&(r[e].selected=!0)},destroy:function(){e(this.element).off(M,this._change)}})},T.widget={events:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=I(this.change,this),this.widget.bind(M,this._change)},change:function(){this.bindings[R].set(this.value())},refresh:function(){this.widget.check(!0===this.bindings[R].get())},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(M,this._change)}}),visible:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:n("source","dataSource","setDataSource"),value:f.extend({init:function(t,n,i){f.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(M,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(null==r||r instanceof x),this._valueIsObservableArray=r instanceof C,this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,d="[object Array]"===S.call(s),c=this._valueIsObservableObject,u=[];if(this._initChange=!0,l)if(this.bindings.source&&(a=this.bindings.source.get()),""===s&&(c||this.options.valuePrimitive))s=null;else{for((!a||a instanceof w.data.DataSource)&&(a=this.widget.dataSource.flatView()),d&&(t=s.length,u=s.slice(0)),r=0,o=a.length;o>r;r++)if(i=(n=a[r]).get(l),d){for(e=0;t>e;e++)if(i==u[e]){u[e]=n;break}}else if(i==s){s=c?n:i;break}u[0]&&(s=this._valueIsObservableArray?u:c||!l?u[0]:u[0].get(l))}this.bindings.value.set(s),this._initChange=!1},refresh:function(){var e,n,i,r,o,a,s,l,d;if(!this._initChange){if(i=(n=(e=this.widget).options).dataTextField,r=n.dataValueField||i,o=this.bindings.value.get(),a=n.text||"",s=0,d=[],o===t&&(o=null),r)if(o instanceof C){for(l=o.length;l>s;s++)d[s]=o[s].get(r);o=d}else o instanceof x&&(a=o.get(i),o=o.get(r));!1!==n.autoBind||n.cascadeFrom||!e.listView||e.listView.isBound()?e.value(o):(i!==r||a||(a=o),a||!o&&0!==o||!n.valuePrimitive?e._preselect(o,a):e.value(o))}this._initChange=!1},destroy:function(){this.widget.unbind(M,this._change)}}),gantt:{dependencies:n("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:f.extend({init:function(t,n,i){f.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(M,this._change),this._initChange=!1},change:function(){var e,n,i,r,o,a,s,l,d=this,c=d.bindings[E].get(),u=d.options.valuePrimitive,h=u?d.widget.value():d.widget.dataItems(),p=this.options.dataValueField||this.options.dataTextField;if(h=h.slice(0),d._initChange=!0,c instanceof C){for(e=[],n=h.length,r=0,o=c[i=0];o!==t;){for(l=!1,r=0;n>r;r++)if(u?h[r]==o:(s=(s=h[r]).get?s.get(p):s)==(o.get?o.get(p):o)){h.splice(r,1),n-=1,l=!0;break}l?i+=1:(e.push(o),m(c,i,1),a=i),o=c[i]}m(c,c.length,0,h),e.length&&c.trigger("change",{action:"remove",items:e,index:a}),h.length&&c.trigger("change",{action:"add",items:h,index:c.length-1})}else d.bindings[E].set(h);d._initChange=!1},refresh:function(){if(!this._initChange){var e,n,i=this.options,r=this.widget,o=i.dataValueField||i.dataTextField,a=this.bindings.value.get(),s=a,l=0,d=[];if(a===t&&(a=null),o)if(a instanceof C){for(e=a.length;e>l;l++)n=a[l],d[l]=n.get?n.get(o):n;a=d}else a instanceof x&&(a=a.get(o));!1!==i.autoBind||!0===i.valuePrimitive||r.listView.isBound()?r.value(a):r._preselect(s,a)}},destroy:function(){this.widget.unbind(M,this._change)}})},scheduler:{source:n("source","dataSource","setDataSource").extend({dataBound:function(e){var t,n,i,r,a=this.widget,s=e.addedItems||a.items();if(s.length)for(i=e.addedDataItems||a.dataItems(),r=this.bindings.source._parents(),t=0,n=i.length;n>t;t++)o(s[t],i[t],this._ns(e.ns),[i[t]].concat(r))}})}},m=function(e,t,n,i){var r,o,a,s,l;if(n=n||0,r=(i=i||[]).length,o=e.length,s=(a=[].slice.call(e,t+n)).length,r){for(r=t+r,l=0;r>t;t++)e[t]=i[l],l++;e.length=r}else if(n)for(e.length=t,n+=t;n>t;)delete e[--n];if(s){for(s=t+s,l=0;s>t;t++)e[t]=a[l],l++;e.length=s}for(t=e.length;o>t;)delete e[t],t++},v=D.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,r,o,a,s=this instanceof b,l=this.binders();for(t in e)t==E?n=!0:t==A?i=!0:t!=O||s?t==R?o=!0:"css"==t?a=!0:this.applyBinding(t,e,l):r=!0;i&&this.applyBinding(A,e,l),n&&this.applyBinding(E,e,l),o&&this.applyBinding(R,e,l),r&&!s&&this.applyBinding(O,e,l),a&&!s&&this.applyBinding("css",e,l)},binders:function(){return T[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,n){var i,r=n[e]||T[e],o=this.toDestroy,a=t[e];if(r)if(r=new r(this.target,t,this.options),o.push(r),a instanceof u)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}}),b=v.extend({binders:function(){return T.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(e,t,n){var i,r=n[e]||T.widget[e],o=this.toDestroy,a=t[e];if(!r)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),o.push(r),a instanceof u)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i])}}),_=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,k=/\s/g,w.unbind=function(t){var n,i;for(n=0,i=(t=e(t)).length;i>n;n++)l(t[n])},w.bind=a,w.data.binders=T,w.data.Binder=f,w.notify=function(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&a(n,i.source,t)},w.observable=function(e){return e instanceof x||(e=new x(e)),e},w.observableHierarchy=function(e){var t=w.data.HierarchicalDataSource.create(e);return t.fetch(),function e(t){var n,i;for(n=0;t.length>n;n++)t[n]._initChildren(),(i=t[n].children).fetch(),t[n].items=i.data(),e(t[n].items)}(t.data()),t._data._dataSource=t,t._data}}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,10)}function i(e,t){return n(e.css(t))}function r(e){for(var t in e)-1!=z.indexOf(t)&&-1==j.indexOf(t)&&delete e[t];return e}function o(e,t){var n,i,r,o,a=[],s={};for(i in t)n=i.toLowerCase(),o=E&&-1!=z.indexOf(n),!D.hasHW3D&&o&&-1==j.indexOf(n)?delete t[i]:(r=t[i],o?a.push(i+"("+r+")"):s[i]=r);return a.length&&(s[re]=a.join(" ")),s}function a(e,t){var i,r,o;return E?(i=e.css(re))==G?"scale"==t?1:0:(o=0,(r=i.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")))?o=n(r[1]):(r=i.match(M)||[0,0,0,0,0],t=t.toLowerCase(),H.test(t)?o=parseFloat(r[3]/r[2]):"translatey"==t?o=parseFloat(r[4]/r[2]):"scale"==t?o=parseFloat(r[2]):"rotate"==t&&(o=parseFloat(Math.atan2(r[2],r[1])))),o):parseFloat(e.css(t))}function s(e){return e.charAt(0).toUpperCase()+e.substring(1)}function l(e,t){var n=p.extend(t),i=n.prototype.directions;x[s(e)]=n,x.Element.prototype[e]=function(e,t,i,r){return new n(this.element,e,t,i,r)},C(i,function(t,i){x.Element.prototype[e+s(i)]=function(e,t,r){return new n(this.element,i,e,t,r)}})}function d(e,n,i,r){l(e,{directions:g,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,o){var a,s,l="out"===this._direction,d=this.element.data(n);a=isNaN(d)||d==i?t!==this._startValue?this._startValue:l?i:r:d,s=t!==this._endValue?this._endValue:l?r:i,this._reverse?(e[n]=s,o[n]=a):(e[n]=a,o[n]=s),this._shouldHide=o[n]===r}})}function c(e,t){var n=e[y.directions[t].vertical?Y:K]()/2+"px";return v[t].replace("$size",n)}var u,h,p,f,g,m,v,b,_,k,w,y=window.kendo,x=y.effects,C=e.each,S=e.extend,T=e.proxy,D=y.support,I=D.browser,E=D.transforms,A=D.transitions,O={scale:0,scalex:0,scaley:0,scale3d:0},R={translate:0,translatex:0,translatey:0,translate3d:0},P=t!==document.documentElement.style.zoom&&!E,M=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,F=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,H=/translatex?$/i,N=/(zoom|fade|expand)(\w+)/,$=/(zoom|fade|expand)/,L=/[xy]$/i,z=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],j=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],B={rotate:"deg",scale:"",skew:"px",translate:"px"},U=E.css,V=Math.round,W="px",G="none",q="auto",K="width",Y="height",Q="hidden",X="origin",J="abortId",Z="overflow",ee="translate",te="position",ne="completeCallback",ie=U+"transition",re=U+"transform",oe=U+"backface-visibility",ae=U+"perspective",se="1500px",le="perspective(1500px)",de={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};y.directions=de,S(e.fn,{kendoStop:function(e,t){return A?x.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),E&&!A&&(C(j,function(n,i){e.fn[i]=function(n){if(t===n)return a(this,i);var r=e(this)[0],o=i+"("+n+B[i.replace(L,"")]+")";return-1==r.style.cssText.indexOf(re)?e(this).css(re,o):r.style.cssText=r.style.cssText.replace(RegExp(i+"\\(.*?\\)","i"),o),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}}),u=e.fx.prototype.cur,e.fx.prototype.cur=function(){return-1!=j.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):u.apply(this,arguments)}),y.toggleClass=function(e,t,n,i){return t&&(t=t.split(" "),A&&(n=S({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(ie,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(ie,"").css(Y)},n.duration)),C(t,function(t,n){e.toggleClass(n,i)})),e},y.parseEffects=function(e,t){var n={};return"string"==typeof e?C(e.split(" "),function(e,i){var r=!$.test(i),o=i.replace(N,function(e,t,n){return t+":"+n.toLowerCase()}).split(":"),a=o[1],s={};o.length>1&&(s.direction=t&&r?de[a].reverse:a),n[o[0]]=s}):C(e,function(e){var i=this.direction;i&&t&&!$.test(e)&&(this.direction=de[i].reverse),n[e]=this}),n},A&&S(x,{transition:function(t,n,i){var r,a,s,l,d=0,c=t.data("keys")||[];i=S({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i),s=!1,l=function(){s||(s=!0,a&&(clearTimeout(a),a=null),t.removeData(J).dequeue().css(ie,"").css(ie),i.complete.call(t))},i.duration=e.fx&&e.fx.speeds[i.duration]||i.duration,r=o(0,n),e.merge(c,function(e){var t,n=[];for(t in e)n.push(t);return n}(r)),t.data("keys",e.unique(c)).height(),t.css(ie,i.exclusive+" "+i.duration+"ms "+i.ease).css(ie),t.css(r).css(re),A.event&&(t.one(A.event,l),0!==i.duration&&(d=500)),a=setTimeout(l,i.duration+d),t.data(J,a),t.data(ne,l)},stopQueue:function(e,t,n){var i,r=e.data("keys"),o=!n&&r,a=e.data(ne);return o&&(i=y.getComputedStyles(e[0],r)),a&&a(),o&&e.css(i),e.removeData("keys").stop(t)}}),h=y.Class.extend({init:function(e,t){var n=this;n.element=e,n.effects=[],n.options=t,n.restore=[]},run:function(t){var n,i,a,s,l,d,c,u=this,h=t.length,p=u.element,f=u.options,g=e.Deferred(),m={},v={};for(u.effects=t,g.then(e.proxy(u,"complete")),p.data("animating",!0),i=0;h>i;i++)for((n=t[i]).setReverse(f.reverse),n.setOptions(f),u.addRestoreProperties(n.restore),n.prepare(m,v),a=0,d=(l=n.children()).length;d>a;a++)l[a].duration(f.duration).run();for(c in f.effects)S(v,f.effects[c].properties);for(p.is(":visible")||S(m,{display:p.data("olddisplay")||"block"}),E&&!f.reset&&(s=p.data("targetTransform"))&&(m=S(s,m)),m=o(0,m),E&&!A&&(m=r(m)),p.css(m).css(re),i=0;h>i;i++)t[i].setup();return f.init&&f.init(),p.data("targetTransform",v),x.animate(p,v,S({},f,{complete:g.resolve})),g.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,n=this.element,i=0,r=e.length;r>i;i++)t=e[i],this.restore.push(t),n.data(t)||n.data(t,n.css(t))},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},complete:function(){var t=this,n=0,i=t.element,r=t.options,o=t.effects,a=o.length;for(i.removeData("animating").dequeue(),r.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),P&&!E&&setTimeout(e.proxy(this,"restoreCallback"),0);a>n;n++)o[n].teardown();r.completeCallback&&r.completeCallback(i)}}),x.promise=function(e,t){var n,i,r,o=[],a=new h(e,t),l=y.parseEffects(t.effects);for(r in t.effects=l,l)(n=x[s(r)])&&(i=new n(e,l[r].direction),o.push(i));o[0]?a.run(o):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),a.complete())},S(x,{animate:function(n,o,a){var s=!1!==a.transition;delete a.transition,A&&"transition"in x&&s?x.transition(n,o,a):E?n.animate(r(o),{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete}):n.each(function(){var n=e(this),r={};C(z,function(e,a){var s,l,d,c,u,h,p,f=o?o[a]+" ":null;f&&(l=o,a in O&&o[a]!==t?(s=f.match(F),E&&S(l,{scale:+s[0]})):a in R&&o[a]!==t&&(c="absolute"==(d=n.css(te))||"fixed"==d,n.data(ee)||(c?n.data(ee,{top:i(n,"top")||0,left:i(n,"left")||0,bottom:i(n,"bottom"),right:i(n,"right")}):n.data(ee,{top:i(n,"marginTop")||0,left:i(n,"marginLeft")||0})),u=n.data(ee),(s=f.match(F))&&(h=a==ee+"y"?0:+s[1],p=a==ee+"y"?+s[1]:+s[2],c?(isNaN(u.right)?isNaN(h)||S(l,{left:u.left+h}):isNaN(h)||S(l,{right:u.right-h}),isNaN(u.bottom)?isNaN(p)||S(l,{top:u.top+p}):isNaN(p)||S(l,{bottom:u.bottom-p})):(isNaN(h)||S(l,{marginLeft:u.left+h}),isNaN(p)||S(l,{marginTop:u.top+p})))),!E&&"scale"!=a&&a in l&&delete l[a],l&&S(r,l))}),I.msie&&delete r.scale,n.animate(r,{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete})})}}),x.animatedPromise=x.promise,p=y.Class.extend({init:function(e,t){var n=this;n.element=e,n._direction=t,n.options={},n._additionalEffects=[],n.restore||(n.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=this,t=new h(e.element,{reverse:e._reverse,duration:e._duration}),n=e._additionalEffects.concat([e]);return t.run(n)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n,i=this,a=i.element,s=0,l=i.restore,d=l.length,c=e.Deferred(),u={},h={},p=i.children(),f=p.length;for(c.then(e.proxy(i,"_complete")),a.data("animating",!0),s=0;d>s;s++)t=l[s],a.data(t)||a.data(t,a.css(t));for(s=0;f>s;s++)p[s].duration(i._duration).run();return i.prepare(u,h),a.is(":visible")||S(u,{display:a.data("olddisplay")||"block"}),E&&(n=a.data("targetTransform"))&&(u=S(n,u)),u=o(0,u),E&&!A&&(u=r(u)),a.css(u).css(re),i.setup(),a.data("targetTransform",h),x.animate(a,h,{duration:i._duration,complete:c.resolve}),c.promise()},stop:function(){var t=0,n=this.children(),i=n.length;for(t=0;i>t;t++)n[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},_complete:function(){var t=this,n=t.element;n.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&n.data("olddisplay",n.css("display")).hide(),P&&!E&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){S(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),g=["in","out"],l("slideIn",{directions:f=["left","right","up","down"],divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n,i=this,r=i.element,o=de[i._direction],a=-o.modifier*(o.vertical?r.outerHeight():r.outerWidth())/(i.options&&i.options.divisor||1)+W;i._reverse&&(n=e,e=t,t=n),E?(e[o.transition]=a,t[o.transition]="0px"):(e[o.property]=a,t[o.property]="0px")}}),l("tile",{directions:f,init:function(e,t,n){p.prototype.init.call(this,e,t),this.options={previous:n}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,t=e._reverse,n=e.options.previous,i=e.options.previousDivisor||1,r=e._direction,o=[y.fx(e.element).slideIn(r).setReverse(t)];return n&&o.push(y.fx(n).slideIn(de[r].reverse).divisor(i).setReverse(!t)),o}}),d("fade","opacity",1,0),d("zoom","scale",1,.01),l("slideMargin",{prepare:function(e,t){var n,i=this,r=i.element,o=i.options,a=r.data(X),s=o.offset,l=i._reverse;l||null!==a||r.data(X,parseFloat(r.css("margin-"+o.axis))),n=r.data(X)||0,t["margin-"+o.axis]=l?n:n+s}}),l("slideTo",{prepare:function(e,t){var n=this,i=n.element,r=n.options.offset.split(","),o=n._reverse;E?(t.translatex=o?0:r[0],t.translatey=o?0:r[1]):(t.left=o?0:r[0],t.top=o?0:r[1]),i.css("left")}}),l("expand",{directions:["horizontal","vertical"],restore:[Z],prepare:function(e,n){var i=this,r=i.element,o=i.options,a=i._reverse,s="vertical"===i._direction?Y:K,l=r[0].style[s],d=r.data(s),c=parseFloat(d||l),u=V(r.css(s,q)[s]());e.overflow=Q,c=o&&o.reset?u||c:c||u,n[s]=(a?0:c)+W,e[s]=(a?c:0)+W,d===t&&r.data(s,l)},shouldHide:function(){return this._reverse},teardown:function(){var e=this.element,t="vertical"===this._direction?Y:K,n=e.data(t);(n==q||""===n)&&setTimeout(function(){e.css(t,q).css(t)},0)}}),m={position:"absolute",marginLeft:0,marginTop:0,scale:1},l("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var n=this,i=n.element,r=x.box(i),o=x.box(n.options.target),s=a(i,"scale"),l=x.fillScale(o,r),d=x.transformOrigin(o,r);S(e,m),t.scale=1,i.css(re,"scale(1)").css(re),i.css(re,"scale("+s+")"),e.top=r.top,e.left=r.left,e.transformOrigin=d.x+W+" "+d.y+W,n._reverse?e.scale=l:t.scale=l}}),v={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},b={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}},l("turningPage",{directions:f,init:function(e,t,n){p.prototype.init.call(this,e,t),this._container=n},prepare:function(e,t){var n=this,i=n._reverse,r=i?de[n._direction].reverse:n._direction,o=b[r];e.zIndex=1,n._clipInHalf&&(e.clip=c(n._container,y.directions[r].reverse)),e[oe]=Q,t[re]=le+(i?o.start:o.end),e[re]=le+(i?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),l("staticPage",{directions:f,init:function(e,t,n){p.prototype.init.call(this,e,t),this._container=n},restore:["clip"],prepare:function(e,t){var n=this,i=n._reverse?de[n._direction].reverse:n._direction;e.clip=c(n._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},face:function(e){return this._face=e,this}}),l("pageturn",{directions:["horizontal","vertical"],init:function(e,t,n,i){p.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=y.directions[i].reverse,o=t._reverse,a=n.face.clone(!0).removeAttr("id"),s=n.back.clone(!0).removeAttr("id"),l=t.element;return o&&(e=i,i=r,r=e),[y.fx(n.face).staticPage(i,l).face(!0).setReverse(o),y.fx(n.back).staticPage(r,l).setReverse(o),y.fx(a).turningPage(i,l).face(!0).clipInHalf(!0).temporary().setReverse(o),y.fx(s).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(e,t){e[ae]=se,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),l("flip",{directions:["horizontal","vertical"],init:function(e,t,n,i){p.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=y.directions[i].reverse,o=t._reverse,a=t.element;return o&&(e=i,i=r,r=e),[y.fx(n.face).turningPage(i,a).face(!0).setReverse(o),y.fx(n.back).turningPage(r,a).setReverse(o)]},prepare:function(e){e[ae]=se,e.transformStyle="preserve-3d"}}),_=!D.mobileOS.android,l("replace",{_before:e.noop,_after:e.noop,init:function(t,n,i){p.prototype.init.call(this,t),this._previous=e(n),this._transitionClass=i},duration:function(){throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(".km-touch-scrollbar, .km-actionsheet-wrapper"))){var n=this.container;n.removeClass("k-fx-end").removeClass(this._containerClass()).off(A.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),_&&n.css(Z,""),this.isAbsolute||this._both().css(te,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t=this,n=t.element,i=t._previous,r=n.parents().filter(i.parents()).first(),o=t._both(),a=e.Deferred(),s=n.css(te);return r.length||(r=n.parent()),this.container=r,this.deferred=a,this.isAbsolute="absolute"==s,this.isAbsolute||o.css(te,"absolute"),_&&(r.css(Z),r.css(Z,"hidden")),A?(n.addClass("k-fx-hidden"),r.addClass(this._containerClass()),this.completeProxy=e.proxy(this,"complete"),r.on(A.event,this.completeProxy),y.animationFrame(function(){n.removeClass("k-fx-hidden").addClass("k-fx-next"),i.css("display","").addClass("k-fx-current"),t._before(i,n),y.animationFrame(function(){r.removeClass("k-fx-start").addClass("k-fx-end"),t._after(i,n)})})):this.complete(),a.promise()},stop:function(){this.complete()}}),w=(k=y.Class.extend({init:function(){var e=this;e._tickProxy=T(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,y.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):y.animationFrame(e._tickProxy))}})).extend({init:function(e){S(this,e),k.fn.init.call(this)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=new Date,t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}}),S(w,{easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(1-Math.pow(2,-10*e/i))+t},easeOutBack:function(e,t,n,i,r){return n*((e=e/i-1)*e*((1+(r=1.70158))*e+r)+1)+t}}),x.Animation=k,x.Transition=w,x.createEffect=l,x.box=function(t){var n=(t=e(t)).offset();return n.width=t.outerWidth(),n.height=t.outerHeight(),n},x.transformOrigin=function(e,t){var n=(e.left-t.left)*t.width/(t.width-e.width),i=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(n)?0:n,y:isNaN(i)?0:i}},x.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},x.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Observable,i="init",r="show",o="hide",a="transitionStart",s="transitionEnd",l=/unrecognized expression/,d=n.extend({init:function(e,l){var d=this;l=l||{},n.fn.init.call(d),d.content=e,d.id=t.guid(),d.tagName=l.tagName||"div",d.model=l.model,d._wrap=!1!==l.wrap,this._evalTemplate=l.evalTemplate||!1,d._fragments={},d.bind([i,r,o,a,s],l)},render:function(n){var o=this,a=!o.element;return a&&(o.element=o._createElement()),n&&e(n).append(o.element),a&&(t.bind(o.element,o.model),o.trigger(i)),n&&(o._eachFragment("attach"),o.trigger(r)),o.element},clone:function(){return new c(this)},triggerBeforeShow:function(){return!0},triggerBeforeHide:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(a,{type:e})},afterTransition:function(e){this.trigger(s,{type:e})},hide:function(){this._eachFragment("detach"),this.element.detach(),this.trigger(o)},destroy:function(){var e=this.element;e&&(t.unbind(e),t.destroy(e),e.remove())},fragments:function(t){e.extend(this._fragments,t)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var n,i,r,o=this,a="<"+o.tagName+" />";try{"SCRIPT"===(i=e(document.getElementById(o.content)||o.content))[0].tagName&&(i=i.html())}catch(e){l.test(e.message)&&(i=o.content)}return"string"==typeof i?(i=i.replace(/^\s+|\s+$/g,""),o._evalTemplate&&(i=t.template(i)(o.model||{})),n=e(a).append(i),o._wrap||(n=n.contents())):(n=i,o._evalTemplate&&(r=e(t.template(e("<div />").append(n.clone(!0)).html())(o.model||{})),e.contains(document,n[0])&&n.replaceWith(r),n=r),o._wrap&&(n=n.wrapAll(a).parent())),n}}),c=t.Class.extend({init:function(t){e.extend(this,{element:t.element.clone(!0),transition:t.transition,id:t.id}),t.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:e.noop,afterTransition:e.noop}),u=d.extend({init:function(e,t){d.fn.init.call(this,e,t),this.containers={}},container:function(e){var t=this.containers[e];return t||(t=this._createContainer(e),this.containers[e]=t),t},showIn:function(e,t,n){this.container(e).show(t,n)},_createContainer:function(e){var t,n=this.render(),i=n.find(e);if(!i.length&&n.is(e)){if(!n.is(e))throw Error("can't find a container with the specified "+e+" selector");i=n}return(t=new f(i)).bind("accepted",function(e){e.view.render(i)}),t}}),h=d.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),p=/^(\w+)(:(\w+))?( (\w+))?$/,f=n.extend({init:function(e){n.fn.init.call(this),this.container=e,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(e,n,i){if(!e.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide())return this.trigger("after"),!1;i=i||e.id;var r=this,o=e===r.view?e.clone():r.view,a=r.history,s=(a[a.length-2]||{}).id===i,l=n||(s?a[a.length-1].transition:e.transition),d=function(e){if(!e)return{};var t=e.match(p)||[];return{type:t[1],direction:t[3],reverse:"reverse"===t[5]}}(l);return r.running&&r.effect.stop(),"none"===l&&(l=null),r.trigger("accepted",{view:e}),r.view=e,r.previous=o,r.running=!0,s?a.pop():a.push({id:i,transition:l}),o?(l&&t.effects.enabled?(e.element.addClass("k-fx-hidden"),e.showStart(),s&&!n&&(d.reverse=!d.reverse),r.effect=t.fx(e.element).replace(o.element,d.type).beforeTransition(function(){e.beforeTransition("show"),o.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show"),o.afterTransition("hide")}).direction(d.direction).setReverse(d.reverse),r.effect.run().then(function(){r.end()})):(e.showStart(),r.end()),!0):(e.showStart(),e.showEnd(),r.after(),!0)}});t.ViewContainer=f,t.Fragment=h,t.Layout=u,t.View=d,t.ViewClone=c}(window.kendo.jQuery),function(e){function t(){this.node=null}function n(){}function i(e,t,n){this.nodeName=e,this.attr=t||{},this.children=n||[]}function r(e){this.nodeValue=e}function o(e){this.html=e}function a(e){return new o(e)}function s(e,t,n){return new i(e,t,n)}function l(e){return new r(e)}function d(e){this.root=e,this.children=[]}t.prototype={remove:function(){this.node.parentNode.removeChild(this.node)},attr:{}},n.prototype={nodeName:"#null",attr:{style:{}},children:[],remove:function(){}};var c=new n;i.prototype=new t,i.prototype.appendTo=function(e){var t,n=document.createElement(this.nodeName),i=this.children;for(t=0;i.length>t;t++)i[t].render(n,c);return e.appendChild(n),n},i.prototype.render=function(e,t){var n,i,r,o,a,s;if(t.nodeName!==this.nodeName)t.remove(),n=this.appendTo(e);else{if(n=t.node,o=(r=this.children).length,s=(a=t.children).length,Math.abs(s-o)>2)return void this.render({appendChild:function(n){e.replaceChild(n,t.node)}},c);for(i=0;o>i;i++)r[i].render(n,a[i]||c);for(i=o;s>i;i++)a[i].remove()}this.node=n,this.syncAttributes(t.attr),this.removeAttributes(t.attr)},i.prototype.syncAttributes=function(e){var t,n,i,r=this.attr;for(t in r)n=r[t],i=e[t],"style"===t?this.setStyle(n,i):n!==i&&this.setAttribute(t,n,i)},i.prototype.setStyle=function(e,t){var n,i=this.node;if(t)for(n in e)e[n]!==t[n]&&(i.style[n]=e[n]);else for(n in e)i.style[n]=e[n]},i.prototype.removeStyle=function(e){var t,n=this.attr.style||{},i=this.node;for(t in e)void 0===n[t]&&(i.style[t]="")},i.prototype.removeAttributes=function(e){var t,n=this.attr;for(t in e)"style"===t?this.removeStyle(e.style):void 0===n[t]&&this.removeAttribute(t)},i.prototype.removeAttribute=function(e){var t=this.node;"style"===e?t.style.cssText="":"className"===e?t.className="":t.removeAttribute(e)},i.prototype.setAttribute=function(e,t){var n=this.node;void 0!==n[e]?n[e]=t:n.setAttribute(e,t)},r.prototype=new t,r.prototype.nodeName="#text",r.prototype.render=function(e,t){var n;t.nodeName!==this.nodeName?(t.remove(),n=document.createTextNode(this.nodeValue),e.appendChild(n)):(n=t.node,this.nodeValue!==t.nodeValue&&(n.nodeValue=this.nodeValue)),this.node=n},o.prototype={nodeName:"#html",attr:{},remove:function(){for(var e=0;this.nodes.length>e;e++)this.nodes[e].parentNode.removeChild(this.nodes[e])},render:function(e,t){var n,i;if(t.nodeName!==this.nodeName||t.html!==this.html)for(t.remove(),n=e.lastChild,e.insertAdjacentHTML("beforeend",this.html),this.nodes=[],i=n?n.nextSibling:e.firstChild;i;i=i.nextSibling)this.nodes.push(i);else this.nodes=t.nodes.slice(0)}},d.prototype={html:a,element:s,text:l,render:function(e){var t,n,i=this.children;for(t=0,n=e.length;n>t;t++)e[t].render(this.root,i[t]||c);for(t=n;i.length>t;t++)i[t].remove();this.children=e}},e.dom={html:a,text:l,element:s,Tree:d}}(window.kendo),function(e,t){function n(e){var t=Math.floor(e/26)-1;return(t>=0?n(t):"")+String.fromCharCode(65+e%26)}function i(e,t){return n(t)+(e+1)}function r(e,t){return n(t)+"$"+(e+1)}function o(e){return((e.freezePane||{}).rowSplit||1)-1}function a(e){return 6>e.length&&(e=e.replace(/(\w)/g,function(e,t){return t+t})),8>(e=e.substring(1).toUpperCase()).length&&(e="FF"+e),e}var s=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),l=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),d=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),c=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<sheet name="${sheets[idx].options.title}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets># if (definedNames.length) { #<definedNames> # for (var di = 0; di < definedNames.length; di++) { #<definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="${definedNames[di].localSheetId}">${definedNames[di].name}!$${definedNames[di].from}:$${definedNames[di].to}</definedName> # } #</definedNames># } #<calcPr calcId="145621" /></workbook>'),u=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView #if(index==0) {# tabSelected="1" #}# workbookViewId="0"># if (freezePane) { #<pane state="frozen"# if (freezePane.colSplit) { # xSplit="${freezePane.colSplit}"# } ## if (freezePane.rowSplit) { # ySplit="${freezePane.rowSplit}"# } # topLeftCell="${String.fromCharCode(65 + (freezePane.colSplit || 0))}${(freezePane.rowSplit || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25" /># if (columns) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## if (column.width) { #<col min="${ci+1}" max="${ci+1}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="${(((column.width)/7)*100+0.5)/100}" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; #<row r="#=ri + 1#"># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="#=cell.ref#"# if (cell.style) { # s="#=cell.style#" # } ## if (cell.type) { # t="#=cell.type#"# } #># if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),h=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),p=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),f=t.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.fontName) { #<name val="${font.fontName}" /># } else { #<name val="Calibri" /><scheme val="minor" /># } #<family val="2" /></font># } #</fonts><fills count="${fills.length+1}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfid="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.hAlign || style.vAlign || style.wrap) { # applyAlignment="1"# } #># if (style.hAlign || style.vAlign || style.wrap) { #<alignment# if (style.hAlign) { # horizontal="${style.hAlign}"# } ## if (style.vAlign) { # vertical="${style.vAlign}"# } ## if (style.wrap) { # wrapText="1"# } #/># } #</xf># } #</cellXfs><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),g=t.timezone.remove(new Date(1900,0,0),"Etc/UTC"),m=t.Class.extend({init:function(e,t,n){this.options=e,this._strings=t,this._styles=n,this._mergeCells=[]},toXML:function(e){var t,n,r=this.options.rows||[],a=this.options.filter,s={};for(this._maxCellIndex=0,t=[],n=0;r.length>n;n++)t.push(this._row(r,s,r[n],n));return u({freezePane:this.options.freezePane,columns:this.options.columns,data:t,index:e,mergeCells:this._mergeCells,filter:a?{from:i(o(this.options),a.from),to:i(o(this.options),a.to)}:null})},_row:function(e,t,n,r){var o,a,s,l,d,c;for(this._cellIndex&&this._cellIndex>this._maxCellIndex&&(this._maxCellIndex=this._cellIndex),this._cellIndex=0,a=[],l=0,d=(s=n.cells).length;d>l;l++)(o=this._cell(s[l],t,r))&&a.push.apply(a,o);for(;this._maxCellIndex>this._cellIndex;)(c=t[this._cellIndex])&&(c.rowSpan-=1),a.push({ref:i(r,this._cellIndex)}),this._cellIndex++;return{data:a}},_lookupString:function(e){var t="$"+e,n=this._strings.indexes[t];return void 0!==n?e=n:(e=this._strings.indexes[t]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},_lookupStyle:function(n){var i,r=t.stringify(n);return"{}"==r?0:(0>(i=e.inArray(r,this._styles))&&(i=this._styles.push(r)-1),i+1)},_cell:function(e,n,r){var o,a,s,l,d,c,u,h,p,f,m;if(e){for(o=e.value,a={bold:e.bold,color:e.color,background:e.background,italic:e.italic,underline:e.underline,fontName:e.fontName,fontSize:e.fontSize,format:e.format,hAlign:e.hAlign,vAlign:e.vAlign,wrap:e.wrap},(s=(this.options.columns||[])[this._cellIndex])&&s.autoWidth&&(s.width=Math.max(s.width||0,(""+o).length)),"string"==(l=typeof o)?(o=this._lookupString(o),l="s"):"number"===l?l="n":"boolean"===l?(l="b",o=+o):o&&o.getTime?(l=null,o=(t.timezone.remove(o,"Etc/UTC")-g)/t.date.MS_PER_DAY+1,a.format||(a.format="mm-dd-yy")):(l=null,o=""),a=this._lookupStyle(a),d=[],h=n[this._cellIndex]||{};h.rowSpan>1;){for(h.rowSpan-=1,c=h.colSpan;c>0;)d.push({ref:i(r,this._cellIndex)}),c--,this._cellIndex++;h=n[this._cellIndex]||{}}if(u=i(r,this._cellIndex),d.push({value:o,type:l,style:a,ref:u}),p=e.colSpan||1,f=e.rowSpan||1,p>1||f>1){for(f>1&&(n[this._cellIndex]={colSpan:p,rowSpan:f}),m=1;p>m;m++)this._cellIndex++,d.push({ref:i(r,this._cellIndex)});this._mergeCells.push(u+":"+i(r+f-1,this._cellIndex))}return this._cellIndex++,d}this._cellIndex++}}),v={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},b=t.Class.extend({init:function(t){this.options=t||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._sheets=e.map(this.options.sheets||[],e.proxy(function(e){return new m(e,this._strings,this._styles)},this))},toDataURL:function(){var n,i,u,g,m,b,_,k,w,y,x;if("undefined"==typeof JSZip)throw Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");for((i=(n=new JSZip).folder("docProps")).file("core.xml",s({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()})),u=this._sheets.length,i.file("app.xml",l({sheets:this._sheets})),n.folder("_rels").file(".rels",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>'),(g=n.folder("xl")).folder("_rels").file("workbook.xml.rels",h({count:u})),g.file("workbook.xml",c({sheets:this._sheets,definedNames:e.map(this._sheets,function(e,t){var n=e.options,i=n.filter;return i?{localSheetId:t,name:n.title||"Sheet"+(t+1),from:r(o(n),i.from),to:r(o(n),i.to)}:void 0})})),m=g.folder("worksheets"),new Date,b=0;u>b;b++)m.file(t.format("sheet{0}.xml",b+1),this._sheets[b].toXML(b));return _=e.map(this._styles,e.parseJSON),k=function(e){return e.underline||e.bold||e.italic||e.color||e.fontName||e.fontSize},w=e.map(_,function(e){return e.color&&(e.color=a(e.color)),k(e)?e:void 0}),y=e.map(_,function(e){return e.format&&void 0===v[e.format]?e:void 0}),x=e.map(_,function(e){return e.background?(e.background=a(e.background),e):void 0}),g.file("styles.xml",f({fonts:w,fills:x,formats:y,styles:e.map(_,function(t){var n={};return k(t)&&(n.fontId=e.inArray(t,w)+1),t.background&&(n.fillId=e.inArray(t,x)+2),n.hAlign=t.hAlign,n.vAlign=t.vAlign,n.wrap=t.wrap,t.format&&(n.numFmtId=void 0!==v[t.format]?v[t.format]:165+e.inArray(t,y)),n})})),g.file("sharedStrings.xml",p(this._strings)),n.file("[Content_Types].xml",d({count:u})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+n.generate({compression:"DEFLATE"})}});t.ooxml={Workbook:b,Worksheet:m}}(kendo.jQuery,kendo),function(e,t){t.ExcelExporter=t.Class.extend({init:function(n){var i,r,o;n.columns=this._trimColumns(n.columns||[]),this.allColumns=e.map(this._leafColumns(n.columns||[]),this._prepareColumn),this.columns=e.grep(this.allColumns,function(e){return!e.hidden}),this.options=n,(i=n.dataSource)instanceof t.data.DataSource?(this.dataSource=new i.constructor(e.extend({},i.options,{page:n.allPages?0:i.page(),filter:i.filter(),pageSize:n.allPages?i.total():i.pageSize(),sort:i.sort(),group:i.group(),aggregate:i.aggregate()})),(r=i.data()).length>0&&(this.dataSource._data=r,o=this.dataSource.transport,i._isServerGrouped()&&o.options.data&&(o.options.data=null))):this.dataSource=t.data.DataSource.create(i)},_trimColumns:function(t){var n=this;return e.grep(t,function(e){var t=!!e.field;return!t&&e.columns&&(t=n._trimColumns(e.columns).length>0),t})},_leafColumns:function(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(this._leafColumns(e[t].columns)):n.push(e[t]);return n},workbook:function(){return e.Deferred(e.proxy(function(t){this.dataSource.fetch().then(e.proxy(function(){var e={sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]};t.resolve(e,this.dataSource.view())},this))},this)).promise()},_prepareColumn:function(n){var i,r;if(n.field)return i=function(e){return e.get(n.field)},r=null,n.values&&(r={},e.each(n.values,function(){r[this.value]=this.text}),i=function(e){return r[e.get(n.field)]}),e.extend({},n,{value:i,values:r,groupHeaderTemplate:t.template(n.groupHeaderTemplate||"${title}: ${value}"),groupFooterTemplate:n.groupFooterTemplate?t.template(n.groupFooterTemplate):null,footerTemplate:n.footerTemplate?t.template(n.footerTemplate):null})},_filter:function(){if(!this.options.filterable)return null;var e=this._depth();return{from:e,to:e+this.columns.length-1}},_dataRow:function(t,n,i){var r,o,a,s,l,d,c,u,h,p;for(this._hierarchical()&&(n=this.dataSource.level(t)+1),r=[],o=0;n>o;o++)r[o]={background:"#dfdfdf",color:"#333"};if(i&&t.items)return s=(a=e.grep(this.allColumns,function(e){return e.field==t.field})[0])&&a.title?a.title:t.field,l=a?a.groupHeaderTemplate:null,d=s+": "+t.value,c=e.extend({title:s,field:t.field,value:a&&a.values?a.values[t.value]:t.value,aggregates:t.aggregates},t.aggregates[t.field]),l&&(d=l(c)),r.push({value:d,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+i-n}),(u=this._dataRows(t.items,n+1)).unshift({type:"group-header",cells:r}),u.concat(this._footer(t));for(h=[],p=0;this.columns.length>p;p++)h[p]=this._cell(t,this.columns[p]);return this._hierarchical()&&(h[0].colSpan=i-n+1),[{type:"data",cells:r.concat(h)}]},_dataRows:function(e,t){var n,i=this._depth(),r=[];for(n=0;e.length>n;n++)r.push.apply(r,this._dataRow(e[n],t,i));return r},_footer:function(t){var n=[],i=!1,r=e.map(this.columns,e.proxy(function(n){return n.groupFooterTemplate?(i=!0,{background:"#dfdfdf",color:"#333",value:n.groupFooterTemplate(e.extend({},this.dataSource.aggregates(),t.aggregates,t.aggregates[n.field]))}):{background:"#dfdfdf",color:"#333"}},this));return i&&n.push({type:"group-footer",cells:e.map(Array(this.dataSource.group().length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(r)}),n},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(t){var n=this;return e.grep(t,function(e){var t=!e.hidden;return t&&e.columns&&(t=n._visibleColumns(e.columns).length>0),t})},_headerRow:function(t,n){var i=e.map(t.cells,function(e){return{background:"#7a7a7a",color:"#fff",value:e.title,colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1}});return this._hierarchical()&&(i[0].colSpan=this._depth()+1),{type:"header",cells:e.map(Array(n.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(i)}},_prependHeaderRows:function(e){var t,n=this.dataSource.group(),i=[{rowSpan:1,cells:[],index:0}];for(this._prepareHeaderRows(i,this.options.columns),t=i.length-1;t>=0;t--)e.unshift(this._headerRow(i[t],n))},_prepareHeaderRows:function(e,t,n,i){var r,o,a,s=i||e[e.length-1],l=e[s.index+1],d=0;for(a=0;t.length>a;a++)r=t[a],this._isColumnVisible(r)&&(o={title:r.title||r.field,colSpan:0},s.cells.push(o),r.columns&&r.columns.length&&(l||(l={rowSpan:0,cells:[],index:e.length},e.push(l)),o.colSpan=this._trimColumns(this._visibleColumns(r.columns)).length,this._prepareHeaderRows(e,r.columns,o,l),d+=o.colSpan-1,s.rowSpan=e.length-s.index));n&&(n.colSpan+=d)},_rows:function(){var t,n,i=this.dataSource.group(),r=this._dataRows(this.dataSource.view(),0);return this.columns.length&&(this._prependHeaderRows(r),t=!1,n=e.map(this.columns,e.proxy(function(n){if(n.footerTemplate){t=!0;var i=this.dataSource.aggregates();return{background:"#dfdfdf",color:"#333",value:n.footerTemplate(e.extend({},i,i[n.field]))}}return{background:"#dfdfdf",color:"#333"}},this)),t&&r.push({type:"footer",cells:e.map(Array(i.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(n)})),r},_headerDepth:function(e){var t,n,i=0;for(t=0;e.length>t;t++)e[t].columns&&(n=this._headerDepth(e[t].columns))>i&&(i=n);return 1+i},_freezePane:function(){var t=this._visibleColumns(this.options.columns||[]),n=this._visibleColumns(this._trimColumns(this._leafColumns(e.grep(t,function(e){return e.locked})))).length;return{rowSplit:this._headerDepth(t),colSplit:n?n+this.dataSource.group().length:0}},_cell:function(e,t){return{value:t.value(e)}},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var e,t,n,i=this.dataSource,r=0;if(this._hierarchical()){for(e=i.view(),t=0;e.length>t;t++)(n=i.level(e[t]))>r&&(r=n);r++}else r=i.group().length;return r},_columns:function(){var t=this._depth();return e.map(Array(t),function(){return{width:20}}).concat(e.map(this.columns,function(e){return{width:parseInt(e.width,10),autoWidth:!e.width}}))}}),t.ExcelMixin={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var n=this.options.excel||{};new t.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:n.allPages,filterable:n.filterable,hierarchy:n.hierarchy}).workbook().then(e.proxy(function(e,i){if(!this.trigger("excelExport",{workbook:e,data:i})){var r=new t.ooxml.Workbook(e);t.saveAs({dataURI:r.toDataURL(),fileName:e.fileName||n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy})}},this))}}}(kendo.jQuery,kendo),function(e){var t=kendo.data.RemoteTransport.extend({init:function(e){var t,n=e&&e.signalr?e.signalr:{},i=n.promise;if(!i)throw Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw Error('The "promise" option must be a Promise.');if(this.promise=i,!(t=n.hub))throw Error('The "hub" option must be set.');if("function"!=typeof t.on||"function"!=typeof t.invoke)throw Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=t,kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};t.create&&this.hub.on(t.create,e.pushCreate),t.update&&this.hub.on(t.update,e.pushUpdate),t.destroy&&this.hub.on(t.destroy,e.pushDestroy)},_crud:function(t,n){var i,r,o=this.hub,a=this.options.signalr.server;if(!a||!a[n])throw Error(kendo.format('The "server.{0}" option must be set.',n));i=[a[n]],r=this.parameterMap(t.data,n),e.isEmptyObject(r)||i.push(r),this.promise.done(function(){o.invoke.apply(o,i).done(t.success).fail(t.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}});e.extend(!0,kendo.data,{transports:{signalr:t}})}(window.kendo.jQuery),function(e,t,n){function i(e,r){var a,c;if(null==e||"none"==e)return null;if(e instanceof s)return e;if(e=e.toLowerCase(),a=o.exec(e))return(e="transparent"==a[1]?new l(1,1,1,0):i(u.namedColors[a[1]],r)).match=[a[1]],e;if((a=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(e))?c=new d(n(a[1],16),n(a[2],16),n(a[3],16),1):(a=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(e))?c=new d(n(a[1]+a[1],16),n(a[2]+a[2],16),n(a[3]+a[3],16),1):(a=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))?c=new d(n(a[1],10),n(a[2],10),n(a[3],10),1):(a=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))?c=new d(n(a[1],10),n(a[2],10),n(a[3],10),t(a[4])):(a=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))?c=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,1):(a=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))&&(c=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,t(a[4]))),c)c.match=a;else if(!r)throw Error("Cannot parse color: "+e);return c}function r(e,t,n){for(n||(n="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}var o,a,s,l,d,c,u=function(e){var t,n,i,r,o,a=this,s=u.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,(i=t.exec(e))&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)};for(a in u.prototype={toHex:function(){var e=this,t=e.padDigit,n=e.r.toString(16),i=e.g.toString(16),r=e.b.toString(16);return"#"+t(n)+t(i)+t(r)},resolveColor:function(e){return"#"==(e=e||"black").charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),u.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=this,n=Math.round;return t.r=n(t.normalizeByte(t.r*e)),t.g=n(t.normalizeByte(t.g*e)),t.b=n(t.normalizeByte(t.b*e)),t},percBrightness:function(){var e=this;return Math.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}},u.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[n(e[1],10),n(e[2],10),n(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[n(e[1],16),n(e[2],16),n(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[n(e[1]+e[1],16),n(e[2]+e[2],16),n(e[3]+e[3],16)]}}],u.namedColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},o=["transparent"],u.namedColors)u.namedColors.hasOwnProperty(a)&&o.push(a);o=RegExp("^("+o.join("|")+")(\\W|$)","i"),s=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+t((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&9>kendo.support.browser.version?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==i(e).toCssRgba()},diff:function(e){if(null==e)return NaN;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new d(e.r,e.g,e.b,e.a)),e}}),l=s.extend({init:function(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i},toHSV:function(){var e,t,n=this.r,i=this.g,r=this.b,o=Math.min(n,i,r),a=Math.max(n,i,r),s=a,l=a-o;return 0===l?new c(0,0,s,this.a):(0!==a?(t=l/a,e=n==a?(i-r)/l:i==a?2+(r-n)/l:4+(n-i)/l,0>(e*=60)&&(e+=360)):(t=0,e=-1),new c(e,t,s,this.a))},toBytes:function(){return new d(255*this.r,255*this.g,255*this.b,this.a)}}),d=l.extend({init:function(e,t,n,i){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(n),this.a=i},toRGB:function(){return new l(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),c=s.extend({init:function(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i},toRGB:function(){var e,t,n,i,r,o,a,s,d=this.h,c=this.s,u=this.v;if(0===c)t=n=i=u;else switch(d/=60,e=Math.floor(d),r=d-e,o=u*(1-c),a=u*(1-c*r),s=u*(1-c*(1-r)),e){case 0:t=u,n=s,i=o;break;case 1:t=a,n=u,i=o;break;case 2:t=o,n=u,i=s;break;case 3:t=o,n=a,i=u;break;case 4:t=s,n=o,i=u;break;default:t=u,n=o,i=a}return new l(t,n,i,this.a)},toBytes:function(){return this.toRGB().toBytes()}}),u.fromBytes=function(e,t,n,i){return new d(e,t,n,null!=i?i:1)},u.fromRGB=function(e,t,n,i){return new l(e,t,n,null!=i?i:1)},u.fromHSV=function(e,t,n,i){return new c(e,t,n,null!=i?i:1)},kendo.Color=u,kendo.parseColor=i}(window.kendo.jQuery,parseFloat,parseInt),function(e){function t(e){return typeof e!==p}function n(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join("")}function i(e){var t,n=2166136261;for(t=0;e.length>t;++t)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=e.charCodeAt(t);return n>>>0}function r(e){var t,n=e.length,i=u,r=h;for(t=0;n>t;t++)r=s.max(r,e[t]),i=s.min(i,e[t]);return{min:i,max:r}}function o(e){var t,n,i,r=u,o=h;for(t=0,n=e.length;n>t;t++)null!==(i=e[t])&&isFinite(i)&&(r=s.min(r,i),o=s.max(o,i));return{min:r===u?void 0:r,max:o===h?void 0:o}}function a(e,n){return t(n)&&null!==n?" "+e+"='"+n+"' ":""}var s=Math,l=window.kendo,d=l.deepExtend,c=s.PI/180,u=Number.MAX_VALUE,h=-Number.MAX_VALUE,p="undefined",f=Date.now;f||(f=function(){return(new Date).getTime()}),d(l,{util:{MAX_NUM:u,MIN_NUM:h,append:function(e,t){return e.push.apply(e,t),e},arrayLimits:r,arrayMin:function(e){return r(e).min},arrayMax:function(e){return r(e).max},defined:t,deg:function(e){return e/c},hashKey:i,hashObject:function(e){return i(n(e))},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isTransparent:function(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)},last:function(e){return e?e[e.length-1]:void 0},limitValue:function(e,t,n){return s.max(s.min(e,n),t)},now:f,objectKey:n,round:function(e,t){var n=function(e){return e?s.pow(10,e):1}(t);return s.round(e*n)/n},rad:function(e){return e*c},renderAttr:a,renderAllAttr:function(e){var t,n="";for(t=0;e.length>t;t++)n+=a(e[t][0],e[t][1]);return n},renderPos:function(e){var t,n,i=[];if(e)for(t=l.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")},renderSize:function(e){return"string"!=typeof e&&(e+="px"),e},renderStyle:function(e){var n,i,r="";for(n=0;e.length>n;n++)t(i=e[n][1])&&(r+=e[n][0]+":"+i+";");return""!==r?r:void 0},renderTemplate:function(e){return l.template(e,{useWithBlock:!1,paramName:"d"})},sparseArrayLimits:o,sparseArrayMin:function(e){return o(e).min},sparseArrayMax:function(e){return o(e).max},sqr:function(e){return e*e},valueOrDefault:function(e,n){return t(e)?e:n}}}),l.dataviz.util=l.util}(window.kendo.jQuery),function(){function e(e){var t,n,r="";for(t=0;e.length>t;t++)128>(n=e.charCodeAt(t))?r+=i(n):2048>n?(r+=i(192|n>>>6),r+=i(128|63&n)):65536>n&&(r+=i(224|n>>>12),r+=i(128|n>>>6&63),r+=i(128|63&n));return r}var t=window.kendo,n=t.deepExtend,i=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n(t.util,{encodeBase64:function(t){var n,i,o,a,s,l,d,c="",u=0;for(t=e(t);t.length>u;)a=(n=t.charCodeAt(u++))>>2,s=(3&n)<<4|(i=t.charCodeAt(u++))>>4,l=(15&i)<<2|(o=t.charCodeAt(u++))>>6,d=63&o,isNaN(i)?l=d=64:isNaN(o)&&(d=64),c=c+r.charAt(a)+r.charAt(s)+r.charAt(l)+r.charAt(d);return c},encodeUTF8:e})}(window.kendo.jQuery),function(e){var t=Math,n=window.kendo,i=n.deepExtend,r=e.inArray,o={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),n=r(e,t);return-1!=n&&t.splice(n,1),this},trigger:function(e,t){var n,i,r=this._observers;if(r&&!this._suspended)for(i=0;r.length>i;i++)(n=r[i])[e]&&n[e](t);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};i(n,{mixins:{ObserversMixin:o}})}(window.kendo.jQuery),function(e){function t(e){return null===e?null:e instanceof g?e:new g(e)}function n(e){return e&&b.isFunction(e.matrix)?e.matrix():e}function i(e,t,n,i){var r=0,o=0;return i&&(r=m.atan2(i.c*n,i.a*t),0!==i.b&&(o=m.atan2(i.d*n,i.b*t))),{x:r,y:o}}function r(e,t){for(;t>e;)e+=90;return e}function o(e,t){var n,i,r;for(n=0;t.length>n;n++)e["set"+(r=(i=t[n]).charAt(0).toUpperCase()+i.substring(1,i.length))]=a(i),e["get"+r]=s(i)}function a(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function s(e){return function(){return this[e]}}function l(e,t,n,i,r,o){var a=T((r-e)/n,3),s=T((o-t)/i,3);return T(S(m.atan2(s,a)))}function d(e,t,n,i,r,o,a,s){var d,c,u,h,p,f,g,b,_,k,w,y,x,C,S,T,D,I;if(t!==i)_=n-e,k=i-t,w=v(r,2),C=(x=((y=v(o,2))*_*(e+n)+w*k*(t+i))/(2*w*k))-i,p=1/w+v(S=-_*y/(w*k),2)/y,f=2*(S*C/y-n/w),g=v(n,2)/w+v(C,2)/y-1,c=x+S*(d=(-f-(b=m.sqrt(v(f,2)-4*p*g)))/(2*p)),h=x+S*(u=(-f+b)/(2*p));else{if(e===n)return!1;f=-2*i,g=v((n-e)*o/(2*r),2)+v(i,2)-v(o,2),d=u=(e+n)/2,c=(-f-(b=m.sqrt(v(f,2)-4*g)))/2,h=(-f+b)/2}return I=function(e,t,n){e>t&&(t+=360);var i=m.abs(t-e);return n||(i=360-i),i}(T=l(d,c,r,o,e,t),D=l(d,c,r,o,n,i),s),(a&&180>=I||!a&&I>180)&&(T=l(d=u,c=h,r,o,e,t),D=l(d,c,r,o,n,i)),{center:new A(d,c),startAngle:T,endAngle:D}}var c,u,h,p,f,g,m=Math,v=m.pow,b=window.kendo,_=b.Class,k=b.deepExtend,w=b.mixins.ObserversMixin,y=b.util,x=y.defined,C=y.rad,S=y.deg,T=y.round,D=m.PI/2,I=y.MIN_NUM,E=y.MAX_NUM,A=_.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new A(this.x,this.y)},rotate:function(e,n){return this.transform(t().rotate(e,n))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return x(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=n(e),i=this.x,r=this.y;return this.x=t.a*i+t.c*r+t.e,this.y=t.b*i+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return m.sqrt(t*t+n*n)},round:function(e){return this.x=T(this.x,e),this.y=T(this.y,e),this.geometryChange(),this},toArray:function(e){var t=x(e);return[t?T(this.x,e):this.x,t?T(this.y,e):this.y]}});o(A.fn,["x","y"]),k(A.fn,w),A.fn.toString=function(e,t){var n=this.x,i=this.y;return x(e)&&(n=T(n,e),i=T(i,e)),n+(t=t||" ")+i},A.create=function(e,t){return x(e)?e instanceof A?e:1===arguments.length&&2===e.length?new A(e[0],e[1]):new A(e,t):void 0},A.min=function(){var e,t,n=y.MAX_NUM,i=y.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=m.min(t.x,n),i=m.min(t.y,i);return new A(n,i)},A.max=function(){var e,t,n=y.MIN_NUM,i=y.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=m.max(t.x,n),i=m.max(t.y,i);return new A(n,i)},A.minPoint=function(){return new A(I,I)},A.maxPoint=function(){return new A(E,E)},A.ZERO=new A(0,0),o((c=_.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new c(this.width,this.height)},toArray:function(e){var t=x(e);return[t?T(this.width,e):this.width,t?T(this.height,e):this.height]}})).fn,["width","height"]),k(c.fn,w),c.create=function(e,t){return x(e)?e instanceof c?e:1===arguments.length&&2===e.length?new c(e[0],e[1]):new c(e,t):void 0},c.ZERO=new c(0,0),k((u=_.extend({init:function(e,t){this.setOrigin(e||new A),this.setSize(t||new c)},clone:function(){return new u(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",A.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",c.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),n=this.topRight().transformCopy(e),i=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return u.fromPoints(t,n,i,r)},transformCopy:function(e){return u.fromPoints(this.topLeft().transform(e),this.bottomRight().transform(e))}})).fn,w),u.fromPoints=function(){var e=A.min.apply(this,arguments),t=A.max.apply(this,arguments),n=new c(t.x-e.x,t.y-e.y);return new u(e,n)},u.union=function(e,t){return u.fromPoints(A.min(e.topLeft(),t.topLeft()),A.max(e.bottomRight(),t.bottomRight()))},u.intersect=function(e,t){return e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},(t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y}).right>=e.left&&e.right>=t.left&&t.bottom>=e.top&&e.bottom>=t.top?u.fromPoints(new A(m.max(e.left,t.left),m.max(e.top,t.top)),new A(m.min(e.right,t.right),m.min(e.bottom,t.bottom))):void 0},h=_.extend({init:function(e,t){this.setCenter(e||new A),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",A.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new h(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(C(e))},bbox:function(e){var t,n,r,o,a=A.maxPoint(),s=A.minPoint(),l=i(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)n=this._pointAt(l.x+t*D).transformCopy(e),r=this._pointAt(l.y+t*D).transformCopy(e),o=new A(n.x,r.y),a=A.min(a,o),s=A.max(s,o);return u.fromPoints(a,s)},_pointAt:function(e){var t=this.center,n=this.radius;return new A(t.x-n*m.cos(e),t.y-n*m.sin(e))}}),o(h.fn,["radius"]),k(h.fn,w),p=_.extend({init:function(e,t){this.setCenter(e||new A),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new p(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",A.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,n=C(e);return new A(t.x+this.radiusX*m.cos(n),t.y+this.radiusY*m.sin(n))},curvePoints:function(){var e,t,n,i=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(i)],a=i,s=this._arcInterval(),l=s.endAngle-s.startAngle,d=m.ceil(l/this.MAX_INTERVAL),c=l/d;for(e=1;d>=e;e++)t=a+r*c,n=this._intervalCurvePoints(a,t),o.push(n.cp1,n.cp2,n.p2),a=t;return o},bbox:function(e){for(var t,n,o=this,a=o._arcInterval(),s=a.startAngle,l=a.endAngle,d=i(this.center,this.radiusX,this.radiusY,e),c=S(d.x),h=S(d.y),p=o.pointAt(s).transformCopy(e),f=o.pointAt(l).transformCopy(e),g=A.min(p,f),m=A.max(p,f),v=r(c,s),b=r(h,s);l>v||l>b;)l>v&&(t=o.pointAt(v).transformCopy(e),v+=90),l>b&&(n=o.pointAt(b).transformCopy(e),b+=90),p=new A(t.x,n.y),g=A.min(g,p),m=A.max(m,p);return u.fromPoints(g,m)},_arcInterval:function(){var e,t=this.startAngle,n=this.endAngle,i=this.anticlockwise;return i&&(e=t,t=n,n=e),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(e,t){var n=this,i=n.pointAt(e),r=n.pointAt(t),o=n._derivativeAt(e),a=n._derivativeAt(t),s=(C(t)-C(e))/3;return{p1:i,cp1:new A(i.x+s*o.x,i.y+s*o.y),cp2:new A(r.x-s*a.x,r.y-s*a.y),p2:r}},_derivativeAt:function(e){var t=C(e);return new A(-this.radiusX*m.sin(t),this.radiusY*m.cos(t))}}),o(p.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),k(p.fn,w),p.fromPoints=function(e,t,n,i,r,o){var a=d(e.x,e.y,t.x,t.y,n,i,r,o);return new p(a.center,{startAngle:a.startAngle,endAngle:a.endAngle,radiusX:n,radiusY:i,anticlockwise:0===o})},(f=_.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new f(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},invert:function(){var e=this.a,t=this.b,n=this.c,i=this.d,r=this.e,o=this.f,a=e*i-t*n;return 0===a?null:new f(i/a,-t/a,-n/a,e/a,(n*o-i*r)/a,(t*r-e*o)/a)},clone:function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return!!e&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f},round:function(e){return this.a=T(this.a,e),this.b=T(this.b,e),this.c=T(this.c,e),this.d=T(this.d,e),this.e=T(this.e,e),this.f=T(this.f,e),this},toArray:function(e){var t,n=[this.a,this.b,this.c,this.d,this.e,this.f];if(x(e))for(t=0;n.length>t;t++)n[t]=T(n[t],e);return n}})).fn.toString=function(e,t){return this.toArray(e).join(t||",")},f.translate=function(e,t){return new f(1,0,0,1,e,t)},f.unit=function(){return new f(1,0,0,1,0,0)},f.rotate=function(e,t,n){var i=new f;return i.a=m.cos(C(e)),i.b=m.sin(C(e)),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},f.scale=function(e,t){return new f(e,0,0,t,0,0)},f.IDENTITY=f.unit(),k((g=_.extend({init:function(e){this._matrix=e||f.unit()},clone:function(){return new g(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(f.translate(e,t)),this._optionsChange(),this},scale:function(e,t,n){return x(t)||(t=e),n&&(n=A.create(n),this._matrix=this._matrix.multiplyCopy(f.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(f.scale(e,t)),n&&(this._matrix=this._matrix.multiplyCopy(f.translate(-n.x,-n.y))),this._optionsChange(),this},rotate:function(e,t){return t=A.create(t)||A.ZERO,this._matrix=this._matrix.multiplyCopy(f.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var t=n(e);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}})).fn,w),k(b,{geometry:{Arc:p,Circle:h,Matrix:f,Point:A,Rect:u,Size:c,Transformation:g,transform:t,toMatrix:n}}),b.dataviz.geometry=b.geometry}(window.kendo.jQuery),function(e){var t,n,i,r=e.noop,o=Object.prototype.toString,a=window.kendo,s=a.Class,l=a.ui.Widget,d=a.deepExtend,c=a.util.defined,u=l.extend({init:function(e,t){this.options=d({},this.options,t),l.fn.init.call(this,e,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._visual=new a.drawing.Group,this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height)},options:{name:"Surface"},events:["click","mouseenter","mouseleave","resize"],draw:function(e){this._visual.children.push(e)},clear:function(){this._visual.children=[]},destroy:function(){this._visual=null,l.fn.destroy.call(this)},exportVisual:function(){return this._visual},getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height}),this._size=e,this._resize()},eventTarget:function(t){for(var n,i=e(t.touch?t.touch.initialTouch:t.target);!n&&i.length>0&&(n=i[0]._kendoNode,!i.is(this.element)&&0!==i.length);)i=i.parent();return n?n.srcElement:void 0},_resize:r,_handler:function(e){var t=this;return function(n){var i=t.eventTarget(n);i&&t.trigger(e,{element:i,originalEvent:n})}}});a.ui.plugin(u),u.create=function(e,t){return i.current.create(e,t)},t=s.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())},destroy:function(){var e,t;for(this.srcElement&&this.srcElement.removeObserver(this),e=this.childNodes,t=0;e.length>t;t++)this.childNodes[t].destroy();this.parent=null},load:r,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(e){this.childNodes.push(e),e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e),e.parent=this},remove:function(e,t){var n,i=e+t;for(n=e;i>n;n++)this.childNodes[n].removeSelf();this.childNodes.splice(e,t)},removeSelf:function(){this.clear(),this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),n=s.extend({init:function(e,t){var n,i;for(n in this.prefix=t||"",e)i=e[n],i=this._wrap(i,n),this[n]=i},get:function(e){return a.getter(e,!0)(this)},set:function(e,t){a.getter(e,!0)(this)!==t&&(this._set(e,this._wrap(t,e))||this.optionsChange({field:this.prefix+e,value:t}))},_set:function(e,t){var i,r,o,s=e.indexOf(".")>=0;if(s)for(i=e.split("."),r="";i.length>1;){if(r+=i.shift(),(o=a.getter(r,!0)(this))||((o=new n({},r+".")).addObserver(this),this[r]=o),o instanceof n)return o.set(i.join("."),t),s;r+="."}return this._clear(e),a.setter(e)(this,t),s},_clear:function(e){var t=a.getter(e,!0)(this);t&&t.removeObserver&&t.removeObserver(this)},_wrap:function(e,t){var i=o.call(e);return null!==e&&c(e)&&"[object Object]"===i&&(e instanceof n||e instanceof s||(e=new n(e,this.prefix+t+".")),e.addObserver(this)),e}}),d(n.fn,a.mixins.ObserversMixin),(i=function(){this._items=[]}).prototype={register:function(e,t,n){var i=this._items,r=i[0],o={name:e,type:t,order:n};!r||r.order>n?i.unshift(o):i.push(o)},create:function(e,t){var n,i,r=this._items,o=r[0];if(t&&t.type)for(n=t.type.toLowerCase(),i=0;r.length>i;i++)if(r[i].name===n){o=r[i];break}return o?new o.type(e,t):void a.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},i.current=new i,d(a,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:a.Color,BaseNode:t,OptionsStore:n,Surface:u,SurfaceFactory:i}}),a.dataviz.drawing=a.drawing}(window.kendo.jQuery),function(){var e=window.kendo,t=e.deepExtend,n=e.util.defined,i={extend:function(e){e.fill=this.fill,e.stroke=this.stroke},fill:function(e,t){var i,r=this.options;return n(e)?(e&&"gradient"!=e.nodeType?(i={color:e},n(t)&&(i.opacity=t),r.set("fill",i)):r.set("fill",e),this):r.get("fill")},stroke:function(e,t,i){return n(e)?(this.options.set("stroke.color",e),n(t)&&this.options.set("stroke.width",t),n(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")}};t(e.drawing,{mixins:{Paintable:i,Traversable:{extend:function(e,t){e.traverse=function(e){var n,i,r=this[t];for(n=0;r.length>n;n++)(i=r[n]).traverse?i.traverse(e):e(i);return this}}}}})}(window.kendo.jQuery),function(e){var t=document,n=window.kendo,i=n.Class,r=n.deepExtend,o=n.util,a=o.defined,s=i.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var n=this,i=n._map,r={key:e,value:t};i[e]=r,n._head?(n._tail.newer=r,r.older=n._tail,n._tail=r):n._head=n._tail=r,n._length>=n._size?(i[n._head.key]=null,n._head=n._head.newer,n._head.older=null):n._length++},get:function(e){var t=this,n=t._map[e];return n?(n===t._head&&n!==t._tail&&(t._head=n.newer,t._head.older=null),n!==t._tail&&(n.older&&(n.older.newer=n.newer,n.newer.older=n.older),n.older=t._tail,n.newer=null,t._tail.newer=n,t._tail=n),n.value):void 0}}),l=i.extend({init:function(){this._cache=new s(1e3)},measure:function(n,i){var r,s,l,d,c,u=o.objectKey(i),h=o.hashKey(n+u),p=this._cache.get(h);if(p)return p;for(d in r={width:0,height:0,baseline:0},s=this._measureBox,l=this._baselineMarker.cloneNode(!1),i)c=i[d],a(c)&&(s.style[d]=c);return e(s).text(n),s.appendChild(l),t.body.appendChild(s),(n+"").length&&(r.width=s.offsetWidth-1,r.height=s.offsetHeight,r.baseline=l.offsetTop+1),r.width>0&&r.height>0&&this._cache.put(h,r),s.parentNode.removeChild(s),r}});l.fn._baselineMarker=e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: 1px; height: 1px;overflow: hidden;' />")[0],l.fn._measureBox=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space:nowrap !important;' />")[0],l.current=new l,r(n.drawing,{util:{TextMetrics:l,LRUCache:s,measureText:function(e,t){return l.current.measure(e,t)}}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)(o=e[r]).visible()&&(a=t?o.bbox(n):o.rawBBox())&&(i=i?N.union(i,a):a);return i}function n(e,t){var n,i,r,o;for(i=0;e.length>i;i++)(r=e[i]).visible()&&(o=r.clippedBBox(t))&&(n=n?N.union(n,o):o);return n}function i(e,t){e.origin.x-=t,e.origin.y-=t,e.size.width+=2*t,e.size.height+=2*t}function r(e,t){for(var n=0;t.length>n;n++)e[t[n]]=o(t[n])}function o(e){var t="_"+e;return function(e){return K(e)?(this._observerField(t,e),this.geometryChange(),this):this[t]}}function a(e,t){for(var n=0;t.length>n;n++)e[t[n]]=s(t[n])}function s(e){var t="_"+e;return function(e){return K(e)?(this._observerField(t,H.create(e)),this.geometryChange(),this):this[t]}}function l(e){return function(t){return K(t)?(this.options.set(e,t),this):this.options.get(e)}}function d(){return"kdef"+oe++}function c(e,t,n,i,r){var o,a,s,l,d=[],c=function(e,t,n){var i,r,o,a,s=t.size[n],l=0,d=[],c=[],u=function(){c.push({element:i,bbox:o})};for(a=0;e.length>a;a++)i=e[a],(o=i.clippedBBox())&&(r=o.size[n],l+r>s?c.length?(d.push(c),c=[],u(),l=r):(u(),d.push(c),c=[],l=0):(u(),l+=r));return c.length&&d.push(c),d}(e,t,r),u=t.origin.clone();for(l=0;c.length>l;l++)for(o=(s=c[l])[0],u[i]=o.bbox.origin[i],g(u,o.bbox,o.element),o.bbox.origin[n]=u[n],h(s,n,i,r),d.push([]),a=0;s.length>a;a++)d[l].push(s[a].element);return d}function u(e){var t,n,i,r=[];for(i=0;e.length>i;i++)(n=(t=e[i]).clippedBBox())&&r.push({element:t,bbox:n});return r}function h(e,t,n,i){var r,o,a,s,l;if(e.length>1)for(r=e[0].bbox,o=new H,l=1;e.length>l;l++)a=e[l].element,s=e[l].bbox,o[t]=r.origin[t]+r.size[i],o[n]=s.origin[n],g(o,s,a),s.origin[t]=o[t],r=s}function p(e,t,n,i,r){var o,a,s;for(n=n||"start",s=0;e.length>s;s++)(o=e[s].clippedBBox())&&((a=o.origin.clone())[i]=f(o.size[r],t,n,i,r),g(a,o,e[s]))}function f(e,t,n,i,r){return n==ae?t.origin[i]:n==se?t.origin[i]+t.size[r]-e:t.origin[i]+(t.size[r]-e)/2}function g(e,t,n){!function(e,t,n){var i=n.transform()||F.transform(),r=i.matrix();r.e+=e,r.f+=t,n.transform(i)}(e.x-t.origin.x,e.y-t.origin.y,n)}var m,v,b,_,k,w,y,x,C,S,T,D,I,E,A,O,R=window.kendo,P=R.Class,M=R.deepExtend,F=R.geometry,H=F.Point,N=F.Rect,$=F.Size,L=F.Matrix,z=F.toMatrix,j=R.drawing,B=j.OptionsStore,U=Math,V=U.pow,W=R.util,G=W.append,q=W.arrayLimits,K=W.defined,Y=W.last,Q=W.valueOrDefault,X=R.mixins.ObserversMixin,J=e.inArray,Z=[].push,ee=[].pop,te=[].splice,ne=[].shift,ie=[].slice,re=[].unshift,oe=1,ae="start",se="end",le="horizontal",de=P.extend({nodeType:"Element",init:function(e){this._initOptions(e)},_initOptions:function(e){var t,n;t=(e=e||{}).transform,n=e.clip,t&&(e.transform=F.transform(t)),n&&!n.id&&(n.id=d()),this.options=new B(e),this.options.addObserver(this)},transform:function(e){return K(e)?void this.options.set("transform",F.transform(e)):this.options.get("transform")},parentTransform:function(){for(var e,t,n=this;n.parent;)(e=(n=n.parent).transform())&&(t=e.matrix().multiplyCopy(t||L.unit()));return t?F.transform(t):void 0},currentTransform:function(e){var t,n,i=this.transform(),r=z(i);return K(e)||(e=this.parentTransform()),t=z(e),(n=r&&t?t.multiplyCopy(r):r||t)?F.transform(n):void 0},visible:function(e){return K(e)?(this.options.set("visible",e),this):!1!==this.options.get("visible")},clip:function(e){var t=this.options;return K(e)?(e&&!e.id&&(e.id=d()),t.set("clip",e),this):t.get("clip")},opacity:function(e){return K(e)?(this.options.set("opacity",e),this):Q(this.options.get("opacity"),1)},clippedBBox:function(e){var t,n=this._clippedBBox(e);return n?(t=this.clip())?N.intersect(n,t.bbox(e)):n:void 0},_clippedBBox:function(e){return this.bbox(e)}});M(de.fn,X),M((m=P.extend({init:function(e){e=e||[],this.length=0,this._splice(0,e.length,e)},elements:function(e){return e?(this._splice(0,this.length,e),this._change(),this):this.slice(0)},push:function(){var e=arguments,t=Z.apply(this,e);return this._add(e),t},slice:ie,pop:function(){var e=this.length,t=ee.apply(this);return e&&this._remove([t]),t},splice:function(e,t){var n=ie.call(arguments,2),i=this._splice(e,t,n);return this._change(),i},shift:function(){var e=this.length,t=ne.apply(this);return e&&this._remove([t]),t},unshift:function(){var e=arguments,t=re.apply(this,e);return this._add(e),t},indexOf:function(e){var t,n;for(t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},_splice:function(e,t,n){var i=te.apply(this,[e,t].concat(n));return this._clearObserver(i),this._setObserver(n),i},_add:function(e){this._setObserver(e),this._change()},_remove:function(e){this._clearObserver(e),this._change()},_setObserver:function(e){for(var t=0;e.length>t;t++)e[t].addObserver(this)},_clearObserver:function(e){for(var t=0;e.length>t;t++)e[t].removeObserver(this)},_change:function(){}})).fn,X),v=de.extend({nodeType:"Group",init:function(e){de.fn.init.call(this,e),this.children=[]},childrenChange:function(e,t,n){this.trigger("childrenChange",{action:e,items:t,index:n})},append:function(){return G(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insertAt:function(e,t){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},remove:function(e){var t=J(e,this.children);return t>=0&&(this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)),this},removeAt:function(e){if(e>=0&&this.children.length>e){var t=this.children[e];this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;return this.children=[],this._reparent(e,null),this.childrenChange("remove",e,0),this},bbox:function(e){return t(this.children,!0,this.currentTransform(e))},rawBBox:function(){return t(this.children,!1)},_clippedBBox:function(e){return n(this.children,this.currentTransform(e))},currentTransform:function(e){return de.fn.currentTransform.call(this,e)||null},_reparent:function(e,t){var n,i,r;for(n=0;e.length>n;n++)(r=(i=e[n]).parent)&&r!=this&&r.remove&&r.remove(i),i.parent=t}}),j.mixins.Traversable.extend(v.fn,"children"),b=de.extend({nodeType:"Text",init:function(e,t,n){de.fn.init.call(this,n),this.content(e),this.position(t||new F.Point),this.options.font||(this.options.font="12px sans-serif"),K(this.options.fill)||this.fill("#000")},content:function(e){return K(e)?(this.options.set("content",e),this):this.options.get("content")},measure:function(){return j.util.measureText(this.content(),{font:this.options.get("font")})},rect:function(){var e=this.measure(),t=this.position().clone();return new F.Rect(t,[e.width,e.height])},bbox:function(e){var t=z(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()}}),j.mixins.Paintable.extend(b.fn),a(b.fn,["position"]),_=de.extend({nodeType:"Circle",init:function(e,t){de.fn.init.call(this,t),this.geometry(e||new F.Circle),K(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this._geometry.bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._geometry.bbox()}}),j.mixins.Paintable.extend(_.fn),r(_.fn,["geometry"]),k=de.extend({nodeType:"Arc",init:function(e,t){de.fn.init.call(this,t),this.geometry(e||new F.Arc),K(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this.geometry().bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e,t=new x,n=this.geometry().curvePoints();if(n.length>0)for(t.moveTo(n[0].x,n[0].y),e=1;n.length>e;e+=3)t.curveTo(n[e],n[e+1],n[e+2]);return t}}),j.mixins.Paintable.extend(k.fn),r(k.fn,["geometry"]),w=m.extend({_change:function(){this.geometryChange()}}),a((y=P.extend({init:function(e,t,n){this.anchor(e||new H),this.controlIn(t),this.controlOut(n)},bboxTo:function(e,t){var n=this.anchor().transformCopy(t),i=e.anchor().transformCopy(t);return this.controlOut()&&e.controlIn()?this._curveBoundingBox(n,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),i):this._lineBoundingBox(n,i)},_lineBoundingBox:function(e,t){return N.fromPoints(e,t)},_curveBoundingBox:function(e,t,n,i){var r=[e,t,n,i],o=this._curveExtremesFor(r,"x"),a=this._curveExtremesFor(r,"y"),s=q([o.min,o.max,e.x,i.x]),l=q([a.min,a.max,e.y,i.y]);return N.fromPoints(new H(s.min,l.min),new H(s.max,l.max))},_curveExtremesFor:function(e,t){var n=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:this._calculateCurveAt(n.min,t,e),max:this._calculateCurveAt(n.max,t,e)}},_calculateCurveAt:function(e,t,n){var i=1-e;return V(i,3)*n[0][t]+3*V(i,2)*e*n[1][t]+3*V(e,2)*i*n[2][t]+V(e,3)*n[3][t]},_curveExtremes:function(e,t,n,i){var r,o,a=e-3*t+3*n-i,s=-2*(e-2*t+n),l=e-t,d=U.sqrt(s*s-4*a*l),c=0,u=1;return 0===a?0!==s&&(c=u=-l/s):isNaN(d)||(c=(-s+d)/(2*a),u=(-s-d)/(2*a)),(0>(r=U.max(U.min(c,u),0))||r>1)&&(r=0),((o=U.min(U.max(c,u),1))>1||0>o)&&(o=1),{min:r,max:o}}})).fn,["anchor","controlIn","controlOut"]),M(y.fn,X),x=de.extend({nodeType:"Path",init:function(e){de.fn.init.call(this,e),this.segments=new w,this.segments.addObserver(this),K(this.options.stroke)||(this.stroke("#000"),K(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(e,t){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(e,t),this},lineTo:function(e,t){var n=K(t)?new H(e,t):e,i=new y(n);return this.segments.push(i),this},curveTo:function(e,t,n){var i,r;return this.segments.length>0&&(i=Y(this.segments),r=new y(n,t),this.suspend(),i.controlOut(e),this.resume(),this.segments.push(r)),this},arc:function(e,t,n,i,r){var o,a,s,l;return this.segments.length>0&&(o=Y(this.segments).anchor(),a=W.rad(e),s=new H(o.x-n*U.cos(a),o.y-i*U.sin(a)),l=new F.Arc(s,{startAngle:e,endAngle:t,radiusX:n,radiusY:i,anticlockwise:r}),this._addArcSegments(l)),this},arcTo:function(e,t,n,i,r){var o,a;return this.segments.length>0&&(o=Y(this.segments).anchor(),a=F.Arc.fromPoints(o,e,t,n,i,r),this._addArcSegments(a)),this},_addArcSegments:function(e){var t,n;for(this.suspend(),t=e.curvePoints(),n=1;t.length>n;n+=3)this.curveTo(t[n],t[n+1],t[n+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},bbox:function(e){var t=z(this.currentTransform(e)),n=this._bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._bbox()},_bbox:function(e){var t,n,i,r,o=this.segments,a=o.length;if(1===a)n=o[0].anchor().transformCopy(e),t=new N(n,$.ZERO);else if(a>0)for(i=1;a>i;i++)r=o[i-1].bboxTo(o[i],e),t=t?N.union(t,r):r;return t}}),j.mixins.Paintable.extend(x.fn),x.fromRect=function(e,t){return new x(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()},x.fromPoints=function(e,t){var n,i,r;if(e){for(n=new x(t),i=0;e.length>i;i++)(r=H.create(e[i]))&&(0===i?n.moveTo(r):n.lineTo(r));return n}},x.fromArc=function(e,t){var n=new x(t),i=e.startAngle,r=e.pointAt(i);return n.moveTo(r.x,r.y),n.arc(i,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise),n},C=de.extend({nodeType:"MultiPath",init:function(e){de.fn.init.call(this,e),this.paths=new w,this.paths.addObserver(this),K(this.options.stroke)||this.stroke("#000")},moveTo:function(e,t){var n=new x;return n.moveTo(e,t),this.paths.push(n),this},lineTo:function(e,t){return this.paths.length>0&&Y(this.paths).lineTo(e,t),this},curveTo:function(e,t,n){return this.paths.length>0&&Y(this.paths).curveTo(e,t,n),this},arc:function(e,t,n,i,r){return this.paths.length>0&&Y(this.paths).arc(e,t,n,i,r),this},arcTo:function(e,t,n,i,r){return this.paths.length>0&&Y(this.paths).arcTo(e,t,n,i,r),this},close:function(){return this.paths.length>0&&Y(this.paths).close(),this},bbox:function(e){return t(this.paths,!0,this.currentTransform(e))},rawBBox:function(){return t(this.paths,!1)},_clippedBBox:function(e){return n(this.paths,this.currentTransform(e))}}),j.mixins.Paintable.extend(C.fn),r((S=de.extend({nodeType:"Image",init:function(e,t,n){de.fn.init.call(this,n),this.src(e),this.rect(t||new F.Rect)},src:function(e){return K(e)?(this.options.set("src",e),this):this.options.get("src")},bbox:function(e){var t=z(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()}})).fn,["rect"]),function(e,t){for(var n=0;t.length>n;n++)e[t[n]]=l(t[n])}((T=P.extend({init:function(e,t,n){this.options=new B({offset:e,color:t,opacity:K(n)?n:1}),this.options.addObserver(this)}})).fn,["offset","color","opacity"]),M(T.fn,X),T.create=function(e){if(K(e))return e instanceof T?e:e.length>1?new T(e[0],e[1],e[2]):new T(e.offset,e.color,e.opacity)},D=m.extend({_change:function(){this.optionsChange({field:"stops"})}}),M((I=P.extend({nodeType:"gradient",init:function(e){this.stops=new D(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=d()},userSpace:function(e){return K(e)?(this._userSpace=e,this.optionsChange(),this):this._userSpace},_createStops:function(e){var t,n=[];for(e=e||[],t=0;e.length>t;t++)n.push(T.create(e[t]));return n},addStop:function(e,t,n){this.stops.push(new T(e,t,n))},removeStop:function(e){var t=this.stops.indexOf(e);t>=0&&this.stops.splice(t,1)}})).fn,X,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}}),a((E=I.extend({init:function(e){e=e||{},I.fn.init.call(this,e),this.start(e.start||new H),this.end(e.end||new H(1,0))}})).fn,["start","end"]),a((A=I.extend({init:function(e){e=e||{},I.fn.init.call(this,e),this.center(e.center||new H),this._radius=K(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill},radius:function(e){return K(e)?(this._radius=e,this.geometryChange(),this):this._radius},fallbackFill:function(e){return K(e)?(this._fallbackFill=e,this.optionsChange(),this):this._fallbackFill}})).fn,["center"]),O=v.extend({init:function(e,t){v.fn.init.call(this,R.deepExtend({},this._defaults,t)),this._rect=e,this._fieldMap={}},_defaults:{alignContent:ae,justifyContent:ae,alignItems:ae,spacing:0,orientation:le,lineSpacing:0,wrap:!0},rect:function(e){return e?(this._rect=e,this):this._rect},_initMap:function(){var e=this.options,t=this._fieldMap;e.orientation==le?(t.sizeField="width",t.groupsSizeField="height",t.groupAxis="x",t.groupsAxis="y"):(t.sizeField="height",t.groupsSizeField="width",t.groupAxis="y",t.groupsAxis="x")},reflow:function(){var e,t,n,i,r,o,a,s,l,d,c,u,h,p,m,v,b,_,k,w,y,x,C,S,T;if(this._rect&&0!==this.children.length){for(this._initMap(),this.options.transform&&this.transform(null),e=this.options,t=this._fieldMap,n=this._rect,r=(i=this._initGroups()).groups,o=i.groupsSize,a=t.sizeField,s=t.groupsSizeField,l=t.groupAxis,d=t.groupsAxis,c=f(o,n,e.alignContent,d,s),u=new H,h=new H,p=new F.Size,w=0;r.length>w;w++){for(_=r[w],u[l]=m=f(_.size,n,e.justifyContent,l,a),u[d]=c,p[a]=_.size,p[s]=_.lineSize,k=new N(u,p),y=0;_.bboxes.length>y;y++)b=_.elements[y],v=_.bboxes[y],h[l]=m,h[d]=f(v.size[s],k,e.alignItems,d,s),g(h,v,b),m+=v.size[a]+e.spacing;c+=_.lineSize+e.lineSpacing}!e.wrap&&_.size>n.size[a]&&(x=n.size[a]/k.size[a],C=k.topLeft().scale(x,x),S=f(k.size[s]*x,n,e.alignContent,d,s),T=F.transform(),"x"===l?T.translate(n.origin.x-C.x,S-C.y):T.translate(S-C.x,n.origin.y-C.y),T.scale(x,x),this.transform(T))}},_initGroups:function(){var e,t,n,i=this.options,r=this.children,o=i.lineSpacing,a=this._fieldMap.sizeField,s=-o,l=[],d=this._newGroup(),c=function(){l.push(d),s+=d.lineSize+o};for(n=0;r.length>n;n++)t=r[n],e=r[n].clippedBBox(),t.visible()&&e&&(i.wrap&&d.size+e.size[a]+i.spacing>this._rect.size[a]?0===d.bboxes.length?(this._addToGroup(d,e,t),c(),d=this._newGroup()):(c(),d=this._newGroup(),this._addToGroup(d,e,t)):this._addToGroup(d,e,t));return d.bboxes.length&&c(),{groups:l,groupsSize:s}},_addToGroup:function(e,t,n){e.size+=t.size[this._fieldMap.sizeField]+this.options.spacing,e.lineSize=Math.max(t.size[this._fieldMap.groupsSizeField],e.lineSize),e.bboxes.push(t),e.elements.push(n)},_newGroup:function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}}),M(j,{align:function(e,t,n){p(e,t,n,"x","width")},Arc:k,Circle:_,Element:de,ElementsArray:m,fit:function(e,t){var n,i,r=e.clippedBBox().size,o=t.size;(r.width>o.width||r.height>o.height)&&(n=U.min(o.width/r.width,o.height/r.height),(i=e.transform()||F.transform()).scale(n,n),e.transform(i))},Gradient:I,GradientStop:T,Group:v,Image:S,Layout:O,LinearGradient:E,MultiPath:C,Path:x,RadialGradient:A,Segment:y,stack:function(e){h(u(e),"x","y","width")},Text:b,vAlign:function(e,t,n){p(e,t,n,"y","height")},vStack:function(e){h(u(e),"y","x","height")},vWrap:function(e,t){return c(e,t,"y","x","height")},wrap:function(e,t){return c(e,t,"x","y","width")}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i,r=t?0:1;for(i=0;e.length>i;i+=2)e.splice(i+r,0,n)}function n(e,t){return e&&t?t.scaleCopy(2).translate(-e.x,-e.y):void 0}function i(e,t,n){return{controlOut:(t=t.clone().scale(2/3)).clone().translateWith(e.scaleCopy(1/3)),controlIn:t.translateWith(n.scaleCopy(1/3))}}var r=window.kendo,o=r.drawing,a=r.geometry,s=r.Class,l=a.Point,d=r.deepExtend,c=e.trim,u=r.util.last,h=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,p=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g,f=s.extend({parse:function(e,t){var n,i=new o.MultiPath(t),r=new l;return e.replace(h,function(e,t,o,a){var s=t.toLowerCase(),l=s===t,d=function(e){var t=[];return e.replace(p,function(e,n){t.push(parseFloat(n))}),t}(c(o));if("m"===s&&(l?(r.x+=d[0],r.y+=d[1]):(r.x=d[0],r.y=d[1]),i.moveTo(r.x,r.y),d.length>2&&(s="l",d.splice(0,2))),g[s])g[s](i,{parameters:d,position:r,isRelative:l,previousCommand:n}),a&&"z"===a.toLowerCase()&&i.close();else if("m"!==s)throw Error("Error while parsing SVG path. Unsupported command: "+s);n=s}),i}}),g={l:function(e,t){var n,i,r=t.parameters,o=t.position;for(n=0;r.length>n;n+=2)i=new l(r[n],r[n+1]),t.isRelative&&i.translateWith(o),e.lineTo(i.x,i.y),o.x=i.x,o.y=i.y},c:function(e,t){var n,i,r,o,a=t.parameters,s=t.position;for(o=0;a.length>o;o+=6)n=new l(a[o],a[o+1]),i=new l(a[o+2],a[o+3]),r=new l(a[o+4],a[o+5]),t.isRelative&&(i.translateWith(s),n.translateWith(s),r.translateWith(s)),e.curveTo(n,i,r),s.x=r.x,s.y=r.y},v:function(e,n){var i=n.isRelative?0:n.position.x;t(n.parameters,!0,i),this.l(e,n)},h:function(e,n){var i=n.isRelative?0:n.position.y;t(n.parameters,!1,i),this.l(e,n)},a:function(e,t){var n,i,r,o,a,s,d=t.parameters,c=t.position;for(n=0;d.length>n;n+=7)i=d[n],r=d[n+1],o=d[n+3],a=d[n+4],s=new l(d[n+5],d[n+6]),t.isRelative&&s.translateWith(c),e.arcTo(s,i,r,o,a),c.x=s.x,c.y=s.y},s:function(e,t){var i,r,o,a,s,d=t.parameters,c=t.position,h=t.previousCommand;for(("s"==h||"c"==h)&&(a=u(u(e.paths).segments).controlIn()),s=0;d.length>s;s+=4)o=new l(d[s],d[s+1]),r=new l(d[s+2],d[s+3]),t.isRelative&&(o.translateWith(c),r.translateWith(c)),i=a?n(a,c):c.clone(),a=o,e.curveTo(i,o,r),c.x=r.x,c.y=r.y},q:function(e,t){var n,r,o,a,s=t.parameters,d=t.position;for(a=0;s.length>a;a+=4)o=new l(s[a],s[a+1]),r=new l(s[a+2],s[a+3]),t.isRelative&&(o.translateWith(d),r.translateWith(d)),n=i(d,o,r),e.curveTo(n.controlOut,n.controlIn,r),d.x=r.x,d.y=r.y},t:function(e,t){var r,o,a,s,d=t.parameters,c=t.position,h=t.previousCommand;for(("q"==h||"t"==h)&&(o=u(u(e.paths).segments).controlIn().clone().translateWith(c.scaleCopy(-1/3)).scale(1.5)),s=0;d.length>s;s+=2)a=new l(d[s],d[s+1]),t.isRelative&&a.translateWith(c),o=o?n(o,c):c.clone(),r=i(c,o,a),e.curveTo(r.controlOut,r.controlIn,a),c.x=a.x,c.y=a.y}};f.current=new f,o.Path.parse=function(e,t){return f.current.parse(e,t)},d(o,{PathParser:f})}(window.kendo.jQuery),function(e){function t(e){return"url("+function(){var e=document.getElementsByTagName("base")[0],t="",n=document.location.href,i=n.indexOf("#");return e&&!s.support.browser.msie&&(-1!==i&&(n=n.substring(0,i)),t=n),t}()+"#"+e+")"}function n(e){var t,n,i,r=new I({encodeText:!0}),o=e.clippedBBox();return o&&(t=o.getOrigin(),(n=new c.Group).transform(d.transform().translate(-t.x,-t.y)),n.children.push(e),e=n),r.load([e]),i="<?xml version='1.0' ?><svg xmlns='"+C+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+r.render()+"</svg>",r.destroy(),i}function i(e,t){return"clip"==e||"fill"==e&&(!t||t.nodeType==k)}function r(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=r._element;return t.innerHTML=e,t.textContent||t.innerText}var o,a=document,s=window.kendo,l=s.deepExtend,d=s.geometry,c=s.drawing,u=c.BaseNode,h=s.util,p=h.defined,f=h.isTransparent,g=h.renderAttr,m=h.renderAllAttr,v=h.renderTemplate,b=e.inArray,_=c.DASH_ARRAYS,k="gradient",w="none",y=".kendo",x="solid",C="http://www.w3.org/2000/svg",S="transform",T=c.Surface.extend({init:function(e,t){c.Surface.fn.init.call(this,e,t),this._root=new I(this.options),U(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,function(e){var t,n,i,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(e){}t&&(n=-t.e%1,i=-t.f%1,r=e.style,(0!==n||0!==i)&&(r.left=n+"px",r.top=i+"px"))}(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click"+y,this._click),this.element.on("mouseover"+y,this._mouseenter),this.element.on("mouseout"+y,this._mouseleave),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(y)),c.Surface.fn.destroy.call(this)},translate:function(e){var t=s.format("{0} {1} {2} {3}",Math.round(e.x),Math.round(e.y),this._size.width,this._size.height);this._offset=e,this._rootElement.setAttribute("viewBox",t)},draw:function(e){c.Surface.fn.draw.call(this,e),this._root.load([e])},clear:function(){c.Surface.fn.clear.call(this),this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},exportVisual:function(){var e,t=this._visual,n=this._offset;return n&&((e=new c.Group).children.push(t),e.transform(d.transform().translate(-n.x,-n.y)),t=e),t},_resize:function(){this._offset&&this.translate(this._offset)},_template:v("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+C+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),D=u.extend({init:function(e){u.fn.init.call(this,e),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),u.fn.destroy.call(this)},load:function(e,t){var n,i,r,o,a=this,s=a.element;for(o=0;e.length>o;o++)r=(i=e[o]).children,n=new B[i.nodeType](i),p(t)?a.insertAt(n,t):a.append(n),n.createDefinitions(),r&&r.length>0&&n.load(r),s&&n.attachTo(s,t)},root:function(){for(var e=this;e.parent;)e=e.parent;return e},attachTo:function(e,t){var n,i=a.createElement("div");U(i,"<svg xmlns='"+C+"' version='1.1'>"+this.render()+"</svg>"),(n=i.firstChild.firstChild)&&(p(t)?e.insertBefore(n,e.childNodes[t]||null):e.appendChild(n),this.setElement(n))},setElement:function(e){var t,n,i=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,this.element._kendoNode=this,n=0;i.length>n;n++)t=e.childNodes[n],i[n].setElement(t)},clear:function(){var e,t;for(this.clearDefinitions(),this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}u.fn.removeSelf.call(this)},template:v("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,n="";for(e=0;t.length>e;e++)n+=t[e].render();return n},optionsChange:function(e){var t=e.field,n=e.value;"visible"===t?this.css("display",n?"":w):o[t]&&i(t,n)?this.updateDefinition(t,n):"opacity"===t&&this.attr("opacity",n),u.fn.optionsChange.call(this,e)},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])},removeAttr:function(e){this.element&&this.element.removeAttribute(e)},mapTransform:function(e){var t=[];return e&&t.push([S,"matrix("+e.matrix().toString(6)+")"]),t},renderTransform:function(){return m(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){e?this.allAttr(this.mapTransform(e)):this.removeAttr(S)},mapStyle:function(){var e=this.srcElement.options,t=[["cursor",e.cursor]];return!1===e.visible&&t.push(["display",w]),t},renderStyle:function(){return g("style",h.renderStyle(this.mapStyle()))},renderOpacity:function(){return g("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var e,t,n,r,a=this.srcElement,s=this.definitions;if(a){for(t in n=a.options,o)(e=n.get(t))&&i(t,e)&&(s[t]=e,r=!0);r&&this.definitionChange({action:"add",definitions:s})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(e,n){var i=this.definitions,r=i[e],a=o[e],s={};r&&(s[e]=r,this.definitionChange({action:"remove",definitions:s}),delete i[e]),n?(s[e]=n,this.definitionChange({action:"add",definitions:s}),i[e]=n,this.attr(a,t(n.id))):r&&this.removeAttr(a)},clearDefinitions:function(){var e,t=this.definitions;for(e in t){this.definitionChange({action:"remove",definitions:t}),this.definitions={};break}},renderDefinitions:function(){return m(this.mapDefinitions())},mapDefinitions:function(){var e,n=this.definitions,i=[];for(e in n)i.push([o[e],t(n[e].id)]);return i}}),I=D.extend({init:function(e){D.fn.init.call(this),this.options=e,this.defs=new E},attachTo:function(e){this.element=e,this.defs.attachTo(e.firstElementChild)},clear:function(){u.fn.clear.call(this)},template:v("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),E=D.extend({init:function(){D.fn.init.call(this),this.definitionMap={}},attachTo:function(e){this.element=e},template:v("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var t=e.definitions,n=e.action;"add"==n?this.addDefinitions(t):"remove"==n&&this.removeDefinitions(t)},createDefinition:function(e,t){var n;return"clip"==e?n=A:"fill"==e&&(t instanceof c.LinearGradient?n=z:t instanceof c.RadialGradient&&(n=j)),new n(t)},addDefinitions:function(e){for(var t in e)this.addDefinition(t,e[t])},addDefinition:function(e,t){var n,i=this.definitionMap,r=t.id,o=this.element,a=i[r];a?a.count++:(n=this.createDefinition(e,t),i[r]={element:n,count:1},this.append(n),o&&n.attachTo(this.element))},removeDefinitions:function(e){for(var t in e)this.removeDefinition(e[t])},removeDefinition:function(e){var t=this.definitionMap,n=e.id,i=t[n];i&&(i.count--,0===i.count&&(this.remove(b(i.element,this.childNodes),1),delete t[n]))}}),A=D.extend({init:function(e){D.fn.init.call(this),this.srcElement=e,this.id=e.id,this.load([e])},template:v("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),O=D.extend({template:v("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==S&&this.transformChange(e.value),D.fn.optionsChange.call(this,e)}}),R=D.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case S:this.transformChange(e.value);break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}D.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t,n,i,r,o,a=e.segments,s=a.length;if(s>0){for(t=[],o=1;s>o;o++)(i=this.segmentType(a[o-1],a[o]))!==r&&(r=i,t.push(i)),t.push("L"===i?this.printPoints(a[o].anchor()):this.printPoints(a[o-1].controlOut(),a[o].controlIn(),a[o].anchor()));return n="M"+this.printPoints(a[0].anchor())+" "+t.join(" "),e.options.closed&&(n+="Z"),n}},printPoints:function(){var e,t=arguments,n=t.length,i=[];for(e=0;n>e;e++)i.push(t[e].toString(3));return i.join(" ")},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];return e&&!f(e.color)?(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),t.push(["stroke-linejoin",e.lineJoin]),p(e.opacity)&&t.push(["stroke-opacity",e.opacity]),p(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])):t.push(["stroke",w]),t},renderStroke:function(){return m(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t,n,i,r=e.width||1,o=e.dashType;if(o&&o!=x){for(t=_[o.toLowerCase()],n=[],i=0;t.length>i;i++)n.push(t[i]*r);return n.join(" ")}},renderLinecap:function(e){var t=e.dashType,n=e.lineCap;return t&&t!=x?"butt":n},mapFill:function(e){var t=[];return e&&e.nodeType==k||(e&&!f(e.color)?(t.push(["fill",e.color]),p(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",w])),t},renderFill:function(){return m(this.mapFill(this.srcElement.options.fill))},template:v("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),P=R.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),M=R.extend({renderData:function(){var e,t,n=this.srcElement.paths;if(n.length>0){for(e=[],t=0;n.length>t;t++)e.push(this.printPath(n[t]));return e.join(" ")}}}),F=R.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x),this.attr("cy",e.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:v("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),H=R.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x),this.attr("y",e.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",h.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&R.fn.content.call(this,this.srcElement.content()),R.fn.optionsChange.call(this,e)},mapStyle:function(){var e=R.fn.mapStyle.call(this),t=this.srcElement.options.font;return e.push(["font",s.htmlEncode(t)]),e},pos:function(){var e=this.srcElement.position(),t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},content:function(){var e=this.srcElement.content(),t=this.root().options;return t&&t.encodeText&&(e=r(e),e=s.htmlEncode(e)),e},template:v("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #>#= d.content() #</text>")}),N=R.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate()},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),R.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect(),t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return m(this.mapPosition())},mapSource:function(){return[["xlink:href",this.srcElement.src()]]},renderSource:function(){return m(this.mapSource())},template:v("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),$=D.extend({template:v("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return g("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):("color"==e.field||"opacity"==e.field)&&this.css("stop-"+e.field,e.value)}}),L=D.extend({init:function(e){D.fn.init.call(this,e),this.id=e.id,this.loadStops()},loadStops:function(){var e,t,n=this.srcElement.stops,i=this.element;for(t=0;n.length>t;t++)e=new $(n[t]),this.append(e),i&&e.attachTo(i)},optionsChange:function(e){"gradient.stops"==e.field?(u.fn.clear.call(this),this.loadStops()):e.field==k&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return m(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),z=L.extend({template:v("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.start(),n=e.end();return[["x1",t.x],["y1",t.y],["x2",n.x],["y2",n.y],this.mapSpace()]}}),j=L.extend({template:v("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.center(),n=e.radius();return[["cx",t.x],["cy",t.y],["r",n],this.mapSpace()]}}),B={Group:O,Text:H,Path:R,MultiPath:M,Circle:F,Arc:P,Image:N},U=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+C+"'></svg>",t=a.createElement("div"),n="undefined"!=typeof DOMParser;t.innerHTML=e,n&&t.firstChild.namespaceURI!=C&&(U=function(e,t){var n=(new DOMParser).parseFromString(t,"text/xml"),i=a.adoptNode(n.documentElement);e.innerHTML="",e.appendChild(i)})}(),r._element=document.createElement("span"),o={clip:"clip-path",fill:"fill"},s.support.svg=a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),s.support.svg&&c.SurfaceFactory.current.register("svg",T,10),l(c,{exportSVG:function(t,i){var r=n(t);return i&&i.raw||(r="data:image/svg+xml;base64,"+h.encodeBase64(r)),e.Deferred().resolve(r).promise()},svg:{ArcNode:P,CircleNode:F,ClipNode:A,DefinitionNode:E,GradientStopNode:$,GroupNode:O,ImageNode:N,LinearGradientNode:z,MultiPathNode:M,Node:D,PathNode:R,RadialGradientNode:j,RootNode:I,Surface:T,TextNode:H,_exportGroup:n}})}(window.kendo.jQuery),function(e){var t,n,i,r,o,a,s,l,d=document,c=window.kendo,u=c.deepExtend,h=c.util,p=h.defined,f=h.isTransparent,g=h.renderTemplate,m=h.valueOrDefault,v=c.geometry,b=c.drawing,_=b.BaseNode,k=b.DASH_ARRAYS,w="solid",y=b.Surface.extend({init:function(n,i){b.Surface.fn.init.call(this,n,i),this.element[0].innerHTML=this._template(this);var r=this.element[0].firstElementChild;r.width=e(n).width(),r.height=e(n).height(),this._rootElement=r,this._root=new t(r)},destroy:function(){b.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null)},type:"canvas",draw:function(e){b.Surface.fn.draw.call(this,e),this._root.load([e],void 0,this.options.cors)},clear:function(){b.Surface.fn.clear.call(this),this._root.clear()},image:function(){var t,n=this._root,i=this._rootElement,r=[];return n.traverse(function(e){e.loading&&r.push(e.loading)}),t=e.Deferred(),e.when.apply(e,r).done(function(){n._invalidate();try{var e=i.toDataURL();t.resolve(e)}catch(e){t.reject(e)}}).fail(function(e){t.reject(e)}),t.promise()},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:g("<canvas style='width: 100%; height: 100%;'></canvas>")}),x=_.extend({init:function(e){_.fn.init.call(this,e),e&&this.initClip()},initClip:function(){var e=this.srcElement.clip();e&&(this.clip=e,e.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),_.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(e){this.clip&&(e.beginPath(),n.fn.renderPoints(e,this.clip),e.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),_.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();t&&e.transform.apply(e,t.matrix().toArray(6))}},load:function(e,t,n){var i,r,o,a,s=this;for(a=0;e.length>a;a++)o=(r=e[a]).children,i=new l[r.nodeType](r,n),o&&o.length>0&&i.load(o,t,n),p(t)?s.insertAt(i,t):s.append(i);s.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();p(t)&&this.globalAlpha(e,t)}},globalAlpha:function(e,t){t&&e.globalAlpha&&(t*=e.globalAlpha),e.globalAlpha=t},visible:function(){var e=this.srcElement;return!e||e&&!1!==e.options.visible}}),C=x.extend({renderTo:function(e){var t,n,i;if(this.visible()){for(e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),t=this.childNodes,n=0;t.length>n;n++)(i=t[n]).visible()&&i.renderTo(e);e.restore()}}});b.mixins.Traversable.extend(C.fn,"childNodes"),t=C.extend({init:function(t){C.fn.init.call(this),this.canvas=t,this.ctx=t.getContext("2d"),this.invalidate=c.throttle(e.proxy(this._invalidate,this),1e3/60)},destroy:function(){C.fn.destroy.call(this),this.canvas=null,this.ctx=null},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}}),b.mixins.Traversable.extend(t.fn,"childNodes"),n=x.extend({renderTo:function(e){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),this.renderPoints(e,this.srcElement),this.setLineDash(e),this.setLineCap(e),this.setLineJoin(e),this.setFill(e),this.setStroke(e),e.restore()},setFill:function(e){var t=this.srcElement.options.fill,n=!1;return t&&("gradient"==t.nodeType?(this.setGradientFill(e,t),n=!0):f(t.color)||(e.fillStyle=t.color,e.save(),this.globalAlpha(e,t.opacity),e.fill(),e.restore(),n=!0)),n},setGradientFill:function(e,t){var n,i,r,o,a=this.srcElement.rawBBox();t instanceof b.LinearGradient?(i=t.start(),r=t.end(),n=e.createLinearGradient(i.x,i.y,r.x,r.y)):t instanceof b.RadialGradient&&(o=t.center(),n=e.createRadialGradient(o.x,o.y,0,o.x,o.y,t.radius())),function(e,t){var n,i,r;for(r=0;t.length>r;r++)i=t[r],(n=c.parseColor(i.color())).a*=i.opacity(),e.addColorStop(i.offset(),n.toCssRgba())}(n,t.stops),e.save(),t.userSpace()||e.transform(a.width(),0,0,a.height(),a.origin.x,a.origin.y),e.fillStyle=n,e.fill(),e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;return t&&!f(t.color)&&t.width>0?(e.strokeStyle=t.color,e.lineWidth=m(t.width,1),e.save(),this.globalAlpha(e,t.opacity),e.stroke(),e.restore(),!0):void 0},dashType:function(){var e=this.srcElement.options.stroke;return e&&e.dashType?e.dashType.toLowerCase():void 0},setLineDash:function(e){var t,n=this.dashType();n&&n!=w&&(t=k[n],e.setLineDash?e.setLineDash(t):(e.mozDash=t,e.webkitLineDash=t))},setLineCap:function(e){var t=this.dashType(),n=this.srcElement.options.stroke;t&&t!==w?e.lineCap="butt":n&&n.lineCap&&(e.lineCap=n.lineCap)},setLineJoin:function(e){var t=this.srcElement.options.stroke;t&&t.lineJoin&&(e.lineJoin=t.lineJoin)},renderPoints:function(e,t){var n,i,r,o,a,s=t.segments;if(0!==s.length){for(i=(n=s[0]).anchor(),e.moveTo(i.x,i.y),r=1;s.length>r;r++)i=(n=s[r]).anchor(),o=s[r-1].controlOut(),a=n.controlIn(),o&&a?e.bezierCurveTo(o.x,o.y,a.x,a.y,i.x,i.y):e.lineTo(i.x,i.y);t.options.closed&&e.closePath()}}}),i=n.extend({renderPoints:function(e){var t,i=this.srcElement.paths;for(t=0;i.length>t;t++)n.fn.renderPoints(e,i[t])}}),r=n.extend({renderPoints:function(e){var t=this.srcElement.geometry(),n=t.center,i=t.radius;e.arc(n.x,n.y,i,0,2*Math.PI)}}),o=n.extend({renderPoints:function(e){var t=this.srcElement.toPath();n.fn.renderPoints.call(this,e,t)}}),a=n.extend({renderTo:function(e){var t=this.srcElement,n=t.position(),i=t.measure();e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),e.font=t.options.font,this.setFill(e)&&e.fillText(t.content(),n.x,n.y+i.baseline),this.setStroke(e)&&(this.setLineDash(e),e.strokeText(t.content(),n.x,n.y+i.baseline)),e.restore()}}),s=n.extend({init:function(t,i){var r;n.fn.init.call(this,t),this.onLoad=e.proxy(this.onLoad,this),this.onError=e.proxy(this.onError,this),this.loading=e.Deferred(),r=this.img=new Image,i&&!/^data:/i.test(t.src())&&(r.crossOrigin=i),r.src=t.src(),r.complete?this.onLoad():(r.onload=this.onLoad,r.onerror=this.onError)},renderTo:function(e){"resolved"===this.loading.state()&&(e.save(),this.setTransform(e),this.setClip(e),this.drawImage(e),e.restore())},optionsChange:function(t){"src"===t.field?(this.loading=e.Deferred(),this.img.src=this.srcElement.src()):n.fn.optionsChange.call(this,t)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect(),n=t.topLeft();e.drawImage(this.img,n.x,n.y,t.width(),t.height())}}),l={Group:C,Text:a,Path:n,MultiPath:i,Circle:r,Arc:o,Image:s},c.support.canvas=!!d.createElement("canvas").getContext,c.support.canvas&&b.SurfaceFactory.current.register("canvas",y,20),u(c.drawing,{exportImage:function(t,n){var i,r,o,a,s,l,d={width:"800px",height:"600px",cors:"Anonymous"},c=t.clippedBBox();return c&&(i=c.getOrigin(),(r=new b.Group).transform(v.transform().translate(-i.x,-i.y)),r.children.push(t),t=r,o=c.getSize(),d.width=o.width+"px",d.height=o.height+"px"),n=u(d,n),a=e("<div />").css({display:"none",width:n.width,height:n.height}).appendTo(document.body),(s=new y(a,n)).draw(t),(l=s.image()).always(function(){s.destroy(),a.remove()}),l},canvas:{ArcNode:o,CircleNode:r,GroupNode:C,ImageNode:s,MultiPathNode:i,Node:x,PathNode:n,RootNode:t,Surface:y,TextNode:a}})}(window.kendo.jQuery),function(e){function t(e){var t=c.createElement("kvml:"+e);return t.className="kvml",t}function n(e){var t,n=e.length,i=[];for(t=0;n>t;t++)i.push(e[t].scaleCopy(O).toString(0,","));return i.join(" ")}function i(e,t){var i,o,a,s,l,d=e.segments,c=d.length;if(c>0){for(i=[],l=1;c>l;l++)(a=r(d[l-1],d[l]))!==s&&(s=a,i.push(a)),i.push(n("l"===a?[d[l].anchor()]:[d[l-1].controlOut(),d[l].controlIn(),d[l].anchor()]));return o="m "+n([d[0].anchor()])+" "+i.join(" "),e.options.closed&&(o+=" x"),!0!==t&&(o+=" e"),o}}function r(e,t){return e.controlOut()&&t.controlIn()?"c":"l"}function o(e){return 0===e.indexOf("fill")||0===e.indexOf(P)}function a(e,t,n){var i=n*I(t.opacity(),1);return e?s(e,t.color(),i):s(t.color(),"#fff",1-i)}function s(e,t,n){var i=new y(e),r=new y(t),o=l(i.r,r.r,n),a=l(i.g,r.g,n),s=l(i.b,r.b,n);return new y(o,a,s).toHex()}function l(e,t,n){return u.round(n*t+(1-n)*e)}var d,c=document,u=Math,h=u.atan2,p=u.ceil,f=u.sqrt,g=window.kendo,m=g.deepExtend,v=e.noop,b=g.drawing,_=b.BaseNode,k=g.geometry,w=k.toMatrix,y=g.Color,x=g.util,C=x.isTransparent,S=x.defined,T=x.deg,D=x.round,I=x.valueOrDefault,E="none",A=".kendo",O=100,R=O*O,P="gradient",M=b.Surface.extend({init:function(e,t){b.Surface.fn.init.call(this,e,t),c.namespaces&&!c.namespaces.kvml&&(c.namespaces.add("kvml","urn:schemas-microsoft-com:vml"),(c.styleSheets.length>30?c.styleSheets[0]:c.createStyleSheet()).addRule(".kvml","behavior:url(#default#VML)")),this.element.empty(),this._root=new H,this._root.attachTo(this.element[0]),this.element.on("click"+A,this._click),this.element.on("mouseover"+A,this._mouseenter),this.element.on("mouseout"+A,this._mouseleave)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(A)),b.Surface.fn.destroy.call(this)},draw:function(e){b.Surface.fn.draw.call(this,e),this._root.load([e],void 0,null)},clear:function(){b.Surface.fn.clear.call(this),this._root.clear()}}),F=_.extend({init:function(e){_.fn.init.call(this,e),this.createElement(),this.attachReference()},observe:v,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),_.fn.destroy.call(this)},clear:function(){var e,t;for(this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),_.fn.removeSelf.call(this)},createElement:function(){this.element=c.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(e,t,n,i){var r,o,a,s,l,d;for(i=I(i,1),this.srcElement&&(i*=I(this.srcElement.options.opacity,1)),r=0;e.length>r;r++)a=(o=e[r]).children,s=o.currentTransform(n),l=i*I(o.options.opacity,1),d=new re[o.nodeType](o,s,l),a&&a.length>0&&d.load(a,t,s,i),S(t)?this.insertAt(d,t):this.append(d),d.attachTo(this.element,t)},attachTo:function(e,t){S(t)?e.insertBefore(this.element,e.children[t]||null):e.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",!1!==e.value?"":E)},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var e=[];return this.srcElement&&!1===this.srcElement.options.visible&&e.push(["display",E]),e},mapOpacityTo:function(e,t){var n=I(this.opacity,1);n*=I(t,1),e.push(["opacity",n])},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])}}),H=F.extend({createElement:function(){F.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:v}),N=g.Class.extend({init:function(e,t){this.srcElement=e,this.observer=t,e.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),$=F.extend({init:function(e){F.fn.init.call(this,e),e&&this.initClip()},observe:function(){_.fn.observe.call(this)},mapStyle:function(){var e=F.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&e.push(["clip",this.clipRect()]),e},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),F.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),F.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new N(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var e,t,n,i=d,r=this.srcElement.clip();return r&&(t=(e=this.clipBBox(r)).topLeft(),n=e.bottomRight(),i=g.format("rect({0}px {1}px {2}px {3}px)",t.y,n.x,n.y,t.x)),i},clipBBox:function(e){var t=this.srcElement.rawBBox().topLeft(),n=e.rawBBox();return n.origin.translate(-t.x,-t.y),n}}),L=$.extend({createElement:function(){F.fn.createElement.call(this),this.setStyle()},attachTo:function(e,t){this.css("display",E),F.fn.attachTo.call(this,e,t),!1!==this.srcElement.options.visible&&this.css("display","")},_attachTo:function(e){var t=document.createDocumentFragment();t.appendChild(this.element),e.appendChild(t)},mapStyle:function(){var e=$.fn.mapStyle.call(this);return e.push(["position","absolute"]),e.push(["white-space","nowrap"]),e},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),$.fn.optionsChange.call(this,e)},refreshTransform:function(e){var t,n=this.srcElement.currentTransform(e),i=this.childNodes,r=i.length;for(this.setClip(),t=0;r>t;t++)i[t].refreshTransform(n)},currentOpacity:function(){var e=I(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(e*=this.parent.currentOpacity()),e},refreshOpacity:function(){var e,t=this.childNodes,n=t.length,i=this.currentOpacity();for(e=0;n>e;e++)t[e].refreshOpacity(i)},initClip:function(){if($.fn.initClip.call(this),this.clip){var e=this.clip.srcElement.bbox(this.srcElement.currentTransform());e&&(this.css("width",e.width()+e.origin.x),this.css("height",e.height()+e.origin.y))}},clipBBox:function(e){return e.bbox(this.srcElement.currentTransform())},clearClip:function(){$.fn.clearClip.call(this)}}),z=F.extend({init:function(e,t){this.opacity=t,F.fn.init.call(this,e)},createElement:function(){this.element=t("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(e){this.opacity=e,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var e,t=this.srcElement.options.stroke,n=[];return t&&!C(t.color)&&0!==t.width?(n.push(["on","true"]),n.push(["color",t.color]),n.push(["weight",(t.width||1)+"px"]),this.mapOpacityTo(n,t.opacity),S(t.dashType)&&n.push(["dashstyle",t.dashType]),S(t.lineJoin)&&n.push(["joinstyle",t.lineJoin]),S(t.lineCap)&&("butt"===(e=t.lineCap.toLowerCase())&&(e="butt"===e?"flat":e),n.push(["endcap",e]))):n.push(["on","false"]),n}}),j=F.extend({init:function(e,t,n){this.opacity=n,F.fn.init.call(this,e)},createElement:function(){this.element=t("fill"),this.setFill()},optionsChange:function(e){o(e.field)&&this.setFill()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(e,t){var n,i=this.element;if(i){for(n=e.split(".");n.length>1;)i=i[n.shift()];i[n[0]]=t}},mapFill:function(){var e=this.srcElement.fill(),t=[["on","false"]];return e&&(e.nodeType==P?t=this.mapGradient(e):C(e.color)||(t=this.mapFillColor(e))),t},mapFillColor:function(e){var t=[["on","true"],["color",e.color]];return this.mapOpacityTo(t,e.opacity),t},mapGradient:function(e){var t=this.srcElement.options.fallbackFill||e.fallbackFill&&e.fallbackFill();return e instanceof b.LinearGradient?this.mapLinearGradient(e):e instanceof b.RadialGradient&&e.supportVML?this.mapRadialGradient(e):t?this.mapFillColor(t):[["on","false"]]},mapLinearGradient:function(e){var t=e.start(),n=e.end(),i=x.deg(h(n.y-t.y,n.x-t.x)),r=[["on","true"],["type",P],["focus",0],["method","none"],["angle",270-i]];return this.addColors(r),r},mapRadialGradient:function(e){var t=this.srcElement.rawBBox(),n=e.center(),i=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",(n.x-t.origin.x)/t.width()+" "+(n.y-t.origin.y)/t.height()],["method","none"]];return this.addColors(i),i},addColors:function(e){var t,n,i=this.srcElement.options,r=I(this.opacity,1),o=[],s=i.fill.stops,l=i.baseColor,d=this.element.colors?"colors.value":"colors",c=a(l,s[0],r),h=a(l,s[s.length-1],r);for(n=0;s.length>n;n++)t=s[n],o.push(u.round(100*t.offset())+"% "+a(l,t,r));e.push([d,o.join(",")],["color",c],["color2",h])}}),B=F.extend({init:function(e,t){this.transform=t,F.fn.init.call(this,e)},createElement:function(){this.element=t("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(e){this.transform=e,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var e=this.transform,t=[],n=w(e);return n?(n.round(4),t.push(["on","true"],["matrix",[n.a,n.c,n.b,n.d,0,0].join(",")],["offset",n.e+"px,"+n.f+"px"],["origin",this.transformOrigin()])):t.push(["on","false"]),t}}),U=$.extend({init:function(e,t,n){this.fill=this.createFillNode(e,t,n),this.stroke=new z(e,n),this.transform=this.createTransformNode(e,t),$.fn.init.call(this,e)},attachTo:function(e,t){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),F.fn.attachTo.call(this,e,t)},createFillNode:function(e,t,n){return new j(e,t,n)},createTransformNode:function(e,t){return new B(e,t)},createElement:function(){this.element=t("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){o(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),$.fn.optionsChange.call(this,e)},refreshTransform:function(e){this.transform.refresh(this.srcElement.currentTransform(e))},refreshOpacity:function(e){e*=I(this.srcElement.options.opacity,1),this.fill.refreshOpacity(e),this.stroke.refreshOpacity(e)},mapStyle:function(e,t){var n,i=$.fn.mapStyle.call(this);return e&&t||(e=t=O),i.push(["position","absolute"],["width",e+"px"],["height",t+"px"]),(n=this.srcElement.options.cursor)&&i.push(["cursor",n]),i},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",R+" "+R]])}}),V=F.extend({createElement:function(){this.element=t("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return i(this.srcElement)}}),W=U.extend({init:function(e,t,n){this.pathData=this.createDataNode(e),U.fn.init.call(this,e,t,n)},attachTo:function(e,t){this.pathData.attachTo(this.element),U.fn.attachTo.call(this,e,t)},createDataNode:function(e){return new V(e)},geometryChange:function(){this.pathData.geometryChange(),U.fn.geometryChange.call(this)}}),G=V.extend({renderData:function(){var e,t,n,r=this.srcElement.paths;if(r.length>0){for(e=[],t=0;r.length>t;t++)n=r.length-1>t,e.push(i(r[t],n));return e.join(" ")}}}),q=W.extend({createDataNode:function(e){return new G(e)}}),K=B.extend({transformOrigin:function(){var e=this.srcElement.geometry().bbox(),t=e.center();return-p(t.x)/p(e.width())+","+-p(t.y)/p(e.height())}}),Y=U.extend({createElement:function(){this.element=t("oval"),this.setStyle()},createTransformNode:function(e,t){return new K(e,t)},geometryChange:function(){U.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var e=this.srcElement.geometry(),t=e.radius,n=e.center,i=p(2*t),r=U.fn.mapStyle.call(this,i,i);return r.push(["left",p(n.x-t)+"px"],["top",p(n.y-t)+"px"]),r}}),Q=V.extend({renderData:function(){return i(this.srcElement.toPath())}}),X=W.extend({createDataNode:function(e){return new Q(e)}}),J=V.extend({createElement:function(){V.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var e=this.srcElement.rect(),t=e.center();return"m "+n([new k.Point(e.topLeft().x,t.y)])+" l "+n([new k.Point(e.bottomRight().x,t.y)])}}),Z=F.extend({createElement:function(){this.element=t("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),F.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),ee=W.extend({init:function(e,t,n){this.path=new Z(e),W.fn.init.call(this,e,t,n)},createDataNode:function(e){return new J(e)},attachTo:function(e,t){this.path.attachTo(this.element),W.fn.attachTo.call(this,e,t)},optionsChange:function(e){("font"===e.field||"content"===e.field)&&(this.path.optionsChange(e),this.pathData.geometryChange(e)),W.fn.optionsChange.call(this,e)}}),te=V.extend({renderData:function(){var e=this.srcElement.rect();return i((new b.Path).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close())}}),ne=B.extend({init:function(e,t,n){this.opacity=n,B.fn.init.call(this,e,t)},createElement:function(){this.element=t("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),B.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setOpacity:function(){var e=[];this.mapOpacityTo(e,this.srcElement.options.opacity),this.allAttr(e)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var e,t,n,i,r,o,a=this.srcElement,s=a.rawBBox(),l=s.center(),d=O/2,c=O,u=s.width()/c,p=s.height()/c,g=0,m=this.transform;return m?(n=w(m),u*=i=f(n.a*n.a+n.b*n.b),p*=r=f(n.c*n.c+n.d*n.d),0!=(g=(T(h(n.b,n.d))+T(h(-n.c,n.a)))/2)?(e=((o=a.bbox().center()).x-d)/c,t=(o.y-d)/c):(e=(l.x*i+n.e-d)/c,t=(l.y*r+n.f-d)/c)):(e=(l.x-d)/c,t=(l.y-d)/c),[["size",(u=D(u,4))+","+(p=D(p,4))],["position",(e=D(e,4))+","+(t=D(t,4))],["angle",g=D(g,4)]]}}),ie=W.extend({createFillNode:function(e,t,n){return new ne(e,t,n)},createDataNode:function(e){return new te(e)},optionsChange:function(e){("src"===e.field||"transform"===e.field)&&this.fill.optionsChange(e),W.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),W.fn.geometryChange.call(this)},refreshTransform:function(e){W.fn.refreshTransform.call(this,e),this.fill.refresh(this.srcElement.currentTransform(e))}}),re={Group:L,Text:ee,Path:W,MultiPath:q,Circle:Y,Arc:X,Image:ie};g.support.vml=function(){var e=g.support.browser;return e.msie&&9>e.version}(),d="inherit",g.support.browser.msie&&8>g.support.browser.version&&(d="rect(auto auto auto auto)"),g.support.vml&&b.SurfaceFactory.current.register("vml",M,30),m(b,{vml:{ArcDataNode:Q,ArcNode:X,CircleTransformNode:K,CircleNode:Y,FillNode:j,GroupNode:L,ImageNode:ie,ImageFillNode:ne,ImagePathDataNode:te,MultiPathDataNode:G,MultiPathNode:q,Node:F,PathDataNode:V,PathNode:W,RootNode:H,StrokeNode:z,Surface:M,TextNode:ee,TextPathNode:Z,TextPathDataNode:J,TransformNode:B}})}(window.kendo.jQuery),function(e,t,n){"use strict";function i(n,i){function o(t){var n=new Y.Group,i=t.getBoundingClientRect();return S(n,[1,0,0,1,-i.left,-i.top]),te._clipbox=!1,te._matrix=Q.Matrix.unit(),te._stackingContext={element:t,group:n},e(t).addClass("k-pdf-export"),U(t,n),e(t).removeClass("k-pdf-export"),n}function a(n,i,r,o,a,s,l){function d(){function e(){setTimeout(function(){n({pages:k,container:y})},10)}var t,i;("-"!=r||a)&&c(w),t=p(),w.parentNode.insertBefore(t,w),t.appendChild(w),b?(i=k.length,k.forEach(function(t,n){var r=b({element:t,pageNum:n+1,totalPages:k.length});r&&(t.appendChild(r),u(r,function(){0==--i&&e()}))})):e()}function c(n){var i,o,s,l,d=m(n),u=t(v(d,"padding-bottom")),p=t(v(d,"border-bottom-width")),b=x;for(x+=u+p,i=!0,o=n.firstChild;o;o=o.nextSibling)if(1==o.nodeType){if(i=!1,(s=e(o)).is(r)){h(o);continue}if(!a){c(o);continue}if(!/^(?:static|relative)$/.test(v(m(o),"position")))continue;1==(l=f(o))?h(o):l&&(s.data("kendoChart")||/^(?:img|tr|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(o.tagName))?h(o):c(o)}else 3==o.nodeType&&a&&(g(o,i),i=!1);x=b}function h(t){var n,i,r;return 1==t.nodeType&&t!==w&&function(e){var t=e.parentNode,n=t.firstChild;if(e===n)return!0;if(e===t.children[0]){if(7==n.nodeType||8==n.nodeType)return!0;if(3==n.nodeType)return!/\S/.test(n.data)}return!1}(t)?h(t.parentNode):(n=e(t).closest("table").find("colgroup"),i=p(),(r=_.createRange()).setStartBefore(w),r.setEndBefore(t),i.appendChild(r.extractContents()),w.parentNode.insertBefore(i,w),void(n[0]&&n.clone().prependTo(e(t).closest("table"))))}function p(){var t=_.createElement("KENDO-PDF-PAGE");return e(t).css({display:"block",boxSizing:"content-box",width:o||"auto",padding:s.top+"px "+s.right+"px "+s.bottom+"px "+s.left+"px",position:"relative",height:a||"auto",overflow:a||o?"hidden":"visible",clear:"both"}),l&&l.pageClassName&&(t.className=l.pageClassName),k.push(t),t}function f(e){var t,n,i=e.getBoundingClientRect();return 0===i.width||0===i.height?0:(t=w.getBoundingClientRect().top,n=a-x,i.height>n?3:i.top-t>n?1:i.bottom-t>n?2:0)}function g(e,t){var n,i,r,o,a;/\S/.test(e.data)&&(n=e.data.length,(i=_.createRange()).selectNodeContents(e),(r=f(i))&&(o=e,1==r?h(t?e.parentNode:e):(function t(n,r,o){return i.setEnd(e,r),n==r||r==o?r:f(i)?t(n,n+r>>1,r):t(r,r+o>>1,o)}(0,n>>1,n),!/\S/.test(""+i)&&t?h(e.parentNode):(o=e.splitText(i.endOffset),a=p(),i.setStartBefore(w),a.appendChild(i.extractContents()),w.parentNode.insertBefore(a,w))),g(o)))}var b=function(t){return null!=t?("string"==typeof t&&(t=kendo.template(t.replace(/^\s+|\s+$/g,""))),"function"==typeof t?function(n){var i=t(n);return i?e(i)[0]:void 0}:function(){return e(t).clone()[0]}):void 0}(l.template),_=i.ownerDocument,k=[],w=e(i).clone(!0,!0)[0],y=_.createElement("KENDO-PDF-DOCUMENT"),x=0;e(w).find("tfoot").each(function(){this.parentNode.appendChild(this)}),e(w).find("ol").each(function(){e(this).children().each(function(e){this.setAttribute("kendo-split-index",e)})}),e(y).css({display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"}),o&&(e(y).css({width:o,paddingLeft:s.left,paddingRight:s.right}),e(w).css({overflow:"hidden"})),y.appendChild(w),i.parentNode.insertBefore(y,i),l.beforePageBreak?setTimeout(function(){l.beforePageBreak(y,d)},15):setTimeout(d,15)}i||(i={});var s=e.Deferred();if(!(n=e(n)[0]))return s.reject("No element to export");if("function"!=typeof window.getComputedStyle)throw Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.");return kendo.pdf&&kendo.pdf.defineFont(r(n.ownerDocument)),u(n,function(){var e,t=i&&i.forcePageBreak,r=i&&i.paperSize&&"auto"!=i.paperSize,l=r&&kendo.pdf.getPaperOptions(function(e,t){return e in i?i[e]:t}),d=r&&l.paperSize[0],c=r&&l.paperSize[1],u=i.margin&&l.margin;t||c?(u||(u={left:0,top:0,right:0,bottom:0}),e=new Y.Group({pdf:{multiPage:!0,paperSize:r?l.paperSize:"auto"}}),a(function(t){if(i.progress){var n=!1,r=0;!function a(){t.pages.length>r?(e.append(o(t.pages[r])),i.progress({pageNum:++r,totalPages:t.pages.length,cancel:function(){n=!0}}),n?t.container.parentNode.removeChild(t.container):setTimeout(a)):(t.container.parentNode.removeChild(t.container),s.resolve(e))}()}else t.pages.forEach(function(t){e.append(o(t))}),t.container.parentNode.removeChild(t.container),s.resolve(e)},n,t,d?d-u.left-u.right:null,c?c-u.top-u.bottom:null,u,i)):s.resolve(o(n))}),s.promise()}function r(e){function t(e){if(e){var t=null;try{t=e.cssRules}catch(e){}t&&i(e,t)}}function n(e){var t,n=v(e.style,"src");return n?q(n).reduce(function(e,t){var n=K(t);return n&&e.push(n),e},[]):(t=K(e.cssText))?[t]:[]}function i(e,i){var o,a,s,l,d,c,u;for(o=0;i.length>o;++o)switch(a=i[o],a.type){case 3:t(a.styleSheet);break;case 5:s=a.style,l=q(v(s,"font-family")),d=/^(400|bold)$/i.test(v(s,"font-weight")),c="italic"==v(s,"font-style"),(u=n(a)).length>0&&r(e,l,d,c,u[0])}}function r(e,t,n,i,r){/^data:/i.test(r)||/^[^\/:]+:\/\//.test(r)||/^\//.test(r)||(r=(e.href+"").replace(/[^\/]*$/,"")+r),t.forEach(function(e){e=e.replace(/^(['"]?)(.*?)\1$/,"$2"),n&&(e+="|bold"),i&&(e+="|italic"),o[e]=r})}var o,a;for(null==e&&(e=document),o={},a=0;e.styleSheets.length>a;++a)t(e.styleSheets[a]);return o}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){var t=[],n=te;for(e="_counter_"+e;n;)o(n,e)&&t.push(n[e]),n=Object.getPrototypeOf(n);return t.reverse()}function s(e,t){var n=te;for(e="_counter_"+e;n&&!o(n,e);)n=Object.getPrototypeOf(n);n||(n=te._root),n[e]=(n[e]||0)+(null==t?1:t)}function l(e,t){te[e="_counter_"+e]=null==t?0:t}function d(e,n,i){var r,o,a;for(r=0;e.length>r;)o=e[r++],a=t(e[r]),isNaN(a)?n(o,i):(n(o,a),++r)}function c(e,t){var n=kendo.parseColor(e);return n&&(n=n.toRGB(),t?n=n.toCssRgba():0===n.a&&(n=null)),n}function u(e,t){function n(e){ee[e]||(ee[e]=!0,o.push(e))}function i(){--r<=0&&t()}var r,o=[];!function e(t){/^img$/i.test(t.tagName)&&n(t.src),G(v(m(t),"background-image")).forEach(function(e){"url"==e.type&&n(e.url)}),t.children&&X.call(t.children).forEach(e)}(e),0===(r=o.length)&&i(),o.forEach(function(e){var t=ee[e]=new Image;/^data:/i.test(e)||(t.crossOrigin="Anonymous"),t.src=e,t.complete?i():(t.onload=i,t.onerror=function(){ee[e]=null,i()})})}function h(e){for(var t={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1000:"m"},n=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";e>0;)n[0]>e?n.shift():(i+=t[n[0]],e-=n[0]);return i}function p(e){var t,i="";do{t=e%26,i=String.fromCharCode(97+t)+i,e=n.floor(e/26)}while(e>0);return i}function f(e,t,n){var i,r;(te=Object.create(te))[e.tagName.toLowerCase()]={element:e,style:t},(i=v(t,"text-decoration"))&&"none"!=i&&(r=v(t,"color"),i.split(/\s+/g).forEach(function(e){te[e]||(te[e]=r)})),function(e){function t(t){return v(e,t)}return"none"!=t("transform")||"static"!=t("position")&&"auto"!=t("z-index")||t("opacity")<1||void 0}(t)&&(te._stackingContext={element:e,group:n})}function g(e){if(null!=te._clipbox){var t=e.bbox(te._matrix);te._clipbox=te._clipbox?Q.Rect.intersect(te._clipbox,t):t}}function m(e,t){return window.getComputedStyle(e,t||null)}function v(e,t){return e.getPropertyValue(t)||J.webkit&&e.getPropertyValue("-webkit-"+t)||J.mozilla&&e.getPropertyValue("-moz-"+t)||J.opera&&e.getPropertyValue("-o-"+t)||J.msie&&e.getPropertyValue("-ms-"+t)}function b(e,t,n,i){e.setProperty(t,n,i),J.webkit?e.setProperty("-webkit-"+t,n,i):J.mozilla?e.setProperty("-moz-"+t,n,i):J.opera?e.setProperty("-o-"+t,n,i):J.msie&&(e.setProperty("-ms-"+t,n,i),e[t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,n){return t+n.toUpperCase()})]=n)}function _(e,n){return{width:t(v(e,(n="border-"+n)+"-width")),style:v(e,n+"-style"),color:c(v(e,n+"-color"),!0)}}function k(e,t){var n=e.style.cssText,i=t();return e.style.cssText=n,i}function w(e,n){var i=v(e,"border-"+n+"-radius").split(/\s+/g).map(t);return 1==i.length&&i.push(i[0]),I({x:i[0],y:i[1]})}function y(e,n,i){var r,o,a,s,l;return"string"==typeof n?(r=m(i),o=t(v(r,n.replace("*","top"))),a=t(v(r,n.replace("*","right"))),s=t(v(r,n.replace("*","bottom"))),l=t(v(r,n.replace("*","left")))):"number"==typeof n&&(o=a=s=l=n),{top:e.top+o,right:e.right-a,bottom:e.bottom-s,left:e.left+l,width:e.right-e.left-a-l,height:e.bottom-e.top-s-o}}function x(e){return 180*e/n.PI%360}function C(e){var i=t(e);return/grad$/.test(e)?n.PI*i/200:/rad$/.test(e)?i:/turn$/.test(e)?n.PI*i*2:/deg$/.test(e)?n.PI*i/180:void 0}function S(e,t){return t=new Q.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),e.transform(t),t}function T(e,t){e.clip(t)}function D(e,t,n,i){for(var r=new Q.Arc([t,n],i).curvePoints(),o=1;r.length>o;)e.curveTo(r[o++],r[o++],r[o++])}function I(e){return(0>=e.x||0>=e.y)&&(e.x=e.y=0),e}function E(e,t,i,r,o){var a=n.max(0,t.x),s=n.max(0,t.y),l=n.max(0,i.x),d=n.max(0,i.y),c=n.max(0,r.x),u=n.max(0,r.y),h=n.max(0,o.x),p=n.max(0,o.y),f=n.min(e.width/(a+l),e.height/(d+u),e.width/(c+h),e.height/(p+s));return 1>f&&(a*=f,s*=f,l*=f,d*=f,c*=f,u*=f,h*=f,p*=f),{tl:{x:a,y:s},tr:{x:l,y:d},br:{x:c,y:u},bl:{x:h,y:p}}}function A(e,n,i){var r,o,a,s,l,d,c,u,h=m(e),p=w(h,"top-left"),f=w(h,"top-right"),g=w(h,"bottom-left"),b=w(h,"bottom-right");return("padding"==i||"content"==i)&&(r=_(h,"top"),o=_(h,"right"),a=_(h,"bottom"),s=_(h,"left"),p.x-=s.width,p.y-=r.width,f.x-=o.width,f.y-=r.width,b.x-=o.width,b.y-=a.width,g.x-=s.width,g.y-=a.width,"content"==i&&(l=t(v(h,"padding-top")),d=t(v(h,"padding-right")),c=t(v(h,"padding-bottom")),u=t(v(h,"padding-left")),p.x-=u,p.y-=l,f.x-=d,f.y-=l,b.x-=d,b.y-=c,g.x-=u,g.y-=c)),"number"==typeof i&&(p.x-=i,p.y-=i,f.x-=i,f.y-=i,b.x-=i,b.y-=i,g.x-=i,g.y-=i),O(n,p,f,b,g)}function O(e,t,n,i,r){var o=E(e,t,n,i,r),a=o.tl,s=o.tr,l=o.br,d=o.bl,c=new Y.Path({fill:null,stroke:null});return c.moveTo(e.left,e.top+a.y),a.x&&D(c,e.left+a.x,e.top+a.y,{startAngle:-180,endAngle:-90,radiusX:a.x,radiusY:a.y}),c.lineTo(e.right-s.x,e.top),s.x&&D(c,e.right-s.x,e.top+s.y,{startAngle:-90,endAngle:0,radiusX:s.x,radiusY:s.y}),c.lineTo(e.right,e.bottom-l.y),l.x&&D(c,e.right-l.x,e.bottom-l.y,{startAngle:0,endAngle:90,radiusX:l.x,radiusY:l.y}),c.lineTo(e.left+d.x,e.bottom),d.x&&D(c,e.left+d.x,e.bottom-d.y,{startAngle:90,endAngle:180,radiusX:d.x,radiusY:d.y}),c.close()}function R(e,n){var i=t(e)+"";switch(n){case"decimal-leading-zero":return 2>i.length&&(i="0"+i),i;case"lower-roman":return h(e);case"upper-roman":return h(e).toUpperCase();case"lower-latin":case"lower-alpha":return p(e-1);case"upper-latin":case"upper-alpha":return p(e-1).toUpperCase();default:return i}}function P(e,t){function n(e,t,n){return n?(n=n.replace(/^\s*(["'])(.*)\1\s*$/,"$2"),a(e).map(function(e){return R(e,t)}).join(n)):R(function(e){return te[e="_counter_"+e]}(e)||0,t)}var i,r=q(t,/^\s+/),o=[];return r.forEach(function(t){var r;(i=/^\s*(["'])(.*)\1\s*$/.exec(t))?o.push(i[2].replace(/\\([0-9a-f]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})):(i=/^\s*counter\((.*?)\)\s*$/.exec(t))?(r=q(i[1]),o.push(n(r[0],r[1]))):(i=/^\s*counters\((.*?)\)\s*$/.exec(t))?(r=q(i[1]),o.push(n(r[0],r[2],r[1]))):o.push((i=/^\s*attr\((.*?)\)\s*$/.exec(t))?e.getAttribute(i[1])||"":t)}),o.join("")}function M(e){var t,n;if(e.cssText)return e.cssText;for(t=[],n=0;e.length>n;++n)t.push(e[n]+": "+v(e,e[n]));return t.join(";\n")}function F(e,n){function i(n,i){var o,a=m(e,n);a.content&&"normal"!=a.content&&"none"!=a.content&&"0px"!=a.width&&((o=e.ownerDocument.createElement(Z)).style.cssText=M(a),o.textContent=P(e,a.content),e.insertBefore(o,i),":before"!=n||/absolute|fixed/.test(v(o.style,"position"))||(o.style.marginLeft=t(v(o.style,"margin-left"))-o.offsetWidth+"px"),r.push(o))}if(e.tagName!=Z){var r=[];i(":before",e.firstChild),i(":after",null),H(e,n),r.forEach(function(t){e.removeChild(t)})}else H(e,n)}function H(i,r){function o(e,t,i,o,a,s,l,d){function c(t,r,o){var a=n.PI/2*t/(t+i),s={x:r.x-t,y:r.y-i},l=new Y.Path({fill:{color:e},stroke:null}).moveTo(0,0);S(l,o),D(l,0,r.y,{startAngle:-90,endAngle:-x(a),radiusX:r.x,radiusY:r.y}),s.x>0&&s.y>0?(l.lineTo(s.x*n.cos(a),r.y-s.y*n.sin(a)),D(l,0,r.y,{startAngle:-x(a),endAngle:-90,radiusX:s.x,radiusY:s.y,anticlockwise:!0})):s.x>0?l.lineTo(s.x,i).lineTo(0,i):l.lineTo(s.x,i).lineTo(s.x,0),h.append(l.close())}if(!(0>=i)){var u,h=new Y.Group;S(h,d),r.append(h),I(s),I(l),u=new Y.Path({fill:{color:e},stroke:null}),h.append(u),u.moveTo(s.x?n.max(s.x,o):0,0).lineTo(t-(l.x?n.max(l.x,a):0),0).lineTo(t-n.max(l.x,a),i).lineTo(n.max(s.x,o),i).close(),s.x&&c(o,s,[-1,0,0,1,s.x,0]),l.x&&c(a,l,[1,0,0,1,t-l.x,0])}}function a(t){var n,o,a=new Y.Group;for(T(a,O(t,B,V,K,W)),r.append(a),"A"==i.tagName&&i.href&&!/^#?$/.test(e(i).attr("href"))&&(a._pdfLink={url:i.href,top:t.top,right:t.right,bottom:t.bottom,left:t.left}),ie&&((n=new Y.Path({fill:{color:ie.toCssRgba()},stroke:null})).moveTo(t.left,t.top).lineTo(t.right,t.top).lineTo(t.right,t.bottom).lineTo(t.left,t.bottom).close(),a.append(n)),o=d.length;--o>=0;)s(a,t,d[o],u[o%u.length],f[o%f.length],b[o%b.length],C[o%C.length])}function s(e,n,r,o,a,s,l){function d(e,n,r,d,c){function u(){for(;m.origin.x>n.left;)m.origin.x-=r}function h(){for(;m.origin.y>n.top;)m.origin.y-=d}function p(){for(;n.right>m.origin.x;)c(e,m.clone()),m.origin.x+=r}var f,g,m,v,b=r/d,_=n;if("content-box"==s?(_=y(_,"border-*-width",i),_=y(_,"padding-*",i)):"padding-box"==s&&(_=y(_,"border-*-width",i)),/^\s*auto(\s+auto)?\s*$/.test(l)||(f=l.split(/\s+/g),r=/%$/.test(f[0])?_.width*t(f[0])/100:t(f[0]),d=1==f.length||"auto"==f[1]?r/b:/%$/.test(f[1])?_.height*t(f[1])/100:t(f[1])),1==(g=(a+"").split(/\s+/)).length&&(g[1]="50%"),g[0]=/%$/.test(g[0])?t(g[0])/100*(_.width-r):t(g[0]),g[1]=/%$/.test(g[1])?t(g[1])/100*(_.height-d):t(g[1]),m=new Q.Rect([_.left+g[0],_.top+g[1]],[r,d]),"no-repeat"==o)c(e,m);else if("repeat-x"==o)u(),p();else if("repeat-y"==o)for(h();n.bottom>m.origin.y;)c(e,m.clone()),m.origin.y+=d;else if("repeat"==o)for(u(),h(),v=m.origin.clone();n.bottom>m.origin.y;)m.origin.x=v.x,p(),m.origin.y+=d}if(r&&"none"!=r)if("url"==r.type){if(/^url\(\"data:image\/svg/i.test(r.url))return;var c=ee[r.url];c&&c.width>0&&c.height>0&&d(e,n,c.width,c.height,function(e,t){e.append(new Y.Image(r.url,t))})}else{if("linear"!=r.type)return;d(e,n,n.width,n.height,N(r))}}function l(e,t,n){function s(e){return{x:e.y,y:e.x}}var l,d,c,u,h,p,f,g;if(0!==e.width&&0!==e.height&&(a(e),l=z.width>0&&(t&&"ltr"==ne||n&&"rtl"==ne),d=$.width>0&&(n&&"ltr"==ne||t&&"rtl"==ne),0!==H.width||0!==z.width||0!==$.width||0!==L.width)){if(H.color==$.color&&H.color==L.color&&H.color==z.color&&H.width==$.width&&H.width==L.width&&H.width==z.width&&l&&d)return e=y(e,H.width/2),(c=A(i,e,H.width/2)).options.stroke={color:H.color,width:H.width},void r.append(c);if(0===B.x&&0===V.x&&0===K.x&&0===W.x&&2>H.width&&2>z.width&&2>$.width&&2>L.width)return H.width>0&&r.append(new Y.Path({stroke:{width:H.width,color:H.color}}).moveTo(e.left,e.top+H.width/2).lineTo(e.right,e.top+H.width/2)),L.width>0&&r.append(new Y.Path({stroke:{width:L.width,color:L.color}}).moveTo(e.left,e.bottom-L.width/2).lineTo(e.right,e.bottom-L.width/2)),l&&r.append(new Y.Path({stroke:{width:z.width,color:z.color}}).moveTo(e.left+z.width/2,e.top).lineTo(e.left+z.width/2,e.bottom)),void(d&&r.append(new Y.Path({stroke:{width:$.width,color:$.color}}).moveTo(e.right-$.width/2,e.top).lineTo(e.right-$.width/2,e.bottom)));h=(u=E(e,B,V,K,W)).tl,p=u.tr,f=u.br,g=u.bl,o(H.color,e.width,H.width,z.width,$.width,h,p,[1,0,0,1,e.left,e.top]),o(L.color,e.width,L.width,$.width,z.width,f,g,[-1,0,0,-1,e.right,e.bottom]),o(z.color,e.height,z.width,L.width,H.width,s(g),s(h),[0,-1,1,0,e.left,e.bottom]),o($.color,e.height,$.width,H.width,L.width,s(p),s(f),[0,1,-1,0,e.right,e.top])}}var d,u,f,b,C,R,P,M,F=m(i),H=_(F,"top"),$=_(F,"right"),L=_(F,"bottom"),z=_(F,"left"),B=w(F,"top-left"),V=w(F,"top-right"),W=w(F,"bottom-left"),K=w(F,"bottom-right"),ne=v(F,"direction"),ie=v(F,"background-color");for(ie=c(ie),d=G(v(F,"background-image")),u=q(v(F,"background-repeat")),f=q(v(F,"background-position")),b=q(v(F,"background-origin")),C=q(v(F,"background-size")),J.msie&&10>J.version&&(f=q(i.currentStyle.backgroundPosition)),R=y(i.getBoundingClientRect(),"border-*-width",i),function(){var e,n,i,o,a,s,l,d=v(F,"clip"),c=/^\s*rect\((.*)\)\s*$/.exec(d);c&&(n="auto"==(e=c[1].split(/[ ,]+/g))[0]?R.top:t(e[0])+R.top,i="auto"==e[1]?R.right:t(e[1])+R.left,o="auto"==e[2]?R.bottom:t(e[2])+R.top,a="auto"==e[3]?R.left:t(e[3])+R.left,T(s=new Y.Group,l=(new Y.Path).moveTo(a,n).lineTo(i,n).lineTo(i,o).lineTo(a,o).close()),r.append(s),r=s,g(l))}(),1==(P=i.getClientRects()).length&&(P=[i.getBoundingClientRect()]),P=function(e){var t,n,r,o,a;if(/^td$/i.test(i.tagName)&&(t=te.table)&&"collapse"==v(t.style,"border-collapse")){if(n=_(t.style,"left").width,r=_(t.style,"top").width,0===n&&0===r)return e;if(o=t.element.getBoundingClientRect(),(a=t.element.rows[0].cells[0].getBoundingClientRect()).top==o.top||a.left==o.left)return X.call(e).map(function(e){return{left:e.left+n,top:e.top+r,right:e.right+n,bottom:e.bottom+r,height:e.height,width:e.width}})}return e}(P),M=0;P.length>M;++M)l(P[M],0===M,M==P.length-1);return P.length>0&&"list-item"==v(F,"display")&&function(){function e(e){k(i,function(){i.style.position="relative";var t=i.ownerDocument.createElement(Z);t.style.position="absolute",t.style.boxSizing="border-box","outside"==n?(t.style.width="6em",t.style.left="-6.8em",t.style.textAlign="right"):t.style.left="0px",e(t),i.insertBefore(t,i.firstChild),U(t,r),i.removeChild(t)})}function t(e){var t,n=i.parentNode.children,r=i.getAttribute("kendo-split-index");if(null!=r)return e(0|r,n.length);for(t=0;n.length>t;++t)if(n[t]===i)return e(t,n.length)}var n,o=v(F,"list-style-type");if("none"!=o)switch(v(F,"list-style-image"),n=v(F,"list-style-position"),o){case"circle":case"disc":case"square":e(function(e){e.style.fontSize="60%",e.style.lineHeight="200%",e.style.paddingRight="0.5em",e.style.fontFamily="DejaVu Serif",e.innerHTML={disc:"",circle:"",square:""}[o]});break;case"decimal":case"decimal-leading-zero":e(function(e){t(function(t){++t,"decimal-leading-zero"==o&&2>(t+"").length&&(t="0"+t),e.innerHTML=t+"."})});break;case"lower-roman":case"upper-roman":e(function(e){t(function(t){t=h(t+1),"upper-roman"==o&&(t=t.toUpperCase()),e.innerHTML=t+"."})});break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":e(function(e){t(function(t){t=p(t),/^upper/i.test(o)&&(t=t.toUpperCase()),e.innerHTML=t+"."})})}}(P[0]),function(){function e(){var e=A(i,R,"padding"),t=new Y.Group;T(t,e),r.append(t),r=t,g(e)}!function(e){return/^(?:textarea|select|input)$/i.test(e.tagName)}(i)?/^(hidden|auto|scroll)/.test(v(F,"overflow"))?e():/^(hidden|auto|scroll)/.test(v(F,"overflow-x"))?e():/^(hidden|auto|scroll)/.test(v(F,"overflow-y"))&&e():e()}(),function(t,n){var i,r,o,a;return t.getAttribute(kendo.attr("role"))&&(i=kendo.widgetInstance(e(t)))&&(i.exportDOMVisual||i.exportVisual)?!!(r=i.exportDOMVisual?i.exportDOMVisual():i.exportVisual())&&((o=new Y.Group).children.push(r),a=t.getBoundingClientRect(),o.transform(Q.transform().translate(a.left,a.top)),n.append(o),!0):void 0}(i,r)||j(i,r),r}function N(e){return function(i,r){var o,a,s,l,d,c,u,h,p,f,g,m,v,b=r.width(),_=r.height();switch(r.topLeft(),e.type){case"linear":switch(o=null!=e.angle?e.angle:n.PI,e.to){case"top":o=0;break;case"left":o=-n.PI/2;break;case"bottom":o=n.PI;break;case"right":o=n.PI/2;break;case"top left":case"left top":o=-n.atan2(_,b);break;case"top right":case"right top":o=n.atan2(_,b);break;case"bottom left":case"left bottom":o=n.PI+n.atan2(_,b);break;case"bottom right":case"right bottom":o=n.PI-n.atan2(_,b)}e.reverse&&(o-=n.PI),0>(o%=2*n.PI)&&(o+=2*n.PI),a=n.abs(b*n.sin(o))+n.abs(_*n.cos(o)),s=n.atan(b*n.tan(o)/_),l=n.sin(s),d=n.cos(s),u=(c=n.abs(l)+n.abs(d))/2*l,h=c/2*d,o>n.PI/2&&3*n.PI/2>=o&&(u=-u,h=-h),p=[],f=0,g=e.stops.map(function(n,i){var r,o=n.percent;return o?o=t(o)/100:n.length?o=t(n.length)/a:0===i?o=0:i==e.stops.length-1&&(o=1),r={color:n.color.toCssRgba(),offset:o},null!=o?(f=o,p.forEach(function(e,t){e.stop.offset=e.left+(f-e.left)*(t+1)/(p.length+1)}),p=[]):p.push({left:f,stop:r}),r}),m=[.5-u,.5+h],v=[.5+u,.5-h],i.append(Y.Path.fromRect(r).stroke(null).fill(new Y.LinearGradient({start:m,end:v,stops:g,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}function $(e,t,n){var i=function(e){var t=e.getBoundingClientRect();return t=y(t,"border-*-width",e),y(t,"padding-*",e)}(e),r=new Q.Rect([i.left,i.top],[i.width,i.height]),o=new Y.Image(t,r);T(o,A(e,i,"content")),n.append(o)}function L(e,n){var i=m(e),r=m(n),o=t(v(i,"z-index")),a=t(v(r,"z-index")),s=v(i,"position"),l=v(r,"position");return isNaN(o)&&isNaN(a)?/static|absolute/.test(s)&&/static|absolute/.test(l)?0:"static"==s?-1:"static"==l?1:0:isNaN(o)?0===a?0:a>0?-1:1:isNaN(a)?0===o?0:o>0?1:-1:t(o)-t(a)}function z(e,t){var i=v(m(e),"color"),r=e.getBoundingClientRect();"checkbox"==e.type?(t.append(Y.Path.fromRect(new Q.Rect([r.left+1,r.top+1],[r.width-2,r.height-2])).stroke(i,1)),e.checked&&t.append((new Y.Path).stroke(i,1.2).moveTo(r.left+.22*r.width,r.top+.55*r.height).lineTo(r.left+.45*r.width,r.top+.75*r.height).lineTo(r.left+.78*r.width,r.top+.22*r.width))):(t.append(new Y.Circle(new Q.Circle([(r.left+r.right)/2,(r.top+r.bottom)/2],n.min(r.width-2,r.height-2)/2)).stroke(i,1)),e.checked&&t.append(new Y.Circle(new Q.Circle([(r.left+r.right)/2,(r.top+r.bottom)/2],n.min(r.width-8,r.height-8)/2)).fill(i).stroke(null)))}function j(e,t){var n,i,r,o,a,s,l,d;switch(te._stackingContext.element===e&&(te._stackingContext.group=t),e.tagName.toLowerCase()){case"img":$(e,e.src,t);break;case"canvas":try{$(e,e.toDataURL("image/png"),t)}catch(e){}break;case"textarea":case"input":case"select":!function(e,t){var n,i,r,o,a,s=e.tagName.toLowerCase();if("input"==s&&("checkbox"==e.type||"radio"==e.type))return z(e,t);if(n=e.parentNode,(r=(i=e.ownerDocument).createElement(Z)).style.cssText=M(m(e)),r.style.display="inline-block","input"==s&&(r.style.whiteSpace="pre"),("select"==s||"textarea"==s)&&(r.style.overflow="auto"),"select"==s)if(e.multiple)for(a=0;e.options.length>a;++a)(o=i.createElement(Z)).style.cssText=M(m(e.options[a])),o.style.display="block",o.textContent=e.options[a].textContent,r.appendChild(o);else(o=function(e){return e.selectedOptions&&e.selectedOptions.length>0?e.selectedOptions[0]:e.options[e.selectedIndex]}(e))&&(r.textContent=o.textContent);else r.textContent=e.value;n.insertBefore(r,e),r.scrollLeft=e.scrollLeft,r.scrollTop=e.scrollTop,j(r,t),n.removeChild(r)}(e,t);break;default:for(n=[],i=[],r=[],o=[],a=e.firstChild;a;a=a.nextSibling)switch(a.nodeType){case 3:/\S/.test(a.data)&&B(e,a,t);break;case 1:l=v(s=m(a),"display"),d=v(s,"float"),"static"!=v(s,"position")?o.push(a):"inline"!=l?"none"!=d?i.push(a):n.push(a):r.push(a)}n.sort(L).forEach(function(e){U(e,t)}),i.sort(L).forEach(function(e){U(e,t)}),r.sort(L).forEach(function(e){U(e,t)}),o.sort(L).forEach(function(e){U(e,t)})}}function B(e,i,r){function o(){var e,t,r,o,s,u,h,p=d,f=l.substr(d).search(/\S/);if(d+=f,0>f||d>=c)return!0;if(g.setStart(i,d),g.setEnd(i,d+1),e=g.getBoundingClientRect(),t=!1,_&&(f=l.substr(d).search(/\s/))>=0&&(g.setEnd(i,d+f),(r=g.getBoundingClientRect()).bottom==e.bottom&&(e=r,t=!0,d+=f)),!t){if((f=function t(n,r,o){g.setEnd(i,r);var a=function(e){if(J.msie||J.chrome){var t=e.getClientRects();if(2==t.length&&1>=t[1].width)return t[0];if(3==t.length&&1>=t[0].width&&1>=t[2].width)return t[1]}return e.getBoundingClientRect()}(g);return a.bottom!=e.bottom&&r>n?t(n,n+r>>1,r):a.right!=e.right?(e=a,o>r?t(r,r+o>>1,o):r):r}(d,n.min(c,d+w),c))==d)return!0;if(d=f,0===(f=(""+g).search(/\s+$/)))return;f>0&&(g.setEnd(i,g.startOffset+f),e=g.getBoundingClientRect())}if(J.msie&&(e=g.getClientRects()[0]),o=""+g,/^(?:pre|pre-wrap)$/i.test(k)){if(/\t/.test(o)){for(s=0,f=p;g.startOffset>f;++f)9==(u=l.charCodeAt(f))?s+=8-s%8:10==u||13==u?s=0:s++;for(;(f=o.search("\t"))>=0;)h="        ".substr(0,8-(s+f)%8),o=o.substr(0,f)+h+o.substr(f+1)}}else o=o.replace(/\s+/g," ");a(o,e)}function a(e,t){var n,i,o;J.msie&&!isNaN(h)&&(n=Y.util.measureText(e,{font:p}),t={top:i=(t.top+t.bottom-n.height)/2,right:t.right,bottom:i+n.height,left:t.left,height:n.height,width:t.right-t.left}),o=new W(e,new Q.Rect([t.left,t.top],[t.width,t.height]),{font:p,fill:{color:f}}),r.append(o),function(e){function t(t,n){var i,o;t&&(i=u/12,o=new Y.Path({stroke:{width:i,color:t}}),n-=i,o.moveTo(e.left,n).lineTo(e.right,n),r.append(o))}t(te.underline,e.bottom),t(te["line-through"],e.bottom-e.height/2.7),t(te.overline,e.top)}(t)}var s,l,d,c,u,h,p,f,g,b,_,k,w;if(!function(){var e=te._clipbox;return null==e||(e?0===e.width()||0===e.height():void 0)}()&&(s=m(e),!(t(v(s,"text-indent"))<-500)&&(l=i.data,d=0,(c=l.search(/\S\s*$/)+1)&&(u=v(s,"font-size"),h=v(s,"line-height"),p=[v(s,"font-style"),v(s,"font-variant"),v(s,"font-weight"),u,v(s,"font-family")].join(" "),u=t(u),h=t(h),0!==u))))for(f=v(s,"color"),g=e.ownerDocument.createRange(),b=v(s,"text-align"),_="justify"==b,k=v(s,"white-space"),0==(w=e.getBoundingClientRect().width/u*5)&&(w=500);!o(););}function U(e,n){var i,r,o,a,c,u,h,p=m(e),g=v(p,"counter-reset");g&&d(q(g,/^\s+/),l,0),(i=v(p,"counter-increment"))&&d(q(i,/^\s+/),s,1),/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(e.tagName)||null!=te._clipbox&&(r=t(v(p,"opacity")),o=v(p,"visibility"),a=v(p,"display"),0!==r&&"hidden"!=o&&"none"!=a&&(c=function(e){var n,i,r=v(e,"transform");return"none"==r?null:(n=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(r))?(i=v(e,"transform-origin"),{matrix:n=n[1].split(/\s*,\s*/g).map(t),origin:i=i.split(/\s+/g).map(t)}):void 0}(p),h=v(p,"z-index"),(c||1>r)&&"auto"==h&&(h=0),u=function(e,n,i){var r,o,a,s,l,d;for("auto"!=i?(r=te._stackingContext.group,i=t(i)):(r=n,i=0),o=r.children,a=0;o.length>a&&!(null!=o[a]._dom_zIndex&&o[a]._dom_zIndex>i);++a);return s=new Y.Group,r.insertAt(s,a),s._dom_zIndex=i,r!==n&&te._clipbox&&(l=te._matrix.invert(),d=te._clipbox.transformCopy(l),T(s,Y.Path.fromRect(d))),s}(0,n,h),1>r&&u.opacity(r*u.opacity()),f(e,p,u),c?k(e,function(){var t,n,i,r;b(e.style,"transform","none","important"),b(e.style,"transition","none","important"),"static"==v(p,"position")&&b(e.style,"position","relative","important"),r=V(r=[1,0,0,1,-(n=(t=e.getBoundingClientRect()).left+c.origin[0]),-(i=t.top+c.origin[1])],c.matrix),r=V(r,[1,0,0,1,n,i]),r=S(u,r),te._matrix=te._matrix.multiplyCopy(r),F(e,u)}):F(e,u),te=Object.getPrototypeOf(te)))}function V(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],d=t[1],c=t[2],u=t[3];return[n*l+i*c,n*d+i*u,r*l+o*c,r*d+o*u,a*l+s*c+t[4],a*d+s*u+t[5]]}var W,G,q,K,Y=kendo.drawing,Q=kendo.geometry,X=Array.prototype.slice,J=kendo.support.browser,Z="KENDO-PSEUDO-ELEMENT",ee={},te={};te._root=te,W=Y.Text.extend({nodeType:"Text",init:function(e,t,n){Y.Text.fn.init.call(this,e,t.getOrigin(),n),this._pdfRect=t},rect:function(){return this._pdfRect},rawBBox:function(){return this._pdfRect}}),Y.drawDOM=i,i.getFontFaces=r,G=function(){function e(e){function f(t){!function(){var t=s.exec(e);t&&(e=e.substr(t[1].length))}();var n=t.exec(e);return n?(e=e.substr(n[1].length),n[1]):void 0}function g(){var t,r,o=kendo.parseColor(e,!0);return o?(e=e.substr(o.match[0].length),o=o.toRGB(),(t=f(i))||(r=f(n)),{color:o,length:t,percent:r}):void 0}var m,v=e;return o(p,v)?p[v]:((m=f(t))?m=function(t){var i,o,s,u,h,p,m=[],v=!1;if(f(l)){for((i=f(a))?(i=C(i),f(c)):("to"==(o=f(r))?o=f(r):o&&/^-/.test(t)&&(v=!0),s=f(r),f(c)),/-moz-/.test(t)&&null==i&&null==o&&(v=!0,"0%"==(u=f(n))?o="left":"100%"==u&&(o="right"),"0%"==(h=f(n))?s="top":"100%"==h&&(s="bottom"),f(c));e&&!f(d)&&(p=g());)m.push(p),f(c);return{type:"linear",angle:i,to:o&&s?o+" "+s:o||s||null,stops:m,reverse:v}}}(m):(m=f(u))&&(m=function(){if(f(l)){var e=f(h);return e=e.replace(/^['"]+|["']+$/g,""),f(d),{type:"url",url:e}}}()),p[v]=m||{type:"none"})}var t=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,n=/^([-0-9.]+%)/,i=/^([-0-9.]+px)/,r=/^(left|right|top|bottom|to|center)\W/,a=/^([-0-9.]+(deg|grad|rad|turn))/,s=/^(\s+)/,l=/^(\()/,d=/^(\))/,c=/^(,)/,u=/^(url)\(/,h=/^(.*?)\)/,p={},f={};return function(t){return o(f,t)?f[t]:f[t]=q(t).map(e)}}(),q=function(){var e={};return function(t,n){function i(e){return h=e.exec(t.substr(d))}function r(e){return e.replace(/^\s+|\s+$/g,"")}var a,s,l,d,c,u,h;if(n||(n=/^\s*,\s*/),o(e,a=t+n))return e[a];for(s=[],l=0,d=0,c=0,u=!1;t.length>d;)!u&&i(/^[\(\[\{]/)?(c++,d++):!u&&i(/^[\)\]\}]/)?(c--,d++):!u&&i(/^[\"\']/)?(u=h[0],d++):"'"==u&&i(/^\\\'/)?d+=2:'"'==u&&i(/^\\\"/)?d+=2:"'"==u&&i(/^\'/)?(u=!1,d++):'"'==u&&i(/^\"/)?(u=!1,d++):i(n)?(!u&&!c&&d>l&&(s.push(r(t.substring(l,d))),l=d+h[0].length),d+=h[0].length):d++;return d>l&&s.push(r(t.substring(l,d))),e[a]=s}}(),K=function(){var e={};return function(t){var n,i=e[t];return i||((n=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(t))?i=e[t]=n[2]:(n=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(t))&&(i=e[t]=n[2])),i}}()}(window.kendo.jQuery,parseFloat,Math),function(e){var t=e.noop,n=window.kendo,i=n.Class,r=n.util,o=n.animationFrame,a=n.deepExtend,s=i.extend({init:function(e,t){var n=this;n.options=a({},n.options,t),n.element=e},options:{duration:500,easing:"swing"},setup:t,step:t,play:function(){var t=this,n=t.options,i=e.easing[n.easing],a=n.duration,s=n.delay||0,l=r.now()+s,d=l+a;0===a?(t.step(1),t.abort()):setTimeout(function(){var e=function(){var n,s,c;t._stopped||(n=r.now(),s=r.limitValue(n-l,0,a),c=i(s/a,s,0,1,a),t.step(c),d>n?o(e):t.abort())};e()},s)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),l=function(){this._items=[]};l.prototype={register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var n,i,r,o=this._items;if(t&&t.type)for(i=t.type.toLowerCase(),r=0;o.length>r;r++)if(o[r].name.toLowerCase()===i){n=o[r];break}return n?new n.type(e,t):void 0}},l.current=new l,s.create=function(e,t,n){return l.current.create(e,t,n)},a(n.drawing,{Animation:s,AnimationFactory:l})}(window.kendo.jQuery,Math),function(e){function t(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function n(t,n){var i,o,a,s=e();for(o=0,a=t.length;a>o;o++)i=t[o],l.test(i.className)&&i.getAttribute(r.attr("for"))===n&&(s=s.add(i));return s}var i,r=window.kendo,o=r.ui.Widget,a=".kendoValidator",s="k-invalid-msg",l=RegExp(s,"i"),d=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,c=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,u=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",h=":checkbox:not([disabled],[readonly])",p="[type=number],[type=range]",f="blur",g="name",m="form",v="novalidate",b=e.proxy,_=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},k=function(e,t,n){var i=e.val();return!e.filter(t).length||""===i||_(i,n)};r.ui.validator||(r.ui.validator={rules:{},messages:{}}),i=o.extend({init:function(t,n){var i=this,a=function(t){var n,i=r.ui.validator.ruleResolvers||{},o={};for(n in i)e.extend(!0,o,i[n].resolve(t));return o}(t),s="["+r.attr("validate")+"!=false]";(n=n||{}).rules=e.extend({},r.ui.validator.rules,a.rules,n.rules),n.messages=e.extend({},r.ui.validator.messages,a.messages,n.messages),o.fn.init.call(i,t,n),i._errorTemplate=r.template(i.options.errorTemplate),i.element.is(m)&&i.element.attr(v,v),i._inputSelector=u+s,i._checkboxSelector=h+s,i._errors={},i._attachEvents(),i._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),n=e.val();return!(function(e,t){return!!e.length&&null!=e[0].attributes[t]}(e,"required")&&(""===n||!n||t))},pattern:function(e){return!e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length||""===e.val()||_(e.val(),e.attr("pattern"))},min:function(e){if(e.filter(p+",["+r.attr("type")+"=number]").filter("[min]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0;return r.parseFloat(e.val())>=t}return!0},max:function(e){return!e.filter(p+",["+r.attr("type")+"=number]").filter("[max]").length||""===e.val()||(parseFloat(e.attr("max"))||0)>=r.parseFloat(e.val())},step:function(e){if(e.filter(p+",["+r.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,n=parseFloat(e.attr("min"))||0,i=parseFloat(e.attr("step"))||1,o=parseFloat(e.val()),a=function(e){return(e=(e+"").split(".")).length>1?e[1].length:0}(i);return a?(t=Math.pow(10,a),Math.floor((o-n)*t)%(i*t)/Math.pow(100,a)==0):(o-n)%i==0}return!0},email:function(e){return k(e,"[type=email],["+r.attr("type")+"=email]",d)},url:function(e){return k(e,"[type=url],["+r.attr("type")+"=url]",c)},date:function(e){return!e.filter("[type^=date],["+r.attr("type")+"=date]").length||""===e.val()||null!==r.parseDate(e.val(),e.attr(r.attr("format")))}},validateOnBlur:!0},destroy:function(){o.fn.destroy.call(this),this.element.off(a)},value:function(){return!!this._isValidated&&0===this.errors().length},_submit:function(e){return!!this.validate()||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger("change")},_attachEvents:function(){var t=this;t.element.is(m)&&t.element.on("submit"+a,b(t._submit,t)),t.options.validateOnBlur&&(t.element.is(u)?(t.element.on(f+a,function(){t._checkElement(t.element)}),t.element.is(h)&&t.element.on("click"+a,function(){t._checkElement(t.element)})):(t.element.on(f+a,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+a,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,n,i,r=!1,o=this.value();if(this._errors={},this.element.is(u))r=this.validateInput(this.element);else{for(i=!1,t=0,n=(e=this.element.find(this._inputSelector)).length;n>t;t++)this.validateInput(e.eq(t))||(i=!0);r=!i}return this.trigger("validate",{valid:r}),o!==r&&this.trigger("change"),r},validateInput:function(n){var i,o,a,s,l,d,c,u,h;return n=e(n),this._isValidated=!0,o=(i=this)._errorTemplate,s=(a=i._checkValidity(n)).valid,l=n.attr(g)||"",d=i._findMessageContainer(l).add(n.next(".k-invalid-msg").filter(function(){var t=e(this);return!t.filter("["+r.attr("for")+"]").length||t.attr(r.attr("for"))===l})).hide(),n.removeAttr("aria-invalid"),s?delete i._errors[l]:(c=i._extractMessage(n,a.key),i._errors[l]=c,u=function(t){return e(e.parseHTML?e.parseHTML(t):t)}(o({message:t(c)})),h=d.attr("id"),i._decorateMessageContainer(u,l),h&&u.attr("id",h),d.replaceWith(u).length||u.insertAfter(n),u.show(),n.attr("aria-invalid",!0)),n.toggleClass("k-invalid",!s),n.toggleClass("k-valid",s),s},hideMessages:function(){var e="."+s,t=this.element;t.is(u)?t.next(e).hide():t.find(e).hide()},_findMessageContainer:function(t){var i,o,a,s=r.ui.validator.messageLocators,l=e();for(o=0,a=this.element.length;a>o;o++)l=l.add(n(this.element[o].getElementsByTagName("*"),t));for(i in s)l=l.add(s[i].locate(this.element,t));return l},_decorateMessageContainer:function(e,t){var n,i=r.ui.validator.messageLocators;for(n in e.addClass(s).attr(r.attr("for"),t||""),i)i[n].decorate(e,t);e.attr("role","alert")},_extractMessage:function(e,t){var n=this.options.messages[t],i=e.attr(g);return n=r.isFunction(n)?n(e):n,r.format(e.attr(r.attr(t+"-msg"))||e.attr("validationMessage")||e.attr("title")||n||"",i,e.attr(t))},_checkValidity:function(e){var t,n=this.options.rules;for(t in n)if(!n[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],n=this._errors;for(e in n)t.push(n[e]);return t}}),r.ui.plugin(i)}(window.kendo.jQuery),function(e){function t(e,t){var n=e.x.location,i=e.y.location,r=t.x.location,o=t.y.location,a=n-r,s=i-o;return{center:{x:(n+r)/2,y:(i+o)/2},distance:Math.sqrt(a*a+s*s)}}function n(e){var t,n,i,r=[],a=e.originalEvent,s=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(t=(n=a?a.changedTouches:[]).length;t>l;l++)i=n[l],r.push({location:i,event:e,target:i.target,currentTarget:s,id:i.identifier,type:"touch"});else r.push(o.pointers||o.msPointers?{location:a,event:e,target:e.target,currentTarget:s,id:a.pointerId,type:"pointer"}:{id:1,event:e,target:e.target,currentTarget:s,location:e,type:"mouse"});return r}function i(e){for(var t=r.eventMap.up.split(" "),n=0,i=t.length;i>n;n++)e(t[n])}var r=window.kendo,o=r.support,a=window.document,s=r.Class,l=r.Observable,d=e.now,c=e.extend,u=o.mobileOS,h=u&&u.android,p=800,f=o.browser.msie?5:0,g="press",m="hold",v="select",b="start",_="move",k="end",w="cancel",y="tap",x="release",C="gesturechange",S="gestureend",T="gesturetap",D={api:0,touch:0,mouse:9,pointer:9},I=!o.touch||o.mouseAndTouchPresent,E=s.extend({init:function(e,t){var n=this;n.axis=e,n._updateLocationData(t),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=d()},move:function(e){var t=this,n=e["page"+t.axis],i=d(),r=i-t.timeStamp||1;(n||!h)&&(t.delta=n-t.location,t._updateLocationData(e),t.initialDelta=n-t.startLocation,t.velocity=t.delta/r,t.timeStamp=i)},_updateLocationData:function(e){var t=this,n=t.axis;t.location=e["page"+n],t.client=e["client"+n],t.screen=e["screen"+n]}}),A=s.extend({init:function(e,t,n){c(this,{x:new E("X",n.location),y:new E("Y",n.location),type:n.type,threshold:e.threshold||D[n.type],userEvents:e,target:t,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,pressEvent:n,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(e.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(g,this.pressEvent)},_hold:function(){this._trigger(m,this.pressEvent)},move:function(e){var t=this;if(!t._finished){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(O.current&&O.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(_,e)}},end:function(e){var t=this;t.endTime=d(),t._finished||(t._finished=!0,t._trigger(x,e),t._moved?t._trigger(k,e):t._trigger(y,e),clearTimeout(t._holdTimeout),t.dispose())},dispose:function(){var t=this.userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),t.splice(e.inArray(this,t),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=d(),this._moved=!0,this._trigger(b,e)},_trigger:function(e,t){var n=this,i=t.event,r={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(e,r)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}),O=l.extend({init:function(t,n){var s,d,u,h=this,D=r.guid();n=n||{},s=h.filter=n.filter,h.threshold=n.threshold||f,h.minHold=n.minHold||p,h.touches=[],h._maxTouches=n.multiTouch?2:1,h.allowSelection=n.allowSelection,h.captureUpIfMoved=n.captureUpIfMoved,h.eventNS=D,t=e(t).handler(h),l.fn.init.call(h),c(h,{element:t,surface:e(n.global&&I?a.documentElement:n.surface||t),stopPropagation:n.stopPropagation,pressed:!1}),h.surface.handler(h).on(r.applyEventMap("move",D),"_move").on(r.applyEventMap("up cancel",D),"_end"),t.on(r.applyEventMap("down",D),s,"_start"),(o.pointers||o.msPointers)&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),n.preventDragEvent&&t.on(r.applyEventMap("dragstart",D),r.preventDefault),t.on(r.applyEventMap("mousedown",D),s,{root:t},"_select"),h.captureUpIfMoved&&o.eventCapture&&(d=h.surface[0],u=e.proxy(h.preventIfMoving,h),i(function(e){d.addEventListener(e,u,!0)})),h.bind([g,m,y,b,_,k,x,w,"gesturestart",C,S,T,v],n)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e,t=this;t._destroyed||(t._destroyed=!0,t.captureUpIfMoved&&o.eventCapture&&(e=t.surface[0],i(function(n){e.removeEventListener(n,t.preventIfMoving)})),t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget)},capture:function(){O.current=this},cancel:function(){this._disposeAll(),this.trigger(w)},notify:function(e,n){var i=this.touches;if(this._isMultiTouch()){switch(e){case _:e=C;break;case k:e=S;break;case y:e=T}c(n,{touches:i},t(i[0],i[1]))}return this.trigger(e,c(n,{type:e}))},press:function(e,t,n){this._apiCall("_start",e,t,n)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(v,{event:e}))&&e.preventDefault()},_start:function(t){var i,r,o=this,a=0,s=o.filter,l=n(t),d=l.length,c=t.which;if(!(c&&c>1||o._maxTouchesReached()))for(O.current=null,o.currentTarget=t.currentTarget,o.stopPropagation&&t.stopPropagation();d>a&&!o._maxTouchesReached();a++)r=l[a],(i=s?e(r.currentTarget):o.element).length&&(r=new A(o,i,r),o.touches.push(r),r.press(),o._isMultiTouch()&&o.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(e,t){var i,r,o,a,s={},l=n(t),d=this.touches;for(i=0;d.length>i;i++)s[(r=d[i]).id]=r;for(i=0;l.length>i;i++)(a=s[(o=l[i]).id])&&a[e](o)},_apiCall:function(t,n,i,r){this[t]({api:!0,pageX:n,pageY:i,clientX:n,clientY:i,target:e(r||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});O.defaultThreshold=function(e){f=e},O.minHold=function(e){p=e},r.getTouches=n,r.touchDelta=t,r.UserEvents=O}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(e){return!1}}function i(e,t){return parseInt(e.css(t),10)||0}function r(e,t){return Math.min(Math.max(e,t.min),t.max)}function o(e,t){var n=I(e),r=n.left+i(e,"borderLeftWidth")+i(e,"paddingLeft"),o=n.top+i(e,"borderTopWidth")+i(e,"paddingTop");return{x:{min:r,max:r+e.width()-t.outerWidth(!0)},y:{min:o,max:o+e.height()-t.outerHeight(!0)}}}function a(n,i,r){for(var o,a,s=0,l=i&&i.length,d=r&&r.length;n&&n.parentNode;){for(s=0;l>s;s++)if((o=i[s]).element[0]===n)return{target:o,targetElement:n};for(s=0;d>s;s++)if(a=r[s],e.contains(a.element[0],n)&&_.matchesSelector.call(n,a.options.filter))return{target:a,targetElement:n};n=n.parentNode}return t}function s(e,t){var n,i=t.options.group,r=e[i];if(x.fn.destroy.call(t),r.length>1){for(n=0;r.length>n;n++)if(r[n]==t){r.splice(n,1);break}}else r.length=0,delete e[i]}function l(e){var t,n,i,r=k.body;return e[0]===r?{top:n=r.scrollTop,left:i=r.scrollLeft,bottom:n+w.height(),right:i+w.width()}:((t=e.offset()).bottom=t.top+e.height(),t.right=t.left+e.width(),t)}function d(e){return e===k.body||e===k.documentElement||e===k}function c(t){if(!t||d(t))return e(k.body);for(var n=e(t)[0];!b.isScrollable(n)&&!d(n);)n=n.parentNode;return e(n)}function u(e,t,n){var i={x:0,y:0},r=50;return r>e-n.left?i.x=-(r-(e-n.left)):r>n.right-e&&(i.x=r-(n.right-e)),r>t-n.top?i.y=-(r-(t-n.top)):r>n.bottom-t&&(i.y=r-(n.bottom-t)),i}var h,p,f,g,m,v,b=window.kendo,_=b.support,k=window.document,w=e(window),y=b.Class,x=b.ui.Widget,C=b.Observable,S=b.UserEvents,T=e.proxy,D=e.extend,I=b.getOffset,E={},A={},O={},R=b.elementUnderCursor,P="keyup",M="change",F="dragstart",H="hold",N="drag",$="dragend",L="dragcancel",z="hintDestroyed",j="dragenter",B="dragleave",U="drop",V=C.extend({init:function(t,n){var i=this,r=t[0];i.capture=!1,r.addEventListener?(e.each(b.eventMap.down.split(" "),function(){r.addEventListener(this,T(i._press,i),!0)}),e.each(b.eventMap.up.split(" "),function(){r.addEventListener(this,T(i._release,i),!0)})):(e.each(b.eventMap.down.split(" "),function(){r.attachEvent(this,T(i._press,i))}),e.each(b.eventMap.up.split(" "),function(){r.attachEvent(this,T(i._release,i))})),C.fn.init.call(i),i.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){this.trigger("press"),this.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),W=C.extend({init:function(t){var n=this;C.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||this.min>e},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),i=n*t.scale,r=t.getSize();(0!==n||t.forcedEnabled)&&(t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=i,t.min=Math.min(t.max,r-i),t.minScale=r/n,t.centerOffset=(i-r)/2,t.enabled=t.forcedEnabled||i>r,e||t.trigger(M,t))}}),G=C.extend({init:function(e){var t=this;C.fn.init.call(t),t.x=new W(D({horizontal:!0},e)),t.y=new W(D({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(M,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(M)}}),q=C.extend({init:function(e){D(this,e),C.fn.init.call(this)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,o=r[i]+e;n.enabled&&((n.min>o&&0>e||o>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger(M,t))}}),K=y.extend({init:function(e){var t,n,i,r,o=this;D(o,{elastic:!0},e),i=o.elastic?.5:0,r=o.movable,o.x=t=new q({axis:"x",dimension:o.dimensions.x,resistance:i,movable:r}),o.y=n=new q({axis:"y",dimension:o.dimensions.y,resistance:i,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e,o.offset=o.dimensions.container.offset()},gesturechange:function(e){var i,a,s,l=o.gesture,d=l.center,c=e.center,u=e.distance/l.distance,h=o.dimensions.minScale,p=o.dimensions.maxScale;h>=r.scale&&1>u&&(u+=.8*(1-u)),r.scale*u>=p&&(u=p/r.scale),a=r.x+o.offset.left,s=r.y+o.offset.top,i={x:(a-d.x)*u+c.x-a,y:(s-d.y)*u+c.y-s},r.scaleWith(u),t.dragMove(i.x),n.dragMove(i.y),o.dimensions.rescale(r.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(t.dimension.enabled||n.dimension.enabled?(t.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),Y=_.transitions.prefix+"Transform";p=_.hasHW3D?function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"},f=C.extend({init:function(t){var n=this;C.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(p(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){D(this,e),this.refresh()},refresh:function(){var e,t=this,n=t.x,i=t.y;t.round&&(n=Math.round(n),i=Math.round(i)),(e=p(n,i,t.scale))!=t.coordinates&&(b.support.browser.msie&&10>b.support.browser.version?(t.element[0].style.position="absolute",t.element[0].style.left=t.x+"px",t.element[0].style.top=t.y+"px"):t.element[0].style[Y]=e,t._saveCoordinates(e),t.trigger(M))},_saveCoordinates:function(e){this.coordinates=e}}),(g=x.extend({init:function(e,t){var n,i=this;x.fn.init.call(i,e,t),(n=i.options.group)in A?A[n].push(i):A[n]=[i]},events:[j,B,U],options:{name:"DropTarget",group:"default"},destroy:function(){s(A,this)},_trigger:function(e,n){var i=E[this.options.group];return i?this.trigger(e,D({},n.event,{draggable:i,dropTarget:n.dropTarget})):t},_over:function(e){this._trigger(j,e)},_out:function(e){this._trigger(B,e)},_drop:function(e){var t=E[this.options.group];t&&(t.dropped=!this._trigger(U,e))}})).destroyGroup=function(e){var t,n=A[e]||O[e];if(n){for(t=0;n.length>t;t++)x.fn.destroy.call(n[t]);n.length=0,delete A[e],delete O[e]}},g._cache=A,m=g.extend({init:function(e,t){var n,i=this;x.fn.init.call(i,e,t),(n=i.options.group)in O?O[n].push(i):O[n]=[i]},destroy:function(){s(O,this)},options:{name:"DropTargetArea",group:"default",filter:null}}),v=x.extend({init:function(e,t){var n=this;x.fn.init.call(n,e,t),n._activated=!1,n.userEvents=new S(n.element,{global:!0,allowSelection:!0,filter:n.options.filter,threshold:n.options.distance,start:T(n._start,n),hold:T(n._hold,n),move:T(n._drag,n),end:T(n._end,n),cancel:T(n._cancel,n),select:T(n._select,n)}),n._afterEndHandler=T(n._afterEnd,n),n._captureEscape=T(n._captureEscape,n)},events:[H,F,N,$,L,z],options:{name:"Draggable",distance:b.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,autoScroll:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){e.keyCode===b.keys.ESC&&(this._trigger(L,{event:e}),this.userEvents.cancel())},_updateHint:function(t){var n,i=this,o=i.options,a=i.boundaries,s=o.axis,l=i.options.cursorOffset;l?n={left:t.x.location+l.left,top:t.y.location+l.top}:(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)),a&&(n.top=r(n.top,a.y),n.left=r(n.left,a.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_shouldIgnoreTarget:function(t){var n=this.options.ignore;return n&&e(t).is(n)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(n){var i,r=this,a=r.options,s=a.container,l=a.hint;return this._shouldIgnoreTarget(n.touch.initialTouch)||a.holdToDrag&&!r._activated?(r.userEvents.cancel(),t):(r.currentTarget=n.target,r.currentTargetOffset=I(r.currentTarget),l&&(r.hint&&r.hint.stop(!0,!0).remove(),r.hint=b.isFunction(l)?e(l.call(r,r.currentTarget)):l,i=I(r.currentTarget),r.hintOffset=i,r.hint.css({position:"absolute",zIndex:2e4,left:i.left,top:i.top}).appendTo(k.body),r.angular("compile",function(){r.hint.removeAttr("ng-repeat");for(var t=e(n.target);!t.data("$$kendoScope")&&t.length;)t=t.parent();return{elements:r.hint.get(),scopeFrom:t.data("$$kendoScope")}})),E[a.group]=r,r.dropped=!1,s&&(r.boundaries=o(s,r.hint)),e(k).on(P,r._captureEscape),r._trigger(F,n)&&(r.userEvents.cancel(),r._afterEnd()),r.userEvents.capture(),t)},_hold:function(e){this.currentTarget=e.target,this._trigger(H,e)?this.userEvents.cancel():this._activated=!0},_drag:function(n){var i,r,o=this;n.preventDefault(),i=this._elementUnderCursor(n),o._withDropTarget(i,function(i,r){if(!i)return h&&(h._trigger(B,D(n,{dropTarget:e(h.targetElement)})),h=null),t;if(h){if(r===h.targetElement)return;h._trigger(B,D(n,{dropTarget:e(h.targetElement)}))}i._trigger(j,D(n,{dropTarget:e(r)})),h=D(i,{targetElement:r})}),o._trigger(N,D(n,{dropTarget:h,elementUnderCursor:i})),this.options.autoScroll&&(this._cursorElement!==i&&(this._scrollableParent=c(i),this._cursorElement=i),this._scrollableParent[0]&&(r=u(n.x.location,n.y.location,l(this._scrollableParent)),this._scrollCompenstation=e.extend({},this.hintOffset),this._scrollVelocity=r,0===r.y&&0===r.x?(clearInterval(this._scrollInterval),this._scrollInterval=null):this._scrollInterval||(this._scrollInterval=setInterval(e.proxy(this,"_autoScroll"),50)))),o.hint&&o._updateHint(n)},_autoScroll:function(){var e,t,n,i,r,o,a,s=this._scrollableParent[0],l=this._scrollVelocity,d=this._scrollCompenstation;s&&((n=s===k.body)?(e=k.body.offsetHeight>w.height(),t=k.body.offsetWidth>w.width()):(e=s.scrollHeight>=s.offsetHeight,t=s.scrollWidth>=s.offsetWidth),i=s.scrollTop+l.y,r=e&&i>0&&s.scrollHeight>i,o=s.scrollLeft+l.x,a=t&&o>0&&s.scrollWidth>o,r&&(s.scrollTop+=l.y),a&&(s.scrollLeft+=l.x),n&&(a||r)&&(r&&(d.top+=l.y),a&&(d.left+=l.x),this.hint.css(d)))},_end:function(t){this._withDropTarget(this._elementUnderCursor(t),function(n,i){n&&(n._drop(D({},t,{dropTarget:e(i)})),h=null)}),this._trigger($,t),this._cancel(t.event)},_cancel:function(){var e=this;e._scrollableParent=null,clearInterval(this._scrollInterval),e._activated=!1,e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){return this.trigger(e,D({},t.event,{x:t.x,y:t.y,currentTarget:this.currentTarget,initialTarget:t.touch?t.touch.initialTouch:null,dropTarget:t.dropTarget,elementUnderCursor:t.elementUnderCursor}))},_elementUnderCursor:function(e){var t=R(e),i=this.hint;return i&&n(i[0],t)&&(i.hide(),(t=R(e))||(t=R(e)),i.show()),t},_withDropTarget:function(e,t){var n,i=this.options.group,r=A[i],o=O[i];(r&&r.length||o&&o.length)&&((n=a(e,r,o))?t(n.target,n.targetElement):t())},destroy:function(){var e=this;x.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy(),this._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),e.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete E[t.options.group],t.trigger("destroy"),t.trigger(z),e(k).off(P,t._captureEscape)}}),b.ui.plugin(g),b.ui.plugin(m),b.ui.plugin(v),b.TapCapture=V,b.containerBoundaries=o,D(b.ui,{Pane:K,PaneDimensions:G,Movable:f}),b.ui.Draggable.utils={autoScrollVelocity:u,scrollableViewPort:l,findScrollableParent:c}}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.effects,o=i.ui,a=e.proxy,s=e.extend,l=o.Widget,d=n.Class,c=n.ui.Movable,u=n.ui.Pane,h=n.ui.PaneDimensions,p=r.Transition,f=r.Animation,g=Math.abs,m="km-scroller-release",v="km-scroller-refresh",b="change",_="scroll",k=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e),t.userEvents.bind("gestureend",a(t.start,t)),t.tapCapture.bind("press",a(t.cancel,t))},enabled:function(){return this.dimensions.minScale>this.movable.scale},done:function(){return.01>this.dimensions.minScale-this.movable.scale},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),w=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e,{transition:new p({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",a(t.start,t)),t.userEvents.bind("gestureend",a(t.start,t)),t.userEvents.bind("tap",a(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){this.cancel(),this._moveTo(e)},onEnd:function(){var e=this;e.paneAxis.outOfBounds()?e._snapBack():e._end()},done:function(){return g(this.velocity)<1},start:function(e){var t,n=this;n.dimension.enabled&&(n.paneAxis.outOfBounds()?n._snapBack():(t=2===e.touch.id?0:e.touch[n.axis].velocity,n.velocity=Math.max(Math.min(t*n.velocityMultiplier,55),-55),n.tapCapture.captureNext(),f.fn.start.call(n)))},tick:function(){var e=this,t=e.dimension,n=e.paneAxis.outOfBounds()?.5:e.friction,i=e.velocity*=n,r=e.movable[e.axis]+i;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this,t=e.dimension,n=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(n)},_moveTo:function(e){this.transition.moveTo({location:e,duration:500,ease:p.easeOutExpo})}}),y=f.extend({init:function(e){n.effects.Animation.fn.init.call(this),s(this,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return g(this.offset.y)<5&&g(this.offset.x)<5},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&n.isFunction(e)?this.callback=e:e=t},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),x=d.extend({init:function(t){var n=this,i="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');s(n,t,{element:r,elementSize:0,movable:new c(r),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:i?"width":"height"}),n.scrollMovable.bind(b,a(n.refresh,n)),n.container.append(r),t.alwaysVisible&&n.show()},refresh:function(){var e=this,t=e.axis,n=e.dimension,i=n.size,r=e.scrollMovable,o=i/n.total,a=Math.round(-r[t]*o),s=Math.round(i*o);o>=1?this.element.css("display","none"):this.element.css("display",""),a+s>i?s=i-a:0>a&&(s+=a,a=0),e.elementSize!=s&&(e.element.css(e.size,s+"px"),e.elementSize=s),e.movable.moveAxis(t,a)},show:function(){this.element.css({opacity:.7,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),C=l.extend({init:function(i,r){var o,d,p,f,m,v,w,x,C,S=this;return l.fn.init.call(S,i,r),i=S.element,(S._native=S.options.useNative&&n.support.hasNativeScrolling)?(i.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),s(S,{scrollElement:i,fixedContainer:i.children().first()}),t):(i.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),o=i.children().eq(1),d=new n.TapCapture(i),p=new c(o),f=new h({element:o,container:i,forcedEnabled:S.options.zoom}),m=this.options.avoidScrolling,v=new n.UserEvents(i,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:S.options.zoom,start:function(t){f.refresh();var n=g(t.x.velocity),i=g(t.y.velocity),r=2*n>=i,o=2*i>=n;!e.contains(S.fixedContainer[0],t.event.target)&&!m(t)&&S.enabled&&(f.x.enabled&&r||f.y.enabled&&o)?v.capture():v.cancel()}}),w=new u({movable:p,dimensions:f,userEvents:v,elastic:S.options.elastic}),x=new k({movable:p,dimensions:f,userEvents:v,tapCapture:d}),C=new y({moveTo:function(e){S.scrollTo(e.x,e.y)}}),p.bind(b,function(){S.scrollTop=-p.y,S.scrollLeft=-p.x,S.trigger(_,{scrollTop:S.scrollTop,scrollLeft:S.scrollLeft})}),S.options.mousewheelScrolling&&i.on("DOMMouseScroll mousewheel",a(this,"_wheelScroll")),s(S,{movable:p,dimensions:f,zoomSnapBack:x,animatedScroller:C,userEvents:v,pane:w,tapCapture:d,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:i.children().first()}),S._initAxis("x"),S._initAxis("y"),S._wheelEnd=function(){S._wheel=!1,S.userEvents.end(0,S._wheelY)},f.refresh(),S.options.pullToRefresh&&S._initPullToRefresh(),t)},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=n.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:["pull",_,"resize"],_resize:function(){this._native||this.contentResized()},setOptions:function(e){l.fn.setOptions.call(this,e),e.pullToRefresh&&this._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(this.scrollElement.scrollLeft(g(e)),this.scrollElement.scrollTop(g(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,n){var i,r;this._native?this.scrollTo(e,t):(i={x:this.movable.x,y:this.movable.y},r={x:e,y:t},this.animatedScroller.setCoordinates(i,r),this.animatedScroller.setCallback(n),this.animatedScroller.start())},pullHandled:function(){var e=this;e.refreshHint.removeClass(v),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd(),e.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=n.template(e.options.messages.pullTemplate),e.releaseTemplate=n.template(e.options.messages.releaseTemplate),e.refreshTemplate=n.template(e.options.messages.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",a(e._paneChange,e)),e.userEvents.bind("end",a(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(m).addClass(v),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/.5>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(v).addClass(m),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(m),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,n=t.movable,i=t.dimensions[e],r=t.tapCapture,o=t.pane[e],a=new x({axis:e,movable:n,dimension:i,container:t.element,alwaysVisible:t.options.visibleScrollHints});i.bind(b,function(){a.refresh()}),o.bind(b,function(){a.show()}),t[e+"inertia"]=new w({axis:e,paneAxis:o,movable:n,tapCapture:r,userEvents:t.userEvents,dimension:i,elastic:t.options.elastic,friction:t.options.friction||.96,velocityMultiplier:t.options.velocityMultiplier||10,end:function(){a.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});o.plugin(C)}(window.kendo.jQuery),function(e,t){function n(e){return e.position().top+3}var i=window.kendo,r=i.ui.Widget,o=e.proxy,a=!1,s=".kendoGroupable",l=i.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),d=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(i.attr("title"))||t.attr(i.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},c=e('<div class="k-grouping-dropclue"/>'),u=r.extend({init:function(l,u){var h,p,f=this,g=i.guid(),m=o(f._intializePositions,f),v=f._dropCuePositions=[];r.fn.init.call(f,l,u),a=i.support.isRtl(l),p=a?"right":"left",f.draggable=h=f.options.draggable||new i.ui.Draggable(f.element,{filter:f.options.draggableElements,hint:d,group:g}),f.groupContainer=e(f.options.groupContainer,f.element).kendoDropTarget({group:h.options.group,dragenter:function(e){f._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),c.css("top",n(f.groupContainer)).css(p,0).appendTo(f.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),c.remove()},drop:function(t){var n,r=t.draggable.currentTarget,o=r.attr(i.attr("field")),s=r.attr(i.attr("title")),l=f.indicator(o),d=f._dropCuePositions,u=d[d.length-1];(r.hasClass("k-group-indicator")||f._canDrag(r))&&(u?(n=f._dropCuePosition(i.getOffset(c).left+parseInt(u.element.css("marginLeft"),10)*(a?-1:1)+parseInt(u.element.css("marginRight"),10)))&&f._canDrop(e(l),n.element,n.left)&&(n.before?n.element.before(l||f.buildIndicator(o,s)):n.element.after(l||f.buildIndicator(o,s)),f._change()):(f.groupContainer.append(f.buildIndicator(o,s)),f._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:d,group:h.options.group,dragcancel:o(f._dragCancel,f),dragstart:function(e){var t=e.currentTarget,i=parseInt(t.css("marginLeft"),10),r=t.position(),o=a?r.left-i:r.left+t.outerWidth();m(),c.css({top:n(f.groupContainer),left:o}).appendTo(f.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){f._dragEnd(this)},drag:o(f._drag,f)}).on("click"+s,".k-button",function(t){t.preventDefault(),f._removeIndicator(e(this).parent())}).on("click"+s,".k-link",function(t){var n=e(this).parent(),r=f.buildIndicator(n.attr(i.attr("field")),n.attr(i.attr("title")),"asc"==n.attr(i.attr("dir"))?"desc":"asc");n.before(r).remove(),f._change(),t.preventDefault()}),h.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){f._dragEnd(this)},dragcancel:o(f._dragCancel,f),dragstart:function(e){var n;return f.options.allowDrag||f._canDrag(e.currentTarget)?(m(),v.length&&(n=v[v.length-1].element,parseInt(n.css("marginRight"),10),n.position().left,n.outerWidth()),t):(e.preventDefault(),t)},drag:o(f._drag,f)}),f.dataSource=f.options.dataSource,f.dataSource&&f._refreshHandler?f.dataSource.unbind("change",f._refreshHandler):f._refreshHandler=o(f.refresh,f),f.dataSource&&(f.dataSource.bind("change",f._refreshHandler),f.refresh())},refresh:function(){var t=this,n=t.dataSource;t.groupContainer&&t.groupContainer.empty().append(e.map(n.group()||[],function(n){var r=n.field,o=i.attr("field"),a=t.element.find(t.options.filter).filter(function(){return e(this).attr(o)===r});return t.buildIndicator(n.field,a.attr(i.attr("title")),n.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;r.fn.destroy.call(e),e.groupContainer.off(s),e.groupContainer.data("kendoDropTarget")&&e.groupContainer.data("kendoDropTarget").destroy(),e.groupContainer.data("kendoDraggable")&&e.groupContainer.data("kendoDraggable").destroy(),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=null),e.groupContainer=e.element=e.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var n=e(".k-group-indicator",this.groupContainer);return e.grep(n,function(n){return e(n).attr(i.attr("field"))===t})[0]},buildIndicator:function(e,t,n){return l({field:e.replace(/"/g,"'"),dir:n,title:t,ns:i.ns})},descriptors:function(){var t,n,r,o,a=this,s=e(".k-group-indicator",a.groupContainer);return t=a.element.find(a.options.filter).map(function(){var t=e(this),a=t.attr(i.attr("aggregates")),s=t.attr(i.attr("field"));if(a&&""!==a)for(n=a.split(","),a=[],r=0,o=n.length;o>r;r++)a.push({field:s,aggregate:n[r]});return a}).toArray(),e.map(s,function(n){return{field:(n=e(n)).attr(i.attr("field")),dir:n.attr(i.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){e.remove(),this._invalidateGroupContainer(),this._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var n,i,r,o,s,l=this._dropCuePositions;if(c.is(":visible")&&0!==l.length)return t=Math.ceil(t),i=(n=l[l.length-1]).left,r=n.right,o=parseInt(n.element.css("marginLeft"),10),s=parseInt(n.element.css("marginRight"),10),t>=r&&!a||i>t&&a?t={left:n.element.position().left+(a?-o:n.element.outerWidth()+s),element:n.element,before:!1}:(t=e.grep(l,function(e){return t>=e.left&&e.right>=t||a&&t>e.right})[0])&&(t={left:a?t.element.position().left+t.element.outerWidth()+s:t.element.position().left-o,element:t.element,before:!0}),t},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&c.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(i.attr("field"));return"false"!=e.attr(i.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,n){var i=e.next();return e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||!a&&n>i.position().left||a&&n<i.position().left)},_dragEnd:function(t){var n=this,r=t.currentTarget.attr(i.attr("field")),o=n.indicator(r);t!==n.options.draggable&&!t.dropped&&o&&n._removeIndicator(e(o)),n._dragCancel()},_dragCancel:function(){c.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,n=e(".k-group-indicator",this.groupContainer);this._dropCuePositions=e.map(n,function(n){return n=e(n),t=i.getOffset(n).left,{left:parseInt(t,10),right:parseInt(t+n.outerWidth(),10),element:n}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});i.ui.plugin(u)}(window.kendo.jQuery),function(e){function t(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var n=window.kendo,i=n.getOffset,r=n.ui.Widget,o="change",a=r.extend({init:function(a,s){var l,d=this,c=n.guid()+"-reorderable";r.fn.init.call(d,a,s),a=d.element.addClass("k-reorderable"),s=d.options,d.draggable=l=s.draggable||new n.ui.Draggable(a,{group:c,filter:s.filter,hint:s.hint}),d.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),a.find(l.options.filter).kendoDropTarget({group:l.options.group,dragenter:function(e){var n,r,o,a;d._draggable&&(n=this.element,o=!d._dropTargetAllowed(n)||d._isLastDraggable(),t(e.draggable.hint,o),o||(a=(r=i(n)).left,s.inSameContainer&&!s.inSameContainer({source:n,target:d._draggable,sourceIndex:d._index(n),targetIndex:d._index(d._draggable)})?d._dropTarget=n:d._index(n)>d._index(d._draggable)&&(a+=n.outerWidth()),d.reorderDropCue.css({height:n.outerHeight(),top:r.top,left:a}).appendTo(document.body)))},dragleave:function(e){t(e.draggable.hint,!0),d.reorderDropCue.remove(),d._dropTarget=null},drop:function(){var e,t;d._dropTarget=null,d._draggable&&(e=this.element,t=d._draggable,d._dropTargetAllowed(e)&&!d._isLastDraggable()&&d.trigger(o,{element:d._draggable,target:e,oldIndex:d._index(t),newIndex:d._index(e),position:i(d.reorderDropCue).left>i(e).left?"after":"before"}))}}),l.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragend:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragstart:function(e){d._draggable=e.currentTarget,d._elements=d.element.find(d.draggable.options.filter)},drag:function(e){var t,n;d._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")&&(t=i(d._dropTarget).left,n=d._dropTarget.outerWidth(),d.reorderDropCue.css(e.pageX>t+n/2?{left:t+n}:{left:t}))}})},options:{name:"Reorderable",filter:"*"},events:[o],_isLastDraggable:function(){var e,t=this.options.inSameContainer,n=this._draggable[0],i=this._elements.get(),r=!1;if(!t)return!1;for(;!r&&i.length>0;)r=n!==(e=i.pop())&&t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)});return!r},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,n=this.options.dragOverContainers,i=this._draggable;return i[0]!==e[0]&&(!t||!n||!!t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)})||n(this._index(i),this._index(e)))},_index:function(e){return this._elements.index(e)},destroy:function(){var t=this;r.fn.destroy.call(t),t.element.find(t.draggable.options.filter).each(function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()}),t.draggable&&(t.draggable.destroy(),t.draggable.element=t.draggable=null),t.elements=t.reorderDropCue=t._elements=t._draggable=null}});n.ui.plugin(a)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o=e.proxy,a=n.isFunction,s=e.extend,l="horizontal",d="vertical",c="start",u="resize",h="resizeend",p=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.orientation=n.options.orientation.toLowerCase()!=d?l:d,n._positionMouse=n.orientation==l?"x":"y",n._position=n.orientation==l?"left":"top",n._sizingDom=n.orientation==l?"outerWidth":"outerHeight",n.draggable=new i.Draggable(e,{distance:1,filter:t.handle,drag:o(n._resize,n),dragcancel:o(n._cancel,n),dragstart:o(n._start,n),dragend:o(n._stop,n)}),n.userEvents=n.draggable.userEvents},events:[u,h,c],options:{name:"Resizable",orientation:l},resize:function(){},_max:function(e){var n=this,i=n.hint?n.hint[n._sizingDom]():0,r=n.options.max;return a(r)?r(e):r!==t?n._initialElementPosition+r-i:r},_min:function(e){var n=this.options.min;return a(n)?n(e):n!==t?this._initialElementPosition+n:n},_start:function(t){var n=this,i=n.options.hint,r=e(t.currentTarget);n._initialElementPosition=r.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,i&&(n.hint=a(i)?e(i(r)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(c,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(e){var n,i=this,r=i._maxPosition,o=i._minPosition,a=i._initialElementPosition+(e[i._positionMouse].location-i._initialMousePosition);n=o!==t?Math.max(o,a):a,i.position=n=r!==t?Math.min(r,n):n,i.hint&&i.hint.toggleClass(i.options.invalidClass||"",n==r||n==o).css(i._position,n),i.resizing=!0,i.trigger(u,s(e,{position:n}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(h,s(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var n=this;n.hint&&(n.position=t,n.hint.css(n._position,n._initialElementPosition),n._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e}},move:function(e){var n=this,i=n._position,r=n.targetPosition,o=n.position;o===t&&(o=r[i]),r[i]=o+e,n.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});n.ui.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(e){return!1}}function r(e){return e.clone()}function o(e){return e.clone().removeAttr("id").css("visibility","hidden")}var a=window.kendo,s=a.ui.Widget,l="start",d="beforeMove",c="move",u="end",h="change",p="cancel",f="sort",g="remove",m="receive",v=s.extend({init:function(e,t){var n=this;s.fn.init.call(n,e,t),n.options.placeholder||(n.options.placeholder=o),n.options.hint||(n.options.hint=r),n._draggable=n._createDraggable()},events:[l,d,c,u,h,p],options:{name:"Sortable",hint:null,placeholder:null,filter:">*",holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,autoScroll:!1,cursor:"auto",moveOnDragEnter:!1},destroy:function(){this._draggable.destroy(),s.fn.destroy.call(this)},_createDraggable:function(){var t=this,n=t.element,i=t.options;return new a.ui.Draggable(n,{filter:i.filter,hint:a.isFunction(i.hint)?i.hint:e(i.hint),holdToDrag:i.holdToDrag,container:i.container?e(i.container):null,cursorOffset:i.cursorOffset,axis:i.axis,ignore:i.ignore,autoScroll:i.autoScroll,dragstart:e.proxy(t._dragstart,t),dragcancel:e.proxy(t._dragcancel,t),drag:e.proxy(t._drag,t),dragend:e.proxy(t._dragend,t)})},_dragstart:function(t){var n=this.draggedElement=t.currentTarget,i=(t.target||a.elementUnderCursor(t),this.options.disabled),r=this.options.handler,o=this.options.placeholder,s=this.placeholder=e(a.isFunction(o)?o.call(this,n):o);i&&n.is(i)?t.preventDefault():r&&!e(t.initialTarget).is(r)?t.preventDefault():this.trigger(l,{item:n,draggableEvent:t})?t.preventDefault():(n.css("display","none"),n.before(s),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger(p,{item:this.draggedElement}),this._resetCursor()},_drag:function(n){var r,o,a,s,l,d=this.draggedElement,c=this._findTarget(n),u={left:n.x.location,top:n.y.location},h={x:n.x.delta,y:n.y.delta},p=this.options.axis,f=this.options.moveOnDragEnter,g={item:d,list:this,draggableEvent:n};if("x"===p||"y"===p)return this._movementByAxis(p,u,h[p],g),t;if(c){if(r=this._getElementCenter(c.element),o={left:Math.round(u.left-r.left),top:Math.round(u.top-r.top)},e.extend(g,{target:c.element}),c.appendToBottom)return this._movePlaceholder(c,null,g),t;if(c.appendAfterHidden&&this._movePlaceholder(c,"next",g),this._isFloating(c.element)?0>h.x&&(f||0>o.left)?a="prev":h.x>0&&(f||o.left>0)&&(a="next"):0>h.y&&(f||0>o.top)?a="prev":h.y>0&&(f||o.top>0)&&(a="next"),a){for(s=(l="prev"===a?i.fn.prev:i.fn.next).call(c.element);s.length&&!s.is(":visible");)s=l.call(s);s[0]!=this.placeholder[0]&&this._movePlaceholder(c,a,g)}}},_dragend:function(n){var i,r,o,a,s=this.placeholder,l=this.draggedElement,d=this.indexOf(l),c=this.indexOf(s),p=this.options.connectWith;return this._resetCursor(),o={action:f,item:l,oldIndex:d,newIndex:c,draggableEvent:n},c>=0?r=this.trigger(u,o):(i=s.parents(p).getKendoSortable(),o.action=g,a=e.extend({},o,{action:m,oldIndex:-1,newIndex:i.indexOf(s)}),r=!(!this.trigger(u,o)&&!i.trigger(u,a))),r||c===d?(this._cancel(),t):(s.replaceWith(l),l.show(),this._draggable.dropped=!0,o={action:-1!=this.indexOf(l)?f:g,item:l,oldIndex:d,newIndex:this.indexOf(l),draggableEvent:n},this.trigger(h,o),i&&(a=e.extend({},o,{action:m,oldIndex:-1,newIndex:i.indexOf(l)}),i.trigger(h,a)),t)},_findTarget:function(n){var i,r,o=this._findElementUnderCursor(n),a=this.options.connectWith;return e.contains(this.element[0],o)?(r=(i=this.items()).filter(o)[0]||i.has(o)[0])?{element:e(r),sortable:this}:null:this.element[0]==o&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==o&&this._isLastHidden()?{element:r=this.items().eq(0),sortable:this,appendAfterHidden:!0}:a?this._searchConnectedTargets(o,n):t},_findElementUnderCursor:function(e){var t=a.elementUnderCursor(e),i=e.sender;return this.items(),n(i.hint[0],t)&&(i.hint.hide(),(t=a.elementUnderCursor(e))||(t=a.elementUnderCursor(e)),i.hint.show()),t},_searchConnectedTargets:function(t,n){var i,r,o,a,s=e(this.options.connectWith);for(a=0;s.length>a;a++)if(i=s.eq(a).getKendoSortable(),e.contains(s[a],t)){if(i)return(o=(r=i.items()).filter(t)[0]||r.has(t)[0])?(i.placeholder=this.placeholder,{element:e(o),sortable:i}):null}else if(s[a]==t){if(i&&i._isEmpty())return{element:s.eq(a),sortable:i,appendToBottom:!0};if(this._isCursorAfterLast(i,n))return{element:o=i.items().last(),sortable:i}}},_isCursorAfterLast:function(e,t){var n,i=e.items().last(),r=t.x.location,o=t.y.location;return(n=a.getOffset(i)).top+=i.outerHeight(),n.left+=i.outerWidth(),0>(this._isFloating(i)?n.left-r:n.top-o)},_movementByAxis:function(t,n,i,r){var o,a="x"===t?n.left:n.top,s=0>i?this.placeholder.prev():this.placeholder.next();s.length&&!s.is(":visible")&&(s=0>i?s.prev():s.next()),e.extend(r,{target:s}),(o=this._getElementCenter(s))&&(o="x"===t?o.left:o.top),s.length&&0>i&&0>a-o?this._movePlaceholder({element:s,sortable:this},"prev",r):s.length&&i>0&&a-o>0&&this._movePlaceholder({element:s,sortable:this},"next",r)},_movePlaceholder:function(e,t,n){var i=this.placeholder;e.sortable.trigger(d,n)||(t?"prev"===t?e.element.before(i):"next"===t&&e.element.after(i):e.element.append(i),e.sortable.trigger(c,n))},_setCursor:function(){var t,n=this.options.cursor;n&&"auto"!==n&&(t=e(document.body),this._originalCursorType=t.css("cursor"),t.css({cursor:n}),this._cursorStylesheet||(this._cursorStylesheet=e("<style>* { cursor: "+n+" !important; }</style>")),this._cursorStylesheet.appendTo(t))},_resetCursor:function(){this._originalCursorType&&(e(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(e){var t=e.length?a.getOffset(e):null;return t&&(t.top+=e.outerHeight()/2,t.left+=e.outerWidth()/2),t},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var e=this.options.filter;return e?this.element.find(e):this.element.children()},indexOf:function(e){var t=this._items(),n=this.placeholder,i=this.draggedElement;return n&&e[0]==n[0]?t.not(i).index(e):t.not(n).index(e)},items:function(){var e=this.placeholder,t=this._items();return e&&(t=t.not(e)),t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});a.ui.plugin(v)}(window.kendo.jQuery),function(e,t){function n(e,t){if(!e.is(":visible"))return!1;var n=r.getOffset(e),i=t.left+t.width,o=t.top+t.height;return n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),!(n.left>i||t.left>n.right||n.top>o||t.top>n.bottom)}var i,r=window.kendo,o=r.ui.Widget,a=e.proxy,s=Math.abs,l="aria-selected",d="k-state-selected",c="k-state-selecting",u="k-selectable",h="change",p="k-state-unselecting",f="input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",g=r.support.browser.msie,m=!1;!function(e){e('<div class="parent"><span /></div>').on("click",">*",function(){m=!0}).find("span").click().end().off()}(e),(i=o.extend({init:function(t,n){var i,s=this;o.fn.init.call(s,t,n),s._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),s._lastActive=null,s.element.addClass(u),s.relatedTarget=s.options.relatedTarget,i=s.options.multiple,this.options.aria&&i&&s.element.attr("aria-multiselectable",!0),s.userEvents=new r.UserEvents(s.element,{global:!0,allowSelection:!0,filter:(m?"":"."+u+" ")+s.options.filter,tap:a(s._tap,s)}),i&&s.userEvents.bind("start",a(s._start,s)).bind("move",a(s._move,s)).bind("end",a(s._end,s)).bind("select",a(s._select,s))},events:[h],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:e.noop},_isElement:function(e){var t,n=this.element,i=n.length,r=!1;for(e=e[0],t=0;i>t;t++)if(n[t]===e){r=!0;break}return r},_tap:function(t){var n,i=e(t.target),r=this,o=t.event.ctrlKey||t.event.metaKey,a=r.options.multiple,s=a&&t.event.shiftKey,l=t.event.which,c=t.event.button;!r._isElement(i.closest("."+u))||l&&3==l||c&&2==c||this._allowSelection(t.event.target)&&(n=i.hasClass(d),a&&o||r.clear(),i=i.add(r.relatedTarget(i)),s?r.selectRange(r._firstSelectee(),i):(n&&o?(r._unselect(i),r._notify(h)):r.value(i),r._lastActive=r._downTarget=i))},_start:function(n){var i,r=this,o=e(n.target),a=o.hasClass(d),s=n.event.ctrlKey||n.event.metaKey;if(this._allowSelection(n.event.target)){if(r._downTarget=o,!r._isElement(o.closest("."+u)))return r.userEvents.cancel(),t;r.options.useAllItems?r._items=r.element.find(r.options.filter):(i=o.closest(r.element),r._items=i.find(r.options.filter)),n.sender.capture(),r._marquee.appendTo(document.body).css({left:n.x.client+1,top:n.y.client+1,width:0,height:0}),s||r.clear(),o=o.add(r.relatedTarget(o)),a&&(r._selectElement(o,!0),s&&o.addClass(p))}},_move:function(e){var t={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)};this._marquee.css(t),this._invalidateSelectables(t,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var e,t=this;t._marquee.remove(),t._unselect(t.element.find(t.options.filter+"."+p)).removeClass(p),e=(e=t.element.find(t.options.filter+"."+c)).add(t.relatedTarget(e)),t.value(e),t._lastActive=t._downTarget,t._items=null},_invalidateSelectables:function(e,t){var i,r,o,a,s=this._downTarget[0],l=this._items;for(i=0,r=l.length;r>i;i++)o=(a=l.eq(i)).add(this.relatedTarget(a)),n(a,e)?a.hasClass(d)?t&&s!==a[0]&&o.removeClass(d).addClass(p):a.hasClass(c)||a.hasClass(p)||o.addClass(c):a.hasClass(c)?o.removeClass(c):t&&a.hasClass(p)&&o.removeClass(p).addClass(d)},value:function(e){var n=this,i=a(n._selectElement,n);return e?(e.each(function(){i(this)}),n._notify(h),t):n.element.find(n.options.filter+"."+d)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value()).length>0?e[0]:t.element.find(t.options.filter)[0]},_selectElement:function(t,n){var i=e(t),r=!n&&this._notify("select",{element:t});i.removeClass(c),r||(i.addClass(d),this.options.aria&&i.attr(l,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(d),this.options.aria&&e.attr(l,!1),e},_select:function(t){this._allowSelection(t.event.target)&&(!g||g&&!e(r._activeElement()).is(f))&&t.preventDefault()},_allowSelection:function(t){return!e(t).is(f)||(this.userEvents.cancel(),this._downTarget=null,!1)},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+d);this._unselect(e)},selectRange:function(t,n){var i,r,o,a=this;for(a.clear(),a.element.length>1&&(o=a.options.continuousItems()),o&&o.length||(o=a.element.find(a.options.filter)),(t=e.inArray(e(t)[0],o))>(n=e.inArray(e(n)[0],o))&&(r=t,t=n,n=r),a.options.useAllItems||(n+=a.element.length-1),i=t;n>=i;i++)a._selectElement(o[i]);a._notify(h)},destroy:function(){var e=this;o.fn.destroy.call(e),e.element.off(".kendoSelectable"),e.userEvents.destroy(),e._marquee=e._lastActive=e.element=e.userEvents=null}})).parseOptions=function(e){var t="string"==typeof e&&e.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}},r.ui.plugin(i)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=n.keys,a="click",s=".kendoButton",l="disabled",d="k-state-focused",c="k-state-selected",u=i.extend({init:function(e,t){var o=this;i.fn.init.call(o,e,t),e=o.wrapper=o.element,t=o.options,e.addClass("k-button").attr("role","button"),t.enable=t.enable&&!e.attr(l),o.enable(t.enable),o._tabindex(),o._graphics(),e.on(a+s,r(o._click,o)).on("focus"+s,r(o._focus,o)).on("blur"+s,r(o._blur,o)).on("keydown"+s,r(o._keydown,o)).on("keyup"+s,r(o._keyup,o)),n.notify(o)},destroy:function(){this.wrapper.off(s),i.fn.destroy.call(this)},events:[a],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(a,{event:e})&&e.preventDefault()},_focus:function(){this.options.enable&&this.element.addClass(d)},_blur:function(){this.element.removeClass(d)},_keydown:function(e){var t=this;t._isNativeButton()||(e.keyCode==o.ENTER||e.keyCode==o.SPACEBAR)&&(e.keyCode==o.SPACEBAR&&(e.preventDefault(),t.options.enable&&t.element.addClass(c)),t._click(e))},_keyup:function(){this.element.removeClass(c)},_graphics:function(){var t,n,i,r=this.element,o=this.options,a=o.icon,s=o.spriteCssClass,l=o.imageUrl;(s||l||a)&&(i=!0,r.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),r.addClass(i?"k-button-icon":"k-button-icontext")),a?((t=r.children("span.k-icon").first())[0]||(t=e('<span class="k-icon"></span>').prependTo(r)),t.addClass("k-i-"+a)):s?((t=r.children("span.k-sprite").first())[0]||(t=e('<span class="k-sprite"></span>').prependTo(r)),t.addClass(s)):l&&((n=r.children("img.k-image").first())[0]||(n=e('<img alt="icon" class="k-image" />').prependTo(r)),n.attr("src",l))},enable:function(e){var t=this.element;void 0===e&&(e=!0),e=!!e,this.options.enable=e,t.toggleClass("k-state-disabled",!e).attr("aria-disabled",!e).attr(l,!e);try{t.blur()}catch(e){}}});n.ui.plugin(u)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i,r){return e({idx:t,text:n,ns:d.ns,numeric:i,title:r||""})}function i(e,t,n){return k({className:e.substring(1),text:t,wrapClassName:n||""})}function r(e,t,n,i){e.find(t).parent().attr(d.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function o(e,t){r(e,p,1,1>=t)}function a(e,t){r(e,g,Math.max(1,t-1),1>=t)}function s(e,t,n){r(e,m,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,f,n,t>=n)}var d=window.kendo,c=d.ui,u=c.Widget,h=e.proxy,p=".k-i-seek-w",f=".k-i-seek-e",g=".k-i-arrow-w",m=".k-i-arrow-e",v="change",b=".kendoPager",_="click",k=d.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),w=u.extend({init:function(t,n){var r,c,k,w,y=this;u.fn.init.call(y,t,n),n=y.options,y.dataSource=d.data.DataSource.create(n.dataSource),y.linkTemplate=d.template(y.options.linkTemplate),y.selectTemplate=d.template(y.options.selectTemplate),y.currentPageTemplate=d.template(y.options.currentPageTemplate),r=y.page(),c=y.totalPages(),y._refreshHandler=h(y.refresh,y),y.dataSource.bind(v,y._refreshHandler),n.previousNext&&(y.element.find(p).length||(y.element.append(i(p,n.messages.first,"k-pager-first")),o(y.element,r)),y.element.find(g).length||(y.element.append(i(g,n.messages.previous)),a(y.element,r))),n.numeric&&(y.list=y.element.find(".k-pager-numbers"),y.list.length||(y.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(y.element))),n.input&&(y.element.find(".k-pager-input").length||y.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+d.format(n.messages.of,c)+"</span>"),y.element.on("keydown"+b,".k-pager-input input",h(y._keydown,y))),n.previousNext&&(y.element.find(m).length||(y.element.append(i(m,n.messages.next)),s(y.element,r,c)),y.element.find(f).length||(y.element.append(i(f,n.messages.last,"k-pager-last")),l(y.element,r,c))),n.pageSizes&&(y.element.find(".k-pager-sizes").length||(k=n.pageSizes.length?n.pageSizes:["all",5,10,20],w=e.map(k,function(e){return e.toLowerCase&&"all"===e.toLowerCase()?"<option value='all'>"+n.messages.allPages+"</option>":"<option>"+e+"</option>"}),e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(y.element).find("select").html(w.join("")).end().appendTo(y.element)),y.element.find(".k-pager-sizes select").val(y.pageSize()),d.ui.DropDownList&&y.element.find(".k-pager-sizes select").show().kendoDropDownList(),y.element.on(v+b,".k-pager-sizes select",h(y._change,y))),n.refresh&&(y.element.find(".k-pager-refresh").length||y.element.append('<a href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),y.element.on(_+b,".k-pager-refresh",h(y._refreshClick,y))),n.info&&(y.element.find(".k-pager-info").length||y.element.append('<span class="k-pager-info k-label" />')),y.element.on(_+b,"a",h(y._click,y)).addClass("k-pager-wrap k-widget k-floatwrap"),y.element.on(_+b,".k-current-page",h(y._toggleActive,y)),n.autoBind&&y.refresh(),d.notify(y)},destroy:function(){var e=this;u.fn.destroy.call(e),e.element.off(b),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,d.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,r,c,u=this,h=1,p=u.page(),f="",g=u.options,m=u.pageSize(),v=u.dataSource.total(),b=u.totalPages(),_=u.linkTemplate,k=g.buttonCount;if(!e||"itemchange"!=e.action){if(g.numeric){for(p>k&&(h=0==(r=p%k)?p-k+1:p-r+1),i=Math.min(h+k-1,b),h>1&&(f+=n(_,h-1,"...",!1,g.messages.morePages)),t=h;i>=t;t++)f+=n(t==p?u.selectTemplate:_,t,t,!0);b>i&&(f+=n(_,t,"...",!1,g.messages.morePages)),""===f&&(f=u.selectTemplate({text:0})),f=this.currentPageTemplate({text:p})+f,u.list.removeClass("k-state-expanded").html(f)}g.info&&(f=v>0?d.format(g.messages.display,(p-1)*m+1,Math.min(p*m,v),v):g.messages.empty,u.element.find(".k-pager-info").html(f)),g.input&&u.element.find(".k-pager-input").html(u.options.messages.page+'<input class="k-textbox">'+d.format(g.messages.of,b)).find("input").val(p).attr("disabled",1>v).toggleClass("k-state-disabled",1>v),g.previousNext&&(o(u.element,p),a(u.element,p),s(u.element,p,b),l(u.element,p,b)),g.pageSizes&&(c=m,u.element.find(".k-pager-sizes option[value='all']").length>0&&m===this.dataSource.total()&&(m="all",c=g.messages.allPages),u.element.find(".k-pager-sizes select").val(m).filter("["+d.attr("role")+"=dropdownlist]").kendoDropDownList("value",m).kendoDropDownList("text",c))}},_keydown:function(e){if(e.keyCode===d.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=e.currentTarget.value,n=parseInt(t,10),i=this.dataSource;isNaN(n)?"all"==(t+"").toLowerCase()&&i.pageSize(i.total()):i.pageSize(n)},_toggleActive:function(){this.list.toggleClass("k-state-expanded")},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(d.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});c.plugin(w)}(window.kendo.jQuery),function(e,t){function n(t,n){return t===n||e.contains(t,n)}var i=window.kendo,r=i.ui,o=r.Widget,a=i.support,s=i.getOffset,l="open",d="close",c="deactivate",u="activate",h="center",p="left",f="right",g="top",m="bottom",v="absolute",b="hidden",_="body",k="location",w="position",y="visible",x="effects",C="k-state-active",S="k-state-border",T=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",I=e(document.documentElement),E=e(window),A=a.transitions.css+"transform",O=e.extend,R=".kendoPopup",P=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],M=o.extend({init:function(t,n){var r,a=this;(n=n||{}).isRtl&&(n.origin=n.origin||m+" "+f,n.position=n.position||g+" "+f),o.fn.init.call(a,t,n),t=a.element,n=a.options,a.collisions=n.collision?n.collision.split(" "):[],a.downEvent=i.applyEventMap("down",i.guid()),1===a.collisions.length&&a.collisions.push(a.collisions[0]),r=e(a.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),n.appendTo=e(e(n.appendTo)[0]||r[0]||_),a.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!n.isRtl).css({position:v}).appendTo(n.appendTo).on("mouseenter"+R,function(){a._hovered=!0}).on("mouseleave"+R,function(){a._hovered=!1}),a.wrapper=e(),!1===n.animation&&(n.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),O(n.animation.open,{complete:function(){a.wrapper.css({overflow:y}),a._activated=!0,a._trigger(u)}}),O(n.animation.close,{complete:function(){a._animationClose()}}),a._mousedownProxy=function(e){a._mousedown(e)},a._resizeProxy=function(e){a._resize(e)},n.toggleTarget&&e(n.toggleTarget).on(n.toggleEvent+R,e.proxy(a.toggle,a))},events:[l,u,d,c],options:{name:"Popup",toggleEvent:"click",origin:m+" "+p,position:g+" "+p,anchor:_,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,n,r,o,a=this,s=a.options;a.wrapper.hide(),t=a.wrapper.data(k),n=e(s.anchor),t&&a.wrapper.css(t),s.anchor!=_&&(r=((n.attr("class")||"").match(T)||["","down"])[1],o=S+"-"+r,n.removeClass(o).children(D).removeClass(C).removeClass(o),a.element.removeClass(S+"-"+i.directions[r].reverse)),a._closing=!1,a._trigger(c)},destroy:function(){var t,n=this,r=n.options,a=n.element.off(R);o.fn.destroy.call(n),r.toggleTarget&&e(r.toggleTarget).off(R),r.modal||(I.unbind(n.downEvent,n._mousedownProxy),n._toggleResize(!1)),i.destroy(n.element.children()),a.removeData(),r.appendTo[0]===document.body&&((t=a.parent(".k-animation-container"))[0]?t.remove():a.remove())},open:function(t,n){var r,o,s,d=this,c={isFixed:!isNaN(parseInt(n,10)),x:t,y:n},u=d.element,h=d.options,p="down",f=e(h.anchor),m=u[0]&&u.hasClass("km-widget");if(!d.visible()){if(h.copyAnchorStyles&&(m&&"font-size"==P[0]&&P.shift(),u.css(i.getComputedStyles(f[0],P))),u.data("animating")||d._trigger(l))return;d._activated=!1,h.modal||(I.unbind(d.downEvent,d._mousedownProxy).bind(d.downEvent,d._mousedownProxy),a.mobileOS.ios||a.mobileOS.android||(d._toggleResize(!1),d._toggleResize(!0))),d.wrapper=o=i.wrap(u,h.autosize).css({overflow:b,display:"block",position:v}),a.mobileOS.android&&o.css(A,"translatez(0)"),o.css(w),e(h.appendTo)[0]==document.body&&o.css(g,"-10000px"),r=O(!0,{},h.animation.open),d.flipped=d._position(c),r.effects=i.parseEffects(r.effects,d.flipped),p=r.effects.slideIn?r.effects.slideIn.direction:p,h.anchor!=_&&(s=S+"-"+p,u.addClass(S+"-"+i.directions[p].reverse),f.addClass(s).children(D).addClass(C).addClass(s)),u.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},position:function(){this.visible()&&this._position()},toggle:function(){this[this.visible()?d:l]()},visible:function(){return this.element.is(":"+y)},close:function(t){var n,r,o,a,s=this,l=s.options;if(s.visible()){if(n=s.wrapper[0]?s.wrapper:i.wrap(s.element).hide(),s._toggleResize(!1),s._closing||s._trigger(d))return void s._toggleResize(!0);s.element.find(".k-popup").each(function(){var n=e(this).data("kendoPopup");n&&n.close(t)}),I.unbind(s.downEvent,s._mousedownProxy),t?r={hide:!0,effects:{}}:(r=O(!0,{},l.animation.close),o=s.element.data(x),!(a=r.effects)&&!i.size(a)&&o&&i.size(o)&&(r.effects=o,r.reverse=!0),s._closing=!0),s.element.kendoStop(!0),n.css({overflow:b}),s.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;"resize"===e.type?(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):(!t._hovered||t._activated&&t.element.hasClass("k-list-container"))&&t.close()},_toggleResize:function(e){var t=e?"on":"off";this._scrollableParents()[t]("scroll",this._resizeProxy),E[t]("resize scroll",this._resizeProxy)},_mousedown:function(t){var r=this,o=r.element[0],a=r.options,s=e(a.anchor)[0],l=a.toggleTarget,d=i.eventTarget(t),c=e(d).closest(".k-popup"),u=c.parent().parent(".km-shim").length;c=c[0],(u||!c||c===r.element[0])&&"popover"!==e(t.target).closest("a").data("rel")&&(n(o,d)||n(s,d)||l&&n(e(l)[0],d)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,o,a){var s=0;return a=a||t,o!==r&&o!==h&&r!==h&&(e+a>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){return i.isScrollable(t)})},_position:function(t){var n,r,o,l,d,c,u,h,p,f,g=this,m=g.element,b=g.wrapper,_=g.options,y=e(_.viewport),x=y.offset(),C=e(_.anchor),S=_.origin.toLowerCase().split(" "),T=_.position.toLowerCase().split(" "),D=g.collisions,I=a.zoomLevel(),E=10002,A=!!(y[0]==window&&window.innerWidth&&1.02>=I),R=0,P=document.documentElement,M=A?window.innerWidth:y.width(),F=A?window.innerHeight:y.height();if(A&&P.scrollHeight-P.clientHeight>0&&(M-=i.support.scrollbar()),(n=C.parents().filter(b.siblings()))[0])if(o=Math.max(+n.css("zIndex"),0))E=o+10;else for(l=(r=C.parentsUntil(n)).length;l>R;R++)(o=+e(r[R]).css("zIndex"))&&o>E&&(E=o+10);return b.css("zIndex",E),b.css(t&&t.isFixed?{left:t.x,top:t.y}:g._align(S,T)),d=s(b,w,C[0]===b.offsetParent()[0]),c=s(b),C.offsetParent().parent(".k-animation-container,.k-popup,.k-group").length&&(d=s(b,w,!0),c=s(b)),y[0]===window?(c.top-=window.pageYOffset||document.documentElement.scrollTop||0,c.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(c.top-=x.top,c.left-=x.left),g.wrapper.data(k)||b.data(k,O({},d)),u=O({},c),h=O({},d),p=_.adjustSize,"fit"===D[0]&&(h.top+=g._fit(u.top,b.outerHeight()+p.height,F/I)),"fit"===D[1]&&(h.left+=g._fit(u.left,b.outerWidth()+p.width,M/I)),f=O({},h),"flip"===D[0]&&(h.top+=g._flip(u.top,m.outerHeight(),C.outerHeight(),F/I,S[0],T[0],b.outerHeight())),"flip"===D[1]&&(h.left+=g._flip(u.left,m.outerWidth(),C.outerWidth(),M/I,S[1],T[1],b.outerWidth())),m.css(w,v),b.css(h),h.left!=f.left||h.top!=f.top},_align:function(t,n){var i,r=this,o=r.wrapper,a=e(r.options.anchor),l=t[0],d=t[1],c=n[0],u=n[1],p=s(a),g=e(r.options.appendTo),v=o.outerWidth(),b=o.outerHeight(),_=a.outerWidth(),k=a.outerHeight(),w=p.top,y=p.left,x=Math.round;return g[0]!=document.body&&(w-=(i=s(g)).top,y-=i.left),l===m&&(w+=k),l===h&&(w+=x(k/2)),c===m&&(w-=b),c===h&&(w-=x(b/2)),d===f&&(y+=_),d===h&&(y+=x(_/2)),u===f&&(y-=v),u===h&&(y-=x(v/2)),{top:w,left:y}}});r.plugin(M)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=e.extend,a=window.setTimeout,s="click",l="show",d="hide",c="k-notification",u=".k-notification-wrap .k-i-close",h="info",p="top",f="left",g="bottom",m="right",v=".kendoNotification",b=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),(r=o.options).appendTo&&e(r.appendTo).is(t)||o.element.hide(),o._compileTemplates(r.templates),o._guid="_"+n.guid(),o._isRtl=n.support.isRtl(t),o._compileStacking(r.stacking,r.position.top,r.position.left),n.notify(o)},events:[l,d],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var i=this,r=n.template;i._compiled={},e.each(t,function(t,n){i._compiled[n.type]=r(n.template||e("#"+n.templateId).html())}),i._defaultCompiled=r('<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>')},_getCompiled:function(e){var t=this._defaultCompiled;return e&&this._compiled[e]||t},_compileStacking:function(e,t,n){var i,r,o=this,a={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},s=null!==n?f:m;switch(e){case"down":i=g+" "+s,r=p+" "+s,delete a.paddingBottom;break;case m:i=p+" "+m,r=p+" "+f,delete a.paddingRight;break;case f:i=p+" "+f,r=p+" "+m,delete a.paddingLeft;break;case"up":i=p+" "+s,r=g+" "+s,delete a.paddingTop;break;default:null!==t?(i=g+" "+s,r=p+" "+s,delete a.paddingBottom):(i=p+" "+s,r=g+" "+s,delete a.paddingTop)}o._popupOrigin=i,o._popupPosition=r,o._popupPaddings=a},_attachPopupEvents:function(e,t){function i(e){e.on(s+v,function(){o._hidePopup(t)})}var r,o=this,l=e.allowHideAfter,d=!isNaN(l)&&l>0;t.options.anchor!==document.body&&t.options.origin.indexOf(m)>0&&t.bind("open",function(){var e=n.getShadows(t.element);a(function(){t.wrapper.css("left",parseFloat(t.wrapper.css("left"))+e.left+e.right)})}),e.hideOnClick?t.bind("activate",function(){d?a(function(){i(t.element)},l):i(t.element)}):e.button&&(r=t.element.find(u),d?a(function(){i(r)},l):i(r))},_showPopup:function(t,i){var r,s,l=this,d=i.autoHideAfter,c=i.position.left,h=i.position.top;s=e("."+l._guid+":not(.k-hiding)").last(),r=new n.ui.Popup(t,{anchor:s[0]?s:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:i.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(v),e.sender.element.find(u).off(v),e.sender.destroy()}}),l._attachPopupEvents(i,r),s[0]?r.open():(null===c&&(c=e(window).width()-t.width()-i.position.right),null===h&&(h=e(window).height()-t.height()-i.position.bottom),r.open(c,h)),r.wrapper.addClass(l._guid).css(o({margin:0},l._popupPaddings)),i.position.pinned?(r.wrapper.css("position","fixed"),s[0]&&l._togglePin(r.wrapper,!0)):s[0]||l._togglePin(r.wrapper,!1),d>0&&a(function(){l._hidePopup(r)},d)},_hidePopup:function(e){e.wrapper.addClass("k-hiding"),e.close()},_togglePin:function(t,n){var i=e(window),r=n?-1:1;t.css({top:parseInt(t.css(p),10)+r*i.scrollTop(),left:parseInt(t.css(f),10)+r*i.scrollLeft()})},_attachStaticEvents:function(e,t){function n(e){e.on(s+v,r(i._hideStatic,i,t))}var i=this,o=e.allowHideAfter,l=!isNaN(o)&&o>0;e.hideOnClick?l?a(function(){n(t)},o):n(t):e.button&&(l?a(function(){n(t.find(u))},o):n(t.find(u)))},_showStatic:function(e,t){var n=this,i=t.autoHideAfter,r=t.animation,o="up"==t.stacking||t.stacking==f?"prependTo":"appendTo";e.addClass(n._guid)[o](t.appendTo).hide().kendoAnimate(r.open||!1),n._attachStaticEvents(t,e),i>0&&a(function(){n._hideStatic(e)},i)},_hideStatic:function(e){e.kendoAnimate(o(this.options.animation.close||!1,{complete:function(){e.off(v).find(u).off(v),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger(d,{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(i,r){var a,s,d=this,u=d.options,p=e('<div class="k-widget k-notification"></div>');return r||(r=h),null!==i&&i!==t&&""!==i&&(n.isFunction(i)&&(i=i()),s={typeIcon:r,content:""},a=e.isPlainObject(i)?o(s,i):o(s,{content:i}),p.addClass(c+"-"+r).toggleClass(c+"-button",u.button).attr("data-role","alert").css({width:u.width,height:u.height}).append(d._getCompiled(r)(a)),d.angular("compile",function(){return{elements:p,data:[{dataItem:a}]}}),e(u.appendTo)[0]?d._showStatic(p,u):d._showPopup(p,u),d.trigger(l,{element:p})),d},info:function(e){return this.show(e,h)},success:function(e){return this.show(e,"success")},warning:function(e){return this.show(e,"warning")},error:function(e){return this.show(e,"error")},hide:function(){var t=this;return t.getNotifications().each(t.options.appendTo?function(n,i){t._hideStatic(e(i))}:function(n,i){var r=e(i).data("kendoPopup");r&&t._hidePopup(r)}),t},getNotifications:function(){var t=e("."+this._guid);return this.options.appendTo?t:t.children("."+c)},setOptions:function(e){var n,r=this;i.fn.setOptions.call(r,e),n=r.options,e.templates!==t&&r._compileTemplates(n.templates),(e.stacking!==t||e.position!==t)&&r._compileStacking(n.stacking,n.position.top,n.position.left)},destroy:function(){i.fn.destroy.call(this),this.getNotifications().off(v).find(u).off(v)}});n.ui.plugin(b)}(window.kendo.jQuery),function(e){function t(e){for(;e.length;)n(e),e=e.parent()}function n(e){var t=e.data(a.ns+"title");t&&(e.attr("title",t),e.removeData(a.ns+"title"))}function r(e){var t=e.attr("title");t&&(e.data(a.ns+"title",t),e.attr("title",""))}function o(e){for(;e.length&&!e.is("body");)r(e),e=e.parent()}var a=window.kendo,s=a.ui.Widget,l=a.ui.Popup,d=a.isFunction,c=e.isPlainObject,u=e.extend,h=e.proxy,p=e(document),f=a.isLocalUrl,g="_tt_active",m="aria-describedby",v="show",b="hide",_="error",k="contentLoad",w="requestStart",y="k-content-frame",x=a.template("<iframe frameborder='0' class='"+y+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),C=".kendoTooltip",S={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},T={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},D={bottom:"n",top:"s",left:"e",right:"w",center:"n"},I={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},E=s.extend({init:function(e,t){var n,i=this;s.fn.init.call(i,e,t),n=i.options.position.match(/left|right/)?"horizontal":"vertical",i.dimensions=I[n],i._documentKeyDownHandler=h(i._documentKeyDown,i),i.element.on(i.options.showOn+C,i.options.filter,h(i._showOn,i)).on("mouseenter"+C,i.options.filter,h(i._mouseenter,i)),this.options.autoHide&&i.element.on("mouseleave"+C,i.options.filter,h(i._mouseleave,i))},options:{name:"Tooltip",filter:"",content:function(e){return e.target.data(a.ns+"title")},showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:[v,b,k,_,w],_mouseenter:function(t){o(e(t.currentTarget))},_showOn:function(t){var n=this,i=e(t.currentTarget);n.options.showOn&&n.options.showOn.match(/click|focus/)?n._show(i):(clearTimeout(n.timeout),n.timeout=setTimeout(function(){n._show(i)},n.options.showAfter))},_appendContent:function(e){var t,n=this,i=n.options.content,r=n.content,o=n.options.iframe;c(i)&&i.url?("iframe"in n.options||(o=!f(i.url)),n.trigger(w,{options:i,target:e}),o?(r.hide(),(t=r.find("."+y)[0])?t.src=i.url||t.src:r.html(x({content:i})),r.find("."+y).off("load"+C).on("load"+C,function(){n.trigger(k),r.show()})):(r.empty(),a.ui.progress(r,!0),n._ajaxRequest(i))):i&&d(i)?(i=i({sender:this,target:e}),r.html(i||"")):r.html(i),n.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;i.ajax(u({type:"GET",dataType:"html",cache:!1,error:function(e,n){a.ui.progress(t.content,!1),t.trigger(_,{status:n,xhr:e})},success:h(function(e){a.ui.progress(t.content,!1),t.content.html(e),t.trigger(k)},t)},e))},_documentKeyDown:function(e){e.keyCode===a.keys.ESC&&this.hide()},refresh:function(){var e=this.popup;e&&e.options.anchor&&this._appendContent(e.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){o(e=e||this.element),this._show(e)},_show:function(e){var n=this,i=n.target();n.popup||n._initPopup(),i&&i[0]!=e[0]&&(n.popup.close(),n.popup.element.kendoStop(!0,!0)),i&&i[0]==e[0]||(n._appendContent(e),n.popup.options.anchor=e),n.popup.one("deactivate",function(){t(e),e.removeAttr(m),this.element.removeAttr("id").attr("aria-hidden",!0),p.off("keydown"+C,n._documentKeyDownHandler)}),n.popup.open()},_initPopup:function(){var t=this,n=t.options,i=e(a.template('<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>')({callout:n.callout&&"center"!==n.position,dir:D[n.position],autoHide:n.autoHide}));t.popup=new l(i,u({activate:function(){var e=this.options.anchor,i=e[0].id||t.element[0].id;i&&(e.attr(m,i+g),this.element.attr("id",i+g)),n.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),p.on("keydown"+C,t._documentKeyDownHandler),t.trigger(v)},close:function(){t.trigger(b)},copyAnchorStyles:!1,animation:n.animation},S[n.position])),i.css({width:n.width,height:n.height}),t.content=i.find(".k-tooltip-content"),t.arrow=i.find(".k-callout"),n.autoHide?i.on("mouseleave"+C,h(t._mouseleave,t)):i.on("click"+C,".k-tooltip-button",h(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(n){if(this.popup){var i=e(n.currentTarget),r=i.offset(),o=n.pageX,a=n.pageY;if(r.right=r.left+i.outerWidth(),r.bottom=r.top+i.outerHeight(),o>r.left&&r.right>o&&a>r.top&&r.bottom>a)return;this.popup.close()}else t(e(n.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this,n=t.options.position,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=parseInt(t.arrow.css("border-top-width"),10),d=e(o.element).offset(),c=D[o.flipped?T[n]:n],u=s[r]-d[r]+e(a)[i.size]()/2-l;t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+c).css(r,u)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(C),e.destroy()),this.element.off(C),p.off("keydown"+C,this._documentKeyDownHandler),s.fn.destroy.call(this)}});a.ui.plugin(E)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o=!1;return t.filters&&(r=e.grep(t.filters,function(e){return o=n(e,i),e.filters?e.filters.length:e.field!=i}),o||t.filters.length===r.length||(o=!0),t.filters=r),o}var i,r,o=window.kendo,a=o.ui,s=a.Widget,l=o.keys,d=o.support,c=o.htmlEncode,u=o._activeElement,h=o.data.ObservableArray,p="id",f="change",g="k-state-focused",m="k-state-hover",v="k-loading",b="open",_="close",k="select",w="selected",y="requestStart",x="requestEnd",C="width",S=e.extend,T=e.proxy,D=e.isArray,I=d.browser,E=I.msie&&9>I.version,A=/"/g,O={ComboBox:"DropDownList",DropDownList:"ComboBox"},R=o.ui.DataBoundWidget.extend({init:function(t,n){var i,r=this,o=r.ns;s.fn.init.call(r,t,n),t=r.element,n=r.options,r._isSelect=t.is(k),r._isSelect&&r.element[0].length&&(n.dataSource||(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value")),r.ul=e('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":!0}),r.list=e("<div class='k-list-container'/>").append(r.ul).on("mousedown"+o,T(r._listMousedown,r)),(i=t.attr(p))&&(r.list.attr(p,i+"-list"),r.ul.attr(p,i+"_listbox")),r._header(),r._accessors(),r._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(e){s.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},_listOptions:function(e){var t=this.options;return(e={height:(e=e||{}).height||t.height,dataValueField:e.dataValueField||t.dataValueField,dataTextField:e.dataTextField||t.dataTextField,groupTemplate:e.groupTemplate||t.groupTemplate,fixedGroupTemplate:e.fixedGroupTemplate||t.fixedGroupTemplate,template:e.template||t.template}).template||(e.template="#:"+o.expr(e.dataTextField,"data")+"#"),e},_initList:function(){var n=this,i=n.options,r=i.virtual,a=!!r,s=i.value,l=T(n._listBound,n),d={autoBind:!1,selectable:!0,dataSource:n.dataSource,click:T(n._click,n),change:T(n._listChange,n),activate:T(n._activateItem,n),deactivate:T(n._deactivateItem,n),dataBinding:function(){n.trigger("dataBinding"),n._angularItems("cleanup")},dataBound:l,listBound:l,selectedItemChange:T(n._listChange,n)};d=e.extend(n._listOptions(),d,"object"==typeof r?r:{}),n.listView=a?new o.ui.VirtualList(n.ul,d):new o.ui.StaticList(n.ul,d),s!==t&&n.listView.value(s).done(function(){var e=i.text;!n.listView.filter()&&n.input&&(-1===n.selectedIndex?((e===t||null===e)&&(e=s),n._accessor(s),n.input.val(e),n._placeholder()):-1===n._oldIndex&&(n._oldIndex=n.selectedIndex))})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(e,t){var i=this,r=i.options,o=i.dataSource,a=S({},o.filter()||{}),s=n(a,r.dataTextField);(e||s)&&i.trigger("filtering",{filter:e})||(e&&(a=a.filters||[]).push(e),t?o.read(a):o.filter(a))},_header:function(){var t,n=this,i=n.options.headerTemplate;e.isFunction(i)&&(i=i({})),i&&(n.list.prepend(i),t=n.ul.prev(),n.header=t[0]?t:null,n.header&&n.angular("compile",function(){return{elements:n.header}}))},_initValue:function(){var e=this,t=e.options.value;null!==t?e.element.val(t):(t=e._accessor(),e.options.value=t),e._old=t},_ignoreCase:function(){var e,t=this,n=t.dataSource.reader.model;n&&n.fields&&(e=n.fields[t.options.dataTextField])&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1)},_focus:function(e){return this.listView.focus(e)},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this,t=e.ns;s.fn.destroy.call(e),e._unbindDataSource(),e.listView.destroy(),e.list.off(t),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(n){var i=this;return n===t?i.listView.selectedDataItems()[0]:("number"!=typeof n&&(n=e(i.items()).index(n)),i.dataSource.flatView()[n])},_activateItem:function(){var e=this.listView.focus();e&&this._focused.add(this.filterInput).attr("aria-activedescendant",e.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant")},_accessors:function(){var e=this,t=e.element,n=e.options,i=o.getter,r=t.attr(o.attr("text-field")),a=t.attr(o.attr("value-field"));!n.dataTextField&&r&&(n.dataTextField=r),!n.dataValueField&&a&&(n.dataValueField=a),e._text=i(n.dataTextField),e._value=i(n.dataValueField)},_aria:function(e){var n=this,i=n.options,r=n._focused.add(n.filterInput);i.suggest!==t&&r.attr("aria-autocomplete",i.suggest?"both":"list"),e=e?e+" "+n.ul[0].id:n.ul[0].id,r.attr("aria-owns",e),n.ul.attr("aria-live",i.filter&&"none"!==i.filter?"polite":"off")},_blur:function(){this._change(),this.close()},_change:function(){var e,n=this,i=n.selectedIndex,r=n.options.value,o=n.value();n._isSelect&&!n.listView.isBound()&&r&&(o=r),o!==n._old?e=!0:i!==t&&i!==n._oldIndex&&(e=!0),e&&(n._old=o,n._oldIndex=i,n._typing||n.element.trigger(f),n.trigger(f)),n.typing=!1},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,n=e.options,i=e.element.is("[disabled]");n.enable!==t&&(n.enabled=n.enable),!n.enabled||i?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_dataValue:function(e){var n=this._value(e);return n===t&&(n=this._text(e)),n},_offsetHeight:function(){var t=0;return this.listView.content.prevAll(":visible").each(function(){var n=e(this);t+=n.hasClass("k-list-filter")?n.children().outerHeight():n.outerHeight()}),t},_height:function(e){var t,n,i=this,r=i.list,o=i.options.height,a=i.popup.visible();return e&&(n=r.add(r.parent(".k-animation-container")).show(),o=i.listView.content[0].scrollHeight>o?o:"auto",n.height(o),"auto"!==o&&(t=i._offsetHeight())&&(o-=t),i.listView.content.height(o),a||n.hide()),o},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.wrapper;if(n.data(C)||!i)return t=(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0)?parseFloat(e.width):r.outerWidth(),e&&I.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(C,i),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(b)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(_)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_focusItem:function(){var e=this.listView,n=e.focus(),i=e.select();(i=i[i.length-1])===t&&this.options.highlightFirst&&!n&&(i=0),i!==t?e.focus(i):e.scrollToIndex(0)},_calculateGroupPadding:function(e){var t=this.ul.children(".k-first:first"),n=this.listView.content.prev(".k-group-header"),i=0;n[0]&&"none"!==n[0].style.display&&("auto"!==e&&(i=o.support.scrollbar()),i+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("padding-right"),10),n.css("padding-right",i))},_firstOpen:function(){var e=this._height(this.dataSource.flatView().length);this._calculateGroupPadding(e)},_popup:function(){var e=this;e.popup=new a.Popup(e.list,S({},e.options.popup,{anchor:e.wrapper,open:T(e._openHandler,e),close:T(e._closeHandler,e),animation:e.options.animation,isRtl:d.isRtl(e.wrapper)})),e.options.virtual||e.popup.one(b,T(e._firstOpen,e))},_makeUnselectable:function(){E&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(m,"mouseenter"===t.type)},_toggle:function(e,n){var i=this,r=d.mobileOS&&(d.touch||d.MSPointers||d.pointers);e=e!==t?e:!i.popup.visible(),n||r||i._focused[0]===u()||(i._prevent=!0,i._focused.focus(),i._prevent=!1),i[e?b:_]()},_triggerCascade:function(){var e=this;e._cascadeTriggered&&e._old===e.value()&&e._oldIndex===e.selectedIndex||(e._cascadeTriggered=!0,e.trigger("cascade",{userTriggered:e._userTriggered}))},_unbindDataSource:function(){var e=this;e.dataSource.unbind(y,e._requestStartHandler).unbind(x,e._requestEndHandler).unbind("error",e._errorHandler)}});S(R,{inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;i>n;n++)if(e===r[n])return n;return-1}}),o.ui.List=R,a.Select=R.extend({init:function(e,t){R.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){var t,n=this;n.options.dataSource=e,n._dataSource(),n.listView.setDataSource(n.dataSource),n.options.autoBind&&n.dataSource.fetch(),(t=n._parentWidget())&&n._cascadeSelect(t)},close:function(){this.popup.close()},select:function(e){var n=this;return e===t?n.selectedIndex:(n._select(e),n._old=n._accessor(),n._oldIndex=n.selectedIndex,t)},search:function(e){var t,n,i,r,o,a;t=this,n=(e="string"==typeof e?e:this.text()).length,r=(i=t.options).ignoreCase,o=i.filter,a=i.dataTextField,clearTimeout(t._typingTimeout),(!n||n>=i.minLength)&&(t._state="filter",t.listView.filter(!0),"none"===o?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:a,operator:o,ignoreCase:r})))},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var n=this.element[0];return e===t?n.value:(null===e&&(e=""),n.value=e,t)},_accessorSelect:function(e,n){var i,r=this.element[0],o=r.selectedIndex;return e===t?(o>-1&&(i=r.options[o]),i&&(e=i.value),e||""):(o>-1&&r.options[o].removeAttribute(w),n===t&&(n=-1),null!==e&&""!==e&&-1==n?this._custom(e):(e?r.value=e:r.selectedIndex=n,r.selectedIndex>-1&&(i=r.options[r.selectedIndex]),i&&i.setAttribute(w,w)),t)},_custom:function(t){var n=this,i=n.element,r=n._customOption;r||(r=e("<option/>"),n._customOption=r,i.append(r)),r.text(t),r[0].setAttribute(w,w),r[0].selected=!0},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(v),e._focused.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&(e._focused.attr("aria-busy",!0),e._arrow.addClass(v))},100))},_requestEnd:function(){this._request=!1,this._hideBusy()},_dataSource:function(){var t,n=this,i=n.element,r=n.options,a=r.dataSource||{};a=e.isArray(a)?{data:a}:a,n._isSelect&&((t=i[0].selectedIndex)>-1&&(r.index=t),a.select=i,a.fields=[{field:r.dataTextField},{field:r.dataValueField}]),n.dataSource?n._unbindDataSource():(n._requestStartHandler=T(n._showBusy,n),n._requestEndHandler=T(n._requestEnd,n),n._errorHandler=T(n._hideBusy,n)),n.dataSource=o.data.DataSource.create(a).bind(y,n._requestStartHandler).bind(x,n._requestEndHandler).bind("error",n._errorHandler)},_firstItem:function(){this.listView.first()},_lastItem:function(){this.listView.last()},_nextItem:function(){this.listView.next()},_prevItem:function(){this.listView.prev()},_move:function(e){var n,i,r,o,a=this,s=e.keyCode,d=s===l.DOWN;if(s===l.UP||d){if(e.altKey)a.toggle(d);else{if(!a.listView.isBound())return a._fetch||(a.dataSource.one(f,function(){a._fetch=!1,a._move(e)}),a._fetch=!0,a._filterSource()),e.preventDefault(),!0;if(r=a._focus(),a._fetch||r&&!r.hasClass("k-state-selected")||(d?(a._nextItem(),a._focus()||a._lastItem()):(a._prevItem(),a._focus()||a._firstItem())),a.trigger(k,{item:a.listView.focus()}))return a._focus(r),t;a._select(a._focus(),!0),a.popup.visible()||a._blur()}e.preventDefault(),i=!0}else if(s===l.ENTER||s===l.TAB){if(a.popup.visible()&&e.preventDefault(),r=a._focus(),n=a.dataItem(),a.popup.visible()||n&&a.text()===a._text(n)||(r=null),o=a.filterInput&&a.filterInput[0]===u(),r){if(a.trigger(k,{item:r}))return;a._select(r)}else a.input&&(a._accessor(a.input.val()),a.listView.value(a.input.val()));a._focusElement&&a._focusElement(a.wrapper),o&&s===l.TAB?a.wrapper.focusout():a._blur(),a.close(),i=!0}else s===l.ESC&&(a.popup.visible()&&e.preventDefault(),a.close(),i=!0);return i},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;e._request||e.options.cascadeFrom||e.listView.isBound()||e._fetch||t||(e._fetch=!0,e.dataSource.fetch().done(function(){e._fetch=!1}))},_options:function(e,n,i){var r,o,a,s,l=this,d=l.element,u=e.length,h="",p=0;for(n&&(h=n);u>p;p++)r="<option",o=e[p],a=l._text(o),(s=l._value(o))!==t&&(-1!==(s+="").indexOf('"')&&(s=s.replace(A,"&quot;")),r+=' value="'+s+'"'),r+=">",a!==t&&(r+=c(a)),h+=r+="</option>";d.html(h),i!==t&&(d[0].value=i,d[0].value&&!i&&(d[0].selectedIndex=-1))},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_parentWidget:function(){var t=this.options.name,n=e("#"+this.options.cascadeFrom),i=n.data("kendo"+t);return i||(i=n.data("kendo"+O[t])),i},_cascade:function(){var e,t=this,n=t.options;if(n.cascadeFrom){if(!(e=t._parentWidget()))return;n.autoBind=!1,e.first("cascade",function(n){t._userTriggered=n.userTriggered,t.listView.isBound()&&t._clearSelection(e,!0),t._cascadeSelect(e)}),e.listView.isBound()?t._cascadeSelect(e):e.value()||t.enable(!1)}},_cascadeChange:function(e){var t=this,n=t._accessor();t._userTriggered?t._clearSelection(e,!0):n?(n!==t.listView.value()[0]&&t.value(n),t.dataSource.view()[0]&&-1!==t.selectedIndex||t._clearSelection(e,!0)):t.dataSource.flatView().length&&t.select(t.options.index),t.enable(),t._triggerCascade(),t._userTriggered=!1},_cascadeSelect:function(e){var t,i,r,o=this,a=e.dataItem(),s=a?e._value(a):null,l=o.options.cascadeFromField||e.options.dataValueField;s||0===s?(n(t=o.dataSource.filter()||{},l),(i=t.filters||[]).push({field:l,operator:"eq",value:s}),r=function(){o.unbind("dataBound",r),o._cascadeChange(e)},o.first("dataBound",r),o.dataSource.filter(i)):(o.enable(!1),o._clearSelection(e),o._triggerCascade(),o._userTriggered=!1)}}),i=".StaticList",r=o.ui.DataBoundWidget.extend({init:function(t,n){s.fn.init.call(this,t,n),this.element.attr("role","listbox").on("click"+i,"li",T(this._click,this)).on("mouseenter"+i,"li",function(){e(this).addClass(m)}).on("mouseleave"+i,"li",function(){e(this).removeClass(m)}),this.content=this.element.wrap("<div unselectable='on'></div>").parent().css({overflow:"auto",position:"relative"}),this.header=this.content.before('<div class="k-group-header" style="display:none"></div>').prev(),this._bound=!1,this._optionID=o.guid(),this._selectedIndices=[],this._view=[],this._dataItems=[],this._values=[];var r=this.options.value;r&&(this._values=e.isArray(r)?r.slice(0):[r]),this._getter(),this._templates(),this.setDataSource(this.options.dataSource),this._onScroll=T(function(){var e=this;clearTimeout(e._scrollId),e._scrollId=setTimeout(function(){e._renderHeader()},50)},this)},options:{name:"StaticList",dataValueField:null,selectable:!0,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click","change","activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(t){var n,i=this,r=t||{};r=e.isArray(r)?{data:r}:r,r=o.data.DataSource.create(r),i.dataSource?(i.dataSource.unbind(f,i._refreshHandler),n=i.value(),i.value([]),i._bound=!1,i.value(n)):i._refreshHandler=T(i.refresh,i),i.dataSource=r.bind(f,i._refreshHandler),i._fixedHeader()},setOptions:function(e){s.fn.setOptions.call(this,e),this._getter(),this._templates(),this._render()},destroy:function(){this.element.off(i),this._refreshHandler&&this.dataSource.unbind(f,this._refreshHandler),s.fn.destroy.call(this)},scrollToIndex:function(e){var t=this.element[0].children[e];t&&this.scroll(t)},scroll:function(e){if(e){e[0]&&(e=e[0]);var t=this.content[0],n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i;r>n?r=n:a>r+o&&(r=a-o),t.scrollTop=r}},selectedDataItems:function(n){var i=this._valueGetter;return n===t?this._dataItems.slice():(this._dataItems=n,this._values=e.map(n,function(e){return i(e)}),t)},next:function(){var e=this.focus();e=e?e.next():0,this.focus(e)},prev:function(){var e=this.focus();e=e?e.prev():this.element[0].children.length-1,this.focus(e)},first:function(){this.focus(this.element[0].children[0])},last:function(){this.focus(this.element[0].children[this.element[0].children.length-1])},focus:function(n){var i,r=this,o=r._optionID;return n===t?r._current:(n=(n=r._get(n))[n.length-1],n=e(this.element[0].children[n]),r._current&&(r._current.removeClass(g).removeAttr("aria-selected").removeAttr(p),r.trigger("deactivate")),(i=!!n[0])&&(n.addClass(g),r.scroll(n),n.attr("id",o)),r._current=i?n:null,r.trigger("activate"),t)},focusIndex:function(){return this.focus()?this.focus().index():t},filter:function(e){return e===t?this._filtered:(this._filtered=e,t)},skipUpdate:function(e){this._skipUpdate=e},select:function(n){var i,r=this,o=r.options.selectable,a="multiple"!==o&&!1!==o,s=r._selectedIndices,l=[],d=[];if(n===t)return s.slice();if(1===(n=r._get(n)).length&&-1===n[0]&&(n=[]),!r._filtered||a||!r._deselectFiltered(n)){if(a&&!r._filtered&&-1!==e.inArray(n[n.length-1],s))return r._dataItems.length&&r._view.length&&(r._dataItems=[r._view[s[0]].item]),t;d=(i=r._deselect(n)).removed,(n=i.indices).length&&(a&&(n=[n[n.length-1]]),l=r._select(n)),(l.length||d.length)&&(r._valueComparer=null,r.trigger("change",{added:l,removed:d}))}},removeAt:function(e){return this._selectedIndices.splice(e,1),this._values.splice(e,1),this._valueComparer=null,{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(t){t=e.isArray(t)||t instanceof h?t.slice(0):[t],this._values=t,this._valueComparer=null},value:function(n){var i,r=this,o=r._valueDeferred;return n===t?r._values.slice():(r.setValue(n),o&&"resolved"!==o.state()||(r._valueDeferred=o=e.Deferred()),r.isBound()&&(i=r._valueIndices(r._values),"multiple"===r.options.selectable&&r.select(-1),r.select(i),o.resolve()),r._skipUpdate=!1,o)},_click:function(t){t.isDefaultPrevented()||this.trigger("click",{item:e(t.currentTarget)})},_valueExpr:function(e,n){var i,r,o,a=this,s=0,l=[];if(!a._valueComparer||a._valueType!==e){for(a._valueType=e;n.length>s;s++)(i=n[s])!==t&&""!==i&&null!==i&&("boolean"===e?i=!!i:"number"===e?i=+i:"string"===e&&(i=""+i)),l.push(i);r="for (var idx = 0; idx < "+l.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;",o=Function(["current","values"],r),a._valueComparer=function(e){return o(e,l)}}return a._valueComparer},_dataItemPosition:function(e,t){var n=this._valueGetter(e);return this._valueExpr(typeof n,t)(n)},_getter:function(){this._valueGetter=o.getter(this.options.dataValueField)},_deselect:function(t){var n,i,r,o=this,a=o.element[0].children,s=o.options.selectable,l=o._selectedIndices,d=o._dataItems,c=o._values,u=[],h=0,p=0;if(t=t.slice(),!0!==s&&t.length){if("multiple"===s)for(;t.length>h;h++)if(i=t[h],e(a[i]).hasClass("k-state-selected"))for(n=0;l.length>n;n++)if((r=l[n])===i){e(a[r]).removeClass("k-state-selected"),u.push({position:n+p,dataItem:d.splice(n,1)[0]}),l.splice(n,1),t.splice(h,1),c.splice(n,1),p+=1,h-=1,n-=1;break}}else{for(;l.length>h;h++)e(a[l[h]]).removeClass("k-state-selected"),u.push({position:h,dataItem:d[h]});o._values=[],o._dataItems=[],o._selectedIndices=[]}return{indices:t,removed:u}},_deselectFiltered:function(t){for(var n,i,r,o=this.element[0].children,a=[],s=0;t.length>s;s++)i=t[s],n=this._view[i].item,(r=this._dataItemPosition(n,this._values))>-1&&(a.push(this.removeAt(r)),e(o[i]).removeClass("k-state-selected"));return!!a.length&&(this.trigger("change",{added:[],removed:a}),!0)},_select:function(t){var n,i,r=this,o=r.element[0].children,a=r._view,s=[],l=0;for(-1!==t[t.length-1]&&r.focus(t);t.length>l;l++)n=a[i=t[l]],-1!==i&&n&&(n=n.item,r._selectedIndices.push(i),r._dataItems.push(n),r._values.push(r._valueGetter(n)),e(o[i]).addClass("k-state-selected").attr("aria-selected",!0),s.push({dataItem:n}));return s},_get:function(n){return"number"==typeof n?n=[n]:D(n)||((n=e(n).data("offset-index"))===t&&(n=-1),n=[n]),n},_template:function(){var e=this.options,t=e.template;return t?(t=o.template(t),t=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+t(e)+"</li>"}):t=o.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+o.expr(e.dataTextField,"data")+"}</li>",{useWithBlock:!1}),t},_templates:function(){var e,t,n={template:this.options.template,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(t in n)(e=n[t])&&"function"!=typeof e&&(n[t]=o.template(e));this.templates=n},_normalizeIndices:function(e){for(var n=[],i=0;e.length>i;i++)e[i]!==t&&n.push(e[i]);return n},_valueIndices:function(e,t){var n,i=this._view,r=0;if(t=t?t.slice():[],!e.length)return[];for(;i.length>r;r++)-1!==(n=this._dataItemPosition(i[r].item,e))&&(t[n]=r);return this._normalizeIndices(t)},_firstVisibleItem:function(){for(var t=this.element[0],n=this.content[0].scrollTop,i=e(t.children[0]).height(),r=Math.floor(n/i)||0,o=t.children[r]||t.lastChild,a=n>o.offsetTop;o;)if(a){if(o.offsetTop+i>n||!o.nextSibling)break;o=o.nextSibling}else{if(n>=o.offsetTop||!o.previousSibling)break;o=o.previousSibling}return this._view[e(o).data("offset-index")]},_fixedHeader:function(){this.isGrouped()&&this.templates.fixedGroupTemplate?(this.header.show(),this.content.scroll(this._onScroll)):(this.header.hide(),this.content.off("scroll",this._onScroll))},_renderHeader:function(){var e,t=this.templates.fixedGroupTemplate;t&&(e=this._firstVisibleItem())&&this.header.html(t(e.group))},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" class="k-item',n=e.item,i=0!==e.index,r=e.selected;return i&&e.newGroup&&(t+=" k-first"),r&&(t+=" k-state-selected"),t+='"'+(r?' aria-selected="true"':"")+' data-offset-index="'+e.index+'">',t+=this.templates.template(n),i&&e.newGroup&&(t+='<div class="k-group">'+this.templates.groupTemplate(e.group)+"</div>"),t+"</li>"},_render:function(){var e,t,n,i,r="",o=0,a=0,s=[],l=this.dataSource.view(),d=this.value(),c=this.isGrouped();if(c)for(o=0;l.length>o;o++)for(t=l[o],n=!0,i=0;t.items.length>i;i++)e={selected:this._selected(t.items[i],d),item:t.items[i],group:t.value,newGroup:n,index:a},s[a]=e,a+=1,r+=this._renderItem(e),n=!1;else for(o=0;l.length>o;o++)e={selected:this._selected(l[o],d),item:l[o],index:o},s[o]=e,r+=this._renderItem(e);this._view=s,this.element[0].innerHTML=r,c&&s.length&&this._renderHeader()},_selected:function(e,t){return(!this._filtered||"multiple"===this.options.selectable)&&-1!==this._dataItemPosition(e,t)},refresh:function(e){var t,n=this,i=e&&e.action;n.trigger("dataBinding"),n._fixedHeader(),n._render(),n._bound=!0,"itemchange"===i?(t=function(e,t){var n,i,r,o=t.length,a=[];for(i=0;e.length>i;i++)for(n=e[i],r=0;o>r;r++)n===t[r]&&a.push({index:i,item:n});return a}(n._dataItems,e.items)).length&&n.trigger("selectedItemChange",{items:t}):n._filtered||n._skipUpdate?(n.focus(0),n._skipUpdate&&(n._skipUpdate=!1,n._selectedIndices=n._valueIndices(n._values,n._selectedIndices))):i&&"add"!==i||n.value(n._values),n._valueDeferred&&n._valueDeferred.resolve(),n.trigger("dataBound")},isBound:function(){return this._bound},isGrouped:function(){return(this.dataSource.group()||[]).length}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){var r,o=e.getFullYear(),a=t.getFullYear(),s=n.getFullYear();return r=(o-=o%i)+(i-1),a>o&&(o=a),r>s&&(r=s),o+"-"+r}function i(e){for(var t,n=0,i=e.min,r=e.max,o=e.start,a=e.setter,l=e.build,d=e.cells||12,c=e.perRow||4,u=e.content||I,h=e.empty||E,p=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';d>n;n++)n>0&&n%c==0&&(p+='</tr><tr role="row">'),t=l(o,n),p+=s(o,i,r)?u(t):h(t),a(o,1);return p+"</tr></tbody></table>"}function r(e,t,n){var i=e.getFullYear(),r=t.getFullYear(),o=r,a=0;return n&&(o=(r-=r%n)-r%n+n-1),i>o?a=1:r>i&&(a=-1),a}function o(){var e=new se;return new se(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t,n){var i=o();return e&&(i=new se(+e)),t>i?i=new se(+t):i>n&&(i=new se(+n)),i}function s(e,t,n){return+e>=+t&&+n>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function d(e,t,n){t=t instanceof se?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function c(t){e(this).toggleClass(B,J.indexOf(t.type)>-1||t.type==Q)}function u(e){e.preventDefault()}function h(e){return S(e).calendars.standard}function p(e){var n=le[e.start],i=le[e.depth],r=S(e.culture);e.format=x(e.format||r.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=N),(i===t||i>n)&&(e.depth=N),e.dates||(e.dates=[])}function f(e){O&&e.find("*").attr("unselectable","on")}var g,m=window.kendo,v=m.support,b=m.ui,_=b.Widget,k=m.keys,w=m.parseDate,y=m.date.adjustDST,x=m._extractFormat,C=m.template,S=m.getCulture,T=m.support.transitions,D=T?T.css+"transform-origin":"",I=C('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),E=C('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),A=m.support.browser,O=A.msie&&9>A.version,R=".kendoCalendar",P="click"+R,M="id",F="left",H="slideIn",N="month",$="century",L="change",z="navigate",j="value",B="k-state-hover",U="k-state-disabled",V="k-state-focused",W="k-other-month",G=' class="'+W+'"',q="k-nav-today",K="td:has(.k-link)",Y="blur"+R,Q="focus",X=Q+R,J=v.touch?"touchstart":"mouseenter",Z=v.touch?"touchstart"+R:"mouseenter"+R,ee=v.touch?"touchend"+R+" touchmove"+R:"mouseleave"+R,te="_prevArrow",ne="_nextArrow",ie="aria-disabled",re="aria-selected",oe=e.proxy,ae=e.extend,se=Date,le={month:0,year:1,decade:2,century:3},de=_.extend({init:function(t,n){var i,r,o=this;_.fn.init.call(o,t,n),t=o.wrapper=o.element,(n=o.options).url=window.unescape(n.url),o._templates(),o._header(),o._footer(o.footer),(r=t.addClass("k-widget k-calendar").on(Z+" "+ee,K,c).on("keydown.kendoCalendar","table.k-content",oe(o._move,o)).on(P,K,function(t){var n=t.currentTarget.firstChild;-1!=n.href.indexOf("#")&&t.preventDefault(),o._click(e(n))}).on("mouseup"+R,"table.k-content, .k-footer",function(){o._focusView(!1!==o.options.focusOnNav)}).attr(M))&&(o._cellID=r+"_cell_selected"),p(n),i=w(n.value,n.format,n.culture),o._index=le[n.start],o._current=new se(+a(i,n.min,n.max)),o._addClassProxy=function(){o._active=!0,o._cell.addClass(V)},o._removeClassProxy=function(){o._active=!1,o._cell.removeClass(V)},o.value(i),m.notify(o)},options:{name:"Calendar",value:null,min:new se(1900,0,1),max:new se(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:N,depth:N,animation:{horizontal:{effects:H,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[L,z],setOptions:function(e){var t=this;p(e),e.dates[0]||(e.dates=t.options.dates),_.fn.setOptions.call(t,e),t._templates(),t._footer(t.footer),t._index=le[t.options.start],t.navigate()},destroy:function(){var e=this,t=e._today;e.element.off(R),e._title.off(R),e[te].off(R),e[ne].off(R),m.destroy(e._table),t&&m.destroy(t.off(R)),_.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(te,-1)},navigateToFuture:function(){this._navigate(ne,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(U)||e.navigate(e._current,++t)},navigateDown:function(e){var n=this,i=n._index,r=n.options.depth;if(e)return i===le[r]?(+n._value!=+e&&(n.value(e),n.trigger(L)),t):(n.navigate(e,--i),t)},navigate:function(n,i){i=isNaN(i)?le[i]:i;var r,o,s,l,d=this,c=d.options,u=c.culture,h=c.min,p=c.max,m=d._title,v=d._table,b=d._oldTable,_=d._value,k=d._current,w=n&&+n>+k,y=i!==t&&i!==d._index;n||(n=k),d._current=n=new se(+a(n,h,p)),i===t?i=d._index:d._index=i,d._view=o=g.views[i],s=o.compare,l=i===le[$],m.toggleClass(U,l).attr(ie,l),l=s(n,h)<1,d[te].toggleClass(U,l).attr(ie,l),l=s(n,p)>-1,d[ne].toggleClass(U,l).attr(ie,l),v&&b&&b.data("animating")&&(b.kendoStop(!0,!0),v.kendoStop(!0,!0)),d._oldTable=v,(!v||d._changeView)&&(m.html(o.title(n,h,p,u)),d._table=r=e(o.content(ae({min:h,max:p,date:n,url:c.url,dates:c.dates,format:c.format,culture:u},d[o.name]))),f(r),d._animate({from:v,to:r,vertical:y,future:w}),d._focus(n),d.trigger(z)),i===le[c.depth]&&_&&d._class("k-state-selected",o.toDateString(_)),d._class(V,o.toDateString(n)),!v&&d._cell&&d._cell.removeClass(V),d._changeView=!0},value:function(e){var n=this,i=n._view,r=n.options,o=n._view,a=r.min,l=r.max;return e===t?n._value:(null!==(e=w(e,r.format,r.culture))&&(s(e=new se(+e),a,l)||(e=null)),n._value=e,o&&null===e&&n._cell?n._cell.removeClass("k-state-selected"):(n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)),t)},_move:function(t){var n,i,r,o,s=this,l=s.options,d=t.keyCode,c=s._view,u=s._index,h=new se(+s._current),p=m.support.isRtl(s.wrapper);return t.target===s._table[0]&&(s._active=!0),t.ctrlKey?d==k.RIGHT&&!p||d==k.LEFT&&p?(s.navigateToFuture(),i=!0):d==k.LEFT&&!p||d==k.RIGHT&&p?(s.navigateToPast(),i=!0):d==k.UP?(s.navigateUp(),i=!0):d==k.DOWN&&(s._click(e(s._cell[0].firstChild)),i=!0):(d==k.RIGHT&&!p||d==k.LEFT&&p?(n=1,i=!0):d==k.LEFT&&!p||d==k.RIGHT&&p?(n=-1,i=!0):d==k.UP?(n=0===u?-7:-4,i=!0):d==k.DOWN?(n=0===u?7:4,i=!0):d==k.ENTER?(s._click(e(s._cell[0].firstChild)),i=!0):d==k.HOME||d==k.END?(o=c[r=d==k.HOME?"first":"last"](h),h=new se(o.getFullYear(),o.getMonth(),o.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()),i=!0):d==k.PAGEUP?(i=!0,s.navigateToPast()):d==k.PAGEDOWN&&(i=!0,s.navigateToFuture()),(n||r)&&(r||c.setDate(h,n),s._focus(a(h,l.min,l.max)))),i&&t.preventDefault(),s._current},_animate:function(e){var t=this,n=e.from,i=e.to,r=t._active;n?n.parent().data("animating")?(n.off(R),n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild),t._focusView(r)):n.is(":visible")&&!1!==t.options.animation?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.off(R).remove(),t._focusView(r)):(i.insertAfter(t.element[0].firstChild),t._bindTable(i))},_horizontal:function(e,t,n){var i=this,r=i._active,o=i.options.animation.horizontal,a=o.effects,s=e.outerWidth();a&&-1!=a.indexOf(H)&&(e.add(t).css({width:s}),e.wrap("<div/>"),i._focusView(r,e),e.parent().css({position:"relative",width:2*s,float:F,"margin-left":n?0:-s}),t[n?"insertAfter":"insertBefore"](e),ae(o,{effects:H+":"+(n?"right":F),complete:function(){e.off(R).remove(),i._oldTable=null,t.unwrap(),i._focusView(r)}}),e.parent().kendoStop(!0,!0).kendoAnimate(o))},_vertical:function(e,t){var n,i,r=this,o=r.options.animation.vertical,a=o.effects,s=r._active;a&&-1!=a.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),D&&(i=(i=(n=r._cellByDate(r._view.toDateString(r._current))).position()).left+parseInt(n.width()/2,10)+"px "+(i.top+parseInt(n.height()/2,10))+"px",t.css(D,i)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(R).remove(),r._oldTable=null,t.css({position:"static",top:0,left:0}),r._focusView(s)}}),t.kendoStop(!0,!0).kendoAnimate(o))},_cellByDate:function(t){return this._table.find("td:not(."+W+")").filter(function(){return e(this.firstChild).attr(m.attr(j))===t})},_class:function(t,n){var i=this,r=i._cellID,o=i._cell;o&&o.removeAttr(re).removeAttr("aria-label").removeAttr(M),o=i._table.find("td:not(."+W+")").removeClass(t).filter(function(){return e(this.firstChild).attr(m.attr(j))===n}).attr(re,!0),t!==V||i._active||!1===i.options.focusOnNav||(t=""),o.addClass(t),o[0]&&(i._cell=o),r&&(o.attr(M,r),i._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(X,this._addClassProxy).on(Y,this._removeClassProxy)},_click:function(e){var t=this,n=t.options,i=new Date(+t._current),r=e.attr(m.attr(j)).split("/");r=new se(r[0],r[1],r[2]),y(r,0),t._view.setDate(i,r),t.navigateDown(a(i,n.min,n.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):(t._current=e,t._class(V,n.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(n){var i=this,r=o(),a=i.element,s=a.find(".k-footer");return n?(s[0]||(s=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(a)),i._today=s.show().find(".k-link").html(n(r)).attr("title",m.toString(r,"D",i.options.culture)),i._toggle(),t):(i._toggle(!1),s.hide(),t)},_header:function(){var e,t=this,n=t.element;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").on(Z+" "+ee+" "+X+" "+Y,c).click(!1),t._title=e.eq(1).on(P,function(){t._active=!1!==t.options.focusOnNav,t.navigateUp()}),t[te]=e.eq(0).on(P,function(){t._active=!1!==t.options.focusOnNav,t.navigateToPast()}),t[ne]=e.eq(2).on(P,function(){t._active=!1!==t.options.focusOnNav,t.navigateToFuture()})},_navigate:function(e,t){var n=this,i=n._index+1,r=new se(+n._current);(e=n[e]).hasClass(U)||(i>3?r.setFullYear(r.getFullYear()+100*t):g.views[i].setDate(r,t),n.navigate(r))},_option:function(e,n){var i,r=this,o=r.options,a=r._value||r._current;return n===t?o[e]:((n=w(n,o.format,o.culture))&&(o[e]=new se(+n),((i="min"===e?n>a:a>n)||function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}(a,n))&&(i&&(r._value=null),r._changeView=!0),r._changeView||(r._changeView=!(!o.month.content&&!o.month.empty)),r.navigate(r._value),r._toggle()),t)},_toggle:function(e){var n=this,i=n.options,r=n._today;e===t&&(e=s(o(),i.min,i.max)),r&&(r.off(P),e?r.addClass(q).removeClass(U).on(P,oe(n._todayClick,n)):r.removeClass(q).addClass(U).on(P,u))},_todayClick:function(e){var t=this,n=le[t.options.depth],i=o();e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger(L)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,r=i.content,o=i.empty;e.month={content:C('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+m.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:C('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},e.footer=!1!==n?C(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}):null}});b.plugin(de),(g={firstDayOfMonth:function(e){return new se(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){for(var n=(t=t||m.culture().calendar).firstDay,i=new se(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)g.setTime(i,-864e5);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new se(e.getTime()+t),r=i.getTimezoneOffset()-n;e.setTime(i.getTime()+6e4*r)},views:[{name:N,title:function(e,t,n,i){return h(i).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,n=0,r=e.min,o=e.max,a=e.date,s=e.dates,d=e.format,c=e.culture,u=e.url,p=u&&s[0],f=h(c),v=f.firstDay,b=f.days,_=l(b.names,v),k=l(b.namesShort,v),w=g.firstVisibleDay(a,f),x=t.first(a),C=t.last(a),S=t.toDateString,T=new se,D='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>n;n++)D+='<th scope="col" title="'+_[n]+'">'+k[n]+"</th>";return T=new se(T.getFullYear(),T.getMonth(),T.getDate()),y(T,0),T=+T,w=new se(w.getFullYear(),w.getMonth(),w.getDate()),y(w,0),i({cells:42,perRow:7,html:D+='</tr></thead><tbody><tr role="row">',start:w,min:new se(r.getFullYear(),r.getMonth(),r.getDate()),max:new se(o.getFullYear(),o.getMonth(),o.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],n=e.getDay(),i="",r="#";return(x>e||e>C)&&t.push(W),+e===T&&t.push("k-today"),(0===n||6===n)&&t.push("k-weekend"),p&&function(e,t){for(var n=0,i=t.length;i>n;n++)if(e===+t[n])return!0;return!1}(+e,s)&&(r=u.replace("{0}",m.toString(e,d,c)),i=" k-action-link"),{date:e,dates:s,ns:m.ns,title:m.toString(e,"D",c),value:e.getDate(),dateString:S(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:i,url:r}}})},first:function(e){return g.firstDayOfMonth(e)},last:function(e){var t=new se(e.getFullYear(),e.getMonth()+1,0),n=g.firstDayOfMonth(e),i=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return i&&t.setHours(n.getHours()+i/60),t},compare:function(e,t){var n=e.getMonth(),i=e.getFullYear(),r=t.getMonth(),o=t.getFullYear();return i>o?1:o>i?-1:n==r?0:n>r?1:-1},setDate:function(e,t){var n=e.getHours();t instanceof se?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):g.setTime(e,864e5*t),y(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,n=this.toDateString,r=e.min,o=e.max;return i({min:new se(r.getFullYear(),r.getMonth(),1),max:new se(o.getFullYear(),o.getMonth(),1),start:new se(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:m.ns,dateString:n(e),cssClass:""}}})},first:function(e){return new se(e.getFullYear(),0,e.getDate())},last:function(e){return new se(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var n,i=e.getHours();t instanceof se?(n=t.getMonth(),e.setFullYear(t.getFullYear(),n,e.getDate()),n!==e.getMonth()&&e.setDate(0)):(n=e.getMonth()+t,e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)),y(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return n(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString;return i({start:new se(t-t%10-1,0,1),min:new se(e.min.getFullYear(),0,1),max:new se(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:m.ns,dateString:n(e),cssClass:0===t||11==t?G:""}}})},first:function(e){var t=e.getFullYear();return new se(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new se(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){d(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:$,title:function(e,t,i){return n(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),r=e.max.getFullYear(),o=this.toDateString,a=n,s=r;return 10>(s-=s%10)-(a-=a%10)&&(s=a+9),i({start:new se(t-t%100-10,0,1),min:new se(a,0,1),max:new se(s,0,1),setter:this.setDate,build:function(e,t){var i=e.getFullYear(),a=i+9;return n>i&&(i=n),a>r&&(a=r),{ns:m.ns,value:i+" - "+a,dateString:o(e),cssClass:0===t||11==t?G:""}}})},first:function(e){var t=e.getFullYear();return new se(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new se(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){d(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]}).isEqualDatePart=function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},g.makeUnselectable=f,g.restrictValue=a,g.isInRange=s,g.normalize=p,g.viewsEnum=le,m.calendar=g}(window.kendo.jQuery),function(e,t){function n(t){var n=t.parseFormats,i=t.format;R.normalize(t),(n=e.isArray(n)?n:[n]).length||n.push("yyyy-MM-dd"),-1===e.inArray(i,n)&&n.splice(0,0,t.format),t.parseFormats=n}function i(e){e.preventDefault()}var r,o=window.kendo,a=o.ui,s=a.Widget,l=o.parseDate,d=o.keys,c=o.template,u=o._activeElement,h="<div />",p="<span />",f=".kendoDatePicker",g="click"+f,m="open",v="close",b="change",_="disabled",k="readonly",w="k-state-default",y="k-state-focused",x="k-state-selected",C="k-state-disabled",S="mousedown"+f,T="id",D="month",I="aria-disabled",E="aria-expanded",A="aria-hidden",O="aria-readonly",R=o.calendar,P=R.isInRange,M=R.restrictValue,F=R.isEqualDatePart,H=e.extend,N=e.proxy,$=Date,L=function(t){var n,i=this,r=document.body,s=e(h).attr(A,"true").addClass("k-calendar-container").appendTo(r);i.options=t=t||{},(n=t.id)&&(n+="_dateview",s.attr(T,n),i._dateViewID=n),i.popup=new a.Popup(s,H(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),i.div=s,i.value(t.value)};L.prototype={_calendar:function(){var t,n=this,r=n.calendar,s=n.options;r||(t=e(h).attr(T,o.guid()).appendTo(n.popup.element).on(S,i).on(g,"td:has(.k-link)",N(n._click,n)),n.calendar=r=new a.Calendar(t),n._setOptions(s),o.calendar.makeUnselectable(r.element),r.navigate(n._value||n._current,s.start),n.value(n._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,start:e.start})},setOptions:function(e){var t=this.options;this.options=H(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){this._calendar(),this.popup.open()},close:function(){this.popup.close()},min:function(e){this._option("min",e)},max:function(e){this._option("max",e)},toggle:function(){this[this.popup.visible()?v:m]()},move:function(e){var t=this,n=e.keyCode,i=t.calendar,r=e.ctrlKey&&n==d.DOWN||n==d.ENTER,o=!1;if(e.altKey)n==d.DOWN?(t.open(),e.preventDefault(),o=!0):n==d.UP&&(t.close(),e.preventDefault(),o=!0);else if(t.popup.visible()){if(n==d.ESC||r&&i._cell.hasClass(x))return t.close(),e.preventDefault(),!0;t._current=i._move(e),o=!0}return o},current:function(e){this._current=e,this.calendar._focus(e)},value:function(e){var t=this,n=t.calendar,i=t.options;t._value=e,t._current=new $(+M(e,i.min,i.max)),n&&n.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(x)&&this.close()},_option:function(e,t){var n=this.calendar;this.options[e]=t,n&&n[e](t)}},L.normalize=n,o.DateView=L,r=s.extend({init:function(t,i){var r,a=this;s.fn.init.call(a,t,i),t=a.element,(i=a.options).min=l(t.attr("min"))||l(i.min),i.max=l(t.attr("max"))||l(i.max),n(i),a._initialOptions=H({},i),a._wrapper(),a.dateView=new L(H({},i,{id:t.attr(T),anchor:a.wrapper,change:function(){a._change(this.value()),a.close()},close:function(e){a.trigger(v)?e.preventDefault():(t.attr(E,!1),r.attr(A,!0))},open:function(e){var n,i=a.options;a.trigger(m)?e.preventDefault():(a.element.val()!==a._oldText&&(n=l(t.val(),i.parseFormats,i.culture),a.dateView[n?"current":"value"](n)),t.attr(E,!0),r.attr(A,!1),a._updateARIA(n))}})),r=a.dateView.div,a._icon();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":a.dateView._dateViewID}),a._reset(),a._template(),t.is("[disabled]")||e(a.element).parents("fieldset").is(":disabled")?a.enable(!1):a.readonly(t.is("[readonly]")),a._old=a._update(i.value||a.element.val()),a._oldText=t.val(),o.notify(a)},events:[m,v,b],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:D,depth:D,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,i=t._value;s.fn.setOptions.call(t,e),(e=t.options).min=l(e.min),e.max=l(e.max),n(e),t.dateView.setOptions(e),i&&(t.element.val(o.toString(i,e.format,e.culture)),t._updateARIA(i))},_editable:function(e){var t=this,n=t._dateIcon.off(f),r=t.element.off(f),o=t._inputWrapper.off(f),a=e.readonly,s=e.disable;a||s?(o.addClass(s?C:w).removeClass(s?w:C),r.attr(_,s).attr(k,a).attr(I,s).attr(O,a)):(o.addClass(w).removeClass(C).on("mouseenter.kendoDatePicker mouseleave.kendoDatePicker",t._toggleHover),r.removeAttr(_).removeAttr(k).attr(I,!1).attr(O,!1).on("keydown"+f,N(t._keydown,t)).on("focusout"+f,N(t._blur,t)).on("focus"+f,function(){t._inputWrapper.addClass(y)}),n.on(g,N(t._click,t)).on(S,i))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;s.fn.destroy.call(e),e.dateView.destroy(),e.element.off(f),e._dateIcon.off(f),e._inputWrapper.off(f),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(y)},_click:function(){var e=this.element;this.dateView.toggle(),o.support.touch||e[0]===u()||e.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t._typing||t.element.trigger(b),t.trigger(b)),t._typing=!1},_keydown:function(e){var t=this,n=t.dateView,i=t.element.val(),r=!1;n.popup.visible()||e.keyCode!=d.ENTER||i===t._oldText?(r=n.move(e),t._updateARIA(n._current),r||(t._typing=!0)):t._change(i)},_icon:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),n._dateIcon=t.attr({role:"button","aria-controls":n.dateView._dateViewID})},_option:function(e,n){var i=this.options;return n===t?i[e]:((n=l(n,i.parseFormats,i.culture))&&(i[e]=new $(+n),this.dateView[e](n)),t)},_update:function(e){var t,n=this,i=n.options,r=i.min,a=i.max,s=n._value,d=l(e,i.parseFormats,i.culture),c=null===d&&null===s||d instanceof Date&&s instanceof Date;return+d==+s&&c?((t=o.toString(d,i.format,i.culture))!==e&&n.element.val(null===d?e:t),d):(null!==d&&F(d,r)?d=M(d,r,a):P(d,r,a)||(d=null),n._value=d,n.dateView.value(d),n.element.val(d?o.toString(d,i.format,i.culture):e),n._updateARIA(d),d)},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-datepicker"))[0]||(t=(t=i.wrap(p).parent().addClass("k-picker-wrap k-state-default")).wrap(p).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=c(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr("aria-activedescendant"),i&&((t=i._cell).attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr("aria-activedescendant",t.attr("id")))}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function i(e,t,i){return t.split(i)[n(e,t,i)]}function r(e,t,i,r){var o=t.split(r);return o.splice(n(e,t,r),1,i),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}var o=window.kendo,a=o.support,s=o.caret,l=o._activeElement,d=a.placeholder,c=o.ui,u=c.List,h=o.keys,p=o.data.DataSource,f="aria-disabled",g="aria-readonly",m="k-state-default",v="disabled",b="readonly",_="k-state-focused",k="k-state-disabled",w=".kendoAutoComplete",y=e.proxy,x=u.extend({init:function(t,n){var i,r=this;r.ns=w,n=e.isArray(n)?{dataSource:n}:n,u.fn.init.call(r,t,n),t=r.element,(n=r.options).placeholder=n.placeholder||t.attr("placeholder"),d&&t.attr("placeholder",n.placeholder),r._wrapper(),r._loader(),r._dataSource(),r._ignoreCase(),t[0].type="text",i=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+w,y(r._keydown,r)).on("paste"+w,y(r._search,r)).on("focus"+w,function(){r._active=!0,r._prev=r._accessor(),r._placeholder(!1),i.addClass(_)}).on("focusout"+w,function(){r._change(),r._placeholder(),r._active=!1,i.removeClass(_)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),r._initList(),e(r.element).parents("fieldset").is(":disabled")&&r.enable(!1),o.notify(r)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},value:null},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():e._progressHandler=y(e._showBusy,e),e.dataSource=p.create(e.options.dataSource).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.listView.setDataSource(this.dataSource)},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(e){var t=this._listOptions(e);u.fn.setOptions.call(this,e),t.dataValueField=t.dataTextField,this.listView.setOptions(t),this._accessors(),this._aria()},_editable:function(e){var t=this,n=t.element,i=t.wrapper.off(w),r=e.readonly,o=e.disable;r||o?(i.addClass(o?k:m).removeClass(o?m:k),n.attr(v,o).attr(b,r).attr(f,o).attr(g,r)):(i.addClass(m).removeClass(k).on("mouseenter.kendoAutoComplete mouseleave.kendoAutoComplete",t._toggleHover),n.removeAttr(v).removeAttr(b).attr(f,!1).attr(g,!1))},close:function(){var e=this.listView.focus();e&&e.removeClass("k-state-selected"),this.popup.close()},destroy:function(){var e=this;e.element.off(w),e.wrapper.off(w),u.fn.destroy.call(e)},refresh:function(){this.listView.refresh()},select:function(e){this._select(e)},search:function(e){var t,n=this,r=n.options,o=r.ignoreCase,a=r.separator;e=e||n._accessor(),clearTimeout(n._typingTimeout),a&&(e=i(s(n.element)[0],e,a)),(!(t=e.length)||t>=r.minLength)&&(n._open=!0,n.listView.filter(!0),n._filterSource({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o}))},suggest:function(e){var i,r=this,o=r._last,a=r._accessor(),d=r.element[0],c=s(d)[0],p=r.options.separator,f=a.split(p),g=n(c,a,p),m=c;return o==h.BACKSPACE||o==h.DELETE?(r._last=t,t):("string"!=typeof(e=e||"")&&(e[0]&&(e=r.dataSource.view()[u.inArray(e[0],r.ul[0])]),e=e?r._text(e):""),0>=c&&(c=a.toLowerCase().indexOf(e.toLowerCase())+1),i=(i=a.substring(0,c).lastIndexOf(p))>-1?c-(i+p.length):c,a=f[g].substring(0,i),e&&((i=(e=""+e).toLowerCase().indexOf(a.toLowerCase()))>-1&&(m=c+(e=e.substring(i+a.length)).length,a+=e),p&&""!==f[f.length-1]&&f.push("")),f[g]=a,r._accessor(f.join(p||"")),d===l()&&s(d,c,m),t)},value:function(e){return e===t?this._accessor():(this.listView.value(e),this._accessor(e),this._old=this._accessor(),t)},_click:function(e){var n=e.item,i=this.element;return this._active=!0,this.trigger("select",{item:n})?(this.close(),t):(this._select(n),this._blur(),s(i,i.val().length),t)},_initList:function(){var t=this,n=t.options.virtual,i=!!n,r=y(t._listBound,t),a={autoBind:!1,selectable:!0,dataSource:t.dataSource,click:e.proxy(t._click,this),change:e.proxy(t._listChange,this),activate:y(t._activateItem,t),deactivate:y(t._deactivateItem,t),dataBinding:function(){t.trigger("dataBinding"),t._angularItems("cleanup")},dataBound:r,listBound:r};(a=e.extend(t._listOptions(),a,"object"==typeof n?n:{})).dataValueField=a.dataTextField,t.listView=i?new o.ui.VirtualList(t.ul,a):new o.ui.StaticList(t.ul,a),t.listView.value(t.options.value)},_listBound:function(){var e,n,i=this,r=i.popup,o=i.options,a=i.dataSource.flatView(),s=a.length,d=i.element[0]===l();i._angularItems("compile"),i._open&&(i.listView.value([]),i.listView.focus(-1)),i.listView.filter(!1),i._calculateGroupPadding(i._height(s)),r.position(),s&&(n=this.listView.focus(),o.highlightFirst&&!n&&i.listView.first(),o.suggest&&d&&i.suggest(a[0])),i._open&&(i._open=!1,e=s?"open":"close",i._typingTimeout&&!d&&(e="close"),r[e](),i._typingTimeout=t),i._touchScroller&&i._touchScroller.reset(),i._hideBusy(),i._makeUnselectable(),i.trigger("dataBound")},_listChange:function(){!this.listView.filter()&&this._active&&this._selectValue(this.listView.selectedDataItems()[0])},_selectValue:function(e){var t=this.options.separator,n="";e&&(n=this._text(e)),null===n&&(n=""),t&&(n=r(s(this.element)[0],this._accessor(),n,t)),this._prev=n,this._accessor(n),this._placeholder()},_accessor:function(e){var n=this,i=n.element[0];return e===t?(e=i.value,i.className.indexOf("k-readonly")>-1&&e===n.options.placeholder?"":e):(i.value=null===e?"":e,n._placeholder(),t)},_keydown:function(e){var t=this,n=e.keyCode,i=t.popup.visible(),r=this.listView.focus();if(t._last=n,n===h.DOWN)i&&this._move(r?"next":"first"),e.preventDefault();else if(n===h.UP)i&&this._move(r?"prev":"last"),e.preventDefault();else if(n===h.ENTER||n===h.TAB){if(n===h.ENTER&&i&&e.preventDefault(),i&&r){if(t.trigger("select",{item:r}))return;this._select(r)}this._blur()}else n===h.ESC?(i&&e.preventDefault(),t.close()):(t._search(),t._typing=!0)},_move:function(e){this.listView[e](),this.options.suggest&&this.suggest(this.listView.focus())},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!d){var n,i=this,r=i.element,o=i.options.placeholder;if(o){if(n=r.val(),e===t&&(e=!n),e||(o=n!==o?n:""),n===i._old&&!e)return;r.toggleClass("k-readonly",e).val(o),o||r[0]!==document.activeElement||s(r[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typingTimeout),e._typingTimeout=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(e){this.listView.select(e)},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_wrapper:function(){var e,t=this,n=t.element,i=n[0];(e=n.parent()).is("span.k-widget")||(e=n.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=i.style.cssText,n.css({width:"100%",height:i.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(i.className)}});c.plugin(x)}(window.kendo.jQuery),function(e,t){function n(e,t,n){for(var i,r=0,o=t.length-1;o>r;++r)(i=t[r])in e||(e[i]={}),e=e[i];e[t[o]]=n}var i=window.kendo,r=i.ui,o=r.Select,a=i.support,s=i._activeElement,l=i.data.ObservableObject,d=i.keys,c=".kendoDropDownList",u="disabled",h="readonly",p="change",f="k-state-focused",g="k-state-default",m="k-state-disabled",v="aria-disabled",b="aria-readonly",_="mouseenter"+c+" mouseleave"+c,k="tabindex",w="filter",y="accept",x=e.proxy,C=o.extend({init:function(n,r){var a,s,l=this,d=r&&r.index;l.ns=c,r=e.isArray(r)?{dataSource:r}:r,o.fn.init.call(l,n,r),r=l.options,n=l.element.on("focus"+c,x(l._focusHandler,l)),l._focusInputHandler=e.proxy(l._focusInput,l),l._inputTemplate(),l._reset(),l._prev="",l._word="",l.optionLabel=e(),l._wrapper(),l._tabindex(),l.wrapper.data(k,l.wrapper.attr(k)),l._span(),l._popup(),l._mobile(),l._dataSource(),l._ignoreCase(),l._filterHeader(),l._aria(),l._enable(),l._oldIndex=l.selectedIndex=-1,d!==t&&(r.index=d),l._initialIndex=r.index,l._optionLabel(),l._initList(),l._cascade(),r.autoBind?l.dataSource.fetch():-1===l.selectedIndex&&((s=r.text||"")||((a=r.optionLabel)&&0===r.index?s=a:l._isSelect&&(s=n.children(":selected").text())),l._textAccessor(s)),e(l.element).parents("fieldset").is(":disabled")&&l.enable(!1),i.notify(l)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1,virtual:!1,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",p,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this.listView.setOptions(this._listOptions(e)),this._optionLabel(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria(),!this.value()&&this.optionLabel[0]&&this.select(0)},destroy:function(){var e=this;e.wrapper.off(c),e.element.off(c),e._inputWrapper.off(c),e._arrow.off(),e._arrow=null,e.optionLabel.off(),o.fn.destroy.call(e)},open:function(){var e=this;e.popup.visible()||(e.listView.isBound()&&e._state!==y?e._allowOpening()&&(e.popup.one("activate",e._focusInputHandler),e.popup.open(),e._focusItem()):(e._open=!0,e._state="rebind",e.filterInput&&(e.filterInput.val(""),e._prev=""),e._filterSource()))},_focusInput:function(){this._focusElement(this.filterInput)},_allowOpening:function(){return this.optionLabel[0]||this.filterInput||this.dataSource.view().length},toggle:function(e){this._toggle(e,!0)},current:function(e){var n;return e===t?!(n=this.listView.focus())&&0===this.selectedIndex&&this.optionLabel[0]?this.optionLabel:n:(this._focus(e),t)},dataItem:function(n){var i=this,r=null,o=!!i.optionLabel[0],a=i.options.optionLabel;return n===t?r=i.listView.selectedDataItems()[0]:("number"!=typeof n?n=n.hasClass("k-list-optionlabel")?-1:e(i.items()).index(n):o&&(n-=1),r=i.dataSource.flatView()[n]),!r&&o&&(r=e.isPlainObject(a)?new l(a):i._assignInstance(i._optionLabelText(),"")),r},refresh:function(){this.listView.refresh()},text:function(e){var n,i,r=this,o=r.options.ignoreCase;return(e=null===e?"":e)===t?r._textAccessor():("string"==typeof e&&(i=o?e.toLowerCase():e,r._select(function(e){return e=r._text(e),o&&(e=(e+"").toLowerCase()),e===i}),(n=r.dataItem())&&(e=n)),r._textAccessor(e),t)},value:function(e){var n=this,i=n.dataSource;return e===t?(e=n._accessor()||n.listView.value()[0])===t||null===e?"":e:(e&&(n._initialIndex=null),n._request&&n.options.cascadeFrom&&n.listView.isBound()?(n._valueSetter&&i.unbind(p,n._valueSetter),n._valueSetter=x(function(){n.value(e)},n),i.one(p,n._valueSetter),t):(n.listView.value(e).done(function(){-1===n.selectedIndex&&n.text()&&(n.text(""),n._accessor("",-1)),n._old=n._accessor(),n._oldIndex=n.selectedIndex}),n._fetchData(),t))},_optionLabel:function(){var n=this,r=n.options,o=r.optionLabel,a=r.optionLabelTemplate;return o?(a||(a="#:",a+="string"==typeof o?"data":i.expr(r.dataTextField,"data"),a+="#"),"function"!=typeof a&&(a=i.template(a)),n.optionLabelTemplate=a,n.optionLabel[0]||(n.optionLabel=e('<div class="k-list-optionlabel"></div>').prependTo(n.list)),n.optionLabel.html(a(o)).off().click(x(n._click,n)).on(_,n._toggleHover),n.angular("compile",function(){return{elements:n.optionLabel}}),t):(n.optionLabel.off().remove(),n.optionLabel=e(),t)},_optionLabelText:function(){var e=this.options.optionLabel;return"string"==typeof e?e:this._text(e)},_listBound:function(){var e,t,n,i=this,r=i._initialIndex,o=i.options.optionLabel,a=i._state===w,s=i.dataSource.flatView(),l=s.length;i._angularItems("compile"),i._presetValue=!1,i.options.virtual||(t=i._height(a?l||1:l),i._calculateGroupPadding(t)),i.popup.position(),i._isSelect&&(n=i.value(),l?o&&(o=i._option("",i._optionLabelText())):n&&(o=i._option(n,i.text())),i._options(s,o,n)),i._makeUnselectable(),a||(i._open&&i.toggle(i._allowOpening()),i._open=!1,i._fetch||(l?(!i.listView.value().length&&r>-1&&null!==r&&i.select(r),i._initialIndex=null,(e=i.listView.selectedDataItems()[0])&&i.text()!==i._text(e)&&i._selectValue(e)):i._textAccessor()!==i._optionLabelText()&&(i.listView.value(""),i._selectValue(null),i._oldIndex=i.selectedIndex))),i._hideBusy(),i.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),(this._presetValue||this._old&&-1===this._oldIndex)&&(this._oldIndex=this.selectedIndex)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(f),this._prevent=!1},_focusoutHandler:function(){var e=this,t=e._state===w,n=window.self!==window.top,i=e._focus();e._prevent||(clearTimeout(e._typingTimeout),t&&i&&!e.trigger("select",{item:i})&&e._select(i,!e.dataSource.view().length),a.mobileOS.ios&&n?e._change():e._blur(),e._inputWrapper.removeClass(f),e._prevent=!0,e._open=!1,e.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this.popup.unbind("activate",this._focusInputHandler),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t.wrapper.add(t.filterInput).off(c),a=t._inputWrapper.off(_);r||i?i?(o.removeAttr(k),a.addClass(m).removeClass(g)):(a.addClass(g).removeClass(m),o.on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t))):(n.removeAttr(u).removeAttr(h),a.addClass(g).removeClass(m).on(_,t._toggleHover),o.attr(k,o.data(k)).attr(v,!1).attr(b,!1).on("keydown"+c,x(t._keydown,t)).on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t)).on("mousedown"+c,x(t._wrapperMousedown,t)),t.wrapper.on("click"+c,x(t._wrapperClick,t)),t.filterInput||o.on("keypress"+c,x(t._keypress,t))),n.attr(u,i).attr(h,r),o.attr(v,i).attr(b,r)},_option:function(e,t){return'<option value="'+e+'">'+t+"</option>"},_keydown:function(e){var n,i,r=this,o=e.keyCode,a=e.altKey,l=r.popup.visible();if(r.filterInput&&(n=r.filterInput[0]===s()),o===d.LEFT?(o=d.UP,i=!0):o===d.RIGHT&&(o=d.DOWN,i=!0),!i||!n){if(e.keyCode=o,a&&o===d.UP&&r._focusElement(r.wrapper),o===d.ENTER&&r._typingTimeout&&r.filterInput&&l)return e.preventDefault(),t;(i=r._move(e))||(l&&r.filterInput||(o===d.HOME?(i=!0,r._firstItem()):o===d.END&&(i=!0,r._lastItem()),i&&(r._select(r._focus()),e.preventDefault())),a||i||!r.filterInput||r._search())}},_matchText:function(e,t){var n=this,i=!1;return e+="",n.options.ignoreCase&&(e=e.toLowerCase()),0===e.indexOf(n._word)&&(n.optionLabel[0]&&(t+=1),n._select(t),n.popup.visible()||n._change(),i=!0),i},_selectNext:function(e){for(var t,n=this,i=e,r=n.dataSource.flatView(),o=r.length;o>e;e++)if((t=n._text(r[e]))&&n._matchText(t,e)&&(1!==n._word.length||i!==n.selectedIndex))return!0;if(i>0&&o>i)for(e=0;i>=e;e++)if((t=n._text(r[e]))&&n._matchText(t,e))return!0;return!1},_keypress:function(e){var t,n,r,o=this;0!==e.which&&e.keyCode!==i.keys.ENTER&&(t=String.fromCharCode(e.charCode||e.keyCode),n=o.selectedIndex,r=o._word.length,o.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),r||(o._word=t),o._last===t&&1>=r&&n>-1&&o._selectNext(n)||(r&&(o._word+=t),o._last=t,o._search()))},_popupOpen:function(){var e=this.popup;e.wrapper=i.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){o.fn._popup.call(this),this.popup.one("open",x(this._popupOpen,this))},_click:function(n){var i=n.item||e(n.currentTarget);return this.trigger("select",{item:i})?(this.close(),t):(this._userTriggered=!0,this._select(i),this._focusElement(this.wrapper),this._blur(),t)},_focusElement:function(e){var t=s(),n=this.wrapper,i=this.filterInput,r=e===i?n:i,o=a.mobileOS&&(a.touch||a.MSPointers||a.pointers);i&&i[0]===e[0]&&o||i&&r[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){var n,i;e&&((i=(n=this).options.ignoreCase)&&(e=e.toLowerCase()),n._select(function(r){var o=n._text(r);return o!==t?(o+="",i&&(o=o.toLowerCase()),0===o.indexOf(e)):t}))},_search:function(){var e=this,n=e.dataSource,i=e.selectedIndex;if(clearTimeout(e._typingTimeout),"none"!==e.options.filter)e._typingTimeout=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typingTimeout=null},e.options.delay);else{if(e._typingTimeout=setTimeout(function(){e._word=""},e.options.delay),-1===i&&(i=0),!e.ul[0].firstChild)return n.fetch().done(function(){n.data()[0]&&i>-1&&e._selectNext(i)}),t;e._selectNext(i)}},_get:function(t){var n,i,r,o="function"==typeof t,a=o?e():e(t);if(this.optionLabel[0]&&("number"==typeof t?t>-1&&(t-=1):a.hasClass("k-list-optionlabel")&&(t=-1)),o){for(n=this.dataSource.flatView(),r=0;n.length>r;r++)if(t(n[r])){t=r,i=!0;break}i||(t=-1)}return t},_firstItem:function(){this.optionLabel[0]?this._focus(this.optionLabel):this.listView.first()},_lastItem:function(){this.optionLabel.removeClass("k-state-focused"),this.listView.last()},_nextItem:function(){this.optionLabel.hasClass("k-state-focused")?(this.optionLabel.removeClass("k-state-focused"),this.listView.first()):this.listView.next()},_prevItem:function(){this.optionLabel.hasClass("k-state-focused")||(this.listView.prev(),this.listView.focus()||this.optionLabel.addClass("k-state-focused"))},_focusItem:function(){var e=this.listView,n=e.focus(),i=e.select();(i=i[i.length-1])===t&&this.options.highlightFirst&&!n&&(i=0),i!==t?e.focus(i):this.options.optionLabel?(this._focus(this.optionLabel),this._select(this.optionLabel)):e.scrollToIndex(0)},_focus:function(e){var n=this.listView,i=this.optionLabel;return e===t?(!(e=n.focus())&&i.hasClass("k-state-focused")&&(e=i),e):(i.removeClass("k-state-focused"),e=this._get(e),n.focus(e),-1===e&&i.addClass("k-state-focused"),t)},_select:function(e,t){var n=this;e=n._get(e),n.listView.select(e),t||n._state!==w||(n.listView.filter(!1),n._state=y),-1===e&&n._selectValue(null)},_selectValue:function(e){var n=this,i=n.options.optionLabel,r=n.optionLabel,o=n.listView.select(),a="",s="";(o=o[o.length-1])===t&&(o=-1),r.removeClass("k-state-focused k-state-selected"),e?(s=e,a=n._dataValue(e),i&&(o+=1)):i&&(n._focus(r.addClass("k-state-selected")),s=n._optionLabelText(),a="string"==typeof i?"":n._value(i),o=0),n.selectedIndex=o,null===a&&(a=""),n._textAccessor(s),n._accessor(a,o),n._triggerCascade()},_mobile:function(){var e=this.popup,t=a.mobileOS;e.element.parents(".km-root").eq(0).length&&t&&(e.options.animation.open.effects=t.android||t.meego?"fadeIn":t.ios||t.wp?"slideIn:up":e.options.animation.open.effects)},_filterHeader:function(){var t="none"!==this.options.filter;this.filterInput&&(this.filterInput.off(c).parent().remove(),this.filterInput=null),t&&(this.filterInput=e('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add('<span unselectable="on" class="k-icon k-i-search">select</span>'))))},_span:function(){var t,n=this,i=n.wrapper,r="span.k-input";(t=i.find(r))[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(r)),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon")},_wrapper:function(){var e,t=this,n=t.element,i=n[0];(e=n.parent()).is("span.k-widget")||((e=n.wrap("<span />").parent())[0].style.cssText=i.style.cssText,e[0].title=i.title),n.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(e){this.select(e.value()?0:-1)},_inputTemplate:function(){var t=this,n=t.options.valueTemplate;n=n?i.template(n):e.proxy(i.template("#:this._text(data)#",{useWithBlock:!1}),t),t.valueTemplate=n},_textAccessor:function(n){var i,r=null,o=this.valueTemplate,a=this.options.optionLabel,s=this.span;return n===t?s.text():(e.isPlainObject(n)||n instanceof l?r=n:a&&this._optionLabelText()===n&&(r=a,o=this.optionLabelTemplate),r||(r=this._assignInstance(n,this._accessor())),i=function(){return{elements:s.get(),data:[{dataItem:r}]}},this.angular("cleanup",i),s.html(o(r)),this.angular("compile",i),t)},_preselect:function(e,t){e||t||(t=this._optionLabelText()),this._accessor(e),this._textAccessor(t),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._initialIndex=null,this._presetValue=!0},_assignInstance:function(e,t){var i=this.options.dataTextField,r={};return i?(n(r,i.split("."),e),n(r,this.options.dataValueField.split("."),t),r=new l(r)):r=e,r}});r.plugin(C)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=i.Select,a=n.caret,s=n.support.placeholder,l=n._activeElement,d=n.keys,c=".kendoComboBox",u="click"+c,h="mousedown"+c,p="disabled",f="readonly",g="change",m="k-state-default",v="k-state-focused",b="k-state-disabled",_="aria-disabled",k="aria-readonly",w="filter",y="accept",x="rebind",C=e.proxy,S=o.extend({init:function(t,i){var r,a=this;a.ns=c,i=e.isArray(i)?{dataSource:i}:i,o.fn.init.call(a,t,i),i=a.options,t=a.element.on("focus"+c,C(a._focusHandler,a)),i.placeholder=i.placeholder||t.attr("placeholder"),a._reset(),a._wrapper(),a._input(),a._tabindex(a.input),a._popup(),a._dataSource(),a._ignoreCase(),a._enable(),a._oldIndex=a.selectedIndex=-1,a._aria(),a._initialIndex=i.index,a._initList(),a._cascade(),i.autoBind?a._filterSource():(!(r=i.text)&&a._isSelect&&(r=t.children(":selected").text()),r&&(a.input.val(r),a._prev=r)),r||a._placeholder(),e(a.element).parents("fieldset").is(":disabled")&&a.enable(!1),n.notify(a)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",g,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this.listView.setOptions(e),this._accessors(),this._aria()},destroy:function(){var e=this;e.input.off(c),e.element.off(c),e._inputWrapper.off(c),o.fn.destroy.call(e)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(v),this._placeholder(!1)},_inputFocusout:function(){var e=this;e._inputWrapper.removeClass(v),clearTimeout(e._typingTimeout),e._typingTimeout=null,e.options.text!==e.input.val()&&e.text(e.text()),e._placeholder(),e._blur(),e.element.blur()},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._inputWrapper.off(c),o=t.element.add(t.input.off(c)),a=t._arrow.parent().off(u+" "+h);i||n?(r.addClass(n?b:m).removeClass(n?m:b),o.attr(p,n).attr(f,i).attr(_,n).attr(k,i)):(r.addClass(m).removeClass(b).on("mouseenter.kendoComboBox mouseleave.kendoComboBox",t._toggleHover),o.removeAttr(p).removeAttr(f).attr(_,!1).attr(k,!1),a.on(u,C(t._arrowClick,t)).on(h,function(e){e.preventDefault()}),t.input.on("keydown"+c,C(t._keydown,t)).on("focus"+c,C(t._inputFocus,t)).on("focusout"+c,C(t._inputFocusout,t)))},open:function(){var e=this,t=e._state;e.popup.visible()||(!e.listView.isBound()&&t!==w||t===y?(e._open=!0,e._state=x,e.listView.filter(!1),e._filterSource()):(e.popup.open(),e._focusItem()))},_listBound:function(){var e,n,i,r=this,o=r.options,a=r._initialIndex,s=r._state===w,d=r.input[0]===l(),c=r.listView,u=c.focus(),h=this.dataSource.flatView(),p=this.dataSource.page(),f=h.length;r._angularItems("compile"),r._presetValue=!1,o.virtual||r._calculateGroupPadding(r._height(f)),r.popup.position(),r._isSelect&&(n=r.element[0].children[0],r._state===x&&(r._state=""),i=r._customOption,r._customOption=t,r._options(h,"",r.value()),i&&i[0].selected?r._custom(i.val(),!0):n||r._custom("",!0)),r._makeUnselectable(),s||r._fetch?s&&u&&u.removeClass("k-state-selected"):(c.value().length||(null!==a&&a>-1?(r.select(a),u=c.focus()):r._accessor()&&c.value(r._accessor())),r._initialIndex=null,(e=r.listView.selectedDataItems()[0])&&r.text()&&r.text()!==r._text(e)&&r._selectValue(e)),!f||p!==t&&1!==p||(o.highlightFirst?u||c.focusIndex()||c.focus(0):c.focus(-1),o.suggest&&d&&r.input.val()&&r.suggest(h[0])),r._open&&(r._open=!1,r._typingTimeout&&!d?r.popup.close():r.toggle(!!f),r._typingTimeout=null),r._touchScroller&&r._touchScroller.reset(),r._hideBusy(),r.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),this._presetValue&&(this._oldIndex=this.selectedIndex)},_get:function(e){var t,n,i;if("function"==typeof e){for(t=this.dataSource.flatView(),i=0;t.length>i;i++)if(e(t[i])){e=i,n=!0;break}n||(e=-1)}return e},_select:function(e,t){-1===(e=this._get(e))&&(this.input[0].value="",this._accessor("")),this.listView.select(e),t||this._state!==w||(this.listView.filter(!1),this._state=y)},_selectValue:function(e){var n=this.listView.select(),i="",r="";(n=n[n.length-1])===t&&(n=-1),this.selectedIndex=n,-1===n?(i=r=this.input[0].value,this.listView.focus(-1)):(e&&(i=this._dataValue(e),r=this._text(e)),null===i&&(i="")),this._prev=this.input[0].value=r,this._accessor(i!==t?i:r,n),this._placeholder(),this._triggerCascade()},refresh:function(){this.listView.refresh()},suggest:function(e){var n,i=this,o=i.input[0],s=i.text(),c=a(o)[0],u=i._last;return u==d.BACKSPACE||u==d.DELETE?(i._last=t,t):("string"!=typeof(e=e||"")&&(e[0]&&(e=i.dataSource.view()[r.inArray(e[0],i.ul[0])]),e=e?i._text(e):""),0>=c&&(c=s.toLowerCase().indexOf(e.toLowerCase())+1),e?(n=(e=""+e).toLowerCase().indexOf(s.toLowerCase()))>-1&&(s+=e.substring(n+s.length)):s=s.substring(0,c),s.length===c&&e||(o.value=s,o===l()&&a(o,c,s.length)),t)},text:function(e){var n,i,r,o,a,s;if(e=null===e?"":e,i=(n=this).input[0],r=n.options.ignoreCase,o=e,e===t)return i.value;if(a=n.dataItem(),!1!==n.options.autoBind||n.listView.isBound()){if(a&&n._text(a)===e&&(null===(s=n._value(a))?s="":s+="",s===n._old))return n._triggerCascade(),t;r&&(o=o.toLowerCase()),n._select(function(e){return e=n._text(e),r&&(e=(e+"").toLowerCase()),e===o}),0>n.selectedIndex&&(n._accessor(e),i.value=e,n._triggerCascade()),n._prev=i.value}},toggle:function(e){this._toggle(e,!0)},value:function(e){var n=this,i=n.options;return e===t?(e=n._accessor()||n.listView.value()[0])===t||null===e?"":e:((e!==i.value||n.input.val()!==i.text)&&(n._accessor(e),n.listView.value(e).done(function(){n._selectValue(n.listView.selectedDataItems()[0]),-1===n.selectedIndex&&(n._accessor(e),n.input.val(e),n._placeholder(!0)),n._old=n._accessor(),n._oldIndex=n.selectedIndex,n._prev=n.input.val(),n._state===w&&(n._state=y)}),n._fetchData()),t)},_click:function(e){var n=e.item;return this.trigger("select",{item:n})?(this.close(),t):(this._userTriggered=!0,this._select(n),this._blur(),t)},_filter:function(e){var n,i=this,r=i.options,o=i.dataSource,a=r.ignoreCase;return a&&(e=e.toLowerCase()),i.ul[0].firstChild?(this.listView.focus(this._get(function(n){var r=i._text(n);return r!==t?(""==(r+="")||""!==e)&&(a&&(r=r.toLowerCase()),0===r.indexOf(e)):t})),(n=this.listView.focus())&&(r.suggest&&i.suggest(n),this.open()),this.options.highlightFirst&&!e&&this.listView.first(),t):(o.one(g,function(){o.view()[0]&&i.search(e)}).fetch(),t)},_input:function(){var t,n=this,i=n.element.removeClass("k-input")[0],r=i.accessKey,o=n.wrapper,a="input.k-input",l=i.name||"";l&&(l='name="'+l+'_input" '),(t=o.find(a))[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+l+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=o.find(a)),t[0].style.cssText=i.style.cssText,t[0].title=i.title,i.maxLength>-1&&(t[0].maxLength=i.maxLength),t.addClass(i.className).val(this.options.text||i.value).css({width:"100%",height:i.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),s&&t.attr("placeholder",n.options.placeholder),r&&(i.accessKey="",t[0].accessKey=r),n._focused=n.input=t,n._inputWrapper=e(o[0].firstChild),n._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),i.id&&n._arrow.attr("aria-controls",n.ul[0].id)},_keydown:function(e){var t=this,n=e.keyCode;t._last=n,clearTimeout(t._typingTimeout),t._typingTimeout=null,n==d.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!s){var n,i=this,r=i.input,o=i.options.placeholder;if(o){if(n=i.value(),e===t&&(e=!n),r.toggleClass("k-readonly",e),!e){if(n)return;o=""}r.val(o),o||r[0]!==l()||a(r[0],0,0)}}},_search:function(){var e=this;e._typingTimeout=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t)),e._typingTimeout=null},e.options.delay)},_wrapper:function(){var e=this.element,t=e.parent();t.is("span.k-widget")||((t=e.hide().wrap("<span />").parent())[0].style.cssText=e[0].style.cssText),this.wrapper=t.addClass("k-widget k-combobox k-header").addClass(e[0].className).css("display","")},_clearSelection:function(e,t){var n=e.value(),i=n&&-1===e.selectedIndex;(t||!n||i)&&(this.options.value="",this.value(""))},_preselect:function(e,t){this.input.val(t),this._accessor(e),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._placeholder(),this._initialIndex=null,this._presetValue=!0}});i.plugin(S)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=n.keys,a=n._activeElement,s=n.data.ObservableArray,l=e.proxy,d="id",c="li",u="accept",h="filter",p="rebind",f="open",g="close",m="change",v="select",b="aria-disabled",_="aria-readonly",k="k-state-focused",w="k-loading-hidden",y="k-state-hover",x="k-state-disabled",C="disabled",S="readonly",T=".kendoMultiSelect",D="mouseenter"+T,I="mouseleave"+T,E=/"/g,A=e.isArray,O=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],R=r.extend({init:function(t,i){var o,a=this;a.ns=T,r.fn.init.call(a,t,i),a._optionsMap={},a._customOptions={},a._wrapper(),a._tagList(),a._input(),a._textContainer(),a._loader(),a._tabindex(a.input),t=a.element.attr("multiple","multiple").hide(),(i=a.options).placeholder||(i.placeholder=t.data("placeholder")),(o=t.attr(d))&&(a._tagID=o+"_tag_active",o+="_taglist",a.tagList.attr(d,o)),a._aria(o),a._dataSource(),a._ignoreCase(),a._popup(),a._tagTemplate(),a._initList(),a._reset(),a._enable(),a._placeholder(),i.autoBind?a.dataSource.fetch():i.value&&a._preselect(i.value),e(a.element).parents("fieldset").is(":disabled")&&a.enable(!1),n.notify(a)},_preselect:function(t,i){var r=this;A(t)||t instanceof n.data.ObservableArray||(t=[t]),(e.isPlainObject(t[0])||t[0]instanceof n.data.ObservableObject||!r.options.dataValueField)&&(r.dataSource.data(t),r.value(i||r._initialValues),r._retrieveData=!0)},options:{name:"MultiSelect",tagMode:"multiple",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:[f,g,m,v,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){var t=this._listOptions(e);r.fn.setOptions.call(this,e),this._normalizeOptions(t),this.listView.setOptions(t),this._accessors(),this._aria(this.tagList.attr(d)),this._tagTemplate()},currentTag:function(e){var n=this;return e===t?n._currentTag:(n._currentTag&&(n._currentTag.removeClass(k).removeAttr(d),n.input.removeAttr("aria-activedescendant")),e&&(e.addClass(k).attr(d,n._tagID),n.input.attr("aria-activedescendant",n._tagID)),n._currentTag=e,t)},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typingTimeout),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),r.fn.destroy.call(e)},_activateItem:function(){r.fn._activateItem.call(this),this.currentTag(null)},_normalizeOptions:function(e){var t=this.options.itemTemplate||this.options.template,i=e.itemTemplate||t||e.template;i||(i="#:"+n.expr(e.dataTextField,"data")+"#"),e.template=i},_initList:function(){var t=this,i=t.options.virtual,r=!!i,o=l(t._listBound,t),a={autoBind:!1,selectable:"multiple",dataSource:t.dataSource,click:l(t._click,t),change:l(t._listChange,t),activate:l(t._activateItem,t),deactivate:l(t._deactivateItem,t),dataBinding:function(){t.trigger("dataBinding"),t._angularItems("cleanup")},dataBound:o,listBound:o,selectedItemChange:l(t._selectedItemChange,t)};a=e.extend(t._listOptions(),a,"object"==typeof i?i:{}),t._normalizeOptions(a),t.listView=r?new n.ui.VirtualList(t.ul,a):new n.ui.StaticList(t.ul,a),t.listView.value(t._initialValues||t.options.value)},_listChange:function(e){this._state===p&&(this._state="",e.added=[]),this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var t,n,i=e.items;for(n=0;i.length>n;n++)t=i[n],this.tagList.children().eq(t.index).children("span:first").html(this.tagTextTemplate(t.item))},_wrapperMousedown:function(t){var i=this,r="input"!==t.target.nodeName.toLowerCase(),o=e(t.target),s=o.hasClass("k-select")||o.hasClass("k-icon");s&&(s=!o.closest(".k-select").children(".k-i-arrow-s").length),!r||s&&n.support.mobileOS||t.preventDefault(),s||(i.input[0]!==a()&&r&&i.input.focus(),0===i.options.minLength&&i.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(k)},_inputFocusout:function(){var e=this;clearTimeout(e._typingTimeout),e.wrapper.removeClass(k),e._placeholder(!e.listView.selectedDataItems()[0],!0),e.close(),e._state===h&&(e._state=u,e.listView.filter(!1),e.listView.skipUpdate(!0)),e.element.blur()},_removeTag:function(e){var n,i=this,r=i._state,o=e.index(),a=i.listView,s=a.value()[o],l=i._customOptions[s];l!==t||r!==u&&r!==h||(l=i._optionsMap[s]),l!==t?((n=i.element[0].children[l]).removeAttribute("selected"),n.selected=!1,a.removeAt(o),e.remove()):a.select(a.select()[o]),i.currentTag(null),i._change(),i._close()},_tagListClick:function(t){var n=e(t.currentTarget);n.children(".k-i-arrow-s").length||this._removeTag(n.closest(c))},_editable:function(t){var n=this,i=t.disable,r=t.readonly,o=n.wrapper.off(T),a=n.tagList.off(T),s=n.element.add(n.input.off(T));r||i?(i?o.addClass(x):o.removeClass(x),s.attr(C,i).attr(S,r).attr(b,i).attr(_,r)):(o.removeClass(x).on("mouseenter.kendoMultiSelect mouseleave.kendoMultiSelect",n._toggleHover).on("mousedown"+T+" touchend"+T,l(n._wrapperMousedown,n)),n.input.on("keydown.kendoMultiSelect",l(n._keydown,n)).on("paste"+T,l(n._search,n)).on("focus"+T,l(n._inputFocus,n)).on("focusout"+T,l(n._inputFocusout,n)),s.removeAttr(C).removeAttr(S).attr(b,!1).attr(_,!1),a.on(D,c,function(){e(this).addClass(y)}).on(I,c,function(){e(this).removeClass(y)}).on("click.kendoMultiSelect","li.k-button .k-select",l(n._tagListClick,n)))},_close:function(){var e=this;e.options.autoClose?e.close():e.popup.position()},close:function(){this.popup.close()},open:function(){var e=this;e._request&&(e._retrieveData=!1),e._retrieveData||!e.listView.isBound()||e._state===u?(e._open=!0,e._state=p,e._retrieveData=!1,e.listView.filter(!1),e.listView.skipUpdate(!0),e._filterSource()):e._allowSelection()&&(e.popup.open(),e._focusItem())},toggle:function(e){this[(e=e!==t?e:!this.popup.visible())?f:g]()},refresh:function(){this.listView.refresh()},_listBound:function(){var e=this,n=e.dataSource.flatView(),i=e.dataSource.page(),r=n.length;e._angularItems("compile"),e._render(n),e._calculateGroupPadding(e._height(r)),e._open&&(e._open=!1,e.toggle(r)),e.popup.position(),!e.options.highlightFirst||i!==t&&1!==i||e.listView.first(),e._touchScroller&&e._touchScroller.reset(),e._hideBusy(),e._makeUnselectable(),e.trigger("dataBound")},search:function(e){var t,n,i=this,r=i.options,o=r.ignoreCase,a=r.filter,s=r.dataTextField,l=i.input.val();r.placeholder===l&&(l=""),clearTimeout(i._typingTimeout),(!(n=(e="string"==typeof e?e:l).length)||n>=r.minLength)&&(i.listView.filter(!0),i._state=h,i._open=!0,t={value:o?e.toLowerCase():e,field:s,operator:a,ignoreCase:o},i._filterSource(t,i._retrieveData),i._retrieveData=!1)},value:function(e){var n=this,i=n.listView.value().slice(),r=n.options.maxSelectedItems;return e===t?i:(e=n._normalizeValues(e),null!==r&&e.length>r&&(e=e.slice(0,r)),n.listView.value(e),n._old=e,n._fetchData(),t)},_setOption:function(e,t){var n=this.element[0].children[this._optionsMap[e]];n&&(t?n.setAttribute("selected","selected"):n.removeAttribute("selected"),n.selected=t)},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;0===e.listView.value().length||e._request||(e._retrieveData||!e._fetch&&!t)&&(e._fetch=!0,e._retrieveData=!1,e.dataSource.read().done(function(){e._fetch=!1}))},_dataSource:function(){var e=this,t=e.element,i=e.options,r=i.dataSource||{};(r=A(r)?{data:r}:r).select=t,r.fields=[{field:i.dataTextField},{field:i.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():e._progressHandler=l(e._showBusy,e),e.dataSource=n.data.DataSource.create(r).bind("progress",e._progressHandler)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(e)},_normalizeValues:function(t){var n=this;return null===t?t=[]:t&&e.isPlainObject(t)?t=[n._value(t)]:t&&e.isPlainObject(t[0])?t=e.map(t,function(e){return n._value(e)}):A(t)||t instanceof s||(t=[t]),t},_change:function(){var e=this,t=e.value();(function(e,t){var n;if(null===e&&null!==t||null!==e&&null===t)return!1;if((n=e.length)!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0})(t,e._old)||(e._old=t.slice(),e.trigger(m),e.element.trigger(m))},_click:function(e){var n=e.item;return this.trigger(v,{item:n})?(this._close(),t):(this._select(n),this._change(),this._close(),t)},_keydown:function(i){var r=this,a=i.keyCode,s=r._currentTag,l=r.listView.focus(),d=r.input.val(),c=n.support.isRtl(r.wrapper),u=r.popup.visible();if(a===o.DOWN){if(i.preventDefault(),!u)return r.open(),l||this.listView.first(),t;l?(this.listView.next(),this.listView.focus()||this.listView.last()):this.listView.first()}else if(a===o.UP)u&&(l&&this.listView.prev(),this.listView.focus()||r.close()),i.preventDefault();else if(a===o.LEFT&&!c||a===o.RIGHT&&c)d||(s=s?s.prev():e(r.tagList[0].lastChild))[0]&&r.currentTag(s);else if(a===o.RIGHT&&!c||a===o.LEFT&&c)!d&&s&&(s=s.next(),r.currentTag(s[0]?s:null));else if(a===o.ENTER&&u){if(l){if(r.trigger(v,{item:l}))return r._close(),t;r._select(l)}r._change(),r._close(),i.preventDefault()}else a===o.ESC?(u?i.preventDefault():r.currentTag(null),r.close()):a===o.HOME?u?this.listView.first():d||(s=r.tagList[0].firstChild)&&r.currentTag(e(s)):a===o.END?u?this.listView.last():d||(s=r.tagList[0].lastChild)&&r.currentTag(e(s)):a!==o.DELETE&&a!==o.BACKSPACE||d?(clearTimeout(r._typingTimeout),setTimeout(function(){r._scale()}),r._search()):(a!==o.BACKSPACE||s||(s=e(r.tagList[0].lastChild)),s&&s[0]&&r._removeTag(s))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(w),e._request=!1,e._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(w)},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(l(e._showBusyHandler,e),100))},_placeholder:function(e,i){var r=this,o=r.input,s=a();e===t&&(e=!1,o[0]!==s&&(e=!r.listView.selectedDataItems()[0])),r._prev="",o.toggleClass("k-readonly",e).val(e?r.options.placeholder:""),o[0]!==s||i||n.caret(o[0],0,0),r._scale()},_scale:function(){var e,t=this,n=t.wrapper,i=n.width(),r=t._span.text(t.input.val());n.is(":visible")?e=r.width()+25:(r.appendTo(document.documentElement),i=e=r.width()+25,r.appendTo(n)),t.input.width(e>i?i:e)},_option:function(e,i,r){var o="<option";return e!==t&&(-1!==(e+="").indexOf('"')&&(e=e.replace(E,"&quot;")),o+=' value="'+e+'"'),r&&(o+=" selected"),o+=">",i!==t&&(o+=n.htmlEncode(i)),o+"</option>"},_render:function(e){var t,n,i,r,o,a,s=this.listView.selectedDataItems(),l=this.listView.value(),d=e.length,c="";for(l.length!==s.length&&(s=this._buildSelectedItems(l)),o={},a={},r=0;d>r;r++)n=e[r],i=this._value(n),-1!==(t=this._selectedItemIndex(i,s))&&s.splice(t,1),a[i]=r,c+=this._option(i,this._text(n),-1!==t);if(s.length)for(r=0;s.length>r;r++)n=s[r],o[i=this._value(n)]=d,a[i]=d,d+=1,c+=this._option(i,this._text(n),!0);this._customOptions=o,this._optionsMap=a,this.element.html(c)},_buildSelectedItems:function(e){var t,n,i=this.options.dataValueField,r=this.options.dataTextField,o=[];for(n=0;e.length>n;n++)(t={})[i]=e[n],t[r]=e[n],o.push(t);return o},_selectedItemIndex:function(e,t){for(var n=this._value,i=0;t.length>i;i++)if(e===n(t[i]))return i;return-1},_search:function(){var e=this;e._typingTimeout=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this.listView.value().length},_angularTagItems:function(t){var n=this;n.angular(t,function(){return{elements:n.tagList[0].children,data:e.map(n.dataItems(),function(e){return{dataItem:e}})}})},_selectValue:function(e,t){var n,i,r,o=this,a=o.value(),s=o.dataSource.total(),l=o.tagList,d=o._value;if(o._angularTagItems("cleanup"),"multiple"===o.options.tagMode){for(r=t.length-1;r>-1;r--)n=t[r],l[0].removeChild(l[0].children[n.position]),o._setOption(d(n.dataItem),!1);for(r=0;e.length>r;r++)i=e[r],l.append(o.tagTemplate(i.dataItem)),o._setOption(d(i.dataItem),!0)}else{for((!o._maxTotal||s>o._maxTotal)&&(o._maxTotal=s),l.html(""),a.length&&l.append(o.tagTemplate({values:a,dataItems:o.dataItems(),maxTotal:o._maxTotal,currentTotal:s})),r=t.length-1;r>-1;r--)o._setOption(d(t[r].dataItem),!1);for(r=0;e.length>r;r++)o._setOption(d(e[r].dataItem),!0)}o._angularTagItems("compile"),o._placeholder()},_select:function(e){var t=this;t._state===p&&(t._state=""),t._allowSelection()&&(this.listView.select(e),t._placeholder(),t._state===h&&(t._state=u,t.listView.filter(!1),t.listView.skipUpdate(!0)))},_input:function(){var t=this,n=t.element[0].accessKey,i=t._innerWrapper.children("input.k-input");i[0]||(i=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=i.attr({accesskey:n,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,n=t._innerWrapper.children("ul");n[0]||(n=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=n},_tagTemplate:function(){var e,t=this,i=t.options,r=i.tagTemplate,o=i.dataSource,a="multiple"===i.tagMode;t.element[0].length&&!o&&(i.dataTextField=i.dataTextField||"text",i.dataValueField=i.dataValueField||"value"),e=a?n.template("#:"+n.expr(i.dataTextField,"data")+"#",{useWithBlock:!1}):n.template("#:values.length# item(s) selected"),t.tagTextTemplate=r=r?n.template(r):e,t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+r(e)+'</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon '+(a?"k-i-close":"k-i-arrow-s")+'">'+(a?"delete":"open")+"</span></span></li>"}},_loader:function(){this._loading=e('<span class="k-icon k-loading '+w+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=n.getComputedStyles(this.input[0],O);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,n=t.element,i=n.parent("span.k-multiselect");i[0]||((i=n.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent())[0].style.cssText=n[0].style.cssText,i[0].title=n[0].title,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(n)),t.wrapper=i.addClass(n[0].className).css("display",""),t._innerWrapper=e(i[0].firstChild)}});i.plugin(R)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return"<a class='k-button k-button-"+t+"'><span class='k-icon "+("increase"==t?n?"k-i-arrow-e":"k-i-arrow-n":n?"k-i-arrow-w":"k-i-arrow-s")+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function i(e){return function(t){return t+e}}function r(e){return function(){return e}}function o(e){return(e+"").replace(".",u.cultures.current.numberFormat["."])}function a(e){e=parseFloat(e,10);var t=_.pow(10,U||0);return _.round(e*t)/t}function s(e,n){var i=m(e.getAttribute(n));return null===i&&(i=t),i}function l(e){return typeof e!==W}function d(e){return 1e4*e}var c,u=window.kendo,h=u.ui.Widget,p=u.ui.Draggable,f=e.extend,g=u.format,m=u.parseFloat,v=e.proxy,b=e.isArray,_=Math,k=u.support,w=k.pointers,y=k.msPointers,x="change",C="slide",S=".slider",T="touchstart"+S+" mousedown"+S,D=w?"pointerdown"+S:y?"MSPointerDown"+S:T,I="touchend"+S+" mouseup"+S,E=w?"pointerup":y?"MSPointerUp"+S:I,A="moveSelection",O="keydown"+S,R="click"+S,P="mouseover"+S,M="focus"+S,F="blur"+S,H=".k-draghandle",N=".k-slider-track",$=".k-tick",L="k-state-selected",z="k-state-focused",j="k-state-default",B="k-state-disabled",U=3,V="disabled",W="undefined",G="tabindex",q=u.getTouches,K=h.extend({init:function(e,t){var n,o=this;if(h.fn.init.call(o,e,t),t=o.options,o._distance=a(t.max-t.min),o._isHorizontal="horizontal"==t.orientation,o._isRtl=o._isHorizontal&&u.support.isRtl(e),o._position=o._isHorizontal?"left":"bottom",o._sizeFn=o._isHorizontal?"width":"height",o._outerSize=o._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled&&t.tooltip.format||"{0}",0>=t.smallStep)throw Error("Kendo UI Slider smallStep must be a positive number.");o._createHtml(),o.wrapper=o.element.closest(".k-slider"),o._trackDiv=o.wrapper.find(N),o._setTrackDivWidth(),o._maxSelection=o._trackDiv[o._sizeFn](),o._sliderItemsInit(),o._reset(),o._tabindex(o.wrapper.find(H)),o[t.enabled?"enable":"disable"](),n=u.support.isRtl(o.wrapper)?-1:1,o._keyMap={37:i(-1*n*t.smallStep),40:i(-t.smallStep),39:i(1*n*t.smallStep),38:i(+t.smallStep),35:r(t.max),36:r(t.min),33:i(+t.largeStep),34:i(-t.largeStep)},u.notify(o)},events:[x,C],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_resize:function(){this._setTrackDivWidth(),this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh()},_sliderItemsInit:function(){var e=this,t=e.options,n=e._maxSelection/((t.max-t.min)/t.smallStep),i=e._calculateItemsWidth(_.floor(e._distance/t.smallStep));"none"!=t.tickPlacement&&n>=2&&(e._trackDiv.before(function(e,t){var n,i="<ul class='k-reset k-slider-items'>",r=_.floor(a(t/e.smallStep))+1;for(n=0;r>n;n++)i+="<li class='k-tick' role='presentation'>&nbsp;</li>";return i+"</ul>"}(t,e._distance)),e._setItemsWidth(i),e._setItemsTitle()),e._calculateSteps(i),"none"!=t.tickPlacement&&n>=2&&t.largeStep>=t.smallStep&&e._setItemsLargeTick()},getSize:function(){return u.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10);e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]()-2-t)},_setItemsWidth:function(t){var n,i=this,r=i.options,o=t.length-1,a=i.wrapper.find($),s=0,l=a.length,d=0;for(n=0;l-2>n;n++)e(a[n+1])[i._sizeFn](t[n]);if(i._isHorizontal?(e(a[0]).addClass("k-first")[i._sizeFn](t[o-1]),e(a[o]).addClass("k-last")[i._sizeFn](t[o])):(e(a[o]).addClass("k-first")[i._sizeFn](t[o]),e(a[0]).addClass("k-last")[i._sizeFn](t[o-1])),i._distance%r.smallStep!=0&&!i._isHorizontal){for(n=0;t.length>n;n++)d+=t[n];s=i._maxSelection-d,s+=parseFloat(i._trackDiv.css(i._position),10)+2,i.wrapper.find(".k-slider-items").css("padding-top",s)}},_setItemsTitle:function(){for(var t=this,n=t.options,i=t.wrapper.find($),r=n.min,o=i.length,s=t._isHorizontal&&!t._isRtl?0:o-1,l=t._isHorizontal&&!t._isRtl?o:-1,d=t._isHorizontal&&!t._isRtl?1:-1;s-l!=0;s+=d)e(i[s]).attr("title",g(n.tooltip.format,a(r))),r+=n.smallStep},_setItemsLargeTick:function(){var t,n,i=this,r=i.options,o=i.wrapper.find($),s=0;if(d(r.largeStep)%d(r.smallStep)==0||i._distance/r.largeStep>=3)for(i._isHorizontal||i._isRtl||(o=e.makeArray(o).reverse()),s=0;o.length>s;s++)t=e(o[s]),(n=a(d(i._values[s]-this.options.min)))%d(r.smallStep)==0&&n%d(r.largeStep)==0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==s&&s!==o.length-1&&t.css("line-height",t[i._sizeFn]()+"px"))},_calculateItemsWidth:function(e){var t,n,i,r=this,o=r.options,a=parseFloat(r._trackDiv.css(r._sizeFn))+1,s=a/r._distance;for(r._distance/o.smallStep-_.floor(r._distance/o.smallStep)>0&&(a-=r._distance%o.smallStep*s),t=a/e,n=[],i=0;e-1>i;i++)n[i]=t;return n[e-1]=n[e]=t/2,r._roundWidths(n)},_roundWidths:function(e){var t,n=0,i=e.length;for(t=0;i>t;t++)n+=e[t]-_.floor(e[t]),e[t]=_.floor(e[t]);return n=_.round(n),this._addAdditionalSize(n,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var n,i=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(n=0;e>n;n++)t[parseInt(_.round(i*n),10)]+=1;return t},_calculateSteps:function(e){var t,n=this,i=n.options,r=i.min,o=0,s=_.ceil(n._distance/i.smallStep),l=1;if(s+=n._distance/i.smallStep%1==0?1:0,e.splice(0,0,2*e[s-2]),e.splice(s-1,1,2*e.pop()),n._pixelSteps=[o],n._values=[r],0!==s){for(;s>l;)o+=(e[l-1]+e[l])/2,n._pixelSteps[l]=o,r+=i.smallStep,n._values[l]=a(r),l++;t=n._distance%i.smallStep==0?s-1:s,n._pixelSteps[t]=n._maxSelection,n._values[t]=i.max,n._isRtl&&(n._pixelSteps.reverse(),n._values.reverse())}},_getValueFromPosition:function(e,t){var n,i=this,r=i.options,o=_.max(r.smallStep*(i._maxSelection/i._distance),0),s=0,l=o/2;if(i._isHorizontal?(s=e-t.startPoint,i._isRtl&&(s=i._maxSelection-s)):s=t.startPoint-e,i._maxSelection-(parseInt(i._maxSelection%o,10)-3)/2<s)return r.max;for(n=0;i._pixelSteps.length>n;n++)if(_.abs(i._pixelSteps[n]-s)-1<=l)return a(i._values[n])},_getFormattedValue:function(e,t){var n,i,r,o="",a=this.options.tooltip;return b(e)?(i=e[0],r=e[1]):t&&t.type&&(i=t.selectionStart,r=t.selectionEnd),t&&(n=t.tooltipTemplate),!n&&a.template&&(n=u.template(a.template)),b(e)||t&&t.type?o=n?n({selectionStart:i,selectionEnd:r}):(i=g(a.format,i))+" - "+(r=g(a.format,r)):(t&&(t.val=e),o=n?n({value:e}):g(a.format,e)),o},_getDraggableArea:function(){var e=this,t=u.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,i=e.options,r=t.find("input");2==r.length?(r.eq(0).prop("value",o(i.selectionStart)),r.eq(1).prop("value",o(i.selectionEnd))):t.prop("value",o(i.value)),t.wrap(function(e,t,n){var i=n?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),o=t.attr("class")?" "+t.attr("class"):"",a="";return"bottomRight"==e.tickPlacement?a=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(a=" k-slider-topleft"),"<div class='k-widget k-slider"+i+o+"'"+(r=r?" style='"+r+"'":"")+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+a+"'></div></div>"}(i,t,e._isHorizontal)).hide(),i.showButtons&&t.before(n(i,"increase",e._isHorizontal)).before(n(i,"decrease",e._isHorizontal)),t.before(function(e,t){var n=t.is("input")?1:2;return"<div class='k-slider-track'><div class='k-slider-selection'>\x3c!-- --\x3e</div><a href='#' class='k-draghandle' title='"+(2==n?e.leftDragHandleTitle:e.dragHandleTitle)+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(n>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(n>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}(i,t))},_focus:function(t){var n=this,i=t.target,r=n.value(),o=n._drag;o||(i==n.wrapper.find(H).eq(0)[0]?(o=n._firstHandleDrag,n._activeHandle=0):(o=n._lastHandleDrag,n._activeHandle=1),r=r[n._activeHandle]),e(i).addClass(z+" "+L),o&&(n._activeHandleDrag=o,o.selectionStart=n.options.selectionStart,o.selectionEnd=n.options.selectionEnd,o._updateTooltip(r))},_focusWithMouse:function(t){t=e(t);var n=this,i=t.is(H)?t.index():0;window.setTimeout(function(){n.wrapper.find(H)[2==i?1:0].focus()},1),n._setTooltipTimeout()},_blur:function(t){var n=this,i=n._activeHandleDrag;e(t.target).removeClass(z+" "+L),i&&(i._removeTooltip(),delete n._activeHandleDrag,delete n._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){var e;window.clearTimeout(this._tooltipTimeout),(e=this._drag||this._activeHandleDrag)&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._form=r.on("reset",v(t._formResetHandler,t)))},destroy:function(){this._form&&this._form.off("reset",this._formResetHandler),h.fn.destroy.call(this)}}),Y=K.extend({init:function(n,i){var r,a=this;n.type="text",i=f({},{value:s(n,"value"),min:s(n,"min"),max:s(n,"max"),smallStep:s(n,"step")},i),n=e(n),i&&i.enabled===t&&(i.enabled=!n.is("[disabled]")),K.fn.init.call(a,n,i),l((i=a.options).value)&&null!==i.value||(i.value=i.min,n.prop("value",o(i.min))),i.value=_.max(_.min(i.value,i.max),i.min),r=a.wrapper.find(H),new Y.Selection(r,a,i),a._drag=new Y.Drag(r,"",a,i)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(n){var i,r,o,a=this,s=a.options;a.disable(),!1!==n&&(a.wrapper.removeClass(B).addClass(j),a.wrapper.find("input").removeAttr(V),i=function(n){var i,r,o,s=q(n)[0];if(s){if(i=a._isHorizontal?s.location.pageX:s.location.pageY,r=a._getDraggableArea(),(o=e(n.target)).hasClass("k-draghandle"))return o.addClass(z+" "+L),t;a._update(a._getValueFromPosition(i,r)),a._focusWithMouse(n.target),a._drag.dragstart(n),n.preventDefault()}},a.wrapper.find($+", "+N).on(D,i).end().on(D,function(){e(document.documentElement).one("selectstart",u.preventDefault)}).on(E,function(){a._drag._end()}),a.wrapper.find(H).attr(G,0).on(I,function(){a._setTooltipTimeout()}).on(R,function(e){a._focusWithMouse(e.target),e.preventDefault()}).on(M,v(a._focus,a)).on(F,v(a._blur,a)),r=v(function(e){var t=a._nextValueByIndex(a._valueIndex+1*e);a._setValueInRange(t),a._drag._updateTooltip(t)},a),s.showButtons&&(o=v(function(e,t){this._clearTooltipTimeout(),(1===e.which||k.touch&&0===e.which)&&(r(t),this.timeout=setTimeout(v(function(){this.timer=setInterval(function(){r(t)},60)},this),200))},a),a.wrapper.find(".k-button").on(I,v(function(e){this._clearTimer(),a._focusWithMouse(e.target)},a)).on(P,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout"+S,v(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},a)).eq(0).on(T,v(function(e){o(e,1)},a)).click(!1).end().eq(1).on(T,v(function(e){o(e,-1)},a)).click(u.preventDefault)),a.wrapper.find(H).off(O,!1).on(O,v(this._keydown,a)),s.enabled=!0)},disable:function(){var t=this;t.wrapper.removeClass(j).addClass(B),e(t.element).prop(V,V),t.wrapper.find(".k-button").off(T).on(T,u.preventDefault).off(I).on(I,u.preventDefault).off("mouseleave"+S).on("mouseleave"+S,u.preventDefault).off(P).on(P,u.preventDefault),t.wrapper.find($+", "+N).off(D).off(E),t.wrapper.find(H).attr(G,-1).off(I).off(O).off(R).off(M).off(F),t.options.enabled=!1},_update:function(e){var t=this,n=t.value()!=e;t.value(e),n&&t.trigger(x,{value:t.options.value})},value:function(e){var n=this,i=n.options;return e=a(e),isNaN(e)?i.value:(e>=i.min&&i.max>=e&&i.value!=e&&(n.element.prop("value",o(e)),i.value=e,n._refreshAriaAttr(e),n._refresh()),t)},_refresh:function(){this.trigger(A,{value:this.options.value})},_refreshAriaAttr:function(e){var t,n=this._drag;t=n&&n._tooltipDiv?n._tooltipDiv.text():this._getFormattedValue(e,null),this.wrapper.find(H).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._clearTooltipTimeout(),t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),t._drag._updateTooltip(t.value()),e.preventDefault())},_setValueInRange:function(e){var n=this,i=n.options;return e=a(e),isNaN(e)?(n._update(i.min),t):(e=_.max(_.min(e,i.max),i.min),n._update(e),t)},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[_.max(0,_.min(e,t-1))]},_formResetHandler:function(){var e=this,t=e.options.min;setTimeout(function(){var n=e.element[0].value;e.value(""===n||isNaN(n)?t:n)})},destroy:function(){var e=this;K.fn.destroy.call(e),e.wrapper.off(S).find(".k-button").off(S).end().find(H).off(S).end().find($+", "+N).off(S).end(),e._drag.draggable.destroy(),e._drag._removeTooltip(!0)}});Y.Selection=function(e,t,n){function i(i){var r=i-n.min,o=t._valueIndex=_.ceil(a(r/n.smallStep)),s=parseInt(t._pixelSteps[o],10),l=t._trackDiv.find(".k-slider-selection"),d=parseInt(e[t._outerSize]()/2,10),c=t._isRtl?2:0;l[t._sizeFn](t._isRtl?t._maxSelection-s:s),e.css(t._position,s-d-c)}i(n.value),t.bind([x,C,A],function(e){i(parseFloat(e.value,10))})},Y.Drag=function(e,t,n,i){var r=this;r.owner=n,r.options=i,r.element=e,r.type=t,r.draggable=new p(e,{distance:0,dragstart:v(r._dragstart,r),drag:v(r.drag,r),dragend:v(r.dragend,r),dragcancel:v(r.dragcancel,r)}),e.click(!1)},Y.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this.draggable.userEvents._start(e)},_dragstart:function(n){var i=this,r=i.owner,o=i.options;return o.enabled?(this.owner._activeDragHandle=this,r.element.off(P),r.wrapper.find("."+z).removeClass(z+" "+L),i.element.addClass(z+" "+L),e(document.documentElement).css("cursor","pointer"),i.dragableArea=r._getDraggableArea(),i.step=_.max(o.smallStep*(r._maxSelection/r._distance),0),i.type?(i.selectionStart=o.selectionStart,i.selectionEnd=o.selectionEnd,r._setZIndex(i.type)):i.oldVal=i.val=o.value,i._removeTooltip(!0),i._createTooltip(),t):(n.preventDefault(),t)},_createTooltip:function(){var t,n=this,i=n.owner,r=n.options.tooltip,o="",a=e(window);r.enabled&&(r.template&&(n.tooltipTemplate=u.template(r.template)),e(".k-slider-tooltip").remove(),n.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'>\x3c!-- --\x3e</div>").appendTo(document.body),o=i._getFormattedValue(n.val||i.value(),n),n.type||(t="k-callout-"+(i._isHorizontal?"s":"e"),n.tooltipInnerDiv="<div class='k-callout "+t+"'>\x3c!-- --\x3e</div>",o+=n.tooltipInnerDiv),n.tooltipDiv.html(o),n._scrollOffset={top:a.scrollTop(),left:a.scrollLeft()},n.moveTooltip())},drag:function(e){var t,n=this,i=n.owner,r=e.x.location,o=e.y.location,a=n.dragableArea.startPoint,s=n.dragableArea.endPoint;e.preventDefault(),n.val=i._isHorizontal?i._isRtl?n.constrainValue(r,a,s,s>r):n.constrainValue(r,a,s,r>=s):n.constrainValue(o,s,a,s>=o),n.oldVal!=n.val&&(n.oldVal=n.val,n.type?("firstHandle"==n.type?n.selectionStart=n.selectionEnd>n.val?n.val:n.selectionEnd=n.val:n.val>n.selectionStart?n.selectionEnd=n.val:n.selectionStart=n.selectionEnd=n.val,t={values:[n.selectionStart,n.selectionEnd],value:[n.selectionStart,n.selectionEnd]}):t={value:n.val},i.trigger(C,t)),n._updateTooltip(n.val)},_updateTooltip:function(e){var t=this,n="";t.options.tooltip.enabled&&(t.tooltipDiv||t._createTooltip(),n=t.owner._getFormattedValue(a(e),t),t.type||(n+=t.tooltipInnerDiv),t.tooltipDiv.html(n),t.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this,n=t.owner;return e(document.documentElement).css("cursor",""),t.type?n._update(t.selectionStart,t.selectionEnd):(n._update(t.val),t.draggable.userEvents._disposeAll()),t._end()},_end:function(){var e=this.owner;return e._focusWithMouse(this.element),e.element.on(P),!1},_removeTooltip:function(t){var n=this,i=n.owner;n.tooltipDiv&&i.options.tooltip.enabled&&i.options.enabled&&(t?(n.tooltipDiv.remove(),n.tooltipDiv=null):n.tooltipDiv.fadeOut("slow",function(){e(this).remove(),n.tooltipDiv=null}))},moveTooltip:function(){var t,n,i,r,o=this,a=o.owner,s=0,l=0,d=o.element,c=u.getOffset(d),h=e(window),p=o.tooltipDiv.find(".k-callout"),f=o.tooltipDiv.outerWidth(),g=o.tooltipDiv.outerHeight();o.type?(t=a.wrapper.find(H),c=u.getOffset(t.eq(0)),n=u.getOffset(t.eq(1)),a._isHorizontal?(s=n.top,l=c.left+(n.left-c.left)/2):(s=c.top+(n.top-c.top)/2,l=n.left),r=t.eq(0).outerWidth()+16):(s=c.top,l=c.left,r=d.outerWidth()+16),a._isHorizontal?(l-=parseInt((f-d[a._outerSize]())/2,10),s-=g+p.height()+8):(s-=parseInt((g-d[a._outerSize]())/2,10),l-=f+p.width()+8),a._isHorizontal?(s+=i=o._flip(s,g,r,h.outerHeight()+o._scrollOffset.top),l+=o._fit(l,f,h.outerWidth()+o._scrollOffset.left)):(i=o._flip(l,f,r,h.outerWidth()+o._scrollOffset.left),s+=o._fit(s,g,h.outerHeight()+o._scrollOffset.top),l+=i),i>0&&p&&(p.removeClass(),p.addClass("k-callout k-callout-"+(a._isHorizontal?"n":"w"))),o.tooltipDiv.css({top:s,left:l})},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i){var r=0;return e+t>i&&(r+=-(n+t)),0>e+r&&(r+=n+t),r},constrainValue:function(e,t,n,i){var r=this;return e>t&&n>e?r.owner._getValueFromPosition(e,r.dragableArea):i?r.options.max:r.options.min}},u.ui.plugin(Y),(c=K.extend({init:function(n,i){var r,a=this,d=e(n).find("input"),u=d.eq(0)[0],h=d.eq(1)[0];u.type="text",h.type="text",i&&i.showButtons&&(window.console&&window.console.warn("showbuttons option is not supported for the range slider, ignoring"),i.showButtons=!1),(i=f({},{selectionStart:s(u,"value"),min:s(u,"min"),max:s(u,"max"),smallStep:s(u,"step")},{selectionEnd:s(h,"value"),min:s(h,"min"),max:s(h,"max"),smallStep:s(h,"step")},i))&&i.enabled===t&&(i.enabled=!d.is("[disabled]")),K.fn.init.call(a,n,i),l((i=a.options).selectionStart)&&null!==i.selectionStart||(i.selectionStart=i.min,d.eq(0).prop("value",o(i.min))),l(i.selectionEnd)&&null!==i.selectionEnd||(i.selectionEnd=i.max,d.eq(1).prop("value",o(i.max))),r=a.wrapper.find(H),new c.Selection(r,a,i),a._firstHandleDrag=new Y.Drag(r.eq(0),"firstHandle",a,i),a._lastHandleDrag=new Y.Drag(r.eq(1),"lastHandle",a,i)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(n){var i,r=this,o=r.options;r.disable(),!1!==n&&(r.wrapper.removeClass(B).addClass(j),r.wrapper.find("input").removeAttr(V),i=function(n){var i,a,s,l,d,c,u,h=q(n)[0];if(h){if(i=r._isHorizontal?h.location.pageX:h.location.pageY,a=r._getDraggableArea(),s=r._getValueFromPosition(i,a),(l=e(n.target)).hasClass("k-draghandle"))return r.wrapper.find("."+z).removeClass(z+" "+L),l.addClass(z+" "+L),t;o.selectionStart>s?(d=s,c=o.selectionEnd,u=r._firstHandleDrag):s>r.selectionEnd?(d=o.selectionStart,c=s,u=r._lastHandleDrag):o.selectionEnd-s>=s-o.selectionStart?(d=s,c=o.selectionEnd,u=r._firstHandleDrag):(d=o.selectionStart,c=s,u=r._lastHandleDrag),u.dragstart(n),r._setValueInRange(d,c),r._focusWithMouse(u.element)}},r.wrapper.find($+", "+N).on(D,i).end().on(D,function(){e(document.documentElement).one("selectstart",u.preventDefault)}).on(E,function(){r._activeDragHandle&&r._activeDragHandle._end()}),r.wrapper.find(H).attr(G,0).on(I,function(){r._setTooltipTimeout()}).on(R,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(M,v(r._focus,r)).on(F,v(r._blur,r)),r.wrapper.find(H).off(O,u.preventDefault).eq(0).on(O,v(function(e){this._keydown(e,"firstHandle")},r)).end().eq(1).on(O,v(function(e){this._keydown(e,"lastHandle")},r)),r.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass(j).addClass(B),e.wrapper.find("input").prop(V,V),e.wrapper.find($+", "+N).off(D).off(E),e.wrapper.find(H).attr(G,-1).off(I).off(O).off(R).off(M).off(F),e.options.enabled=!1},_keydown:function(e,t){var n,i,r,o=this,s=o.options.selectionStart,l=o.options.selectionEnd;e.keyCode in o._keyMap&&(o._clearTooltipTimeout(),"firstHandle"==t?(r=o._activeHandleDrag=o._firstHandleDrag,(s=o._keyMap[e.keyCode](s))>l&&(l=s)):(r=o._activeHandleDrag=o._lastHandleDrag,s>(l=o._keyMap[e.keyCode](l))&&(s=l)),o._setValueInRange(a(s),a(l)),n=Math.max(s,o.options.selectionStart),i=Math.min(l,o.options.selectionEnd),r.selectionEnd=Math.max(i,o.options.selectionStart),r.selectionStart=Math.min(n,o.options.selectionEnd),r._updateTooltip(o.value()[o._activeHandle]),e.preventDefault())},_update:function(e,t){var n=this,i=n.value(),r=i[0]!=e||i[1]!=t;n.value([e,t]),r&&n.trigger(x,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,n){var i=this,r=i.options,s=r.selectionStart,l=r.selectionEnd;return isNaN(e)&&isNaN(n)?[s,l]:(e=a(e),n=a(n),e>=r.min&&r.max>=e&&n>=r.min&&r.max>=n&&n>=e&&(s!=e||l!=n)&&(i.element.find("input").eq(0).prop("value",o(e)).end().eq(1).prop("value",o(n)),r.selectionStart=e,r.selectionEnd=n,i._refresh(),i._refreshAriaAttr(e,n)),t)},values:function(e,t){return b(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger(A,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var n,i=this,r=i.wrapper.find(H),o=i._activeHandleDrag;n=i._getFormattedValue([e,t],o),r.eq(0).attr("aria-valuenow",e),r.eq(1).attr("aria-valuenow",t),r.attr("aria-valuetext",n)},_setValueInRange:function(e,t){var n=this.options;e=_.max(_.min(e,n.max),n.min),t=_.max(_.min(t,n.max),n.min),e==n.max&&t==n.max&&this._setZIndex("firstHandle"),this._update(_.min(e,t),_.max(e,t))},_setZIndex:function(t){this.wrapper.find(H).each(function(n){e(this).css("z-index","firstHandle"==t?1-n:n)})},_formResetHandler:function(){var e=this,t=e.options;setTimeout(function(){var n=e.element.find("input"),i=n[0].value,r=n[1].value;e.values(""===i||isNaN(i)?t.min:i,""===r||isNaN(r)?t.max:r)})},destroy:function(){var e=this;K.fn.destroy.call(e),e.wrapper.off(S).find($+", "+N).off(S).end().find(H).off(S),e._firstHandleDrag.draggable.destroy(),e._lastHandleDrag.draggable.destroy()}})).Selection=function(e,t,n){function i(i){var r=(i=i||[])[0]-n.min,o=i[1]-n.min,s=_.ceil(a(r/n.smallStep)),l=_.ceil(a(o/n.smallStep)),d=t._pixelSteps[s],c=t._pixelSteps[l],u=parseInt(e.eq(0)[t._outerSize]()/2,10),h=t._isRtl?2:0;e.eq(0).css(t._position,d-u-h).end().eq(1).css(t._position,c-u-h),function(e,n){var i,r,o=t._trackDiv.find(".k-slider-selection");i=_.abs(e-n),o[t._sizeFn](i),t._isRtl?(r=_.max(e,n),o.css("right",t._maxSelection-r-1)):(r=_.min(e,n),o.css(t._position,r-1))}(d,c)}i(t.value()),t.bind([x,C,A],function(e){i(e.values)})},u.ui.plugin(c)}(window.kendo.jQuery),function(e,t,n){function i(e,t,n){(n=c(n))&&!n.equals(e.color())&&("change"==t&&(e._value=n),n=1!=n.a?n.toCssRgba():n.toCss(),e.trigger(t,{value:n}))}function r(e,t,n){var i,r;return i=(e=Array.prototype.slice.call(e)).length,0>(r=e.indexOf(t))?0>n?e[i-1]:e[0]:(0>(r+=n)?r+=i:r%=i,e[r])}function o(e){e.preventDefault()}function a(e,t){return function(){return e.apply(t,arguments)}}var s=window.kendo,l=s.ui,d=l.Widget,c=s.parseColor,u=s.Color,h=s.keys,p="background-color",f="k-state-selected",g={apply:"Apply",cancel:"Cancel"},m=".kendoColorTools",v="click"+m,b="keydown"+m,_=s.support.browser,k=_.msie&&9>_.version,w=d.extend({init:function(e,t){var n,i=this;d.fn.init.call(i,e,t),e=i.element,t=i.options,i._value=t.value=c(t.value),i._tabIndex=e.attr("tabIndex")||0,(n=i._ariaId=t.ariaId)&&e.attr("aria-labelledby",n),t._standalone&&(i._triggerSelect=i._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return e!==n&&(this._value=c(e),this._updateUI(this._value)),this._value},value:function(e){return(e=this.color(e))&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),e(".k-disabled-overlay",this.wrapper).remove(),t||this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)},_select:function(e,t){var n=this._value;e=this.color(e),t||(this.element.trigger("change"),e.equals(n)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){i(this,"select",e)},_triggerChange:function(e){i(this,"change",e)},destroy:function(){this.element&&this.element.off(m),this.wrapper&&this.wrapper.off(m).find("*").off(m),this.wrapper=null,d.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),y=w.extend({init:function(t,n){var i,r,o,l,d=this;if(w.fn.init.call(d,t,n),t=d.wrapper=d.element,"websafe"==(i=(n=d.options).palette)?(i="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",n.columns=18):"basic"==i&&(i="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7"),"string"==typeof i&&(i=i.split(",")),e.isArray(i)&&(i=e.map(i,function(e){return c(e)})),d._selectedID=(n.ariaId||s.guid())+"_selected",t.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(e(d._template({colors:i,columns:n.columns,tileSize:n.tileSize,value:d._value,id:n.ariaId}))).on(v,".k-item",function(t){d._select(e(t.currentTarget).css(p))}).attr("tabIndex",d._tabIndex).on(b,a(d._keydown,d)),r=n.tileSize){if(/number|string/.test(typeof r))o=l=parseFloat(r);else{if("object"!=typeof r)throw Error("Unsupported value for the 'tileSize' argument");o=parseFloat(r.width),l=parseFloat(r.height)}t.find(".k-item").css({width:o,height:l})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.attr("tabIndex",this._tabIndex):this.wrapper.removeAttr("tabIndex")},_keydown:function(t){var n,i,a=this.wrapper.find(".k-item"),s=a.filter("."+f).get(0),l=t.keyCode;if(l==h.LEFT?n=r(a,s,-1):l==h.RIGHT?n=r(a,s,1):l==h.DOWN?n=r(a,s,this.options.columns):l==h.UP?n=r(a,s,-this.options.columns):l==h.ENTER?(o(t),s&&this._select(e(s).css(p))):l==h.ESC&&this._cancel(),n){o(t),this._current(n);try{i=c(n.css(p)),this._triggerSelect(i)}catch(e){}}},_current:function(t){this.wrapper.find("."+f).removeClass(f).attr("aria-selected",!1).removeAttr("id"),e(t).addClass(f).attr("aria-selected",!0).attr("id",this._selectedID),this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var i=null;this.wrapper.find(".k-item").each(function(){var r=c(e(this).css(p));return r&&r.equals(t)?(i=this,!1):n}),this._current(i)},_template:s.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+f+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')}),x=w.extend({init:function(t,n){var i=this;w.fn.init.call(i,t,n),n=i.options,t=i.element,i.wrapper=t.addClass("k-widget k-flatcolorpicker").append(i._template(n)),i._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),i._selectedColor=e(".k-selected-color-display",t),i._colorAsText=e("input.k-color-value",t),i._sliders(),i._hsvArea(),i._updateUI(i._value||c("#f00")),t.find("input.k-color-value").on(b,function(t){var n,r,o=this;if(t.keyCode==h.ENTER)try{n=c(o.value),r=i.color(),i._select(n,n.equals(r))}catch(t){e(o).addClass("k-state-error")}else i.options.autoupdate&&setTimeout(function(){var e=c(o.value,!0);e&&i._updateUI(e,!0)},10)}).end().on(v,".k-controls button.apply",function(){i._select(i._getHSV())}).on(v,".k-controls button.cancel",function(){i._updateUI(i.color()),i._cancel()}),k&&i._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,w.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:g},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){n._updateUI(n._getHSV(e.value,null,null,null))}function t(e){n._updateUI(n._getHSV(null,null,null,e.value/100))}var n=this,i=n.element;n._hueSlider=i.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),n._opacitySlider=i.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,n){var i=this.offset,r=e-i.left,o=n-i.top,a=this.width,s=this.height;r=0>r?0:r>a?a:r,o=0>o?0:o>s?s:o,t._svChange(r/a,1-o/s)}var t=this,n=t.element.find(".k-hsv-rectangle"),i=n.find(".k-draghandle").attr("tabIndex",0).on(b,a(t._keydown,t));t._hsvEvents=new s.UserEvents(n,{global:!0,press:function(t){this.offset=s.getOffset(n),this.width=n.width(),this.height=n.height(),i.focus(),e.call(this,t.x.location,t.y.location)},start:function(){n.addClass("k-dragging"),i.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){n.removeClass("k-dragging")}}),t._hsvRect=n,t._hsvHandle=i},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",this._tabIndex):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,n){var r=i._getHSV();r[t]+=n*(e.shiftKey?.01:.05),0>r[t]&&(r[t]=0),r[t]>1&&(r[t]=1),i._updateUI(r),o(e)}function n(t){var n=i._getHSV();n.h+=t*(e.shiftKey?1:5),0>n.h&&(n.h=0),n.h>359&&(n.h=359),i._updateUI(n),o(e)}var i=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?n(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?n(1):t("s",1);break;case h.UP:t(e.ctrlKey&&i._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&i._opacitySlider?"a":"v",-1);break;case h.ENTER:i._select(i._getHSV());break;case h.F2:i.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:i._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,n,i){var r=this._hsvRect,o=r.width(),a=r.height(),s=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=s.left/o),null==n&&(n=1-s.top/a),null==i&&(i=this._opacitySlider?this._opacitySlider.value()/100:1),u.fromHSV(e,t,n,i)},_svChange:function(e,t){var n=this._getHSV(null,e,t,null);this._updateUI(n)},_updateUI:function(e,t){var n=this,i=n._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),n._selectedColor.css(p,e.toDisplay()),t||n._colorAsText.val(n._opacitySlider?e.toCssRgba():e.toCss()),n._triggerSelect(e),e=e.toHSV(),n._hsvHandle.css({left:e.s*i.width()+"px",top:(1-e.v)*i.height()+"px"}),n._hueElements.css(p,u.fromHSV(e.h,1,1,1).toCss()),n._hueSlider.value(e.h),n._opacitySlider&&n._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:s.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),C=d.extend({init:function(t,n){var i,r,o,a,s,l=this;d.fn.init.call(l,t,n),n=l.options,i=(t=l.element).attr("value")||t.val(),i=c(i||n.value,!0),l._value=n.value=i,r=l.wrapper=e(l._template(n)),t.hide().after(r),t.is("input")&&(t.appendTo(r),o=t.closest("label"),(a=t.attr("id"))&&(o=o.add('label[for="'+a+'"]')),o.click(function(e){l.open(),e.preventDefault()})),l._tabIndex=t.attr("tabIndex")||0,l.enable(!t.attr("disabled")),(s=t.attr("accesskey"))&&(t.attr("accesskey",null),r.attr("accesskey",s)),l.bind("activate",function(e){e.isDefaultPrevented()||l.toggle()}),l._updateUI(i)},destroy:function(){this.wrapper.off(m).find("*").off(m),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,d.fn.destroy.call(this)},enable:function(e){var t=this,n=t.wrapper,i=n.children(".k-picker-wrap"),r=i.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),n.attr("aria-disabled",!e),r.off(m).on("mousedown"+m,o),n.addClass("k-state-disabled").removeAttr("tabIndex").add("*",n).off(m),e&&n.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+m,function(){i.addClass("k-state-hover")}).on("mouseleave"+m,function(){i.removeClass("k-state-hover")}).on("focus"+m,function(){i.addClass("k-state-focused")}).on("blur"+m,function(){i.removeClass("k-state-focused")}).on(b,a(t._keydown,t)).on(v,".k-select",a(t.toggle,t)).on(v,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})},_template:s.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:g,opacity:!1,buttons:!0,preview:!0,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:w.fn.color,value:w.fn.value,_select:w.fn._select,_triggerSelect:w.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=s.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t)),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(p,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),o(e)):(t==h.ENTER||t==h.DOWN)&&(this.open(),o(e))},_getPopup:function(){var t,i,r,o,a=this,l=a._popup;return l||(i=(t=a.options).palette?y:x,t._standalone=!1,delete t.select,delete t.change,delete t.cancel,r=s.guid(),o=a._selector=new i(e('<div id="'+r+'"/>').appendTo(document.body),t),a.wrapper.attr("aria-owns",r),a._popup=l=o.wrapper.kendoPopup({anchor:a.wrapper,adjustSize:{width:5,height:0}}).data("kendoPopup"),o.bind({select:function(e){a._updateUI(c(e.value))},change:function(){a._select(o.color()),a.close()},cancel:function(){a.close()}}),l.bind({close:function(e){if(a.trigger("close"))return e.preventDefault(),n;a.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=o._selectOnHide();t?a._select(t):(a.wrapper.focus(),a._updateUI(a.color()))},open:function(e){a.trigger("open")?e.preventDefault():a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){o._select(a.color(),!0),o.focus(),a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})),l}});l.plugin(y),l.plugin(x),l.plugin(C)}(i,parseInt),function(e,t){function n(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var i=window.kendo,r=i.caret,o=i.keys,a=i.ui,s=a.Widget,l=i._activeElement,d=i._extractFormat,c=i.parseFloat,u=i.support.placeholder,h=i.getCulture,p=i._round,f="change",g="disabled",m="readonly",v="spin",b=".kendoNumericTextBox",_="mouseenter"+b+" mouseleave.kendoNumericTextBox",k="k-state-default",w="k-state-focused",y="k-state-hover",x="focus",C=".",S="k-state-selected",T="k-state-disabled",D="aria-disabled",I="aria-readonly",E=/^(-)?(\d*)$/,A=null,O=e.proxy,R=e.extend,P=s.extend({init:function(n,r){var o,a,l,c,u=this,h=r&&r.step!==t;s.fn.init.call(u,n,r),r=u.options,n=u.element.on("focusout"+b,O(u._focusout,u)).attr("role","spinbutton"),r.placeholder=r.placeholder||n.attr("placeholder"),u._initialOptions=R({},r),u._reset(),u._wrapper(),u._arrows(),u._input(),i.support.mobileOS?u._text.on("touchend"+b+" "+x+b,function(){u._toggleText(!1),n.focus()}):u._text.on(x+b,O(u._click,u)),o=u.min(n.attr("min")),a=u.max(n.attr("max")),l=u._parse(n.attr("step")),r.min===A&&o!==A&&(r.min=o),r.max===A&&a!==A&&(r.max=a),h||l===A||(r.step=l),n.attr("aria-valuemin",r.min).attr("aria-valuemax",r.max),r.format=d(r.format),c=r.value,u.value(c!==A?c:n.val()),n.is("[disabled]")||e(u.element).parents("fieldset").is(":disabled")?u.enable(!1):u.readonly(n.is("[readonly]")),i.notify(u)},options:{name:"NumericTextBox",decimals:A,min:A,max:A,value:A,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[f,v],_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t._text.add(n),a=t._inputWrapper.off(_);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),n.off("keydown"+b).off("keypress"+b).off("paste"+b),r||i?(a.addClass(i?T:k).removeClass(i?k:T),o.attr(g,i).attr(m,r).attr(D,i).attr(I,r)):(a.addClass(k).removeClass(T).on(_,t._toggleHover),o.removeAttr(g).removeAttr(m).attr(D,!1).attr(I,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(S)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(S)}),t.element.on("keydown"+b,O(t._keydown,t)).on("keypress"+b,O(t._keypress,t)).on("paste"+b,O(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(b),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n=this;return e===t?n._value:((e=n._parse(e))===n._adjust(e)&&(n._update(e),n._old=n._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this.options,n=t.min,i=t.max;return e===A?e:(n!==A&&n>e?e=n:i!==A&&e>i&&(e=i),e)},_arrows:function(){var t,r=this,o=function(){clearTimeout(r._spinning),t.removeClass(S)},a=r.options,s=a.spinners,l=r.element;(t=l.siblings(".k-icon"))[0]||(t=e(n("n",a.upArrowText)+n("s",a.downArrowText)).insertAfter(l)).wrapAll('<span class="k-select"/>'),s||(t.parent().toggle(s),r._inputWrapper.addClass("k-expand-padding")),r._upArrow=t.eq(0),r._upArrowEventHandler=new i.UserEvents(r._upArrow,{release:o}),r._downArrow=t.eq(1),r._downArrowEventHandler=new i.UserEvents(r._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var n,i,o,a=e.target,s=r(a)[0],l=a.value.substring(0,s),d=t._format(t.options.format),c=d[","],u=0;c&&(i=RegExp("\\"+c,"g"),o=RegExp("([\\d\\"+c+"]+)(\\"+d[C]+")?(\\d+)?")),o&&(n=o.exec(l)),n&&(u=n[0].replace(i,"").length,-1!=l.indexOf("(")&&0>t._value&&u++),t._focusin(),r(t.element[0],u)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t._typing||t.element.trigger(f),t.trigger(f)),t._typing=!1},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(w),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(w).removeClass(y),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return(e=e.toLowerCase()).indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var t,n=this,i="k-formatted-value",r=n.element.addClass("k-input").show()[0],o=r.accessKey;(t=n.wrapper.find(C+i))[0]||(t=e('<input type="text"/>').insertBefore(r).addClass(i));try{r.setAttribute("type","text")}catch(e){r.type="text"}t[0].tabIndex=r.tabIndex,t[0].style.cssText=r.style.cssText,t[0].title=r.title,t.prop("placeholder",n.options.placeholder),o&&(t.attr("accesskey",o),r.accessKey=""),n._text=t.addClass(r.className)},_keydown:function(e){var t=this,n=e.keyCode;t._key=n,n==o.DOWN?t._step(-1):n==o.UP?t._step(1):n==o.ENTER?t._change(t.element.val()):t._typing=!0},_keypress:function(e){var t,n,i,a,s,l,d,c,u,h,p;0===e.which||e.metaKey||e.ctrlKey||e.keyCode===o.BACKSPACE||e.keyCode===o.ENTER||(n=(t=this).options.min,i=t.element,s=(a=r(i))[0],l=a[1],d=String.fromCharCode(e.which),c=t._format(t.options.format),u=t._key===o.NUMPAD_DOT,h=i.val(),u&&(d=c[C]),h=h.substring(0,s)+d+h.substring(l),(p=t._numericRegex(c).test(h))&&u?(i.val(h),r(i,s+d.length),e.preventDefault()):(null!==n&&n>=0&&"-"===h.charAt(0)||!p)&&e.preventDefault(),t._key=0)},_numericRegex:function(e){var t=this,n=e[C],i=t.options.decimals;return n===C&&(n="\\"+n),i===A&&(i=e.decimals),0===i?E:(t._separator!==n&&(t._separator=n,t._floatRegExp=RegExp("^(-)?(((\\d+("+n+"\\d*)?)|("+n+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){t._parse(n.value)===A&&t._update(i)})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(((n=i._parse(n))||"step"!==e)&&(r[e]=n,i.element.attr("aria-value"+e,n).attr(e,n)),t)},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;l()!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t._typing=!1,t.trigger(v)},_toggleHover:function(t){e(t.currentTarget).toggleClass(y,"mouseenter"===t.type)},_toggleText:function(e){this._text.toggle(e),this.element.toggle(!e)},_parse:function(e,t){return c(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,r=n.options,o=r.format,a=r.decimals,s=n._culture(),l=n._format(o,s);a===A&&(a=l.decimals),(t=(e=n._parse(e,s))!==A)&&(e=parseFloat(p(e,a))),n._value=e=n._adjust(e),n._placeholder(i.toString(e,o,s)),t?(-1!==(e=""+e).indexOf("e")&&(e=p(+e,a)),e=e.replace(C,l[C])):e="",n.element.val(e).attr("aria-valuenow",e)},_placeholder:function(e){this._text.val(e),u||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element,r=i[0];(t=i.parents(".k-numerictextbox")).is("span.k-numerictextbox")||(t=(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent()).wrap("<span/>").parent()),t[0].style.cssText=r.style.cssText,r.style.width="",n.wrapper=t.addClass("k-widget k-numerictextbox").addClass(r.className).css("display",""),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value),t.max(t._initialOptions.max),t.min(t._initialOptions.min)})},t._form=r.on("reset",t._resetHandler))}});a.plugin(P)}(window.kendo.jQuery),function(e,t){function n(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return n(e,i),e.filters?e.filters.length:e.field!=i}))}function i(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)o=(i=e[t]).text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function r(t,n){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=n}),t.filters.length):t.field!=n})}function o(n){return"and"==n.logic&&n.filters.length>1?[]:n.filters?e.map(n.filters,function(e){return o(e)}):null!==n.value&&n.value!==t?[n.value]:[]}function a(e,n){for(var i,r,o=s.getter(n,!0),a=[],l=0,d={};e.length>l;)(r=o(i=e[l++]))===t||null===r||d.hasOwnProperty(r)||(a.push(i),d[r]=!0);return a}var s=window.kendo,l=s.ui,d=e.proxy,c="kendoPopup",u="init",h="refresh",p="change",f=".kendoFilterMenu",g="Is equal to",m="Is not equal to",v={number:"numerictextbox",date:"datepicker"},b={string:"text",number:"number",date:"date"},_=s.isFunction,k=l.Widget,w=k.extend({init:function(t,n){var i,r,o,a,l=this,c="string";for(r in k.fn.init.call(l,t,n),i=l.operators=n.operators||{},t=l.element,(n=l.options).appendToElement||((o=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"))[0]||(o=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),o.attr("tabindex",-1).on("click"+f,d(l._click,l))),l.link=o||e(),l.dataSource=n.dataSource,l.field=n.field||t.attr(s.attr("field")),l.model=l.dataSource.reader.model,l._parse=function(e){return e+""},l.model&&l.model.fields&&(a=l.model.fields[l.field])&&(c=a.type||"string",a.parse&&(l._parse=d(a.parse,a))),n.values&&(c="enums"),l.type=c,i=i[c]||n.operators[c])break;l._defaultFilter=function(){return{field:l.field,operator:r||"eq",value:""}},l._refreshHandler=d(l.refresh,l),l.dataSource.bind(p,l._refreshHandler),n.appendToElement?l._init():l.refresh()},_init:function(){var t,n=this,i=n.options.ui,r=_(i);n.pane=n.options.pane,n.pane&&(n._isMobile=!0),r||(t=i||v[n.type]),n._isMobile?n._createMobileForm(t):n._createForm(t),n.form.on("submit"+f,d(n._submit,n)).on("reset"+f,d(n._reset,n)),r&&n.form.find(".k-textbox").removeClass("k-textbox").each(function(){i(e(this))}),n.form.find("["+s.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+s.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+s.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+s.attr("role")+"=datepicker]").removeClass("k-textbox"),n.refresh(),n.trigger(u,{field:n.field,container:n.form}),s.cycleForm(n.form)},_createForm:function(t){var n=this,r=n.options,o=n.operators||{},a=n.type;o=o[a]||r.operators[a],n.form=e('<form class="k-filter-menu"/>').html(s.template("boolean"===a?'<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>':'<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>')({field:n.field,format:r.format,ns:s.ns,messages:r.messages,extra:r.extra,operators:o,type:a,role:t,values:i(r.values)})),r.appendToElement?(n.element.append(n.form),n.popup=n.element.closest(".k-popup").data(c)):n.popup=n.form[c]({anchor:n.link,open:d(n._open,n),activate:d(n._activate,n),close:function(){n.options.closeCallback&&n.options.closeCallback(n.element)}}).data(c),n.form.on("keydown"+f,d(n._keydown,n))},_createMobileForm:function(t){var n=this,r=n.options,o=n.operators||{},a=n.type;o=o[a]||r.operators[a],n.form=e("<div />").html(s.template("boolean"===a?'<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>':'<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>')({field:n.field,title:r.title||n.field,format:r.format,ns:s.ns,messages:r.messages,extra:r.extra,operators:o,type:a,role:t,useRole:!s.support.input.date&&"date"===a||"number"===a,inputType:b[a],values:i(r.values)})),n.view=n.pane.append(n.form.html()),n.form=n.view.element.find("form"),n.view.element.on("click",".k-submit",function(e){n.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){n._closeForm(),e.preventDefault()})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=s.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&s.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;k.fn.destroy.call(e),e.form&&(s.unbind(e.form),s.destroy(e.form),e.form.unbind(f),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null),e.view&&(e.view.purge(),e.view=null),e.link.unbind(f),e._refreshHandler&&(e.dataSource.unbind(p,e._refreshHandler),e.dataSource=null),e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t,n,i,r,o=this,a=e.filters,s=!1,l=0,d=o.filterModel;for(t=0,n=a.length;n>t;t++)(r=a[t]).field==o.field?(d.set("logic",e.logic),(i=d.filters[l])||(d.filters.push({field:o.field}),i=d.filters[l]),i.set("value",o._parse(r.value)),i.set("operator",r.operator),l++,s=!0):r.filters&&(s=s||o._bind(r));return s},_stripFilters:function(t){return e.grep(t,function(e){return""!==e.value&&null!=e.value})},_merge:function(e){var t,i,r,o=this,a=e.logic||"and",s=this._stripFilters(e.filters),l=o.dataSource.filter()||{filters:[],logic:"and"};for(n(l,o.field),i=0,r=s.length;r>i;i++)(t=s[i]).value=o._parse(t.value);return s.length&&(l.filters.length?(e.filters=s,"and"!==l.logic&&(l.filters=[{logic:l.logic,filters:l.filters}],l.logic="and"),l.filters.push(s.length>1?e:s[0])):(l.filters=s,l.logic=a)),l},filter:function(e){(e=this._merge(e)).filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,n=t.dataSource.filter()||{filters:[]};n.filters=e.grep(n.filters,function(e){return e.filters?(e.filters=r(e.filters,t.field),e.filters.length):e.field!=t.field}),n.filters.length||(n=null),t.dataSource.filter(n)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){(t=e(this).data(c))&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==s.keys.ESC&&this.popup.close()},events:[u],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:g,neq:m,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:g,neq:m,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:g,neq:m,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:g,neq:m}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}}),y=".kendoFilterMultiCheck",x=s.data.DataSource,C=k.extend({init:function(t,n){var i,r;k.fn.init.call(this,t,n),n=this.options,this.element=e(t),i=this.field=this.options.field||this.element.attr(s.attr("field")),r=n.checkSource,this._foreignKeyValues()?(this.checkSource=x.create(n.values),this.checkSource.fetch()):n.forceUnique?(delete(r=n.dataSource.options).pageSize,this.checkSource=x.create(r),this.checkSource.reader.data=function(e,t){return function(n){return a(e(n),t)}}(this.checkSource.reader.data,this.field)):this.checkSource=x.create(r),this.dataSource=n.dataSource,this.model=this.dataSource.reader.model,this._parse=function(e){return e+""},this.model&&this.model.fields&&(i=this.model.fields[this.field])&&(i.parse&&(this._parse=d(i.parse,i)),this.type=i.type||"string"),n.appendToElement?this._init():this._createLink(),this._refreshHandler=d(this.refresh,this),this.dataSource.bind(p,this._refreshHandler)},_createLink:function(){var e=this.element,t=e.addClass("k-with-icon k-filterable").find(".k-grid-filter");t[0]||(t=e.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),this._link=t.attr("tabindex",-1).on("click"+f,d(this._click,this))},_init:function(){var e=this,t=this.options.forceUnique,n=this.options;this.pane=n.pane,this.pane&&(this._isMobile=!0),this._createForm(),this._foreignKeyValues()?this.refresh():t&&!this.checkSource.options.serverPaging&&this.dataSource.data().length?(this.checkSource.data(a(this.dataSource.data(),this.field)),this.refresh()):(this._attachProgress(),this.checkSource.fetch(function(){e.refresh.call(e)})),this.options.forceUnique||(this.checkChangeHandler=function(){e.container.empty(),e.refresh()},this.checkSource.bind(p,this.checkChangeHandler)),this.form.on("keydown"+y,d(this._keydown,this)).on("submit"+y,d(this._filter,this)).on("reset"+y,d(this._reset,this)),this.trigger(u,{field:this.field,container:this.form})},_attachProgress:function(){var e=this;this._progressHandler=function(){l.progress(e.container,!0)},this._progressHideHandler=function(){l.progress(e.container,!1)},this.checkSource.bind("progress",this._progressHandler).bind("change",this._progressHideHandler)},_createForm:function(){var t,n,i=this.options,r="<ul class='k-reset k-multicheck-wrap'></ul><button type='submit' class='k-button k-primary'>"+i.messages.filter+"</button>";r+="<button type='reset' class='k-button'>"+i.messages.clear+"</button>",this.form=e('<form class="k-filter-menu"/>').html(r),this.container=this.form.find(".k-multicheck-wrap"),this._isMobile?(this.view=this.pane.append(this.form.addClass("k-mobile-list").wrap("<div/>").parent().html()),t=this.view.element,this.form=t.find("form"),this.container=t.find(".k-multicheck-wrap"),n=this,t.on("click",".k-primary",function(e){n.form.submit(),e.preventDefault()}).on("click","[type=reset]",function(e){n._reset(),e.preventDefault()})):i.appendToElement?(this.popup=this.element.closest(".k-popup").data(c),this.element.append(this.form)):this.popup=this.form.kendoPopup({anchor:this._link}).data(c)},createCheckAllItem:function(){var t=this.options,n=s.template(t.itemTemplate({field:"all",mobile:this._isMobile})),i=e(n({all:t.messages.checkAll}));this.container.prepend(i),this.checkBoxAll=i.find(":checkbox").eq(0).addClass("k-check-all"),this.checkAllHandler=d(this.checkAll,this),this.checkBoxAll.on(p+y,this.checkAllHandler)},updateCheckAllState:function(){if(this.checkBoxAll){var e=this.container.find(":checkbox:not(.k-check-all)").length==this.container.find(":checked:not(.k-check-all)").length;this.checkBoxAll.prop("checked",e)}},refresh:function(e){var t=this.options.forceUnique,n=this.dataSource,i=this.getFilterArray();this._link&&this._link.toggleClass("k-state-active",0!==i.length),this.form&&(!e||!t||e.sender!==n||n.options.serverPaging||"itemchange"!=e.action&&"add"!=e.action&&"remove"!=e.action||this._foreignKeyValues()||(this.checkSource.data(a(this.dataSource.data(),this.field)),this.container.empty()),this.container.is(":empty")&&this.createCheckBoxes(),this.checkValues(i),this.trigger(h))},getFilterArray:function(){var t=e.extend(!0,{},{filters:[],logic:"and"},this.dataSource.filter());return function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field==i&&"eq"==e.operator}))}(t,this.field),o(t)},createCheckBoxes:function(){var e,t,n,i=this.options,r={field:this.field,format:i.format,mobile:this._isMobile,type:this.type};this.options.forceUnique?this._foreignKeyValues()?(e=this.checkSource.data(),r.valueField="value",r.field="text"):e=this.checkSource.data():e=this.checkSource.view(),t=s.template(i.itemTemplate(r)),n=s.render(t,e),i.checkAll&&(this.createCheckAllItem(),this.container.on(p+y,":checkbox",d(this.updateCheckAllState,this))),this.container.append(n)},checkAll:function(){var e=this.checkBoxAll.is(":checked");this.container.find(":checkbox").prop("checked",e)},checkValues:function(t){var n=this;e(e.grep(this.container.find(":checkbox").prop("checked",!1),function(i){var r,o,a=!1;if(!e(i).is(".k-check-all"))for(r=n._parse(e(i).val()),o=0;t.length>o;o++)if(a="date"==n.type?t[o].getTime()==r.getTime():t[o]==r)return a})).prop("checked",!0),this.updateCheckAllState()},_filter:function(t){var n,i;t.preventDefault(),t.stopPropagation(),i=this,(n={logic:"or"}).filters=e.map(this.form.find(":checkbox:checked:not(.k-check-all)"),function(t){return{value:e(t).val(),operator:"eq",field:i.field}}),(n=this._merge(n)).filters.length&&this.dataSource.filter(n),this._closeForm()},_stripFilters:function(t){return e.grep(t,function(e){return null!=e.value})},_foreignKeyValues:function(){var e=this.options;return e.values&&!e.checkSource},destroy:function(){var e=this;k.fn.destroy.call(e),e.form&&(s.unbind(e.form),s.destroy(e.form),e.form.unbind(y),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null,e.container&&(e.container.unbind(y),e.container=null),e.checkBoxAll&&e.checkBoxAll.unbind(y)),e.view&&(e.view.purge(),e.view=null),e._link&&e._link.unbind(f),e._refreshHandler&&(e.dataSource.unbind(p,e._refreshHandler),e.dataSource=null),e.checkChangeHandler&&e.checkSource.unbind(p,e.checkChangeHandler),e._progressHandler&&e.checkSource.unbind("progress",e._progressHandler),e._progressHideHandler&&e.checkSource.unbind("change",e._progressHideHandler),e.element=e.checkSource=e.container=e.checkBoxAll=e._link=e._refreshHandler=e.checkAllHandler=null},options:{name:"FilterMultiCheck",itemTemplate:function(e){var n=e.field,i=e.format,r=e.valueField,o=e.mobile,a="";return r===t&&(r=n),"date"==e.type&&(a=":yyyy-MM-ddTHH:mm:sszzz"),"<li class='k-item'><label class='k-label'><input type='checkbox' class='"+(o?"k-check":"")+"'  value='#:kendo.format('{0"+a+"}',"+r+")#'/>#:kendo.format('"+(i||"{0}")+"', "+n+")#</label></li>"},checkAll:!0,appendToElement:!1,messages:{checkAll:"Select All",clear:"Clear",filter:"Filter"},forceUnique:!0,animations:{left:"slide",right:"slide:right"}},events:[u,h]});e.extend(C.fn,{_click:w.fn._click,_keydown:w.fn._keydown,_reset:w.fn._reset,_closeForm:w.fn._closeForm,clear:w.fn.clear,_merge:w.fn._merge}),l.plugin(w),l.plugin(C)}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)}catch(e){return!1}}function i(t){(t=e(t)).addClass("k-item").children(w).addClass(E),t.children("a").addClass(C).children(w).addClass(E),t.filter(":not([disabled])").addClass(B),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(W).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+C).length||t.contents().filter(function(){return!(this.nodeName.match(_)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+C+"'/>"),r(t),o(t)}function r(t){(t=e(t)).find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(x+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function o(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(I),t.filter(".k-last:not(:last-child)").removeClass(S),t.filter(":first-child").addClass(I),t.filter(":last-child").addClass(S)}var a,s=window.kendo,l=s.ui,d=s._activeElement,c=s.support.touch&&s.support.mobileOS,u="mousedown",h="click",p=e.extend,f=e.proxy,g=e.each,m=s.template,v=s.keys,b=l.Widget,_=/^(ul|a|div)$/i,k=".kendoMenu",w="img",y="open",x="k-menu",C="k-link",S="k-last",T="close",D="timer",I="k-first",E="k-image",A="select",O="zIndex",R="activate",P="deactivate",M="touchstart"+k+" MSPointerDown"+k+" pointerdown"+k,F=s.support.pointers,H=s.support.msPointers,N=F?"pointerover":H?"MSPointerOver":"mouseenter",$=F?"pointerout":H?"MSPointerOut":"mouseleave",L=c||H||F,z=e(document.documentElement),j="kendoPopup",B="k-state-default",U="k-state-hover",V="k-state-focused",W="k-state-disabled",G=".k-menu",q=".k-menu-group",K=q+",.k-animation-container",Y=":not(.k-list) > .k-item",Q=".k-item:not(.k-state-disabled)",X=":not(.k-item.k-separator)",J=X+":eq(0)",Z=X+":last",ee={2:1,touch:1},te={content:m("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:m("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:m("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:m("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:m("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:m("<span class='#= arrowClass(item, group) #'></span>"),sprite:m("<span class='k-sprite #= spriteCssClass #'></span>"),empty:m("")},ne={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=!1===t.enabled?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(){return C},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){return"k-icon"+(t.horizontal?" k-i-arrow-s":" k-i-arrow-e")},text:function(e){return!1===e.encoded?e.text:s.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}},ie=b.extend({init:function(t,n){var i=this;b.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,i._initData(n),i._updateClasses(),i._animations(n),i.nextItemZIndex=100,i._tabindex(),i._focusProxy=f(i._focusHandler,i),t.on(M,Q,i._focusProxy).on(h+k,".k-item.k-state-disabled",!1).on(h+k,Q,f(i._click,i)).on("keydown"+k,f(i._keydown,i)).on("focus"+k,f(i._focus,i)).on("focus"+k,".k-content",f(i._focus,i)).on(M+" "+u+k,".k-content",f(i._preventClose,i)).on("blur"+k,f(i._removeHoverItem,i)).on("blur"+k,"[tabindex]",f(i._checkActiveElement,i)).on(N+k,Q,f(i._mouseenter,i)).on($+k,Q,f(i._mouseleave,i)).on(N+k+" "+$+k+" "+u+k+" "+h+k,".k-item:not(.k-state-disabled) > .k-link",f(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=f(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=s.format("{0}_mn_active",t[0].id)),s.notify(i)},events:[y,T,R,P,A],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:t},_initData:function(e){var t=this;e.dataSource&&(t.angular("cleanup",function(){return{elements:t.element.children()}}),t.element.empty(),t.append(e.dataSource,t.element),t.angular("compile",function(){return{elements:t.element.children()}}))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=p(!0,t,e.animation),"dataSource"in e&&this._initData(e),this._updateClasses(),b.fn.setOptions.call(this,e)},destroy:function(){var t=this;b.fn.destroy.call(t),t.element.off(k),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler),s.destroy(t.element)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return g(n.items,function(){n.group.append(this),r(this)}),r(t),o(n.group.find(".k-first, .k-last").add(n.items)),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return g(n.items,function(){t.before(this),r(this),o(this)}),o(t),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return g(n.items,function(){t.after(this),r(this),o(this)}),o(t),this},_insert:function(t,n,r){var o,a,s,l;return n&&n.length||(r=this.element),s=e.isPlainObject(t),l={firstLevel:r.hasClass(x),horizontal:r.hasClass(x+"-horizontal"),expanded:!0,length:r.children().length},n&&!r.length&&(r=e(ie.renderGroup({group:l})).appendTo(n)),s||e.isArray(t)?o=e(e.map(s?[t]:t,function(t,n){return"string"==typeof t?e(t).get():e(ie.renderItem({group:l,item:p(t,{index:n})})).get()})):(a=(o="string"==typeof t&&"<"!=t.charAt(0)?this.element.find(t):e(t)).find("> ul").addClass("k-menu-group").attr("role","menu"),(o=o.filter("li")).add(a.find("> li")).each(function(){i(this)})),{items:o,group:r}},remove:function(e){var t,n,i;return t=(e=this.element.find(e)).parentsUntil(this.element,Y),n=e.parent("ul:not(.k-menu)"),e.remove(),n&&!n.children(Y).length&&((i=n.parent(".k-animation-container")).length?i.remove():n.remove()),t.length&&(r(t=t.eq(0)),o(t)),this},open:function(n){var i=this,r=i.options,o="horizontal"==r.orientation,a=r.direction,l=s.support.isRtl(i.wrapper);return n=i.element.find(n),/^(top|bottom|default)$/.test(a)&&(a=l?o?(a+" left").replace("default","bottom"):"left":o?(a+" right").replace("default","bottom"):"right"),n.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),n.each(function(){var n=e(this);clearTimeout(n.data(D)),n.data(D,setTimeout(function(){var d,u,h,f,g,m,v,b,_=n.find(".k-menu-group:first:hidden");_[0]&&!1===i._triggerEvent({item:n[0],type:y})&&(!_.find(".k-menu-group")[0]&&_.children(".k-item").length>1?(u=e(window).height(),h=function(){_.css({maxHeight:u-(_.outerHeight()-_.height())-s.getShadows(_).bottom,overflow:"auto"})},s.support.browser.msie&&7>=s.support.browser.version?setTimeout(h,0):h()):_.css({maxHeight:"",overflow:""}),n.data(O,n.css(O)),n.css(O,i.nextItemZIndex++),d=_.data(j),g=(f=n.parent().hasClass(x))&&o,m=function(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]};return/left|right/.test(e)?(i.origin=["top",e],i.position[1]=s.directions[e].reverse):(i.origin[0]=e,i.position[0]=s.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}(a,f,l),b=(v=r.animation.open.effects)!==t?v:"slideIn:"+function(e,t){return(e=e.split(" ")[!t+0]||e).replace("top","up").replace("bottom","down")}(a,f),d?((d=_.data(j)).options.origin=m.origin,d.options.position=m.position,d.options.animation.open.effects=b):d=_.kendoPopup({activate:function(){i._triggerEvent({item:this.wrapper.parent(),type:R})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),i._triggerEvent({item:this.wrapper.parent(),type:P})},origin:m.origin,position:m.position,collision:r.popupCollision!==t?r.popupCollision:g?"fit":"fit flip",anchor:n,appendTo:n,animation:{open:p(!0,{effects:b},r.animation.open),close:r.animation.close},close:function(e){var t=e.sender.wrapper.parent();i._triggerEvent({item:t[0],type:T})?e.preventDefault():(t.css(O,t.data(O)),t.removeData(O),c&&(t.removeClass(U),i._removeHoverItem()))}}).data(j),_.removeAttr("aria-hidden"),d.open())},i.options.hoverDelay))}),i},close:function(t,n){var i=this,r=i.element;return(t=r.find(t)).length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);!n&&i._isRootItem(t)&&(i.clicked=!1),clearTimeout(t.data(D)),t.data(D,setTimeout(function(){var e=t.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(j);e&&(e.close(),e.element.attr("aria-hidden",!0))},i.options.hoverDelay))}),i},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(B,n).toggleClass(W,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(s.eventTarget(t)||t.target).closest(Y),i=t.type==N||-1!==u.indexOf(t.type);n.parents("li."+W).length||n.toggleClass(U,i||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var i=this,r=e(t?t.currentTarget:this._hoverItem()),o=i._findRootParent(r)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!n(o,s._activeElement())&&t&&!n(o,t.currentTarget))&&i.close(o)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass(V)&&(e.removeClass(V),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element;t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-header k-menu-init "+x).addClass(x+"-"+this.options.orientation),t.find("li > ul").filter(function(){return!s.support.matchesSelector.call(this,".k-menu-init div ul")}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){i(this)})},_mouseenter:function(t){var i=this,r=e(t.currentTarget),o=r.children(".k-animation-container").length||r.children(q).length;t.delegateTarget==r.parents(G)[0]&&(i.options.openOnClick&&!i.clicked||c||(F||H)&&t.originalEvent.pointerType in ee&&i._isRootItem(r.closest(Y))||!n(t.currentTarget,t.relatedTarget)&&o&&i.open(r),(i.options.openOnClick&&i.clicked||L)&&r.siblings().each(f(function(e,t){i.close(t,!0)},i)))},_mouseleave:function(i){var r=e(i.currentTarget),o=r.children(".k-animation-container").length||r.children(q).length;return r.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(i.stopImmediatePropagation(),t):(this.options.openOnClick||c||(F||H)&&i.originalEvent.pointerType in ee||n(i.currentTarget,i.relatedTarget||i.target)||!o||n(i.currentTarget,s._activeElement())||this.close(r),t)},_click:function(n){var i,r,o,a=this,l=a.options,d=e(s.eventTarget(n)),c=d[0]?d[0].nodeName.toUpperCase():"",u="INPUT"==c||"SELECT"==c||"BUTTON"==c||"LABEL"==c,h=d.closest("."+C),p=d.closest(Y),f=h.attr("href"),g=d.attr("href"),m=e("<a href='#' />").attr("href"),v=!!f&&f!==m,b=v&&!!f.match(/^#/),_=!!g&&g!==m,k=l.openOnClick&&o&&a._isRootItem(p);if(!d.closest("> div:not(.k-animation-container,.k-list-container)",p[0]).length){if(p.hasClass(W))return n.preventDefault(),t;if(n.handled||!a._triggerEvent({item:p[0],type:A})||u||n.preventDefault(),n.handled=!0,o=(r=p.children(K)).is(":visible"),l.closeOnClick&&(!v||b)&&(!r.length||k))return p.removeClass(U).css("height"),a._oldHoverItem=a._findRootParent(p),a.close(h.parentsUntil(a.element,Y)),a.clicked=!1,-1!="MSPointerUp".indexOf(n.type)&&n.preventDefault(),t;v&&n.enterKey&&h[0].click(),(a._isRootItem(p)&&l.openOnClick||s.support.touch||(F||H)&&a._isRootItem(p.closest(Y)))&&(v||u||_||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?T:y,(l.closeOnClick||i!=T)&&a[i](p))}},_documentClick:function(e){n(this.element[0],e.target)||(this.clicked=!1)},_focus:function(n){var i=this,r=n.target,o=i._hoverItem(),a=d();return r==i.wrapper[0]||e(r).is(":kendoFocusable")?(a===n.currentTarget&&(o.length?i._moveHover([],o):i._oldHoverItem||i._moveHover([],i.wrapper.children().first())),t):(n.stopPropagation(),e(r).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(V),i.wrapper.focus(),t)},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,l=o._oldHoverItem,d=s.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==v.ESC){if(l||(l=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(l),r=o._itemHasChildren(l),a==v.RIGHT)n=o[d?"_itemLeft":"_itemRight"](l,i,r);else if(a==v.LEFT)n=o[d?"_itemRight":"_itemLeft"](l,i,r);else if(a==v.DOWN)n=o._itemDown(l,i,r);else if(a==v.UP)n=o._itemUp(l,i,r);else if(a==v.ESC)n=o._itemEsc(l,i);else if(a==v.ENTER||a==v.SPACEBAR)(n=l.children(".k-link")).length>0&&(o._click({target:n[0],preventDefault:function(){},enterKey:!0}),o._moveHover(l,o._findRootParent(l)));else if(a==v.TAB)return n=o._findRootParent(l),o._moveHover(l,n),o._checkActiveElement(),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length&&e.parent().hasClass("k-menu-group")||t},_itemHasChildren:function(e){return!!e.length&&e.children("ul.k-menu-group, div.k-animation-container").length>0},_moveHover:function(t,n){var i=this,r=i._ariaId;t.length&&n.length&&t.removeClass(V),n.length&&(n[0].id&&(r=n[0].id),n.addClass(V),i._oldHoverItem=n,r&&(i.element.removeAttr("aria-activedescendant"),e("#"+r).removeAttr("id"),n.attr("id",r),i.element.attr("aria-activedescendant",r)))},_findRootParent:function(e){return this._isRootItem(e)?e:e.parentsUntil(G,"li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(x)},_itemRight:function(e,t,n){var i,r,o=this;if(!e.hasClass(W))return t?n?(o.open(e),i=e.find(".k-menu-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.nextAll(J)):(i=e.nextAll(J)).length||(i=e.prevAll(Z)),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prevAll(J))):(n=e.prevAll(J)).length||(n=e.nextAll(Z)),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.nextAll(J);else{if(!n||e.hasClass(W))return;r.open(e),i=e.find(".k-menu-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n;if(t)return!(n=e.prevAll(J)).length&&e.length?n=e.parent().children().last():e.length||(n=this.wrapper.children(".k-item").last()),this._moveHover(e,n),n},_itemEsc:function(e,t){var n;return t?(n=e.parent().closest(".k-item"),this.close(n),this._moveHover(e,n),n):e},_triggerEvent:function(e){return this.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(t){var n=this,i=e(s.eventTarget(t)).closest(Y);setTimeout(function(){n._moveHover([],i),i.children(".k-content")[0]&&i.parent().closest(".k-item").removeClass(V)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});p(ie,{renderItem:function(e){e=p({menu:{},group:{}},e);var t=te.empty,n=e.item;return te.item(p(e,{image:n.imageUrl?te.image:t,sprite:n.spriteCssClass?te.sprite:t,itemWrapper:te.itemWrapper,renderContent:ie.renderContent,arrow:n.items||n.content?te.arrow:t,subGroup:ie.renderGroup},ne))},renderGroup:function(e){return te.group(p({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=p({length:r},e.group);r>n;n++)t+=ie.renderItem(p(e,{group:o,item:p({index:n},i[n])}));return t}},e,ne))},renderContent:function(e){return te.content(p(e,ne))}}),a=ie.extend({init:function(t,n){var i=this;ie.fn.init.call(i,t,n),i.target=e(i.options.target),i._popup(),i._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:[y,T,R,P,A],setOptions:function(t){var n=this;ie.fn.setOptions.call(n,t),n.target.off(n.showOn+k,n._showProxy),n.userEvents&&n.userEvents.destroy(),n.target=e(n.options.target),t.orientation&&n.popup.wrapper[0]&&n.popup.element.unwrap(),n._wire(),ie.fn.setOptions.call(this,t)},destroy:function(){var e=this;e.target.off(e.options.showOn+k),z.off(s.support.mousedown+k,e._closeProxy),e.userEvents&&e.userEvents.destroy(),ie.fn.destroy.call(e)},open:function(i,r){var o=this;return i=e(i)[0],n(o.element[0],e(i)[0])?ie.fn.open.call(o,i):!1===o._triggerEvent({item:o.element,type:y})&&(o.popup.visible()&&o.options.filter&&o.popup.close(!0),r!==t?(o.popup.wrapper.hide(),o.popup.open(i,r)):(o.popup.options.anchor=i||o.popup.anchor||o.target,o.popup.open()),z.off(o.popup.downEvent,o.popup._mousedownProxy),z.on(s.support.mousedown+k,o._closeProxy)),o},close:function(){var t=this;n(t.element[0],e(arguments[0])[0])?ie.fn.close.call(t,arguments[0]):t.popup.visible()&&!1===t._triggerEvent({item:t.element,type:T})&&(t.popup.close(),z.off(s.support.mousedown+k,t._closeProxy),t.unbind(A,t._closeTimeoutProxy))},_showHandler:function(e){var t,i=e,r=this,o=r.options;e.event&&((i=e.event).pageX=e.x.location,i.pageY=e.y.location),n(r.element[0],e.relatedTarget||e.target)||(r._eventOrigin=i,i.preventDefault(),i.stopImmediatePropagation(),r.element.find("."+V).removeClass(V),(o.filter&&s.support.matchesSelector.call(i.currentTarget,o.filter)||!o.filter)&&(o.alignToAnchor?r.open(i.currentTarget):(r.popup.options.anchor=i.currentTarget,r._targetChild?(t=r.target.offset(),r.open(i.pageX-t.left,i.pageY-t.top)):r.open(i.pageX,i.pageY))))},_closeHandler:function(t){var i,r=this,o=e(t.relatedTarget||t.target),a=o.closest(r.target.selector)[0]==r.target[0],s=o.closest(Q).children(K),l=n(r.element[0],o[0]);r._eventOrigin=t,i=3!==t.which,r.popup.visible()&&(i&&a||!a)&&(r.options.closeOnClick&&!s[0]&&l||!l)&&(l?(this.unbind(A,this._closeTimeoutProxy),r.bind(A,r._closeTimeoutProxy)):r.close())},_wire:function(){var e=this,t=e.options,n=e.target;e._showProxy=f(e._showHandler,e),e._closeProxy=f(e._closeHandler,e),e._closeTimeoutProxy=f(e.close,e),n[0]&&(s.support.mobileOS&&"contextmenu"==t.showOn?(e.userEvents=new s.UserEvents(n,{filter:t.filter,allowSelection:!1}),n.on(t.showOn+k,!1),e.userEvents.bind("hold",e._showProxy)):t.filter?n.on(t.showOn+k,t.filter,e._showProxy):n.on(t.showOn+k,e._showProxy))},_triggerEvent:function(n){var i=this,r=e(i.popup.options.anchor)[0],o=i._eventOrigin;return i._eventOrigin=t,i.trigger(n.type,p({type:n.type,item:n.item||this.element[0],target:r},o?{event:o}:{}))},_popup:function(){var e=this;e._triggerProxy=f(e._triggerEvent,e),e.popup=e.element.addClass("k-context-menu").kendoPopup({anchor:e.target||"body",copyAnchorStyles:e.options.copyAnchorStyles,collision:e.options.popupCollision||"fit",animation:e.options.animation,activate:e._triggerProxy,deactivate:e._triggerProxy}).data("kendoPopup"),e._targetChild=n(e.target[0],e.popup.element[0])}}),l.plugin(ie),l.plugin(a)}(window.kendo.jQuery),function(e,t){function n(t){return e.trim(t).replace(/&nbsp;/gi,"")}function i(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(i(e[t].columns)):n.push(e[t]);return n}var r=window.kendo,o=r.ui,a=e.proxy,s=e.extend,l=e.grep,d=e.map,c=e.inArray,u="k-state-selected",h="asc",p="desc",f="change",g="init",m="select",v="kendoPopup",b="kendoMenu",_=".kendoColumnMenu",k=o.Widget,w=k.extend({init:function(t,n){var i,o=this;k.fn.init.call(o,t,n),t=o.element,n=o.options,o.owner=n.owner,o.dataSource=n.dataSource,o.field=t.attr(r.attr("field")),o.title=t.attr(r.attr("title")),(i=t.find(".k-header-column-menu"))[0]||(i=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),o.link=i.attr("tabindex",-1).on("click"+_,a(o._click,o)),o.wrapper=e('<div class="k-column-menu"/>'),o._refreshHandler=a(o.refresh,o),o.dataSource.bind(f,o._refreshHandler)},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e._angularItems("compile"),e._sort(),e._columns(),e._filter(),e._lockColumns(),e.trigger(g,{field:e.field,container:e.wrapper})},events:[g],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var e=this,t=e.options;e.wrapper.html(r.template(y)({ns:r.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns})),e.popup=e.wrapper[v]({anchor:e.link,open:a(e._open,e),activate:a(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data(v),e.menu=e.wrapper.children()[b]({orientation:"vertical",closeOnClick:!1}).data(b)},_createMobileMenu:function(){var e=this,t=e.options,n=r.template(x)({ns:r.ns,field:e.field,title:e.title||e.field,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns});e.view=e.pane.append(n),e.wrapper=e.view.element.find(".k-column-menu"),e.menu=new C(e.wrapper.children(),{pane:e.pane}),e.view.element.on("click",".k-done",function(t){e.close(),t.preventDefault()}),e.options.lockedColumns&&e.view.bind("show",function(){e._updateLockedColumns()})},_angularItems:function(t){var n=this;n.angular(t,function(){return{elements:n.wrapper.find(".k-columns-item input["+r.attr("field")+"]").map(function(){return e(this).closest("li")}),data:d(n._ownerColumns(),function(e){return{column:e._originalObject}})}})},destroy:function(){var e=this;e._angularItems("cleanup"),k.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(f,e._refreshHandler),e.options.columns&&e.owner&&(e._updateColumnsMenuHandler&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e._updateColumnsLockedStateHandler&&(e.owner.unbind("columnLock",e._updateColumnsLockedStateHandler),e.owner.unbind("columnUnlock",e._updateColumnsLockedStateHandler))),e.menu&&(e.menu.element.off(_),e.menu.destroy()),e.wrapper.off(_),e.popup&&e.popup.destroy(),e.view&&e.view.purge(),e.link.off(_),e.owner=null,e.wrapper=null,e.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+_))},_click:function(e){e.preventDefault(),e.stopPropagation();var t=this.options;t.filter&&this.element.is(!t.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data(v).close()}),t.popup.element.on("keydown"+_,function(e){e.keyCode==r.keys.ESC&&t.close()}),t.options.lockedColumns&&t._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var e=i(this.owner.columns),t=l(e,function(e){var t=!0,i=n(e.title||"");return(!1===e.menu||!e.field&&!i.length)&&(t=!1),t});return d(t,function(t){return{originalField:t.field,field:t.field||t.title,title:t.title||t.field,hidden:t.hidden,index:c(t,e),locked:!!t.locked,_originalObject:t}})},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t.menu.bind(m,function(n){var i,r=e(n.item);r.hasClass("k-sort-asc")?i=h:r.hasClass("k-sort-desc")&&(i=p),i&&(r.parent().find(".k-sort-"+(i==h?p:h)).removeClass(u),t._sortDataSource(r,i),t.close())}))},_sortDataSource:function(e,n){var i,r,o=this,a=o.options.sortable,s=null===a.compare?t:a.compare,l=o.dataSource,d=l.sort()||[];if(e.hasClass(u)&&a&&!1!==a.allowUnsort?(e.removeClass(u),n=t):e.addClass(u),"multiple"===a.mode){for(i=0,r=d.length;r>i;i++)if(d[i].field===o.field){d.splice(i,1);break}d.push({field:o.field,dir:n,compare:s})}else d=[{field:o.field,dir:n,compare:s}];l.sort(d)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=a(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t._updateColumnsLockedStateHandler=a(t._updateColumnsLockedState,t),t.owner.bind(["columnUnlock","columnLock"],t._updateColumnsLockedStateHandler),t.menu.bind(m,function(n){var o,a,s,d=e(n.item),c=i(t.owner.columns);t._isMobile&&n.preventDefault(),d.parent().closest("li.k-columns-item")[0]&&((o=d.find(":checkbox")).attr("disabled")||(s=o.attr(r.attr("field")),!0===(a=l(c,function(e){return e.field==s||e.title==s})[0]).hidden?t.owner.showColumn(a):t.owner.hideColumn(a)))}))},_updateColumnsMenu:function(){var e,t,n,i,o,a,s=r.attr("field"),u=r.attr("locked"),h=l(this._ownerColumns(),function(e){return!e.hidden}),p=l(h,function(e){return e.originalField}),f=l(p,function(e){return!0===e.locked}).length,g=l(p,function(e){return!0!==e.locked}).length;for(h=d(h,function(e){return e.field}),e=0,t=(a=this.wrapper.find(".k-columns-item input["+s+"]").prop("disabled",!1).prop("checked",!1)).length;t>e;e++)o="true"===(n=a.eq(e)).attr(u),i=!1,c(n.attr(s),h)>-1&&(i=!0,n.prop("checked",i)),i&&(1==f&&o&&n.prop("disabled",!0),1!=g||o||n.prop("disabled",!0))},_updateColumnsLockedState:function(){var e,t,n,i,o=r.attr("field"),a=r.attr("locked"),s=function(e,t){var n,i,r,o={};for(n=0,i=e.length;i>n;n++)o[(r=e[n])[t]]=r;return o}(this._ownerColumns(),"field"),l=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=l.length;t>e;e++)(i=s[(n=l.eq(e)).attr(o)])&&n.attr(a,i.locked);this._updateColumnsMenu()},_filter:function(){var t=this,n="kendoFilterMenu",i=t.options;!1!==i.filterable&&(i.filterable.multi&&(n="kendoFilterMultiCheck",i.filterable.dataSource&&(i.filterable.checkSource=i.filterable.dataSource,delete i.filterable.dataSource)),t.filterMenu=t.wrapper.find(".k-filterable")[n](s(!0,{},{appendToElement:!0,dataSource:i.dataSource,values:i.values,field:t.field,title:t.title},i.filterable)).data(n),t._isMobile&&t.menu.bind(m,function(n){e(n.item).hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)}))},_lockColumns:function(){var t=this;t.menu.bind(m,function(n){var i=e(n.item);i.hasClass("k-lock")?(t.owner.lockColumn(t.field),t.close()):i.hasClass("k-unlock")&&(t.owner.unlockColumn(t.field),t.close())})},_updateLockedColumns:function(){var e,t,n,i,r=this.field,o=this.owner.columns,a=l(o,function(e){return e.field==r||e.title==r})[0];a&&(e=!0===a.locked,t=l(o,function(t){return!t.hidden&&(t.locked&&e||!t.locked&&!e)}).length,n=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),i=this.wrapper.find(".k-unlock").removeClass("k-state-disabled"),(e||1==t)&&n.addClass("k-state-disabled"),e&&1!=t||i.addClass("k-state-disabled"),this._updateColumnsLockedState())},refresh:function(){var e,t,n,i=this,r=i.options.dataSource.sort()||[],o=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(u),t=0,n=r.length;n>t;t++)o==(e=r[t]).field&&i.wrapper.find(".k-sort-"+e.dir).addClass(u);i.link[i._filterExist(i.dataSource.filter())?"addClass":"removeClass"]("k-state-active")},_filterExist:function(e){var t,n,i,r=!1;if(e){for(n=0,i=(e=e.filters).length;i>n;n++)(t=e[n]).field==this.field?r=!0:t.filters&&(r=r||this._filterExist(t));return r}}}),y='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',x='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',C=k.extend({init:function(e,t){k.fn.init.call(this,e,t),this.element.on("click"+_,"li.k-item:not(.k-separator):not(.k-state-disabled)","_click")},events:[m],_click:function(t){e(t.target).is("[type=checkbox]")||t.preventDefault(),this.trigger(m,{item:t.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){k.fn.destroy.call(this),this.element.off(_)}});o.plugin(w)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="dir",a="asc",s="single",l="field",d="desc",c=".kendoColumnSorter",u=".k-link",h="aria-sort",p=e.proxy,f=r.extend({init:function(e,t){var n,i=this;r.fn.init.call(i,e,t),i._refreshHandler=p(i.refresh,i),i.dataSource=i.options.dataSource.bind("change",i._refreshHandler),(n=i.element.find(u))[0]||(n=i.element.wrapInner('<a class="k-link" href="#"/>').find(u)),i.link=n,i.element.on("click"+c,p(i._click,i))},options:{name:"ColumnSorter",mode:s,allowUnsort:!0,compare:null,filter:""},destroy:function(){var e=this;r.fn.destroy.call(e),e.element.off(c),e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(){var t,i,r,s,c=this,u=c.dataSource.sort()||[],p=c.element,f=p.attr(n.attr(l));for(p.removeAttr(n.attr(o)),p.removeAttr(h),t=0,i=u.length;i>t;t++)f==(r=u[t]).field&&p.attr(n.attr(o),r.dir);s=p.attr(n.attr(o)),p.find(".k-i-arrow-n,.k-i-arrow-s").remove(),s===a?(e('<span class="k-icon k-i-arrow-n" />').appendTo(c.link),p.attr(h,"ascending")):s===d&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(c.link),p.attr(h,"descending"))},_click:function(e){var i,r,c=this,u=c.element,h=u.attr(n.attr(l)),p=u.attr(n.attr(o)),f=c.options,g=null===c.options.compare?t:c.options.compare,m=c.dataSource.sort()||[];if(e.preventDefault(),!f.filter||u.is(f.filter)){if(p=p===a?d:p===d&&f.allowUnsort?t:a,f.mode===s)m=[{field:h,dir:p,compare:g}];else if("multiple"===f.mode){for(i=0,r=m.length;r>i;i++)if(m[i].field===h){m.splice(i,1);break}m.push({field:h,dir:p,compare:g})}this.dataSource.sort(m)}}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(t){return(t=null!=t?t:"").type||e.type(t)||"string"}function i(e){var t,i,r=(e.model.fields||e.model)[e.field],a=n(r),s=r?r.validation:{},l=o.attr("type"),d=o.attr("bind"),p={name:e.field};for(t in s)i=s[t],h(t,g)>=0?p[l]=t:c(i)||(p[t]=u(i)?i.value||t:i),p[o.attr(t+"-msg")]=i.message;return h(a,g)>=0&&(p[l]=a),p[d]=("boolean"===a?"checked:":"value:")+e.field,p}function r(e,t){var n,i,r=e&&e.validation||{};for(n in r)i=r[n],u(i)&&i.value&&(i=i.value),c(i)&&(t[n]=i)}var o=window.kendo,a=o.ui,s=a.Widget,l=e.extend,d=o.support.browser.msie&&9>o.support.browser.version,c=o.isFunction,u=e.isPlainObject,h=e.inArray,p=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,f="change",g=["url","email","number","date","boolean"],m={number:function(t,n){var r=i(n);e('<input type="text"/>').attr(r).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,n){var r=i(n),a=n.format;a&&(a=o._extractFormat(a)),r[o.attr("format")]=a,e('<input type="text"/>').attr(r).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,n){var r=i(n);e('<input type="text" class="k-input k-textbox"/>').attr(r).appendTo(t)},boolean:function(t,n){var r=i(n);e('<input type="checkbox" />').attr(r).appendTo(t)},values:function(t,n){var r=i(n);e("<select "+o.attr("text-field")+'="text"'+o.attr("value-field")+'="value"'+o.attr("source")+"='"+o.stringify(function(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)o=(i=e[t]).text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}(n.values)).replace(/\'/g,"&apos;")+"'"+o.attr("role")+'="dropdownlist"/>').attr(r).appendTo(t),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},v=s.extend({init:function(t,n){var i=this;n.target&&(n.$angular=n.target.options.$angular),s.fn.init.call(i,t,n),i._validateProxy=e.proxy(i._validate,i),i.refresh()},events:[f],options:{name:"Editable",editors:m,clearContainer:!0,errorTemplate:'<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>'},editor:function(e,t){var i=this,r=i.options.editors,a=u(e),s=a?e.field:e,d=i.options.model||{},c=a&&e.values?"values":n(t),h=a&&e.editor,f=h?e.editor:r[c],g=i.element.find("["+o.attr("container-for")+"="+s.replace(p,"\\$1")+"]");f=f||r.string,h&&"string"==typeof e.editor&&(f=function(t){t.append(e.editor)}),f(g=g.length?g:i.element,l(!0,{},a?e:{field:s},{model:d}))},_validate:function(t){var n,i=this,r=t.value,a=i._validationEventInProgress,s={},l=o.attr("bind"),d=t.field.replace(p,"\\$1"),c=RegExp("(value|checked)\\s*:\\s*"+d+"\\s*(,|$)");s[t.field]=t.value,(n=e(":input["+l+'*="'+d+'"]',i.element).filter("["+o.attr("validate")+"!='false']").filter(function(){return c.test(e(this).attr(l))})).length>1&&(n=n.filter(function(){var t=e(this);return!t.is(":radio")||t.val()==r}));try{i._validationEventInProgress=!0,(!i.validatable.validateInput(n)||!a&&i.trigger(f,{values:s}))&&t.preventDefault()}finally{i._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),s.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),o.unbind(e.element),e.validatable&&e.validatable.destroy(),o.destroy(e.element),e.element.removeData("kendoValidator")},refresh:function(){var t,n,i,a,s,l,c,h=this,p=h.options.fields||[],f=h.options.clearContainer?h.element.empty():h.element,g=h.options.model||{},m={};for(e.isArray(p)||(p=[p]),t=0,n=p.length;n>t;t++)i=p[t],a=u(i)?i.field:i,r(s=(g.fields||g)[a],m),h.editor(i,s);if(h.options.target&&h.angular("compile",function(){return{elements:f,data:[{dataItem:g}]}}),!n)for(a in l=g.fields||g)r(l[a],m);(function(t){t.find(":input:not(:button, ["+o.attr("role")+"=upload], ["+o.attr("skip")+"], [type=file]), select").each(function(){var t=o.attr("bind"),n=this.getAttribute(t)||"",i="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===n.indexOf(i)&&r&&(n+=(n.length?",":"")+i+r,e(this).attr(t,n))})})(f),h.validatable&&h.validatable.destroy(),o.bind(f,h.options.model),h.options.model.unbind("set",h._validateProxy),h.options.model.bind("set",h._validateProxy),h.validatable=new o.ui.Validator(f,{validateOnBlur:!1,errorTemplate:h.options.errorTemplate||void 0,rules:m}),c=f.find(":kendoFocusable").eq(0).focus(),d&&c.focus()}});a.plugin(v)}(window.kendo.jQuery),function(e,t){function n(e){return t!==e}function i(e,t,n){return Math.max(Math.min(parseInt(e,10),1/0===n?n:parseInt(n,10)),parseInt(t,10))}function r(e,t){return function(){var n=this,i=n.wrapper,r=i[0].style,o=n.options;return o.isMaximized||o.isMinimized?n:(n.restoreOptions={width:r.width,height:r.height},i.children(x).hide().end().children(w).find(V).parent().hide().eq(0).before(J.action({name:"Restore"})),t.call(n),"maximize"==e?n.wrapper.children(w).find(q).parent().hide():n.wrapper.children(w).find(q).parent().show(),n)}}function o(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function a(e){var t=this;t.owner=e,t._draggable=new c(e.wrapper,{filter:">"+x,group:e.wrapper.id+"-resizing",dragstart:p(t.dragstart,t),drag:p(t.drag,t),dragend:p(t.dragend,t)}),t._draggable.userEvents.bind("press",p(t.addOverlay,t)),t._draggable.userEvents.bind("release",p(t.removeOverlay,t))}function s(e,t){var n=this;n.owner=e,n._draggable=new c(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:p(n.dragstart,n),drag:p(n.drag,n),dragend:p(n.dragend,n),dragcancel:p(n.dragcancel,n)}),n._draggable.userEvents.stopPropagation=!1}var l=window.kendo,d=l.ui.Widget,c=l.ui.Draggable,u=e.isPlainObject,h=l._activeElement,p=e.proxy,f=e.extend,g=e.each,m=l.template,v="body",b=".kendoWindow",_=".k-window",k=".k-window-title",w=k+"bar",y=".k-window-content",x=".k-resize-handle",C=".k-overlay",S="k-content-frame",T="k-loading",D="k-state-hover",I="k-state-focused",E="k-window-maximized",A=":visible",O="hidden",R="cursor",P="open",M="activate",F="deactivate",H="close",N="refresh",$="resizeEnd",L="dragstart",z="dragend",j="error",B="overflow",U="zIndex",V=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",W=".k-i-pin",G=".k-i-unpin",q=W+","+G,K=".k-window-titlebar .k-window-action",Y=".k-window-titlebar .k-i-refresh",Q=l.isLocalUrl,X=d.extend({init:function(i,r){var a,s,c,h,f,g,m,v=this,x={},C=r&&r.actions&&!r.actions.length;d.fn.init.call(v,i,r),h=(r=v.options).position,i=v.element,f=r.content,C&&(r.actions=[]),v.appendTo=e(r.appendTo),v._animations(),f&&!u(f)&&(f=r.content={url:f}),i.find("script").filter(o).remove(),i.parent().is(v.appendTo)||h.top!==t&&h.left!==t||(i.is(A)?x=i.offset():(s=i.css("visibility"),c=i.css("display"),i.css({visibility:O,display:""}),x=i.offset(),i.css({visibility:s,display:c})),h.top===t&&(h.top=x.top),h.left===t&&(h.left=x.left)),n(r.visible)&&null!==r.visible||(r.visible=i.is(A)),a=v.wrapper=i.closest(_),i.is(".k-content")&&a[0]||(i.addClass("k-window-content k-content"),v._createWindow(i,r),a=v.wrapper=i.closest(_),v._dimensions()),v._position(),r.pinned&&v.pin(!0),f&&v.refresh(f),r.visible&&v.toFront(),g=a.children(y),v._tabindex(g),r.visible&&r.modal&&v._overlay(a.is(A)).css({opacity:.5}),a.on("mouseenter"+b,K,p(v._buttonEnter,v)).on("mouseleave"+b,K,p(v._buttonLeave,v)).on("click"+b,"> "+K,p(v._windowActionHandler,v)),g.on("keydown"+b,p(v._keydown,v)).on("focus"+b,p(v._focus,v)).on("blur"+b,p(v._blur,v)),this._resizable(),this._draggable(),(m=i.attr("id"))&&(m+="_wnd_title",a.children(w).children(k).attr("id",m),g.attr({role:"dialog","aria-labelledby":m})),a.add(a.children(".k-resize-handle,"+w)).on("mousedown"+b,p(v.toFront,v)),v.touchScroller=l.touchScroller(i),v._resizeHandler=p(v._onDocumentResize,v),v._marker=l.guid().substring(0,8),e(window).on("resize"+b+v._marker,v._resizeHandler),r.visible&&(v.trigger(P),v.trigger(M)),l.notify(v)},_buttonEnter:function(t){e(t.currentTarget).addClass(D)},_buttonLeave:function(t){e(t.currentTarget).removeClass(D)},_focus:function(){this.wrapper.addClass(I)},_blur:function(){this.wrapper.removeClass(I)},_dimensions:function(){var e,t,n=this.wrapper,r=this.options,o=r.width,a=r.height,s=r.maxHeight,l=["minWidth","minHeight","maxWidth","maxHeight"];for(this.title(r.title),e=0;l.length>e;e++)(t=r[l[e]])&&1/0!=t&&n.css(l[e],t);s&&1/0!=s&&this.element.css("maxHeight",s),o&&n.width((""+o).indexOf("%")>0?o:i(o,r.minWidth,r.maxWidth)),a&&n.height((""+a).indexOf("%")>0?a:i(a,r.minHeight,r.maxHeight)),r.visible||n.hide()},_position:function(){var e=this.wrapper,t=this.options.position;0===t.top&&(t.top=""+t.top),0===t.left&&(t.left=""+t.left),e.css({top:t.top||"",left:t.left||""})},_animations:function(){var e=this.options;!1===e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resize:function(){l.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,n=this.wrapper;this.resizing&&(n.off("dblclick"+b).children(x).remove(),this.resizing.destroy(),this.resizing=null),t&&(n.on("dblclick"+b,w,p(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),g("n e s w se sw ne nw".split(" "),function(e,t){n.append(J.resizeHandle(t))}),this.resizing=new a(this)),n=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new s(this,e.dragHandle||w))},_actions:function(){var t=this.options.actions,n=this.wrapper.children(w).find(".k-window-actions");t=e.map(t,function(e){return{name:e}}),n.html(l.render(J.action,t))},setOptions:function(e){d.fn.setOptions.call(this,e),this.restore(),this._animations(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions()},events:[P,M,F,H,N,"resize",$,L,z,j],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,n,r,o,a,s,d=this,c=d.options,u=l.keys,h=e.keyCode,p=d.wrapper,f=10,g=d.options.isMaximized;e.target!=e.currentTarget||d._closing||(h==u.ESC&&d._closable()&&d._close(!1),!c.draggable||e.ctrlKey||g||(t=l.getOffset(p),h==u.UP?n=p.css("top",t.top-f):h==u.DOWN?n=p.css("top",t.top+f):h==u.LEFT?n=p.css("left",t.left-f):h==u.RIGHT&&(n=p.css("left",t.left+f))),c.resizable&&e.ctrlKey&&!g&&(h==u.UP?(n=!0,o=p.height()-f):h==u.DOWN&&(n=!0,o=p.height()+f),h==u.LEFT?(n=!0,r=p.width()-f):h==u.RIGHT&&(n=!0,r=p.width()+f),n&&(a=i(r,c.minWidth,c.maxWidth),s=i(o,c.minHeight,c.maxHeight),isNaN(a)||(p.width(a),d.options.width=a+"px"),isNaN(s)||(p.height(s),d.options.height=s+"px"),d.resize())),n&&e.preventDefault())},_overlay:function(t){var n=this.appendTo.children(C),i=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(i[0]).toggle(t).css(U,parseInt(i.css(U),10)-1),n},_actionForIcon:function(e){return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[/\bk-i-\w+\b/.exec(e[0].className)[0]]},_windowActionHandler:function(n){var i,r;if(!this._closing)return i=e(n.target).closest(".k-window-action").find(".k-icon"),(r=this._actionForIcon(i))?(n.preventDefault(),this[r](),!1):t},_modals:function(){var t=this,n=e(_).filter(function(){var n=e(this),i=t._object(n),r=i&&i.options;return r&&r.modal&&r.visible&&n.is(A)}).sort(function(t,n){return+e(t).css("zIndex")-+e(n).css("zIndex")});return t=null,n},_object:function(e){var n=e.children(y),i=l.widgetInstance(n);return i instanceof X?i:t},center:function(){var t,n,i=this,r=i.options.position,o=i.wrapper,a=e(window),s=0,l=0;return i.options.isMaximized?i:(i.options.pinned||(s=a.scrollTop(),l=a.scrollLeft()),n=l+Math.max(0,(a.width()-o.width())/2),t=s+Math.max(0,(a.height()-o.height()-parseInt(o.css("paddingTop"),10))/2),o.css({left:n,top:t}),r.top=t,r.left=n,i)},title:function(e){var t,n=this,i=n.wrapper,r=n.options,o=i.children(w),a=o.children(k);return arguments.length?(!1===e?(i.addClass("k-window-titleless"),o.remove()):(o.length?a.html(e):(i.prepend(J.titlebar(r)),n._actions(),o=i.children(w)),t=o.outerHeight(),i.css("padding-top",t),o.css("margin-top",-t)),n.options.title=e,n):a.text()},content:function(e,t){var i=this.wrapper.children(y),r=i.children(".km-scroll-container");return i=r[0]?r:i,n(e)?(this.angular("cleanup",function(){return{elements:i.children()}}),l.destroy(this.element.children()),i.empty().html(e),this.angular("compile",function(){var e,n=[];for(e=i.length;--e>=0;)n.push({dataItem:t});return{elements:i.children(),data:n}}),this):i.html()},open:function(){var t,n,i=this,r=i.wrapper,o=i.options,a=o.animation.open,s=r.children(y),d=e(document);return i.trigger(P)||(i._closing&&r.kendoStop(!0,!0),i._closing=!1,i.toFront(),o.autoFocus&&i.element.focus(),o.visible=!0,o.modal&&((t=i._overlay(!1)).kendoStop(!0,!0),a.duration&&l.effects.Fade?((n=l.fx(t).fadeIn()).duration(a.duration||0),n.endValue(.5),n.play()):t.css("opacity",.5),t.show()),r.is(A)||(s.css(B,O),r.show().kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:p(this._activate,this)}))),o.isMaximized&&(i._documentScrollTop=d.scrollTop(),i._documentScrollLeft=d.scrollLeft(),e("html, body").css(B,O)),i},_activate:function(){this.options.autoFocus&&this.element.focus(),this.trigger(M),this.wrapper.children(y).css(B,"")},_removeOverlay:function(n){var i,r=this._modals(),o=this.options,a=o.modal&&!r.length,s=o.modal?this._overlay(!0):e(t),d=o.animation.close;a?!n&&d.duration&&l.effects.Fade?((i=l.fx(s).fadeOut()).duration(d.duration||0),i.startValue(.5),i.play()):this._overlay(!1).remove():r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var n=this,i=n.wrapper,r=n.options,o=r.animation.open,a=r.animation.close,s=e(document);if(i.is(A)&&!n.trigger(H,{userTriggered:!t})){if(n._closing)return;n._closing=!0,r.visible=!1,e(_).each(function(t,n){var r=e(n).children(y);n!=i&&r.find("> ."+S).length>0&&r.children(C).remove()}),this._removeOverlay(),i.kendoStop().kendoAnimate({effects:a.effects||o.effects,reverse:!0===a.reverse,duration:a.duration,complete:p(this._deactivate,this)})}n.options.isMaximized&&(e("html, body").css(B,""),n._documentScrollTop&&n._documentScrollTop>0&&s.scrollTop(n._documentScrollTop),n._documentScrollLeft&&n._documentScrollLeft>0&&s.scrollLeft(n._documentScrollLeft))},_deactivate:function(){var e,t=this;t.wrapper.hide().css("opacity",""),t.trigger(F),t.options.modal&&(e=t._object(t._modals().last()))&&e.toFront()},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(K+","+K+" .k-icon,:input,a")},_shouldFocus:function(t){var n=h(),i=this.element;return!(!this.options.autoFocus||e(n).is(i)||this._actionable(t)||i.find(n).length&&i.find(t).length)},toFront:function(t){var n,i,r=this,o=r.wrapper,a=o[0],s=+o.css(U),l=s,d=t&&t.target||null;return e(_).each(function(t,n){var i=e(n),r=i.css(U),o=i.children(y);isNaN(r)||(s=Math.max(+r,s)),n!=a&&o.find("> ."+S).length>0&&o.append(J.overlay)}),(!o[0].style.zIndex||s>l)&&o.css(U,s+2),r.element.find("> .k-overlay").remove(),r._shouldFocus(d)&&(r.element.focus(),n=e(window).scrollTop(),(i=parseInt(o.position().top,10))>0&&n>i&&(n>0?e(window).scrollTop(i):o.css("top",n))),o=null,r},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,i=n.minHeight,r=t.restoreOptions,o=e(document);return n.isMaximized||n.isMinimized?(i&&1/0!=i&&t.wrapper.css("min-height",i),t.wrapper.css({position:n.pinned?"fixed":"absolute",left:r.left,top:r.top,width:r.width,height:r.height}).removeClass(E).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(V).parent().show().end().end().find(q).parent().show(),t.options.width=r.width,t.options.height=r.height,e("html, body").css(B,""),this._documentScrollTop&&this._documentScrollTop>0&&o.scrollTop(this._documentScrollTop),this._documentScrollLeft&&this._documentScrollLeft>0&&o.scrollLeft(this._documentScrollLeft),n.isMaximized=n.isMinimized=!1,t.resize(),t):t},maximize:r("maximize",function(){var t=this,n=t.wrapper,i=n.position(),r=e(document);f(t.restoreOptions,{left:i.left,top:i.top}),n.css({left:0,top:0,position:"fixed"}).addClass(E),this._documentScrollTop=r.scrollTop(),this._documentScrollLeft=r.scrollLeft(),e("html, body").css(B,O),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:r("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var n=this,i=e(window),r=n.wrapper,o=parseInt(r.css("top"),10),a=parseInt(r.css("left"),10);(t||!n.options.pinned&&!n.options.isMaximized)&&(r.css({position:"fixed",top:o-i.scrollTop(),left:a-i.scrollLeft()}),r.children(w).find(W).addClass("k-i-unpin").removeClass("k-i-pin"),n.options.pinned=!0)},unpin:function(){var t=this,n=e(window),i=t.wrapper,r=parseInt(i.css("top"),10),o=parseInt(i.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(i.css({position:"",top:r+n.scrollTop(),left:o+n.scrollLeft()}),i.children(w).find(G).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t,n,i=this,r=i.wrapper,o=e(window),a=l.support.zoomLevel();i.options.isMaximized&&(t=o.width()/a,n=o.height()/a-parseInt(r.css("padding-top"),10),r.css({width:t,height:n}),i.options.width=t,i.options.height=n,i.resize())},refresh:function(t){var i,r,o,a=this,s=a.options,l=e(a.element);return u(t)||(t={url:t}),t=f({},s.content,t),r=n(s.iframe)?s.iframe:t.iframe,(o=t.url)?(n(r)||(r=!Q(o)),r?((i=l.find("."+S)[0])?i.src=o||i.src:l.html(J.contentFrame(f({},s,{content:t}))),l.find("."+S).unbind("load"+b).on("load"+b,p(this._triggerRefresh,this))):a._ajaxRequest(t)):(t.template&&a.content(m(t.template)({})),a.trigger(N)),l.toggleClass("k-window-iframecontent",!!r),a},_triggerRefresh:function(){this.trigger(N)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(Y).removeClass(T)},_ajaxError:function(e,t){this.trigger(j,{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var n=t;e&&(n=m(e)(t||{})),this.content(n,t),this.element.prop("scrollTop",0),this.trigger(N)}},_showLoading:function(){this.wrapper.find(Y).addClass(T)},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(p(this._showLoading,this),100),e.ajax(f({type:"GET",dataType:"html",cache:!1,error:p(this._ajaxError,this),complete:p(this._ajaxComplete,this),success:p(this._ajaxSuccess(t.template),this)},t))},_destroy:function(){this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.wrapper.off(b).children(y).off(b).end().find(".k-resize-handle,.k-window-titlebar").off(b),e(window).off("resize"+b+this._marker),clearTimeout(this._loadingIconTimeout),d.fn.destroy.call(this),this.unbind(t),l.destroy(this.wrapper),this._removeOverlay(!0)},destroy:function(){this._destroy(),this.wrapper.empty().remove(),this.wrapper=this.appendTo=this.element=e()},_createWindow:function(){var t,n,i=this.element,r=this.options,o=l.support.isRtl(i);!1===r.scrollable&&i.attr("style","overflow:hidden;"),n=e(J.wrapper(r)),t=i.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),n.toggleClass("k-rtl",o).appendTo(this.appendTo).append(i).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),n.find(".k-window-title").css(o?"left":"right",n.find(".k-window-actions").outerWidth()+10),i.css("visibility","").show(),i.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),n=i=null}}),J={wrapper:m("<div class='k-widget k-window' />"),action:m("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:m("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:m("<iframe frameborder='0' title='#= title #' class='"+S+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:m("<div class='k-resize-handle k-resize-#= data #'></div>")};a.prototype={addOverlay:function(){this.owner.wrapper.append(J.overlay)},removeOverlay:function(){this.owner.wrapper.find(C).remove()},dragstart:function(t){var n=this,i=n.owner,r=i.wrapper;n.elementPadding=parseInt(r.css("padding-top"),10),n.initialPosition=l.getOffset(r,"position"),n.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),n.initialSize={width:r.width(),height:r.height()},n.containerOffset=l.getOffset(i.appendTo,"position"),r.children(x).not(t.currentTarget).hide(),e(v).css(R,t.currentTarget.css(R))},drag:function(e){var t,n,r,o,a=this,s=a.owner,l=s.wrapper,d=s.options,c=a.resizeDirection,u=a.containerOffset,h=a.initialPosition,p=a.initialSize,f=Math.max(e.x.location,u.left),g=Math.max(e.y.location,u.top);c.indexOf("e")>=0?(t=f-h.left,l.width(i(t,d.minWidth,d.maxWidth))):c.indexOf("w")>=0&&(t=i((o=h.left+p.width)-f,d.minWidth,d.maxWidth),l.css({left:o-t-u.left,width:t})),c.indexOf("s")>=0?(n=g-h.top-a.elementPadding,l.height(i(n,d.minHeight,d.maxHeight))):c.indexOf("n")>=0&&(n=i((r=h.top+p.height)-g,d.minHeight,d.maxHeight),l.css({top:r-n-u.top,height:n})),t&&(s.options.width=t+"px"),n&&(s.options.height=n+"px"),s.resize()},dragend:function(t){var n=this,i=n.owner,r=i.wrapper;return r.children(x).not(t.currentTarget).show(),e(v).css(R,""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&r.css(n.initialPosition).css(n.initialSize),i.trigger($),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},s.prototype={dragstart:function(t){var n=this.owner,i=n.element,r=i.find(".k-window-actions"),o=l.getOffset(n.appendTo);n.trigger(L),n.initialWindowPosition=l.getOffset(n.wrapper,"position"),n.startPosition={left:t.x.client-n.initialWindowPosition.left,top:t.y.client-n.initialWindowPosition.top},n.minLeftPosition=r.length>0?r.outerWidth()+parseInt(r.css("right"),10)-i.outerWidth():20-i.outerWidth(),n.minLeftPosition-=o.left,n.minTopPosition=-o.top,n.wrapper.append(J.overlay).children(x).hide(),e(v).css(R,t.currentTarget.css(R))},drag:function(t){var n=this.owner,i=n.options.position,r=Math.max(t.y.client-n.startPosition.top,n.minTopPosition),o=Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),a={left:o,top:r};e(n.wrapper).css(a),i.top=r,i.left=o},_finishDrag:function(){var t=this.owner;t.wrapper.children(x).toggle(!t.options.isMinimized).end().find(C).remove(),e(v).css(R,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(_).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(z),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},l.ui.plugin(X)}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=e.find(w("popover")),r=s.roles;for(t=0,n=i.length;n>t;t++)o.initWidget(i[t],{},r)}function i(e){o.triggeredByInput(e)||e.preventDefault()}function r(t){t.each(function(){o.initWidget(e(this),{},s.roles)})}var o=window.kendo,a=o.mobile,s=a.ui,l=o.attr,d=s.Widget,c=o.ViewClone,u="init",h="beforeShow",p="show",f="afterShow",g="beforeHide",m="transitionEnd",v="transitionStart",b="hide",_="destroy",k=o.attrValue,w=o.roleSelector,y=o.directiveSelector,x=o.compileMobileDirective,C=d.extend({init:function(t,n){d.fn.init.call(this,t,n),this.params={},e.extend(this,n),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[u,h,p,f,g,b,_,v,m],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){void 0===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(_),d.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),o.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return!this.trigger(h,{view:this})},triggerBeforeHide:function(){return!this.trigger(g,{view:this})},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(u,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(p,{view:this}),o.resize(e)},showEnd:function(){this.trigger(f,{view:this}),this._padIfNativeScrolling()},hideEnd:function(){var e=this;e.element.hide(),e.trigger(b,{view:e}),e.layout&&e.layout.trigger(b,{view:e,layout:e.layout})},beforeTransition:function(e){this.trigger(v,{type:e})},afterTransition:function(e){this.trigger(m,{type:e})},_padIfNativeScrolling:function(){if(a.appLevelNativeScrolling()){var e=o.support.mobileOS&&o.support.mobileOS.android,t=a.application.skin()||"",n=a.application.os.android||t.indexOf("android")>-1,i="flat"===t||t.indexOf("material")>-1,r=!e&&!n||i?"header":"footer",s=!e&&!n||i?"footer":"header";this.content.css({paddingTop:this[r].height(),paddingBottom:this[s].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new c(this)},_scroller:function(){var t=this;a.appLevelNativeScrolling()||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller(e.extend(t.options.scroller,{zoom:t.options.zoom,useNative:t.options.useNativeScrolling})),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),o.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",i),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",i)))},_model:function(){var e=this,t=e.element,i=e.options.model;"string"==typeof i&&(i=o.getter(i)(e.options.modelScope)),e.model=i,n(t),e.element.css("display",""),e.options.initWidgets&&(i?o.bind(t,i,s,o.ui,o.dataviz.ui):a.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=k(e,"url")||"#"+t,"#"==this.id&&(this.id=o.guid(),e.attr("id",this.id))},_layout:function(){var e=w("content"),t=this.element;t.addClass("km-view"),this.header=t.children(w("header")).addClass("km-header"),this.footer=t.children(w("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+l("role")+'="content"></div>'),this.content=t.children(w("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e('<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />').appendTo(this.element)},_invokeNgController:function(){var t,n,i;this.options.$angular&&(t=this.element.controller(),n=this.element.scope(),t&&(i=e.proxy(this,"_callController",t,n),/^\$(digest|apply)$/.test(n.$$phase)?i():n.$apply(i)))},_callController:function(e,t){this.element.injector().invoke(e.constructor,e,{$scope:t})}}),S=d.extend({init:function(e,t){d.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),n(e),this.options.$angular||o.mobile.init(this.element.children()),this.element.detach(),this.trigger(u,{layout:this})},_locate:function(e){return this.options.$angular?y(e):w(e)},options:{name:"Layout",id:null,platform:null},events:[u,p,b],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this,n=t.currentView;n&&t.detach(n),e.header===t.header&&(t.header.detach(),e.element.children(w("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(w("footer")).remove(),e.element.append(t.footer)),t.trigger(p,{layout:t,view:e}),t.currentView=e}}),T=o.Observable,D=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,I="loadStart",E="loadComplete",A="showStart",O="sameViewRequested",R="viewShow",P="viewTypeDetermined",M="after",F=T.extend({init:function(t){var n,i,a,s,l=this;if(T.fn.init.call(l),e.extend(l,t),l.sandbox=e("<div />"),a=l.container,n=l._hideViews(a),l.rootView=n.first(),!l.rootView[0]&&t.rootNeeded)throw i=a[0]==o.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(i);l.layouts={},l.viewContainer=new o.ViewContainer(l.container),l.viewContainer.bind("accepted",function(e){e.view.params=l.params}),l.viewContainer.bind("complete",function(e){l.trigger(R,{view:e.view})}),l.viewContainer.bind(M,function(){l.trigger(M)}),this.getLayoutProxy=e.proxy(this,"_getLayout"),l._setupLayouts(a),s=a.children(l._locate("modalview drawer")),l.$angular?(l.$angular[0].viewOptions={defaultTransition:l.transition,loader:l.loader,container:l.container,getLayout:l.getLayoutProxy},s.each(function(n,i){x(e(i),t.$angular[0])})):r(s),this.bind(this.events,t)},events:[A,M,R,I,E,O,P],destroy:function(){for(var e in o.destroy(this.container),this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,n){if(""===(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""))&&this.remoteViewURLPrefix&&(e="/"),e.replace(/^#/,"")===this.url)return this.trigger(O),!1;this.trigger(A);var i=this,r=function(n){return i.viewContainer.show(n,t,e)},a=i._findViewElement(e),s=o.widgetInstance(a);return i.url=e.replace(/^#/,""),i.params=n,s&&s.reload&&(s.purge(),a=[]),this.trigger(P,{remote:0===a.length,url:e}),a[0]?(s||(s=i._createView(a)),r(s)):(this.serverNavigation?location.href=e:i._loadView(e,r),!0)},append:function(e,t){var n,i,o,a=this.sandbox,s=(t||"").split("?")[0],d=this.container;return D.test(e)&&(e=RegExp.$1),a[0].innerHTML=e,d.append(a.children("script, style")),(o=(n=this._hideViews(a)).first()).length||(n=o=a.wrapInner("<div data-role=view />").children()),s&&o.hide().attr(l("url"),s),this._setupLayouts(a),i=a.children(this._locate("modalview drawer")),d.append(a.children(this._locate("layout modalview drawer")).add(n)),r(i),this._createView(o)},_locate:function(e){return this.$angular?y(e):w(e)},_findViewElement:function(e){var t,n=e.split("?")[0];return n?((t=this.container.children("["+l("url")+"='"+n+"']"))[0]||-1!==n.indexOf("/")||(t=this.container.children("#"===n.charAt(0)?n:"#"+n)),t):this.rootView},_createView:function(e){return this.$angular?x(e,this.$angular[0]):o.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:k(e,"reload")},s.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,n){this._xhr&&this._xhr.abort(),this.trigger(I),this._xhr=e.get(o.absoluteURL(t,this.remoteViewURLPrefix),"html").always(e.proxy(this,"_xhrComplete",n,t))},_xhrComplete:function(e,t,n){var i=!0;if("object"==typeof n&&0===n.status){if(!(n.responseText&&n.responseText.length>0))return;i=!0,n=n.responseText}this.trigger(E),i&&e(this.append(n,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var n,i=this;t.children(i._locate("layout")).each(function(){var t=(n=i.$angular?x(e(this),i.$angular[0]):o.initWidget(e(this),{},s.roles)).options.platform;t&&t!==a.application.os.name?n.destroy():i.layouts[n.options.id]=n})}});o.mobile.ViewEngine=F,s.plugin(C),s.plugin(S)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=e.map(t.eventMap,function(e){return e}).join(" ").split(" "),o=i.extend({init:function(t,n){var r=this,o=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');i.fn.init.call(r,o,n),r.container=t,r.captureEvents=!1,r._attachCapture(),o.append(r.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),!1!==e.options.loading&&(e.captureEvents=!0,e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(e){this.options.loading=e,this.element.find(">h1").html(e)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){n.captureEvents&&e.preventDefault()}var t,n=this;for(n.captureEvents=!1,t=0;r.length>t;t++)n.container[0].addEventListener(r[t],e,!0)}});n.plugin(o)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.roleSelector,o=i.ui,a=o.Widget,s=i.ViewEngine,l=o.View,d=i.ui.Loader,c="external",u="href",h="navigate",p="viewShow",f="sameViewRequested",g=n.support.mobileOS,m=g.ios&&!g.appMode&&g.flatVersion>=700,v=/popover|actionsheet|modalview|drawer/,b=n.attrValue,_=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t),t=i.options,(e=i.element).addClass("km-pane"),i.options.collapsible&&e.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(e,t,n){var r=i.transition;return i.transition=null,m&&n&&(r="none"),i.viewEngine.showView(e,r,t)},this._historyNavigate=function(e){if("#:back"===e){if(1===i.history.length)return;i.history.pop(),e=i.history[i.history.length-1]}else i.history.push(e);i.historyCallback(e,n.parseQueryStringParams(e))},this._historyReplace=function(e){var t=n.parseQueryStringParams(e);i.history[i.history.length-1]=e,i.historyCallback(e,t)},i.loader=new d(e,{loading:i.options.loading}),i.viewEngine=new s({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:i.loader,showStart:function(){i.loader.transition(),i.closeActiveDialogs()},after:function(){i.loader.transitionDone()},viewShow:function(e){i.trigger(p,e)},loadStart:function(){i.loader.show()},loadComplete:function(){i.loader.hide()},sameViewRequested:function(){i.trigger(f)},viewTypeDetermined:function(e){e.remote&&i.options.serverNavigation||i.trigger(h,{url:e.url})}}),this._setPortraitWidth(),n.onResize(function(){i._setPortraitWidth()}),i._setupAppLinks()},closeActiveDialogs:function(){this.element.find(r("actionsheet popover modalview")).filter(":visible").each(function(){n.widgetInstance(e(this),o).close()})},navigateToInitial:function(){var e=this.options.initial;return e&&this.navigate(e),e},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[h,p,f],append:function(e){return this.viewEngine.append(e)},destroy:function(){a.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},bindToRouter:function(e){var t=this,i=this.history,r=this.viewEngine;e.bind("init",function(t){var o,a=t.url,s=e.pushState?a:"/";r.rootView.attr(n.attr("url"),s),o=i.length,"/"===a&&o&&(e.navigate(i[o-1],!0),t.preventDefault())}),e.bind("routeMissing",function(e){t.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),e.bind("same",function(){t.trigger(f)}),t._historyNavigate=function(t){e.navigate(t)},t._historyReplace=function(t){e.replace(t)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=n.mobile.application.element.is(".km-vertical")?t:"auto",this.element.css("width",e))},_setupAppLinks:function(){var t=this,i="[data-"+n.ns+"navigate-on-press]",o=e.map(["button","backbutton","detailbutton","listview-link"],function(e){return r(e)+":not("+i+")"}).join(",");this.element.handler(this).on("down",r("tab")+","+i,"_mouseup").on("click",r("tab")+","+o+","+i,"_appLinkClick"),this.userEvents=new n.UserEvents(this.element,{filter:o,tap:function(e){e.event.currentTarget=e.touch.currentTarget,t._mouseup(e.event)}}),this.element.css("-ms-touch-action","")},_appLinkClick:function(t){var n=e(t.currentTarget).attr("href");n&&"#"!==n[0]&&this.options.serverNavigation||b(e(t.currentTarget),"rel")==c||t.preventDefault()},_mouseup:function(t){if(!(t.which>1||t.isDefaultPrevented())){var r=this,a=e(t.currentTarget),s=b(a,"transition"),l=b(a,"rel")||"",d=b(a,"target"),h=a.attr(u),p=m&&0===a[0].offsetHeight,f=h&&"#"!==h[0]&&this.options.serverNavigation;p||f||l===c||void 0===h||"#!"===h||(a.attr(u,"#!"),setTimeout(function(){a.attr(u,h)}),l.match(v)?(n.widgetInstance(e(h),o).openFor(a),("actionsheet"===l||"drawer"===l)&&t.stopPropagation()):("_top"===d?r=i.application.pane:d&&(r=e("#"+d).data("kendoMobilePane")),r.navigate(h,s)),t.preventDefault())}}});_.wrap=function(e){e.is(r("view"))||(e=e.wrap("<div data-"+n.ns+'role="view" data-stretch="true"></div>').parent());var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),i=new _(t);return i.navigate(""),i},o.plugin(_)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i="hide",r="open",o="close",a=n.Widget,s={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},l={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},d={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},c={up:"down",down:"up",left:"right",right:"left"},u=a.extend({init:function(n,r){var o,c,u=this,h=n.closest(".km-modalview-wrapper"),p=n.closest(".km-root").children(".km-pane").first(),f=h[0]?h:p;r.viewport?p=r.viewport:p[0]||(p=window),r.container?f=r.container:f[0]||(f=document.body),o={viewport:p,copyAnchorStyles:!1,autosize:!0,open:function(){u.overlay.show()},activate:e.proxy(u._activate,u),deactivate:function(){u.overlay.hide(),u._apiCall||u.trigger(i),u._apiCall=!1}},a.fn.init.call(u,n,r),n=u.element,r=u.options,n.wrap('<div class="km-popup-wrapper" />').addClass("km-popup").show(),c=u.options.direction.match(/left|right/)?"horizontal":"vertical",u.dimensions=d[c],u.wrapper=n.parent().css({width:r.width,height:r.height}).addClass("km-popup-wrapper km-"+r.direction).hide(),u.arrow=e('<div class="km-popup-arrow" />').prependTo(u.wrapper).hide(),u.overlay=e('<div class="km-popup-overlay" />').appendTo(f).hide(),o.appendTo=u.overlay,r.className&&u.overlay.addClass(r.className),u.popup=new t.ui.Popup(u.wrapper,e.extend(!0,o,l,s[r.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[i],show:function(t){this.popup.options.anchor=e(t),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){a.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var t=this,n=t.options.direction,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=e(o.element).offset(),d=o.flipped?c[n]:n,u=2*t.arrow[i.size](),h=t.element[i.size]()-t.arrow[i.size](),p=e(a)[i.size](),f=s[r]-l[r]+p/2;u>f&&(f=u),f>h&&(f=h),t.wrapper.removeClass("km-up km-down km-left km-right").addClass("km-"+d),t.arrow.css(r,f).show()}}),h=a.extend({init:function(i,r){var s,l=this;l.initialOpen=!1,a.fn.init.call(l,i,r),s=e.extend({className:"km-popover-root",hide:function(){l.trigger(o)}},this.options.popup),l.popup=new u(l.element,s),l.popup.overlay.on("move",function(e){e.target==l.popup.overlay[0]&&e.preventDefault()}),l.pane=new n.Pane(l.element,e.extend(this.options.pane,{$angular:this.options.$angular})),t.notify(l,n)},options:{name:"PopOver",popup:{},pane:{}},events:[r,o],open:function(e){this.popup.show(e),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigateToInitial()||this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(e){this.open(e),this.trigger(r,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){a.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),t.destroy(this.element)}});n.plugin(u),n.plugin(h)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile.ui,r=n.ui.Popup,o="hide",a=i.Widget,s=a.extend({init:function(t,i){var s=this,l=n.mobile.application,d=n.support.mobileOS,c=l?l.os.name:d?d.name:"ios",u="ios"===c||"wp"===c||!!l&&l.os.skin,h="blackberry"===c,p=i.align||(u?"bottom center":h?"center right":"center center"),f=i.position||(u?"bottom center":h?"center right":"center center"),g=i.effect||(u?"slideIn:up":h?"slideIn:left":"fade:in"),m=e('<div class="km-shim"/>').handler(s).hide();a.fn.init.call(s,t,i),s.shim=m,t=s.element,(i=s.options).className&&s.shim.addClass(i.className),i.modal||s.shim.on("up","_hide"),(l?l.element:e(document.body)).append(m),s.popup=new r(s.element,{anchor:m,modal:!0,appendTo:m,origin:p,position:f,animation:{open:{effects:g,duration:i.duration},close:{duration:i.duration}},close:function(e){var t=!1;s._apiCall||(t=s.trigger(o)),t&&e.preventDefault(),s._apiCall=!1},deactivate:function(){m.hide()},open:function(){m.show()}}),n.notify(s)},events:[o],options:{name:"Shim",modal:!1,align:t,position:t,effect:t,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){a.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(t){t&&e.contains(this.shim.children().children(".k-popup")[0],t.target)||this.popup.close()}});i.plugin(s)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.support,i=t.mobile.ui,r=i.Shim,o=i.Popup,a=i.Widget,s="open",l="close",d="command",c="li>a",u=t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),h=a.extend({init:function(s,l){var d,h,p,f=this,g=n.mobileOS;a.fn.init.call(f,s,l),p=(l=f.options).type,s=f.element,d=(h="auto"===p?g&&g.tablet:"tablet"===p)?o:r,l.cancelTemplate&&(u=t.template(l.cancelTemplate)),s.addClass("km-actionsheet").append(u({cancel:f.options.cancel})).wrap('<div class="km-actionsheet-wrapper" />').on("up",c,"_click").on("click",c,t.preventDefault),f.view().bind("destroy",function(){f.destroy()}),f.wrapper=s.parent().addClass(p?" km-actionsheet-"+p:""),f.shim=new d(f.wrapper,e.extend({modal:g.ios&&7>g.majorVersion,className:"km-actionsheet-root"},f.options.popup)),f._closeProxy=e.proxy(f,"_close"),f.shim.bind("hide",f._closeProxy),h&&t.onResize(f._closeProxy),t.notify(f,i)},events:[s,l,d],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,n){var i=this;i.target=e(t),i.context=n,i.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=e.data("actionsheetContext");this.open(e,t),this.trigger(s,{target:e,context:t})},destroy:function(){a.fn.destroy.call(this),t.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(n){var i,r,o,a;n.isDefaultPrevented()||((r=(i=e(n.currentTarget)).data("action"))&&(o={target:this.target,context:this.context},(a=this.options.$angular)?this.element.injector().get("$parse")(r)(a[0])(o):t.getter(r)(window)(o)),this.trigger(d,{target:this.target,context:this.context,currentTarget:i}),n.preventDefault(),this._close())},_close:function(e){this.trigger(l)?e.preventDefault():this.close()}});i.plugin(h)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r="horizontal",o="vertical",a="k-progressbar",s="k-progressbar-indeterminate",l="k-complete",d="k-state-selected",c="k-progress-status",u="k-state-selected",h="k-state-default",p="k-state-disabled",f={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},g="change",m="complete",v=Math,b=e.extend,_=e.proxy,k="<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>",w=i.extend({init:function(e,t){var n=this;i.fn.init.call(this,e,t),t=n.options,n._progressProperty=t.orientation===r?"width":"height",n._fields(),t.value=n._validateValue(t.value),n._validateType(t.type),n._wrapper(),n._progressAnimation(),t.value!==t.min&&!1!==t.value&&n._updateProgress()},setOptions:function(e){var t=this;i.fn.setOptions.call(t,e),e.hasOwnProperty("reverse")&&t.wrapper.toggleClass("k-progressbar-reverse",e.reverse),e.hasOwnProperty("enable")&&t.enable(e.enable),t._progressAnimation(),t._validateValue(),t._updateProgress()},events:[g,m],options:{name:"ProgressBar",orientation:r,reverse:!1,min:0,max:100,value:0,enable:!0,type:f.VALUE,chunkCount:5,showStatus:!0,animation:{}},_fields:function(){var t=this;t._isStarted=!1,t.progressWrapper=t.progressStatus=e()},_validateType:function(i){var r=!1;if(e.each(f,function(e,n){return n===i?(r=!0,!1):t}),!r)throw Error(n.format("Invalid ProgressBar type '{0}'",i))},_wrapper:function(){var e,t=this,n=t.wrapper=t.element,i=t.options,l=i.orientation;n.addClass("k-widget "+a),n.addClass(a+"-"+(l===r?r:o)),!1===i.enable&&n.addClass(p),i.reverse&&n.addClass("k-progressbar-reverse"),!1===i.value&&n.addClass(s),i.type===f.CHUNK?t._addChunkProgressWrapper():i.showStatus&&(t.progressStatus=t.wrapper.prepend(k).find("."+c),e=!1!==i.value?i.value:i.min,t.progressStatus.text(i.type===f.VALUE?e:t._calculatePercentage(e).toFixed()+"%"))},value:function(e){return this._value(e)},_value:function(e){var n,i=this,r=i.options;return e===t?r.value:("boolean"!=typeof e?(e=i._roundValue(e),isNaN(e)||(n=i._validateValue(e))!==r.value&&(i.wrapper.removeClass(s),r.value=n,i._isStarted=!0,i._updateProgress())):e||(i.wrapper.addClass(s),r.value=!1),t)},_roundValue:function(e){e=parseFloat(e);var t=v.pow(10,3);return v.floor(e*t)/t},_validateValue:function(e){var t=this.options;if(!1!==e){if(t.min>=e||!0===e)return t.min;if(e>=t.max)return t.max}else if(!1===e)return!1;return isNaN(this._roundValue(e))?t.min:e},_updateProgress:function(){var e=this,t=e.options,n=e._calculatePercentage();t.type===f.CHUNK?(e._updateChunks(n),e._onProgressUpdateAlways(t.value)):e._updateProgressWrapper(n)},_updateChunks:function(e){var t,n=this,i=n.options,a=i.chunkCount,s=parseInt(100/a*100,10)/100,l=parseInt(100*e,10)/100,d=v.floor(l/s);t=n.wrapper.find(i.orientation===r&&!i.reverse||i.orientation===o&&i.reverse?"li.k-item:lt("+d+")":"li.k-item:gt(-"+(d+1)+")"),n.wrapper.find("."+u).removeClass(u).addClass(h),t.removeClass(h).addClass(u)},_updateProgressWrapper:function(e){var t=this,n=t.options,i=t.wrapper.find("."+d),r=t._isStarted?t._animation.duration:0,o={};0===i.length&&t._addRegularProgressWrapper(),o[t._progressProperty]=e+"%",t.progressWrapper.animate(o,{duration:r,start:_(t._onProgressAnimateStart,t),progress:_(t._onProgressAnimate,t),complete:_(t._onProgressAnimateComplete,t,n.value),always:_(t._onProgressUpdateAlways,t,n.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t,n=this,i=n.options,r=parseFloat(e.elem.style[n._progressProperty],10);i.showStatus&&(t=1e4/parseFloat(n.progressWrapper[0].style[n._progressProperty]),n.progressWrapper.find(".k-progress-status-wrap").css(n._progressProperty,t+"%")),i.type!==f.CHUNK&&98>=r&&n.progressWrapper.removeClass(l)},_onProgressAnimateComplete:function(e){var t,n=this,i=n.options,r=parseFloat(n.progressWrapper[0].style[n._progressProperty]);i.type!==f.CHUNK&&r>98&&n.progressWrapper.addClass(l),i.showStatus&&(t=i.type===f.VALUE?e:i.type==f.PERCENT?n._calculatePercentage(e).toFixed()+"%":v.floor(n._calculatePercentage(e))+"%",n.progressStatus.text(t)),e===i.min&&n.progressWrapper.hide()},_onProgressUpdateAlways:function(e){var t=this,n=t.options;t._isStarted&&t.trigger(g,{value:e}),e===n.max&&t._isStarted&&t.trigger(m,{value:n.max})},enable:function(e){var n=this.options;n.enable=t===e||e,this.wrapper.toggleClass(p,!n.enable)},destroy:function(){i.fn.destroy.call(this)},_addChunkProgressWrapper:function(){var e,t=this,n=t.options,i=t.wrapper,r=100/n.chunkCount,o="";for(1>=n.chunkCount&&(n.chunkCount=5),o+="<ul class='k-reset'>",e=n.chunkCount-1;e>=0;e--)o+="<li class='k-item k-state-default'></li>";o+="</ul>",i.append(o).find(".k-item").css(t._progressProperty,r+"%").first().addClass("k-first").end().last().addClass("k-last"),t._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this,t=e.options,n=e.wrapper.find(".k-item:last"),i=parseFloat(n[0].style[e._progressProperty]),r=100-t.chunkCount*i;r>0&&n.css(e._progressProperty,i+r+"%")},_addRegularProgressWrapper:function(){var t=this;t.progressWrapper=e("<div class='"+d+"'></div>").appendTo(t.wrapper),t.options.showStatus&&(t.progressWrapper.append(k),t.progressStatus=t.wrapper.find("."+c))},_calculateChunkSize:function(){var e=this,t=e.options.chunkCount,n=e.wrapper.find("ul.k-reset");return(parseInt(n.css(e._progressProperty),10)-(t-1))/t},_calculatePercentage:function(e){var n=this,i=n.options,r=e!==t?e:i.value,o=i.min,a=i.max;return n._onePercent=v.abs((a-o)/100),v.abs((r-o)/n._onePercent)},_progressAnimation:function(){var e=this.options,t=e.animation;this._animation=!1===t?{duration:0}:b({duration:400},e.animation)}});n.ui.plugin(w)}(window.kendo.jQuery),function(e,t,n){"use strict";function i(){function e(){var t,r,o;for(t=0;arguments.length>t;++t){if((r=arguments[t])===n)throw Error("Cannot output undefined to PDF");if(r instanceof b)r.beforeRender(e),r.render(e);else if(A(r))h(r,e);else if(u(r))p(r,e);else if("number"==typeof r){if(isNaN(r))throw Error("Cannot output NaN to PDF");(o=r.toFixed(7)).indexOf(".")>=0&&(o=o.replace(/\.?0+$/,"")),"-0"==o&&(o="0"),i.writeString(o)}else/string|boolean/.test(typeof r)?i.writeString(r+""):"function"==typeof r.get?i.write(r.get()):"object"==typeof r&&(r?e(new F(r)):i.writeString("null"))}}var t=0,i=D();return e.writeData=function(e){i.write(e)},e.withIndent=function(n){++t,n(e),--t},e.indent=function(){e(G,l("",2*t,"  ")),e.apply(null,arguments)},e.offset=function(){return i.offset()},e.toString=function(){throw Error("FIX CALLER")},e.get=function(){return i.get()},e.stream=function(){return i},e}function r(e){var t,n=e("paperSize",Y.a4);if(!n)return{};if("string"==typeof n&&null==(n=Y[n.toLowerCase()]))throw Error("Unknown paper size");return n[0]=v(n[0]),n[1]=v(n[1]),e("landscape",!1)&&(n=[Math.max(n[0],n[1]),Math.min(n[0],n[1])]),(t=e("margin"))&&(t="string"==typeof t||"number"==typeof t?{left:t=v(t,0),top:t,right:t,bottom:t}:{left:v(t.left,0),top:v(t.top,0),right:v(t.right,0),bottom:v(t.bottom,0)},e("addMargin")&&(n[0]+=t.left+t.right,n[1]+=t.top+t.bottom)),{paperSize:n,margin:t}}function o(e){function t(t,n){return e&&null!=e[t]?e[t]:n}var n,o,a=this,s=i(),l=0,c=[];a.getOption=t,a.attach=function(e){return c.indexOf(e)<0&&(function(e,t){var n=e.beforeRender,i=e.render;e.beforeRender=function(){},e.render=function(e){e(t," 0 R")},e.renderFull=function(r){e._offset=r.offset(),r(t," 0 obj "),n.call(e,r),i.call(e,r),r(" endobj")}}(e,++l),c.push(e)),e},a.pages=[],a.FONTS={},a.IMAGES={},a.GRAD_COL_FUNCTIONS={},a.GRAD_OPC_FUNCTIONS={},a.GRAD_COL={},a.GRAD_OPC={},n=a.attach(new N),o=a.attach(new $),n.setPages(o),a.addPage=function(e){var t,n,s,l=r(function(t,n){return e&&null!=e[t]?e[t]:n}),d=l.paperSize,c=l.margin,u=d[0],h=d[1];return c&&(u-=c.left+c.right,h-=c.top+c.bottom),t=new H(i(),null,!0),n={Contents:a.attach(t),Parent:o,MediaBox:[0,0,d[0],d[1]]},(s=new B(a,n))._content=t,o.addPage(a.attach(s)),s.transform(1,0,0,-1,0,d[1]),c&&(s.translate(c.left,c.top),s.rect(0,0,u,h),s.clip()),a.pages.push(s),s},a.render=function(){var e,i;for(s("%PDF-1.4",G,"%",G,G),e=0;c.length>e;++e)c[e].renderFull(s),s(G,G);for(i=s.offset(),s("xref",G,0," ",c.length+1,G),s("0000000000 65535 f ",G),e=0;c.length>e;++e)s(d(c[e]._offset,10)," 00000 n ",G);return s(G),s("trailer",G),s(new F({Size:c.length+1,Root:n,Info:new F({Producer:new O(t("producer","Kendo UI PDF Generator")),Title:new O(t("title","")),Author:new O(t("author","")),Subject:new O(t("subject","")),Keywords:new O(t("keywords","")),Creator:new O(t("creator","Kendo UI PDF Generator")),CreationDate:t("date",new Date)})}),G,G),s("startxref",G,i,G),s("%%EOF",G),s.stream().offset(0)}}function a(t,n){function i(){e.console&&(e.console.error?e.console.error("Cannot load URL: %s",t):e.console.log("Cannot load URL: %s",t)),n(null)}var r=new XMLHttpRequest;r.open("GET",t,!0),W&&(r.responseType="arraybuffer"),r.onload=function(){200==r.status||304==r.status?n(W?new Uint8Array(r.response):new VBArray(r.responseBody).toArray()):i()},r.onerror=i,r.send(null)}function s(e){return function(t,n){var i=t.length,r=i;if(0===i)return n();for(;r-- >0;)e(t[r],function(){0==--i&&n()})}}function l(e,t,n){for(;t>e.length;)e=n+e;return e}function d(e,t){return l(e+"",t,"0")}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){return e instanceof Date}function h(e,t){t("["),e.length>0&&t.withIndent(function(){for(var n=0;e.length>n;++n)n>0&&n%8==0?t.indent(e[n]):t(" ",e[n])}),t(" ]")}function p(e,t){t("(D:",d(e.getUTCFullYear(),4),d(e.getUTCMonth()+1,2),d(e.getUTCDate(),2),d(e.getUTCHours(),2),d(e.getUTCMinutes(),2),d(e.getUTCSeconds(),2),"Z)")}function f(e){return e*(72/25.4)}function g(e){return f(10*e)}function m(e){return 72*e}function v(e,n){var i,r;if("number"==typeof e)return e;if("string"==typeof e&&(i=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e))&&(r=t(i[1]),!isNaN(r)))return"pt"==i[2]?r:{mm:f,cm:g,in:m}[i[2]](r);if(null!=n)return n;throw Error("Can't parse unit: "+e)}function b(){}function _(e,t,n){for(var i in n||(n=b),e.prototype=new n,t)c(t,i)&&(e.prototype[i]=t[i]);return e}function k(e){return c(M,e)?M[e]:M[e]=new P(e)}function w(e,t,n){this.asStream=function(){var i=new H(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),Filter:k("DCTDecode")});return i._resourceName=k("I"+ ++q),i}}function y(e,t,n,i){this.asStream=function(r){var o=new H(i,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceGray")},!0),a=new H(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),SMask:r.attach(o)},!0);return a._resourceName=k("I"+ ++q),a}}function x(e){return e.map(function(e){return A(e)?x(e):"number"==typeof e?(Math.round(1e3*e)/1e3).toFixed(3):e}).join(" ")}function C(e,t,n,i,r,o,a){var s=x([t,n,i,r,o,a]),l=e.GRAD_COL_FUNCTIONS[s];return l||(l=e.GRAD_COL_FUNCTIONS[s]=e.attach(new F({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[t,n,i],C1:[r,o,a]}))),l}function S(e,t,n){var i=x([t,n]),r=e.GRAD_OPC_FUNCTIONS[i];return r||(r=e.GRAD_OPC_FUNCTIONS[i]=e.attach(new F({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[t],C1:[n]}))),r}function T(e,t,n){var i="radial"==t.type,r=function(e,t){function n(e){return 1==e.length?e[0]:{FunctionType:3,Functions:e,Domain:[0,1],Bounds:u,Encode:h}}var i,r,o,a,s,l=!1,d=[],c=[],u=[],h=[];for(i=1;t.length>i;++i)r=t[i-1],o=t[i],a=r.color,s=o.color,c.push(C(e,a.r,a.g,a.b,s.r,s.g,s.b)),(1>a.a||1>s.a)&&(l=!0),u.push(o.offset),h.push(0,1);if(l)for(i=1;t.length>i;++i)r=t[i-1],o=t[i],a=r.color,s=o.color,d.push(S(e,a.a,s.a));return u.pop(),{hasAlpha:l,colors:n(c),opacities:l?n(d):null}}(e,t.stops),o=i?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y],a=function(e,t,n,i,r,o){var a,s,l;return o||(l=[t].concat(i),n.forEach(function(e){l.push(e.offset,e.color.r,e.color.g,e.color.b)}),s=x(l),a=e.GRAD_COL[s]),a||(a=new F({Type:k("Shading"),ShadingType:t?3:2,ColorSpace:k("DeviceRGB"),Coords:i,Domain:[0,1],Function:r,Extend:[!0,!0]}),e.attach(a),a._resourceName="S"+ ++q,s&&(e.GRAD_COL[s]=a)),a}(e,i,t.stops,o,r.colors,t.userSpace&&n),s=r.hasAlpha?function(e,t,n,i,r,o){var a,s,l;return o||(l=[t].concat(i),n.forEach(function(e){l.push(e.offset,e.color.a)}),s=x(l),a=e.GRAD_OPC[s]),a||(a=new F({Type:k("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:k("Mask"),S:k("Luminosity"),G:e.attach(new H("/a0 gs /s0 sh",{Type:k("XObject"),Subtype:k("Form"),FormType:1,BBox:o?[o.left,o.top+o.height,o.left+o.width,o.top]:[0,1,1,0],Group:{Type:k("Group"),S:k("Transparency"),CS:k("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:k("DeviceGray"),Coords:i,Domain:[0,1],ShadingType:t?3:2,Function:r,Extend:[!0,!0]}}}}))}}),e.attach(a),a._resourceName="O"+ ++q,s&&(e.GRAD_OPC[s]=a)),a}(e,i,t.stops,o,r.opacities,t.userSpace&&n):null;return{hasAlpha:r.hasAlpha,shading:a,opacity:s}}function D(t){function n(){return _>b?t[b++]:0}function i(e){p(b),t[b++]=255&e,b>_&&(_=b)}function r(){return n()<<8|n()}function o(e){i(e>>8),i(e)}function a(){return 65536*r()+r()}function s(e){o(e>>>16&65535),o(65535&e)}function l(){var e=a();return e>=2147483648?e-4294967296:e}function d(e){s(0>e?e+4294967296:e)}function c(e){return h(e,n)}function u(e){for(var t=0;e.length>t;++t)i(e.charCodeAt(t))}function h(e,t){for(var n=Array(e),i=0;e>i;++i)n[i]=t();return n}var p,f,g,m,v,b=0,_=0;return null==t?t=W?new Uint8Array(256):[]:_=t.length,p=W?function(e){if(e>=t.length){var n=new Uint8Array(Math.max(e+256,2*t.length));n.set(t,0),t=n}}:function(){},g=W?function(e){if("string"==typeof e)return u(e);var n=e.length;p(b+n),t.set(e,b),(b+=n)>_&&(_=b)}:function(e){if("string"==typeof e)return u(e);for(var t=0;e.length>t;++t)i(e[t])},m=W?function(e,n){if(t.buffer.slice)return new Uint8Array(t.buffer.slice(e,e+n));var i=new Uint8Array(n);return i.set(new Uint8Array(t.buffer,e,n)),i}:function(e,n){return t.slice(e,e+n)},v={eof:function(){return b>=_},readByte:n,writeByte:i,readShort:r,writeShort:o,readLong:a,writeLong:s,readFixed:function(){return a()/65536},writeFixed:function(e){s(Math.round(65536*e))},readShort_:function(){var e=r();return e>=32768?e-65536:e},writeShort_:function(e){o(0>e?e+65536:e)},readLong_:l,writeLong_:d,readFixed_:function(){return l()/65536},writeFixed_:function(e){d(Math.round(65536*e))},read:c,write:g,readString:function(e){return String.fromCharCode.apply(String,c(e))},writeString:u,times:h,get:f=W?function(){return new Uint8Array(t.buffer,0,_)}:function(){return t},slice:m,offset:function(e){return null!=e?(b=e,v):b},skip:function(e){b+=e},toString:function(){throw Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return _},saveExcursion:function(e){var t=b;try{return e()}finally{b=t}},writeBase64:function(t){e.atob?u(e.atob(t)):g(K.decode(t))},base64:function(){return K.encode(f())}}}function I(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function E(e,t){e=e.toLowerCase(),U[e]=function(){return U[t]},U[e+"|bold"]=function(){return U[t+"|bold"]},U[e+"|italic"]=function(){return U[t+"|italic"]},U[e+"|bold|italic"]=function(){return U[t+"|bold|italic"]}}var A,O,R,P,M,F,H,N,$,L,z,j,B,U,V=e.kendo,W=!!e.Uint8Array,G="\n",q=0,K=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(t){for(var n,i,r,o,a,s,l=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),d=0,c=l.length,u=[];c>d;)o=e.indexOf(l.charAt(d++))<<2|(n=e.indexOf(l.charAt(d++)))>>>4,a=(15&n)<<4|(i=e.indexOf(l.charAt(d++)))>>>2,s=(3&i)<<6|(r=e.indexOf(l.charAt(d++))),u.push(o),64!=i&&u.push(a),64!=r&&u.push(s);return u},encode:function(t){for(var n,i,r,o,a,s,l=0,d=t.length,c="";d>l;)o=(3&(n=t[l++]))<<4|(i=t[l++])>>>4,a=(15&i)<<2|(r=t[l++])>>>6,s=63&r,l-d==2?a=s=64:l-d==1&&(s=64),c+=e.charAt(n>>>2)+e.charAt(o)+e.charAt(a)+e.charAt(s);return c}}}(),Y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},Q={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},X={},J=s(function(e,t){var n=Q[e];n?t(n):a(e,function(n){if(null==n)throw Error("Cannot load font from "+e);var i=new V.pdf.TTFFont(n);Q[e]=i,t(i)})}),Z=s(function(e,t){function i(e){d.src=e,d.complete&&!V.support.browser.msie?o():(d.onload=o,d.onerror=r)}function r(){t(X[e]="TAINTED")}function o(){var i,o,l,c,u,h,p,f,g,m,v,b;if(s&&/^image\/jpe?g$/i.test(s.type))return(i=new FileReader).onload=function(){d=new w(d.width,d.height,D(new Uint8Array(this.result))),URL.revokeObjectURL(a),t(X[e]=d)},i.readAsArrayBuffer(s),n;(o=document.createElement("canvas")).width=d.width,o.height=d.height,(l=o.getContext("2d")).drawImage(d,0,0);try{c=l.getImageData(0,0,d.width,d.height)}catch(e){return r()}finally{a&&URL.revokeObjectURL(a)}for(u=!1,h=D(),p=D(),f=c.data,g=0;f.length>g;)h.writeByte(f[g++]),h.writeByte(f[g++]),h.writeByte(f[g++]),255>(m=f[g++])&&(u=!0),p.writeByte(m);u?d=new y(d.width,d.height,h,p):(v=(v=o.toDataURL("image/jpeg")).substr(v.indexOf(";base64,")+8),(b=D()).writeBase64(v),b.offset(0),d=new w(d.width,d.height,b)),t(X[e]=d)}var a,s,l,d=X[e];d?t(d):(d=new Image,/^data:/i.test(e)||(d.crossOrigin="Anonymous"),W&&!/^data:/i.test(e)?((l=new XMLHttpRequest).onload=function(){s=l.response,i(a=URL.createObjectURL(s))},l.onerror=r,l.open("GET",e,!0),l.responseType="blob",l.send()):i(e))});o.prototype={loadFonts:J,loadImages:Z,getFont:function(e){var t=this.FONTS[e];if(!t){if(!(t=Q[e]))throw Error("Font "+e+" has not been loaded");t=this.attach(!0===t?new L(e):new z(this,t)),this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){if(!(t=X[e]))throw Error("Image "+e+" has not been loaded");if("TAINTED"===t)return null;t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,n){var i,r,o,a=t(e).toFixed(3);return e=t(a),a+=n?"S":"F",(r=(i=this._opacityGSCache||(this._opacityGSCache={}))[a])||(o={Type:k("ExtGState")},n?o.CA=e:o.ca=e,(r=this.attach(new F(o)))._resourceName=k("GS"+ ++q),i[a]=r),r},dict:function(e){return new F(e)},name:function(e){return k(e)},stream:function(e,t){return new H(t,e)}},A=Array.isArray||function(e){return e instanceof Array},b.prototype.beforeRender=function(){},O=_(function(e){this.value=e},{render:function(e){var t,n="",i=this.escape();for(t=0;i.length>t;++t)n+=String.fromCharCode(255&i.charCodeAt(t));e("(",n,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),R=_(function(e){this.value=e},{render:function(e){e("<");for(var t=0;this.value.length>t;++t)e(d(this.value.charCodeAt(t).toString(16),4));e(">")}},O),P=_(function(e){this.name=e},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+d(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),M={},P.get=k,F=_(function(e){this.props=e},{render:function(e){var t=this.props,n=!0;e("<<"),e.withIndent(function(){for(var i in t)c(t,i)&&!/^_/.test(i)&&(n=!1,e.indent(k(i)," ",t[i]))}),n||e.indent(),e(">>")}}),H=_(function(e,t,n){if("string"==typeof e){var i=D();i.write(e),e=i}this.data=e,this.props=t||{},this.compress=n},{render:function(t){var n=this.data.get(),i=this.props;this.compress&&e.pako&&"function"==typeof e.pako.deflate&&(i.Filter?i.Filter instanceof Array||(i.Filter=[i.Filter]):i.Filter=[],i.Filter.unshift(k("FlateDecode")),n=e.pako.deflate(n)),i.Length=n.length,t(new F(i)," stream",G),t.writeData(n),t(G,"endstream")}}),N=_(function(e){(e=this.props=e||{}).Type=k("Catalog")},{setPages:function(e){this.props.Pages=e}},F),$=_(function(){this.props={Type:k("Pages"),Kids:[],Count:0}},{addPage:function(e){this.props.Kids.push(e),this.props.Count++}},F),L=_(function(e){this.props={Type:k("Font"),Subtype:k("Type1"),BaseFont:k(e)},this._resourceName=k("F"+ ++q)},{encodeText:function(e){return new O(e+"")}},F),z=_(function(e,t,n){var i,r;(n=this.props=n||{}).Type=k("Font"),n.Subtype=k("Type0"),n.Encoding=k("Identity-H"),this._pdf=e,this._font=t,this._sub=t.makeSubset(),this._resourceName=k("F"+ ++q),i=t.head,this.name=t.psName,r=this.scale=t.scale,this.bbox=[i.xMin*r,i.yMin*r,i.xMax*r,i.yMax*r],this.italicAngle=t.post.italicAngle,this.ascent=t.ascent*r,this.descent=t.descent*r,this.lineGap=t.lineGap*r,this.capHeight=t.os2.capHeight||this.ascent,this.xHeight=t.os2.xHeight||0,this.stemV=0,this.familyClass=(t.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&7>=this.familyClass,this.isScript=10==this.familyClass,this.flags=(t.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(e){return new R(this._sub.encodeText(e+""))},getTextWidth:function(e,t){var n,i,r=0,o=this._font.cmap.getUnicodeEntry().codeMap;for(n=0;t.length>n;++n)i=o[t.charCodeAt(n)],r+=this._font.widthOfGlyph(i||0);return r*e/1e3},beforeRender:function(){var e,t,n,r,o=this,a=o._sub,s=a.render(),l=new H(D(s),{Length1:s.length},!0),d=o._pdf.attach(new F({Type:k("FontDescriptor"),FontName:k(o._sub.psName),FontBBox:o.bbox,Flags:o.flags,StemV:o.stemV,ItalicAngle:o.italicAngle,Ascent:o.ascent,Descent:o.descent,CapHeight:o.capHeight,XHeight:o.xHeight,FontFile2:o._pdf.attach(l)})),c=a.ncid2ogid,u=a.firstChar,h=a.lastChar,p=[];!function e(t,n){if(h>=t){var i=c[t];null==i?e(t+1):(n||p.push(t,n=[]),n.push(o._font.widthOfGlyph(i)),e(t+1,n))}}(u),e=new F({Type:k("Font"),Subtype:k("CIDFontType2"),BaseFont:k(o._sub.psName),CIDSystemInfo:new F({Registry:new O("Adobe"),Ordering:new O("Identity"),Supplement:0}),FontDescriptor:d,FirstChar:u,LastChar:h,DW:Math.round(o._font.widthOfGlyph(0)),W:p,CIDToGIDMap:o._pdf.attach(o._makeCidToGidMap())}),(t=o.props).BaseFont=k(o._sub.psName),t.DescendantFonts=[o._pdf.attach(e)],n=new j(u,h,a.subset),(r=new H(i(),null,!0)).data(n),t.ToUnicode=o._pdf.attach(r)},_makeCidToGidMap:function(){return new H(D(this._sub.cidToGidMap()),null,!0)}},F),j=_(function(e,t,n){this.firstChar=e,this.lastChar=t,this.map=n},{render:function(e){e.indent("/CIDInit /ProcSet findresource begin"),e.indent("12 dict begin"),e.indent("begincmap"),e.indent("/CIDSystemInfo <<"),e.indent("  /Registry (Adobe)"),e.indent("  /Ordering (UCS)"),e.indent("  /Supplement 0"),e.indent(">> def"),e.indent("/CMapName /Adobe-Identity-UCS def"),e.indent("/CMapType 2 def"),e.indent("1 begincodespacerange"),e.indent("  <0000><ffff>"),e.indent("endcodespacerange");var t=this;e.indent(t.lastChar-t.firstChar+1," beginbfchar"),e.withIndent(function(){var n,i;for(n=t.firstChar;t.lastChar>=n;++n)i=t.map[n],e.indent("<",d(n.toString(16),4),">","<",d(i.toString(16),4),">")}),e.indent("endbfchar"),e.indent("endcmap"),e.indent("CMapName currentdict /CMap defineresource pop"),e.indent("end"),e.indent("end")}}),B=_(function(e,t){this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._annotations=[],this._font=null,this._fontSize=null,this._contextStack=[],(t=this.props=t||{}).Type=k("Page"),t.ProcSet=[k("PDF"),k("Text"),k("ImageB"),k("ImageC"),k("ImageI")],t.Resources=new F({Font:new F(this._fontResources),ExtGState:new F(this._gsResources),XObject:new F(this._xResources),Pattern:new F(this._patResources),Shading:new F(this._shResources)}),t.Annots=this._annotations},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,n,i,r,o){(function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]})(arguments)||(this._matrix=function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],d=t[1],c=t[2],u=t[3];return[n*l+i*c,n*d+i*u,r*l+o*c,r*d+o*u,a*l+s*c+t[4],a*d+s*u+t[5]]}(arguments,this._matrix),this._out(e," ",t," ",n," ",i," ",r," ",o," cm"),this._out(G))},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);this.transform(t,n,-n,t,0,0)},beginText:function(){this._textMode=!0,this._out("BT",G)},endText:function(){this._textMode=!1,this._out("ET",G)},_requireTextMode:function(){if(!this._textMode)throw Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw Error("No font selected; call page.setFont() first")},setFont:function(e,t){this._requireTextMode(),null==e?e=this._font:e instanceof z||(e=this._pdf.getFont(e)),null==t&&(t=this._fontSize),this._fontResources[e._resourceName]=e,this._font=e,this._fontSize=t,this._out(e._resourceName," ",t," Tf",G)},setTextLeading:function(e){this._requireTextMode(),this._out(e," TL",G)},setTextRenderingMode:function(e){this._requireTextMode(),this._out(e," Tr",G)},showText:function(e,t){var n;this._requireFont(),e.length>1&&t&&this._font instanceof z&&(n=t/this._font.getTextWidth(this._fontSize,e)*100,this._out(n," Tz ")),this._out(this._font.encodeText(e)," Tj",G)},showTextNL:function(e){this._requireFont(),this._out(this._font.encodeText(e)," '",G)},addLink:function(e,t){var n=this._toPage({x:t.left,y:t.bottom}),i=this._toPage({x:t.right,y:t.top});this._annotations.push(new F({Type:k("Annot"),Subtype:k("Link"),Rect:[n.x,n.y,i.x,i.y],Border:[0,0,0],A:new F({Type:k("Action"),S:k("URI"),URI:new O(e)})}))},setStrokeColor:function(e,t,n){this._out(e," ",t," ",n," RG",G)},setOpacity:function(e){this.setFillOpacity(e),this.setStrokeOpacity(e),this._opacity*=e},setStrokeOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!0);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",G)}},setFillColor:function(e,t,n){this._out(e," ",t," ",n," rg",G)},setFillOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!1);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",G)}},gradient:function(e,t){var n,i,r;this.save(),this.rect(t.left,t.top,t.width,t.height),this.clip(),e.userSpace||this.transform(t.width,0,0,t.height,t.left,t.top),i=(n=T(this._pdf,e,t)).shading._resourceName,this._shResources[i]=n.shading,n.hasAlpha&&(r=n.opacity._resourceName,this._gsResources[r]=n.opacity,this._out("/"+r+" gs ")),this._out("/"+i+" sh",G),this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",G)},setLineWidth:function(e){this._out(e," w",G)},setLineCap:function(e){this._out(e," J",G)},setLineJoin:function(e){this._out(e," j",G)},setMitterLimit:function(e){this._out(e," M",G)},save:function(){this._contextStack.push(this._context()),this._out("q",G)},restore:function(){this._out("Q",G),this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",G)},lineTo:function(e,t){this._out(e," ",t," l",G)},bezier:function(e,t,n,i,r,o){this._out(e," ",t," ",n," ",i," ",r," ",o," c",G)},bezier1:function(e,t,n,i){this._out(e," ",t," ",n," ",i," y",G)},bezier2:function(e,t,n,i){this._out(e," ",t," ",n," ",i," v",G)},close:function(){this._out("h",G)},rect:function(e,t,n,i){this._out(e," ",t," ",n," ",i," re",G)},ellipse:function(e,t,n,i){function r(t){return e+t}function o(e){return t+e}var a=.5522847498307936;this.moveTo(r(0),o(i)),this.bezier(r(n*a),o(i),r(n),o(i*a),r(n),o(0)),this.bezier(r(n),o(-i*a),r(n*a),o(-i),r(0),o(-i)),this.bezier(r(-n*a),o(-i),r(-n),o(-i*a),r(-n),o(0)),this.bezier(r(-n),o(i*a),r(-n*a),o(i),r(0),o(i))},circle:function(e,t,n){this.ellipse(e,t,n,n)},stroke:function(){this._out("S",G)},nop:function(){this._out("n",G)},clip:function(){this._out("W n",G)},clipStroke:function(){this._out("W S",G)},closeStroke:function(){this._out("s",G)},fill:function(){this._out("f",G)},fillStroke:function(){this._out("B",G)},drawImage:function(e){var t=this._pdf.getImage(e);t&&(this._xResources[t._resourceName]=t,this._out(t._resourceName," Do",G))},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,G)})},_context:function(e){return null==e?{opacity:this._opacity,matrix:this._matrix}:(this._opacity=e.opacity,this._matrix=e.matrix,n)},_toPage:function(e){var t=this._matrix,n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5];return{x:n*e.x+r*e.y+a,y:i*e.x+o*e.y+s}}},F),U={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"},E("Times New Roman","serif"),E("Courier New","monospace"),E("Arial","sans-serif"),E("Helvetica","sans-serif"),E("Verdana","sans-serif"),E("Tahoma","sans-serif"),E("Georgia","sans-serif"),E("Monaco","monospace"),E("Andale Mono","monospace"),V.pdf={Document:o,BinaryStream:D,defineFont:function e(t,n){if(1==arguments.length)for(var i in t)c(t,i)&&e(i,t[i]);else switch(t=t.toLowerCase(),U[t]=n,t){case"dejavu sans":U["sans-serif"]=n;break;case"dejavu sans|bold":U["sans-serif|bold"]=n;break;case"dejavu sans|italic":U["sans-serif|italic"]=n;break;case"dejavu sans|bold|italic":U["sans-serif|bold|italic"]=n;break;case"dejavu serif":U.serif=n;break;case"dejavu serif|bold":U["serif|bold"]=n;break;case"dejavu serif|italic":U["serif|italic"]=n;break;case"dejavu serif|bold|italic":U["serif|bold|italic"]=n;break;case"dejavu mono":U.monospace=n;break;case"dejavu mono|bold":U["monospace|bold"]=n;break;case"dejavu mono|italic":U["monospace|italic"]=n;break;case"dejavu mono|bold|italic":U["monospace|bold|italic"]=n}},parseFontDef:function(e){var t,n=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i.exec(e);return n?(t=n[8]?parseInt(n[8],10):12,{italic:n[2]&&"italic"==n[2].toLowerCase(),variant:n[4],bold:n[6]&&/bold|700/i.test(n[6]),fontSize:t,lineHeight:n[12]?"normal"==n[12]?t:parseInt(n[12],10):null,fontFamily:n[14].split(/\s*,\s*/g).map(I)}):{fontSize:12,fontFamily:"sans-serif"}},getFontURL:function(e){function t(t){return e.bold&&(t+="|bold"),e.italic&&(t+="|italic"),t.toLowerCase()}var n,i,r,o=e.fontFamily;if(o instanceof Array)for(r=0;o.length>r&&(n=t(o[r]),!(i=U[n]));++r);else i=U[o.toLowerCase()];for(;"function"==typeof i;)i=i();return i||(i="Times-Roman"),i},loadFonts:J,loadImages:Z,getPaperOptions:r,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(window,parseFloat),function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function i(e){var t,n,i;for(this.raw=e,this.scalerType=e.readLong(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),t=this.tables={},n=0;this.tableCount>n;++n)t[(i={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()}).tag]=i}function r(e){function n(e,t){this.definition=t,this.length=t.length,this.offset=t.offset,this.file=e,this.rawData=e.raw,this.parse(e.raw)}for(var i in n.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)},e)t(e,i)&&(n[i]=n.prototype[i]=e[i]);return n}function o(e){this.font=e,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=function(){var e,t="",n=v+"";for(e=0;n.length>e;++e)t+=String.fromCharCode(n.charCodeAt(e)-48+65);return++v,t}()+"+"+this.font.psName}function a(e,t){var n,i,r,o=this,a=o.contents=_(e);if("ttcf"==a.readString(4)){if(!t)throw Error("Must specify a name for TTC files");for(a.readLong(),n=a.readLong(),i=0;n>i;++i)if(r=a.readLong(),a.saveExcursion(function(){a.offset(r),o.parse()}),o.psName==t)return;throw Error("Font "+t+" not found in collection")}a.offset(0),o.parse()}var s,l,d,c,u,h,p,f,g,m,v,b=window.kendo.pdf,_=b.BinaryStream;i.prototype={readTable:function(e,t){var n=this.tables[e];if(!n)throw Error("Table "+e+" not found in directory");return this[e]=n.table=new t(this,n)},render:function(e){var n,i,r,o,a,s,l,d=Object.keys(e).length,c=Math.pow(2,Math.floor(Math.log(d)/Math.LN2)),u=16*c,h=Math.floor(Math.log(c)/Math.LN2),p=16*d-u,f=_();for(a in f.writeLong(this.scalerType),f.writeShort(d),f.writeShort(u),f.writeShort(h),f.writeShort(p),n=16*d,i=f.offset()+n,r=null,o=_(),e)if(t(e,a))for(s=e[a],f.writeString(a),f.writeLong(this.checksum(s)),f.writeLong(i),f.writeLong(s.length),o.write(s),"head"==a&&(r=i),i+=s.length;i%4;)o.writeByte(0),i++;return f.write(o.get()),l=2981146554-this.checksum(f.get()),f.offset(r+8),f.writeLong(l),f.get()},checksum:function(e){e=_(e);for(var t=0;!e.eof();)t+=e.readLong();return 4294967295&t}},s=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.revision=e.readLong(),this.checkSumAdjustment=e.readLong(),this.magicNumber=e.readLong(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.read(8),this.modified=e.read(8),this.xMin=e.readShort_(),this.yMin=e.readShort_(),this.xMax=e.readShort_(),this.yMax=e.readShort_(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort_(),this.indexToLocFormat=e.readShort_(),this.glyphDataFormat=e.readShort_()},render:function(e){var t=_();return t.writeLong(this.version),t.writeLong(this.revision),t.writeLong(0),t.writeLong(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.write(this.created),t.write(this.modified),t.writeShort_(this.xMin),t.writeShort_(this.yMin),t.writeShort_(this.xMax),t.writeShort_(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort_(this.fontDirectionHint),t.writeShort_(e),t.writeShort_(this.glyphDataFormat),t.get()}}),l=r({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;this.offsets=0===t?e.times(this.length/2,function(){return 2*e.readShort()}):e.times(this.length/4,e.readLong)},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){var t,n=_(),i=e[e.length-1]>65535;for(t=0;e.length>t;++t)i?n.writeLong(e[t]):n.writeShort(e[t]/2);return{format:i?1:0,table:n.get()}}}),d=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort_(),this.minRightSideBearing=e.readShort_(),this.xMaxExtent=e.readShort_(),this.caretSlopeRise=e.readShort_(),this.caretSlopeRun=e.readShort_(),this.caretOffset=e.readShort_(),e.skip(8),this.metricDataFormat=e.readShort_(),this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=_();return t.writeLong(this.version),t.writeShort_(this.ascent),t.writeShort_(this.descent),t.writeShort_(this.lineGap),t.writeShort(this.advanceWidthMax),t.writeShort_(this.minLeftSideBearing),t.writeShort_(this.minRightSideBearing),t.writeShort_(this.xMaxExtent),t.writeShort_(this.caretSlopeRise),t.writeShort_(this.caretSlopeRun),t.writeShort_(this.caretOffset),t.write([0,0,0,0,0,0,0,0]),t.writeShort_(this.metricDataFormat),t.writeShort(e.length),t.get()}}),c=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.numGlyphs=e.readShort(),this.maxPoints=e.readShort(),this.maxContours=e.readShort(),this.maxComponentPoints=e.readShort(),this.maxComponentContours=e.readShort(),this.maxZones=e.readShort(),this.maxTwilightPoints=e.readShort(),this.maxStorage=e.readShort(),this.maxFunctionDefs=e.readShort(),this.maxInstructionDefs=e.readShort(),this.maxStackElements=e.readShort(),this.maxSizeOfInstructions=e.readShort(),this.maxComponentElements=e.readShort(),this.maxComponentDepth=e.readShort()},render:function(e){var t=_();return t.writeLong(this.version),t.writeShort(e.length),t.writeShort(this.maxPoints),t.writeShort(this.maxContours),t.writeShort(this.maxComponentPoints),t.writeShort(this.maxComponentContours),t.writeShort(this.maxZones),t.writeShort(this.maxTwilightPoints),t.writeShort(this.maxStorage),t.writeShort(this.maxFunctionDefs),t.writeShort(this.maxInstructionDefs),t.writeShort(this.maxStackElements),t.writeShort(this.maxSizeOfInstructions),t.writeShort(this.maxComponentElements),t.writeShort(this.maxComponentDepth),t.get()}}),u=r({parse:function(e){var t,n,i;e.offset(this.offset),n=(t=this.file).hhea,this.metrics=e.times(n.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}}),i=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics,this.leftSideBearings=e.times(i,e.readShort_)},forGlyph:function(e){var t=this.metrics,n=t.length;return n>e?t[e]:{advance:t[n-1].advance,lsb:this.leftSideBearings[e-n]}},render:function(e){var t,n,i=_();for(t=0;e.length>t;++t)n=this.forGlyph(e[t]),i.writeShort(n.advance),i.writeShort_(n.lsb);return i.get()}}),h=function(){function e(e){this.raw=e}function n(e){var t,n,r;for(this.raw=e,t=this.glyphIds=[],n=this.idOffsets=[];r=e.readShort(),n.push(e.offset()),t.push(e.readShort()),r&a;)e.skip(r&i?4:2),r&l?e.skip(8):r&s?e.skip(4):r&o&&e.skip(2)}var i,o,a,s,l;return e.prototype={compound:!1,render:function(){return this.raw.get()}},i=1,o=8,a=32,s=64,l=128,n.prototype={compound:!0,render:function(e){var t,n,i=_(this.raw.get());for(t=0;this.glyphIds.length>t;++t)n=this.glyphIds[t],i.offset(this.idOffsets[t]),i.writeShort(e[n]);return i.get()}},r({parse:function(){this.cache={}},glyphFor:function(i){var r,o,a,s,l,d,c,u,h,p,f,g=this.cache;return t(g,i)?g[i]:0===(o=(r=this.file.loca).lengthOf(i))?g[i]=null:(a=this.rawData,s=this.offset+r.offsetOf(i),d=(l=_(a.slice(s,o))).readShort_(),c=l.readShort_(),u=l.readShort_(),h=l.readShort_(),p=l.readShort_(),(f=g[i]=-1==d?new n(l):new e(l)).numberOfContours=d,f.xMin=c,f.yMin=u,f.xMax=h,f.yMax=p,f)},render:function(e,t,n){var i,r,o=_(),a=[];for(i=0;t.length>i;++i)r=e[t[i]],a.push(o.offset()),r&&o.write(r.render(n));return a.push(o.offset()),{table:o.get(),offsets:a}}})}(),p=function(){function e(e,t){this.text=e,this.length=e.length,this.platformID=t.platformID,this.platformSpecificID=t.platformSpecificID,this.languageID=t.languageID,this.nameID=t.nameID}return r({parse:function(t){var n,i,r,o,a,s,l;for(t.offset(this.offset),t.readShort(),n=t.readShort(),i=this.offset+t.readShort(),r=t.times(n,function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+i}}),o=this.strings={},a=0;r.length>a;++a)s=r[a],t.offset(s.offset),l=t.readString(s.length),o[s.nameID]||(o[s.nameID]=[]),o[s.nameID].push(new e(l,s));this.postscriptEntry=o[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(n){var i,r,o,a,s,l,d=this.strings,c=0;for(i in d)t(d,i)&&(c+=d[i].length);for(i in r=_(),o=_(),r.writeShort(0),r.writeShort(c),r.writeShort(6+12*c),d)if(t(d,i))for(a=6==i?[new e(n,this.postscriptEntry)]:d[i],s=0;a.length>s;++s)l=a[s],r.writeShort(l.platformID),r.writeShort(l.platformSpecificID),r.writeShort(l.languageID),r.writeShort(l.nameID),r.writeShort(l.length),r.writeShort(o.offset()),o.writeString(l.text);return r.write(o.get()),r.get()}})}(),f=function(){var e=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return r({parse:function(e){var t,n;switch(e.offset(this.offset),this.format=e.readLong(),this.italicAngle=e.readFixed_(),this.underlinePosition=e.readShort_(),this.underlineThickness=e.readShort_(),this.isFixedPitch=e.readLong(),this.minMemType42=e.readLong(),this.maxMemType42=e.readLong(),this.minMemType1=e.readLong(),this.maxMemType1=e.readLong(),this.format){case 65536:case 196608:break;case 131072:for(t=e.readShort(),this.glyphNameIndex=e.times(t,e.readShort),this.names=[],n=this.offset+this.length;e.offset()<n;)this.names.push(e.readString(e.readByte()));break;case 151552:t=e.readShort(),this.offsets=e.read(t);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort)}},glyphFor:function(t){switch(this.format){case 65536:return e[t]||".notdef";case 131072:var n=this.glyphNameIndex[t];return e.length>n?e[n]:this.names[n-e.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},render:function(t){var n,i,r,o,a,s,l;if(196608==this.format)return this.raw();for((n=_(this.rawData.slice(this.offset,32))).writeLong(131072),n.offset(32),i=[],r=[],o=0;t.length>o;++o)a=t[o],s=this.glyphFor(a),(l=e.indexOf(s))>=0?i.push(l):(i.push(e.length+r.length),r.push(s));for(n.writeShort(t.length),o=0;i.length>o;++o)n.writeShort(i[o]);for(o=0;r.length>o;++o)n.writeByte(r[o].length),n.writeString(r[o]);return n.get()}})}(),g=function(){function e(e,t){var n=this;n.platformID=e.readShort(),n.platformSpecificID=e.readShort(),n.offset=t+e.readLong(),e.saveExcursion(function(){var t,i,r,o,a,s,l,d,c,u,h,p;switch(e.offset(n.offset),n.format=e.readShort(),n.length=e.readShort(),n.language=e.readShort(),n.isUnicode=3==n.platformID&&1==n.platformSpecificID&&4==n.format||0===n.platformID&&4==n.format,n.codeMap={},n.format){case 0:for(t=0;256>t;++t)n.codeMap[t]=e.readByte();break;case 4:for(i=e.readShort()/2,e.skip(6),r=e.times(i,e.readShort),e.skip(2),o=e.times(i,e.readShort),a=e.times(i,e.readShort_),s=e.times(i,e.readShort),l=(n.length+n.offset-e.offset())/2,d=e.times(l,e.readShort),t=0;i>t;++t)for(c=o[t],u=r[t],h=c;u>=h;++h)0===s[t]?p=h+a[t]:0!==(p=d[s[t]/2-(i-t)+(h-c)]||0)&&(p+=a[t]),n.codeMap[h]=65535&p}})}function t(e,t){function i(n){return t[e[n]]}var r,o,a,s,l,d,c,u,h,p,f,g,m,v,b,k,w=n(e),y=[],x=[],C=null,S=null;for(r=0;w.length>r;++r)a=i(o=w[r])-o,(null==C||a!==S)&&(C&&x.push(C),y.push(o),S=a),C=o;for(C&&x.push(C),x.push(65535),y.push(65535),l=2*(s=y.length),d=2*Math.pow(2,Math.floor(Math.log(s)/Math.LN2)),c=Math.log(d/2)/Math.LN2,u=l-d,h=[],p=[],f=[],r=0;s>r;++r){if(g=y[r],m=x[r],65535==g){h.push(0),p.push(0);break}if(g-(v=i(g))>=32768)for(h.push(0),p.push(2*(f.length+s-r)),b=g;m>=b;++b)f.push(i(b));else h.push(v-g),p.push(0)}return(k=_()).writeShort(3),k.writeShort(1),k.writeLong(12),k.writeShort(4),k.writeShort(16+8*s+2*f.length),k.writeShort(0),k.writeShort(l),k.writeShort(d),k.writeShort(c),k.writeShort(u),x.forEach(k.writeShort),k.writeShort(0),y.forEach(k.writeShort),h.forEach(k.writeShort_),p.forEach(k.writeShort),f.forEach(k.writeShort),k.get()}return r({parse:function(t){var n,i=this,r=i.offset;t.offset(r),i.version=t.readShort(),n=t.readShort(),i.unicodeEntry=null,i.tables=t.times(n,function(){var n=new e(t,r);return n.isUnicode&&(i.unicodeEntry=n),n})},render:function(e,n){var i=_();return i.writeShort(0),i.writeShort(1),i.write(t(e,n)),i.get()},getUnicodeEntry:function(){if(!this.unicodeEntry)throw Error("Font doesn't have an Unicode encoding");return this.unicodeEntry}})}(),m=r({parse:function(e){e.offset(this.offset),this.version=e.readShort(),this.averageCharWidth=e.readShort_(),this.weightClass=e.readShort(),this.widthClass=e.readShort(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort_(),this.ySubscriptYSize=e.readShort_(),this.ySubscriptXOffset=e.readShort_(),this.ySubscriptYOffset=e.readShort_(),this.ySuperscriptXSize=e.readShort_(),this.ySuperscriptYSize=e.readShort_(),this.ySuperscriptXOffset=e.readShort_(),this.ySuperscriptYOffset=e.readShort_(),this.yStrikeoutSize=e.readShort_(),this.yStrikeoutPosition=e.readShort_(),this.familyClass=e.readShort_(),this.panose=e.times(10,e.readByte),this.charRange=e.times(4,e.readLong),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=e.times(2,e.readLong),this.version>1&&(this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()))},render:function(){return this.raw()}}),v=1e5,o.prototype={use:function(e){var t,n,i,r,o;if("string"==typeof e){for(n="",i=0;e.length>i;++i)t=this.use(e.charCodeAt(i)),n+=String.fromCharCode(t);return n}return(t=this.unicodes[e])||(t=this.next++,this.subset[t]=e,this.unicodes[e]=t,(r=this.font.cmap.getUnicodeEntry().codeMap[e])&&(this.ncid2ogid[t]=r,null==this.ogid2ngid[r]&&(o=this.nextGid++,this.ogid2ngid[r]=o,this.ngid2ogid[o]=r))),t},encodeText:function(e){return this.use(e)},glyphIds:function(){return n(this.ogid2ngid)},glyphsFor:function(e,t){var n,i,r;for(t||(t={}),n=0;e.length>n;++n)t[i=e[n]]||(r=t[i]=this.font.glyf.glyphFor(i))&&r.compound&&this.glyphsFor(r.glyphIds,t);return t},render:function(){var e,i,r,o,a,s,l,d=this.glyphsFor(this.glyphIds());for(e in d)t(d,e)&&(e=parseInt(e,10),null==this.ogid2ngid[e]&&(i=this.nextGid++,this.ogid2ngid[e]=i,this.ngid2ogid[i]=e));return r=n(this.ngid2ogid).map(function(e){return this.ngid2ogid[e]},this),a=(o=this.font).glyf.render(d,r,this.ogid2ngid),s=o.loca.render(a.offsets),this.lastChar=this.next-1,l={cmap:g.render(this.ncid2ogid,this.ogid2ngid),glyf:a.table,loca:s.table,hmtx:o.hmtx.render(r),hhea:o.hhea.render(r),maxp:o.maxp.render(r),post:o.post.render(r),name:o.name.render(this.psName),head:o.head.render(s.format),"OS/2":o.os2.render()},this.font.directory.render(l)},cidToGidMap:function(){var e,t,n,i=_(),r=0;for(e=this.firstChar;this.next>e;++e){for(;e>r;)i.writeShort(0),r++;(t=this.ncid2ogid[e])?(n=this.ogid2ngid[t],i.writeShort(n)):i.writeShort(0),r++}return i.get()}},a.prototype={parse:function(){var e=this.directory=new i(this.contents);this.head=e.readTable("head",s),this.loca=e.readTable("loca",l),this.hhea=e.readTable("hhea",d),this.maxp=e.readTable("maxp",c),this.hmtx=e.readTable("hmtx",u),this.glyf=e.readTable("glyf",h),this.name=e.readTable("name",p),this.post=e.readTable("post",f),this.cmap=e.readTable("cmap",g),this.os2=e.readTable("OS/2",m),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new o(this)}},b.TTFFont=a}(),function(e,t){"use strict";function n(t,n){function i(e,t,n){return n||(n=c),n.pdf&&null!=n.pdf[e]?n.pdf[e]:t}function r(){function r(e){var t,n,r,s,l=e.options,d=_(e),c=d.bbox;e=d.root,n=!1,"auto"==(t=i("paperSize",i("paperSize","auto"),l))&&(c?(t=[(r=c.getSize()).width,r.height],n=!0,s=c.getOrigin(),(d=new k.Group).transform(new w.Matrix(1,0,0,1,-s.x,-s.y)),d.append(e),e=d):t="A4"),a(e,o.addPage({paperSize:t,margin:i("margin",i("margin"),l),addMargin:n,landscape:i("landscape",i("landscape",!1),l)}),o)}if(!(--s>0)){var o=new e.pdf.Document({producer:i("producer"),title:i("title"),author:i("author"),subject:i("subject"),keywords:i("keywords"),creator:i("creator"),date:i("date")});u?t.children.forEach(r):r(t),n(o.render(),o)}}var s,l=[],d=[],c=t.options,u=i("multiPage");t.traverse(function(t){o({Image:function(e){d.indexOf(e.src())<0&&d.push(e.src())},Text:function(t){var n=e.pdf.parseFontDef(t.options.font),i=e.pdf.getFontURL(n);l.indexOf(i)<0&&l.push(i)}},t)}),s=2,e.pdf.loadFonts(l,r),e.pdf.loadImages(d,r)}function i(e,t){n(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function r(e,t){n(e,function(e){t(new Blob([e.get()],{type:"application/pdf"}))})}function o(e,t){var n=e[t.nodeType];return n?n.call.apply(n,arguments):t}function a(e,t,n){var i,r,a;e.options._pdfDebug&&t.comment("BEGIN: "+e.options._pdfDebug),i=e.transform(),r=e.opacity(),t.save(),null!=r&&1>r&&t.setOpacity(r),function(e,t){var n,i,r,o,a,s,l=e.stroke&&e.stroke();if(l){if(n=l.color){if(null==(n=b(n)))return;t.setStrokeColor(n.r,n.g,n.b),1!=n.a&&t.setStrokeOpacity(n.a)}if(null!=(i=l.width)){if(0===i)return;t.setLineWidth(i)}(r=l.dashType)&&t.setDashPattern(x[r],0),(o=l.lineCap)&&t.setLineCap(C[o]),(a=l.lineJoin)&&t.setLineJoin(S[a]),null!=(s=l.opacity)&&t.setStrokeOpacity(s)}}(e,t),function(e,t){var n,i,r=e.fill&&e.fill();if(r&&!(r instanceof k.Gradient)){if(n=r.color){if(null==(n=b(n)))return;t.setFillColor(n.r,n.g,n.b),1!=n.a&&t.setFillOpacity(n.a)}null!=(i=r.opacity)&&t.setFillOpacity(i)}}(e,t),function(e,t,n){var i=e.clip();i&&(c(i,t),t.clip())}(e,t),i&&(a=i.matrix(),t.transform(a.a,a.b,a.c,a.d,a.e,a.f)),o({Path:u,MultiPath:h,Circle:p,Arc:f,Text:g,Image:v,Group:m},e,t,n),t.restore(),e.options._pdfDebug&&t.comment("END: "+e.options._pdfDebug)}function s(e){return e&&(e instanceof k.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(null==e.width||e.width>0)&&(null==e.opacity||e.opacity>0))}function l(e,t,n,i){var r,o,a,s,l,d,c,u=e.fill();return u instanceof k.Gradient?(i?t.clipStroke():t.clip(),(r=u instanceof k.RadialGradient)?(o={x:u.center().x,y:u.center().y,r:0},a={x:u.center().x,y:u.center().y,r:u.radius()}):(o={x:u.start().x,y:u.start().y},a={x:u.end().x,y:u.end().y}),s={type:r?"radial":"linear",start:o,end:a,userSpace:u.userSpace(),stops:u.stops.elements().map(function(e){var t,n=e.offset();return n=/%$/.test(n)?parseFloat(n)/100:parseFloat(n),(t=b(e.color())).a*=e.opacity(),{offset:n,color:t}})},d=(l=e.rawBBox()).topLeft(),c=l.getSize(),l={left:d.x,top:d.y,width:c.width,height:c.height},t.gradient(s,l),!0):void 0}function d(e,t,n){s(e.fill())&&s(e.stroke())?l(e,t,0,!0)||t.fillStroke():s(e.fill())?l(e,t,0,!1)||t.fill():s(e.stroke())?t.stroke():t.nop()}function c(e,t,n){var i,r,o,a,s,l,d=e.segments;if(0!==d.length&&!function(e,t){var n,i,r=e.segments;if(4==r.length&&e.options.closed){for(n=[],i=0;r.length>i;++i){if(r[i].controlIn())return!1;n[i]=r[i].anchor()}if(n[0].y==n[1].y&&n[1].x==n[2].x&&n[2].y==n[3].y&&n[3].x==n[0].x||n[0].x==n[1].x&&n[1].y==n[2].y&&n[2].x==n[3].x&&n[3].y==n[0].y)return t.rect(n[0].x,n[0].y,n[2].x-n[0].x,n[2].y-n[0].y),!0}}(e,t)){for(r=0;d.length>r;++r)a=(o=d[r]).anchor(),i?(s=i.controlOut(),l=o.controlIn(),s&&l?t.bezier(s.x,s.y,l.x,l.y,a.x,a.y):t.lineTo(a.x,a.y)):t.moveTo(a.x,a.y),i=o;e.options.closed&&t.close()}}function u(e,t,n){c(e,t),d(e,t)}function h(e,t,n){var i,r=e.paths;for(i=0;r.length>i;++i)c(r[i],t);d(e,t)}function p(e,t,n){var i=e.geometry();t.circle(i.center.x,i.center.y,i.radius),d(e,t)}function f(e,t,n){var i,r=e.geometry().curvePoints();for(t.moveTo(r[0].x,r[0].y),i=1;r.length>i;)t.bezier(r[i].x,r[i++].y,r[i].x,r[i++].y,r[i].x,r[i++].y);d(e,t)}function g(t,n){var i,r=e.pdf.parseFontDef(t.options.font),o=t._position;t.fill()&&t.stroke()?i=y.fillAndStroke:t.fill()?i=y.fill:t.stroke()&&(i=y.stroke),n.transform(1,0,0,-1,o.x,o.y+r.fontSize),n.beginText(),n.setFont(e.pdf.getFontURL(r),r.fontSize),n.setTextRenderingMode(i),n.showText(t.content(),t._pdfRect?t._pdfRect.width():null),n.endText()}function m(e,t,n){var i,r;for(e._pdfLink&&t.addLink(e._pdfLink.url,e._pdfLink),i=e.children,r=0;i.length>r;++r)a(i[r],t,n)}function v(e,t){var n,i,r,o=e.src();o&&(i=(n=e.rect()).getOrigin(),r=n.getSize(),t.transform(r.width,0,0,-r.height,i.x,i.y+r.height),t.drawImage(o))}function b(t){var n=e.parseColor(t,!0);return n?n.toRGB():null}function _(e){function t(e){return a=!0,e}function n(e){return e.visible()&&e.opacity()>0&&(s(e.fill())||s(e.stroke()))}function i(e){var t,n,i=[];for(t=0;e.length>t;++t)null!=(n=r(e[t]))&&i.push(n);return i}function r(r){return function(e,t){var n,i=l,r=d;e.transform()&&(d=d.multiplyCopy(e.transform().matrix())),(n=e.clip())&&(n=n.bbox())&&(n=n.bbox(d),l=l?w.Rect.intersect(l,n):n);try{return t()}finally{l=i,d=r}}(r,function(){if(!(r instanceof k.Group||r instanceof k.MultiPath)){var a=function(e){if(null==l)return!1;var t=e.rawBBox().bbox(d);return l&&t&&(t=w.Rect.intersect(t,l)),t}(r);if(!a)return t(null);c=c?w.Rect.union(c,a):a}return o({Path:function(e){return 0!==e.segments.length&&n(e)?e:t(null)},MultiPath:function(e){if(!n(e))return t(null);var r=new k.MultiPath(e.options);return r.paths=i(e.paths),0===r.paths.length?t(null):r},Circle:function(e){return n(e)?e:t(null)},Arc:function(e){return n(e)?e:t(null)},Text:function(e){return/\S/.test(e.content())&&n(e)?e:t(null)},Image:function(e){return e.visible()&&e.opacity()>0?e:t(null)},Group:function(n){var r=new k.Group(n.options);return r.children=i(n.children),r._pdfLink=n._pdfLink,n===e||0!==r.children.length||n._pdfLink?r:t(null)}},r)})}var a,l=!1,d=w.Matrix.unit(),c=null;do{a=!1,e=r(e)}while(e&&a);return{root:e,bbox:c}}var k=e.drawing,w=e.geometry,y=e.pdf.TEXT_RENDERING_MODE,x={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},C={butt:0,round:1,square:2},S={miter:0,round:1,bevel:2};e.deepExtend(k,{exportPDF:function(e,n){var i,r=t.Deferred();for(i in n)e.options.set("pdf."+i,n[i]);return k.pdf.toDataURL(e,r.resolve),r.promise()},pdf:{toDataURL:i,toBlob:r,saveAs:function(t,n,o,a){window.Blob&&!e.support.browser.safari?r(t,function(t){e.saveAs({dataURI:t,fileName:n}),a&&a(t)}):i(t,function(t){e.saveAs({dataURI:t,fileName:n,proxyURL:o}),a&&a(t)})},toStream:n}})}(window.kendo,window.kendo.jQuery),function(e,t){e.PDFMixin={extend:function(e){e.events.push("pdfExport"),e.options.pdf=this.options,e.saveAsPDF=this.saveAsPDF,e._drawPDF=this._drawPDF,e._drawPDFShadow=this._drawPDFShadow},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",allPages:!1,landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},saveAsPDF:function(){var n,i=new t.Deferred,r=i.promise(),o={promise:r};if(!this.trigger("pdfExport",o))return(n=this.options.pdf).multiPage=n.allPages,this._drawPDF(i).then(function(t){return e.drawing.exportPDF(t,n)}).done(function(t){e.saveAs({dataURI:t,fileName:n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy,proxyTarget:n.proxyTarget}),i.resolve()}).fail(function(e){i.reject(e)}),r},_drawPDF:function(n){var i=new t.Deferred;return e.drawing.drawDOM(this.wrapper).done(function(e){var t={page:e,pageNumber:1,progress:1,totalPages:1};n.notify(t),i.resolve(t.page)}).fail(function(e){i.reject(e)}),i},_drawPDFShadow:function(n){var i,r,o;return n=n||{},i=this.wrapper,r=t("<div class='k-pdf-export-shadow'>"),n.width&&r.css({width:n.width,overflow:"visible"}),i.before(r),r.append(n.content||i.clone(!0,!0)),o=t.Deferred(),setTimeout(function(){e.drawing.drawDOM(r).always(function(){r.remove()}).then(function(){o.resolve.apply(o,arguments)}).fail(function(){o.reject.apply(o,arguments)}).progress(function(){o.progress.apply(o,arguments)})},15),o.promise()}}}(kendo,window.kendo.jQuery),function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function r(e){var t,n=" ";if(e){if(typeof e===Ke)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function o(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function a(t,n,i,r,o){var a,s=n;for(n=e(),o=o||1,a=0;o>a;a++)n=n.add(t.eq(s+a));"number"==typeof i?n[r?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function s(t,n,i){return e(t).add(n).find(i)}function l(e,t,n){var i,r,o,a;for(i=0,r=(n=ce(n)?n:[n]).length;r>i;i++)o=n[i],ae(o)&&o.click&&(a=o.name||o.text,t.on(Ve+Ce,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},pe(o.click,e)))}function d(e,t){var n=[];return c(e,t,n),n[n.length-1]}function c(e,t,n){var i,r;for(n=n||[],i=0;t.length>i;i++){if(e===t[i])return!0;if(t[i].columns){if(r=n.length,n.push(t[i]),c(e,t[i].columns,n))return!0;n.splice(r,n.length-r)}}return!1}function u(e,t){var n=t?N:H;e.hidden=!t,e.attributes=n(e.attributes),e.footerAttributes=n(e.footerAttributes),e.headerAttributes=n(e.headerAttributes)}function h(){return"none"!==this.style.display}function p(e){return f([e]).length>0}function f(e){return de(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=f(e.columns).length>0),t})}function g(t){return e(t).map(function(){return this.toArray()})}function m(t,n,i,r,o,a,s){var l,d,c=b(t),u=b([n]);c>u&&(l=Array(s+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),d=a.children(":not(.k-filter-row)"),e(Array(c-u+1).join("<tr>"+l+"</tr>")).insertAfter(d.last())),function(e,t){var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;i.length>n;n++)i[n].rowSpan+=t}(a,c-u),function t(n,i,r,o){var a,s,l=w(n[0],i),d=r.find(">tr:not(.k-filter-row):eq("+l.row+")>th.k-header"),c=e(),u=l.cell;for(a=0;n.length>a;a++)c=c.add(d.eq(u+a));for(o.find(">tr:not(.k-filter-row)").eq(l.row).append(c),s=[],a=0;n.length>a;a++)n[a].columns&&(s=s.concat(n[a].columns));s.length&&t(s,i,r,o)}(i,r,o,a)}function v(t,n,i){var r,o,a,s,l,d,c;for(i=i||0,o=n,n=R(n),a={},s=t.find(">tr:not(.k-filter-row)"),l=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},d=0,c=n.length;c>d;d++)a[(r=_(n[d],o)).row]||(a[r.row]=s.eq(r.row).find(".k-header").filter(l)),a[r.row].eq(r.cell).attr(Z.attr("index"),i+d);return n.length}function b(e){var t,n,i=0;for(t=0;e.length>t;t++)e[t].columns&&(n=b(e[t].columns))>i&&(i=n);return 1+i}function _(e,t,n,i){var r,o;for((i=i||{})[n=n||0]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=_(e,t[o].columns,n+1,i)))break;i[n]++}return r}function k(e,t,n,i){var r,o,a;return t.columns?(t=t.columns)[i?0:t.length-1]:(o=(r=d(t,e))?r.columns:e,0===(a=ue(t,o))&&i?a++:a!=o.length-1||i?(a>0||0===a&&!i)&&(a+=i?-1:1):a--,(t=function(e,t,n,i){var r,o=n.locked;do{r=e[t],t+=i?1:-1}while(r&&t>-1&&e.length>t&&r!=n&&!r.columns&&r.locked==o);return r}(o,a,n,ue(n,o)>a))&&t!=n&&t.columns?k(e,t,n,i):null)}function w(e,t,n,i){var r,o;for((i=i||{})[n=n||0]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=w(e,t[o].columns,n+1,i)))break;t[o].hidden||i[n]++}return r}function y(e){return x(I(e)).concat(x(E(e)))}function x(e){var t,n=[],i=[];for(t=0;e.length>t;t++)n.push(e[t]),e[t].columns&&(i=i.concat(e[t].columns));return i.length&&(n=n.concat(x(i))),n}function C(e){var t,n,i=0;for(n=0;e.length>n;n++)(t=e[n]).columns?i+=C(t.columns):t.hidden&&i++;return i}function S(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)(t=e[n].style.width)&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function T(t){var n,i=t.find("tr:not(.k-filter-row)"),r=i.filter(function(){return!e(this).children().length}).remove().length,o=i.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;o.length>n;n++)o[n].rowSpan>1&&(o[n].rowSpan-=r);return i.length-r}function D(e,t,n,i,r){var o,a,s,l=[];for(o=0,s=e.length;s>o;o++)(a=n[i]||[]).push(t.eq(r+o)),n[i]=a,e[o].columns&&(l=l.concat(e[o].columns));l.length&&D(l,t,n,i+1,r+e.length)}function I(e){return de(e,function(e){return e.locked})}function E(e){return de(e,function(e){return!e.locked})}function A(e){return de(e,function(e){return e.locked&&p(e)})}function O(e){var t,n=[];for(t=0;e.length>t;t++)e[t].hidden||(e[t].columns?n=n.concat(O(e[t].columns)):n.push(e[t]));return n}function R(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(R(e[t].columns)):n.push(e[t]);return n}function P(n){var i,r=n.find(">tr:not(.k-filter-row)"),o=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();return r.length>1&&(a=r.find("th").filter(o).filter(function(){return this.rowSpan>1})),a=a.add(r.last().find("th").filter(o)),i=Z.attr("index"),a.sort(function(n,r){var o,a;return n=e(n),r=e(r),o=n.attr(i),a=r.attr(i),o===t&&(o=e(n).index()),a===t&&(a=e(r).index()),(o=parseInt(o,10))>(a=parseInt(a,10))?1:a>o?-1:0}),a}function M(t){var n,i,r,o,a,s,l,d=t.closest("thead"),c=e().add(t),u=t.closest("tr"),h=d.find("tr:not(.k-filter-row)"),p=h.index(u)+t[0].rowSpan,f=Z.attr("colspan");if(h.length-1>=p){for(n=u.next(),u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),i=(i=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)")).filter(function(){return!this.rowSpan||1===this.rowSpan}),o=0,r=0;i.length>r;r++)o+=parseInt(i.eq(r).attr(f),10)||1;for(a=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),s=parseInt(t.attr(f),10)||1,r=0;s>r;)n=a.eq(r+o),c=c.add(M(n)),(l=parseInt(n.attr(f),10))>1&&(s-=l-1),r++}return c}function F(t,n,i,r){var o,a=t;return r&&t.empty(),ne?t[0].innerHTML=i:((o=document.createElement("div")).innerHTML="<table><tbody>"+i+"</tbody></table>",t=o.firstChild.firstChild,n[0].replaceChild(t,a[0]),t=e(t)),t}function H(e){var t=(e=e||{}).style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"))===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1")):t="display:none",se({},e,{style:t})}function N(e){var t=(e=e||{}).style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function $(t,n,i,r){var o,a=t.find(">colgroup"),s=le(n,function(e){return(o=e.width)&&0!==parseInt(o,10)?Z.format('<col style="width:{0}"/>',typeof o===Ke?o:o+"px"):"<col />"});(i||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),(a=e(Array(r+1).join('<col class="k-group-col">')+s.join(""))).is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),tt.msie&&8==tt.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function L(e){var t,n,i,r={};for(n=0,i=e.length;i>n;n++)r[(t=e[n]).value]=t.text;return r}function z(e,t,n){for(var i=0,r=e[i];r;){if((n||"none"!==r.style.display)&&!Je.test(r.className)&&--t<0){r.style.display=n?"":"none";break}r=e[++i]}}function j(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)(r=t.eq(o)).is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)-1):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),r=i.find("tr:first")),z(r[0].cells,n,!1))}function B(e){var t,n,i=[];for(n=0;e.length>n&&"field"in(t=e[n])&&"value"in t&&"items"in t;n++)i.push(t),t.hasSubgroups&&(i=i.concat(B(t.items)));return i}function U(e){var t,n,i=[];for(n=0;e.length>n&&"field"in(t=e[n])&&"value"in t&&"items"in t;n++)t.hasSubgroups&&(i=i.concat(U(t.items))),i.push(t.aggregates);return i}function V(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)(r=t.eq(o)).is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)+1):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)+1),$(i.find(">form>table"),f(void 0),!1,0),r=i.find("tr:first")),z(r[0].cells,n,!0))}function W(e,t,n){var i,r,o;for(n=n||1,r=0,o=e.length;o>r;r++)(i=e.eq(r).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)+n),(i=t.eq(r).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)-n)}function G(e){var t,n,i=0,r=e.find(">colgroup>col");for(t=0,n=r.length;n>t;t+=1)i+=parseInt(r[t].style.width,10);return i}function q(e,t){var n,i=e.offsetHeight,r=t.offsetHeight;i>r?n=i+"px":r>i&&(n=r+"px"),n&&(e.style.height=t.style.height=n)}function K(e,t){var n,i,r;if(typeof e===Ke&&e===t)return e;if(ae(e)&&e.name===t)return e;if(ce(e))for(n=0,i=e.length;i>n;n++)if(typeof(r=e[n])===Ke&&r===t||r.name===t)return r;return null}function Y(t,n){var i,r,o=tt.msie;if(!0===n){if(i=(t=e(t)).parent().scrollTop(),r=t.parent().scrollLeft(),o)try{t[0].setActive()}catch(e){t[0].focus()}else t[0].focus();t.parent().scrollTop(i),t.parent().scrollLeft(r)}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function Q(n){var i=e(n.currentTarget),r=i.is("th"),o=this.table.add(this.lockedTable),a=this.thead.parent().add(e(">table",this.lockedHeader)),s=e(n.target).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon"),l=i.closest("table")[0];if(!Z.support.touch)return s&&i.find(Z.roleSelector("filtercell")).length?(this.current(i),t):((l===o[0]||l===o[1]||l===a[0]||l===a[1])&&(e(n.target).is("a.k-i-collapse, a.k-i-expand")||(this.options.navigatable&&this.current(i),(r||!s)&&setTimeout(function(){it&&e(Z._activeElement()).hasClass("k-widget")||Y(l,!0)}),r&&n.preventDefault())),t)}function X(e,t,i){return'<tr role="row" class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function J(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var Z=window.kendo,ee=Z.ui,te=Z.data.DataSource,ne=Z.support.tbodyInnerHtml,ie=Z._activeElement,re=ee.Widget,oe=Z.keys,ae=e.isPlainObject,se=e.extend,le=e.map,de=e.grep,ce=e.isArray,ue=e.inArray,he=Array.prototype.push,pe=e.proxy,fe=Z.isFunction,ge=e.isEmptyObject,me=Math,ve="progress",be="error",_e=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ke="tr:not(.k-footer-template):visible",we=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ye=ke+":first>"+we+":first",xe="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Ce=".kendoGrid",Se="edit",Te="save",De="detailInit",Ie="filterMenuInit",Ee="columnMenuInit",Ae="change",Oe="columnHide",Re="columnShow",Pe="saveChanges",Me="dataBound",Fe="detailExpand",He="detailCollapse",Ne="k-state-focused",$e="k-state-selected",Le="k-grid-norecords",ze="columnResize",je="columnReorder",Be="columnLock",Ue="columnUnlock",Ve="click",We="height",Ge="tabIndex",qe="function",Ke="string",Ye=/(\}|\#)/gi,Qe=/#/gi,Xe="[\\x20\\t\\r\\n\\f]",Je=RegExp("(^|"+Xe+")(k-group-cell|k-hierarchy-cell)("+Xe+"|$)"),Ze=RegExp("(^|"+Xe+")(k-filter-row)("+Xe+"|$)"),et=!1,tt=Z.support.browser,nt=tt.msie&&7==tt.version,it=tt.msie&&8==tt.version,rt=re.extend({init:function(e,t){var n=this;re.fn.init.call(n,e,t),n._refreshHandler=pe(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Ae,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Ae,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0},destroy:function(){var e=this;re.fn.destroy.call(e),e.dataSource.unbind(Ae,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Ce),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=Z.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(et?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Ce+" mousewheel"+Ce,pe(n._wheelScroll,n)),Z.support.kineticScrollNeeded&&(n.drag=new Z.UserEvents(n.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+Ce,pe(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar,i=n.scrollTop(),r=Z.wheelDeltaY(t);!r||r>0&&0===i||0>r&&i+n[0].clientHeight==n[0].scrollHeight||(t.preventDefault(),e(t.currentTarget).one("wheel"+Ce,!1),this.verticalScrollbar.scrollTop(i+-r))}},_scroll:function(e){var t=this,n=!t.options.prefetch,i=e.currentTarget.scrollTop,r=t.dataSource,o=t.itemHeight,a=r.skip()||0,s=t._rangeStart||a,l=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>i),c=me.max(me.floor(i/o),0),u=me.max(c+me.floor(l/o),0);t._scrollTop=i-s*o,t._scrollbarTop=i,t._scrolling=n,t._fetch(c,u,d)||(t.wrapper[0].scrollTop=t._scrollTop),n&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout(function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())},100))},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,n=this._rangeStart||this.dataSource.skip()||0,i=this.dataSource.pageSize();return(t=e>n?e-n+1:n-e-1)>i?i:t},scrollIntoView:function(e){var t=this.wrapper[0],n=t.clientHeight,i=this._scrollTop||t.scrollTop,r=e[0].offsetTop,o=e[0].offsetHeight;i>r?this.verticalScrollbar[0].scrollTop-=n/2:r+o>=i+n&&(this.verticalScrollbar[0].scrollTop+=n/2)},_fetch:function(t,n,i){var r=this,o=r.dataSource,a=r.itemHeight,s=o.take(),l=r._rangeStart||o.skip()||0,d=me.floor(t/s)*s,c=!1;return l>t?(c=!0,l=me.max(0,n-s),r._scrollTop=(t-l)*a,r._page(l,s)):n>=l+s&&!i?(c=!0,l=t,r._scrollTop=a,r._page(l,s)):!r._fetching&&r.options.prefetch&&(d+s-.33*s>t&&t>s&&o.prefetch(d-s,s,e.noop),n>d+.33*s&&o.prefetch(d+s,s,e.noop)),c},fetching:function(){return this._fetching},_page:function(e,t){var n=this,i=!n.options.prefetch,r=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,r.inRange(e,t)?r.range(e,t):(i||Z.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){n._scrolling||(i&&Z.ui.progress(n.wrapper.parent(),!0),r.range(e,t))},100))},repaintScrollbar:function(){var e,t=this,n="",i=25e4,r=t.dataSource,o=Z.support.kineticScrollNeeded?0:Z.support.scrollbar(),a=t.wrapper[0],s=t.itemHeight=t.options.itemHeight()||0,l=a.scrollWidth>a.offsetWidth?o:0,d=r.total()*s+l;for(e=0;e<me.floor(d/i);e++)n+='<div style="width:1px;height:'+i+'px"></div>';d%i&&(n+='<div style="width:1px;height:'+d%i+'px"></div>'),t.verticalScrollbar.html(n),a.scrollTop=t._scrollTop},refresh:function(){var e=this,t=e.dataSource,n=e._rangeStart;Z.ui.progress(e.wrapper.parent(),!1),clearTimeout(e._timeout),e.repaintScrollbar(),e.drag&&e.drag.cancel(),n&&!e._fetching&&(e._rangeStart=t.skip(),1===t.page()&&(e.verticalScrollbar[0].scrollTop=0)),e._fetching=!1}}),ot={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},at=Z.ui.DataBoundWidget.extend({init:function(t,n,i){var r=this;n=ce(n)?{dataSource:n}:n,re.fn.init.call(r,t,n),i&&(r._events=i),et=Z.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._clipboard(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r._minScreenSupport(),r.options.autoBind?r.dataSource.fetch():r._footer(),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+Ce,r._resizeHandler)),Z.notify(r)},events:[Ae,"dataBinding","cancel",Me,Fe,He,De,Ie,Ee,Se,Te,"remove",Pe,ze,je,Re,Oe,Be,Ue],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:ot.create.text,cancel:ot.cancel.text,save:ot.save.text,destroy:ot.destroy.text,edit:ot.edit.text,update:ot.update.text,canceledit:ot.canceledit.text,excel:ot.excel.text,pdf:ot.pdf.text},noRecords:"No records available."}},destroy:function(){var t,n=this;n._angularItems("cleanup"),n._destroyColumnAttachments(),re.fn.destroy.call(n),this._navigatableTables=null,n._resizeHandler&&e(window).off("resize"+Ce,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&(n.selectable.destroy(),n.clearArea(),n.copyHandler&&(n.wrapper.off("keydown",n.copyHandler),n.unbind(n.copyHandler)),n.updateClipBoardState&&(n.unbind(n.updateClipBoardState),n.updateClipBoardState=null),n.clearAreaHandler&&n.wrapper.off("keyup",n.clearAreaHandler)),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(Ae,n._refreshHandler).unbind(ve,n._progressHandler).unbind(be,n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n.minScreenResizeHandler&&e(window).off("resize",n.minScreenResizeHandler),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(Ce),Z.destroy(n.wrapper),n.rowTemplate=n.altRowTemplate=n.lockedRowTemplate=n.lockedAltRowTemplate=n.detailTemplate=n.footerTemplate=n.groupFooterTemplate=n.lockedGroupFooterTemplate=n.noRecordsTemplate=null,n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},getOptions:function(){var n,i,r;return this.options.dataSource=null,(n=se(!0,{},this.options)).columns=Z.deepExtend([],this.columns),r=(i=this.dataSource).options.data&&i._data,i.options.data=null,n.dataSource=e.extend(!0,{},i.options),i.options.data=r,n.dataSource.data=r,n.dataSource.page=i.page(),n.dataSource.filter=i.filter(),n.dataSource.pageSize=i.pageSize(),n.dataSource.sort=i.sort(),n.dataSource.group=i.group(),n.dataSource.aggregate=i.aggregate(),n.dataSource.transport&&(n.dataSource.transport.dataSource=null),n.$angular=t,n},setOptions:function(e){var t,n,i,r,o=this.getOptions();Z.deepExtend(o,e),e.dataSource||(o.dataSource=this.dataSource),t=this.wrapper,n=this._events,i=this.element,this.destroy(),this.options=null,this._isMobile&&((r=t.closest(Z.roleSelector("pane")).parent()).after(t),r.remove(),t.removeClass("k-grid-mobile")),t[0]!==i[0]&&(t.before(i),t.remove()),i.empty(),this.init(i,o,n),this._setEvents(o)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,n,i=Z.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=R(i.columns||[]);for(t=0,n=r.length;n>t;t++)(e=r[t].command)&&l(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table")).length||(n=e("<table />").appendTo(t.element)),nt&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,r,o,a,s,l=this,d=l.options.columnResizeHandleWidth,c=l.options.scrollable,u=l.resizeHandle,h=this._groups();if(u&&l.lockedContent&&u.data("th")[0]!==n[0]&&(u.off(Ce).remove(),u=null),u||(u=l.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(u)),et)i=n.position().left,c&&(a=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=tt.msie?a.scrollLeft():0,i-=(tt.webkit?a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft():0)-(tt.mozilla?a[0].scrollWidth-a[0].offsetWidth-(a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft()):0)+s);else{for(i=n[0].offsetWidth,r=P(n.closest("thead")).filter(":visible"),o=0;r.length>o&&r[o]!=n[0];o++)i+=r[o].offsetWidth;h>0&&(i+=t.find(".k-group-cell:first").outerWidth()*h),l._hasDetails()&&(i+=t.find(".k-hierarchy-cell:first").outerWidth())}u.css({top:n.position().top,left:i-d,height:n.outerHeight(),width:3*d}).data("th",n).show(),u.off("dblclick"+Ce).on("dblclick"+Ce,function(){l._autoFitLeafColumn(n.data("index"))})},_positionColumnResizeHandle:function(){var t=this,n=t.options.columnResizeHandleWidth,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(i).on("mousemove"+Ce,"th",function(i){var r,a,s,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||((r=i.clientX)+(a=e(window).scrollLeft())>(s=l.offset().left+(et?0:this.offsetWidth))-n&&s+n>r+a?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():o(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(Ce).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new Z.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(n){var i=e(n.target);n.preventDefault(),i.addClass("k-column-active"),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=pe(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,r,a,s,l,d=this,c=d.options,u=this._isMobile,h=Z.support.mobileOS?0:Z.support.scrollbar();c.resizable&&(t=c.scrollable?d.wrapper.find(".k-grid-header-wrap:first"):d.wrapper,u?d._positionColumnResizeHandleTouch(t):d._positionColumnResizeHandle(t),d.resizable&&d.resizable.destroy(),d.resizable=new ee.Resizable(t.add(d.lockedHeader),{handle:(c.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+d.tbody.attr("clientHeight")})},start:function(t){var h,p,f,g;l=e(t.currentTarget).data("th"),u&&d._hideResizeHandle(),h=l.closest("table"),p=e.inArray(l[0],P(l.closest("thead")).filter(":visible")),f=(a=h.parent().hasClass("k-grid-header-locked"))?d.lockedTable:d.table,g=d.footer||e(),d.footer&&d.lockedContent&&(g=d.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),o(d.wrapper,"col-resize"),s=c.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")):f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")"),n=t.x.location,i=l.outerWidth(),r=a?f.children("tbody").outerWidth():d.tbody.outerWidth(),tt.webkit&&d.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var o,u,p,f,g,m,v=et?-1:1,b=i+t.x.location*v-n*v;c.scrollable?(a&&d.lockedFooter?o=d.lockedFooter.children("table"):d.footer&&(o=d.footer.find(">.k-grid-footer-wrap>table")),o&&o[0]||(o=e()),u=l.closest("table"),p=a?d.lockedTable:d.table,f=!1,g=d.wrapper.width()-h,m=b,a&&r-i+m>g&&(0>(m=i+(g-r-2*h))&&(m=b),f=!0),m>10&&(s.css("width",m),r&&(m=f?g-2*h:r+t.x.location*v-n*v,p.add(u).add(o).css("width",m),a||(d._footerWidth=m)))):b>10&&s.css("width",b)},resizeend:function(){var e,t,n,r=l.outerWidth();o(d.wrapper,""),tt.webkit&&d.wrapper.removeClass("k-grid-column-resizing"),i!=r&&(t=d.lockedHeader?d.lockedHeader.find("thead:first tr:first").add(d.thead.find("tr:first")):l.parent(),(n=l.attr(Z.attr("index")))||(n=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),(e=R(d.columns)[n]).width=r,d.trigger(ze,{column:e,oldWidth:i,newWidth:r}),d._applyLockedContainersWidth(),d._syncLockedContentHeight(),d._syncLockedHeaderHeight()),d._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:Z.guid(),filter:t.content?".k-grid-header:first "+xe:"table:first>.k-grid-header "+xe,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(Z.attr("title"))||t.attr(Z.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,n=this;n.options.reorderable&&(n.wrapper.data("kendoReorderable")&&n.wrapper.data("kendoReorderable").destroy(),t=function(e,t,i){var r=e[t],o=e[i],a=d(r,n.columns);return e=a?a.columns:n.columns,ue(o,e)},n.wrapper.kendoReorderable({draggable:n._draggableInstance,dragOverContainers:function(e,i){var r=y(n.columns);return!1!==r[e].lockable&&t(r,e,i)>-1},inSameContainer:function(i){return e(i.source).parent()[0]===e(i.target).parent()[0]&&t(y(n.columns),i.sourceIndex,i.targetIndex)>-1},change:function(e){var i=y(n.columns),r=i[e.oldIndex],o=t(i,e.oldIndex,e.newIndex);n.trigger(je,{newIndex:o,oldIndex:ue(r,i),column:r}),n.reorderColumn(o,r,"before"===e.position)}}))},_reorderHeader:function(e,t,n){var i,r,o,l,d=this,c=_(e[0],d.columns),u=_(t,d.columns),h=[];for(i=0;e.length>i;i++)e[i].columns&&(h=h.concat(e[i].columns));r=s(d.lockedHeader,d.thead,"tr:eq("+c.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),o=I(e).length,l=I([t]).length,h.length?(o>0&&0===l?m(e,t,h,d.columns,d.lockedHeader.find("thead"),d.thead,this._groups()):0===o&&l>0&&m(e,t,h,d.columns,d.thead,d.lockedHeader.find("thead"),this._groups()),(t.columns||c.cell-u.cell>1||u.cell-c.cell>1)&&(t=k(d.columns,t,e[0],n))&&d._reorderHeader(h,t,n)):o!==l&&function(e,t,n){var i=b(I(t)),r=b(E(t)),o=e.rowSpan;e.rowSpan=n?i>r?o-(i-r)||1:o+(r-i):i>r?o+(i-r):o-(r-i)||1}(r[c.cell],d.columns,o),a(r,c.cell,u.cell,n,e.length)},_reorderContent:function(t,n,i){var r,o,l,d,c=this,u=e(),h=t[0],p=f(t),g=ue(h,R(c.columns)),m=ue(n,R(c.columns)),v=ue(h,O(c.columns)),b=ue(n,O(c.columns)),_=I(c.columns).length,k=!!n.locked,w=c.footer||c.wrapper.find(".k-grid-footer"),y=r=b;for(n.hidden&&(k?(b=c.lockedTable.find("colgroup"),y=c.lockedHeader.find("colgroup"),r=e(c.lockedFooter).find(">table>colgroup")):(b=c.tbody.prev(),y=c.thead.prev(),r=w.find(".k-grid-footer-wrap").find(">table>colgroup"))),c._hasFilterRow()&&a(c.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length),a(s(c.lockedHeader,c.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),v,y,i,p.length),c.options.scrollable&&a(s(c.lockedTable,c.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),v,b,i,p.length),w&&w.length&&(a(s(c.lockedFooter,w.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),v,r,i,p.length),a(w.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length)),o=c.tbody.children(":not(.k-grouping-row,.k-detail-row)"),c.lockedTable&&(_>m?g>=_&&W(c.lockedTable.find(">tbody>tr.k-grouping-row"),c.table.find(">tbody>tr.k-grouping-row"),t.length):_>g&&W(c.table.find(">tbody>tr.k-grouping-row"),c.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),u=c.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),l=0,d=o.length;d>l;l+=1)a(s(u[l],o[l],">td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length)},_autoFitLeafColumn:function(e){this.autoFitColumn(R(this.columns)[e])},autoFitColumn:function(t){var n,i,r,o,a,s,l,d,c,u,f,g,m,v,b,_,k,w=this,y=w.options,C=w.columns,S=w.lockedHeader?P(w.lockedHeader.find(">table>thead")).filter(h).length:0,T="col:not(.k-group-col):not(.k-hierarchy-col)",D="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?C[t]:ae(t)?de(x(C),function(e){return e===t})[0]:de(x(C),function(e){return e.field===t})[0])&&p(t)){for(n=ue(t,R(C)),i=(r=(o=t.locked)?w.lockedHeader.children("table"):w.thead.parent()).find("[data-index='"+n+"']"),s=o?w.lockedTable:w.table,l=w.footer||e(),w.footer&&w.lockedContent&&(l=w.footer.children(o?".k-grid-footer-locked":".k-grid-footer-wrap")),d=l.find("table").first(),w.lockedHeader&&!o&&(n-=S),c=0;C.length>c&&C[c]!==t;c++)C[c].hidden&&n--;if(a=y.scrollable?r.find(T).eq(n).add(s.children("colgroup").find(T).eq(n)).add(d.find("colgroup").find(T).eq(n)):s.children("colgroup").find(T).eq(n),u=r.add(s).add(d),f=i.outerWidth(),a.width(""),u.css("table-layout","fixed"),a.width("auto"),u.addClass("k-autofitting"),u.css("table-layout",""),g=Math.ceil(Math.max(i.outerWidth(),s.find("tr:not(.k-grouping-row)").eq(0).children(D).eq(n).outerWidth(),d.find("tr").eq(0).children(D).eq(n).outerWidth()))+1,a.width(g),t.width=g,y.scrollable){for(m=r.find("col"),b=0,_=0,k=m.length;k>_;_+=1){if(!(v=m[_].style.width)||-1!=v.indexOf("%")){b=0;break}b+=parseInt(v,10)}b&&u.each(function(){this.style.width=b+"px"})}tt.msie&&8==tt.version&&(u.css("display","inline-table"),setTimeout(function(){u.css("display","table")},1)),u.removeClass("k-autofitting"),w.trigger(ze,{column:t,oldWidth:f,newWidth:g}),w._applyLockedContainersWidth(),w._syncLockedContentHeight(),w._syncLockedHeaderHeight()}},reorderColumn:function(e,n,i){var r,o,a=this,s=d(n,a.columns),l=s?s.columns:a.columns,c=ue(n,l),u=l[e],h=!!u.locked,p=I(a.columns).length;c!==e&&(n.locked||!h||1!=E(a.columns).length)&&(!n.locked||h||1!=p)&&(a._hideResizeHandle(),i===t&&(i=c>e),o=[n],a._reorderHeader(o,u,i),a.lockedHeader&&(T(a.thead),T(a.lockedHeader)),u.columns&&(u=(u=R(u.columns))[i?0:u.length-1]),n.columns&&(o=R(n.columns)),a._reorderContent(o,u,i),r=(r=!!n.locked)!=h,n.locked=h,l.splice(i?e:e+1,0,n),l.splice(e>c?c:c+1,1),a._templates(),a._updateColumnCellIndex(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),r&&(h?a.trigger(Be,{column:n}):a.trigger(Ue,{column:n})))},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=v(this.lockedHeader.find("thead"),I(this.columns))),v(this.thead,E(this.columns),e)},lockColumn:function(e){var t,n=this.columns;!(e="number"==typeof e?n[e]:de(n,function(t){return t.field===e})[0])||e.locked||e.hidden||(t=I(n).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;(e="number"==typeof e?n[e]:de(n,function(t){return t.field===e})[0])&&e.locked&&!e.hidden&&(t=I(n).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=R(I(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){(t=e(t)).is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(Z.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t=this,n=t.selectable&&t.selectable.options.multiple,i=t.options.editable,r=function(){var n=ie(),i=t._editContainer;!i||e.contains(i[0],n)||i[0]===n||e(n).closest(".k-animation-container").length||t.editable.end()&&t.closeCell()};i&&("incell"===t._editMode()?!1!==i.update&&t.wrapper.on(Ve+Ce,"tr:not(.k-grouping-row) > td",function(i){var r=e(this),o=t.lockedTable&&r.closest("table")[0]===t.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==t.tbody[0]&&!o||e(i.target).is(":input")||(t.editable?t.editable.end()&&(n&&e(ie()).blur(),t.closeCell(),t.editCell(r)):t.editCell(r))}).on("focusin"+Ce,function(){e.contains(this,ie())||(clearTimeout(t.timer),t.timer=null)}).on("focusout"+Ce,function(){t.timer=setTimeout(r,1)}):!1!==i.update&&t.wrapper.on(Ve+Ce,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(n){n.preventDefault(),t.editRow(e(this).closest("tr"))}),!1!==i.destroy?t.wrapper.on(Ve+Ce,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(n){n.preventDefault(),n.stopPropagation(),t.removeRow(e(this).closest("tr"))}):t.wrapper.on(Ve+Ce,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),t._confirmation()||e.preventDefault()}))},editCell:function(t){var n,i,r,o;t=e(t),i=R((n=this).columns)[n.cellIndex(t)],r=n._modelForContainer(t),n.closeCell(),!r||r.editable&&!r.editable(i.field)||i.command||!i.field||(n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,target:n,change:function(e){n.trigger(Te,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),o=t.parent().addClass("k-grid-edit-row"),n.lockedContent&&q(o[0],n._relatedRow(o).addClass("k-grid-edit-row")[0]),n.trigger(Se,{container:t,model:r}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?Z.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),function(e,t){var n,i,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&((n=e.offsetHeight)>(i=t.offsetHeight)?(r=t.rows[t.rows.length-1],Ze.test(r.className)&&(r=t.rows[t.rows.length-2]),o=n-i):(r=e.rows[e.rows.length-1],Ze.test(r.className)&&(r=e.rows[e.rows.length-2]),o=i-n),r.style.height=r.offsetHeight+o+"px")}(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(Ve+Ce,"a.k-grid-cancel",e._editCancelClickHandler),t.off(Ve+Ce,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(Ae,e._modelChangeHandler)},closeCell:function(t){var n,i,r,o,a=this,s=a._editContainer;s&&(n=s.closest("tr").attr(Z.attr("uid")),o=a.dataSource.getByUid(n),t&&a.trigger("cancel",{container:s,model:o})||(s.removeClass("k-edit-cell"),i=R(a.columns)[a.cellIndex(s)],r=s.parent().removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(s,i,o),s.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(s),a.lockedContent&&q(r.css("height","")[0],a._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},o=se({},Z.Template,i.options.templateSettings),a=Z.template(i._cellTmpl(t,r),o);r.count>0&&(a=pe(a,r.storage)),e.empty().html(a(n)),i.angular("compile",function(){return{elements:e,data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,r=i._editMode();"incell"!==r&&i.cancelRow(),t=e(t),i.lockedContent&&(t=t.add(i._relatedRow(t))),t=t.hide(),(n=i._modelForContainer(t))&&!i.trigger("remove",{row:t,model:n})?(i.dataSource.remove(n),("inline"===r||"popup"===r)&&i.dataSource.sync()):"incell"===r&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,r,o,a=this;n instanceof Z.data.ObservableObject?i=n:(n=e(n),i=a._modelForContainer(n)),r=a._editMode(),a.cancelRow(),i&&(a._attachModelChange(i),"popup"===r?a._createPopupEditor(i):"inline"===r?a._createInlineEditor(n,i):"incell"===r&&e(n).children(_e).each(function(){var n=e(this),r=R(a.columns)[n.index()];return(i=a._modelForContainer(n))&&(!i.editable||i.editable(r.field))&&r.field?(a.editCell(n),!1):t}),(o=a.editView?a.editView.element:a._editContainer)&&(this._editCancelClickHandler||(this._editCancelClickHandler=pe(this._editCancelClick,this)),o.on(Ve+Ce,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=pe(this._editUpdateClick,this)),o.on(Ve+Ce,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n,i=this,r=i.options.navigatable,o=i.editable.options.model,a=i.editView?i.editView.element:i._editContainer;t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:a,model:o})||(n=i.items().index(e(i.current()).parent()),i.cancelRow(),r&&(i.current(i.items().eq(n).children().filter(we).first()),Y(i.table,!0)))},_createPopupEditor:function(n){var i,r,o,a,s,l,d,c,u,h,p,f=this,g="<div "+Z.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],v=R(f.columns),b=f.options.editable,_=b.template,k=ae(b)?b.window:{},w=se({},Z.Template,f.options.templateSettings);if(k=k||{},_)for(typeof _===Ke&&(_=window.unescape(_)),g+=Z.template(_,w)(n),o=0,a=v.length;a>o;o++)(i=v[o]).command&&(c=K(i.command,"edit"))&&(r=c);else for(o=0,a=v.length;a>o;o++)(i=v[o]).command?i.command&&(c=K(i.command,"edit"))&&(r=c):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(h={storage:{},count:0},s=Z.template(f._cellTmpl(i,h),w),h.count>0&&(s=pe(s,h.storage)),g+='<div class="k-edit-field">'+s(n)+"</div>"):(m.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+Z.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));r&&ae(r)&&(r.text&&ae(r.text)&&(l=r.text.update,d=r.text.cancel),r.attr&&(u=r.attr)),f._isMobile?(g+="</div></div>",f.editView=f.pane.append("<div data-"+Z.ns+'role="view" data-'+Z.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+Z.ns+'role="header" class="k-header">'+f._createButton({name:"update",text:l,attr:u})+(k.title||"Edit")+f._createButton({name:"canceledit",text:d,attr:u})+"</div>"+g+"</div>"),p=f._editContainer=f.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"update",text:l,attr:u})+f._createButton({name:"canceledit",text:d,attr:u}),g+="</div></div></div>",p=f._editContainer=e(g).appendTo(f.wrapper).eq(0).kendoWindow(se({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),f.trigger("cancel",{container:p,model:n}))return i.preventDefault(),t;var r=f.items().index(e(f.current()).parent());f.cancelRow(),f.options.navigatable&&(f.current(f.items().eq(r).children().filter(we).first()),Y(f.table,!0))}}},k))),f.editable=f._editContainer.kendoEditable({fields:m,model:n,clearContainer:!1,target:f}).data("kendoEditable"),f._isMobile&&p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),f._openPopUpEditor(),f.trigger(Se,{container:p,model:n})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,r,o,a=this,s=[];a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){var t,l,d;r=e(this),(i=R(a.columns)[a.cellIndex(r)]).command||!i.field||n.editable&&!n.editable(i.field)?i.command&&(o=K(i.command,"edit"))&&(r.empty(),ae(o)&&(o.text&&ae(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(d=o.attr)),e(a._createButton({name:"update",text:t,attr:d})+a._createButton({name:"canceledit",text:l,attr:d})).appendTo(r)):(s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(Z.attr("container-for"),i.field),r.empty())}),a._editContainer=t,a.editable=new Z.ui.Editable(t.addClass("k-grid-edit-row"),{target:a,fields:s,model:n,clearContainer:!1}),t.length>1&&(q(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(Se,{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),t._displayRow("popup"!==t._editMode()?n:t.tbody.find("["+Z.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(Te,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,r,o=this,a=o._modelForContainer(t),s=t.hasClass("k-state-selected"),l=t.hasClass("k-alt");a&&(o.lockedContent&&(n=e((l?o.lockedAltRowTemplate:o.lockedRowTemplate)(a)),o._relatedRow(t.last()).replaceWith(n)),o.angular("cleanup",function(){return{elements:t.get()}}),i=e((l?o.altRowTemplate:o.rowTemplate)(a)),t.replaceWith(i),o.angular("compile",function(){return{elements:i.get(),data:[{dataItem:a}]}}),s&&o.options.selectable&&o.select(i.add(n)),n&&q(i[0],n[0]),(r=i.next()).hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i,r,o=this;return o._isMobile?(i=Z.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),r=e(i(t)).appendTo(o.view.element),(o._actionSheet=new Z.mobile.ui.ActionSheet(r,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){e(t.currentTarget).parent().hasClass("km-actionsheet-cancel")||o._removeRow(n)},popup:o._actionSheetPopupOptions})).open(n),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=!0===n||typeof n===Ke?t.options.messages.editable.confirmation:n.confirmation;return!1===i||null==i||(typeof i===qe&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===i?t.options.messages.editable.confirmation:i},e))},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(Pe)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,r,o=this,a=o.dataSource,s=o._editMode(),l=o.options.editable.createAt||"",d=a.pageSize(),c=a.view()||[];(o.editable&&o.editable.end()||!o.editable)&&("incell"!=s&&o.cancelRow(),e=a.indexOf(c[0]),"bottom"==l.toLowerCase()&&(e+=c.length,d&&!a.options.serverPaging&&c.length>=d&&(e-=1)),0>e&&(e=a.page()>a.totalPages()?(a.page()-1)*d:0),n=(t=a.insert(e,{})).uid,r=(i=(o.lockedContent?o.lockedTable:o.table).find("tr["+Z.attr("uid")+"="+n+"]")).children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(o._firstEditableColumnIndex(i)),"inline"===s&&i.length?o.editRow(i):"popup"===s?o.editRow(t):r.length&&o.editCell(r),"bottom"==l.toLowerCase()&&o.lockedContent&&(o.lockedContent[0].scrollTop=o.content[0].scrollTop=o.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,n,i,r=R(this.columns),o=this._modelForContainer(e);for(n=0,i=r.length;i>n;n++)if(t=r[n],o&&(!o.editable||o.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&((t=n.wrapper.find(".k-grid-toolbar")).length||(fe(r)||(r=typeof r===Ke?r:n._toolbarTmpl(r).replace(Qe,"\\#"),r=pe(Z.template(r),n)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),o&&!1!==o.create&&t.on(Ve+Ce,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(Ve+Ce,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(Ve+Ce,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}),t.on(Ve+Ce,".k-grid-excel",function(e){e.preventDefault(),n.saveAsExcel()}),t.on(Ve+Ce,".k-grid-pdf",function(e){e.preventDefault(),n.saveAsPDF()}))},_toolbarTmpl:function(e){var t,n,i="";if(ce(e))for(t=0,n=e.length;n>t;t++)i+=this._createButton(e[t]);return i},_createButton:function(e){var n,i=e.template||'<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',o=typeof e===Ke?e:e.name||e.text,a={className:ot[o]?ot[o].className:"k-grid-"+(o||"").replace(/\s/g,""),text:o,imageClass:"",attr:"",iconClass:""},s=this.options.messages.commands;if(!(o||ae(e)&&e.template))throw Error("Custom commands should have name specified");return ae(e)?(e.className&&ue(a.className,e.className.split(" "))<0?e.className+=" "+a.className:e.className===t&&(e.className=a.className),"edit"===o&&ae(e.text)&&((e=se(!0,{},e)).text=e.text.edit),e.attr&&(ae(e.attr)&&(e.attr=r(e.attr)),typeof e.attr===Ke&&(n=e.attr.match(/class="(.+?)"/))&&ue(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1])),a=se(!0,a,ot[o],{text:s[o]},e)):a=se(!0,a,ot[o],{text:s[o]}),Z.template(i)(a)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Ve+Ce,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(Ve+Ce,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(Ve+Ce,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,r=xe+"["+Z.attr("field")+"]",o=t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r;i&&!1!==i.enabled&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new ee.Groupable(n,se({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:o,filter:o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){var i,r,o,a,s,l,d,c;if(this.lockedContent){for(r=(i=this).table.add(i.lockedTable),o=e(t,r[0]),a=e(t,r[1]),s=n?I(i.columns).length:1,l=n?i.columns.length-s:1,d=[],c=0;o.length>c;c+=s)he.apply(d,o.slice(c,c+s)),he.apply(d,a.splice(0,l));return d}},_selectable:function(){var n,i,r,o,a=this,s=[],l=a._isLocked(),d=a.options.selectable;d&&(a.selectable&&a.selectable.destroy(),d=Z.ui.Selectable.parseOptions(d),n=d.multiple,i=d.cell,a._hasDetails()&&(s[s.length]=".k-detail-row"),(a.options.groupable||a._hasFooters())&&(s[s.length]=".k-grouping-row,.k-group-footer"),""!==(s=s.join(","))&&(s=":not("+s+")"),r=a.table,l&&(r=r.add(a.lockedTable)),o=">"+(i?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+s),a.selectable=new Z.ui.Selectable(r,{filter:o,aria:!0,multiple:n,change:function(){a.trigger(Ae)},useAllItems:l&&n&&i,relatedTarget:function(t){var n,r,o,s;if(!i&&l){for(r=e(),o=0,s=t.length;s>o;o++)n=a._relatedRow(t[o]),ue(n[0],t)<0&&(r=r.add(n));return r}},continuousItems:function(){return a._continuousItems(o,i)}}),a.options.navigatable&&r.on("keydown"+Ce,function(o){var s=a.current(),d=o.target;if(o.keyCode===oe.SPACEBAR&&e.inArray(d,r)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),s=i?s:s.parent(),l&&!i&&(s=s.add(a._relatedRow(s))),n)if(o.ctrlKey){if(s.hasClass($e))return s.removeClass($e),a.trigger(Ae),t}else a.selectable.clear();else a.selectable.clear();a.selectable.value(s)}}))},_clipboard:function(){var e,t=this.options;t.selectable&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+Ce+" keydown"+Ce,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+Ce,ke+">"+we,pe(Q,e)),e.copyHandler=pe(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).focus().select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=pe(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelection:function(t){t instanceof i.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t,n,i,r,o,a,s=this,l=s.select(),d="\t",c=s.options.allowCopy;return e.isPlainObject(c)&&c.delimeter&&(d=c.delimeter),t="",l.length&&(l.eq(0).is("tr")&&(l=l.find("td:not(.k-group-cell)")),l.filter(":visible"),n=[],i=this.columns.length,r=s._isLocked()&&I(s.columns).length,o=!0,e.each(l,function(t,a){var l,d,c;l=(a=e(a)).closest("tr").index(),d=a.index(),d-=a.prevAll(":hidden").length,r&&o&&(o=e.contains(s.lockedTable[0],a[0])),s._groups()&&o&&(d-=s._groups()),i>(d=o?d:d+r)&&(i=d),c=a.text(),n[l]||(n[l]=[]),n[l][d]=c}),a=n.length,n=e.each(n,function(e,t){t&&(n[e]=t.slice(i),a>e&&(a=e))}),e.each(n.slice(a),function(e,n){t+=n?n.join(d)+"\r\n":"\r\n"})),t},clearArea:function(t){this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(this.options.navigatable?e(this.current()).closest("table").focus():this.table.focus()),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=pe(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e,n,i,r=this.columns,o=!1,a=window.innerWidth>0?window.innerWidth:screen.width;for(e=0;r.length>e;e++)(i=(n=r[e]).minScreenWidth)!==t&&null!==i&&(o=!0,i>a?this.hideColumn(n):this.showColumn(n));return o},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(i=(n=t.closest(this.table.add(this.lockedTable))).find(">tbody>tr").index(t),(n=n[0]===this.table[0]?r:this.table).find(">tbody>tr").eq(i)):t},clearSelection:function(){this.selectable.clear(),this.trigger(Ae)},select:function(n){var i=this,r=i.selectable;return(n=e(n)).length?(r.options.multiple||(r.clear(),n=n.first()),i._isLocked()&&(n=n.add(n.map(function(){return i._relatedRow(this)}))),r.value(n),t):r.value()},_updateCurrentAttr:function(t,n){var i,r=e(t).data("headerId");e(t).removeClass(Ne).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant"),r?(r=r.replace(this._cellId,""),e(t).attr("id",r)):e(t).removeAttr("id"),n.data("headerId",n.attr("id")).attr("id",this._cellId).addClass(Ne).closest("table").attr("aria-activedescendant",this._cellId),n.closest("tr").hasClass("k-grouping-row")||n.hasClass("k-header")?n.attr("aria-describedby",this._cellId):((i=this.columns[this.cellIndex(n)])&&(r=i.headerAttributes.id),n.attr("aria-describedby",r+" "+this._cellId)),this._current=n},_scrollCurrent:function(){var t,n,i,r,o,a,s=this._current,l=this.options.scrollable;s&&l&&(i=(n=(t=s.parent()).closest("table").parent()).is(".k-grid-content-locked,.k-grid-header-locked"),r=n.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),o=e(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0],r&&(l.virtual?(a=Math.max(ue(t[0],this._items(t.parent())),0),this._rowVirtualIndex=this.virtualScrollable.itemIndex(a),this.virtualScrollable.scrollIntoView(t)):this._scrollTo(this._relatedRow(t)[0],o)),this.lockedContent&&(this.lockedContent[0].scrollTop=o.scrollTop),i||this._scrollTo(s[0],o))},current:function(t){var n=this._current;return(t=e(t)).length&&(n&&n[0]===t[0]||(this._updateCurrentAttr(n,t),this._scrollCurrent())),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Ne),this._current=null)},_scrollTo:function(t,n){var i,r=t.tagName.toLowerCase(),o="td"===r||"th"===r,a=t[o?"offsetLeft":"offsetTop"],s=t[o?"offsetWidth":"offsetHeight"],l=n[o?"scrollLeft":"scrollTop"],d=n[o?"clientWidth":"clientHeight"],c=a+s,u=0,h=0,p=0;et&&o&&(i=e(t).closest("table")[0],tt.msie?h=i.offsetLeft:tt.mozilla&&(p=i.offsetLeft-Z.support.scrollbar())),u=(l=Math.abs(l+h-p))>a?a:c>l+d?d>=s?c-d:a:l,u=Math.abs(u+h)+p,n[o?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var t,n,i,r=this;r.options.navigatable&&(t=r.table.add(r.lockedTable),n=r.thead.parent().add(e(">table",r.lockedHeader)),i=t,r.options.scrollable&&(i=i.add(n),n.attr(Ge,-1)),this._navigatableTables=i,i.off("mousedown"+Ce+" focus"+Ce+" focusout"+Ce+" keydown"+Ce),n.on("keydown"+Ce,pe(r._openHeaderMenu,r)).find("a.k-link").attr("tabIndex",-1),t.attr(Ge,me.max(t.attr(Ge)||0,0)).on("mousedown"+Ce+" keydown"+Ce,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),i.on(Z.support.touch?"touchstart"+Ce:"mousedown"+Ce,ke+">"+we,pe(Q,r)).on("focus"+Ce,pe(r._tableFocus,r)).on("focusout"+Ce,pe(r._tableBlur,r)).on("keydown"+Ce,pe(r._tableKeyDown,r)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==oe.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(Ge,-1),e.attr(Ge,0)},_tableFocus:function(t){var n,i;Z.support.touch||(n=this.current(),i=e(t.currentTarget),n&&n.is(":visible")?n.addClass(Ne):this.current(i.find(ye)),this._setTabIndex(i))},_tableBlur:function(){var e=this.current();e&&e.removeClass(Ne)},_tableKeyDown:function(n){var i,r=this.current(),o=this.virtualScrollable&&this.virtualScrollable.fetching(),a=e(n.target),s=!n.isDefaultPrevented()&&!a.is(":button,a,:input,a>.k-icon");return o?(n.preventDefault(),t):((r=r||e(this.lockedTable).add(this.table).find(ye)).length&&(i=!1,s&&n.keyCode==oe.UP&&(i=this._moveUp(r)),s&&n.keyCode==oe.DOWN&&(i=this._moveDown(r)),s&&n.keyCode==(et?oe.LEFT:oe.RIGHT)&&(i=this._moveRight(r,n.altKey)),s&&n.keyCode==(et?oe.RIGHT:oe.LEFT)&&(i=this._moveLeft(r,n.altKey)),s&&n.keyCode==oe.PAGEDOWN&&(i=this._handlePageDown()),s&&n.keyCode==oe.PAGEUP&&(i=this._handlePageUp()),(n.keyCode==oe.ENTER||n.keyCode==oe.F2)&&(i=this._handleEnterKey(r,n.currentTarget,a)),n.keyCode==oe.ESC&&(i=this._handleEscKey(r,n.currentTarget)),n.keyCode==oe.TAB&&(i=this._handleTabKey(r,n.currentTarget,n.shiftKey)),i&&(n.preventDefault(),n.stopPropagation())),t)},_moveLeft:function(e,t){var n,i,r=e.parent(),o=r.parent();return t?this.collapseRow(r):(i=o.find(ke).index(r),(n=this._prevHorizontalCell(o,e,i))[0]||(o=this._horizontalContainer(o),(n=this._prevHorizontalCell(o,e,i))[0]!==e[0]&&Y(o.parent(),!0)),this.current(n)),!0},_moveRight:function(e,t){var n,i,r=e.parent(),o=r.parent();return t?this.expandRow(r):(i=o.find(ke).index(r),(n=this._nextHorizontalCell(o,e,i))[0]||(o=this._horizontalContainer(o,!0),(n=this._nextHorizontalCell(o,e,i))[0]!==e[0]&&Y(o.parent(),!0)),this.current(n)),!0},_moveUp:function(e){var t=e.parent().parent(),n=this._prevVerticalCell(t,e);return n[0]||(t=this._verticalContainer(t,!0),(n=this._prevVerticalCell(t,e))[0]&&Y(t.parent(),!0)),this.current(n),!0},_moveDown:function(e){var t=e.parent().parent(),n=this._nextVerticalCell(t,e);return n[0]||(t=this._verticalContainer(t),(n=this._nextVerticalCell(t,e))[0]&&Y(t.parent(),!0)),this.current(n),!0},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,n,i){var r;return!(!this.options.editable||"incell"!=this._editMode()||t.is("th")||((r=e(ie()).closest(".k-edit-cell"))[0]&&r[0]!==t[0]&&(t=r),!(r=this._tabNext(t,n,i)).length||(this._handleEditing(t,r,r.closest("table")),0)))},_handleEscKey:function(t,n){var i,r=ie(),o="incell"==this._editMode();return function(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}(t)?(o?this.closeCell(!0):(i=e(t).parent().index(),r&&r.blur(),this.cancelRow(),i>=0&&this.current(this.items().eq(i).children(we).first())),tt.msie&&9>tt.version&&document.body.focus(),Y(n,!0),!0):!!t.has(r).length&&(Y(n,!0),!0)},_toggleCurrent:function(e){var t=e.parent();return!!t.is(".k-master-row,.k-grouping-row")&&(t.find(".k-icon:first").click(),!0)},_handleEnterKey:function(t,n,i){var r,o=this.options.editable,a=i.closest("[role=gridcell]");return i.is("table")||e.contains(t[0],i[0])||(t=a),t.is("th")?(t.find(".k-link").click(),!0):!((o||!this._toggleCurrent(t))&&((r=t.find(":kendoFocusable:first"))[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(r.focus(),0):!o||i.is(":button,.k-button,textarea")||(a[0]||(a=t),this._handleEditing(a,!1,n),0)))},_nextHorizontalCell:function(e,t,n){var i,r,o=t.nextAll(_e);return o.length||-1!=(i=e.find(ke)).index(t.parent())?o.first():t.hasClass("k-header")?(r=[],D([I(this.columns)[0]],M(i.eq(0).children().first()),r,0,0),r[n]?r[n][0]:t):t.parent().hasClass("k-filter-row")?i.last().children(_e).first():i.eq(n).children(_e).first()},_prevHorizontalCell:function(e,t,n){var i,r,o,a=t.prevAll(_e);return a.length||-1!=(i=e.find(ke)).index(t.parent())?a.first():t.hasClass("k-header")?(r=[],D([(o=I(this.columns))[o.length-1]],M(i.eq(0).children().last()),r,0,0),r[n]?r[n][0]:t):t.parent().hasClass("k-filter-row")?i.last().children(_e).last():i.eq(n).children(_e).last()},_currentDataIndex:function(e,n){var i,r=n.attr("data-index");return r?(i=I(this.columns).length)&&!e.closest("div").hasClass("k-grid-content-locked")[0]?r-i:r:t},_prevVerticalCell:function(t,n){var i,r=n.parent(),o=t.children(ke),a=o.index(r),s=this._currentDataIndex(t,n);if(s||n.hasClass("k-header"))return(i=function t(n){var i,r,o,a,s,l,d=n.closest("table"),c=e().add(n),u=n.closest("tr"),h=d.find("tr:not(.k-filter-row)"),p=h.index(u);if(p>0){for(i=h.eq(p-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),r=0,o=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(n),a=n.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),s=0;a.length>s;s++)r+=a[s].colSpan||1;for(o+=Math.max(r-1,0),r=0,s=0;i.length>s;s++)if(r+=(l=i.eq(s)).attr("colSpan")?l[0].colSpan:1,o>=s&&r>o){c=t(l).add(c);break}}return c}(n)).eq(i.length-2);if(s=r.children(_e).index(n),r.hasClass("k-filter-row"))return P(t).eq(s);if(-1==a){if(!(r=t.find(".k-filter-row"))[0])return P(t).eq(s)}else r=0===a?e():o.eq(a-1);return(i=r.children(_e)).eq(i.length>s?s:0)},_nextVerticalCell:function(e,n){var i,r=n.parent(),o=e.children(ke),a=o.index(r),s=this._currentDataIndex(e,n);return-1!=a&&s===t&&n.hasClass("k-header")?M(n).eq(1):(s=s?parseInt(s,10):r.children(_e).index(n),(i=(r=o.eq(-1==a?0:a+n[0].rowSpan)).children(_e)).eq(i.length>s?s:0))},_verticalContainer:function(e,t){var n=e.parent(),i=this._navigatableTables.length,r=Math.floor(i/2),o=ue(n[0],this._navigatableTables);return t&&(r*=-1),((o+=r)>=0||i>o)&&(n=this._navigatableTables.eq(o)),n.find(t?"thead":"tbody")},_horizontalContainer:function(e,t){var n,i,r=this._navigatableTables.length;return 2>=r?e:(n=e.parent(),i=ue(n[0],this._navigatableTables),i+=t?1:-1,!t||2!=i&&i!=r?!t&&(1==i||0>i)?e:this._navigatableTables.eq(i).find("thead, tbody"):e)},_tabNext:function(e,t,n){var i=!0,r=n?e.prevAll(_e+":first"):e.nextAll(":visible:first");return r.length||(r=e.parent(),this.lockedTable&&(i=n&&t==this.lockedTable[0]||!n&&t==this.table[0],r=this._relatedRow(r)),i&&(r=r[n?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),r=r.children(_e+(n?":last":":first"))),r},_handleEditing:function(n,i,r){var o,a,s=this,l=e(ie()),d=s._editMode(),c=tt.msie,u=c&&9>tt.version,h=s._editContainer;if(r=e(r),a="incell"==d?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),s.editable){if(e.contains(h[0],l[0])&&(tt.opera||u?l.change().triggerHandler("blur"):(l.blur(),c&&l.blur())),!s.editable)return Y(r),t;if(!s.editable.end())return s.current("incell"==d?h:h.children().filter(_e).first()),(o=h.find(":kendoFocusable:first")[0])&&o.focus(),t;"incell"==d?s.closeCell():(s.saveRow(),a=!0)}i&&s.current(i),u&&document.body.focus(),Y(r,!0),(!a&&!i||i)&&("incell"==d?s.editCell(s.current()):s.editRow(s.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css(We,n),t.css(We,"auto")),e._initMobile()},_initMobile:function(){var t,n=this.options,i=this;this._isMobile=!0===n.mobile&&Z.support.mobileOS||"phone"===n.mobile||"tablet"===n.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+Z.ns+'role="view" data-'+Z.ns+'init-widgets="false"></div>').parent(),this.pane=Z.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},n.height&&this.pane.element.parent().css(We,n.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())}))},_tbody:function(){var t,n=this.table;(t=n.find(">tbody")).length||(t=e("<tbody/>").appendTo(n)),this.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i,r,o=this,a=o.options.scrollable,s=!0!==a&&a.virtual&&!o.virtualScrollable,l=!Z.support.kineticScrollNeeded||s?Z.support.scrollbar():0;a&&((t=o.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(o.table)),t.css(et?"padding-left":"padding-right",a.virtual?l+1:l),n=e('<table role="grid" />'),nt&&n.attr("cellspacing",0),n.width(o.table[0].style.width),n.append(o.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),o.content=o.table.parent(),o.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(o.content=o.content.parent()),o.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(o.content=o.table.wrap('<div class="k-grid-content" />').parent()),s&&(o.virtualScrollable=new rt(o.content,{dataSource:o.dataSource,itemHeight:function(){return o._averageRowHeight()}})),o.scrollables=t.children(".k-grid-header-wrap"),(i=o.wrapper.find(".k-grid-footer")).length&&(o.scrollables=o.scrollables.add(i.children(".k-grid-footer-wrap"))),a.virtual?o.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Ce).bind("scroll"+Ce,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}):(o.content.unbind("scroll"+Ce).bind("scroll"+Ce,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}),(r=o.content.data("kendoTouchScroller"))&&r.destroy(),(r=Z.touchScroller(o.content))&&r.movable&&(o.touchScroller=r,r.movable.bind("change",function(e){o.scrollables.scrollLeft(-e.sender.x),o.lockedContent&&o.lockedContent.scrollTop(-e.sender.y)}),o.one(Me,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_renderNoRecordsContent:function(){var t,n=this;n.options.noRecords&&((t=n.table.parent().children("."+Le)).length&&t.remove(),n.dataSource&&n.dataSource.view().length||e(n.noRecordsTemplate({})).insertAfter(n.table))},_setContentWidth:function(t){var n,i=this,r="k-grid-content-expander",o=i.resizable;i.options.scrollable&&i.wrapper.is(":visible")&&(n=i.table.parent().children("."+r),i._setContentWidthHandler=pe(i._setContentWidth,i),i.dataSource&&i.dataSource.view().length?n[0]&&(n.remove(),o&&o.unbind("resize",i._setContentWidthHandler)):(n[0]||(n=e('<div class="k-grid-content-expander"></div>').appendTo(i.table.parent()),o&&o.bind("resize",i._setContentWidthHandler)),i.thead&&(n.width(i.thead.width()),t&&i.content.scrollLeft(t))),i._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,r=this._groups(),o=Z.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=S(a),d=S(s);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=i&&(l=i-3*o),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(d),this.virtualScrollable&&(i-=o),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),(e=this.footer.find(".k-grid-footer-wrap"))[0].style.width=n[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e=this,t=e.options,n=e.wrapper.innerHeight(),i=e.wrapper.children(".k-grid-header"),r=Z.support.scrollbar();t.scrollable&&e.wrapper.is(":visible")&&(n-=i.outerHeight(),e.pager&&(n-=e.pager.element.outerHeight()),t.groupable&&(n-=e.wrapper.children(".k-grouping-header").outerHeight()),t.toolbar&&(n-=e.wrapper.children(".k-grid-toolbar").outerHeight()),e.footerTemplate&&(n-=e.wrapper.children(".k-grid-footer").outerHeight()),function(e){var t;return!!e[0].style.height||(t=e.height(),e.height("auto"),t!=e.height()?(e.height(""),!0):(e.height(""),!1))}(e.wrapper)&&(n>2*r?(e.lockedContent&&(r=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?r:0,e.lockedContent.height(n-r)),e.content.height(n)):e.content.height(2*r+1)))},_averageRowHeight:function(){var e,t=this,n=t._items(t.tbody).length,i=t._rowHeight;return 0===n?i:(t._rowHeight||(t._rowHeight=i=t.table.outerHeight()/n,t._sum=i,t._measures=1),i!==(e=t.table.outerHeight()/n)&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),i)},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=ce(r)?{data:r}:r,ae(r)&&(se(r,{table:n.table,fields:n.columns}),e=i.pageable,ae(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(Ae,n._refreshHandler).unbind(ve,n._progressHandler).unbind(be,n._errorHandler):(n._refreshHandler=pe(n.refresh,n),n._progressHandler=pe(n._requestStart,n),n._errorHandler=pe(n._error,n)),n.dataSource=te.create(r).bind(Ae,n._refreshHandler).bind(ve,n._progressHandler).bind(be,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,o,a,s,l,d,c,u,h=this,p=h.tbody,f=t.model,g=h.tbody.find("tr["+Z.attr("uid")+"="+f.uid+"]"),m=g.hasClass("k-alt"),v=h._items(p).index(g),b=h.lockedContent;if(b&&(n=h._relatedRow(g)),g.add(n).children(".k-edit-cell").length&&!h.options.rowTemplate)g.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),(r=R(h.columns)[h.cellIndex(i)]).field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(h._displayCell(i,r,f),e('<span class="k-dirty"/>').prependTo(i)))});else if(!g.hasClass("k-grid-edit-row")){for(s=e().add(g),b&&(o=(m?h.lockedAltRowTemplate:h.lockedRowTemplate)(f),s=s.add(n),n.replaceWith(o)),h.angular("cleanup",function(){return{elements:s.get()}}),o=(m?h.altRowTemplate:h.rowTemplate)(f),g.replaceWith(o),o=h._items(p).eq(v),u=[{dataItem:f}],b&&(g=g.add(n),n=h._relatedRow(o)[0],q(o[0],n),o=o.add(n),u.push({dataItem:f})),h.angular("compile",function(){return{elements:o.get(),data:u}}),(a=h.options.selectable)&&g.hasClass("k-state-selected")&&h.select(o),d=s.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=o.children(":not(.k-group-cell,.k-hierarchy-cell)"),v=0,c=h.columns.length;c>v;v++)r=h.columns[v],i=l.eq(v),a&&d.eq(v).hasClass("k-state-selected")&&i.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(i);h.trigger("itemChange",{item:o,data:f,ns:ee})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&((t=n.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof Z.ui.Pager?i:new Z.ui.Pager(t,se({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i,r=this,o=r.dataSource.aggregates(),a="",s=r.footerTemplate,l=r.options,d=r.footer||r.wrapper.find(".k-grid-footer");s?(a=e(r._wrapFooter(s(o))),d.length?(n=a,r.angular("cleanup",function(){return{elements:d.get()}}),d.replaceWith(n),d=r.footer=n):d=r.footer=l.scrollable?l.pageable?a.insertBefore(r.wrapper.children("div.k-grid-pager")):a.appendTo(r.wrapper):a.insertBefore(r.tbody),r.angular("compile",function(){return{elements:d.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:le(r.columns,function(e){return{column:e,aggregate:o[e.field]}})}})):d&&!r.footer&&(r.footer=d),d.length&&(l.scrollable&&(t=d.attr("tabindex",-1).children(".k-grid-footer-wrap"),r.scrollables=r.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),r._footerWidth&&d.find("table").css("width",r._footerWidth),t&&(i=r.content.scrollLeft(),!0!==l.scrollable&&l.scrollable.virtual&&!r.virtualScrollable&&(i=r.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(i))),r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var n="",i=Z.support.mobileOS?0:Z.support.scrollbar();return this.options.scrollable?(n=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(nt?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),this._appendCols(n.find("table")),n.css(et?"padding-left":"padding-right",i),n):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,i,r,o,a,s,l,d,c=this,u=R(c.columns),h=c.options,p=h.columnMenu,f=de(c.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){c.trigger(Ee,{field:e.field,container:e.container})},v=function(e){Y(e.closest("table"),!0)},b=h.$angular;if(p)for("boolean"==typeof p&&(p={}),s=0,l=(a=P(c.thead)).length;l>s;s++)n=u[s],d=a.eq(s),n.command||!n.field&&!d.attr("data-"+Z.ns+"field")||((e=d.data("kendoColumnMenu"))&&e.destroy(),r=!1!==n.sortable&&!1!==p.sortable&&!1!==h.sortable&&se({},h.sortable,{compare:(n.sortable||{}).compare}),o=!(!h.filterable||!1===n.filterable||!1===p.filterable)&&se({pane:c.pane},h.filterable,n.filterable),n.filterable&&n.filterable.dataSource&&(o.forceUnique=!1,o.checkSource=n.filterable.dataSource),o&&(o.format=n.format),i={dataSource:c.dataSource,values:n.values,columns:p.columns,sortable:r,filterable:o,messages:p.messages,owner:c,closeCallback:v,init:m,pane:c.pane,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&!1!==n.lockable&&I(u).length>0},b&&(i.$angular=b),d.kendoColumnMenu(i))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i,r,o,a,s=this,l=R(s.columns),d=function(e){s.trigger(Ie,{field:e.field,container:e.container})},c=function(e){Y(e.closest("table"),!0)},u=s.options.filterable;if(u&&typeof u.mode==Ke&&-1==u.mode.indexOf("menu")&&(u=!1),u&&!s.options.columnMenu)for(i=0,r=(t=P(s.thead)).length;r>i;i++)n=t.eq(i),!1===l[i].filterable||l[i].command||!l[i].field&&!n.attr("data-"+Z.ns+"field")||((e=n.data("kendoFilterMenu"))&&e.destroy(),(e=n.data("kendoFilterMultiCheck"))&&e.destroy(),o=l[i].filterable,a=se({},u,o,{dataSource:s.dataSource,values:l[i].values,format:l[i].format,closeCallback:c,title:l[i].title||l[i].field,init:d,pane:s.pane}),o&&o.messages&&(a.messages=se(!0,{},u.messages,o.messages)),o&&o.dataSource&&(a.forceUnique=!1,a.checkSource=o.dataSource),o&&o.multi?n.kendoFilterMultiCheck(a):n.kendoFilterMenu(a))},_filterRow:function(){var t,n,i,r,o,a,s,l,d,c,u,h,p=this;if(p._hasFilterRow())for(t=R(p.columns),n=p.options.filterable,i=p.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),r=0;t.length>r;r++)if(a=t[r],s=p.options.filterable.operators,l=!1,d=e("<th/>"),c=a.field,a.hidden&&d.hide(),i.append(d),c&&!1!==a.filterable){if(u=a.filterable&&a.filterable.cell||{},(o=p.options.dataSource)instanceof te&&(o=p.options.dataSource.options),h=se(!0,{},n.messages),a.filterable&&se(!0,h,a.filterable.messages),!1===u.enabled){d.html("&nbsp;");continue}u.dataSource&&(o=u.dataSource,l=!0),a.filterable&&a.filterable.operators&&(s=a.filterable.operators),e("<span/>").attr(Z.attr("field"),c).kendoFilterCell({dataSource:p.dataSource,suggestDataSource:o,customDataSource:l,field:c,messages:h,values:a.values,template:u.template,delay:u.delay,inputWidth:u.inputWidth,suggestionOperator:u.suggestionOperator,minLength:u.minLength,dataTextField:u.dataTextField,operator:u.operator,operators:s,showOperators:u.showOperators}).appendTo(d)}else d.html("&nbsp;")},_sortable:function(){var e,t,n,i,r,o,a=this,s=R(a.columns),l=a.options.sortable;if(l){for(r=0,o=(i=P(a.thead)).length;o>r;r++)!1!==(e=s[r]).sortable&&!e.command&&e.field&&((t=(n=i.eq(r)).data("kendoColumnSorter"))&&t.destroy(),n.attr("data-"+Z.ns+"field",e.field).kendoColumnSorter(se({},l,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)"})));i=null}},_columns:function(t){var n,i,r,o=this,a=o.table,s=a.find("col"),l=o.options.dataSource;if(t=t.length?t:le(a.find("th"),function(t,n){var i=(t=e(t)).attr(Z.attr("sortable")),r=t.attr(Z.attr("filterable")),o=t.attr(Z.attr("type")),a=t.attr(Z.attr("groupable")),l=t.attr(Z.attr("field")),d=t.attr(Z.attr("title")),c=t.attr(Z.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,title:d,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==a,menu:c,template:t.attr(Z.attr("template")),width:s.eq(n).css("width")}}),n=!(o.table.find("tbody tr").length>0&&(!l||!l.transport)),o.options.scrollable){if(r=t,i=I(t),t=E(t),i.length>0&&0===t.length)throw Error("There should be at least one non locked column");(function(e,t){var n,i,r=0,o=e.find("th:not(.k-group-cell)");for(n=0,i=t.length;i>n;n++)t[n].locked&&(o.eq(n).insertBefore(o.eq(r)),o=e.find("th:not(.k-group-cell)"),r++)})(o.element.find("tr:has(th):first"),r),t=i.concat(t)}o.columns=function e(t,n,i){return le(t,function(t){var r,o;return(!p(t=typeof t===Ke?{field:t}:t)||i)&&(t.attributes=H(t.attributes),t.footerAttributes=H(t.footerAttributes),t.headerAttributes=H(t.headerAttributes),r=!0),t.columns&&(t.columns=e(t.columns,n,r)),o=Z.guid(),t.headerAttributes=se({id:o},t.headerAttributes),se({encoded:n,hidden:r},t)})}(t,n)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,i,o){var a,s,l=this,d=se({},Z.Template,l.options.templateSettings),c=t.length,u={storage:{},count:0},h=l._hasDetails(),p=[],f=l._groups();if(!e){for(e="<tr",i&&p.push("k-alt"),h&&p.push("k-master-row"),p.length&&(e+=' class="'+p.join(" ")+'"'),c&&(e+=" "+Z.attr("uid")+'="#='+Z.expr("uid",d.paramName)+'#"'),e+=" role='row'>",f>0&&!o&&(e+=n(f)),h&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),a=0;c>a;a++)(s=t[a]).template,e+="<td"+r(s.attributes)+" role='gridcell'>",e+=l._cellTmpl(s,u),e+="</td>";e+="</tr>"}return e=Z.template(e,d),u.count>0?pe(e,u.storage):e},_headerCellText:function(e){var t=se({},Z.Template,this.options.templateSettings),n=e.headerTemplate,i=typeof n,r=e.title||e.field||"";return i===qe?r=Z.template(n,t)({}):i===Ke&&(r=n),r},_cellTmpl:function(e,t){var n,i,r=this,o=se({},Z.Template,r.options.templateSettings),a=e.template,s=o.paramName,l=e.field,d="",c=e.format,u=typeof a,h=e.values;if(e.command){if(ce(e.command)){for(n=0,i=e.command.length;i>n;n++)d+=r._createButton(e.command[n]);return d.replace(Qe,"\\#")}return r._createButton(e.command).replace(Qe,"\\#")}return u===qe?(t.storage["tmpl"+t.count]=a,d+="#=this.tmpl"+t.count+"("+s+")#",t.count++):u===Ke?d+=a:h&&h.length&&ae(h[0])&&"value"in h[0]&&l?(d+="#var v ="+Z.stringify(L(h)).replace(Qe,"\\#")+"#",d+="#var f = v[",o.useWithBlock||(d+=s+"."),d+=l+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(Ye,"\\$1")+'",'),d+=l?(l=Z.expr(l,s))+"==null?'':"+l:"''",c&&(d+=")"),d+="#"),d},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),a=i.aggregate(),s=R(t.columns),l=R(I(t.columns)),d=n.scrollable?R(E(t.columns)):s;if(n.scrollable&&l.length){if(n.rowTemplate||n.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,d,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,d,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,d),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,d,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!ge(a)||!ge(a)&&!o.length||de(s,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(s,a,"footerTemplate","k-footer-template")),r&&de(s,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(d,a,"groupFooterTemplate","k-group-footer",l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,a,"groupFooterTemplate","k-group-footer"))),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,n,i,r=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",o={storage:{},count:0},a=e.extend({},Z.Template,this.options.templateSettings),s=a.paramName,l="";return"function"==(n=typeof(t=this.options.noRecords.template?this.options.noRecords.template:Z.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,r)))?(o.storage["tmpl"+o.count]=t,l+="#=this.tmpl"+o.count+"("+s+")#",o.count++):"string"===n&&(l+=t),i=Z.template(Z.format('<div class="{0}">{1}</div>',Le,l),a),o.count>0&&(i=e.proxy(i,o.storage)),i},_footerTmpl:function(e,t,i,o,a){var s,l,d,c,u,h=this,p=se({},Z.Template,h.options.templateSettings),f=p.paramName,g="",m={},v=0,b={},_=h._groups(),k=h.dataSource._emptyAggregates(t);for(g+='<tr class="'+o+'">',_>0&&!a&&(g+=n(_)),h._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),s=0,l=e.length;l>s;s++)c=typeof(d=(u=e[s])[i]),g+="<td"+r(u.footerAttributes)+">",d?(c!==qe&&(b=k[u.field]?se({},p,{paramName:f+"['"+u.field+"']"}):{},d=Z.template(d,b)),m["tmpl"+v]=d,g+="#=this.tmpl"+v+"("+f+")#",v++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=Z.template(g,p),v>0?pe(g,m):g},_detailTmpl:function(e){var t=this,i="",r=se({},Z.Template,t.options.templateSettings),o=r.paramName,a={},s=0,l=t._groups(),d=f(R(t.columns)).length,c=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===qe?(a["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+o+")#",s++):i+=e,i+="</td></tr>",i=Z.template(i,r),s>0?pe(i,a):i},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events[De]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==Ke&&-1!=t.mode.indexOf("row"),i=this.columns,r=e.grep(i,function(e){return!1===e.filterable});return i.length&&r.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&I(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(Ve+Ce,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,o=e(this),a=o.hasClass("k-plus"),s=o.closest("tr.k-master-row"),l=t.detailTemplate,d=t._hasDetails();return o.toggleClass("k-plus",!a).toggleClass("k-minus",a),i=s.next(),d&&!i.hasClass("k-detail-row")&&(r=t.dataItem(s),i=e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:r}]}}),t.trigger(De,{masterRow:s,detailRow:i,data:r,detailCell:i.find(".k-detail-cell")})),t.trigger(a?Fe:He,{masterRow:s,detailRow:i}),i.toggle(a),t._current&&t._current.attr("aria-expanded",a),n.preventDefault(),!1})},dataItem:function(t){if(!(t=e(t)[0]))return null;var n,i,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(i=a,n=0;a>n;n++)o.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,n){var i,o,a,s,l,d,c="",u=R(this.columns);for(i=0,s=e.length;s>i;i++)o=e[i].column||e[i],a=this._headerCellText(o),l="",d=ue(o,u),o.command?(c+="<th"+r(o.headerAttributes),n&&!e[i].colSpan&&(c+=" rowspan='"+n+"'"),d>-1&&(c+=Z.attr("index")+"='"+d+"'"),c+=">"+a+"</th>"):(o.field&&(l=Z.attr("field")+"='"+o.field+"' "),c+="<th role='columnheader' "+l,n&&!e[i].colSpan&&(c+=" rowspan='"+n+"'"),e[i].colSpan>1&&(c+='colspan="'+(e[i].colSpan-C(o.columns))+'" ',c+=Z.attr("colspan")+"='"+e[i].colSpan+"'"),o.title&&(c+=Z.attr("title")+'="'+o.title.replace('"',"&quot;").replace(/'/g,"'")+'" '),o.groupable!==t&&(c+=Z.attr("groupable")+"='"+o.groupable+"' "),o.aggregates&&o.aggregates.length&&(c+=Z.attr("aggregates")+"='"+o.aggregates+"'"),d>-1&&(c+=Z.attr("index")+"='"+d+"'"),c+=r(o.headerAttributes),c+=">"+a+"</th>");return c},_appendLockedColumnContent:function(){var t,n,i,r,o,a=this.columns,s=this.table.find("colgroup"),l=s.find("col:not(.k-group-col,.k-hierarchy-col)"),d=e(),c=0,u=0;for(t=0,n=a.length;n>t;t++)if(a[t].locked)if(p(a[t])){for(r=1,a[t].columns&&(r=R(a[t].columns).length-C(a[t].columns)),r=r||1,o=0;r>o;o++)d=d.add(l.eq(t+u+o-c));u+=r-1}else c++;i=e('<div class="k-grid-content-locked"><table'+(nt?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),s.detach(),i.find("colgroup").append(d),s.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,r=i.footer,o=r.find(".k-footer-template>td"),a=r.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),d=e(),c=e();for(d=d.add(o.filter(".k-group-cell")),t=0,n=R(I(i.columns)).length;n>t;t++)d=d.add(o.eq(t+l));for(c=c.add(a.filter(".k-group-col")),t=0,n=R(A(i.columns)).length;n>t;t++)c=c.add(a.eq(t+l));d.appendTo(s.find("tr")),c.appendTo(s.find("colgroup")),i.lockedFooter=s.prependTo(r)},_appendLockedColumnHeader:function(t){var n,i,r,o,a,s,l,d,c,u,h=this,f=this.columns,m=[],v=0,b=e(),_=h._hasFilterRow(),k=0,w=e(),y=0,x=e(),S=h.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),I=h.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),E=h.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),A=0;for(n=0,r=f.length;r>n;n++){if(f[n].locked){if(s=I.eq(n),y=R(f[n].columns||[]).length,p(f[n])){for(f[n].columns&&(l=y-C(f[n].columns)),l=l||1,d=0;l>d;d++)b=b.add(S.eq(n+A+d-v));A+=l-1}for(D([f[n]],M(s),m,0,0),y=y||1,c=0;y>c;c++)w=w.add(E.eq(k+c));k+=y}f[n].columns&&(v+=C(f[n].columns)),p(f[n])||v++}if(m.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table'+(nt?' cellspacing="0"':"")+"><colgroup/><thead>",i+=Array(m.length+1).join("<tr></tr>"),(S=(a=e(i+=(_?'<tr class="k-filter-row" />':"")+"</thead></table></div>")).find("colgroup")).append(h.thead.prev().find("col.k-group-col").add(b)),o=a.find("thead tr:not(.k-filter-row)"),n=0,r=m.length;r>n;n++)x=g(m[n]),o.eq(n).append(h.thead.find("tr:eq("+n+") .k-group-cell").add(x));(u=T(this.thead))>m.length&&function(e,t){var n,i,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;r.length>i;i++)(n=r[i].rowSpan)>1&&(r[i].rowSpan=n-t||1)}(a,u-m.length),a.find(".k-filter-row").append(h.thead.find(".k-filter-row .k-group-cell").add(w)),this.lockedHeader=a.prependTo(t),this.thead.find(".k-group-cell").remove(),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);Z.destroy(e),e.off(Ce).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i,r,o,a=this,s=a.columns,l=a._hasDetails()&&s.length,d=a._hasFilterRow(),c="",u=a.table.find(">thead"),h=a.element.find("thead:first").length>0;if(u.length||(u=e("<thead/>").insertBefore(a.tbody)),a.lockedHeader&&a.thead?((n=a.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),n=e(),a._removeLockedContainers()):n=a.element.find(h?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!n.length&&!(n=u.children().first()).length){for(i=[{rowSpan:1,cells:[],index:0}],a._prepareColumns(i,s),t=0;i.length>t;t++)c+="<tr>",l&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=a._createHeaderCells(i[t].cells,i[t].rowSpan),c+="</tr>";n=e(c)}d&&((r=e("<tr/>")).addClass("k-filter-row"),(l||n.find(".k-hierarchy-cell").length)&&r.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'),(o=(a.thead||u).find(".k-filter-row")).length&&(Z.destroy(o),o.remove()),u.append(r)),n.children().length?l&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(c="",l&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=a._createHeaderCells(s),n.html(c)),n.attr("role","row").find("th").addClass("k-header"),a.options.scrollable||u.addClass("k-grid-header"),n.find("script").remove().end().prependTo(u),a.thead&&a._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:u.find("th").get()}}),this.angular("compile",function(){return{elements:u.find("th").get(),data:le(s,function(e){return{column:e}})}}),a.thead=u.attr("role","rowgroup"),a._sortable(),a._filterable(),a._filterRow(),a._scrollable(),a._updateCols(),a._columnMenu(),this.options.scrollable&&I(this.columns).length&&(a._appendLockedColumnHeader(a.thead.closest(".k-grid-header")),a._appendLockedColumnContent(),a.lockedContent.bind("DOMMouseScroll"+Ce+" mousewheel"+Ce,pe(a._wheelScroll,a)),a._applyLockedContainersWidth()),a._updateColumnCellIndex(),a._updateFirstColumnClass(),a._resizable(),a._draggable(),a._reorderable(),a.groupable&&a._attachGroupable()},_updateFirstColumnClass:function(){var t,n,i=this,r=i.columns||[];i._hasDetails()&&r.length||i._groups()||(t=e(),n=i.thead.find(">tr:not(.k-filter-row):not(:first)"),r=E(r),n.length&&r[0]&&!r[0].columns&&(t=t.add(n)),i._isLocked()&&(n=i.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=I(i.columns),n.length&&r[0]&&!r[0].columns&&(t=t.add(n))),t.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,n,i){var r,o,a=i||e[e.length-1],s=e[a.index+1],l=0;for(r=0;t.length>r;r++)o={column:t[r],colSpan:0},a.cells.push(o),t[r].columns&&t[r].columns.length&&(s||(s={rowSpan:0,cells:[],index:e.length},e.push(s)),o.colSpan=t[r].columns.length,this._prepareColumns(e,t[r].columns,o,s),l+=o.colSpan-1,a.rowSpan=e.length-a.index);n&&(n.colSpan+=l)},_wheelScroll:function(t){var n,i,r;t.ctrlKey||(n=this.content,this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar),i=n.scrollTop(),(r=Z.wheelDeltaY(t))&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ce,!1),n.scrollTop(i+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&$(e=e||this.lockedHeader.find("table").add(this.lockedTable),O(A(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?$(e,O(function(e){return de(e,function(e){return!e.locked&&p(e)})}(this.columns)),this._hasDetails(),0):$(e,O(f(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n,i=this;for(t in e=e.toJSON(),n=!(i.table.find("tbody tr").length>0&&(!i.dataSource||!i.dataSource.transport)),e)i.columns.push({field:t,encoded:n,headerAttributes:{id:Z.guid()}});i._thead(),i._templates()}},_rowsHtml:function(e,t){var n,i,r="",o=t.rowTemplate,a=t.altRowTemplate;for(n=0,i=e.length;i>n;n++)r+=n%2?a(e[n]):o(e[n]),this._data.push(e[n]);return r},_groupRowHtml:function(e,t,n,i,r,o){var a,s,l=this,d="",c=e.field,u=de(R(l.columns),function(e){return e.field==c})[0]||{},h=u.groupHeaderTemplate,p=(u.title||c)+": "+function(e,t,n,i){var r=n&&n.length&&ae(n[0])&&"value"in n[0]?L(n)[e]:e;return r=null!=r?r:"",t?Z.format(t,r):!1===i?r:Z.htmlEncode(r)}(e.value,u.format,u.values,u.encoded),f=l._groupAggregatesDefaultObject||{},g=se({},f,e.aggregates),m=se({},{field:e.field,value:e.value,aggregates:g},e.aggregates[e.field]),v=r.groupFooterTemplate,b=e.items;if(h&&(p=typeof h===qe?h(m):Z.template(h)(m)),d+=i(t,n,p),e.hasSubgroups)for(a=0,s=b.length;s>a;a++)d+=l._groupRowHtml(b[a],o?t:t-1,n+1,i,r,o);else d+=l._rowsHtml(b,r);return v&&(d+=v(g)),d},collapseGroup:function(t){t=e(t);var n,i,r,o,a,s=this.options.groupable.showFooter?0:1,l=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1),r=0,o=(t=t.nextAll("tr")).length;o>r&&(i=(a=t.eq(r)).find(".k-group-cell").length,a.hasClass("k-grouping-row")?s++:a.hasClass("k-group-footer")&&s--,!(n>=i||a.hasClass("k-group-footer")&&0>s));r++)a.hide(),l.eq(r).hide()},expandGroup:function(t){t=e(t);var n,i,r,o,a,s=this.options.groupable.showFooter,l=e(),d=[],c=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0),o=0,a=(t=t.nextAll("tr")).length;a>o&&!(n>=(r=(i=t.eq(o)).find(".k-group-cell").length));o++)r!=n+1||i.hasClass("k-detail-row")||(i.show(),l.eq(o).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&this.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),l.eq(o+1).show())),i.hasClass("k-grouping-row")&&(s&&d.push(i.is(":visible")),c++),i.hasClass("k-group-footer")&&(s&&i.toggle(d.pop()),1==c?(i.show(),l.eq(o).show()):c--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,r=i.find("tr.k-filter-row").find("th.k-group-cell").length,o=i.find("tr:first").find("th.k-group-cell").length,a=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>o?(e(Array(t-o+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&a.find("th.k-group-cell").hide()):o>t&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=G(t.eq(0)),t.width(n._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable)).width(G(t.eq(0))))},hideColumn:function(n){var i,r,o,a,l,d,c,g,m,v=this,b=0,_=v.footer||v.wrapper.find(".k-grid-footer"),k=v.columns,y=v.lockedHeader?P(v.lockedHeader.find(">table>thead")).filter(h).length:0;if((n="number"==typeof n?k[n]:ae(n)?de(x(k),function(e){return e===n})[0]:de(x(k),function(e){return e.field===n})[0])&&p(n)){if(n.columns&&n.columns.length){for(l=w(n,k),u(n,!1),z(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+l.row+")>th"),l.cell,!1),r=0;n.columns.length>r;r++)this.hideColumn(n.columns[r]);return v.trigger(Oe,{column:n}),t}if(g=ue(n,f(R(k))),u(n,!1),v._setParentsVisibility(n,!1),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,d=g,v.lockedHeader&&y>g?m=v.lockedHeader.find(">table>thead"):d-=y,P(m).filter(h).eq(d)[0].style.display="none",z(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!1),_[0]&&(v._updateCols(_.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(_.find(">.k-grid-footer-locked>table")),z(_.find(".k-footer-template>td"),g,!1)),v.lockedTable&&y>g?j(v.lockedTable.find(">tbody>tr"),g):j(v.tbody.children(),g-y),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight(),v._syncLockedFooterHeight();else{for(r=0,c=(o=v.thead.prev().find("col")).length;c>r;r+=1){if(!(a=o[r].style.width)||-1!=a.indexOf("%")){b=0;break}b+=parseInt(a,10)}i=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),v._footerWidth=null,b&&(i.each(function(){this.style.width=b+"px"}),v._footerWidth=b),tt.msie&&8==tt.version&&(i.css("display","inline-table"),setTimeout(function(){i.css("display","table")},1))}v._updateFirstColumnClass(),v.trigger(Oe,{column:n})}},_setParentsVisibility:function(t,n){var i,r,o,a,l,d=this.columns,h=[],p=n?function(e){return f(e.columns).length&&e.hidden}:function(e){return!f(e.columns).length&&!e.hidden};if(c(t,d,h)&&h.length)for(i=h.length-1;i>=0;i--)o=_(r=h[i],d),a=s(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+o.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o.cell),p(r)&&(u(r,n),a[0].style.display=n?"":"none"),a.filter("["+Z.attr("colspan")+"]").length&&(l=parseInt(a.attr(Z.attr("colspan")),10),a[0].colSpan=l-C(r.columns)||1)},showColumn:function(n){var i,r,o,a,l,d,c,h,f,g,m=this,v=m.columns,b=m.footer||m.wrapper.find(".k-grid-footer"),k=m.lockedHeader?P(m.lockedHeader.find(">table>thead")).length:0;if((n="number"==typeof n?v[n]:ae(n)?de(x(v),function(e){return e===n})[0]:de(x(v),function(e){return e.field===n})[0])&&!p(n)){if(n.columns&&n.columns.length){for(d=_(n,v),u(n,!0),z(s(e(">table>thead",m.lockedHeader),m.thead,">tr:eq("+d.row+")>th"),d.cell,!0),i=0;n.columns.length>i;i++)this.showColumn(n.columns[i]);return m.trigger(Re,{column:n}),t}if(f=ue(n,R(v)),u(n,!0),m._setParentsVisibility(n,!0),m._templates(),m._updateCols(),m._updateLockedCols(),g=m.thead,l=f,m.lockedHeader&&k>f?g=m.lockedHeader.find(">table>thead"):l-=k,P(g).eq(l)[0].style.display="",z(s(e(">table>thead",m.lockedHeader),m.thead,">tr.k-filter-row>th"),f,!0),b[0]&&(m._updateCols(b.find(">.k-grid-footer-wrap>table")),m._updateLockedCols(b.find(">.k-grid-footer-locked>table")),z(b.find(".k-footer-template>td"),f,!0)),m.lockedTable&&k>f?V(m.lockedTable.find(">tbody>tr"),f):V(m.tbody.children(),f-k),m.lockedTable)m._updateTablesWidth(),m._applyLockedContainersWidth(),m._syncLockedContentHeight(),m._syncLockedHeaderHeight();else if(o=e(">.k-grid-header table:first,>.k-grid-footer table:first",m.wrapper).add(m.table),n.width){for(a=0,i=0,r=(h=m.thead.prev().find("col")).length;r>i;i+=1){if((c=h[i].style.width).indexOf("%")>-1){a=0;break}a+=parseInt(c,10)}m._footerWidth=null,a&&(o.each(function(){this.style.width=a+"px"}),m._footerWidth=a)}else o.width("");m._updateFirstColumnClass(),m.trigger(Re,{column:n})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),Z.ui.progress(t,e)},_resize:function(e,t){this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var t=ie();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,r=i.dataSource.view(),o=i.options.navigatable,a=e(i.current()),s=!1,l=(i.dataSource.group()||[]).length,d=i.content&&i.content.scrollLeft(),c=l+O(f(i.columns)).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(i._angularItems("cleanup"),o&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(s=a.is("th"),n=Math.max(i.cellIndex(a),0)),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(r[0],l)),c=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(r,c,l),i._renderLockedContent(r,c,l),i._footer(),i._renderNoRecordsContent(),i._setContentHeight(),i._setContentWidth(d),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.touchScroller?i.touchScroller.movable.trigger("change"):i.content.trigger("scroll")),i._restoreCurrent(n,s),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._angularItems("compile"),i.trigger(Me)))},_restoreCurrent:function(n,i){var r,o,a;n===t||0>n||(this._removeCurrent(),i?this.current(this.thead.find("th:not(.k-group-cell)").eq(n)):(r=0,this._rowVirtualIndex?r=this.virtualScrollable.position(this._rowVirtualIndex):n=0,o=e(),this.lockedTable&&(o=this.lockedTable.find(">tbody>tr").eq(r)),a=(o=o.add(this.tbody.children().eq(r))).find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n),this.current(a)),this._current&&Y(this._current.closest("table")[0],!0))},_angularItems:function(e){Z.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"===e&&this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var n=this;n._group&&n.angular(t,function(){return{elements:n.tbody.children(".k-grouping-row"),data:e.map(B(n.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var n=this;n._group&&n.groupFooterTemplate&&n.angular(t,function(){return{elements:n.tbody.children(".k-group-footer"),data:e.map(U(n.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,n){var i,r,o=this,a="",s=null!=o.lockedContent,l={rowTemplate:o.rowTemplate,altRowTemplate:o.altRowTemplate,groupFooterTemplate:o.groupFooterTemplate};if(t=s?t-O(A(o.columns)).length:t,n>0)for(t=s?t-n:t,o.detailTemplate&&t++,o.groupFooterTemplate&&(o._groupAggregatesDefaultObject=o.dataSource.aggregates()),i=0,r=e.length;r>i;i++)a+=o._groupRowHtml(e[i],t,0,s?J:X,l,s);else a+=o._rowsHtml(e,l);o.tbody=F(o.tbody,o.table,a,this.options.$angular)},_renderLockedContent:function(e,t,n){var i,r,o,a="",s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(o=this.lockedTable,n>0)for(t-=f(R(E(this.columns))).length,i=0,r=e.length;r>i;i++)a+=this._groupRowHtml(e[i],t,0,X,s);else a=this._rowsHtml(e,s);F(o.children("tbody"),o,a,this.options.$angular),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i,r,o,a=e[0].rows,s=a.length,l=t[0].rows,d=e.add(t),c=d.length,u=[];for(n=0;s>n&&l[n];n++)a[n].style.height&&(a[n].style.height=l[n].style.height=""),o=0,(i=a[n].offsetHeight)>(r=l[n].offsetHeight)?o=i:r>i&&(o=r),u.push(o);for(n=0;c>n;n++)d[n].style.display="none";for(n=0;s>n;n++)u[n]&&(a[n].style.height=l[n].style.height=u[n]+1+"px");for(n=0;c>n;n++)d[n].style.display=""}});Z.ExcelMixin&&Z.ExcelMixin.extend(at.prototype),Z.PDFMixin&&(Z.PDFMixin.extend(at.prototype),at.prototype._drawPDF=function(n){function i(){c&&a!==t?(d.unbind("change",r),d.one("change",function(){s.resolve(o)}),d.page(a)):s.resolve(o)}function r(){l._drawPDFShadow({width:l.wrapper.width()}).done(function(e){var t=d.page(),r=c?d.totalPages():1,a={page:e,pageNumber:t,progress:t/r,totalPages:r};n.notify(a),o.append(a.page),r>t?d.page(t+1):i()}).fail(function(e){s.reject(e)})}var o,a,s=new e.Deferred,l=this,d=l.dataSource,c=l.options.pdf.allPages;return this._initPDFProgress(n),o=new Z.drawing.Group,a=d.page(),c?(d.bind("change",r),d.page(1)):r(),s.promise()},at.prototype._initPDFProgress=function(t){var n,i=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");i.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(i),n=e("<div class='k-loading-pdf-progress'>").appendTo(i).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){n.value(e.progress)}).always(function(){Z.destroy(i),i.remove()})}),ee.plugin(at),ee.plugin(rt)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i="change",r="cancel",o="dataBound",a="dataBinding",s=n.ui.Widget,l=n.keys,d="progress",c="error",u="k-state-focused",h="k-state-selected",p="k-edit-item",f="edit",g="remove",m="save",v=".kendoListView",b=e.proxy,_=n._activeElement,k=n.ui.progress,w=n.data.DataSource,y=n.ui.DataBoundWidget.extend({init:function(t,i){var r=this;i=e.isArray(i)?{dataSource:i}:i,s.fn.init.call(r,t,i),i=r.options,r.wrapper=t=r.element,t[0].id&&(r._itemId=t[0].id+"_lv_active"),r._element(),r._dataSource(),r._templates(),r._navigatable(),r._selectable(),r._pageable(),r._crudHandlers(),r.options.autoBind&&r.dataSource.fetch(),n.notify(r)},events:[i,r,a,o,f,g,m],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(e){s.fn.setOptions.call(this,e),this._templates(),this.selectable&&(this.selectable.destroy(),this.selectable=null),this._selectable()},_templates:function(){var e=this.options;this.template=n.template(e.template||""),this.altTemplate=n.template(e.altTemplate||e.template),this.editTemplate=n.template(e.editTemplate||"")},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},dataItem:function(t){var i=n.attr("uid"),r=e(t).closest("["+i+"]").attr(i);return this.dataSource.getByUid(r)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){var e=this;e.dataSource.unbind(i,e._refreshHandler).unbind(d,e._progressHandler).unbind(c,e._errorHandler)},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=b(e.refresh,e),e._progressHandler=b(e._progress,e),e._errorHandler=b(e._error,e)),e.dataSource=w.create(e.options.dataSource).bind(i,e._refreshHandler).bind(d,e._progressHandler).bind(c,e._errorHandler)},_progress:function(){k(this.element,!0)},_error:function(){k(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var i,r,s,l,d,c=this,u=c.dataSource.view(),h="",p=c.template,f=c.altTemplate,g=_();if("itemchange"===(e=e||{}).action)return c._hasBindingTarget()||c.editable||(i=e.items[0],(s=c.items().filter("["+n.attr("uid")+"="+i.uid+"]")).length>0&&(l=s.index(),c.angular("cleanup",function(){return{elements:[s]}}),s.replaceWith(p(i)),(s=c.items().eq(l)).attr(n.attr("uid"),i.uid),c.angular("compile",function(){return{elements:[s],data:[{dataItem:i}]}}),c.trigger("itemChange",{item:s,data:i}))),t;if(!c.trigger(a,{action:e.action||"rebind",items:e.items,index:e.index})){for(c._angularItems("cleanup"),c._destroyEditable(),l=0,d=u.length;d>l;l++)h+=l%2?f(u[l]):p(u[l]);for(c.element.html(h),r=c.items(),l=0,d=u.length;d>l;l++)r.eq(l).attr(n.attr("uid"),u[l].uid).attr("role","option").attr("aria-selected","false");c.element[0]===g&&c.options.navigatable&&c.current(r.eq(0)),c._angularItems("compile"),c.trigger(o)}},_pageable:function(){var t,i,r=this,o=r.options.pageable;e.isPlainObject(o)&&(i=o.pagerId,t=e.extend({},o,{dataSource:r.dataSource,pagerId:null}),r.pager=new n.ui.Pager(e("#"+i),t))},_selectable:function(){var e,r,o=this,a=o.options.selectable,s=o.options.navigatable;a&&(e=n.ui.Selectable.parseOptions(a).multiple,o.selectable=new n.ui.Selectable(o.element,{aria:!0,multiple:e,filter:">*",change:function(){o.trigger(i)}}),s&&o.element.on("keydown"+v,function(n){if(n.keyCode===l.SPACEBAR){if(r=o.current(),n.target==n.currentTarget&&n.preventDefault(),e)if(n.ctrlKey){if(r&&r.hasClass(h))return r.removeClass(h),t}else o.selectable.clear();else o.selectable.clear();o.selectable.value(r)}}))},current:function(e){var n=this,i=n.element,r=n._current,o=n._itemId;return e===t?r:(r&&r[0]&&(r[0].id===o&&r.removeAttr("id"),r.removeClass(u),i.removeAttr("aria-activedescendant")),e&&e[0]&&(o=e[0].id||o,n._scrollTo(e[0]),i.attr("aria-activedescendant",o),e.addClass(u).attr("id",o)),n._current=e,t)},_scrollTo:function(t){var n,i,r=this,o=!1,a="scroll";"auto"==r.wrapper.css("overflow")||r.wrapper.css("overflow")==a?n=r.wrapper[0]:(n=window,o=!0),(i=function(i,r){var s=o?e(t).offset()[i.toLowerCase()]:t["offset"+i],l=t["client"+r],d=e(n)[a+i](),c=e(n)[r.toLowerCase()]();s+l>d+c?e(n)[a+i](s+l-c):d>s&&e(n)[a+i](s)})("Top","Height"),i("Left","Width")},_navigatable:function(){var t=this,i=t.options.navigatable,r=t.element;i&&(t._tabindex(),r.on("focus"+v,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+v,function(){t._current&&t._current.removeClass(u)}).on("keydown"+v,function(i){var o,a,s=i.keyCode,d=t.current(),c=e(i.target),u=!c.is(":button,textarea,a,a>.t-icon,input"),h=c.is(":text"),f=n.preventDefault,g=r.find("."+p),m=_();if(!(!u&&!h&&l.ESC!=s||h&&l.ESC!=s&&l.ENTER!=s))if(l.UP===s||l.LEFT===s)d&&(d=d.prev()),t.current(d&&d[0]?d:t._item("last")),f(i);else if(l.DOWN===s||l.RIGHT===s)d&&(d=d.next()),t.current(d&&d[0]?d:t._item("first")),f(i);else if(l.PAGEUP===s)t.current(null),t.dataSource.page(t.dataSource.page()-1),f(i);else if(l.PAGEDOWN===s)t.current(null),t.dataSource.page(t.dataSource.page()+1),f(i);else if(l.HOME===s)t.current(t._item("first")),f(i);else if(l.END===s)t.current(t._item("last")),f(i);else if(l.ENTER===s)0!==g.length&&(u||h)?(o=t.items().index(g),m&&m.blur(),t.save(),a=function(){t.element.trigger("focus"),t.current(t.items().eq(o))},t.one("dataBound",a)):""!==t.options.editTemplate&&t.edit(d);else if(l.ESC===s){if(0===(g=r.find("."+p)).length)return;o=t.items().index(g),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(o))}}),r.on("mousedown"+v+" touchstart"+v,">*",b(function(n){t.current(e(n.currentTarget)),e(n.target).is(":button,a,:input,a>.k-icon,textarea")||r.focus()},t)))},clearSelection:function(){this.selectable.clear(),this.trigger(i)},select:function(n){var i=this.selectable;return(n=e(n)).length?(i.options.multiple||(i.clear(),n=n.first()),i.value(n),t):i.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(n.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(){var e,t,i,r=this,o=r.editable,a=r.template;return o&&(o.element.index()%2&&(a=r.altTemplate),r.angular("cleanup",function(){return{elements:[o.element]}}),e=r._modelFromElement(o.element),r._destroyEditable(),i=o.element.index(),o.element.replaceWith(a(e)),(t=r.items().eq(i)).attr(n.attr("uid"),e.uid),r._hasBindingTarget()&&n.bind(t,e),r.angular("compile",function(){return{elements:[t],data:[{dataItem:e}]}})),!0},edit:function(e){var t,i,r=this,o=r._modelFromElement(e),a=o.uid;r.cancel(),i=(e=r.items().filter("["+n.attr("uid")+"="+a+"]")).index(),e.replaceWith(r.editTemplate(o)),t=r.items().eq(i).addClass(p).attr(n.attr("uid"),o.uid),r.editable=t.kendoEditable({model:o,clearContainer:!1,errorTemplate:!1,target:r}).data("kendoEditable"),r.trigger(f,{model:o,item:t})},save:function(){var e,t,n=this,i=n.editable;i&&(t=i.element,e=n._modelFromElement(t),i.end()&&!n.trigger(m,{model:e,item:t})&&(n._closeEditable(),n.dataSource.sync()))},remove:function(e){var t=this,n=t.dataSource,i=t._modelFromElement(e);t.editable&&(n.cancelChanges(t._modelFromElement(t.editable.element)),t._closeEditable()),t.trigger(g,{model:i,item:e})||(e.hide(),n.remove(i),n.sync())},add:function(){var e=this,t=e.dataSource,n=t.indexOf((t.view()||[])[0]);0>n&&(n=0),e.cancel(),t.insert(n,{}),e.edit(e.element.children().first())},cancel:function(){var e,t,n=this,i=n.dataSource;n.editable&&(e=n.editable.element,t=n._modelFromElement(e),n.trigger(r,{model:t,container:e})||(i.cancelChanges(t),n._closeEditable()))},_crudHandlers:function(){var t=this,i="click"+v;t.element.on(i,".k-edit-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.edit(r),i.preventDefault()}),t.element.on(i,".k-delete-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.remove(r),i.preventDefault()}),t.element.on(i,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(i,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){var e=this;s.fn.destroy.call(e),e._unbindDataSource(),e._destroyEditable(),e.element.off(v),e.pager&&e.pager.destroy(),n.destroy(e.element)}});n.ui.plugin(y)}(window.kendo.jQuery),function(e,t){function n(t){return e.map(r(t),function(e){return e.name}).join(", ")}function r(e){var t=e[0];return t.files?o(t.files):[{name:s(t.value),extension:a(t.value),size:null}]}function o(t){return e.map(t,function(e){return function(e){var t=e.name||e.fileName;return{name:_.htmlEncode(t),extension:a(t),size:e.size||e.fileSize,rawFile:e}}(e)})}function a(e){var t=e.match(x);return t?t[0]:""}function s(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,n){var i=_.guid();return e.map(t,function(e){return e.uid=n?_.guid():i,e})}function d(t){return!t.multiple&&e(".k-file",t.wrapper).length>1}function c(n,i,r){var o,a;return i._supportsRemove()?(o=n.data("fileNames"),a=e.map(o,function(e){return e.name}),i._submitRemove(a,r,function(e,t,r){i._removeFileEntry(n),i.trigger(D,{operation:"remove",files:o,response:e,XMLHttpRequest:r})},function(e){d(i)&&i._removeFileEntry(n),i.trigger(I,{operation:"remove",files:o,XMLHttpRequest:e}),y("Server response: "+e.responseText)}),t):(d(i)&&i._removeFileEntry(n),t)}function u(t,n,i){var r=!1,o="";try{o=e.parseJSON(h(t)),r=!0}catch(e){i()}r&&n(o)}function h(e){return(t===e||""===e)&&(e="{}"),e}function p(e){e.stopPropagation(),e.preventDefault()}function f(e,t,n,i){var r,o;e.on("dragenter"+t,function(){n(),o=new Date,r||(r=setInterval(function(){new Date-o>100&&(i(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){o=new Date})}function g(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function m(t){return e(t.target).closest(".k-file")}var v,b,_=window.kendo,k=_.ui.Widget,w=_.antiForgeryTokens,y=_.logToConsole,x=/\.([^\.]+)$/,C=".kendoUpload",S="select",T="upload",D="success",I="error",E="complete",A="cancel",O="progress",R="remove",P=k.extend({init:function(t,n){var i,r,o,a=this;k.fn.init.call(a,t,n),a.name=t.name,a.multiple=a.options.multiple,a.localization=a.options.localization,i=a.element,a.wrapper=i.closest(".k-upload"),0===a.wrapper.length&&(a.wrapper=a._wrapInput(i)),a._activeInput(i),a.toggle(a.options.enabled),r=a._ns=C+"-"+_.guid(),i.closest("form").on("submit"+r,e.proxy(a._onParentFormSubmit,a)).on("reset"+r,e.proxy(a._onParentFormReset,a)),a.options.async.saveUrl?(a._module=a._supportsFormData()?new b(a):new v(a),a._async=!0,(o=a.options.files).length>0&&a._renderInitialFiles(o)):a._module=new M(a),a._supportsDrop()&&a._setupDropZone(),a.wrapper.on("click",".k-upload-action",e.proxy(a._onFileAction,a)).on("click",".k-upload-selected",e.proxy(a._onUploadSelected,a)),a.element.val()&&a._onInputChange({target:a.element})},events:[S,T,D,I,E,A,O,R],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,n=t.element;k.fn.setOptions.call(t,e),t.multiple=t.options.multiple,n.attr("multiple",!!t._supportsMultiple()&&t.multiple),t.toggle(t.options.enabled)},enable:function(e){e=t===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(C),k.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var n=this,i=t.clone().val("");i.insertAfter(n.element).data("kendoUpload",n),e(n.element).hide().attr("tabindex","-1").removeAttr("id").off(C),n._activeInput(i),n.element.focus()}},_activeInput:function(t){var n=this,i=n.wrapper;n.element=t,t.attr("multiple",!!n._supportsMultiple()&&n.multiple).attr("autocomplete","off").on("click"+C,function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+C,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+C,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+C,e.proxy(n._onInputChange,n)).on("keydown"+C,e.proxy(n._onInputKeyDown,n))},_onInputKeyDown:function(e){var t=this.wrapper.find(".k-upload-action:first");e.keyCode===_.keys.TAB&&t.length>0&&(e.preventDefault(),t.focus())},_onInputChange:function(t){var n=this,i=e(t.target),r=l(n._inputFiles(i),n._isAsyncNonBatch());n.trigger(S,{files:r})?(n._addInput(i),i.remove()):n._module.onSelect({target:i},r)},_onDrop:function(t){var n=this,i=t.originalEvent.dataTransfer.files,r=l(o(i),n._isAsyncNonBatch());p(t),i.length>0&&(!n.multiple&&r.length>1&&r.splice(1,r.length-1),n.trigger(S,{files:r})||n._module.onSelect({target:e(".k-dropzone",n.wrapper)},r))},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var n,i,r=this,o=0;for(t=l(t,!0),o=0;t.length>o;o++)n=t[o],(i=r._enqueueFile(n.name,{fileNames:[n]})).addClass("k-file-success").data("files",[t[o]]),e(".k-progress",i).width("100%"),r.options.template||e(".k-upload-status",i).prepend("<span class='k-upload-pct'>100%</span>"),r._supportsRemove()&&r._fileAction(i,R)},_prepareTemplateData:function(e,t){var n=t.fileNames,i={},r=0,o=0;for(o=0;n.length>o;o++)r+=n[o].size;return i.name=e,i.size=r,i.files=t.fileNames,i},_prepareDefaultFileEntryTemplate:function(t,n){var i="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span><strong class='k-upload-status'></strong></li>");return 1==n.fileNames.length&&n.fileNames[0].extension&&(i=n.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+i)),r},_enqueueFile:function(t,n){var i,r,o,a,s=this,l=n.fileNames[0].uid,d=e(".k-upload-files",s.wrapper),c=s.options.template;return 0===d.length&&(d=e("<ul class='k-upload-files k-reset'></ul>").appendTo(s.wrapper),s.options.showFileList||d.hide(),s.wrapper.removeClass("k-upload-empty")),i=e(".k-file",d),c?(o=s._prepareTemplateData(t,n),c=_.template(c),(r=e("<li class='k-file'>"+c(o)+"</li>")).find(".k-upload-action").addClass("k-button k-button-bare"),s.angular("compile",function(){return{elements:r,data:[o]}})):r=s._prepareDefaultFileEntryTemplate(t,n),r.attr(_.attr("uid"),l).appendTo(d).data(n),s._async||e(".k-progress",r).width("100%"),!s.multiple&&i.length>0&&(a={files:i.data("fileNames")},s.trigger(R,a)||s._module.onRemove({target:e(i,s.wrapper)},a.data)),r},_removeFileEntry:function(t){var n,i=t.closest(".k-upload-files");t.remove(),n=e(".k-file",i),e(".k-file-success, .k-file-error",i).length===n.length&&this._hideUploadButton(),0===n.length&&(i.remove(),this.wrapper.addClass("k-upload-empty"),this._hideHeaderUploadstatus())},_fileAction:function(e,t){var n={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},i={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};n.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+i[t]+" "+n[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(n[t],this.localization[t],i[t]))))},_fileState:function(t,n){var i=this.localization,r={uploading:{text:i.statusUploading},uploaded:{text:i.statusUploaded},failed:{text:i.statusFailed}}[n];r&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(r.text)},_renderAction:function(t,n,i){return e(""!==t?"<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+i+" "+t+"' title='"+n+"'></span></button>":"<button type='button' class='k-button'>"+n+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var n,i,r,o,a=this;return a.wrapper.hasClass("k-state-disabled")||(i=(n=e(t.target).closest(".k-upload-action")).find(".k-icon"),o={files:(r=n.closest(".k-file")).data("fileNames")},i.hasClass("k-delete")?a.trigger(R,o)||a._module.onRemove({target:e(r,a.wrapper)},o.data):i.hasClass("k-cancel")?(a.trigger(A,o),a._module.onCancel({target:e(r,a.wrapper)}),this._checkAllComplete(),a._updateHeaderUploadStatus()):i.hasClass("k-retry")&&(e(".k-warning",r).remove(),a._module.onRetry({target:e(r,a.wrapper)}))),!1},_onUploadSelected:function(){return this.wrapper.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onFileProgress:function(t,n){this.options.template?e(".k-progress",t.target).width(n+"%"):(0===e(".k-upload-pct",t.target).length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(n+"%"),e(".k-progress",t.target).width(n+"%")),this.trigger(O,{files:m(t).data("fileNames"),percentComplete:n})},_onUploadSuccess:function(e,t,n){var i=m(e);this._fileState(i,"uploaded"),i.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(D,{files:i.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:n}),this._supportsRemove()?this._fileAction(i,R):this._clearFileAction(i),this._checkAllComplete()},_onUploadError:function(t,n){var i=m(t),r=e(".k-upload-pct",i);this._fileState(i,"failed"),i.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",i).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",i).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(i,"retry"),this.trigger(I,{operation:"upload",files:i.data("fileNames"),XMLHttpRequest:n}),y("Server response: "+n.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,n=e(".k-dropzone",this.wrapper),i=e(".k-upload-status-total",this.wrapper);0!==i.length&&i.remove(),i='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span></strong>",n.length>0?n.append(i):e(".k-upload-button",this.wrapper).after(i)},_updateHeaderUploadStatus:function(){var t,n,i,r=this,o=r.localization;0===e(".k-file",r.wrapper).not(".k-file-success, .k-file-error").length&&(t=e(".k-file.k-file-error",r.wrapper),n=e(".k-upload-status-total",r.wrapper),i=e(".k-icon",n).removeClass("k-loading").addClass(0!==t.length?"k-warning":"k-i-tick").text(0!==t.length?o.statusWarning:o.statusUploaded),n.text(r.localization.headerStatusUploaded).append(i))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var n,i=this.element;t!==this._module.onAbort&&this._module.onAbort(),i.value||((n=e(i)).attr("disabled","disabled"),window.setTimeout(function(){n.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(_.support.browser.opera||_.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase();return!(!/chrome/.test(e)&&/safari/.test(e)&&/windows/.test(e))&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,n,i=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=i._ns,f(n=e(".k-dropzone",i.wrapper).append(e("<em>"+i.localization.dropFilesHere+"</em>")).on("dragenter"+t,p).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),t,function(){n.addClass("k-dropzone-hovered")},function(){n.removeClass("k-dropzone-hovered")}),f(e(document),t,function(){n.addClass("k-dropzone-active"),n.closest(".k-upload").removeClass("k-upload-empty")},function(){n.removeClass("k-dropzone-active"),0===e("li.k-file",n.closest(".k-upload")).length&&n.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,n,r,o){var a=this.options.async.removeField||"fileNames",s=e.extend(n,w());s[a]=t,i.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:h,url:this.options.async.removeUrl,traditional:!0,data:s,success:r,error:o,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(e){var t=this.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),t.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(E)},_inputFiles:function(e){return r(e)}}),M=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};M.prototype={onSelect:function(t,i){var r,o=this.upload,a=e(t.target);o._addInput(a),r=o._enqueueFile(n(a),{relatedInput:a,fileNames:i}),o._fileAction(r,R)},onRemove:function(e){var t=m(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},v=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},P._frameId=0,v.prototype={onSelect:function(t,n){var i=this.upload,r=e(t.target),o=this.prepareUpload(r,n);i.options.async.autoUpload?this.performUpload(o):(i._supportsRemove()&&this.upload._fileAction(o,R),i._showUploadButton())},prepareUpload:function(t,i){var r,o,a,s=this.upload,l=e(s.element),d=s.options.async.saveField||t.attr("name");return s._addInput(t),t.attr("name",d),r=this.createFrame(s.name+"_"+P._frameId++),this.registerFrame(r),o=this.createForm(s.options.async.saveUrl,r.attr("name")).append(l),a=s._enqueueFile(n(t),{frame:r,relatedInput:l,fileNames:i}),r.data({form:o,file:a}),a},performUpload:function(t){var n,i,r,o={files:t.data("fileNames")},a=t.data("frame"),s=this.upload;if(s.trigger(T,o))s._removeFileEntry(a.data("file")),this.cleanupFrame(a),this.unregisterFrame(a);else{for(i in s._hideUploadButton(),s._showHeaderUploadStatus(),a.appendTo(document.body),n=a.data("form").attr("action",s.options.async.saveUrl).appendTo(document.body),o.data=e.extend({},o.data,w()),o.data)0===(r=n.find("input[name='"+i+"']")).length&&(r=e("<input>",{type:"hidden",name:i}).prependTo(n)),r.val(o.data[i]);s._fileAction(t,A),s._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),a.one("load",e.proxy(this.onIframeLoad,this)),n[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this);g(n)||t.performUpload(n)})},onIframeLoad:function(t){var n,i=e(t.target);try{n=i.contents().text()}catch(e){n="Error trying to get server response: "+e}this.processResponse(i,n)},processResponse:function(t,n){var i=t.data("file"),r=this,o={responseText:n};u(n,function(n){e.extend(o,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(i,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(i,r.upload.wrapper)},n,o),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(o,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(i,r.upload.wrapper)},o)})},onCancel:function(t){var n=e(t.target).data("frame");this.stopFrameSubmit(n),this.cleanupFrame(n),this.unregisterFrame(n),this.upload._removeFileEntry(n.data("file"))},onRetry:function(e){var t=m(e);this.performUpload(t)},onRemove:function(e,t){var n=m(e),i=n.data("frame");i?(this.unregisterFrame(i),this.upload._removeFileEntry(n),this.cleanupFrame(i)):c(n,this.upload,t)},onAbort:function(){var t=this.element,n=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),n.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,n){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+n+"'/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},(b=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e}).prototype={onSelect:function(t,n){var i=this.upload,r=this,o=e(t.target),a=this.prepareUpload(o,n);e.each(a,function(){i.options.async.autoUpload?r.performUpload(this):(i._supportsRemove()&&i._fileAction(this,R),i._showUploadButton())})},prepareUpload:function(t,n){var i=this.enqueueFiles(n);return t.is("input")&&(e.each(i,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",i),this.upload._addInput(t)),i},enqueueFiles:function(t){var n,i,r,o,a=this.upload,s=t.length,l=[];if(!0===a.options.async.batch)n=e.map(t,function(e){return e.name}).join(", "),(o=a._enqueueFile(n,{fileNames:t})).data("files",t),l.push(o);else for(i=0;s>i;i++)n=(r=t[i]).name,(o=a._enqueueFile(n,{fileNames:[r]})).data("files",[r]),l.push(o);return l},performUpload:function(t){var n,i=this.upload,r=this.createFormData(),o=this.createXHR(),a={files:t.data("fileNames"),XMLHttpRequest:o};if(i.trigger(T,a))this.removeFileEntry(t);else{if(i._fileAction(t,A),i._hideUploadButton(),i._showHeaderUploadStatus(),a.formData)r=a.formData;else{for(n in a.data=e.extend({},a.data,w()),a.data)r.append(n,a.data[n]);this.populateFormData(r,t.data("files"))}i._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(i.options.async.saveUrl,r,t,o)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this);g(n)||t.performUpload(n)})},onCancel:function(e){var t=m(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=m(e);this.performUpload(t)},onRemove:function(e,t){var n=m(e);n.hasClass("k-file-success")?c(n,this.upload,t):this.removeFileEntry(n)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,n,i){var r=this;n.data("request",i),i.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,n)},!1),i.addEventListener(I,function(e){r.onRequestError.call(r,e,n)},!1),i.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,n)},!1),i.open("POST",e,!0),i.withCredentials=this.upload.options.async.withCredentials,i.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var n,i=this.upload,r=t.length;for(n=0;r>n;n++)e.append(i.options.async.saveField||i.name,t[n].rawFile);return e},onRequestSuccess:function(t,n){function i(){o.upload._onUploadError({target:e(n,o.upload.wrapper)},r)}var r=t.target,o=this;r.status>=200&&299>=r.status?u(r.responseText,function(t){o.upload._onFileProgress({target:e(n,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(n,o.upload.wrapper)},t,r),o.cleanupFileEntry(n)},i):i()},onRequestError:function(t,n){var i=t.target;this.upload._onUploadError({target:e(n,this.upload.wrapper)},i)},cleanupFileEntry:function(t){var n=t.data("relatedInput"),i=!0;n&&(e.each(n.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(i=i&&this.hasClass("k-file-success"))}),i&&n.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,n){var i=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(n,this.upload.wrapper)},i)},stopUploadRequest:function(e){e.data("request").abort()}},_.ui.plugin(P)}(window.kendo.jQuery),function(e,t){function n(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function i(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var r,o,a,s=window.kendo,l=s.ui.Widget,d=e.isPlainObject,c=e.proxy,u=e.extend,h=s.support.placeholder,p=s.support.browser,f=s.isFunction,g=/(^\/|\/$)/g,m="change",v="apply",b="error",_="click",k=".kendoFileBrowser",w=".kendoBreadcrumbs",y=".kendoSearchBox",x="name",C="size",S="type",T={field:S,dir:"asc"},D=s.template('<li class="k-tile-empty"><strong>${text}</strong></li>');u(!0,s.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),u(!0,s.data,{transports:{filebrowser:s.data.RemoteTransport.extend({init:function(t){s.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),f(this.options[t])?this.options[t].call(this,n):s.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),p.msie&&p.version,r=l.extend({init:function(e,t){var n=this;t=t||{},l.fn.init.call(n,e,t),n.element.addClass("k-filebrowser"),n.element.on(_+k,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)",c(n._deleteClick,n)).on(_+k,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)",c(n._addClick,n)).on("keydown"+k,"li.k-state-selected input",c(n._directoryKeyDown,n)).on("blur"+k,"li.k-state-selected input",c(n._directoryBlur,n)),n._dataSource(),n.refresh(),n.path(n.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[b,m,v],destroy:function(){var e=this;l.fn.destroy.call(e),e.dataSource.unbind(b,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(k),s.destroy(e.element)},value:function(){var e,i=this,r=i._selectedItem(),o=i.options.transport.fileUrl;return r&&"f"===r.get(S)?(e=n(i.path(),r.get(x)).replace(g,""),o&&(e=f(o)?o(e):s.format(o,encodeURIComponent(e))),e):t},_selectedItem:function(){var e=this.listView.select();return e.length?this.dataSource.getByUid(e.attr(s.attr("uid"))):t},_toolbar:function(){var t=this,n=s.template('<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></a></div></div>'),i=t.options.messages,r=[{text:i.orderByName,value:"name"},{text:i.orderBySize,value:"size"}];t.toolbar=e(n({messages:i,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:i.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:c(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(function(e,t,n){var i,r;e.on("dragenter"+k,function(){t(),r=new Date,i||(i=setInterval(function(){new Date-r>100&&(n(),clearInterval(i),i=null)},100))}).on("dragover"+k,function(){r=new Date})}(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=c(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+k,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+k,this._scrollHandler)},_positionDropzone:function(){var e=this.element,t=e.offset();this.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(t).css({width:e[0].clientWidth,height:e[0].clientHeight,lineHeight:e[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),n=s.format(e.options.messages.deleteFile,t.find("strong").text());t.length&&e._showMessage(n,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return function(e,t){var n=e[t];return d(n)?n.from||n.field||t:n}(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,l=x,d=C;o.test(a)?(e.data={path:n.path()},(t=n._createFile(a))?n.upload.one("success",function(e){t.set(l,e.response[n._getFieldName(l)]),t.set(d,e.response[n._getFieldName(d)]),n._tiles=n.listView.items().filter("["+s.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),n._showMessage(s.format(i.messages.invalidFileType,a,r)))},_findFile:function(e){var t,n,i,r=this.dataSource.data();for(e=e.toLowerCase(),t=0,i=r.length;i>t;t++)if("f"===r[t].get("type")&&r[t].get("name").toLowerCase()===e){n=r[t];break}return n},_createFile:function(e){var t,n,i=this,r=0,o={},a=S,l=i.dataSource.view(),d=i._findFile(e);if(d&&!i._showMessage(s.format(i.options.messages.overwriteFile,e),"confirm"))return null;if(d)return d;for(t=0,n=l.length;n>t;t++)if("f"===l[t].get(a)){r=t;break}return o[a]="f",o[x]=e,o[C]=0,i.dataSource.insert(++r,o)},createDirectory:function(){var e,t,n=this,i=0,r=S,o=x,a=n.dataSource.data(),l=n._nameDirectory(),d=new n.dataSource.reader.model;for(e=0,t=a.length;t>e;e++)"d"===a[e].get(r)&&(i=e);d.set(r,"d"),d.set(o,l),n.listView.one("dataBound",function(){var e=n.listView.items().filter("["+s.attr("uid")+"="+d.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get(o);t?e.model.set(o,n._nameExists(t,d.uid)?n._nameDirectory():t):e.model.set(o,l)}),n.dataSource.insert(++i,d)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var n,i,r=this.dataSource.data();for(n=0,i=r.length;i>n;n++)if("d"===r[n].get("type")&&r[n].get("name").toLowerCase()===e.toLowerCase()&&r[n].uid!==t)return!0;return!1},_nameDirectory:function(){var t,n,i,r="New folder",o=this.dataSource.data(),a=[],s=x;for(n=0,i=o.length;i>n;n++)"d"===o[n].get("type")&&o[n].get(s).toLowerCase().indexOf(r.toLowerCase())>-1&&a.push(o[n].get(s));if(e.inArray(r,a)>-1){n=2;do{t=r+" ("+n+")",n++}while(e.inArray(t,a)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:S,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:x,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick"+k,"li",c(t._dblClick,t)),t.listView=new s.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+s.attr("type")+"=f]"):this.wrapper.append(D({text:t.options.messages.emptyFolder}))},change:c(t._listViewChange,t)})},_dblClick:function(t){var i,r=this,o=e(t.currentTarget);o.hasClass("k-edit-item")&&r._directoryBlur(),o.filter("["+s.attr("type")+"=d]").length?(i=r.dataSource.getByUid(o.attr(s.attr("uid"))))&&(r.path(n(r.path(),i.get(x))),r.breadcrumbs.value(r.path())):o.filter("["+s.attr("type")+"=f]").length&&r.trigger(v)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get(S)&&this.trigger(m))},_dataSource:function(){var e=this,t=e.options,n=t.transport,i=u({},T),r={field:x,dir:"asc"},o={type:n.type||"filebrowser",sort:[i,r]};d(n)&&(n.path=c(e.path,e),o.transport=n),d(t.schema)?o.schema=t.schema:n.type&&d(s.data.schemas[n.type])&&s.data.schemas[n.type],e.dataSource&&e._errorHandler?e.dataSource.unbind(b,e._errorHandler):e._errorHandler=c(e._error,e),e.dataSource=s.data.DataSource.create(o).bind(b,e._errorHandler)},_navigation:function(){var t=this,n=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=n.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=n.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t,n=this;n.trigger(b,e)||(t=e.xhr.status,"error"==e.status?"404"==t?n._showMessage(n.options.messages.directoryNotFound):"0"!=t&&n._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&n._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+s.attr("uid")+'="#=uid#" ';return e+=s.attr("type")+'="${'+S+'}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+='#if(type == "d") { #',e+='<input class="k-input" '+s.attr("bind")+'="value:'+x+'"/>',e+="#}#",e+="</li>",c(s.template(e),{sizeFormatter:i})},_itemTmpl:function(){var e='<li class="k-tile" '+s.attr("uid")+'="#=uid#" ';return e+=s.attr("type")+'="${'+S+'}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${name}</strong>",e+='#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#',e+="</li>",c(s.template(e),{sizeFormatter:i})},path:function(e){var n=this,i=n._path||"";return e!==t?(n._path=e.replace(g,"")+"/",n.dataSource.read({path:n._path}),t):(i&&(i=i.replace(g,"")),"/"===i||""===i?"":i+"/")}}),o=l.extend({init:function(e,t){var n=this;t=t||{},l.fn.init.call(n,e,t),h&&n.element.attr("placeholder",n.options.label),n._wrapper(),n.element.on("keydown"+y,c(n._keydown,n)).on("change"+y,c(n._updateValue,n)),n.wrapper.on(_+y,"a",c(n._click,n)),h||n.element.on("focus"+y,c(n._focus,n)).on("blur"+y,c(n._blur,n))},options:{name:"SearchBox",label:"Search",value:""},events:[m],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(y),l.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(m))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){h||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,n=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),n.length||(n=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),h||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(n)),this.wrapper=n,this.label=n.find(">label")},value:function(e){var n=this;return e!==t?(n.options.value=e,n.element.val(e),n._toggleLabel(),t):n.options.value}}),a=l.extend({init:function(e,t){var n=this;t=t||{},l.fn.init.call(n,e,t),n._wrapper(),n.wrapper.on("focus"+w,"input",c(n._focus,n)).on("blur"+w,"input",c(n._blur,n)).on("keydown"+w,"input",c(n._keydown,n)).on(_+w,"a.k-i-arrow-n:first",c(n._rootClick,n)).on(_+w,"a:not(.k-i-arrow-n)",c(n._click,n)),n.value(n.options.value)},options:{name:"Breadcrumbs",gap:50},events:[m],destroy:function(){var e=this;l.fn.destroy.call(e),e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(w)},_update:function(e){(e="/"===(e||"").charAt(0)?e:"/"+(e||""))!==this.value()&&(this.value(e),this.trigger(m))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").addBack()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this,t=e.element;e.overlay.hide(),e.element.val(e.value()),setTimeout(function(){t.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this,t=e.element,n=t.val().replace(/\/{2,}/g,"/");e.overlay.show(),t.val(""),e._update(n)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,n=this.element,i=n.parents(".k-breadcrumbs");n[0].style.width="",n.addClass("k-input"),i.length||(i=n.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),(t=i.find(".k-breadcrumbs-wrap")).length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(i)),this.wrapper=i,this.overlay=t},refresh:function(){var n,i,r,o="",a=this.value();for(a!==t&&a.match(/^\//)||(a="/"+(a||"")),i=0,r=(n=a.split("/")).length;r>i;i++)n[i]&&(o||(o+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),o+='<a class="k-link" href="#">'+n[i]+"</a>",o+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(o)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,n=this,i=n.wrapper.width()-n.options.gap,r=n.overlay.find("a");r.each(function(n){(t=e(this)).parent().width()>i&&(n==r.length-1?t.width(i):t.prev().addBack().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),this.refresh(),t):this._value},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}}),s.ui.plugin(r),s.ui.plugin(a),s.ui.plugin(o)}(window.kendo.jQuery),function(e,t){function n(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var i,r,o=window.kendo,a=o.ui.FileBrowser,s=e.isPlainObject,l=e.proxy,d=e.extend,c=o.support.browser,u=o.isFunction,h=/(^\/|\/$)/g,p="error",f=".kendoImageBrowser",g="name",m="size",v="type",b={field:v,dir:"asc"},_=o.template('<li class="k-tile-empty"><strong>${text}</strong></li>');d(!0,o.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),d(!0,o.data,{transports:{imagebrowser:o.data.RemoteTransport.extend({init:function(t){o.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),u(this.options[t])?this.options[t].call(this,n):o.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),i=c.msie&&8>c.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},r=a.extend({init:function(e,t){t=t||{},a.fn.init.call(this,e,t),this.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,n=this,i=n._selectedItem(),r=n.options.transport.imageUrl;return i&&"f"===i.get(v)?(e=function(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}(n.path(),i.get(g)).replace(h,""),r&&(e=u(r)?r(e):o.format(r,encodeURIComponent(e))),e):t},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,a=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),s=e.files[0].name,l=g,d=m;a.test(s)?(e.data={path:n.path()},(t=n._createFile(s))?(t._uploading=!0,n.upload.one("success",function(e){delete t._uploading,t.set(l,e.response[n._getFieldName(l)]),t.set(d,e.response[n._getFieldName(d)]),n._tiles=n.listView.items().filter("["+o.attr("type")+"=f]"),n._scroll()})):e.preventDefault()):(e.preventDefault(),n._showMessage(o.format(i.messages.invalidFileType,s,r)))},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+f,l(t._scroll,t)).on("dblclick"+f,"li",l(t._dblClick,t)),t.listView=new o.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+o.attr("type")+"=f]"),t._scroll()):this.wrapper.append(_({text:t.options.messages.emptyFolder}))},change:l(t._listViewChange,t)})},_dataSource:function(){var e=this,t=e.options,n=t.transport,i=d({},b),r={field:g,dir:"asc"},a={type:n.type||"imagebrowser",sort:[i,r]};s(n)&&(n.path=l(e.path,e),a.transport=n),s(t.schema)?a.schema=t.schema:n.type&&s(o.data.schemas[n.type])&&o.data.schemas[n.type],e.dataSource&&e._errorHandler?e.dataSource.unbind(p,e._errorHandler):e._errorHandler=l(e._error,e),e.dataSource=o.data.DataSource.create(a).bind(p,e._errorHandler)},_loadImage:function(t){var n=this,i=e(t),r=n.dataSource.getByUid(i.attr(o.attr("uid"))),a=r.get(g),s=n.options.transport.thumbnailUrl,l=e("<img />",{alt:a}),d="?";r._uploading||(l.hide().on("load"+f,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),i.find(".k-loading").after(l),u(s)?s=s(n.path(),encodeURIComponent(a)):(s.indexOf("?")>=0&&(d="&"),s=s+d+"path="+n.path()+encodeURIComponent(a)),l.attr("src",s),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var n=e.list.outerHeight(),r=e.list.scrollTop(),o=r+n;e._tiles.each(function(){var n=i(this),a=n+this.offsetHeight;return(n>=r&&o>n||a>=r&&o>a)&&e._loadImage(this),!(n>o)&&t}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e='<li class="k-tile" '+o.attr("uid")+'="#=uid#" ';return e+=o.attr("type")+'="${'+v+'}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+=this.options.transport&&this.options.transport.thumbnailUrl?'<div class="k-thumb"><span class="k-icon k-loading"></span></div>':'<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${name}</strong>",e+='#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#',e+="</li>",l(o.template(e),{sizeFormatter:n})}}),o.ui.plugin(r)}(window.kendo.jQuery),function(e,t){var n,i,r,o,a=window.kendo,s=a.Class,l=a.ui.Widget,d=a.support.mobileOS,c=a.support.browser,u=e.extend,h=e.proxy,p=a.deepExtend,f=".kendoEditor",g=a.keys,m=s.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return a.template(e.template,{useWithBlock:!1})(e)}}),v={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #"></span><span class="k-tool-text">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',overflowAnchorTemplate:'<a href="" role="button" class="k-tool k-overflow-anchor" data-popup unselectable="on"><span unselectable="on" class="k-icon k-i-more"></span></a>',formatByName:function(t,n){for(var i=0;n.length>i;i++)if(e.inArray(t,n[i].tags)>=0)return n[i]},registerTool:function(e,t){var n=t.options;n&&n.template&&(n.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),S.defaultTools[e]=t},registerFormat:function(e,t){S.fn.options.formats[e]=t}},b=!d||d.ios&&d.flatVersion>=500||!d.ios&&t!==document.documentElement.contentEditable,_=["bold","italic","underline"],k=["justifyLeft","justifyCenter","justifyRight"],w=["insertUnorderedList","insertOrderedList"],y=["indent","outdent"],x=["createLink","unlink"],C=["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],S=l.extend({init:function(t,n){var i,r,o,s,d,c=this,g=a.ui.editor,m=g.Dom;b&&(l.fn.init.call(c,t,n),c.options=p({},c.options,n),d=(t=c.element)[0],s=m.name(d),t.closest("form").on("submit"+f,function(){c.update()}),(o=u({},c.options)).editor=c,"textarea"==s?(c._wrapTextarea(),r=c.wrapper.find(".k-editor-toolbar"),d.id&&r.attr("aria-controls",d.id)):(c.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),o.popup=!0,r=e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(t)),c.toolbar=new g.Toolbar(r[0],o),c.toolbar.bindTo(c),"textarea"==s&&setTimeout(function(){var e=c.wrapper[0].style.height,t=parseInt(e,10),n=c.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&n>t&&c.wrapper.height(t-(n-t))}),c._resizable(),c._initializeContentElement(c),c.keyboard=new g.Keyboard([new g.BackspaceHandler(c),new g.TypingHandler(c),new g.SystemHandler(c)]),c.clipboard=new g.Clipboard(this),c.undoRedoStack=new g.UndoRedoStack,n&&n.value?i=n.value:c.textarea?(i=d.value,c.options.encoded&&e.trim(d.defaultValue).length&&(i=d.defaultValue),i=i.replace(/[\r\n\v\f\t ]+/gi," ")):i=d.innerHTML,c.value(i),e(document).on("mousedown",h(c._endTyping,c)).on("mouseup",h(c._mouseup,c)),c.toolbar.resize(),a.notify(c))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(e){}},_selectionChange:function(){c.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_resizable:function(){var n=this.options.resizable;(e.isPlainObject(n)?n.content===t||!0===n.content:n)&&this.textarea&&(e("<div class='k-resize-handle'><span class='k-icon k-resize-se' /></div>").insertAfter(this.textarea),this.wrapper.kendoResizable(u({},this.options.resizable,{start:function(t){var n=this.editor=e(t.currentTarget).closest(".k-editor");this.initialSize=n.height(),n.find("td:last").append("<div class='k-overlay' />")},resize:function(e){var t=e.y.initialDelta,n=this.initialSize+t,i=this.options.min||0,r=this.options.max||1/0;n=Math.min(r,Math.max(i,n)),this.editor.height(n)},resizeend:function(){this.editor.find(".k-overlay").remove(),this.editor=null}})))},_wrapTextarea:function(){var t=this,n=t.element,i=n[0].style.width,r=n[0].style.height,o=e(v.editorWrapperTemplate).insertBefore(n).width(i).height(r),a=o.find(".k-editable-area");n.attr("autocomplete","off").appendTo(a).addClass("k-content k-raw-content").css("display","none"),t.textarea=n,t.wrapper=o},_createContentElement:function(t){var n,i,r,o=this,s=o.textarea,l=o.options.domain,d=l||document.domain,c="",u='javascript:""';return(l||d!=location.hostname)&&(u="javascript:document.write('"+(c='<script>document.domain="'+d+'"<\/script>')+"')"),s.hide(),n=e("<iframe />",{title:o.options.messages.editAreaTitle,frameBorder:"0"})[0],e(n).css("display","").addClass("k-content").insertBefore(s),n.src=u,i=n.contentWindow||n,r=i.document||n.contentDocument,e(n).one("load",function(){o.toolbar.decorateFrom(r.body)}),r.open(),r.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(a.support.isRtl(s)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}</style>"+c+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');<\/script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),r.close(),i},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,n=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),n!=t&&this.trigger("change")},_spellCorrect:function(n){var i,r=!1;e(n.body).on("contextmenu"+f,function(){n.one("select",function(){i=null}),n._spellCorrectTimeout=setTimeout(function(){i=new a.ui.editor.RestorePoint(n.getRange()),r=!1},10)}).on("input"+f,function(){return i?a.support.browser.mozilla&&!r?(r=!0,t):(a.ui.editor._finishUpdate(n,i),t):t})},_initializeContentElement:function(){var n,i,r=this;r.textarea?(r.window=r._createContentElement(r.options.stylesheets),n=r.document=r.window.contentDocument||r.window.document,r.body=n.body,i=r.window,e(n).on("mouseup"+f,h(r._mouseup,r))):(r.window=window,n=r.document=document,r.body=r.element[0],i=r.body,r.toolbar.decorateFrom(r.body)),e(i).on("blur"+f,h(this._blur,this));try{n.execCommand("enableInlineTableEditing",null,!1)}catch(e){}a.support.touch&&e(n).on("selectionchange"+f,h(this._selectionChange,this)).on("keydown"+f,function(){a._activeElement()!=n.body&&r.window.focus()}),this._spellCorrect(r),e(r.body).on("dragstart"+f,!1).on("keydown"+f,function(e){var n,i,o,a,s,l;return(e.keyCode!==g.BACKSPACE&&e.keyCode!==g.DELETE||"true"===r.body.getAttribute("contenteditable"))&&(e.keyCode===g.F10?(setTimeout(h(r.toolbar.focus,r.toolbar),100),e.preventDefault(),t):((e.keyCode==g.LEFT||e.keyCode==g.RIGHT)&&(o=(n=r.getRange())[(i=e.keyCode==g.LEFT)?"startContainer":"endContainer"],a=n[i?"startOffset":"endOffset"],i&&(a-=1),a+(s=i?-1:1)>0&&3==o.nodeType&&"\ufeff"==o.nodeValue[a]&&(n.setStart(o,a+s),n.collapse(!0),r.selectRange(n))),(l=r.keyboard.toolFromShortcut(r.toolbar.tools,e))?(e.preventDefault(),/^(undo|redo)$/.test(l)||r.keyboard.endTyping(!0),r.trigger("keydown",e),r.exec(l),!1):(r.keyboard.clearTimeout(),r.keyboard.keydown(e),t)))}).on("keyup"+f,function(t){(e.inArray(t.keyCode,[8,9,33,34,35,36,37,38,39,40,40,45,46])>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&r._selectionChange(),r.keyboard.keyup(t)}).on("mousedown"+f,function(t){if(r._selectionStarted=!0,!c.gecko){var n=e(t.target);(2==t.which||1==t.which&&t.ctrlKey)&&n.is("a[href]")&&window.open(n.attr("href"),"_new")}}).on("click"+f,function(e){var t;"img"===a.ui.editor.Dom.name(e.target)&&((t=r.createRange()).selectNode(e.target),r.selectRange(t))}).on("cut"+f+" paste"+f,function(e){r.clipboard["on"+e.type](e)}).on("focusin"+f,function(){e(this).addClass("k-state-active"),r.toolbar.show()}).on("focusout"+f,function(){setTimeout(function(){var t=a._activeElement(),n=r.body,i=r.toolbar;t==n||e.contains(n,t)||e(t).is(".k-editortoolbar-dragHandle")||i.focused()||(e(n).removeClass("k-state-active"),i.hide())},10)})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},refresh:function(){var e=this;e.textarea&&(e.textarea.val(e.value()),e.wrapper.find("iframe").remove(),e._initializeContentElement(e),e.value(e.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",editAreaTitle:"Editable area. Press F10 for toolbar.",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},formats:{},encoded:!0,domain:null,resizable:!1,serialization:{entities:!0,semantic:!0,scripts:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],_,k,w,y,x,["insertImage"],C)},destroy:function(){var t=this;l.fn.destroy.call(t),e(t.window).add(t.document).add(t.body).add(t.wrapper).add(t.element.closest("form")).off(f),e(document).off("mousedown",h(t._endTyping,t)).off("mouseup",h(t._mouseup,t)),clearTimeout(this._spellCorrectTimeout),t._focusOutside(),t.toolbar.destroy(),a.destroy(t.wrapper)},_focusOutside:function(){a.support.browser.msie&&this.textarea&&e("<input style='position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;' />").appendTo(document.body).focus().blur().remove()},state:function(e){var t,n,i=S.defaultTools[e],r=i&&(i.options.finder||i.finder),o=a.ui.editor.RangeUtils;return!!r&&(t=this.getRange(),!(n=o.textNodes(t)).length&&t.collapsed&&(n=[t.startContainer]),r.getFormat?r.getFormat(n):r.isFormatted(n))},value:function(e){var n=this.body,i=a.ui.editor,r=i.Serializer.domToXhtml(n,this.options.serialization);return e===t?r:(e!=r&&(i.Serializer.htmlToDom(e,n),c.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools()),t)},saveSelection:function(t){var n=(t=t||this.getRange()).commonAncestorContainer,i=this.body;(n==i||e.contains(i,n))&&(this.selectionRestorePoint=new a.ui.editor.RestorePoint(t))},_focusBody:function(){var e,t=this.body,n=this.wrapper&&this.wrapper.find("iframe")[0],i=this.document.documentElement,r=a._activeElement();r!=t&&r!=n&&(e=i.scrollTop,t.focus(),i.scrollTop=e)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return a.ui.editor.Dom.encode(this.value())},createRange:function(e){return a.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return a.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer!=n||t.endContainer!=n||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return a.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(t,n){var i=new a.ui.editor.InsertHtmlCommand(e.extend({range:this.getRange(),html:t},n));i.editor=this,i.exec()},exec:function(e,n){var i,r,o,a=this,s=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if("true"!==a.body.getAttribute("contenteditable"))return!1;if(e=e.toLowerCase(),a.keyboard.isTypingInProgress()||a.restoreSelection(),!(r=a.toolbar.toolById(e)))for(o in S.defaultTools)if(o.toLowerCase()==e){r=S.defaultTools[o];break}if(r){if(i=a.getRange(),r.command&&(s=r.command(u({range:i},n))),a.trigger("execute",{name:e,command:s}))return;if(/^(undo|redo)$/i.test(e))a.undoRedoStack[e]();else if(s&&(s.managesUndoRedo||a.undoRedoStack.push(s),s.editor=a,s.exec(),s.async))return s.change=h(a._selectionChange,a),t;a._selectionChange()}}});S.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},a.ui.plugin(S),(n=s.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title}),e.children(".k-tool-text").html(t.title)},command:function(e){return new this.options.command(e)},update:e.noop})).exec=function(e,t,n){e.exec(t,{value:n})},i=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){return new a.ui.editor.FormatCommand(u(e,{formatter:this.options.formatter}))},update:function(e,t){var n=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",n),e.attr("aria-pressed",n)}}),v.registerTool("separator",new n({template:new m({template:v.separatorTemplate})})),r=c.msie&&9>c.version?"\ufeff":"",o='<br class="k-br" />',c.msie&&(10>c.version?o="\ufeff":11>c.version&&(o=" ")),u(a.ui,{editor:{ToolTemplate:m,EditorUtils:v,Tool:n,FormatTool:i,_bomFill:r,emptyElementContent:o}}),a.PDFMixin&&(a.PDFMixin.extend(S.prototype),S.prototype._drawPDF=function(){return a.drawing.drawDOM(this.body,this.options.pdf)},S.prototype.saveAsPDF=function(){var t,n,i=new e.Deferred,r=i.promise(),o={promise:r};if(!this.trigger("pdfExport",o))return t=this.options.pdf,n=t.paperSize,this._drawPDF(i).then(function(e){return t.paperSize="auto",a.drawing.exportPDF(e,t)}).done(function(e){a.saveAs({dataURI:e,fileName:t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy}),t.paperSize=n,i.resolve()}).fail(function(e){i.reject(e)}),r})}(o),function(e){function t(e){var t,n,i={};for(t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}var n,i,r,o,a,s,l,d,c,u,h=window.kendo,p=e.map,f=e.extend,g=h.support.browser,m="style",v="float",b="cssFloat",_="styleFloat",k="class",w="k-marker",y=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),x="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),C=x.concat(["ul","ol","li"]),S=t(C),T="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),D=t(T),I=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),E=function(e){1==e.nodeType&&e.normalize()};g.msie&&g.version>=8&&(E=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,n=t;n=n.nextSibling;)3==n.nodeType&&3==t.nodeType&&(n.nodeValue=t.nodeValue+n.nodeValue,u.remove(t)),t=n}),n=/^\s+$/,i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,r=/\ufeff/g,o=/^(\s+|\ufeff)$/,s="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),l=/[<>\&]/g,d=/[\u00A0-\u2666<>\&]/g,c={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},u={block:S,inline:D,findNodeIndex:function(e,t){var n=0;if(!e)return-1;for(;e=e.previousSibling;)t&&3==e.nodeType||n++;return n},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,n){try{return!u.isDataNode(t)&&(e.contains(t,u.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(e){return!1}},isAncestorOrSelf:function(e,t){return u.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(u.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return u.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var n,i=e.cloneNode(!1),r="",o=e.nextSibling;o&&3==o.nodeType&&o.nodeValue;)r+=o.nodeValue,n=o,o=o.nextSibling,u.remove(n);e.deleteData(t,e.length),i.deleteData(0,t),i.nodeValue+=r,u.insertAfter(i,e)},attrEquals:function(e,t){var n,i;for(n in t)if(i=e[n],n==v&&(i=e[h.support.cssFloat?b:_]),"object"==typeof i){if(!u.attrEquals(i,t[n]))return!1}else if(i!=t[n])return!1;return!0},blockParentOrBody:function(e){return u.parentOfType(e,C)||e.ownerDocument.body},blockParents:function(t){var n,i,r,o=[];for(n=0,i=t.length;i>n;n++)(r=u.parentOfType(t[n],u.blockElements))&&e.inArray(r,o)<0&&o.push(r);return o},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:E,blockElements:C,nonListBlockElements:x,inlineElements:T,empty:y,fillAttrs:I,toHex:function(e){var t=i.exec(e);return t?"#"+p(t.slice(1),function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}).join(""):e},encode:function(e,t){var n=!t||t.entities?d:l;return e.replace(n,function(e){var t=e.charCodeAt(0),n=c[t];return n?"&"+n+";":e})},stripBom:function(e){return(e||"").replace(r,"")},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||u.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)},significantNodes:function(t){return e.grep(t,function(e){var t=u.name(e);return!("br"==t||u.insignificant(e)||3==e.nodeType&&o.test(e.nodeValue)||1==e.nodeType&&!y[t]&&u.emptyNode(e))})},emptyNode:function(e){return!u.significantNodes(e.childNodes).length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!u.isWhitespace(e)})},lastTextNode:function(e){var t,n=null;if(3==e.nodeType)return e;for(t=e.lastChild;t;t=t.previousSibling)if(n=u.lastTextNode(t))return n;return n},is:function(e,t){return u.name(e)==t},isMarker:function(e){return e.className==w},isWhitespace:function(e){return n.test(e.nodeValue)},isBlock:function(e){return S[u.name(e)]},isEmpty:function(e){return y[u.name(e)]},isInline:function(e){return D[u.name(e)]},scrollContainer:function(e){var t=u.windowFromDocument(e),n=(t.contentWindow||t).document||t.ownerDocument||t;return h.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(t){var n,i,r=e(u.isDataNode(t)?t.parentNode:t),o=u.windowFromDocument(t.ownerDocument).innerHeight,a=u.scrollContainer(t.ownerDocument);n=r.offset().top,(i=r[0].offsetHeight)||(i=parseInt(r.css("line-height"),10)||Math.ceil(1.2*parseInt(r.css("font-size"),10))||15),i+n>a.scrollTop+o&&(a.scrollTop=i+n-o)},persistScrollTop:function(e){a=u.scrollContainer(e).scrollTop},restoreScrollTop:function(e){u.scrollContainer(e).scrollTop=a},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){var t,n;for(t=e.childNodes.length-1;t>=0;t--)n=e.childNodes[t],u.isDataNode(n)?(u.stripBom(n.nodeValue).length||u.remove(n),u.isWhitespace(n)&&u.insertBefore(n,e)):n.className!=w&&(u.trim(n),n.childNodes.length||u.isEmpty(n)||u.remove(n));return e},closest:function(e,t){for(;e&&u.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do{e=e[t]}while(e&&1!=e.nodeType);return e},next:function(e){return u.sibling(e,"nextSibling")},prev:function(e){return u.sibling(e,"previousSibling")},parentOfType:function(e,t){do{e=e.parentNode}while(e&&!u.ofType(e,t));return e},ofType:function(t,n){return e.inArray(u.name(t),n)>=0},changeTag:function(e,t,n){var i,r,o,a,s,l=u.create(e.ownerDocument,t),d=e.attributes;if(!n)for(i=0,r=d.length;r>i;i++)(s=d[i]).specified&&(o=s.nodeName,a=s.nodeValue,o==k?l.className=a:o==m?l.style.cssText=e.style.cssText:l.setAttribute(o,a));for(;e.firstChild;)l.appendChild(e.firstChild);return u.insertBefore(l,e),u.remove(e),l},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return u.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return u.attr(e.createElement(t),n)},attr:function(e,t){for(var n in(t=f({},t))&&m in t&&(u.style(e,t.style),delete t.style),t)null===t[n]?(e.removeAttribute(n),delete t[n]):"className"==n&&(e[n]=t[n]);return f(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(e,t){for(var n in t)n==v&&(n=h.support.cssFloat?b:_),e.style[n]="";""===e.style.cssText&&e.removeAttribute(m)},inlineStyle:function(t,n,i){var r,o=e(u.create(t.ownerDocument,n,i));return t.appendChild(o[0]),r=p(s,function(e){return g.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},getEffectiveBackground:function(e){var t=e.css("background-color");return t.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":u.getEffectiveBackground(e.parent())},removeClass:function(t,n){var i,r,o=" "+t.className+" ",a=n.split(" ");for(i=0,r=a.length;r>i;i++)o=o.replace(" "+a[i]+" "," ");(o=e.trim(o)).length?t.className=o:t.removeAttribute(k)},commonAncestor:function(){var e,t,n,i,r,o=arguments.length,a=[],s=1/0,l=null;if(!o)return null;if(1==o)return arguments[0];for(e=0;o>e;e++){for(t=[],n=arguments[e];n;)t.push(n),n=n.parentNode;a.push(t.reverse()),s=Math.min(s,t.length)}if(1==o)return a[0][0];for(e=0;s>e;e++){for(i=a[0][e],r=1;o>r;r++)if(i!=a[r][e])return l;l=i}return l},closestSplittableParent:function(t){var n,i,r;return(n=1==t.length?u.parentOfType(t[0],["ul","ol"]):u.commonAncestor.apply(null,t))||(n=u.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),u.isInline(n)&&(n=u.blockParentOrBody(n)),i=p(t,u.editableParent),r=u.commonAncestor(i)[0],e.contains(n,r)&&(n=r),n},closestEditable:function(t,n){var i,r=u.editableParent(t);return(i=u.ofType(t,n)?t:u.parentOfType(t,n))&&r&&e.contains(i,r)?i=r:!i&&r&&(i=r),i},closestEditableOfType:function(e,t){var n=u.closestEditable(e,t);return n&&u.ofType(n,t)?n:void 0},filter:function(e,t,n){for(var i,r=0,o=t.length,a=[];o>r;r++)i=u.name(t[r]),(!n&&i==e||n&&i!=e)&&a.push(t[r]);return a},ensureTrailingBreaks:function(t){var n=e(t).find("p,td,th"),i=n.length,r=0;if(i)for(;i>r;r++)u.ensureTrailingBreak(n[r]);else u.ensureTrailingBreak(t)},removeTrailingBreak:function(t){e(t).find("br[type=_moz],.k-br").remove()},ensureTrailingBreak:function(e){var t,n,i;u.removeTrailingBreak(e),(!(n=(t=e.lastChild)&&u.name(t))||"br"!=n&&"img"!=n||"br"==n&&"k-br"!=t.className)&&((i=e.ownerDocument.createElement("br")).className="k-br",e.appendChild(i))}},h.ui.editor.Dom=u}(window.kendo.jQuery),function(e,t){var n,i,r=window.kendo,o=r.ui.editor,a=o.Dom,s=e.extend,l="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),d=/"/g,c=/<br[^>]*>/i,u=/^\d+(\.\d*)?(px)?$/i,h=/<p><\/p>/i,p=/([\w|\-]+)\s*:\s*([^;]+);?/i,f=/^sizzle-\d+/i,g=/^k-script-/i,m=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,v=document.createElement("div");v.innerHTML=" <hr>",n=3===v.firstChild.nodeType,v=null,i={toEditableHtml:function(e){var t='<br class="k-br">';return(e=e||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"\x3c!--[CDATA[$1]]--\x3e").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<k:script$1>$2</k:script>").replace(/<img([^>]*)>/gi,function(e){return e.replace(m,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,t+"<$1").replace(/^[\s]*(&nbsp;|\u00a0)/i,"$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+t)},_fillEmptyElements:function(t){e(t).find("p").each(function(){var t,n=e(this);if(/^\s*$/g.test(n.text())&&!n.find("img,input").length){for(t=this;t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;1!=t.nodeType||a.empty[a.name(t)]||(t.innerHTML=r.ui.editor.emptyElementContent)}})},_removeSystemElements:function(t){e(".k-paste-container",t).remove()},_resetOrderedLists:function(e){var t,n,i,r=e.getElementsByTagName("ol");for(t=0;r.length>t;t++)i=(n=r[t]).getAttribute("start"),n.setAttribute("start",1),i?n.setAttribute("start",i):n.removeAttribute(i)},_preventScriptExecution:function(t){e(t).find("*").each(function(){var e,t,n,i,r=this.attributes;for(t=0,n=r.length;n>t;t++)i=(e=r[t]).nodeName,e.specified&&/^on/i.test(i)&&(this.setAttribute("k-script-"+i,e.value),this.removeAttribute(i))})},htmlToDom:function(t,n){var o,s,l=r.support.browser,d=l.msie,c=d&&9>l.version;return t=i.toEditableHtml(t),c&&(o="originalsrc",t=(t=(t="<br/>"+t).replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,(s="originalhref")+'="$1"')).replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,o+'="$1"')),n.innerHTML=t,c?(a.remove(n.firstChild),e(n).find("k\\:script,script,link,img,a").each(function(){var e=this;e[s]&&(e.setAttribute("href",e[s]),e.removeAttribute(s)),e[o]&&(e.setAttribute("src",e[o]),e.removeAttribute(o))})):d&&(a.normalize(n),i._resetOrderedLists(n)),i._preventScriptExecution(n),i._fillEmptyElements(n),i._removeSystemElements(n),e("table",n).addClass("k-table"),n},domToXhtml:function(i,o){function s(t){return e.grep(t,function(e){return"style"!=e.name})}function m(t){var n,i,r,o,s,l=e.trim,c=l(t).split(";"),u=[];for(o=0,s=c.length;s>o;o++)c[o].length&&(n=p.exec(c[o]))&&(i=l(n[1].toLowerCase()),r=l(n[2]),"font-size-adjust"!=i&&"font-stretch"!=i&&(i.indexOf("color")>=0?r=a.toHex(r):i.indexOf("font")>=0?r=r.replace(d,"'"):/\burl\(/g.test(r)&&(r=r.replace(d,"")),u.push({property:i,value:r})));return u}function v(e){var t,n=m(e);for(t=0;n.length>t;t++)x.push(n[t].property),x.push(":"),x.push(n[t].value),x.push(";")}function b(e){var t,n,i,r,s,l,d=[],c=e.attributes;for(n=0,i=c.length;i>n;n++)r=(t=c[n]).nodeName,s=t.value,l=t.specified,"value"==r&&"value"in e&&e.value?l=!0:"type"==r&&"text"==s?l=!0:"class"!=r||s?f.test(r)?l=!1:"complete"==r?l=!1:"altHtml"==r?l=!1:"start"==r&&(a.is(e,"ul")||a.is(e,"ol"))?l=!1:r.indexOf("_moz")>=0?l=!1:g.test(r)&&(l=!!o.scripts):l=!1,l&&d.push(t);return d}function _(n,i){var o,s,l,d,c,h,p,f;if(i=i||b(n),a.is(n,"img")&&(h=n.style.width,p=n.style.height,f=e(n),h&&u.test(h)&&(f.attr("width",parseInt(h,10)),a.unstyle(n,{width:t})),p&&u.test(p)&&(f.attr("height",parseInt(p,10)),a.unstyle(n,{height:t}))),i.length)for(i.sort(function(e,t){return e.nodeName>t.nodeName?1:t.nodeName>e.nodeName?-1:0}),o=0,s=i.length;s>o;o++)d=(l=i[o]).nodeName,c=l.value,("class"!=d||"k-table"!=c)&&(d=d.replace(g,""),x.push(" "),x.push(d),x.push('="'),"style"==d?v(c||n.style.cssText):x.push("src"==d||"href"==d?r.htmlEncode(n.getAttribute(d,2)):a.fillAttrs[d]?d:c),x.push('"'))}function k(e,t,n){for(var i=e.firstChild;i;i=i.nextSibling)y(i,t,n)}function w(e){return e.nodeValue.replace(/\ufeff/g,"")}function y(e,i,r){var s,l,d,c,u,h=e.nodeType;if(1==h){if(!(s=a.name(e))||a.insignificant(e))return;if(a.isInline(e)&&1==e.childNodes.length&&3==e.firstChild.nodeType&&!w(e.firstChild))return;if(!o.scripts&&("script"==s||"k:script"==s))return;if((l=C[s])&&(t===l.semantic||o.semantic^l.semantic))return l.start(e),k(e,!1,l.skipEncoding),l.end(e),t;x.push("<"),x.push(s),_(e),a.empty[s]?x.push(" />"):(x.push(">"),k(e,i||a.is(e,"pre")),x.push("</"),x.push(s),x.push(">"))}else 3==h?(c=w(e),!i&&n&&(d=e.parentNode,(u=e.previousSibling)||(u=(a.isInline(d)?d:e).previousSibling),(!u||""===u.innerHTML||a.isBlock(u))&&(c=c.replace(/^[\r\n\v\f\t ]+/,"")),c=c.replace(/ +/," ")),x.push(r?c:a.encode(c,o))):4==h?(x.push("<![CDATA["),x.push(e.data),x.push("]]>")):8==h&&(e.data.indexOf("[CDATA[")<0?(x.push("\x3c!--"),x.push(e.data),x.push("--\x3e")):(x.push("<!"),x.push(e.data),x.push(">")))}var x=[],C={iframe:{start:function(e){x.push("<iframe"),_(e),x.push(">")},end:function(){x.push("</iframe>")}},"k:script":{start:function(e){x.push("<script"),_(e),x.push(">")},end:function(){x.push("<\/script>")},skipEncoding:!0},span:{semantic:!0,start:function(t){var n,i,r=t.style,o=s(b(t));o.length&&(x.push("<span"),_(t,o),x.push(">")),"underline"==r.textDecoration&&x.push("<u>"),n=[],r.color&&n.push('color="'+a.toHex(r.color)+'"'),r.fontFamily&&n.push('face="'+r.fontFamily+'"'),r.fontSize&&(i=e.inArray(r.fontSize,l),n.push('size="'+i+'"')),n.length&&x.push("<font "+n.join(" ")+">")},end:function(e){var t=e.style;(t.color||t.fontFamily||t.fontSize)&&x.push("</font>"),"underline"==t.textDecoration&&x.push("</u>"),s(b(e)).length&&x.push("</span>")}},strong:{semantic:!0,start:function(){x.push("<b>")},end:function(){x.push("</b>")}},em:{semantic:!0,start:function(){x.push("<i>")},end:function(){x.push("</i>")}},b:{semantic:!1,start:function(){x.push("<strong>")},end:function(){x.push("</strong>")}},i:{semantic:!1,start:function(){x.push("<em>")},end:function(){x.push("</em>")}},u:{semantic:!1,start:function(){x.push('<span style="text-decoration:underline;">')},end:function(){x.push("</span>")}},font:{semantic:!1,start:function(e){var t,n,i;x.push('<span style="'),t=e.getAttribute("color"),n=l[e.getAttribute("size")],i=e.getAttribute("face"),t&&(x.push("color:"),x.push(a.toHex(t)),x.push(";")),i&&(x.push("font-family:"),x.push(i),x.push(";")),n&&(x.push("font-size:"),x.push(n),x.push(";")),x.push('">')},end:function(){x.push("</span>")}}};return C.script=C["k:script"],t===(o=o||{}).semantic&&(o.semantic=!0),function(e){var t=e.childNodes.length;return t&&3==e.firstChild.nodeType&&(1==t||2==t&&a.insignificant(e.lastChild))}(i)?a.encode(w(i.firstChild).replace(/[\r\n\v\f\t ]+/," "),o):(k(i),""===(x=x.join("")).replace(c,"").replace(h,"")?"":x)}},s(o,{Serializer:i})}(window.kendo.jQuery),function(e){function t(e,t){(function(e){try{return function(e,t,n,i){var r,o,a,s;if(e==t)return i-n;for(r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return u(r)-n;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return i-u(r)-1;for(o=c.commonAncestor(e,t),a=e;a&&a.parentNode!=o;)a=a.parentNode;for(a||(a=o),s=t;s&&s.parentNode!=o;)s=s.parentNode;return s||(s=o),a==s?0:u(s)-u(a)}(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(e){return!0}})(e)&&(t?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function n(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!c.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function i(e,t,n){var i,r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],a=0,s=h(r),l=s?r:r.childNodes[o]||null,d=s?r.parentNode:r,u=t.ownerDocument,p=u.body.createTextRange();(3==r.nodeType||4==r.nodeType)&&(a=o),d||(d=u.body),"img"==d.nodeName.toLowerCase()?(p.moveToElementText(d),p.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",p)):(i=d.insertBefore(c.create(u,"a"),l),p.moveToElementText(i),c.remove(i),p[n?"moveStart":"moveEnd"]("character",a),p.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",p))}function r(e,t,n,i){var r,o,a,s,l,d,p,f=c.create(t.ownerDocument,"a"),g=e.duplicate(),m=i?"StartToStart":"StartToEnd",v=!1;f.innerHTML="\ufeff",g.collapse(i),o=g.parentElement(),c.isAncestorOrSelf(n,o)||(o=n);do{v?o.insertBefore(f,f.previousSibling):(o.appendChild(f),v=!0),g.moveToElementText(f)}while((r=g.compareEndPoints(m,e))>0&&f.previousSibling);a=f.nextSibling,-1==r&&h(a)?(g.setEndPoint(i?"EndToStart":"EndToEnd",e),c.remove(f),d=[a,g.text.length]):(s=!i&&f.previousSibling,l=i&&f.nextSibling,h(l)?d=[l,0]:h(s)?d=[s,s.length]:(p=u(f),d=o.nextSibling&&p==o.childNodes.length-1?[o.nextSibling,0]:[o,p]),c.remove(f)),t[i?"setStart":"setEnd"].apply(t,d)}var o=window.kendo,a=o.Class,s=e.extend,l=o.ui.editor,d=o.support.browser,c=l.Dom,u=c.findNodeIndex,h=c.isDataNode,p=c.findClosestAncestor,f=c.getNodeLength,g=c.normalize,m={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new _(e.document)},selectionFromRange:function(e){var t=C.documentFromRange(e);return m.selectionFromDocument(t)},selectionFromDocument:function(e){return m.selectionFromWindow(c.windowFromDocument(e))}},v=a.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,i){this.startContainer=e,this.startOffset=i,n(this),t(this,!0)},setEnd:function(e,i){this.endContainer=e,this.endOffset=i,n(this),t(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,u(e))},setStartAfter:function(e){this.setStart(e.parentNode,u(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,u(e))},setEndAfter:function(e){this.setEnd(e.parentNode,u(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(p(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function e(t){for(;t.next();)t.hasPartialSubtree()?e(t.getSubtreeIterator()):t.remove()}(new b(t))},cloneContents:function(){var e=C.documentFromRange(this);return function t(n){for(var i,r=e.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(t(n.getSubtreeIterator())),r.appendChild(i);return r}(new b(this))},extractContents:function(){var e,t=this,n=t.cloneRange();return t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(p(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),e=C.documentFromRange(t),function n(i){for(var r,o=e.createDocumentFragment();r=i.next();)i.hasPartialSubtree()?(r=r.cloneNode(!1)).appendChild(n(i.getSubtreeIterator())):i.remove(t.originalRange),o.appendChild(r);return o}(new b(n))},insertNode:function(e){var t=this;h(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&c.splitDataNode(t.startContainer,t.startOffset),c.insertAfter(e,t.startContainer)):c.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new v(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return("#text"==e?this.startContainer.nodeValue:e)+"("+this.startOffset+") : "+("#text"==t?this.endContainer.nodeValue:t)+"("+this.endOffset+")"}}),b=a.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var n=t.commonAncestorContainer;this._next=t.startContainer!=n||h(t.startContainer)?p(n,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=n||h(t.endContainer)?p(n,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,h(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0)).deleteData(e.range.endOffset,t.length-e.range.endOffset),e.range.startContainer==e._current&&(t=t.cloneNode(!0)).deleteData(0,e.range.startOffset)),t},traverse:function(e){for(var t,n=this;n._current=n._next,n._next=n._current&&n._current.nextSibling!=n._end?n._current.nextSibling:null,t=n._current;)n.hasPartialSubtree()?n.getSubtreeIterator().traverse(e):e(t);return t},remove:function(e){var t,n,i,r,o,a=this,s=a.range.startContainer==a._current,l=a.range.endContainer==a._current;h(a._current)&&(s||l)?(t=s?a.range.startOffset:0,i=(n=l?a.range.endOffset:a._current.length)-t,e&&(s||l)&&(a._current==e.startContainer&&e.startOffset>=t&&(e.startOffset-=i),a._current==e.endContainer&&e.endOffset>=n&&(e.endOffset-=i)),a._current.deleteData(t,i)):(r=a._current.parentNode,!e||a.range.startContainer!=r&&a.range.endContainer!=r||(o=u(a._current),r==e.startContainer&&e.startOffset>=o&&(e.startOffset-=1),r==e.endContainer&&e.endOffset>o&&(e.endOffset-=1)),c.remove(a._current))},hasPartialSubtree:function(){return!h(this._current)&&(c.isAncestorOrSelf(this._current,this.range.startContainer)||c.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),c.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),c.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new b(t)}}),_=a.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();i(t,e,!1),i(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,n,i,o,a,s,l=new v(this.ownerDocument),d=this.ownerDocument.selection;try{if(((e=d.createRange()).item?e.item(0):e.parentElement()).ownerDocument!=this.ownerDocument)return l}catch(e){return l}if("Control"==d.type)l.selectNode(e.item(0));else if(t=function(e){var t=e.duplicate(),n=e.duplicate();return t.collapse(!0),n.collapse(!1),c.commonAncestor(e.parentElement(),t.parentElement(),n.parentElement())}(e),r(e,l,t,!0),r(e,l,t,!1),9==l.startContainer.nodeType&&l.setStart(l.endContainer,l.startOffset),9==l.endContainer.nodeType&&l.setEnd(l.startContainer,l.endOffset),0===e.compareEndPoints("StartToEnd",e)&&l.collapse(!1),n=l.startContainer,i=l.endContainer,o=this.ownerDocument.body,!(l.collapsed||0!==l.startOffset||l.endOffset!=f(l.endContainer)||n==i&&h(n)&&n.parentNode==o)){for(a=!1,s=!1;0===u(n)&&n==n.parentNode.firstChild&&n!=o;)n=n.parentNode,a=!0;for(;u(i)==f(i.parentNode)-1&&i==i.parentNode.lastChild&&i!=o;)i=i.parentNode,s=!0;n==o&&i==o&&a&&s&&(l.setStart(n,0),l.setEnd(i,f(o)))}return l}}),k=a.extend({init:function(e){this.enumerate=function(){var t=[];return new b(e).traverse(function e(n){if(c.is(n,"img")||3==n.nodeType&&(!c.isWhitespace(n)||"\ufeff"==n.nodeValue))t.push(n);else for(n=n.firstChild;n;)e(n),n=n.nextSibling}),t}}}),w=a.extend({init:function(e,t){var n=this;n.range=e,n.rootNode=C.documentFromRange(e),n.body=t||n.getEditable(e),"body"!=c.name(n.body)&&(n.rootNode=n.body),n.html=n.body.innerHTML,n.startContainer=n.nodeToPath(e.startContainer),n.endContainer=n.nodeToPath(e.endContainer),n.startOffset=n.offset(e.startContainer,e.startOffset),n.endOffset=n.offset(e.endContainer,e.endOffset)},index:function(e){for(var t,n=0,i=e.nodeType;e=e.previousSibling;)(3!=(t=e.nodeType)||i!=t)&&n++,i=t;return n},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,i){for(var r=this.rootNode,o=n.length,a=i;o--;)r=r.childNodes[n[o]];for(;r&&3==r.nodeType&&a>r.nodeValue.length;)a-=r.nodeValue.length,r=r.nextSibling;r&&a>=0&&e[t?"setStart":"setEnd"](r,a)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),y=a.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=c.create(C.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t,n,i,r,o=this,a=o.caret.previousSibling,s=0;a&&(s=h(a)?a.nodeValue.length:u(a)),t=o.caret.parentNode,n=a?u(a):0,c.remove(o.caret),g(t),i=t.childNodes[n],h(i)?e.setStart(i,s):i?(r=c.lastTextNode(i))?e.setStart(r,r.nodeValue.length):e[a?"setStartAfter":"setStartBefore"](i):(d.msie||t.innerHTML||(t.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(t)),e.collapse(!0)},add:function(e,t){var n,i,r=this,o=e.collapsed&&!C.isExpandable(e),a=C.documentFromRange(e);return t&&e.collapsed&&(r.addCaret(e),e=C.expand(e)),(n=e.cloneRange()).collapse(!1),r.end=c.create(a,"span",{className:"k-marker"}),n.insertNode(r.end),(n=e.cloneRange()).collapse(!0),r.start=r.end.cloneNode(!0),n.insertNode(r.start),r._removeDeadMarkers(r.start,r.end),o&&(i=a.createTextNode("\ufeff"),c.insertAfter(i.cloneNode(),r.start),c.insertBefore(i,r.end)),g(e.commonAncestorContainer),e.setStartBefore(r.start),e.setEndAfter(r.end),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"\ufeff"==e.previousSibling.nodeValue&&c.remove(e.previousSibling),t.nextSibling&&"\ufeff"==t.nextSibling.nodeValue&&c.remove(t.nextSibling)},_normalizedIndex:function(e){for(var t=u(e),n=e;n.previousSibling;)3==n.nodeType&&3==n.previousSibling.nodeType&&t--,n=n.previousSibling;return t},remove:function(e){var t,n,i,r,o,a,s,l,d=this,u=d.start,p=d.end;for(g(e.commonAncestorContainer);!u.nextSibling&&u.parentNode;)u=u.parentNode;for(;!p.previousSibling&&p.parentNode;)p=p.parentNode;if(u.previousSibling&&3==u.previousSibling.nodeType&&u.nextSibling&&u.nextSibling.nodeType,p.previousSibling&&3==p.previousSibling.nodeType&&p.nextSibling&&p.nextSibling.nodeType,u=u.nextSibling,p=p.previousSibling,t=!1,n=!1,u==d.end&&(n=!!d.start.previousSibling,u=p=d.start.previousSibling||d.end.nextSibling,t=!0),c.remove(d.start),c.remove(d.end),!u||!p)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);if(i=t?h(u)?u.nodeValue.length:u.childNodes.length:0,r=h(p)?p.nodeValue.length:p.childNodes.length,3==u.nodeType)for(;u.previousSibling&&3==u.previousSibling.nodeType;)i+=(u=u.previousSibling).nodeValue.length;if(3==p.nodeType)for(;p.previousSibling&&3==p.previousSibling.nodeType;)r+=(p=p.previousSibling).nodeValue.length;o=u.parentNode,a=p.parentNode,s=this._normalizedIndex(u),l=this._normalizedIndex(p),g(o),3==u.nodeType&&(u=o.childNodes[s]),g(a),3==p.nodeType&&(p=a.childNodes[l]),t?(3==u.nodeType?e.setStart(u,i):e[n?"setStartAfter":"setStartBefore"](u),e.collapse(!0)):(3==u.nodeType?e.setStart(u,i):e.setStartBefore(u),3==p.nodeType?e.setEnd(p,r):e.setEndAfter(p)),d.caret&&d.removeCaret(e)}}),x=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,C={nodes:function(e){var t=C.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=C.textNodes(e)).length||(t=c.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return d.msie&&9>d.version?new v(e):e.createRange()},selectRange:function(e){var t,n=C.image(e);n&&(e.setStartAfter(n),e.setEndAfter(n)),(t=m.selectionFromRange(e)).removeAllRanges(),t.addRange(e)},stringify:function(e){return o.format("{0}:{1} - {2}:{3}",c.name(e.startContainer),e.startOffset,c.name(e.endContainer),e.endOffset)},split:function(e,t,n){function i(i){var r,o=e.cloneRange();o.collapse(i),o[i?"setStartBefore":"setEndAfter"](t),r=o.extractContents(),n&&(r=c.trim(r)),c[i?"insertBefore":"insertAfter"](r,t)}i(!0),i(!1)},mapAll:function(t,n){var i=[];return new b(t).traverse(function(t){var r=n(t);r&&e.inArray(r,i)<0&&i.push(r)}),i},getAll:function(e,t){var n=t;return"string"==typeof t&&(t=function(e){return c.is(e,n)}),C.mapAll(e,function(e){return t(e)?e:void 0})},getMarkers:function(e){return C.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=C.getAll(e,"img");return 1==t.length?t[0]:void 0},isStartOf:function(e,t){var n,i;for(e=e.cloneRange();0===e.startOffset&&e.startContainer!=t;){for(n=c.findNodeIndex(e.startContainer),i=e.startContainer.parentNode;n>0&&c.insignificant(i[n-1]);)n--;e.setStart(i,n)}return 0===e.startOffset&&e.startContainer==t},isEndOf:function(e,t){var n,i;return(e=e.cloneRange()).collapse(!1),n=e.startContainer,c.isDataNode(n)&&e.startOffset==c.getNodeLength(n)&&(e.setStart(n.parentNode,c.findNodeIndex(n)+1),e.collapse(!0)),e.setEnd(t,c.getNodeLength(t)),i=[],new b(e).traverse(function(e){c.insignificant(e)||i.push(e)}),!i.length},wrapSelectedElements:function(e){function t(e,t){var n,i=c.getNodeLength(t);if(e==i)return!0;for(n=e;i>n;n++)if(!c.insignificant(t.childNodes[n]))return!1;return!0}for(var n=c.editableParent(e.startContainer),i=c.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=n;)e.setStart(e.startContainer.parentNode,c.findNodeIndex(e.startContainer));for(;t(e.endOffset,e.endContainer)&&e.endContainer!=i;)e.setEnd(e.endContainer.parentNode,c.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t,n,i,r,o=e.cloneRange(),a=o.startContainer.childNodes[0===o.startOffset?0:o.startOffset-1],s=o.endContainer.childNodes[o.endOffset];return h(a)&&h(s)?(t=a.nodeValue,n=s.nodeValue,t&&n?(i=t.split("").reverse().join("").search(x),r=n.search(x),i&&r?(r=-1==r?n.length:r,i=-1==i?0:t.length-i,o.setStart(a,i),o.setEnd(s,r),o):o):o):o},isExpandable:function(e){var t,n,i,r,o,a,s=e.startContainer,l=C.documentFromRange(e);return s!=l&&s!=l.body&&(t=e.cloneRange(),!!(n=s.nodeValue)&&(i=n.substring(0,t.startOffset),r=n.substring(t.startOffset),o=0,a=0,i&&(o=i.split("").reverse().join("").search(x)),r&&(a=r.search(x)),o&&a))}};s(l,{SelectionUtils:m,W3CRange:v,RangeIterator:b,W3CSelection:_,RangeEnumerator:k,RestorePoint:w,Marker:y,RangeUtils:C})}(window.kendo.jQuery),function(e){function t(e,t){var n=e.selectionRestorePoint=new c(e.getRange()),i=new f(t,n);return i.editor=e,e.undoRedoStack.push(i),n}var n=window.kendo,i=n.Class,r=n.ui.editor,o=r.EditorUtils,a=o.registerTool,s=r.Dom,l=r.Tool,d=r.ToolTemplate,c=r.RestorePoint,u=r.Marker,h=e.extend,p=i.extend({init:function(e){this.options=e,this.restorePoint=new c(e.range),this.marker=new u,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(t,i){var r=this.editor;return e(t).appendTo(document.body).kendoWindow(h({},r.options.dialogOptions,i)).closest(".k-window").toggleClass("k-rtl",n.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),f=i.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),g=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e,t=this.editor,n=this.options,i=n.range,r=t.body,o=new c(i,r),a=n.html||n.value||"";t.selectRange(i),t.clipboard.paste(a,n),n.postProcess&&n.postProcess(t,t.getRange()),(e=new f(o,new c(t.getRange(),r))).editor=t,t.undoRedoStack.push(e),t.focus()}}),m=l.extend({initialize:function(e,t){var n=t.editor,i=this.options,o=i.items?i.items:n.options.insertHtml;new r.SelectBox(e,{dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){l.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new g(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),v=i.extend({init:function(){this.clear()},push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},clear:function(){this.stack=[],this.currentCommandIndex=-1},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),b=i.extend({init:function(e){this.editor=e},keydown:function(n){var i,r=this,o=r.editor,a=o.keyboard,s=a.isTypingKey(n),l=h(e.Event(),n);return r.editor.trigger("keydown",l),l.isDefaultPrevented()?(n.preventDefault(),!0):!(l.isDefaultPrevented()||!s||a.isTypingInProgress()||(i=o.getRange(),r.startRestorePoint=new c(i),a.startTyping(function(){r.endRestorePoint=t(o,r.startRestorePoint)}),0))},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),!!t.isTypingInProgress()&&(t.endTyping(),!0)}}),_=i.extend({init:function(e){this.editor=e},_addCaret:function(e){var t=s.create(this.editor.document,"a");return e.appendChild(t),t},_restoreCaret:function(e){var t=this.editor.createRange();t.setStartAfter(e),t.collapse(!0),this.editor.selectRange(t),s.remove(e)},_handleDelete:function(e){var t,n,i=e.endContainer,o=s.closestEditableOfType(i,s.blockElements);return!(!o||!r.RangeUtils.isEndOf(e,o)||(t=this._addCaret(o),(n=s.next(o))&&"p"==s.name(n)?(this._merge(o,n),this._restoreCaret(t),0):(s.remove(t),1)))},_handleBackspace:function(e){var t,n,i,o,a=e.startContainer,l=e.startOffset,d=s.closestEditableOfType(a,["li"]),c=s.closestEditableOfType(a,"p,h1,h2,h3,h4,h5,h6".split(","));if(s.isDataNode(a)){for(;l>=0&&"\ufeff"==a.nodeValue[l-1];)a.deleteData(l-1,1),l--;e.setStart(a,Math.max(0,l)),e.collapse(!0),this.editor.selectRange(e)}return c&&c.previousSibling&&r.RangeUtils.isStartOf(e,c)?(t=c.previousSibling,n=this._addCaret(t),this._merge(t,c),this._restoreCaret(n),!0):!(!d||!r.RangeUtils.isStartOf(e,d)||(i=new r.GreedyBlockFormatter([{tags:["p"]}]),o=d.firstChild,i.editor=this.editor,i.apply(d.childNodes),e.setStart(o,0),this.editor.selectRange(e),0))},_handleSelection:function(t){var n,i,o,a=t.commonAncestorContainer,l=s.closest(a,"table"),d=r.emptyElementContent;return/t(able|body)/i.test(s.name(a))&&t.selectNode(l),(n=new u).add(t,!1),t.setStartAfter(n.start),t.setEndBefore(n.end),i=t.startContainer,o=t.endContainer,t.deleteContents(),l&&""===e(l).text()&&(t.selectNode(l),t.deleteContents()),a=t.commonAncestorContainer,"p"===s.name(a)&&""===a.innerHTML&&(a.innerHTML=d,t.setStart(a,0)),this._join(i,o),s.insertAfter(this.editor.document.createTextNode("\ufeff"),n.start),n.remove(t),i=t.startContainer,"tr"==s.name(i)&&(i=i.childNodes[Math.max(0,t.startOffset-1)],t.setStart(i,s.getNodeLength(i))),t.collapse(!0),this.editor.selectRange(t),!0},_root:function(e){for(;e&&e.parentNode&&"body"!=s.name(e.parentNode);)e=e.parentNode;return e},_join:function(e,t){(e=this._root(e))!=(t=this._root(t))&&s.is(t,"p")&&this._merge(e,t)},_merge:function(e,t){for(s.removeTrailingBreak(e);t.firstChild;)e.appendChild(t.firstChild);s.remove(t)},keydown:function(e){var i,r,o=this.editor.getRange(),a=e.keyCode,s=n.keys,l=a===s.BACKSPACE,d=a==s.DELETE;!l&&!d||o.collapsed?l?i="_handleBackspace":d&&(i="_handleDelete"):i="_handleSelection",i&&(r=new c(o),this[i](o)&&(e.preventDefault(),t(this.editor,r)))},keyup:e.noop}),k=i.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=t(this.editor,this.startRestorePoint)},changed:function(){return!!this.startRestorePoint&&this.startRestorePoint.html!=this.editor.body.innerHTML},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),t.startRestorePoint=new c(n.getRange()),!0):!!i.isSystem(e)&&(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0)},keyup:function(){var e=this;return!(!e.systemCommandIsInProgress||!e.changed()||(e.systemCommandIsInProgress=!1,e.createUndoCommand(),0))}}),w=i.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&90>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||229==e},toolFromShortcut:function(t,n){var i,r,o=String.fromCharCode(n.keyCode);for(i in t)if(((r=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options)).key==o||r.key==n.keyCode)&&r.ctrl==n.ctrlKey&&r.alt==n.altKey&&r.shift==n.shiftKey)return i},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,i=this.handlers;for(n=0;i.length>n&&!i[n][t](e);n++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),y=i.extend({init:function(e){this.editor=e,this.cleaners=[new C,new S,new T,new D]},htmlToFragment:function(e){var t=this.editor.document,n=s.create(t,"div"),i=t.createDocumentFragment();for(n.innerHTML=e;n.firstChild;)i.appendChild(n.firstChild);return i},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,n=this.editor;if(!this._inProgress)return this._inProgress=!0,e=n.getRange(),t=new c(e),s.persistScrollTop(n.document),{range:e,restorePoint:t}},_endModification:function(e){t(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var n=this,i=n.editor,r=n._startModification();r&&(e.call(n,i,r.range),setTimeout(function(){t.call(n,i,r.range),n._endModification(r)}))},oncut:function(){this._contentModification(e.noop,e.noop)},_fileToDataURL:function(t){var n=e.Deferred(),i=new FileReader;return t instanceof window.File||(t=t.getAsFile()),i.onload=e.proxy(n.resolve,n),i.readAsDataURL(t),n.promise()},_triggerPaste:function(e,t){var n={html:e||""};n.html=n.html.replace(/\ufeff/g,""),this.editor.trigger("paste",n),this.paste(n.html,t||{})},_handleImagePaste:function(t){var n,i,r,o;if("FileReader"in window&&(r=(i=(n=t.clipboardData||t.originalEvent.clipboardData||window.clipboardData)&&(n.items||n.files))&&e.grep(i,function(e){return/^image\//i.test(e.type)})).length&&(o=this._startModification()))return e.when.apply(e,e.map(r,this._fileToDataURL)).done(e.proxy(function(){var t=Array.prototype.slice.call(arguments),n=e.map(t,function(e){return'<img src="'+e.target.result+'" />'}).join("");this._triggerPaste(n),this._endModification(o)},this)),!0},onpaste:function(t){return this._handleImagePaste(t)?void t.preventDefault():void this._contentModification(function(i,r){var o,a,l,d=s.create(i.document,"div",{className:"k-paste-container",innerHTML:"\ufeff"}),c=n.support.browser;i.body.appendChild(d),c.msie&&11>c.version?(t.preventDefault(),(o=i.createRange()).selectNodeContents(d),i.selectRange(o),(a=i.document.body.createTextRange()).moveToElementText(d),e(i.body).unbind("paste"),a.execCommand("Paste"),e(i.body).bind("paste",e.proxy(this.onpaste,this))):((l=i.createRange()).selectNodeContents(d),i.selectRange(l)),r.deleteContents()},function(t,n){var i,r="";t.selectRange(n),(i=e(t.body).children(".k-paste-container")).each(function(){var e=this.lastChild;e&&s.is(e,"br")&&s.remove(e),r+=this.innerHTML}),i.remove(),this._triggerPaste(r,{clean:!0})})},splittableParent:function(e,t){var n,i;if(e)return s.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(n=t.parentNode,i=t.ownerDocument.body,s.isInline(n))for(;n.parentNode!=i&&!s.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(t,n){var i,o,a,l,d,c,p,f,g,m,v,b,_=this.editor;for(n=h({clean:!1,split:!0},n),i=0,o=this.cleaners.length;o>i;i++)this.cleaners[i].applicable(t)&&(t=this.cleaners[i].clean(t));if(n.clean&&(t=(t=t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3")).replace(/<(a|span)[^>]*><\/\1>/gi,"")),t=t.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),a=this.isBlock(t),_.focus(),(l=_.getRange()).deleteContents(),l.startContainer==_.document&&l.selectNodeContents(_.body),c=(d=new u).addCaret(l),f=!1,g=(p=this.splittableParent(a,c))!=_.body&&!s.is(p,"td"),n.split&&g&&(a||s.isInline(p))&&(l.selectNode(c),r.RangeUtils.split(l,p,!0),f=!0),(m=this.htmlToFragment(t)).firstChild&&"k-paste-container"===m.firstChild.className){for(v=[],i=0,o=m.childNodes.length;o>i;i++)v.push(m.childNodes[i].innerHTML);m=this.htmlToFragment(v.join("<br />"))}if(e(m.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),l.insertNode(m),p=this.splittableParent(a,c),f){for(;c.parentNode!=p;)s.unwrap(c.parentNode);s.unwrap(c.parentNode)}s.normalize(l.commonAncestorContainer),c.style.display="inline",s.restoreScrollTop(_.document),s.scrollTo(c),d.removeCaret(l),b=l.commonAncestorContainer.parentNode,l.collapsed&&"tbody"==s.name(b)&&(l.setStartAfter(e(b).closest("table")[0]),l.collapse(!0)),_.selectRange(l)}}),x=i.extend({clean:function(e){var t,n,i=this.replacements;for(t=0,n=i.length;n>t;t+=2)e=e.replace(i[t],i[t+1]);return e}}),C=x.extend({init:function(){this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return/<script[^>]*>/i.test(e)}}),S=x.extend({init:function(){this.replacements=[/<span\s+class="Apple-tab-span"[^>]*>\s*<\/span>/gi," ",/\t/gi," ",/&nbsp;&nbsp; &nbsp;/gi," "]},applicable:function(e){return/&nbsp;&nbsp; &nbsp;|class="?Apple-tab-span/i.test(e)}}),T=x.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)font(\s[^>]*)?>/gi,this.convertFontMatch,/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,"",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "}]},convertFontMatch:function(e,t,n){var i=/face=['"]([^'"]+)['"]/i.exec(n),r=n&&i&&i[1];return t?"</span>":r?'<span style="font-family:'+r+'">':"<span>"},applicable:function(e){return/class="?Mso/i.test(e)||/style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e){var t;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(e)&&(t=!0),e=e.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,""),!t&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)||t&&/^.\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?t=e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(s.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivx]+\.$/i.test(e.firstChild.nodeValue)&&s.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&s.remove(e.firstChild),t=e.innerHTML),s.remove(e),s.create(document,"li",{innerHTML:t})},lists:function(t){var n,i,r,o,a,l,d,c,u,h=e(s.blockElements.join(","),t),p=-1,f={ul:{},ol:{}},g=t;for(r=0;h.length>r;r++)if(o=h[r],a=this.listType(o.innerHTML),"td"!=(i=s.name(o)))if(a&&"p"==i){if(l=parseFloat(o.style.marginLeft||0),d=f[a][l],(l>p||!d)&&(d=s.create(document,a),g==t?s.insertBefore(d,o):g.appendChild(d),f[a][l]=d),n!=a)for(c in f)for(u in f[c])e.contains(d,f[c][u])&&delete f[c][u];g=this._convertToLi(o),d.appendChild(g),p=l,n=a}else o.innerHTML?(f={ul:{},ol:{}},g=t,p=-1):s.remove(o)},removeAttributes:function(e){for(var t=e.attributes,n=t.length;n--;)"colspan"!=s.name(t[n])&&e.removeAttributeNode(t[n])},createColGroup:function(t){var i=t.cells,r=e(t).closest("table"),o=r.children("colgroup");2>i.length||(o.length&&(i=o.children(),o[0].parentNode.removeChild(o[0])),(o=e(e.map(i,function(e){var t=e.width;return t&&0!==parseInt(t,10)?n.format('<col style="width:{0}px;"/>',t):"<col />"}).join(""))).is("colgroup")||(o=e("<colgroup/>").append(o)),o.prependTo(r))},convertHeaders:function(t){var n,i=t.cells,r=e.map(i,function(t){var n=e(t).children("p").children("strong")[0];return n&&"strong"==s.name(n)?n:void 0});if(r.length==i.length){for(n=0;r.length>n;n++)s.unwrap(r[n]);for(e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t),n=0;i.length>n;n++)s.changeTag(i[n],"th")}},removeParagraphs:function(t){var n,i,r,o;for(n=0;t.length>n;n++)for(this.removeAttributes(t[n]),i=0,r=(o=e(t[n]).children("p")).length;r>i;i++)r-1>i&&s.insertAfter(s.create(document,"br"),o[i]),s.unwrap(o[i])},removeDefaultColors:function(e){for(var t=0;e.length>t;t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)&&s.unwrap(e[t])},tables:function(t){var n,i,r,o,a,s=e(t).find("table"),l=this;for(o=0;s.length>o;o++){for(r=i=(n=s[o].rows)[0],a=1;n.length>a;a++)n[a].cells.length>r.cells.length&&(r=n[a]);l.createColGroup(r),l.convertHeaders(i),l.removeAttributes(s[o]),l.removeParagraphs(s.eq(o).find("td,th")),l.removeDefaultColors(s.eq(o).find("span"))}},headers:function(t){var n,i=e(t).find("p.MsoTitle");for(n=0;i.length>n;n++)s.changeTag(i[n],"h1")},clean:function(e){var t,n=this;return e=x.fn.clean.call(n,e),e=n.stripEmptyAnchors(e),t=s.create(document,"div",{innerHTML:e}),n.headers(t),n.lists(t),n.tables(t),t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}}),D=x.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}}),I=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor;n.support.browser.msie?e.document.execCommand("print",!1,null):e.window.print&&e.window.print()}}),E=p.extend({init:function(e){this.async=!0,p.fn.init.call(this,e)},exec:function(){var e=this,t=this.lockRange(!0);this.editor.saveAsPDF().then(function(){e.releaseRange(t)})}});h(r,{_finishUpdate:t,Command:p,GenericCommand:f,InsertHtmlCommand:g,InsertHtmlTool:m,UndoRedoStack:v,TypingHandler:b,SystemHandler:k,BackspaceHandler:_,Keyboard:w,Clipboard:y,Cleaner:x,TabCleaner:S,MSWordFormatCleaner:T,WebkitFormatCleaner:D,PrintCommand:I,ExportPdfCommand:E}),a("insertHtml",new m({template:new d({template:o.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})})),a("print",new l({command:I,template:new d({template:o.buttonTemplate,title:"Print"})})),a("pdf",new l({command:E,template:new d({template:o.buttonTemplate,title:"Export PDF"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=t.ui.Editor.fn.options.formats,o=i.EditorUtils,a=i.Tool,s=i.ToolTemplate,l=i.FormatTool,d=i.Dom,c=i.RangeUtils,u=e.extend,h=i.EditorUtils.registerTool,p=i.EditorUtils.registerFormat,f="k-marker",g=n.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,n=0,i=0,r=0,o=e.parentNode;for(t=o.firstChild;t;t=t.nextSibling)t!=e&&(t.className==f?r++:3==t.nodeType?n++:i++);return r>1&&o.firstChild.className==f&&o.lastChild.className==f?0:i+n},findSuitable:function(e,t){var n,i;if(!t&&this.numberOfSiblings(e)>0)return null;for(n=e.parentNode,i=this.format[0].tags;!d.ofType(n,i);){if(this.numberOfSiblings(n)>0)return null;n=n.parentNode}return n},findFormat:function(e){var t,n,i,r,o,a=this.format,s=d.attrEquals;for(t=0,n=a.length;n>t;t++){if(i=e,r=a[t].tags,o=a[t].attr,i&&d.ofType(i,r)&&s(i,o))return i;for(;i;)if((i=d.parentOfType(i,r))&&s(i,o))return i}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=n.extend({init:function(e,t){this.finder=new g(e),this.attributes=u({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return d.wrap(e,d.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=c.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,n,i,r,o=[];for(t=0,n=e.length;n>t;t++){if(i=e[t],r=this.finder.findSuitable(i))d.attr(r,this.attributes);else{for(;!d.isBlock(i.parentNode)&&1==i.parentNode.childNodes.length;)i=i.parentNode;r=this.wrap(i)}o.push(r)}this.consolidate(o)},remove:function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)(i=this.finder.findFormat(e[t]))&&(this.attributes&&this.attributes.style?(d.unstyle(i,this.attributes.style),i.style.cssText||i.attributes.class||d.unwrap(i)):d.unwrap(i))},split:function(e){var t,n,i=c.textNodes(e),r=i.length;if(r>0)for(t=0;r>t;t++)(n=this.finder.findFormat(i[t]))&&c.split(e,n,!0)},consolidate:function(e){for(var t,n;e.length>1;)if(t=e.pop(),n=e[e.length-1],t.previousSibling&&t.previousSibling.className==f&&n.appendChild(t.previousSibling),t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){for(;t.firstChild;)n.appendChild(t.firstChild);d.remove(t)}}}),v=g.extend({init:function(e,t){this.format=e,this.greedyProperty=t,g.fn.init.call(this,e)},getInlineCssValue:function(t){var n,i,r,o,a,s,l,c,u,h,p,f,g=t.attributes,m=e.trim;if(g)for(n=0,i=g.length;i>n;n++)if(o=(r=g[n]).nodeName,a=r.nodeValue,r.specified&&"style"==o)for(c=0,u=(s=m(a||t.style.cssText).split(";")).length;u>c;c++)if((l=s[c]).length){if(p=m((h=l.split(":"))[0].toLowerCase()),f=m(h[1]),p!=this.greedyProperty)continue;return p.indexOf("color")>=0?d.toHex(f):f}},getFormatInner:function(t){var n,i,r,o=e(d.isDataNode(t)?t.parentNode:t).parentsUntil("[contentEditable]").addBack().toArray().reverse();for(n=0,i=o.length;i>n;n++)if(r="className"==this.greedyProperty?o[n].className:this.getInlineCssValue(o[n]))return r;return"inherit"},getFormat:function(e){var t,n,i=this.getFormatInner(e[0]);for(t=1,n=e.length;n>t;t++)if(i!=this.getFormatInner(e[t]))return"";return i},isFormatted:function(e){return""!==this.getFormat(e)}}),b=m.extend({init:function(e,n,i){m.fn.init.call(this,e,n),this.values=n,this.finder=new v(e,i),i&&(this.greedyProperty=t.toCamelCase(i))},activate:function(e,t){var n=this.greedyProperty,i="apply";this.split(e),n&&"inherit"==this.values.style[n]&&(i="remove"),this[i](t)}}),_=l.extend({init:function(e){l.fn.init.call(this,u(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}}),k=a.extend({update:function(e,t){var n=e.data(this.type);n.close(),n.value(this.finder.getFormat(t))}}),w=k.extend({init:function(e){a.fn.init.call(this,e),this.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new b(n,{style:r},t.cssAttr)}}))},initialize:function(e,t){var n,i=t.editor,r=this.options,o=r.name,s=[];r.defaultValue&&(s=[{text:i.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),n=s.concat(r.items?r.items:i.options[o]||[]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(){a.exec(i,o,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),y=a.extend({init:function(e){a.fn.init.call(this,e),this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new b(n,{style:r},t.cssAttr)}}))},initialize:function(n,i){var r=i.editor,o=this.name,s=u({},y.fn.options,this.options),l=s.palette;(n=this._widget=new t.ui.ColorPicker(n,{value:e.isArray(l)?l[0]:"#000",toolIcon:"k-"+s.name,palette:l,change:function(){var e=n.value();e&&a.exec(r,o,e),r.focus()},activate:function(e){e.preventDefault(),n.trigger("change")}})).wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});u(i,{InlineFormatFinder:g,InlineFormatter:m,DelayedExecutionTool:k,GreedyInlineFormatFinder:v,GreedyInlineFormatter:b,InlineFormatTool:_,FontTool:w,ColorTool:y}),p("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new _({key:"B",ctrl:!0,format:r.bold,template:new s({template:o.buttonTemplate,title:"Bold"})})),p("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new _({key:"I",ctrl:!0,format:r.italic,template:new s({template:o.buttonTemplate,title:"Italic"})})),p("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),h("underline",new _({key:"U",ctrl:!0,format:r.underline,template:new s({template:o.buttonTemplate,title:"Underline"})})),p("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new _({format:r.strikethrough,template:new s({template:o.buttonTemplate,title:"Strikethrough"})})),p("superscript",[{tags:["sup"]}]),h("superscript",new _({format:r.superscript,template:new s({template:o.buttonTemplate,title:"Superscript"})})),p("subscript",[{tags:["sub"]}]),h("subscript",new _({format:r.subscript,template:new s({template:o.buttonTemplate,title:"Subscript"})})),h("foreColor",new y({cssAttr:"color",domAttr:"color",name:"foreColor",template:new s({template:o.colorPickerTemplate,title:"Color"})})),h("backColor",new y({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new s({template:o.colorPickerTemplate,title:"Background Color"})})),h("fontName",new w({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new w({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(e){var t,n=window.kendo,i=n.Class,r=e.extend,o=n.ui.editor,a=n.ui.Editor.fn.options.formats,s=o.Dom,l=o.Command,d=o.ToolTemplate,c=o.FormatTool,u=o.EditorUtils,h=u.registerTool,p=u.registerFormat,f=o.RangeUtils,g=i.extend({init:function(e){this.format=e},contains:function(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)if(!(r=t[n])||!s.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var n,i,r,o,a=this.format,l=[];for(n=0,i=t.length;i>n;n++){for(o=a.length-1;o>=0&&!(r=s.ofType(t[n],a[o].tags)?t[n]:s.parentOfType(t[n],a[o].tags));o--);if(!r||"true"===r.contentEditable)return[];e.inArray(r,l)<0&&l.push(r)}for(n=0,i=l.length;i>n;n++)if(this.contains(l[n],l))return[l[n]];return l},findFormat:function(e){var t,n,i,r,o,a=this.format,l=s.editableParent(e);for(t=0,n=a.length;n>t;t++)for(i=e,r=a[t].tags,o=a[t].attr;i&&s.isAncestorOf(l,i);){if(s.ofType(i,r)&&s.attrEquals(i,o))return i;i=i.parentNode}return null},getFormat:function(e){var t,n,i=this,r=function(e){return i.findFormat(s.isDataNode(e)?e.parentNode:e)},o=r(e[0]);if(!o)return"";for(t=1,n=e.length;n>t;t++)if(o!=r(e[t]))return"";return o.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;n>t;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=i.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new g(e)},wrap:function(e,t,n){var i,r,o,a,l,d=1==n.length?s.blockParentOrBody(n[0]):s.commonAncestor.apply(null,n);for(s.isInline(d)&&(d=s.blockParentOrBody(d)),i=s.significantChildNodes(d),r=s.findNodeIndex(i[0]),o=s.create(d.ownerDocument,e,t),a=0;i.length>a;a++)l=i[a],s.isBlock(l)?(s.attr(l,t),o.childNodes.length&&(s.insertBefore(o,l),o=o.cloneNode(!1)),r=s.findNodeIndex(l)+1):o.appendChild(l);o.firstChild&&s.insertAt(d,o,r)},apply:function(t){function n(e){return r({},e&&e.attr,c)}var i,o,a,l,d,c=this.values,h=s.filter("img",t),p=n(u.formatByName("img",this.format));if(e.each(h,function(){s.attr(this,p)}),h.length!=t.length)if(o=s.filter("img",t,!0),(a=this.finder.findSuitable(o)).length)for(l=0,d=a.length;d>l;l++)i=u.formatByName(s.name(a[l]),this.format),s.attr(a[l],n(i));else i=this.format[0],this.wrap(i.tags[0],n(i),o)},remove:function(e){var t,n,i,r,o;for(t=0,n=e.length;n>t;t++)(i=this.finder.findFormat(e[t]))&&("div"!=(o=s.name(i))||i.getAttribute("class")?((r=u.formatByName(o,this.format)).attr.style&&s.unstyle(i,r.attr.style),r.attr.className&&s.removeClass(i,r.attr.className)):s.unwrap(i))},toggle:function(e){var t=this,n=f.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),v=i.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new g(e)},apply:function(e){var t,n,i,r,a,l,d,c=this.format,u=s.blockParents(e),h=c[0].tags[0];if(u.length)for(t=0,n=u.length;n>t;t++)"li"==(d=s.name(u[t]))?(i=u[t].parentNode,r=new o.ListFormatter(i.nodeName.toLowerCase(),h),(a=this.editor.createRange()).selectNode(u[t]),r.toggle(a)):h&&("td"==d||u[t].attributes.contentEditable)?new m(c,this.values).apply(u[t].childNodes):(l=s.changeTag(u[t],h),s.attr(l,c[0].attr));else new m(c,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=f.textNodes(e)).length||(t=s.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),b=l.extend({init:function(e){e.formatter=e.formatter(),l.fn.init.call(this,e)}}),_=c.extend({init:function(e){c.fn.init.call(this,r(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}});r(o,{BlockFormatFinder:g,BlockFormatter:m,GreedyBlockFormatter:v,FormatCommand:b,BlockFormatTool:_}),t=["ul","ol","li"],p("justifyLeft",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"left",listStylePosition:""}}}]),h("justifyLeft",new _({format:a.justifyLeft,template:new d({template:u.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:t,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),h("justifyCenter",new _({format:a.justifyCenter,template:new d({template:u.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),h("justifyRight",new _({format:a.justifyRight,template:new d({template:u.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:t,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),h("justifyFull",new _({format:a.justifyFull,template:new d({template:u.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,o=i.Command,a=i.Tool,s=i.BlockFormatter,l=r.normalize,d=i.RangeUtils,c=i.EditorUtils.registerTool,u=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},_insertMarker:function(e,t){var n,i=r.create(e,"a");return i.className="k-marker",t.insertNode(i),i.parentNode||((n=t.commonAncestorContainer).innerHTML="",n.appendChild(i)),l(i.parentNode),i},_moveFocus:function(e,t){if(r.isEmpty(t))e.setStartBefore(t);else{e.selectNodeContents(t);var n=d.textNodes(e)[0];if(!n){for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;n=t}r.isEmpty(n)?e.setStartBefore(n):e.selectNodeContents(n)}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),n=r.parentOfType(e.startContainer,t),i=r.parentOfType(e.endContainer,t);return n&&!i||!n&&i},_blankAfter:function(e){for(;e&&(r.isMarker(e)||""===r.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,n,o,a,c,u,h,p=this.getRange(),f=d.documentFromRange(p),g=i.emptyElementContent,m=this.shouldTrim(p);p.deleteContents(),a=this._insertMarker(f,p),c=r.closestEditableOfType(a,["li"]),u=r.closestEditableOfType(a,"h1,h2,h3,h4,h5,h6".split(",")),c?r.emptyNode(c)&&(o=r.create(f,"p"),c.nextSibling&&((h=p.cloneRange()).selectNode(c),d.split(h,c.parentNode)),r.insertAfter(o,c.parentNode),r.remove(1==c.parentNode.childNodes.length?c.parentNode:c),o.innerHTML=g,n=o):u&&this._blankAfter(a)&&(o=r.create(f,"p"),r.insertAfter(o,u),o.innerHTML=g,r.remove(a),n=o),n||(c||u||new s([{tags:["p"]}]).apply([a]),p.selectNode(a),e=r.parentOfType(a,[c?"li":u?r.name(u):"p"]),d.split(p,e,m),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),n=e.nextSibling,this.clean(t),this.clean(n,{links:!0}),r.is(n,"li")&&n.firstChild&&!r.is(n.firstChild,"br")&&(n=n.firstChild),r.remove(e),l(t)),l(n),this._moveFocus(p,n),p.collapse(!0),r.scrollTo(n),d.selectRange(p)},clean:function(t,n){var o,a=t;if(t.firstChild&&r.is(t.firstChild,"br")&&r.remove(t.firstChild),r.isDataNode(t)&&!t.nodeValue&&(t=t.parentNode),t){for(o=!1;t.firstChild&&1==t.firstChild.nodeType;)o=o||r.significantNodes(t.childNodes).length>1,t=t.firstChild;if(r.isEmpty(t)||!/^\s*$/.test(t.innerHTML)||o||(e(a).find(".k-br").remove(),t.innerHTML=i.emptyElementContent),n&&n.links)for(;t!=a;){if(r.is(t,"a")&&r.emptyNode(t)){r.unwrap(t);break}t=t.parentNode}}}}),h=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},exec:function(){var e,n=this.getRange(),i=r.create(d.documentFromRange(n),"br"),o=t.support.browser,a=o.msie&&11>o.version;n.deleteContents(),n.insertNode(i),l(i.parentNode),a||i.nextSibling&&!r.isWhitespace(i.nextSibling)||((e=i.cloneNode(!0)).className="k-br",r.insertAfter(e,i)),n.setStartAfter(i),n.collapse(!0),r.scrollTo(i.nextSibling||i),d.selectRange(n)}});n(i,{ParagraphCommand:u,NewLineCommand:h}),c("insertLineBreak",new a({key:13,shift:!0,command:h})),c("insertParagraph",new a({key:13,command:u}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=r.Dom,a=r.RangeUtils,s=r.EditorUtils,l=r.Command,d=r.ToolTemplate,c=r.FormatTool,u=r.BlockFormatFinder,h=a.textNodes,p=r.EditorUtils.registerTool,f=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,n,i=[];for(n=0;e.length>n;n++)(t=this.findFormat(e[n]))&&o.name(t)==this.tag&&i.push(t);if(1>i.length)return!1;if(i.length!=e.length)return!1;for(n=0;i.length>n&&i[n].parentNode==t.parentNode;n++)if(i[n]!=t)return!1;return!0},findSuitable:function(e){var t=this.findFormat(e[0]);return t&&o.name(t)==this.tag?t:null}}),g=n.extend({init:function(e,t){var n=this;n.finder=new f(e),n.tag=e,n.unwrapTag=t},isList:function(e){var t=o.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var n,i,r=o.create(e.ownerDocument,"li");for(n=0;t.length>n;n++)if(i=t[n],o.is(i,"li"))e.appendChild(i);else if(this.isList(i))for(;i.firstChild;)e.appendChild(i.firstChild);else if(o.is(i,"td")){for(;i.firstChild;)r.appendChild(i.firstChild);e.appendChild(r),i.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(i),o.isBlock(i)&&(e.appendChild(r),o.unwrap(i),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var n=0;t.length>n;n++)if(o.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var n=e.nextSibling;if(n&&o.isBlock(n))return!1;if((n=e.previousSibling)&&o.isBlock(n))return!1}return this.containsAny(e,t)||o.isInline(e)||3==e.nodeType},_parentLists:function(t){var n=o.closestEditable(t);return e(t).parentsUntil(n,"ul,ol")},split:function(e){var t,n,i,r,s,l,d=h(e);if(d.length)for(t=o.parentOfType(d[0],["li"]),n=o.parentOfType(d[d.length-1],["li"]),e.setStartBefore(t),e.setEndAfter(n),r=0,s=d.length;s>r;r++)(l=this.finder.findFormat(d[r]))&&((i=this._parentLists(l)).length?a.split(e,i.last()[0],!0):a.split(e,l,!0))},merge:function(e,t){for(var n,i=t.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&o.isWhitespace(i));)i=i.previousSibling;if(i&&o.name(i)==e){for(;t.firstChild;)i.appendChild(t.firstChild);o.remove(t),t=i}for(n=t.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&o.isWhitespace(n));)n=n.nextSibling;if(n&&o.name(n)==e){for(;t.lastChild;)n.insertBefore(t.lastChild,n.firstChild);o.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(o.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,n){function i(){c.push(this)}var r,a,s,l=this.tag,d=o.closestSplittableParent(n),c=[],u=this.finder.findSuitable(n);for(u||(u=new f("ul"==l?"ol":"ul").findSuitable(n)),/table|tbody/.test(o.name(d))?r=e.map(n,function(e){return o.parentOfType(e,["td"])}):(r=o.significantChildNodes(d),e.grep(r,o.isBlock).length&&(r=e.grep(r,e.proxy(function(e){return this.containsAny(e,n)},this))),r.length||(r=n)),a=0;r.length>a;a++)s=r[a],(!u||!o.isAncestorOrSelf(u,s))&&this.suitable(s,n)&&(u&&this.isList(s)?(e.each(s.childNodes,i),o.remove(s)):c.push(s));c.length==r.length&&this.breakable(d)&&(c=[d]),u||(u=o.create(d.ownerDocument,l),o.insertBefore(u,c[0])),this.wrap(u,c),o.is(u,l)||o.changeTag(u,l),this.merge(l,u)},apply:function(e){var t,n,i,r=0,a=[];do{i=o.closestEditable(e[r],["td","body"]),t&&i==t?n.push(e[r]):(t&&a.push({section:t,nodes:n}),n=[e[r]],t=i),r++}while(e.length>r);for(a.push({section:t,nodes:n}),r=0;a.length>r;r++)this.applyOnSection(a[r].section,a[r].nodes)},unwrap:function(e){var t,n,i,r,a=e.ownerDocument.createDocumentFragment(),s=this.unwrapTag;for(n=e.firstChild;n;n=n.nextSibling){for(i=o.create(e.ownerDocument,s||"p");n.firstChild;)r=n.firstChild,o.isBlock(r)?(i.firstChild&&(a.appendChild(i),i=o.create(e.ownerDocument,s||"p")),a.appendChild(r)):i.appendChild(r);i.firstChild&&a.appendChild(i)}(t=this._parentLists(e))[0]?(o.insertAfter(a,t.last()[0]),t.last().remove()):o.insertAfter(a,e),o.remove(e)},remove:function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)(t=this.finder.findFormat(e[n]))&&this.unwrap(t)},toggle:function(e){var t,n=this,i=h(e),r=e.commonAncestorContainer;i.length||(e.selectNodeContents(r),(i=h(e)).length||(t=r.ownerDocument.createTextNode(""),e.startContainer.appendChild(t),i=[t],e.selectNode(t.parentNode))),n.finder.isFormatted(i)?(n.split(e),n.remove(i)):n.apply(i)}}),m=l.extend({init:function(e){e.formatter=new g(e.tag),l.fn.init.call(this,e)}}),v=c.extend({init:function(e){this.options=e,c.fn.init.call(this,i(e,{finder:new f(e.tag)}))},command:function(e){return new m(i(e,{tag:this.options.tag}))}});i(r,{ListFormatFinder:f,ListFormatter:g,ListCommand:m,ListTool:v}),p("insertUnorderedList",new v({tag:"ul",template:new d({template:s.buttonTemplate,title:"Insert unordered list"})})),p("insertOrderedList",new v({tag:"ol",template:new d({template:s.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=e.proxy,o=t.ui.editor,a=o.Dom,s=o.RangeUtils,l=o.EditorUtils,d=o.Command,c=o.Tool,u=o.ToolTemplate,h=o.InlineFormatter,p=o.InlineFormatFinder,f=s.textNodes,g=o.EditorUtils.registerTool,m=n.extend({findSuitable:function(e){return a.parentOfType(e,["a"])}}),v=n.extend({init:function(){this.finder=new m},apply:function(e,t){var n,i,r,o,l,d,c,u=f(e);if(t.innerHTML){for(i=s.documentFromRange(e),n=s.getMarkers(e),e.deleteContents(),o=a.create(i,"a",t),e.insertNode(o),l=o.parentNode,"a"==a.name(l)&&a.insertAfter(o,l),a.emptyNode(l)&&a.remove(l),d=o,c=0;n.length>c;c++)a.insertAfter(n[c],d),d=n[c];n.length&&(a.insertBefore(i.createTextNode("\ufeff"),n[1]),a.insertAfter(i.createTextNode("\ufeff"),n[1]),e.setStartBefore(n[0]),e.setEndAfter(n[n.length-1]))}else(r=new h([{tags:["a"]}],t)).finder=this.finder,r.apply(u)}}),b=d.extend({init:function(e){e.formatter={toggle:function(e){new h([{tags:["a"]}]).remove(f(e))}},this.options=e,d.fn.init.call(this,e)}}),_=d.extend({init:function(e){this.options=e,d.fn.init.call(this,e),this.formatter=new v,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(this.attributes=null,this.async=!0)},_dialogTemplate:function(){return t.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var t,n,i,o,s=(this.getRange().collapsed,this.editor.options.messages);this._initialText="",this._range=this.lockRange(!0),n=(t=f(this._range)).length?this.formatter.finder.findSuitable(t[0]):null,i=t.length&&"img"==a.name(t[0]),o=this.createDialog(this._dialogTemplate(),{title:s.createLink,close:r(this._close,this),visible:!1}),n&&(this._range.selectNodeContents(n),t=f(this._range)),this._initialText=this.linkText(t),o.find(".k-dialog-insert").click(r(this._apply,this)).end().find(".k-dialog-close").click(r(this._close,this)).end().find(".k-edit-field input").keydown(r(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this._initialText).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",!!n&&"_blank"==n.target).end().find(".k-editor-link-text-row").toggle(!i),this._dialog=o.data("kendoWindow").center().open(),e("#k-editor-link-url",o).focus().select()},_keydown:function(e){var n=t.keys;e.keyCode==n.ENTER?this._apply(e):e.keyCode==n.ESC&&this._close(e)},_apply:function(t){var n,i,r,o=this._dialog.element,s=e("#k-editor-link-url",o).val(),l=e("#k-editor-link-text",o);s&&"http://"!=s&&(s.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(s)&&(s="mailto:"+s),this.attributes={href:s},(n=e("#k-editor-link-title",o).val())&&(this.attributes.title=n),l.is(":visible")&&((i=l.val())||this._initialText?i&&i!==this._initialText&&(this.attributes.innerHTML=a.stripBom(i)):this.attributes.innerHTML=s),r=e("#k-editor-link-target",o).is(":checked"),this.attributes.target=r?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),a.windowFromDocument(s.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):"http://"},linkText:function(e){var t,n="";for(t=0;e.length>t;t++)n+=e[t].nodeValue;return a.stripBom(n||"")},redo:function(){var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),k=c.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),c.fn.init.call(this,e.extend(t,{command:b}))},initialize:function(e,t){c.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});i(t.ui.editor,{LinkFormatFinder:m,LinkFormatter:v,UnlinkCommand:b,LinkCommand:_,UnlinkTool:k}),g("createLink",new c({key:"K",ctrl:!0,command:_,template:new u({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new k({key:"K",ctrl:!0,shift:!0,template:new u({template:l.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,d=r.RangeUtils,c=r.Command,u=r.LinkFormatter,h=d.textNodes,p=n.keys,f="#k-editor-file-url",g="#k-editor-file-title",m=c.extend({init:function(e){var t=this;c.fn.init.call(t,e),t.formatter=new u,t.async=!0,t.attributes={}},insertFile:function(e,t){var n=this.attributes,i=d.documentFromRange(t);if(n.href&&"http://"!=n.href){if(!e)return(e=a.create(i,"a",{href:n.href})).innerHTML=n.innerHTML,t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(i.createTextNode("\ufeff"),e),t.setStartAfter(e),t.setEndAfter(e),d.selectRange(t),!0;a.attr(e,n)}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this.lockRange();this.formatter.apply(e,this.attributes),this.releaseRange(e)},exec:function(){function e(e){var n=r.element,i=n.find(f).val().replace(/ /g,"%20"),a=n.find(g).val();o.attributes={href:i,innerHTML:""!==a?a:i},c=o.insertFile(u,s),t(e),o.change&&o.change()}function t(e){e.preventDefault(),r.destroy(),a.windowFromDocument(d.documentFromRange(s)).focus(),c||o.releaseRange(s)}var r,o=this,s=o.lockRange(),l=h(s),c=!1,u=l.length?this.formatter.finder.findSuitable(l[0]):null,m=o.editor.options,v=m.messages,b=m.fileBrowser,_=!!(n.ui.FileBrowser&&b&&b.transport&&void 0!==b.transport.read),k={title:v.insertFile,visible:!1,resizable:_};k.close=t,_&&(k.width=750),r=this.createDialog(o._dialogTemplate(_),k).toggleClass("k-filebrowser-dialog",_).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(t).end().find(".k-edit-field input").keydown(function(n){n.keyCode==p.ENTER?e(n):n.keyCode==p.ESC&&t(n)}).end().find(f).val(u?u.getAttribute("href",2):"http://").end().find(g).val(u?u.title:"").end().data("kendoWindow"),_&&new n.ui.FileBrowser(r.element.find(".k-filebrowser"),i({},b,{change:function(){r.element.find(f).val(this.value())},apply:e})),r.center().open(),r.element.find(f).focus().select()}});n.ui.editor.FileCommand=m,s("insertFile",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,d=r.RangeUtils,c=r.Command,u=n.keys,h="#k-editor-image-url",p="#k-editor-image-title",f="#k-editor-image-width",g="#k-editor-image-height",m=c.extend({init:function(e){var t=this;c.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n,i=this.attributes,r=d.documentFromRange(t);if(i.src&&"http://"!=i.src){if(n=function(){setTimeout(function(){i.width||e.removeAttribute("width"),i.height||e.removeAttribute("height"),e.removeAttribute("complete")})},!e)return(e=a.create(r,"img",i)).onload=e.onerror=n,t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(r.createTextNode("\ufeff"),e),n(),t.setStartAfter(e),t.setEndAfter(e),d.selectRange(t),!0;e.onload=e.onerror=n,a.attr(e,i),n()}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();e.insertImage(d.image(t),t)||e.releaseRange(t)},exec:function(){function e(e){var n=r.element,i=parseInt(n.find(f).val(),10),a=parseInt(n.find(g).val(),10);o.attributes={src:n.find(h).val().replace(/ /g,"%20"),alt:n.find(p).val()},o.attributes.width=null,o.attributes.height=null,!isNaN(i)&&i>0&&(o.attributes.width=i),!isNaN(a)&&a>0&&(o.attributes.height=a),l=o.insertImage(c,s),t(e),o.change&&o.change()}function t(e){e.preventDefault(),r.destroy(),a.windowFromDocument(d.documentFromRange(s)).focus(),l||o.releaseRange(s)}var r,o=this,s=o.lockRange(),l=!1,c=d.image(s),m=c&&c.getAttribute("width")||"",v=c&&c.getAttribute("height")||"",b=o.editor.options,_=b.messages,k=b.imageBrowser,w=!!(n.ui.ImageBrowser&&k&&k.transport&&void 0!==k.transport.read),y={title:_.insertImage,visible:!1,resizable:w};y.close=t,w&&(y.width=750),r=this.createDialog(o._dialogTemplate(w),y).toggleClass("k-filebrowser-dialog",w).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(t).end().find(".k-edit-field input").keydown(function(n){n.keyCode==u.ENTER?e(n):n.keyCode==u.ESC&&t(n)}).end().find(h).val(c?c.getAttribute("src",2):"http://").end().find(p).val(c?c.alt:"").end().find(f).val(m).end().find(g).val(v).end().data("kendoWindow"),w&&new n.ui.ImageBrowser(r.element.find(".k-imagebrowser"),i({},k,{change:function(){r.element.find(h).val(this.value())},apply:e})),r.center().open(),r.element.find(h).focus().select()}});n.ui.editor.ImageCommand=m,s("insertImage",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.DropDownList,r=n.ui.editor.Dom,o=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),n.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",e.proxy(this._initSelectOverlay,this))),o.text(o.options.title),o.bind("open",function(){if(o.options.autoSize){var e,t=o.list;t.css({whiteSpace:"nowrap",width:"auto"}),(e=t.width())?e+=20:e=o._listWidth,t.css("width",e+n.support.scrollbar()),o._listWidth=e}})},options:{name:"SelectBox",index:-1},_initSelectOverlay:function(){var t,i,r,o,a=this,s=a.value(),l=this.dataSource.view(),d="",c=n.htmlEncode;for(i=0;l.length>i;i++)d+="<option value='"+c((t=l[i]).value)+"'",t.value==s&&(d+=" selected"),d+=">"+c(t.text)+"</option>";r=e("<select class='k-select-overlay'>"+d+"</select>"),(o=e(this.element).closest(".k-widget")).next(".k-select-overlay").remove(),r.insertAfter(o),r.on("change",function(){a.value(this.value),a.trigger("change")})},value:function(e){var n=this,r=i.fn.value.call(n,e);return e===t?r:(i.fn.value.call(n)||n.text(n.options.title),t)},decorate:function(t){var n,i,o,a,s=this.dataSource,l=s.data();for(t&&this.list.css("background-color",r.getEffectiveBackground(e(t))),n=0;l.length>n;n++)i=l[n].tag||"span",o=l[n].className,a=(a=r.inlineStyle(t,i,{className:o})).replace(/"/g,"'"),l[n].style=a+";display:inline-block";s.trigger("change")}});n.ui.plugin(o),n.ui.editor.SelectBox=o}(window.kendo.jQuery),function(e,t){function n(n,i){var r="rtl"==e(n).css("direction")?"Right":"Left",o="td"!=s.name(n)?"margin"+r:"padding"+r;return i===t?n.style[o]||0:(i>0?n.style[o]=i+"px":(n.style[o]="",n.style.cssText||n.removeAttribute("style")),t)}var i=window.kendo,r=i.Class,o=e.extend,a=i.ui.editor,s=a.Dom,l=a.EditorUtils,d=l.registerTool,c=a.Command,u=a.Tool,h=a.ToolTemplate,p=a.RangeUtils,f=s.blockElements,g=a.BlockFormatFinder,m=a.BlockFormatter,v=r.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(t){var i,r,o,a,l,d,c,u,h,p=this.finder.findSuitable(t),f=[];if(p.length){for(i=0,r=p.length;r>i;i++)s.is(p[i],"li")?e(p[i]).index()?e.inArray(p[i].parentNode,f)<0&&f.push(p[i]):f.push(p[i].parentNode):f.push(p[i]);for(;f.length;)if(o=f.shift(),s.is(o,"li"))if(a=o.parentNode,d=(l=e(o).prev("li")).find("ul,ol").last(),(c=e(o).children("ul,ol")[0])&&l[0])d[0]?(d.append(o),d.append(e(c).children()),s.remove(c)):(l.append(c),c.insertBefore(o,c.firstChild));else for((c=l.children("ul,ol")[0])||(c=s.create(o.ownerDocument,s.name(a)),l.append(c));o&&o.parentNode==a;)c.appendChild(o),o=f.shift();else for(u=parseInt(n(o),10)+30,n(o,u),h=0;f.length>h;h++)e.contains(o,f[h])&&f.splice(h,1)}else new m([{tags:["p"]}],{style:{marginLeft:30}}).apply(t)},remove:function(t){var i,r,o,a,s,l,d,c,u=this.finder.findSuitable(t);for(r=0,o=u.length;o>r;r++){if((d=e(u[r])).is("li")){if((s=(a=d.parent()).parent()).is("li,ul,ol")&&!n(a[0])){if(i&&e.contains(i,s[0]))continue;(l=d.nextAll("li")).length&&e(a[0].cloneNode(!1)).appendTo(d).append(l),s.is("li")?d.insertAfter(s):d.appendTo(s),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=u[r];c=parseInt(n(i),10)-30,n(i,c)}}}),b=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(p.nodes(e))}},c.fn.init.call(this,e)}}),_=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(p.nodes(e))}},c.fn.init.call(this,e)}}),k=u.extend({init:function(e){u.fn.init.call(this,e),this.finder=new g([{tags:f}])},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(i,r){var o,a,l,d,c=this.finder.findSuitable(r);for(l=0,d=c.length;d>l;l++)if((o=n(c[l]))||(a=e(c[l]).parents("ul,ol").length,o=s.is(c[l],"li")&&(a>1||n(c[l].parentNode))||s.ofType(c[l],["ul","ol"])&&a>0),o)return i.removeClass("k-state-disabled"),t;i.addClass("k-state-disabled").removeClass("k-state-hover")}});o(a,{IndentFormatter:v,IndentCommand:b,OutdentCommand:_,OutdentTool:k}),d("indent",new u({command:b,template:new h({template:l.buttonTemplate,title:"Indent"})})),d("outdent",new k({command:_,template:new h({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.EditorUtils,o=i.Command,a=i.Tool,s=i.ToolTemplate,l=o.extend({init:function(e){var t=this;t.options=e,o.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function n(e){e.preventDefault(),a.data("kendoWindow").destroy(),r.focus()}var i=this,r=i.editor,o=r.options.messages,a=e(t.template(l.template)(o)).appendTo(document.body),s=l.indent(r.value()),d=".k-editor-textarea";this.createDialog(a,{title:o.viewHtml,close:n,visible:!1}).find(d).val(s).end().find(".k-dialog-update").click(function(e){r.value(a.find(d).val()),n(e),i.change&&i.change(),r.trigger("change")}).end().find(".k-dialog-close").click(n).end().data("kendoWindow").center().open(),a.find(d).focus()}});n(l,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),t.ui.editor.ViewHtmlCommand=l,i.EditorUtils.registerTool("viewHtml",new a({command:l,template:new s({template:r.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.editor,i=n.Tool,r=n.ToolTemplate,o=n.DelayedExecutionTool,a=n.Command,s=n.Dom,l=n.EditorUtils,d=n.RangeUtils,c=l.registerTool,u=o.extend({init:function(e){var n=this;i.fn.init.call(n,t.deepExtend({},n.options,e)),n.type="kendoSelectBox",n.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t,n=e.value;return n?e.tag||e.className?e:(0===(t=n.indexOf("."))?e.className=n.substring(1):-1==t?e.tag=n:(e.tag=n.substring(0,t),e.className=n.substring(t+1)),e):e},command:function(t){var i=t.value;return i=this.toFormattingItem(i),new n.FormatCommand({range:t.range,formatter:function(){var t=(i.tag||i.context||"span").split(","),r=[{tags:t,attr:{className:i.className||""}}];return e.inArray(t[0],s.inlineElements)>=0?new n.GreedyInlineFormatter(r):new n.GreedyBlockFormatter(r)}})},initialize:function(e,n){var r=n.editor,o=this.options,a=o.name,s=this;e.width(o.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||r.options[a],title:r.options.messages[a],autoSize:!0,change:function(){var e=this.dataItem();e&&i.exec(r,a,e.toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;t.length>e;e++)t[e]=s.toFormattingItem(t[e])},highlightFirst:!1,template:t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,n){var i,r,o,a;for(i=0;t.length>i;i++)if(o=((r=t[i]).tag||r.context||"")+(r.className?"."+r.className:""),e(n[0]).closest(o)[0]){if(1==n.length)return r.value;for(a=1;n.length>a&&e(n[a]).closest(o)[0];a++)if(a==n.length-1)return r.value}return""},update:function(t,n){var i,r,a,l,d,c=e(t).data(this.type);if(c&&(r=(i=c.dataSource).data(),(d=s.commonAncestor.apply(null,n))==s.closestEditable(d)||this._ancestor!=d)){for(this._ancestor=d,a=0;r.length>a;a++)l=r[a].context,r[a].visible=!l||!!e(d).closest(l).length;i.filter([{field:"visible",operator:"eq",value:!0}]),o.fn.update.call(this,t,n),c.value(this.getFormattingValue(i.view(),n)),c.wrapper.toggleClass("k-state-disabled",!i.view().length)}},destroy:function(){this._ancestor=null}}),h=a.extend({exec:function(){var t=new n.ListFormatter("ul"),i=this.lockRange(!0),r=this.options.remove||"strong,em,span,sup,sub,del,b,i,u,font".split(",");d.wrapSelectedElements(i),new n.RangeIterator(i).traverse(function n(i){var o,a,l,d;if(i&&!s.isMarker(i)){if("ul"==(o=s.name(i))||"ol"==o)for(a=i.previousSibling,l=i.nextSibling,t.unwrap(i);a&&a!=l;a=a.nextSibling)n(a);else if("blockquote"==o)s.changeTag(i,"p");else if(1==i.nodeType&&!s.insignificant(i)){for(d=i.childNodes.length-1;d>=0;d--)n(i.childNodes[d]);i.removeAttribute("style"),i.removeAttribute("class")}e.inArray(o,r)>-1&&s.unwrap(i)}}),this.releaseRange(i)}});e.extend(n,{FormattingTool:u,CleanFormatCommand:h}),c("formatting",new u({template:new r({template:l.dropDownListTemplate,title:"Format"})})),c("cleanFormatting",new i({command:h,template:new r({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery),function(e){var t,n=window.kendo,i=n.ui,r=i.editor,o=i.Widget,a=e.extend,s=e.proxy,l=n.keys,d=".kendoEditor",c=n.ui.editor.EditorUtils,u=n.ui.editor.ToolTemplate,h=n.ui.editor.Tool,p="overflowAnchor",f=".k-tool-group:visible a.k-tool:not(.k-state-disabled),.k-tool.k-overflow-anchor,.k-tool-group:visible .k-widget.k-colorpicker,.k-tool-group:visible .k-selectbox,.k-tool-group:visible .k-dropdown,.k-tool-group:visible .k-combobox .k-input",g=h.extend({initialize:function(t,n){t.attr({unselectable:"on"});var i=n.editor.toolbar;t.on("click",e.proxy(function(){this.overflowPopup.toggle()},i))},options:{name:p},command:e.noop,update:e.noop,destroy:e.noop});c.registerTool(p,new g({key:"",ctrl:!0,template:new u({template:c.overflowAnchorTemplate})})),t=o.extend({init:function(e,t){var i=this;t=a({},t,{name:"EditorToolbar"}),o.fn.init.call(i,e,t),t.popup&&i._initPopup(),t.resizable&&t.resizable.toolbar&&(i._resizeHandler=n.onResize(function(){i.resize()}),i.element.addClass("k-toolbar-resizable"))},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting","print","pdf"],fonts:["fontName","fontSize"],colors:["foreColor","backColor"]},overflowFlaseTools:["formatting","fontName","fontSize","foreColor","backColor","insertHtml"],_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},_toggleOverflowStyles:function(e,t){e.find("li").toggleClass("k-item k-state-default",t).find(".k-tool:not(.k-state-disabled),.k-overflow-button").toggleClass("k-overflow-button k-button",t)},_initOverflowPopup:function(t){var n=this;n.overflowPopup=e("<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>").appendTo("body").kendoPopup({anchor:t,origin:"bottom right",position:"top right",copyAnchorStyles:!1,open:function(e){this.element.is(":empty")&&e.preventDefault(),n._toggleOverflowStyles(this.element,!0)},activate:s(n.focusOverflowPopup,n)}).data("kendoPopup")},items:function(){var e,t,n=this.options.resizable&&this.options.resizable.toolbar;return t=this.element.children().find("> *, select"),n&&(e=this.overflowPopup,t=t.add(e.element.children().find("> *"))),t},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,n=this.tools;for(t in n)if(t.toLowerCase()==e)return n[t]},toolGroupFor:function(t){var n,i=this.groups;if(this.isCustomTool(t))return"custom";for(n in i)if(e.inArray(t,i[n])>=0)return n},bindTo:function(t){var n=this,i=n.window;n._editor&&n._editor.unbind("select",s(n.resize,n)),n._editor=t,n.options.resizable&&n.options.resizable.toolbar&&t.options.tools.push(p),n.tools=n.expandTools(t.options.tools),n.render(),n.element.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),i=t.keyCode;i==l.RIGHT||i==l.LEFT?n.close():i==l.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),n._attachEvents(),n.items().each(function(){var i,r=n._toolName(this),o="more"!==r?n.tools[r]:n.tools.overflowAnchor,a=o&&o.options,s=t.options.messages,l=a&&a.tooltip||s[r],d=e(this);o&&o.initialize&&(("fontSize"==r||"fontName"==r)&&(i=s[r+"Inherit"],d.find("input").val(i).end().find("span.k-input").text(i).end()),o.initialize(d,{title:n._appendShortcutSequence(l,o),editor:n._editor}),d.closest(".k-widget",n.element).addClass("k-editor-widget"),d.closest(".k-colorpicker",n.element).next(".k-colorpicker").addClass("k-editor-widget"))}),t.bind("select",s(n.resize,n)),n.update(),i&&i.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,n,i=this,r=i.window,o=i.options.editor;r&&(e=r.wrapper,t=o.element,e.is(":visible")&&i.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),r._moved||(n=t.offset(),e.css({top:Math.max(0,parseInt(n.top,10)-e.outerHeight()-parseInt(i.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(n.left,10))})),r.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this.element,n=this._editor.element.attr(e);t.attr(e,n||0).focus().find(f).first().focus(),n||0===n||t.removeAttr(e)},focusOverflowPopup:function(){var e="tabIndex",t=this.overflowPopup.element,n=this._editor.element.attr(e);t.closest(".k-animation-container").addClass("k-overflow-wrapper"),t.attr(e,n||0).focus().find(f).first().focus(),n||0===n||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+(t.key+")")},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(e){return!(e in n.ui.Editor.defaultTools)},expandTools:function(t){var i,o,s,l,d=this._nativeTools,c=n.deepExtend({},n.ui.Editor.defaultTools),u={};for(o=0;t.length>o;o++)l=(i=t[o]).name,e.isPlainObject(i)?l&&c[l]?(u[l]=a({},c[l]),a(u[l].options,i)):((s=a({cssClass:"k-i-custom",type:"button",title:""},i)).name||(s.name="custom"),s.cssClass="k-"+("custom"==s.name?"i-custom":s.name),s.template||"button"!=s.type||(s.template=r.EditorUtils.buttonTemplate,s.title=s.title||s.tooltip),u[l]={options:s}):c[i]&&(u[i]=c[i]);for(o=0;d.length>o;o++)u[d[o]]||(u[d[o]]=c[d[o]]);return u},render:function(){function t(t){var i;return t.getHtml?i=t.getHtml():(e.isFunction(t)||(t=n.template(t)),i=t(o)),e.trim(i)}function i(){h.children().length&&(y&&(h.data("position",w),w++),h.appendTo(b))}function r(t){t!==p?(h=e("<li class='k-tool-group' role='presentation' />")).data("overflow",-1===e.inArray(t,x)):h=e("<li class='k-overflow-tools' />")}var o,a,l,d,c,u,h,f,g=this,m=g.tools,v=g._editor.element,b=g.element.empty(),_=g._editor.options.tools,k=n.support.browser,w=0,y=g.options.resizable&&g.options.resizable.toolbar,x=this.overflowFlaseTools;for(b.empty(),_.length&&(d=_[0].name||_[0]),r(d),f=0;_.length>f;f++)d=_[f].name||_[f],!(o=m[d]&&m[d].options)&&e.isPlainObject(d)&&(o=d),a=o&&o.template,"break"==d&&(i(),e("<li class='k-row-break' />").appendTo(g.element),r(d)),a&&((c!=(u=g.toolGroupFor(d))||d==p)&&(i(),r(d),c=u),a=t(a),l=e(a).appendTo(h),"custom"==u&&(i(),r(d)),o.exec&&l.hasClass("k-tool")&&l.click(s(o.exec,v[0])));i(),e(g.element).children(":has(> .k-tool)").addClass("k-button-group"),g.options.popup&&k.msie&&9>k.version&&g.window.wrapper.find("*").attr("unselectable","on"),g.updateGroups(),y&&g._initOverflowPopup(g.element.find(".k-overflow-anchor")),g.angular("compile",function(){return{elements:g.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return!e(this).hasClass("k-state-disabled")}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var n=e(this).data("kendoSelectBox");n&&n.decorate(t)})},destroy:function(){o.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy(),this._resizeHandler&&n.unbindResize(this._resizeHandler),this.overflowPopup&&this.overflowPopup.destroy()},_attachEvents:function(){var t=this,n="[role=button].k-tool",i=n+":not(.k-state-disabled)",r=t.overflowPopup?t.overflowPopup.element:e([]);t.element.add(r).off(d).on("mouseenter"+d,i,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+d,i,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+d,n,function(e){e.preventDefault()}).on("keydown"+d,f,function(n){function i(e,t,n){var i=t.find(f),r=i.index(a)+e;return n&&(r=Math.max(0,Math.min(i.length-1,r))),i[r]}var r,o,a=this,s=t.options.resizable&&t.options.resizable.toolbar,d=n.keyCode;d==l.RIGHT||d==l.LEFT?e(a).hasClass(".k-dropdown")||(r=i(d==l.RIGHT?1:-1,t.element,!0)):!s||d!=l.UP&&d!=l.DOWN?d==l.ESC?(t.overflowPopup.visible()&&t.overflowPopup.close(),r=t._editor):d!=l.TAB||n.ctrlKey||n.altKey||(o=s&&e(a.parentElement).hasClass("k-overflow-tool-group")?t.overflowPopup.element:t.element,n.shiftKey?r=i(-1,o):(r=i(1,o))||(r=t._editor)):r=i(d==l.DOWN?1:-1,t.overflowPopup.element,!0),r&&(n.preventDefault(),r.focus())}).on("click"+d,i,function(n){var i=e(this);n.preventDefault(),n.stopPropagation(),i.removeClass("k-state-hover"),i.is("[data-popup]")||t._editor.exec(t._toolName(this))}).on("click"+d,"[role=button].k-tool.k-state-disabled",function(e){e.preventDefault()})},_toolName:function(t){var n,i;if(t)return n=t.className,/k-tool\b/i.test(n)&&(n=t.firstChild.className),(i=e.grep(n.split(" "),function(e){return!/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)}))[0]?i[0].substring(i[0].lastIndexOf("-")+1):"custom"},refreshTools:function(){var t=this,i=t._editor.getRange(),r=n.ui.editor.RangeUtils.textNodes(i);r.length||(r=[i.startContainer]),t.items().each(function(){var n=t.tools[t._toolName(this)];n&&n.update&&n.update(e(this),r)}),this.update()},update:function(){this.updateGroups()},_resize:function(e){var t=e.width,n=this.options.resizable&&this.options.resizable.toolbar,i=this.overflowPopup;this.refreshTools(),n&&(i.visible()&&i.close(!0),this._refreshWidths(),this._shrink(t),this._stretch(t),this._toggleOverflowStyles(this.element,!1),this._toggleOverflowStyles(this.overflowPopup.element,!0),this.element.children("li.k-overflow-tools").css("visibility",i.element.is(":empty")?"hidden":"visible"))},_refreshWidths:function(){this.element.children("li").each(function(t,n){var i=e(n);i.data("outerWidth",i.outerWidth(!0))})},_shrink:function(e){var t,n,i;if(e<this._groupsWidth())for(i=(n=this._visibleGroups().filter(":not(.k-overflow-tools)")).length-1;i>=0&&(t=n.eq(i),!(e>this._groupsWidth()));i--)this._hideGroup(t)},_stretch:function(e){var t,n,i;if(e>this._groupsWidth())for(n=this._hiddenGroups(),i=0;n.length>i&&(t=n.eq(i),!(e<this._groupsWidth())&&this._showGroup(t,e));i++);},_hiddenGroups:function(){var t=this.overflowPopup,n=this.element.children("li.k-tool-group").filter(":hidden");return(n=n.add(t.element.children("li"))).sort(function(t,n){return e(t).data("position")>e(n).data("position")?1:-1}),n},_visibleGroups:function(){return this.element.children("li.k-tool-group, li.k-overflow-tools").filter(":visible")},_groupsWidth:function(){var t=0;return this._visibleGroups().each(function(){t+=e(this).data("outerWidth")}),Math.ceil(t)},_hideGroup:function(e){if(e.data("overflow")){var t=this.overflowPopup;e.detach().prependTo(t.element).addClass("k-overflow-tool-group")}else e.hide()},_showGroup:function(t,n){var i,r;return!!(t.length&&n>this._groupsWidth()+t.data("outerWidth"))&&(t.hasClass("k-overflow-tool-group")?(0===(i=t.data("position"))?t.detach().prependTo(this.element):(r=this.element.children().filter(function(t,n){return e(n).data("position")===i-1}),t.detach().insertAfter(r)),t.removeClass("k-overflow-tool-group")):t.show(),!0)}}),e.extend(r,{Toolbar:t})}(o),function(e){var t=window.kendo,n=e.extend,i=e.proxy,r=t.ui.editor,o=r.Dom,a=r.EditorUtils,s=r.RangeUtils,l=r.Command,d=".kendoEditor",c="k-state-active",u="k-state-selected",h=r.Tool,p=r.ToolTemplate,f=r.InsertHtmlCommand,g=r.BlockFormatFinder,m=r.EditorUtils.registerTool,v="<td>"+r.emptyElementContent+"</td>",b=new g([{tags:["table"]}]),_=f.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' data-last>"+Array(e+1).join("<tr>"+Array(t+1).join(v)+"</tr>")+"</table>"},postProcess:function(t,n){var i=e("table[data-last]",t.document).removeAttr("data-last");n.setStart(i.find("td")[0],0),n.collapse(!0),t.selectRange(n)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),e.postProcess=this.postProcess,f.fn.exec.call(this)}}),k=h.extend({initialize:function(t,n){h.fn.initialize.call(this,t,n);var r=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:i(this._open,this),activate:i(this._activate,this),close:i(this._close,this)}).data("kendoPopup");t.click(i(this._toggle,this)).keydown(i(this._keydown,this)),this._editor=n.editor,this._popup=r},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(c)},_close:function(){this._popup.options.anchor.removeClass(c)},_keydown:function(e){var n=t.keys,i=e.keyCode;i==n.DOWN&&e.altKey?this._popup.open():i==n.ESC&&this._popup.close()},_toggle:function(t){e(t.target).closest(".k-tool").hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){var t=this.popup();t.wrapper&&"block"==t.wrapper.css("display")&&t.close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),w=k.extend({init:function(t){this.cols=8,this.rows=6,k.fn.init.call(this,e.extend(t,{command:_,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function n(t){var n=e(window);return{row:Math.floor((t.clientY+n.scrollTop()-u.top)/r)+1,col:Math.floor((t.clientX+n.scrollLeft()-u.left)/i)+1}}var i,r,o=this,a=o._popup.element,s=a.find(".k-ct-cell"),l=s.eq(0),c=s.eq(s.length-1),u=t.getOffset(l),h=t.getOffset(c),p=o.cols,f=o.rows;a.find("*").addBack().attr("unselectable","on"),h.left+=c[0].offsetWidth,h.top+=c[0].offsetHeight,i=(h.left-u.left)/p,r=(h.top-u.top)/f,a.on("mousemove"+d,function(e){o._setTableSize(n(e))}).on("mouseleave"+d,function(){o._setTableSize()}).on("mouseup"+d,function(e){o._exec(n(e))})},_valid:function(e){return e&&e.row>0&&e.col>0&&this.rows>=e.row&&this.cols>=e.col},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(n){var i=this._popup.element,r=i.find(".k-status"),o=i.find(".k-ct-cell"),a=this.cols,s=this._editor.options.messages;this._valid(n)?(r.text(t.format(s.createTableHint,n.row,n.col)),o.each(function(t){e(this).toggleClass(u,n.col>t%a&&n.row>t/a)})):(r.text(s.dialogCancel),o.removeClass(u))},_keydown:function(e){var n,i,r,o,a,s,l,d;k.fn._keydown.call(this,e),this._popup.visible()&&(n=t.keys,i=e.keyCode,r=this._popup.element.find(".k-ct-cell"),o=Math.max(r.filter(".k-state-selected").last().index(),0),a=Math.floor(o/this.cols),s=o%this.cols,l=!1,i!=n.DOWN||e.altKey?i==n.UP?(l=!0,a--):i==n.RIGHT?(l=!0,s++):i==n.LEFT&&(l=!0,s--):(l=!0,a++),d={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,s+1))},i==n.ENTER?this._exec(d):this._setTableSize(d),l&&(e.preventDefault(),e.stopImmediatePropagation()))},_open:function(){var e=this._editor.options.messages;k.fn._open.call(this),this.popup().element.find(".k-status").text(e.dialogCancel).end().find(".k-ct-cell").removeClass(u)},_close:function(){k.fn._close.call(this),this.popup().element.off(d)},update:function(e,t){var n;k.fn.update.call(this,e),n=b.isFormatted(t),e.toggleClass("k-state-disabled",n)}}),y=l.extend({exec:function(){for(var e,t,n,i=this.lockRange(!0),a=i.endContainer;"td"!=o.name(a);)a=a.parentNode;for((e=a.parentNode).children.length,t=e.cloneNode(!0),n=0;e.cells.length>n;n++)t.cells[n].innerHTML=r.emptyElementContent;"before"==this.options.position?o.insertBefore(t,e):o.insertAfter(t,e),this.releaseRange(i)}}),x=l.extend({exec:function(){var e,t,n,i,a=this.lockRange(!0),s=o.closest(a.endContainer,"td"),l=o.closest(s,"table").rows,d=this.options.position;for(e=o.findNodeIndex(s,!0),t=0;l.length>t;t++)(i=(n=l[t].cells[e]).cloneNode()).innerHTML=r.emptyElementContent,"before"==d?o.insertBefore(i,n):o.insertAfter(i,n);this.releaseRange(a)}}),C=l.extend({exec:function(){var t,n,i,r=this.lockRange(),a=s.mapAll(r,function(t){return e(t).closest("tr")[0]}),l=o.closest(a[0],"table");if(a.length>=l.rows.length)(!(t=o.next(l))||o.insignificant(t))&&(t=o.prev(l)),o.remove(l);else for(n=0;a.length>n;n++)i=a[n],o.removeTextSiblings(i),t=(t=o.next(i)||o.prev(i)).cells[0],o.remove(i);t&&(r.setStart(t,0),r.collapse(!0),this.editor.selectRange(r))}}),S=l.extend({exec:function(){var e,t,n=this.lockRange(),i=o.closest(n.endContainer,"td"),r=o.closest(i,"table"),a=r.rows,s=o.findNodeIndex(i,!0);if(1==a[0].cells.length)(!(e=o.next(r))||o.insignificant(e))&&(e=o.prev(r)),o.remove(r);else for(o.removeTextSiblings(i),e=o.next(i)||o.prev(i),t=0;a.length>t;t++)o.remove(a[t].cells[s]);e&&(n.setStart(e,0),n.collapse(!0),this.editor.selectRange(n))}}),T=h.extend({command:function(e){return"delete"==(e=n(e,this.options)).action?"row"==e.type?new C(e):new S(e):"row"==e.type?new y(e):new x(e)},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var n=!b.isFormatted(t);e.toggleClass("k-state-disabled",n)}});n(t.ui.editor,{PopupTool:k,TableCommand:_,InsertTableTool:w,TableModificationTool:T,InsertRowCommand:y,InsertColumnCommand:x,DeleteRowCommand:C,DeleteColumnCommand:S}),m("createTable",new w({template:new p({template:a.buttonTemplate,popup:!0,title:"Create table"})})),m("addColumnLeft",new T({type:"column",position:"before",template:new p({template:a.buttonTemplate,title:"Add column on the left"})})),m("addColumnRight",new T({type:"column",template:new p({template:a.buttonTemplate,title:"Add column on the right"})})),m("addRowAbove",new T({type:"row",position:"before",template:new p({template:a.buttonTemplate,title:"Add row above"})})),m("addRowBelow",new T({type:"row",template:new p({template:a.buttonTemplate,title:"Add row below"})})),m("deleteRow",new T({type:"row",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete row"})})),m("deleteColumn",new T({type:"column",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.caret,r=n.keys,o=n.ui,a=o.Widget,s=".kendoMaskedTextBox",l=e.proxy,d=(n.support.propertyChangeEvent?"propertychange":"input")+s,c="k-state-disabled",u="disabled",h="readonly",p="change",f=a.extend({init:function(t,r){var o,l=this;a.fn.init.call(l,t,r),l._rules=e.extend({},l.rules,l.options.rules),t=l.element,o=t[0],l.wrapper=t,l._tokenize(),l._form(),l.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+s,function(){var e=o.value;e?l._togglePrompt(!0):o.value=l._old=l._emptyMask,l._oldValue=e,l._timeoutId=setTimeout(function(){i(t,0,e?l._maskLength:0)})}).on("focusout"+s,function(){var e=t.val();clearTimeout(l._timeoutId),o.value=l._old="",e!==l._emptyMask&&(o.value=l._old=e),l._change(),l._togglePrompt()}),t.is("[disabled]")||e(l.element).parents("fieldset").is(":disabled")?l.enable(!1):l.readonly(t.is("[readonly]")),l.value(l.options.value||t.val()),n.notify(l)},options:{name:"MaskedTextBox",clearPromptChar:!1,unmaskOnPost:!1,promptChar:"_",culture:"",rules:{},value:"",mask:""},events:[p],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(t){var n=this;a.fn.setOptions.call(n,t),n._rules=e.extend({},n.rules,n.options.rules),n._tokenize(),this._unbindInput(),this._bindInput(),n.value(n.element.val())},destroy:function(){var e=this;e.element.off(s),e._formElement&&(e._formElement.off("reset",e._resetHandler),e._formElement.off("submit",e._submitHandler)),a.fn.destroy.call(e)},raw:function(){return this._unmask(this.element.val(),0).replace(RegExp(this.options.promptChar,"g"),"")},value:function(e){var i=this.element,r=this._emptyMask;return e===t?this.element.val():(null===e&&(e=""),r?(e=this._unmask(e+""),i.val(e?r:""),this._mask(0,this._maskLength,e),e=i.val(),this._oldValue=e,n._activeElement()!==i&&(e===r?i.val(""):this._togglePrompt()),t):(i.val(e),t))},_togglePrompt:function(e){var t=this.element[0],n=t.value;this.options.clearPromptChar&&(n=e?this._oldValue:n.replace(RegExp(this.options.promptChar,"g")," "),t.value=this._old=n)},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},_bindInput:function(){var e=this;e._maskLength&&e.element.on("keydown"+s,l(e._keydown,e)).on("keypress"+s,l(e._keypress,e)).on("paste"+s,l(e._paste,e)).on(d,l(e._propertyChange,e))},_unbindInput:function(){this.element.off("keydown"+s).off("keypress"+s).off("paste"+s).off(d)},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly;t._unbindInput(),r||i?n.attr(u,i).attr(h,r).toggleClass(c,i):(n.removeAttr(u).removeAttr(h).removeClass(c),t._bindInput())},_change:function(){var e=this,t=e.value();t!==e._oldValue&&(e._oldValue=t,e.trigger(p),e.element.trigger(p))},_propertyChange:function(){var e,t,r=this,o=r.element[0],a=o.value;n._activeElement()===o&&(a===r._old||r._pasting||(t=i(o)[0],e=r._unmask(a.substring(t),t),o.value=r._old=a.substring(0,t)+r._emptyMask.substring(t),r._mask(t,t,e),i(o,t)))},_paste:function(e){var t=this,n=e.target,r=i(n),o=r[0],a=r[1],s=t._unmask(n.value.substring(a),a);t._pasting=!0,setTimeout(function(){var e=n.value,r=e.substring(o,i(n)[0]);n.value=t._old=e.substring(0,o)+t._emptyMask.substring(o),t._mask(o,o,r),o=i(n)[0],t._mask(o,o,s),i(n,o),t._pasting=!1})},_form:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._submitHandler=function(){t.element[0].value=t._old=t.raw()},t.options.unmaskOnPost&&r.on("submit",t._submitHandler),t._formElement=r.on("reset",t._resetHandler))},_keydown:function(e){var n,o=e.keyCode,a=this.element[0],s=i(a),l=s[0],d=s[1],c=o===r.BACKSPACE;c||o===r.DELETE?(l===d&&(c?l-=1:d+=1,n=this._find(l,c)),n!==t&&n!==l?(c&&(n+=1),i(a,n)):l>-1&&this._mask(l,d,"",c),e.preventDefault()):o===r.ENTER&&this._change()},_keypress:function(e){var t,n;0===e.which||e.metaKey||e.ctrlKey||e.keyCode===r.ENTER||(t=String.fromCharCode(e.which),n=i(this.element),this._mask(n[0],n[1],t),(e.keyCode===r.BACKSPACE||t)&&e.preventDefault())},_find:function(e,t){var n=this.element.val()||this._emptyMask,i=1;for(!0===t&&(i=-1);e>-1||this._maskLength>=e;){if(n.charAt(e)!==this.tokens[e])return e;e+=i}return-1},_mask:function(e,r,o,a){var s,l,d,c,u=this.element[0],h=u.value||this._emptyMask,p=this.options.promptChar,f=0;for((e=this._find(e,a))>r&&(r=e),l=this._unmask(h.substring(r),r),s=(o=this._unmask(o,e)).length,o&&(l=l.replace(RegExp("^_{0,"+s+"}"),"")),o+=l,h=h.split(""),d=o.charAt(f);this._maskLength>e;)h[e]=d||p,d=o.charAt(++f),c===t&&f>s&&(c=e),e=this._find(e+1);u.value=this._old=h.join(""),n._activeElement()===u&&(c===t&&(c=this._maskLength),i(u,c))},_unmask:function(t,n){var i,r,o,a,s,l,d,c;if(!t)return"";for(t=(t+"").split(""),o=0,a=n||0,s=this.options.promptChar,l=t.length,d=this.tokens.length,c="";d>a&&((i=t[o])===(r=this.tokens[a])||i===s?(c+=i===s?s:"",o+=1,a+=1):"string"!=typeof r?((r.test&&r.test(i)||e.isFunction(r)&&r(i))&&(c+=i,a+=1),o+=1):a+=1,!(o>=l)););return c},_tokenize:function(){for(var e,t,i,r,o=[],a=0,s=(this.options.mask||"").split(""),l=s.length,d=0,c="",u=this.options.promptChar,h=n.getCulture(this.options.culture).numberFormat,p=this._rules;l>d;d++)if(t=p[e=s[d]])o[a]=t,c+=u,a+=1;else for("."===e||","===e?e=h[e]:"$"===e?e=h.currency.symbol:"\\"===e&&(e=s[d+=1]),i=0,r=(e=e.split("")).length;r>i;i++)o[a]=e[i],c+=e[i],a+=1;this.tokens=o,this._emptyMask=c,this._maskLength=c.length}});o.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){var n="string"==typeof e?[{name:e}]:e,i="[object Array]"===se.call(n)?n:n!==t?[n]:[];return de(i,function(e){return"string"==typeof e?{name:e}:{name:e.name,type:e.type}})}function i(e){var n="string"==typeof e?[{name:[e],expand:!1}]:e,i="[object Array]"===se.call(n)?n:n!==t?[n]:[];return de(i,function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===se.call(e.name)?e.name.slice():[e.name],expand:e.expand}})}function r(t){var n,i,r={};for(i in t.length&&function e(t,n,i,r){var o,a,s,l;if(i||(i=n),r||(r=0),(l=i.members[r])&&!l.measure){if(a=(s=l.children).length,i===n?t[ne.stringify([l.name])]=!!a:a&&(t[ne.stringify(Q(i,r))]=!0),a)for(o=0;a>o;o++)e(t,n,s[o],r);e(t,n,i,r+1)}}(r,t[0]),n=[],r)n.push({name:e.parseJSON(i),expand:r[i]});return n}function o(e,t,n){var r,o;return function(e,t){var n,i,r,o,a=(t.tuples||[])[0];if(a&&a.members.length>e.length)for(n=a.members,i=0;n.length>i;i++)if(!n[i].measure){for(r=!1,o=0;e.length>o;o++)if(0===I(e[o]).indexOf(n[i].hierarchy)){r=!0;break}r||e.push({name:[n[i].name],expand:!1})}}(t,e=e||{}),n.length>1&&t.push({name:pe,measure:!0,children:i(n)}),r={members:t},e.tuples&&(o=b(e.tuples,r)).tuple&&(t=function(e){var t,n=[],i=e.members;for(t=0;i.length>t;t++)i[t].measure||n.push({name:[i[t].name],expand:i[t].children.length>0});return n}(o.tuple)),t}function a(e){var t=ne.getter(e.field,!0);return function(n,i){return e.aggregate(t(n.dataItem),i,n)}}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e){return e&&e.getTime}function d(e,n,i){return e.tuples.length<p(n.tuples,i)?n:t}function c(e,t,n,i,r){var o,a,s,l=e.length,d=p(t,i),c=i.length||1;for(a=0;n>a;a++)for(o=0;l>o;o++)s=h(e[o],t)*c,s+=o%c,r[a*l+o].ordinal=a*d+s}function u(e,t,n,i,r){var o,a,s,l=e.length,d=(p(t,i),i.length||1);for(a=0;l>a;a++)for(s=h(e[a],t),s*=d,s+=a%d,o=0;n>o;o++)r[a*n+o].ordinal=s*n+o}function h(e,t){return b(t,e).index}function p(e,t){var n,i,r;if(!e.length)return 0;for(i=(n=e.slice()).shift(),r=1;i;)i.members?[].push.apply(n,i.members):i.children&&(i.measure||(r+=i.children.length),[].push.apply(n,i.children)),i=n.shift();return t.length&&(r*=t.length),r}function f(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function g(e,t,n){var i,r,o,a;if(!e)return 0;for(o=i=Math.max(n.length,1),a=(r=e.members.slice(0,t)).shift(),i>1&&(i+=1);a;)a.name===pe?o+=i:a.children?[].push.apply(r,a.children):(o++,[].push.apply(r,a.members)),a=r.shift();return o}function m(e,t,n){var i,r,o,a,s,l;if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};if(!(i=b(e,t[0])).tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};if(r=i.tuple.members,o=t[0].members,a=-1,r.length!==o.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(s=0,l=r.length;l>s;s++)!r[s].measure&&o[s].children[0]&&(-1==a&&o[s].children.length&&(a=s),r[s].children=o[s].children);return n=Math.max(n.length,1),{parsedRoot:i.tuple,index:i.index*n,memberIndex:a,tuples:e}}function v(e,t){var n,i,r=!0;for(e=e.members,t=t.members,n=0,i=e.length;i>n;n++)e[n].measure||t[n].measure||(r=r&&I(e[n])===I(t[n]));return r}function b(e,t){var n,i,r,o,a,s,l,d=0;for(n=0,i=e.length;i>n;n++){if(v(r=e[n],t))return{tuple:r,index:d};for(d++,a=0,s=r.members.length;s>a;a++)if(!(l=r.members[a]).measure&&(d+=(o=b(l.children,t)).index,o.tuple))return{tuple:o.tuple,index:d}}return{index:d}}function _(e,t){var n,i,r,o="";for(i=0,r=e.length;r>i;i++)t[o+=(n=e[i]).name]||(t[o]=n)}function k(e,t){var n,i,r,o,a=e.members,s="",l="";for(n=0,i=a.length;i>n;n++){if(r=a[n],o){if(t[s+r.name]){o=t[s+=r.name];continue}return t[s+r.parentName]?t[s+r.parentName]:t[l+r.parentName]?t[l+r.parentName]:t[l]}if(s+=r.name,!(o=t[r.parentName])&&!(o=t[s]))return null;o&&(l+=o.name)}return o}function w(n,i){if(!(0>i)){var r={name:pe,measure:!0,children:[e.extend({members:[],dataIndex:n.dataIndex},n.members[i])]};n.members.splice(i,1,r),n.dataIndex=t}}function y(e,t){var n,i,r,o,a,s;if(1>e.length)return[];for(n=[],i={},r=function(e,t){var n,i,r,o;if(0===t.length)return-1;for(n=t[0],r=0,o=(i=e.members).length;o>r;r++)if(i[r].name==n.name)return r}(e[0],t),o=0;e.length>o;o++)(a=e[o]).dataIndex=o,w(a,r),(s=k(a,i))?s.children.push(0>r||!s.measure?a:a.members[r].children[0]):n.push(a),_(a.members,i);return n}function x(e){var n,i,r,o,a,s,l;for(n=[],i=(e=e.slice()).shift();i;){for(i.dataIndex!==t&&n.push(i.dataIndex),a=0,r=0,o=i.members.length;o>r;r++)s=(l=i.members[r]).children,l.measure?[].splice.apply(e,[0,0].concat(s)):[].splice.apply(e,[a,0].concat(s)),a+=s.length;i=e.shift()}return n}function C(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function S(e,t){var n=e.length-1,i=e[n],r=function(e,t){for(var n=0,i=e.length;i>n;n++)if(0===t.indexOf(e[n].field))return e[n];return null}(t,i);return r&&r.dir?i="ORDER("+i+".Children,"+r.field+".CurrentMember.MEMBER_CAPTION,"+r.dir+")":i+=".Children",e[n]=i,e}function T(e,t){var n=e.slice(0);return t.length>1&&n.push("{"+D(t).join(",")+"}"),function e(t){var n,i="CROSSJOIN({";return t.length>2?(n=t.pop(),i+=e(t)):(i+=t.shift(),n=t.pop()),i+="},{",(i+=n)+"})"}(n)}function D(e){for(var n,i=0,r=e.length,o=[];r>i;i++)n=e[i],o.push(n.name!==t?n.name:n);return o}function I(e){return e=e.name||e,"[object Array]"===se.call(e)&&(e=e[e.length-1]),e}function E(e){for(var t=e.length,n=[],i=0;t>i;i++)n.push(e[i].name[0]);return n}function A(e,t){var n,i,r,o=0,a=e.length,s=t.length;for(t=t.slice(0);a>o;o++)for(n=e[o],r=0;s>r;r++)if(i=C(t[r]),-1!==n.indexOf(i)){t[r]=n;break}return{names:t,expandedIdx:r,uniquePath:t.slice(0,r+1).join("")}}function O(e){for(var t,n,i,r,o,a,s=[],l=[],d=[],c=0,u=e.length;u>c;c++)if(r=(t=e[c]).name,a=!1,"[object Array]"!==se.call(r)&&(t.name=r=[r]),r.length>1)l.push(t);else{for(o=C(r[0]),n=0,i=d.length;i>n;n++)if(0===d[n].name[0].indexOf(o)){a=!0;break}a||d.push(t),t.expand&&s.push(t)}return{root:d,expanded:s=s.concat(l)}}function R(e,t,n){var i,r,o,a,s,l,d,c="";if(r=E((i=O(e=e||[])).root),o=[],a=(i=i.expanded).length,s=0,d=[],r.length>1||t.length>1){for(o.push(T(r,t));a>s;s++)d=A(l=S(i[s].name,n),r).names,o.push(T(d,t));c+=o.join(",")}else{for(;a>s;s++)l=S(i[s].name,n),d.push(l[0]);c+=r.concat(d).join(",")}return c}function P(e){var t="",n=e.value,i=e.field,r=e.operator;return"in"==r?(t+="{",t+=n,t+="}"):(t+="Filter(",t+=i+".MEMBERS",t+=ne.format(N[r],i,n),t+=")"),t}function M(e,t,n){var i,r,o="";if(t){for(r in o+="<"+e+">",t)i=t[r],n&&(r=r.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),o+="<"+r+">"+i+"</"+r+">";o+="</"+e+">"}else o+="<"+e+"/>";return o}function F(e){return null==e?[]:"[object Array]"!==se.call(e)?[e]:e}function H(e){var t,n,i,r,o={tuples:[]},a=F(ne.getter("Tuples.Tuple",!0)(e)),s=ne.getter("Caption['#text']"),l=ne.getter("UName['#text']"),d=ne.getter("LName['#text']"),c=ne.getter("LNum['#text']"),u=ne.getter("CHILDREN_CARDINALITY['#text']",!0),h=ne.getter("['@Hierarchy']"),p=ne.getter("PARENT_UNIQUE_NAME['#text']",!0);for(t=0;a.length>t;t++){for(n=[],i=F(a[t].Member),r=0;i.length>r;r++)n.push({children:[],caption:s(i[r]),name:l(i[r]),levelName:d(i[r]),levelNum:c(i[r]),hasChildren:parseInt(u(i[r]),10)>0,parentName:p(i[r]),hierarchy:h(i[r])});o.tuples.push({members:n})}return o}var N,$,L,z,j,B,U,V,W,G,q,K,Y,Q,X,J,Z,ee,te,ne=window.kendo,ie=ne.ui,re=ne.Class,oe=ie.Widget,ae=ne.data.DataSource,se={}.toString,le=function(e){return e},de=e.map,ce=e.extend,ue=ne.isFunction,he="change",pe="Measures",fe="progress",ge="stateReset",me="auto",ve="<div/>",be=".kendoPivotGrid",_e="__row_total__",ke="dataBinding",we="dataBound",ye="expandMember",xe="collapseMember",Ce="k-i-arrow-s",Se="k-i-arrow-e",Te="<span>#: data.member.caption || data.member.name #</span>",De={sum:function(e,t){var n=t.accumulator;return s(n)?s(e)&&(n+=e):n=e,n},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,n){var i=n.accumulator;return n.count===t&&(n.count=0),s(i)?s(e)&&(i+=e):i=e,s(e)&&n.count++,i},result:function(e){var t=e.accumulator;return s(t)&&(t/=e.count),t}},max:function(e,t){var n=t.accumulator;return s(n)||l(n)||(n=e),e>n&&(s(e)||l(e))&&(n=e),n},min:function(e,t){var n=t.accumulator;return s(n)||l(n)||(n=e),n>e&&(s(e)||l(e))&&(n=e),n}},Ie=re.extend({init:function(e){this.options=ce({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){var n,i,r,o;if(t=t||{},n={},"[object Array]"===se.call(t)){for(r=0,o=t.length;o>r;r++)"string"==typeof(i=t[r])?n[i]={}:i[e]&&(n[i[e]]=i);t=n}return t},_rootTuples:function(e,n){var i,r,o,a,s=n.length||1,l=this.dimensions||[],d=0,c=e.length,u=[],h=[];if(c||n.length){for(d=0;s>d;d++){for(i={members:[]},a=0;c>a;a++)o=(r=e[a]).split("&"),i.members[i.members.length]={children:[],caption:(l[r]||{}).caption||"All",name:r,levelName:r,levelNum:"0",hasChildren:!0,parentName:o.length>1?o[0]:t,hierarchy:r};s>1&&(i.members[i.members.length]={children:[],caption:n[d].caption,name:n[d].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),u[u.length]=i}h.push(_e)}return{keys:h,tuples:u}},_expandedTuples:function(e,n,i){var r,o,a,s,l,d,c,u,h,p,f,g=i.length||1,m=this.dimensions||[],v=[],b=[];for(a in e){for(s=e[a],l=v[(c=this._findExpandedMember(n,s.uniquePath)).index]||[],d=b[c.index]||[],u=c.member.names,r=0;g>r;r++){for(o={members:[]},f=0;u.length>f;f++)f===c.member.expandedIdx?(o.members[o.members.length]={children:[],caption:s.value,name:s.name,hasChildren:!1,levelNum:1,levelName:s.parentName+s.name,parentName:s.parentName,hierarchy:s.parentName+s.name},0===r&&d.push(Q(o,f).join(""))):(h=(p=u[f]).split("&"),o.members[o.members.length]={children:[],caption:(m[p]||{}).caption||"All",name:p,levelName:p,levelNum:"0",hasChildren:!0,parentName:h.length>1?h[0]:t,hierarchy:p});g>1&&(o.members[o.members.length]={children:[],caption:i[r].caption,name:i[r].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),l[l.length]=o}v[c.index]=l,b[c.index]=d}return{keys:b,tuples:v}},_findExpandedMember:function(e,t){for(var n=0;e.length>n;n++)if(e[n].uniquePath===t)return{member:e[n],index:n}},_asTuples:function(e,t,n){var i,r;return n=n||[],i=this._rootTuples(t.root,n),r=this._expandedTuples(e,t.expanded,n),{keys:[].concat.apply(i.keys,r.keys),tuples:[].concat.apply(i.tuples,r.tuples)}},_measuresInfo:function(e,t){for(var n,i,r=0,o=e&&e.length,a=[],s={},l={},d=this.measures||{};o>r;r++)n=d[i=e[r].descriptor.name]||{},a.push(i),n.result&&(s[i]=n.result),n.format&&(l[i]=n.format);return{names:a,formats:l,resultFuncs:s,rowAxis:t}},_toDataArray:function(e,t,n,i){var r,o,a,s,l,d,c,u,h,p,f=[],g=1,m=[],v=n.length||1,b=i.length||1;for(t.rowAxis?g=(m=t.names).length:p=t.names,a=0;v>a;a++)for(c=e[n[a]||_e],d=0;g>d;d++)for(t.rowAxis&&(p=[m[d]]),s=0;b>s;s++)for(h=i[s]||_e,u=c.items[h],r=h===_e?c.aggregates:u?u.aggregates:{},l=0;p.length>l;l++)o=p[l],this._addData(f,r[o],t.formats[o],t.resultFuncs[o]);return f},_addData:function(e,t,n,i){var r,o="";t&&(t=i?i(t):t.accumulator,o=n?ne.format(n,t):t),e[r=e.length]={ordinal:r,value:t||"",fmtValue:o}},_matchDescriptors:function(e,n,i){for(var r,o,a,s,l=n.names,d=n.expandedIdx;d>0;)if((r=l[--d].split("&")).length>1&&(o=r[0],a=r[1],(s=(s=i[o](e))!==t&&null!==s?""+s:s)!=a))return!1;return!0},_calculateAggregate:function(e,t,n){var i,r,o,a={};for(o=0;e.length>o;o++)r=e[o].descriptor.name,(i=n.aggregates[r]||{}).accumulator=e[o].aggregator(t,i),a[r]=i;return a},_processColumns:function(e,n,i,r,o,a,s,l){for(var d,c,u,h,p,f,g,m,v=o.dataItem,b=0;n.length>b;b++)c=n[b],this._matchDescriptors(v,c,i)&&(m=c.names.slice(0,c.expandedIdx).join(""),g=f=c.names[c.expandedIdx],u=r[p=m+(f=f+"&"+(d=(d=i[f](v))!==t&&null!==d?""+d:d))]||{index:s.columnIndex,parentName:g,name:f,uniquePath:m+g,value:d},h=a.items[p]||{aggregates:{}},a.items[p]={index:u.index,aggregates:this._calculateAggregate(e,o,h)},l&&(r[p]||s.columnIndex++,r[p]=u))},_measureAggregators:function(e){var t,n,i,r,o,s,l=e.measures||[],d=this.measures||{},c=[];if(l.length){for(i=0,r=l.length;r>i;i++)if(o=null,n=d[(t=l[i]).name]){if("string"==typeof(s=n.aggregate)){if(!(o=De[s.toLowerCase()]))throw Error("There is no such aggregate function");n.aggregate=o.aggregate||o,n.result=o.result}c.push({descriptor:t,caption:n.caption,result:n.result,aggregator:a(n)})}}else c.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return c},_normalizeName:function(e){return-1!==e.indexOf(" ")&&(e='["'+e+'"]'),e},_buildGetters:function(e){var t,n,i,r={};for(i=0;e.length>i;i++)(t=(n=e[i]).split("&")).length>1?r[t[0]]=ne.getter(t[0],!0):r[n]=ne.getter(this._normalizeName(n),!0);return r},_parseDescriptors:function(e){var t,n=O(e),i=E(n.root),r=n.expanded,o=[];for(t=0;r.length>t;t++)o.push(A(r[t].name,i));return{root:i,expanded:o}},process:function(e,n){var r,o,a,s,l,d,c,u,h,p,f,g,m,v,b,_,k,w,y,x,C,S,T,D,I,E,A,O,R,P;if(e=e||[],r=(n=n||{}).measures||[],o="rows"===n.measuresAxis,a=n.columns||[],s=n.rows||[],!a.length&&s.length&&(!r.length||r.length&&o)&&(a=s,s=[],o=!1),a.length||s.length||(o=!1),!a.length&&r.length&&(a=i(n.measures)),a=this._parseDescriptors(a),s=this._parseDescriptors(s),l={},d={},c={},h={columnIndex:0},p=this._measureAggregators(n),f=this._buildGetters(a.root),g=this._buildGetters(s.root),m=!1,v=a.expanded,w=0!==(b=s.expanded).length,R=e.length,P=0,a.root.length||s.root.length)for(m=!0,P=0;R>P;P++)for(k={dataItem:_=e[P],index:P},S=l[_e]||{items:{},aggregates:{}},this._processColumns(p,v,f,d,k,S,h,!w),S.aggregates=this._calculateAggregate(p,k,S),l[_e]=S,y=0;b.length>y;y++)x=b[y],this._matchDescriptors(_,x,g)?(D=x.names.slice(0,x.expandedIdx).join(""),I=C=x.names[x.expandedIdx],c[T=D+(C=C+"&"+(u=(u=g[C](_))!==t?""+u:u))]={uniquePath:D+I,parentName:I,name:C,value:u},E=l[T]||{items:{},aggregates:{}},this._processColumns(p,v,f,d,k,E,h,!0),E.aggregates=this._calculateAggregate(p,k,E),l[T]=E):this._processColumns(p,v,f,d,k,{items:{},aggregates:{}},h,!0);return m&&R?(!(p.length>1)||n.columns&&n.columns.length||(a={root:[],expanded:[]}),A=this._asTuples(d,a,o?[]:p),O=this._asTuples(c,s,o?p:[]),d=A.tuples,c=O.tuples,l=this._toDataArray(l,this._measuresInfo(p,o),O.keys,A.keys)):l=d=c=[],{axes:{columns:{tuples:d},rows:{tuples:c}},data:l}}}),Ee=re.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||ue(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){return this.transport.discover?this.transport.discover(e):(e.success({}),t)},catalog:function(n){var i,r=this.options||{};return n===t?(r.connection||{}).catalog:((i=r.connection||{}).catalog=n,this.options.connection=i,e.extend(this.transport.options,{connection:i}),t)},cube:function(e){var n,i=this.options||{};return e===t?(i.connection||{}).cube:((n=i.connection||{}).cube=e,this.options.connection=n,ce(!0,this.transport.options,{connection:n}),t)}}),Ae=ae.extend({init:function(t){var r,o=((t||{}).schema||{}).cube,a="columns",s={axes:le,cubes:le,catalogs:le,measures:le,dimensions:le,hierarchies:le,levels:le,members:le};o&&(s=e.extend(s,this._cubeSchema(o)),this.cubeBuilder=new Ie(o)),ae.fn.init.call(this,ce(!0,{},{schema:s},t)),this.transport=new Ee(this.options.transport||{},this.transport),this._columns=i(this.options.columns),this._rows=i(this.options.rows),r=this.options.measures||[],"[object Object]"===se.call(r)&&(a=r.axis||"columns",r=r.values||[]),this._measures=n(r),this._measuresAxis=a,this._skipNormalize=0,this._axes={}},_cubeSchema:function(e){return{dimensions:function(){var t,n=[],i=e.dimensions;for(t in i)n.push({name:t,caption:i[t].caption||t,uniqueName:t,defaultHierarchy:t,type:1});return e.measures&&n.push({name:pe,caption:pe,uniqueName:pe,type:2}),n},hierarchies:function(){return[]},measures:function(){var t,n=[],i=e.measures;for(t in i)n.push({name:t,caption:t,uniqueName:t,aggregator:t});return n}}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){return e===t?this.transport.catalog():(this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([]),t)},cube:function(e){return e===t?this.transport.cube():(this.transport.cube(e),this._axes={},this._mergeState({}),this.data([]),t)},axes:function(){return this._axes},columns:function(e){return e===t?this._columns:(this._skipNormalize+=1,this._clearAxesData=!0,this._columns=i(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures()}),t)},rows:function(e){return e===t?this._rows:(this._skipNormalize+=1,this._clearAxesData=!0,this._rows=i(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures()}),t)},measures:function(e){return e===t?this._measures:(this._skipNormalize+=1,this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:n(e)}),t)},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var n,r,a="columns"===t?"columns":"rows",s="columns"===t?"rows":"columns",l=i(e),d=I(l[l.length-1]);for(this._lastExpanded=a,l=o(this.axes()[a],l,this.measures()),n=0;l.length>n;n++)if(I(l[n])===d){if(l[n].expand)return;l[n].expand=!0}else l[n].expand=!1;(r={})[a]=l,r[s]=this._descriptorsForAxis(s),this._query(r)},_descriptorsForAxis:function(e){var t=this.axes(),n=this[e]()||[];return t&&t[e]&&t[e].tuples&&t[e].tuples[0]&&(n=r(t[e].tuples||[])),n},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,(t=t||{}).items=t.items||this._view,this.trigger(he,t)},_query:function(e){var t=this;return e||(this._skipNormalize+=1,this._clearAxesData=!0),t.query(ce({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var n=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(n),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(n)},_mergeState:function(e){return(e=ae.fn._mergeState.call(this,e))!==t&&(this._measures=n(e.measures),e.columns?e.columns=i(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=i(e.rows):e.rows||(this._rows=[])),e},filter:function(e){return e===t?this._filter:(this._skipNormalize+=1,this._clearAxesData=!0,this._query({filter:e,page:1}),t)},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),ae.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){var n,i,r,o,a,s,l,h,g,m,v;return this.cubeBuilder&&(e=(n=this.cubeBuilder.process(e,this._requestData)).data,t=n.axes),h=this.columns(),g=this.rows(),m=t.columns&&t.columns.tuples,h.length||!g.length||!m||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),h.length||g.length||"rows"!==this.measuresAxis()||!m||(t={columns:{},rows:t.columns}),this._axes={columns:f(this._axes.columns),rows:f(this._axes.rows)},t={columns:f(t.columns),rows:f(t.rows)},i=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,h,this._columnMeasures()),r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,g,this._rowMeasures()),this._skipNormalize-=1,this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:i,rowIndexes:r,data:e})),"rows"==this._lastExpanded?(o=t.columns.tuples,s=this._columnMeasures(),(a=d(t.columns,this._axes.columns,s))&&(l="columns",t.columns=a,c(o,a.tuples,t.rows.tuples.length,s,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:p(t.columns.tuples,s),rowsLength:t.rows.tuples.length,data:e})))):"columns"==this._lastExpanded&&(o=t.rows.tuples,s=this._rowMeasures(),(a=d(t.rows,this._axes.rows,s))&&(l="rows",t.rows=a,u(o,a.tuples,t.columns.tuples.length,s,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:p(t.rows.tuples,s),rowsLength:t.columns.tuples.length,data:e})))),this._lastExpanded=null,v=this._mergeAxes(t,e,l),this._axes=v.axes,v.data},_readData:function(e){var t=this.reader.axes(e),n=this.reader.data(e);return this._processResult(n,t)},_createTuple:function(e,t,n){var i,r,o,a,s,l,d,c,u=e.members,h=u.length,p={members:[]},f=0;for(t&&(h-=1);h>f;f++)r=+(c=u[f]).levelNum,o=c.name,a=c.parentName,d=c.caption||o,s=c.hasChildren,l=c.hierarchy,i=c.levelName,n&&(d="All",0===r?a=c.name:r-=1,s=!0,o=l=i=a),p.members.push({name:o,children:[],caption:d,levelName:i,levelNum:""+r,hasChildren:s,hierarchy:l,parentName:n?"":a});return t&&p.members.push({name:t.name,children:[]}),p},_hasRoot:function(e,t,n){var i,r,o,a,s,l,d;if(t.length)return b(t,e).tuple;for(a=!0,l=0,d=(i=e.members).length;d>l;l++)if(s=+(r=i[l]).levelNum||0,o=n[l],!(0===s||o&&r.name===I(o))){a=!1;break}return a},_mergeAxes:function(e,t,n){var i,r,o,a,s,l=this._columnMeasures(),d=this._rowMeasures(),c=this.axes(),u=e.rows.tuples.length,h=p(c.columns.tuples,l),f=e.columns.tuples.length;return"columns"==n?(f=h,r=e.columns.tuples):t=function(e,t){var n,i,r,o,a,s,l,d;if(!e||!e.length)return t;for(n=[],r=(i=x(e)).length,o=Math.max(t.length/r,1),s=0;o>s;s++)for(l=r*s,a=0;r>a;a++)d=i[a]+l,n[l+a]=t[d]||{value:"",fmtValue:"",ordinal:d};return n}(r=y(e.columns.tuples,l),t),o=m(c.columns.tuples,r,l),"rows"==n?(u=p(e.rows.tuples,d),r=e.rows.tuples):t=function(e,t){var n,i,r,o,a,s,l,d,c;if(!e||!e.length)return t;for(n=[],r=(i=x(e)).length,o=Math.max(t.length/r,1),a=0;r>a;a++)for(l=o*a,d=o*i[a],s=0;o>s;s++)c=parseInt(d+s,10),n[parseInt(l+s,10)]=t[c]||{value:"",fmtValue:"",ordinal:c};return n}(r=y(e.rows.tuples,d),t),a=m(c.rows.tuples,r,d),c.columns.tuples=o.tuples,c.rows.tuples=a.tuples,h!==p(c.columns.tuples,l)?(i=o.index+g(o.parsedRoot,o.memberIndex,l),s=h+f,t=this._mergeColumnData(t,i,u,f,s)):(i=a.index+g(a.parsedRoot,a.memberIndex,d),t=this._mergeRowData(t,i,u,f)),{axes:c,data:t}},_mergeColumnData:function(e,t,n,i,r){var o,a,s,l=this.data().toJSON(),d=0,c=Math.max(this._columnMeasures().length,1);for(n=Math.max(n,1),l.length>0&&(d=c,r-=c),o=0;n>o;o++)a=t+o*r,(s=e.splice(0,i)).splice(0,d),[].splice.apply(l,[a,0].concat(s));return l},_mergeRowData:function(e,t,n,i){var r,o,a,s=this.data().toJSON(),l=Math.max(this._rowMeasures().length,1);for(i=Math.max(i,1),s.length>0&&(n-=l,e.splice(0,i*l)),r=0;n>r;r++)a=e.splice(0,i),o=t*i+r*i,[].splice.apply(s,[o,0].concat(a));return s},_columnMeasures:function(){var e=this.measures(),t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length?t=e:e.length>1&&(t=e)),t},_rowMeasures:function(){var e=this.measures(),t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length?t=e:e.length>1&&(t=e)),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){return e===t?this._data:(this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()}),t)},_normalizeTuples:function(e,t,n,i){var r,o,a,s=i.length||1,l=0,d=[],c={},u=0;if(e.length){if(0>=this._skipNormalize&&!this._hasRoot(e[0],t,n)){for(this._skipNormalize=0;s>l;l++)d.push(this._createTuple(e[0],i[l],!0)),c[l]=l;e.splice.apply(e,[0,e.length].concat(d).concat(e)),l=s}if(i.length)for(a=r=e[l],o=r.members.length-1;r;){if(u>=s&&(u=0),r.members[o].name!==i[u].name&&(e.splice(l,0,this._createTuple(r,i[u])),c[l]=l),u+=1,r=e[l+=1],s>u&&(!r||X(a,o-1)!==X(r,o-1))){for(;s>u;u++)e.splice(l,0,this._createTuple(a,i[u])),c[l]=l,l+=1;r=e[l]}a=r}return c}},_normalizeData:function(e){var n,i,r=e.data,o=e.columnIndexes||{},a=e.rowIndexes||{},s=e.columnsLength||1,l=s*(e.rowsLength||1),d=0,c=0,u=0,h=Array(l);if(r.length===l)return r;for(;l>d;d++){for(;a[parseInt(d/s,10)]!==t;)for(i=0;s>i;i++)h[d]={value:"",fmtValue:"",ordinal:d},d+=1;for(;o[d%s]!==t;)h[d]={value:"",fmtValue:"",ordinal:d},d+=1;if(n=r[c]){if(n.ordinal-u>1)for(u+=1;n.ordinal>u;u++)h[d]={value:"",fmtValue:"",ordinal:d},d+=1;u=n.ordinal,n.ordinal=d,h[d]=n,c+=1}else h[d]={value:"",fmtValue:"",ordinal:d}}return h},discover:function(t,n){var i=this,r=i.transport;return e.Deferred(function(e){r.discover(ce({success:function(t){t=i.reader.parse(t),i._handleCustomErrors(t)||(n&&(t=n(t)),e.resolve(t))},error:function(t,n,r){e.reject(t),i.error(t,n,r)}},t))}).promise().done(function(){i.trigger("schemaChange")})},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.measures(t)})},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.kpis(t)})},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.dimensions(t)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},function(t){return e.reader.cubes(t)})},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},function(t){return e.reader.catalogs(t)})},schemaMembers:function(e){var t=this;return t.discover({data:{command:"schemaMembers",restrictions:ce({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},function(e){return t.reader.members(e)})},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger(ge));var t=ae.fn._params.call(this,e);return t=ce({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});Ae.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},n=t.data;if(t.data=n,!(t instanceof Ae)&&t instanceof ne.data.DataSource)throw Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof Ae?t:new Ae(t)},N={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") = 0',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', NOT {0}.CurrentMember.MEMBER_CAPTION = "{1}"'},$={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"},L={read:function(e){var t,n,i,r,o,a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';return a+="SELECT NON EMPTY {",t=e.columns||[],n=e.rows||[],i=e.measures||[],r="rows"===e.measuresAxis,o=e.sort||[],!t.length&&n.length&&(!i.length||i.length&&r)&&(t=n,n=[],r=!1),t.length||n.length||(r=!1),t.length?a+=R(t,r?[]:i,o):i.length&&!r&&(a+=D(i).join(",")),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(n.length||r&&i.length>1)&&(a+=", NON EMPTY {",a+=n.length?R(n,r?i:[],o):D(i).join(","),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(a+=" FROM ",a+="(",a+=function(e,t){var n,i,r="",o=e.filters,a=o.length;for(i=a-1;i>=0;i--)n="SELECT (",n+=P(o[i]),n+=") ON 0",r=i==a-1?n+=" FROM ["+t+"]":n+" FROM ( "+r+" )";return r}(e.filter,e.connection.cube),a+=")"):a+=" FROM ["+e.connection.cube+"]",1==i.length&&t.length&&(a+=" WHERE ("+D(i).join(",")+")"),(a+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/\&/g,"&amp;")},discover:function(t){var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return n+="<RequestType>"+($[(t=t||{}).command]||t.command)+"</RequestType>",n+="<Restrictions>"+M("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),(n+="<Properties>"+M("PropertyList",t.properties)+"</Properties>")+"</Discover></Body></Envelope>"}},z=ne.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=ce(!0,{},this.options,e),ne.data.RemoteTransport.call(this,e),ue(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,n){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),ne.data.RemoteTransport.fn.setup.call(this,t,n)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return L[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}}),j={cubes:{name:ne.getter("CUBE_NAME['#text']",!0),caption:ne.getter("CUBE_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),type:ne.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:ne.getter("CATALOG_NAME['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0)},measures:{name:ne.getter("MEASURE_NAME['#text']",!0),caption:ne.getter("MEASURE_CAPTION['#text']",!0),uniqueName:ne.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),aggregator:ne.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:ne.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:ne.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:ne.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:ne.getter("KPI_NAME['#text']",!0),caption:ne.getter("KPI_CAPTION['#text']",!0),value:ne.getter("KPI_VALUE['#text']",!0),goal:ne.getter("KPI_GOAL['#text']",!0),status:ne.getter("KPI_STATUS['#text']",!0),trend:ne.getter("KPI_TREND['#text']",!0),statusGraphic:ne.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:ne.getter("KPI_TREND_GRAPHIC['#text']",!0),description:ne.getter("KPI_DESCRIPTION['#text']",!0),groupName:ne.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:ne.getter("DIMENSION_NAME['#text']",!0),caption:ne.getter("DIMENSION_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),uniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:ne.getter("DEFAULT_HIERARCHY['#text']",!0),type:ne.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:ne.getter("HIERARCHY_NAME['#text']",!0),caption:ne.getter("HIERARCHY_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),uniqueName:ne.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:ne.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:ne.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:ne.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:ne.getter("LEVEL_NAME['#text']",!0),caption:ne.getter("LEVEL_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),uniqueName:ne.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:ne.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:ne.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:ne.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:ne.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:ne.getter("MEMBER_NAME['#text']",!0),caption:ne.getter("MEMBER_CAPTION['#text']",!0),uniqueName:ne.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:ne.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:ne.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:ne.getter("CHILDREN_CARDINALITY['#text']",!0)}},B=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"],U=ne.data.XmlDataReader.extend({init:function(e){ne.data.XmlDataReader.call(this,e),this._extend(e)},_extend:function(e){for(var t,n,i=0,r=B.length;r>i;i++)(n=e[t=B[i]])&&n!==le&&(this[t]=n)},parse:function(e){var t=ne.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return ne.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=ne.getter("['Fault']",!0)(e);return t?[{faultstring:ne.getter("faultstring['#text']",!0)(t),faultcode:ne.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){var t,n,i,r;for(e=ne.getter('ExecuteResponse["return"].root',!0)(e),t=F(ne.getter("Axes.Axis",!0)(e)),i={columns:{},rows:{}},r=0;t.length>r;r++)"sliceraxis"!==(n=t[r])["@name"].toLowerCase()&&(i.columns.tuples?i.rows=H(n):i.columns=H(n));return i},data:function(e){var t,n,i,r,o,a;for(e=ne.getter('ExecuteResponse["return"].root',!0)(e),t=F(ne.getter("CellData.Cell",!0)(e)),n=[],i=ne.getter("['@CellOrdinal']"),r=ne.getter("Value['#text']"),o=ne.getter("FmtValue['#text']"),a=0;t.length>a;a++)n.push({value:r(t[a]),fmtValue:o(t[a]),ordinal:parseInt(i(t[a]),10)});return n},_mapSchema:function(e,t){var n,i,r,o,a;for(e=ne.getter('DiscoverResponse["return"].root',!0)(e),n=F(ne.getter("row",!0)(e)),i=[],r=0;n.length>r;r++){for(a in o={},t)o[a]=t[a](n[r]);i.push(o)}return i},measures:function(e){return this._mapSchema(e,j.measures)},kpis:function(e){return this._mapSchema(e,j.kpis)},hierarchies:function(e){return this._mapSchema(e,j.hierarchies)},levels:function(e){return this._mapSchema(e,j.levels)},dimensions:function(e){return this._mapSchema(e,j.dimensions)},cubes:function(e){return this._mapSchema(e,j.cubes)},catalogs:function(e){return this._mapSchema(e,j.catalogs)},members:function(e){return this._mapSchema(e,j.members)}}),ce(!0,ne.data,{PivotDataSource:Ae,XmlaTransport:z,XmlaDataReader:U,PivotCubeBuilder:Ie,transports:{xmla:z},readers:{xmla:U}}),V=function(e,t){if(!e)return null;for(var n=0,i=e.length;i>n;n++)if(e[n].field===t)return e[n];return null},W=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r},ne.ui.PivotSettingTarget=oe.extend({init:function(t,n){var i=this;oe.fn.init.call(i,t,n),i.element.addClass("k-pivot-setting"),i.dataSource=ne.data.PivotDataSource.create(n.dataSource),i._refreshHandler=e.proxy(i.refresh,i),i.dataSource.first(he,i._refreshHandler),n.template||(i.options.template="<div data-"+ne.ns+'name="${data.name || data}">${data.name || data}'+(i.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-setting-delete"></span></a>':"")+"</div>"),i.template=ne.template(i.options.template),i.emptyTemplate=ne.template(i.options.emptyTemplate),i._sortable(),i.element.on("click"+be,".k-button,.k-item",function(t){var n=e(t.target),r=n.closest("["+ne.attr("name")+"]").attr(ne.attr("name"));r&&(n.hasClass("k-setting-delete")?i.remove(r):i.options.sortable&&n[0]===t.currentTarget&&i.sort({field:r,dir:n.find(".k-i-sort-asc")[0]?"desc":"asc"}))}),(n.filterable||n.sortable)&&(i.fieldMenu=new ie.PivotFieldMenu(i.element,{messages:i.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:n.filterable,sortable:n.sortable,dataSource:i.dataSource})),i.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(he,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(he,this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,filter:">:not(.k-empty)",hint:e.options.hint,cursor:"move",start:function(e){e.item.focus().blur()},change:function(t){var n=t.item.attr(ne.attr("name"));"receive"==t.action?e.add(n):"remove"==t.action?e.remove(n):"sort"==t.action&&e.move(n,t.newIndex)}}).data("kendoSortable"))},_indexOf:function(e,t){var n,i,r=-1;for(n=0,i=t.length;i>n;n++)if(I(t[n])===e){r=n;break}return r},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t,n,i=2==e.type||"aggregator"in e||this._isKPI(e);return i?"measures"===this.options.setting:"measures"===this.options.setting?i:(t=this.dataSource[this.options.setting](),n=e.defaultHierarchy||e.uniqueName,!(this._indexOf(n,t)>-1||(t=this.dataSource["columns"===this.options.setting?"rows":"columns"](),this._indexOf(n,t)>-1)))},add:function(t){var n,i,r=this.dataSource[this.options.setting]();for(n=0,i=(t=e.isArray(t)?t.slice(0):[t]).length;i>n;n++)-1!==this._indexOf(t[n],r)&&(t.splice(n,1),n-=1,i-=1);t.length&&(r=r.concat(t),this.dataSource[this.options.setting](r))},move:function(e,t){var n=this.dataSource[this.options.setting](),i=this._indexOf(e,n);i>-1&&(e=n.splice(i,1)[0],n.splice(t,0,e),this.dataSource[this.options.setting](n))},remove:function(e){var t=this.dataSource[this.options.setting](),n=this._indexOf(e,t);n>-1&&(t.splice(n,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable,n=(!0===t||t.allowUnsort)&&"asc"===e.dir,i=this.dataSource.sort()||[],r=W(i,e.field);n&&i.length!==r.length&&(e=null),e&&r.push(e),this.dataSource.sort(r)},refresh:function(){var e,n="",i=this.dataSource[this.options.setting](),r=i.length,o=0;if(r)for(;r>o;o++)e=(e=i[o]).name===t?{name:e}:e,n+=this.template(ce({sortIcon:this._sortIcon(e.name)},e));else n=this.emptyTemplate(this.options.messages.empty);this.element.html(n)},destroy:function(){oe.fn.destroy.call(this),this.dataSource.unbind(he,this._refreshHandler),this.element.off(be),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=this.dataSource.sort(),n=V(t,I(e)),i="";return n&&(i="k-i-sort-"+n.dir),i}}),G=oe.extend({init:function(n,i){var r,o,a=this;oe.fn.init.call(a,n,i),a._dataSource(),a._bindConfigurator(),a._wrapper(),a._createLayout(),a._columnBuilder=r=new J,a._rowBuilder=o=new Z,a._contentBuilder=new ee,a._templates(),a.columnsHeader.add(a.rowsHeader).on("click","span.k-icon",function(){var n,i,s,l=e(this),d=r,c="expandColumn",u=l.attr(ne.attr("path")),h={axis:"columns",path:e.parseJSON(u)};l.parent().is("td")&&(d=o,c="expandRow",h.axis="rows"),i=l.hasClass(Ce),s=d.metadata[u].expanded===t,n=i?xe:ye,a.trigger(n,h)||(d.metadata[u].expanded=!i,l.toggleClass(Ce,!i).toggleClass(Se,i),!i&&s?a.dataSource[c](h.path):a.refresh())}),a._scrollable(),a.options.autoBind&&a.dataSource.fetch(),ne.notify(a)},events:[ke,we,ye,xe],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate,t=this.options.rowHeaderTemplate,n=this.options.dataCellTemplate,i=this.options.kpiStatusTemplate,r=this.options.kpiTrendTemplate;this._columnBuilder.template=ne.template(e||Te,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=ne.template(n||'#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',{useWithBlock:!!n}),this._contentBuilder.kpiStatusTemplate=ne.template(i||'<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "denied" : "hold"#">#:data.dataItem.value#</span>',{useWithBlock:!!i}),this._contentBuilder.kpiTrendTemplate=ne.template(r||'<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#">#:data.dataItem.value#</span>',{useWithBlock:!!r}),this._rowBuilder.template=ne.template(t||Te,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var n,i=this._contentBuilder,r=i.columnIndexes[e||0],o=i.rowIndexes[t||0];return r&&o?(n=o.index*i.rowLength+r.index,{columnTuple:r.tuple,rowTuple:o.tuple,measure:r.measure||o.measure,dataItem:this.dataSource.view()[n]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){oe.fn.setOptions.call(this,e),this._templates()},_dataSource:function(){var t=this,n=t.options.dataSource;n=e.isArray(n)?{data:n}:n,t.dataSource&&this._refreshHandler?t.dataSource.unbind(he,t._refreshHandler).unbind(ge,t._stateResetHandler).unbind(fe,t._progressHandler).unbind("error",t._errorHandler):(t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t),t._stateResetHandler=e.proxy(t._stateReset,t),t._errorHandler=e.proxy(t._error,t)),t.dataSource=ne.data.PivotDataSource.create(n).bind(he,t._refreshHandler).bind(fe,t._progressHandler).bind(ge,t._stateResetHandler).bind("error",t._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e(ve).addClass("k-pivot-toolbar k-header k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,n){var i='<span tabindex="0" class="k-button" data-'+ne.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),this.options.reorderable&&(o+='<span class="k-icon k-si-close k-setting-delete"></span>'),o&&(i+='<span class="k-field-actions">'+o+"</span>"),i+="</span>",new ne.ui.PivotSettingTarget(t,e.extend({template:i,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},n))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=this,n=e('<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>'),i=n.find(".k-pivot-rowheaders"),r=n.find(".k-pivot-table"),o=e(ve).addClass("k-grid k-widget");t._measureFields(),t.columnFields=e(ve).addClass("k-pivot-toolbar k-header k-settings-columns"),t.rowFields=e(ve).addClass("k-pivot-toolbar k-header k-settings-rows"),t.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),t.columnsHeader.parent().css("padding-right",ne.support.scrollbar()),t.rowsHeader=e('<div class="k-grid k-widget k-alt"/>'),t.content=e('<div class="k-grid-content" />'),i.append(t.measureFields),i.append(t.rowFields),i.append(t.rowsHeader),o.append(t.columnsHeader.parent()),o.append(t.content),r.append(t.columnFields),r.append(o),t.wrapper.append(n),t.columnsHeaderTree=new ne.dom.Tree(t.columnsHeader[0]),t.rowsHeaderTree=new ne.dom.Tree(t.rowsHeader[0]),t.contentTree=new ne.dom.Tree(t.content[0]),t._initSettingTargets()},_progress:function(e){ne.ui.progress(this.wrapper,e)},_resize:function(){this.columnsHeader.children("table"),this.content.children("table"),this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight())},_setSectionsWidth:function(){var e=this.rowsHeader,t=e.parent(".k-pivot-rowheaders").width(me),n=Math.max(this.measureFields.outerWidth(),this.rowFields.outerWidth());n=Math.max(e.children("table").width(),n),t.width(n)},_setSectionsHeight:function(){var e=this.measureFields.height(me).height(),t=this.columnFields.height(me).height(),n=this.rowFields.height(me).innerHeight(),i=this.columnsHeader.height(me).innerHeight(),r=n-this.rowFields.height(),o=t>e?t:e,a=i>n?i:n;this.measureFields.height(o),this.columnFields.height(o),this.rowFields.height(a-r),this.columnsHeader.height(a)},_setContentWidth:function(){var e=this.content.find("table"),t=this.columnsHeader.children("table"),n=e.children("colgroup").children().length*this.options.columnWidth,i=Math.ceil(n/this.content.width()*100);100>i&&(i=100),e.add(t).css("width",i+"%"),this._resetColspan(t)},_setContentHeight:function(){var e=this,n=e.content,i=e.rowsHeader,r=e.wrapper.innerHeight(),o=ne.support.scrollbar(),a=n[0].offsetHeight===n[0].clientHeight,s=e.options.height;if(e.wrapper.is(":visible")){if(!r||!s)return a&&(o=0),n.height("auto"),i.height(n.height()-o),t;r-=e.columnFields.outerHeight(),2*o>=(r-=e.columnsHeader.outerHeight())&&(r=2*o+1,a||(r+=o)),n.height(r),a&&(o=0),i.height(r-o)}},_resetColspan:function(e){var n=this,i=e.children("tbody").children(":first").children(":first");n._colspan===t&&(n._colspan=i.attr("colspan")),i.attr("colspan",1),clearTimeout(n._layoutTimeout),n._layoutTimeout=setTimeout(function(){i.attr("colspan",n._colspan),n._colspan=t})},_axisMeasures:function(e){var t=[],n=this.dataSource,i=n.measures(),r=i.length>1||i[0]&&i[0].type;return n.measuresAxis()===e&&(0===n[e]().length||r)&&(t=i),t},items:function(){return[]},refresh:function(){var e,t=this,n=t.dataSource,i=n.axes(),r=(i.columns||{}).tuples||[],o=(i.rows||{}).tuples||[],a=t._columnBuilder,s=t._rowBuilder,l={},d={};t.trigger(ke,{action:"rebind"})||(a.measures=t._axisMeasures("columns"),t.columnsHeaderTree.render(a.build(r)),t.rowsHeaderTree.render(s.build(o)),l={indexes:a._indexes,measures:a.measures,metadata:a.metadata},d={indexes:s._indexes,measures:this._axisMeasures("rows"),metadata:s.metadata},t.contentTree.render(t._contentBuilder.build(n.view(),l,d)),t._resize(),t.touchScroller?t.touchScroller.contentResized():(e=ne.touchScroller(t.content))&&e.movable&&(t.touchScroller=e,e.movable.bind("change",function(e){t.columnsHeader.scrollLeft(-e.sender.x),t.rowsHeader.scrollTop(-e.sender.y)})),t._progress(!1),t.trigger(we))},_scrollable:function(){var t=this,n=t.columnsHeader,i=t.rowsHeader;t.content.scroll(function(){n.scrollLeft(this.scrollLeft),i.scrollTop(this.scrollTop)}),i.bind("DOMMouseScroll"+be+" mousewheel"+be,e.proxy(t._wheelScroll,t))},_wheelScroll:function(t){var n,i;t.ctrlKey||(n=ne.wheelDeltaY(t),i=this.content.scrollTop(),n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+be,!1),this.rowsHeader.scrollTop(i+-n),this.content.scrollTop(i+-n)))}}),q=ne.dom.element,K=ne.dom.html,ne.dom.text,Y=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}},Q=function(e,t){for(var n=[],i=0;t>=i;i++)n.push(e.members[i].name);return n},X=function(e,t){for(var n="",i=0;t>=i;i++)n+=e.members[i].name;return n},J=re.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[q("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this._rowLength(),t=[],n=0;e>n;n++)t.push(q("col",null));return q("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(q("tr",null,[q("th",null,[K("&nbsp;")])])),q("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r,o=this.rows,a=o.length,s=0;a>s;s++)if(1!==(e=o[s]).rowSpan)for(n=0,t=(i=e.children).length;t>n;n++)(r=i[n]).tupleAll&&(r.attr.rowSpan=e.rowSpan)},_rowIndex:function(e){for(var t=this.rows,n=t.length,i=0;n>i&&t[i]!==e;i++);return i},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[],t=e.length,n=0,i=0;if(t)for(;t>i;i++)n+=e[i].attr.colSpan||1;return n||(n=this.measures),n},_row:function(e,t,n){var i,r,o=this.rootTuple.members[t].name,a=e.members[t].levelNum,s=o+a,l=this.map,d=l[s];return d?(d.notFirst=!1,d.parentMember&&d.parentMember===n||(d.parentMember=n,d.collapsed=0,d.colSpan=0)):((d=q("tr",null,[])).parentMember=n,d.collapsed=0,d.colSpan=0,d.rowSpan=1,l[s]=d,(i=l[o+(+a-1)])&&(r=i.children,d.notFirst=!(!r[1]||-1!==r[1].attr.className.indexOf("k-alt"))||i.notFirst),this.rows.splice(this._rowIndex(i)+1,0,d)),d},_measures:function(e,t,n){var i,r,o,a=this.map,s=a.measureRow;for(s||(s=q("tr",null,[]),a.measureRow=s,this.rows.push(s)),r=0,o=e.length;o>r;r++)i=e[r],s.children.push(this._cell(n||"",[this._content(i,t)],i));return o},_content:function(e,t){return K(this.template({member:e,tuple:t}))},_cell:function(e,t,n){var i=q("th",{className:"k-header"+e},t);return i.value=n.caption||n.name,i},_buildRows:function(e,n,i){var r,o,a,s,l,d,c,u,h,p,f=e.members,g=f[n],m=f[n+1],v=[],b=0,_=0,k=0;if(g.measure)return this._measures(g.children,e),t;if(u=ne.stringify(Q(e,n)),r=this._row(e,n,i),s=(a=g.children).length,(h=this.metadata[u])||(this.metadata[u]=h=Y(+g.levelNum,n)),this._indexes.push({path:u,tuple:e}),g.hasChildren&&(!1===h.expanded&&(_=h.maxChildren,r.collapsed+=_,h.children=0,s=0),(c={className:"k-icon "+(s?Ce:Se)})[ne.attr("path")]=u,v.push(q("span",c))),v.push(this._content(g,e)),l=this._cell(r.notFirst?" k-first":"",v,g),r.children.push(l),r.colSpan+=1,s){for(d=this._cell(" k-alt",[this._content(g,e)],g),r.children.push(d);s>b;b++)o=this._buildRows(a[b],n,g);p=o.colSpan,_=o.collapsed,l.attr.colSpan=p,h.children=p,h.members=1,r.colSpan+=p,r.collapsed+=_,r.rowSpan=o.rowSpan+1,m&&(m.measure?p=this._measures(m.children,e," k-alt"):(p=(o=this._buildRows(e,n+1)).colSpan,r.collapsed+=o.collapsed,k=o.collapsed),d.attr.colSpan=p,p-=1,h.members+=p,r.colSpan+=p)}else m&&(m.measure?p=this._measures(m.children,e):(p=(o=this._buildRows(e,n+1)).colSpan,r.collapsed+=o.collapsed,k=o.collapsed),h.members=p,p>1&&(l.attr.colSpan=p,r.colSpan+=p-1));return h.members+k>h.maxMembers&&(h.maxMembers=h.members+k),(a=h.children+_)>h.maxChildren&&(h.maxChildren=a),(d||l).tupleAll=!0,r}}),Z=re.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[q("table",null,[n,t])]},reset:function(){this.metadata={}},_rowLength:function(){for(var e=this.rows[0].children,t=0,n=0,i=e[n];i;)t+=i.attr.colSpan||1,i=e[++n];return t},_colGroup:function(){for(var e=this._rowLength(),t=[],n=0;e>n;n++)t.push(q("col",null));return q("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(q("tr",null,[q("td",null,[K("&nbsp;")])])),q("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r=this.rows,o=r.length,a=0,s=this.rootTuple.members,l=s[0].name,d=s.length,c=0,u=this.map;o>a;a++)for(e=r[a],c=0;d>c;c++)n=this[s[c].name],(t=e.colSpan["dim"+c])&&n>t.levelNum&&(t.attr.colSpan=n-t.levelNum+1);e=u[l],i=u[l+"all"],e&&(e.children[0].attr.className="k-first"),i&&(i.children[0].attr.className+=" k-first")},_row:function(e){var t=q("tr",null,e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return K(this.template({member:e,tuple:t}))},_cell:function(e,t,n){var i=q("td",{className:e},t);return i.value=n.caption||n.name,i},_buildRows:function(e,t){var n,i,r,o,a,s,l,d,c,u=this.map,h=e.members,p=h[t],f=h[t+1],g=p.children,m=g.length,v=+p.levelNum+1,b=this.rootTuple.members[t].name,_=Q(e,t-1).join(""),k=_+(p.parentName||""),w=u[k+"all"]||u[k],y=[];if(!w||w.hasChild?w=this._row():w.hasChild=!0,p.measure){for(a=w.allCell?"k-grid-footer":"",w.children.push(this._cell(a,[this._content(g[0],e)],g[0])),w.rowSpan=m,c=1;m>c;c++)this._row([this._cell(a,[this._content(g[c],e)],g[c])]);return w}if(u[_+p.name]=w,n=ne.stringify(Q(e,t)),(o=this.metadata[n])||(this.metadata[n]=o=Y(v-1,t)),this._indexes.push({path:n,tuple:e}),p.hasChildren&&(!1===o.expanded&&(m=0,o.children=0),(s={className:"k-icon "+(m?Ce:Se)})[ne.attr("path")]=n,y.push(q("span",s))),y.push(this._content(p,e)),a=w.allCell&&!m?"k-grid-footer":"",(d=this._cell(a,y,p)).levelNum=v,w.children.push(d),w.colSpan["dim"+t]=d,(!this[b]||v>this[b])&&(this[b]=v),m){for(w.allCell=!1,w.hasChild=!1,c=0;m>c;c++)w!==(i=this._buildRows(g[c],t))&&(w.rowSpan+=i.rowSpan);w.rowSpan>1&&(d.attr.rowSpan=w.rowSpan),o.children=w.rowSpan,(l=this._cell("k-grid-footer",[this._content(p,e)],p)).levelNum=v,(r=this._row([l])).colSpan["dim"+t]=l,r.allCell=!0,u[_+p.name+"all"]=r,f&&(i=this._buildRows(e,t+1),l.attr.rowSpan=i.rowSpan),w.rowSpan+=r.rowSpan,o.members=r.rowSpan}else f&&(w.hasChild=!1,this._buildRows(e,t+1),(l||d).attr.rowSpan=w.rowSpan,o.members=w.rowSpan);return o.children>o.maxChildren&&(o.maxChildren=o.children),o.members>o.maxMembers&&(o.maxMembers=o.members),w}}),ee=re.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,n,i){var r,o,a=n.indexes[0],s=n.metadata[a?a.path:t];return this.columnAxis=n,this.rowAxis=i,this.data=e,this.rowLength=s?s.maxChildren+s.maxMembers:n.measures.length||1,this.rowLength||(this.rowLength=1),r=this._tbody(),o=this._colGroup(),[q("table",null,[o,r])]},_colGroup:function(){var e=this.columnAxis.measures.length||1,t=[],n=0;for(this.rows[0]&&(e=this.rows[0].children.length);e>n;n++)t.push(q("col",null));return q("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis,this.rowLength),this.rowIndexes=this._indexes(this.rowAxis,Math.ceil(this.data.length/this.rowLength)),this._buildRows()):this.rows.push(q("tr",null,[q("td",null,[K("&nbsp;")])])),q("tbody",null,this.rows)},_indexes:function(e,n){var i,r,o,a,s,l=[],d=e.indexes,c=e.metadata,u=e.measures,h=u.length||1,p=0,f=0,g=0,m=d.length;if(!m){for(o=0;h>o;o++)l[o]={index:o,measure:u[o],tuple:null};return l}for(;m>g;g++){if(s=0,(a=(r=c[(i=d[g]).path]).children+r.members)&&(a-=h),!1===r.expanded&&r.children!==r.maxChildren&&(s=r.maxChildren),r.parentMember&&0===r.levelNum&&(a=-1),a>-1){for(o=0;h>o;o++)l[a+f+o]={children:a,index:p,measure:u[o],tuple:i.tuple},p+=1;for(;l[f]!==t;)f+=1}if(f===n)break;p+=s}return l},_buildRows:function(){for(var e=this.rowIndexes,t=e.length,n=0;t>n;n++)this.rows.push(this._buildRow(e[n]))},_buildRow:function(e){for(var t,n,i,r,o,a,s,l=e.index*this.rowLength,d=this.columnIndexes,c=d.length,u=[],h=0;c>h;h++)o={},(t=d[h]).children&&(o.className="k-alt"),r="",a=this.data[l+t.index],s=t.measure||e.measure,n={columnTuple:t.tuple,rowTuple:e.tuple,measure:s,dataItem:a},""!==a.value&&s&&s.type&&("status"===s.type?r=this.kpiStatusTemplate(n):"trend"===s.type&&(r=this.kpiTrendTemplate(n))),r||(r=this.dataTemplate(n)),(i=q("td",o,[K(r)])).value=a.value,u.push(i);return o={},e.children&&(o.className="k-grid-footer"),q("tr",o,u)}}),ie.plugin(G),ne.PivotExcelExporter=ne.Class.extend({init:function(e){this.options=e,this.widget=e.widget,this.dataSource=this.widget.dataSource},_columns:function(){var e,t=this.widget.columnsHeaderTree.children[0],n=this.widget.rowsHeaderTree.children[0],i=t.children[0].children.length,r=n.children[0].children.length,o=this.widget.options.columnWidth,a=[];if(r&&this.dataSource.data()[0])for(e=0;r>e;e++)a.push({autoWidth:!0});for(e=0;i>e;e++)a.push({autoWidth:!1,width:o});return a},_cells:function(e,t,n){for(var i,r,o,a,s,l=[],d=0,c=e.length;c>d;d++){for(r=[],i=(o=e[d].children).length,a=0;i>a;a++)s=o[a],r.push({background:"#7a7a7a",color:"#fff",value:s.value,colSpan:s.attr.colSpan||1,rowSpan:s.attr.rowSpan||1});n&&n(r,d),l.push({cells:r,type:t})}return l},_rows:function(){var e,t,n=this.widget.columnsHeaderTree.children[0],i=this.widget.rowsHeaderTree.children[0],r=n.children[0].children.length,o=i.children[0].children.length,a=n.children[1].children,s=i.children[1].children,l=this.widget.contentTree.children[0].children[1].children,d=this._cells(a,"header");return o&&d[0].cells.splice(0,0,{background:"#7a7a7a",color:"#fff",value:"",colSpan:o,rowSpan:a.length}),e=function(e,t){for(var n,i=0,o=l[t].children;r>i;i++)n=+o[i].value,isNaN(n)&&(n=""),e.push({background:"#dfdfdf",color:"#333",value:n,colSpan:1,rowSpan:1})},t=this._cells(s,"data",e),d.concat(t)},_freezePane:function(){var e=this.widget.columnsHeaderTree.children[0];return{colSplit:this.widget.rowsHeaderTree.children[0].children[0].children.length,rowSplit:e.children[1].children.length}},workbook:function(){var t;return this.dataSource.view()[0]?(t=e.Deferred()).resolve():t=this.dataSource.fetch(),t.then(e.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:null}]}},this))}}),te={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var t=this.options.excel||{};new ne.PivotExcelExporter({widget:this}).workbook().then(e.proxy(function(e){if(!this.trigger("excelExport",{workbook:e})){var n=new ne.ooxml.Workbook(e);ne.saveAs({dataURI:n.toDataURL(),fileName:e.fileName||t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})}},this))}},ne.PivotExcelMixin=te,ne.ooxml&&ne.ooxml.Workbook&&te.extend(G.prototype),ne.PDFMixin&&(ne.PDFMixin.extend(G.prototype),G.fn._drawPDF=function(){return this._drawPDFShadow({width:this.wrapper.width()})})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=e.proxy,o=e.extend,a="visibility",s="k-state-hover";i.HierarchicalDragAndDrop=n.Class.extend({init:function(t,a){this.element=t,this.hovered=t,this.options=o({dragstart:e.noop,drag:e.noop,drop:e.noop,dragend:e.noop},a),this._draggable=new i.Draggable(t,{ignore:"input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",filter:a.filter,autoScrolL:a.autoScroll,cursorOffset:{left:10,top:n.support.mobileOS?-40/n.support.zoomLevel():10},hint:r(this._hint,this),dragstart:r(this.dragstart,this),dragcancel:r(this.dragcancel,this),drag:r(this.drag,this),dragend:r(this.dragend,this),$angular:a.$angular})},_hint:function(e){return"<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />"+this.options.hintText(e)+"</div>"},_removeTouchHover:function(){n.support.touch&&this.hovered&&(this.hovered.find("."+s).removeClass(s),this.hovered=!1)},_hintStatus:function(n){var i=this._draggable.hint.find(".k-drag-status")[0];return n?(i.className="k-icon k-drag-status "+n,t):e.trim(i.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){this.source=t.currentTarget.closest(this.options.itemSelector),this.options.dragstart(this.source)&&t.preventDefault(),this.dropHint=this.options.reorderable?e("<div class='k-drop-hint' />").css(a,"hidden").appendTo(this.element):e()},drag:function(t){var i,r,o,l,d,c,u,h,p,f,g,m=this.options,v=this.source,b=this.dropTarget=e(n.eventTarget(t)),_=b.closest(m.allowedContainers);_.length?v[0]==b[0]||m.contains(v[0],b[0])?g="k-denied":(g="k-insert-middle",(i=(p=m.itemFromTarget(b)).item).length?(this._removeTouchHover(),r=i.outerHeight(),l=p.content,m.reorderable?(d=r/(l.length>0?4:2),c=(o=n.getOffset(i).top)+d>t.y.location,u=t.y.location>o+r-d,h=l.length&&!c&&!u):(h=!0,c=!1,u=!1),this.hovered=!!h&&_,this.dropHint.css(a,h?"hidden":"visible"),this._lastHover&&this._lastHover[0]!=l[0]&&this._lastHover.removeClass(s),this._lastHover=l.toggleClass(s,h),h?g="k-add":((f=i.position()).top+=c?0:r,this.dropHint.css(f)[c?"prependTo":"appendTo"](m.dropHintContainer(i)),c&&p.first&&(g="k-insert-top"),u&&p.last&&(g="k-insert-bottom"))):b[0]!=this.dropHint[0]&&(this._lastHover&&this._lastHover.removeClass(s),g=e.contains(this.element[0],_[0])?"k-denied":"k-add")):(g="k-denied",this._removeTouchHover()),this.options.drag({originalEvent:t.originalEvent,source:v,target:b,pageY:t.y.location,pageX:t.x.location,status:g.substring(2),setStatus:function(e){g=e}}),"k-denied"==g&&this._lastHover&&this._lastHover.removeClass(s),0!==g.indexOf("k-insert")&&this.dropHint.css(a,"hidden"),this._hintStatus(g)},dragcancel:function(){this.dropHint.remove()},dragend:function(e){var n,i,r,o="over",l=this.source,d=this.dropHint,c=this.dropTarget;return"visible"==d.css(a)?(o=this.options.dropPositionFrom(d),n=d.closest(this.options.itemSelector)):c&&((n=c.closest(this.options.itemSelector)).length||(n=c.closest(this.options.allowedContainers))),i={originalEvent:e.originalEvent,source:l[0],destination:n[0],valid:"k-denied"!=this._hintStatus(),setValid:function(e){this.valid=e},dropTarget:c[0],position:o},r=this.options.drop(i),d.remove(),this._removeTouchHover(),this._lastHover&&this._lastHover.removeClass(s),!i.valid||r?(this._draggable.dropped=i.valid,t):(this._draggable.dropped=!0,this.options.dragend({originalEvent:e.originalEvent,source:l,destination:n,position:o}),t)},destroy:function(){this._lastHover=this.hovered=null,this._draggable.destroy()}})}(window.kendo.jQuery),function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function i(e){return p.template(e,{useWithBlock:!1})}function r(e){return e.find("> div .k-checkbox [type=checkbox]")}function a(e){return function(t,n){var i,r=(n=n.closest(z)).parent();return r.parent().is("li")&&(i=r.parent()),this._dataSourceMove(t,r,i,function(t,i){return this._insert(t.data(),i,n.index()+e)})}}function s(t){var n=t.children("div"),i=t.children("ul"),r=n.children(".k-icon"),o=t.children(":checkbox"),a=n.children(".k-in");t.hasClass("k-treeview")||(n.length||(n=e("<div />").prependTo(t)),!r.length&&i.length?r=e("<span class='k-icon' />").prependTo(n):i.length&&i.children().length||(r.remove(),i.remove()),o.length&&e("<span class='k-checkbox' />").appendTo(n).append(o),a.length||((a=t.children("a").eq(0).addClass("k-in")).length||(a=e("<span class='k-in' />")),a.appendTo(n),n.length&&function(t,n){for(var i;t&&"ul"!=t.nodeName.toLowerCase();)i=t,t=t.nextSibling,3==i.nodeType&&(i.nodeValue=e.trim(i.nodeValue)),h.test(i.className)?n.insertBefore(i,n.firstChild):n.appendChild(i)}(n[0].nextSibling,a[0])))}var l,d,c,u,h,p=window.kendo,f=p.ui,g=p.data,m=e.extend,v=p.template,b=e.isArray,_=f.Widget,k=g.HierarchicalDataSource,w=e.proxy,y=p.keys,x=".kendoTreeView",C="select",S="check",T="navigate",D="change",I="error",E="checked",A="indeterminate",O="dragstart",R="drag",P="drop",M="dragend",F="dataBound",H="click",N="undefined",$="k-state-hover",L="k-treeview",z=".k-item",j="string",B="aria-selected",U="aria-disabled",V={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},W=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===j};d=n(".k-group"),c=n(".k-group,.k-content"),u=function(e){return e.children("div").children(".k-icon")},h=/k-sprite/,l=p.ui.DataBoundWidget.extend({init:function(e,t){var n,i,r=this,o=t&&!!t.dataSource;b(t)&&(t={dataSource:t}),t&&typeof t.loadOnDemand==N&&b(t.dataSource)&&(t.loadOnDemand=!1),_.prototype.init.call(r,e,t),e=r.element,t=r.options,n=e.is("ul")&&e||e.hasClass(L)&&e.children("ul"),(i=!o&&n.length)&&(t.dataSource.list=n),r._animation(),r._accessors(),r._templates(),e.hasClass(L)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),n&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.root.attr("role","tree"),r._dataSource(i),r._attachEvents(),r._dragging(),i?r._syncHtmlAndDataSource():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=p.format("{0}_tv_active",r.element[0].id)),p.notify(r)},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";t.wrapper.on(i+x,".k-in.k-state-selected",function(e){e.preventDefault()}).on(i+x,n,function(){e(this).addClass($)}).on("mouseleave"+x,n,function(){e(this).removeClass($)}).on(H+x,n,w(t._click,t)).on("dblclick"+x,".k-in:not(.k-state-disabled)",w(t._toggleButtonClick,t)).on(H+x,".k-plus,.k-minus",w(t._toggleButtonClick,t)).on("keydown"+x,w(t._keydown,t)).on("focus"+x,w(t._focus,t)).on("blur"+x,w(t._blur,t)).on("mousedown"+x,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",w(t._mousedown,t)).on("change"+x,".k-checkbox :checkbox",w(t._checkboxChange,t)).on("click"+x,".k-checkbox :checkbox",w(t._checkboxClick,t)).on("click"+x,".k-request-retry",w(t._retryRequest,t)).on("click"+x,function(n){e(n.target).is(":kendoFocusable")||t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data(A)&&(n.data(A,!1).prop(A,!1).prop(E,!0),this._checkboxChange(t))},_syncHtmlAndDataSource:function(e,t){var n,i,o,a,s,l,d,c;for(e=e||this.root,n=(t=t||this.dataSource).view(),i=p.attr("uid"),o=p.attr("expanded"),a=this.options.checkboxes,s=e.children("li"),l=0;s.length>l;l++)c=n[l],(d=s.eq(l)).attr("role","treeitem").attr(i,c.uid),c.expanded="true"===d.attr(o),a&&(c.checked=r(d).prop(E)),this._syncHtmlAndDataSource(d.children("ul"),c.children)},_animation:function(){var e=this.options,t=e.animation;!1===t?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=m({reverse:!0},t.expand)),m(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var t,n=this.options.dragAndDrop,i=this.dragging;n&&!i?(t=this,this.dragging=new f.HierarchicalDragAndDrop(this.element,{reorderable:!0,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-state-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:w(this._hintText,this),contains:function(t,n){return e.contains(t,n)},dropHintContainer:function(e){return e},itemFromTarget:function(e){var t=e.closest(".k-top,.k-mid,.k-bot");return{item:t,content:e.closest(".k-in"),first:t.hasClass("k-top"),last:t.hasClass("k-bot")}},dropPositionFrom:function(e){return e.prevAll(".k-in").length>0?"after":"before"},dragstart:function(e){return t.trigger(O,{sourceNode:e[0]})},drag:function(e){t.trigger(R,{originalEvent:e.originalEvent,sourceNode:e.source[0],dropTarget:e.target[0],pageY:e.pageY,pageX:e.pageX,statusClass:e.status,setStatusClass:e.setStatus})},drop:function(e){return t.trigger(P,{originalEvent:e.originalEvent,sourceNode:e.source,destinationNode:e.destination,valid:e.valid,setValid:function(t){this.valid=t,e.setValid(t)},dropTarget:e.dropTarget,dropPosition:e.position})},dragend:function(e){function n(n){t.updateIndeterminate(),t.trigger(M,{originalEvent:e.originalEvent,sourceNode:n&&n[0],destinationNode:r[0],dropPosition:o})}var i=e.source,r=e.destination,o=e.position;"over"==o?t.append(i,r,n):("before"==o?i=t.insertBefore(i,r):"after"==o&&(i=t.insertAfter(i,r)),n(i))}})):!n&&i&&(i.destroy(),this.dragging=null)},_hintText:function(e){return this.templates.dragClue({item:this.dataItem(e),treeview:this.options})},_templates:function(){var e=this,t=e.options,n=w(e._fieldAccessor,e);t.template&&typeof t.template==j?t.template=v(t.template):t.template||(t.template=i("# var text = "+n("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",i=t.index,r=e.length-1;return e.firstLevel&&0===i&&(n+="k-top "),n+(0===i&&i!=r?"k-top":i==r?"k-bot":"k-mid")},textClass:function(e){var t="k-in";return!1===e.enabled&&(t+=" k-state-disabled"),!0===e.selected&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=!0!==e.expanded?" k-plus":" k-minus",!1===e.enabled&&(t+="-disabled"),t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(!0!==e.expanded?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:i("#= data.treeview.template(data) #"),group:i("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:i("# var imageUrl = "+n("imageUrl")+"(data.item); ## var spriteCssClass = "+n("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:i("# var item = data.item, r = data.r; ## var url = "+n("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #' role='presentation' /># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag#  class='#= r.textClass(item) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:i("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+p.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''## if (item.expanded) { #data-expanded='true' aria-expanded='true'# } #>#= r.itemElement(data) #</li>"),loading:i("<div class='k-icon k-loading' /> #: data.messages.loading #"),retry:i("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(t){var n=this.options;n.dataSource=t,this._dataSource(),n.checkboxes&&n.checkboxes.checkChildren&&this.dataSource.one("change",e.proxy(this.updateIndeterminate,this,null)),this.dataSource.fetch()},_bindDataSource:function(){this._refreshHandler=w(this.refresh,this),this._errorHandler=w(this._error,this),this.dataSource.bind(D,this._refreshHandler),this.dataSource.bind(I,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(D,this._refreshHandler),e.unbind(I,this._errorHandler))},_dataSource:function(e){var t=this,n=t.options.dataSource;n=b(n)?{data:n}:n,t._unbindDataSource(),n.fields||(n.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),t.dataSource=n=k.create(n),e&&(n.fetch(),function e(t){for(var n=0;t.length>n;n++)t[n]._initChildren(),t[n].children.fetch(),e(t[n].children.view())}(n.view())),t._bindDataSource()},events:[O,R,P,M,F,"expand","collapse",C,D,T,S],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,autoScroll:!1,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,n,i=this.options,r=this.element;for(e in V)t=i[V[e]],n=r.attr(p.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),b(t)||(t=[t]),i[V[e]]=t},_fieldAccessor:function(t){var n=this.options[V[t]],i=n.length,r="(function(item) {";return 0===i?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(n,function(e){return"function(d){ return "+p.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+i+"-1)](item)"),r+"})"},setOptions:function(e){_.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(z)[0]})},_setChecked:function(t,n){if(t&&e.isFunction(t.view))for(var i=0,r=t.view();r.length>i;i++)r[i][E]=n,r[i].children&&this._setChecked(r[i].children,n)},_setIndeterminate:function(e){var t,n,i,o=d(e),a=!0;if(o.length&&(n=(t=r(o.children())).length)){if(n>1){for(i=1;n>i;i++)if(t[i].checked!=t[i-1].checked||t[i].indeterminate||t[i-1].indeterminate){a=!1;break}}else a=!t[0].indeterminate;return r(e).data(A,!a).prop(A,!a).prop(E,a&&t[0].checked)}},updateIndeterminate:function(e){var t,n,i;if(e=e||this.wrapper,(t=d(e).children()).length){for(n=0;t.length>n;n++)this.updateIndeterminate(t.eq(n));(i=this._setIndeterminate(e))&&i.prop(E)&&(this.dataItem(e).checked=!0)}},_bubbleIndeterminate:function(e){if(e.length){var t,n=this.parent(e);n.length&&(this._setIndeterminate(n),!1===(t=n.children("div").find(".k-checkbox :checkbox")).prop(A)?this.dataItem(n).set(E,t.prop(E)):delete this.dataItem(n).checked,this._bubbleIndeterminate(n))}},_checkboxChange:function(t){var n=e(t.target),i=n.prop(E),r=n.closest(z),o=this.dataItem(r);o.checked!=i&&(o.set(E,i),this._trigger(S,r))},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(z))},_mousedown:function(t){var n=e(t.currentTarget).closest(z);this._clickTarget=n,this.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),n=this._clickTarget;p.support.touch||(n&&n.length&&(t=n),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,n=t[0],i=[],r=[],o=document.documentElement;do{(n=n.parentNode).scrollHeight>n.clientHeight&&(i.push(n),r.push(n.scrollTop))}while(n!=o);for(t.focus(),e=0;i.length>e;e++)i[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var n,i,r=/\bk-treeview\b/,o=/\bk-item\b/;typeof t==j&&(t=this.element.find(t)),W(t)||(t=t[0]),i=o.test(t.className);do{t=t.parentNode,o.test(t.className)&&(i?n=t:i=!0)}while(!r.test(t.className)&&!n);return e(n)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=i.parent(e);return e.next().length?e.next():e}var n,i=this,r=i._expanded(e);return e.length&&e.is(":visible")?r&&(n=d(e).children().first()).length||(n=t(e)):n=i.root.children().eq(0),i._enabled(n)||(n=i._nextVisible(n)),n},_previousVisible:function(e){var t,n,i=this;if(!e.length||e.prev().length)for(n=e.length?e.prev():i.root.children().last();i._expanded(n)&&(t=d(n).children().last()).length;)n=t;else n=i.parent(e)||e;return i._enabled(n)||(n=i._previousVisible(n)),n},_keydown:function(n){var i,r=this,o=n.keyCode,a=r.current(),s=r._expanded(a),l=a.find(".k-checkbox:first :checkbox"),d=p.support.isRtl(r.element);n.target==n.currentTarget&&(!d&&o==y.RIGHT||d&&o==y.LEFT?s?i=r._nextVisible(a):r.expand(a):!d&&o==y.LEFT||d&&o==y.RIGHT?s?r.collapse(a):(i=r.parent(a),r._enabled(i)||(i=t)):o==y.DOWN?i=r._nextVisible(a):o==y.UP?i=r._previousVisible(a):o==y.HOME?i=r._nextVisible(e()):o==y.END?i=r._previousVisible(e()):o==y.ENTER?a.find(".k-in:first").hasClass("k-state-selected")||r._trigger(C,a)||r.select(a):o==y.SPACEBAR&&l.length&&(l.prop(E,!l.prop(E)).data(A,!1).prop(A,!1),r._checkboxChange({target:l}),i=a),i&&(n.preventDefault(),a[0]!=i[0]&&(r._trigger(T,i),r.current(i))))},_click:function(t){var n=e(t.currentTarget),i=c(n.closest(z)),r=n.attr("href");(r?"#"==r||r.indexOf("#"+this.element.id+"-")>=0:i.length&&!i.children().length)&&t.preventDefault(),n.hasClass(".k-state-selected")||this._trigger(C,n)||this.select(n)},_wrapper:function(){var e,t,n=this,i=n.element;i.is("ul")?(e=i.wrap("<div />").parent(),t=i):t=(e=i).children("ul").eq(0),n.wrapper=e.addClass("k-widget k-treeview"),n.root=t},_group:function(e){var t=this,n=e.hasClass(L),i={firstLevel:n,expanded:n||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),t._nodes(r,i)},_nodes:function(t,n){var i,r=this,o=t.children("li");n=m({length:o.length},n),o.each(function(t,o){o=e(o),i={index:t,expanded:r._expanded(o)},s(o),r._updateNodeClasses(o,n,i),r._group(o)})},_checkboxes:function(){var e,t=this.options,n=t.checkboxes;n&&(e="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",n.name&&(e+=" name='"+n.name+"'"),typeof(n=m({template:e+=" />"},t.checkboxes)).template==j&&(n.template=v(n.template)),t.checkboxes=n)},_updateNodeClasses:function(e,t,n){var i=e.children("div"),r=e.children("ul"),o=this.templates;e.hasClass("k-treeview")||((n=n||{}).expanded=typeof n.expanded!=N?n.expanded:this._expanded(e),n.index=typeof n.index!=N?n.index:e.index(),n.enabled=typeof n.enabled!=N?n.enabled:!i.children(".k-in").hasClass("k-state-disabled"),(t=t||{}).firstLevel=typeof t.firstLevel!=N?t.firstLevel:e.parent().parent().hasClass(L),t.length=typeof t.length!=N?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(o.wrapperCssClass(t,n)),i.removeClass("k-top k-mid k-bot").addClass(o.cssClass(t,n)),i.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(o.textClass(n)),(r.length||"true"==e.attr("data-hasChildren"))&&(i.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(o.toggleButtonClass(n)),r.addClass("k-group")))},_processNodes:function(t,n){var i=this;i.element.find(t).each(function(t,r){n.call(i,t,e(r).closest(z))})},dataItem:function(t){var n=e(t).closest(z).attr(p.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},_insertNode:function(t,n,i,r,o){var a,l,c,u,h=this,p=d(i),f=p.children().length+1,g={firstLevel:i.hasClass(L),expanded:!o,length:f},m="",v=function(e,t){e.appendTo(t)};for(c=0;t.length>c;c++)(u=t[c]).index=n+c,m+=h._renderItem({group:g,item:u});if((l=e(m)).length){for(h.angular("compile",function(){return{elements:l.get(),data:t.map(function(e){return{dataItem:e}})}}),p.length||(p=e(h._renderGroup({group:g})).appendTo(i)),r(l,p),i.hasClass("k-item")&&(s(i),h._updateNodeClasses(i)),h._updateNodeClasses(l.prev().first()),h._updateNodeClasses(l.next().last()),c=0;t.length>c;c++)(u=t[c]).hasChildren&&(a=u.children.data()).length&&h._insertNode(a,u.index,l.eq(c),v,!h._expanded(l.eq(c)));return l}},_updateNodes:function(t,n){function i(e,t){e.find(".k-checkbox :checkbox").prop(E,t).data(A,!1).prop(A,!1)}var r,o,a,s,l,d,u,h=this,p={treeview:h.options,item:s},g="expanded"!=n&&"checked"!=n;if("selected"==n)s=t[0],o=h.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[n]).end(),s[n]&&h.current(o),o.attr(B,!!s[n]);else{for(u=e.map(t,function(e){return h.findByUid(e.uid).children("div")}),g&&h.angular("cleanup",function(){return{elements:u}}),r=0;t.length>r;r++)p.item=s=t[r],o=(a=u[r]).parent(),g&&a.children(".k-in").html(h.templates.itemContent(p)),n==E?(i(a,l=s[n]),h.options.checkboxes.checkChildren&&(i(o.children(".k-group"),l),h._setChecked(s.children,l),h._bubbleIndeterminate(o))):"expanded"==n?h._toggle(o,s,s[n]):"enabled"==n&&(o.find(".k-checkbox :checkbox").prop("disabled",!s[n]),d=!c(o).is(":visible"),o.removeAttr(U),s[n]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),d=!0,o.attr(B,!1).attr(U,!0)),h._updateNodeClasses(o,{},{enabled:s[n],expanded:!d})),a.length&&this.trigger("itemChange",{item:a,data:s,ns:f});g&&h.angular("compile",function(){return{elements:u,data:e.map(t,function(e){return[{dataItem:e}]})}})}},_appendItems:function(e,t,n){var i=d(n).children(),r=!this._expanded(n);typeof e==N&&(e=i.length),this._insertNode(t,e,n,function(t,n){e>=i.length?t.appendTo(n):t.insertBefore(i.eq(e))},r),this._expanded(n)&&(this._updateNodeClasses(n),d(n).css("display","block"))},_refreshChildren:function(e,t,n){var i,r,o,a=this.options,l=a.loadOnDemand,c=a.checkboxes&&a.checkboxes.checkChildren;if(d(e).empty(),t.length)for(this._appendItems(n,t,e),r=d(e).children(),l&&c&&this._bubbleIndeterminate(r.last()),i=0;r.length>i;i++)o=r.eq(i),this.trigger("itemChange",{item:o.children("div"),data:this.dataItem(o),ns:f});else s(e)},_refreshRoot:function(t){var n,i,r,o=this._renderGroup({items:t,group:{firstLevel:!0,expanded:!0}});for(this.root.length?(this._angularItems("cleanup"),n=e(o),this.root.attr("class",n.attr("class")).html(n.html())):this.root=this.wrapper.html(o).children("ul"),this.root.attr("role","tree"),i=0;t.length>i;i++)r=this.root.children(".k-item"),this.trigger("itemChange",{item:r.eq(i),data:t[i],ns:f});this._angularItems("compile")},refresh:function(e){var n,i,r=e.node,o=e.action,a=e.items,s=this.wrapper,l=this.options,d=l.loadOnDemand,c=l.checkboxes&&l.checkboxes.checkChildren;if(e.field){if(!a[0]||!a[0].level)return;return this._updateNodes(a,e.field)}if(r&&(s=this.findByUid(r.uid),this._progress(s,!1)),c&&"remove"!=o){for(i=!1,n=0;a.length>n;n++)if("checked"in a[n]){i=!0;break}if(!i&&r&&r.checked)for(n=0;a.length>n;n++)a[n].checked=!0}if("add"==o?this._appendItems(e.index,a,s):"remove"==o?this._remove(this.findByUid(a[0].uid),!1):"itemchange"==o?this._updateNodes(a):"itemloaded"==o?this._refreshChildren(s,a,e.index):this._refreshRoot(a),"remove"!=o)for(n=0;a.length>n;n++)(!d||a[n].expanded)&&a[n].load();this.trigger(F,{node:r?s:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),n=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),u(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(n))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2!=arguments.length||!!t,this._processNodes(e,function(e,n){this.dataItem(n).set("enabled",t)})},current:function(n){var i=this,r=i._current,o=i.element,a=i._ariaId;return arguments.length>0&&n&&n.length?(r&&(r[0].id===a&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),(r=i._current=e(n,o).closest(z)).find(".k-in:first").addClass("k-state-focused"),(a=r[0].id||a)&&(i.wrapper.removeAttr("aria-activedescendant"),r.attr("id",a),i.wrapper.attr("aria-activedescendant",a)),t):(r||(r=i._nextVisible(e())),r)},select:function(n){var i=this,r=i.element;return arguments.length?(n=e(n,r).closest(z),r.find(".k-state-selected").each(function(){var t=i.dataItem(this);t?(t.set("selected",!1),delete t.selected):e(this).removeClass("k-state-selected")}),n.length&&i.dataItem(n).set("selected",!0),i.trigger(D),t):r.find(".k-state-selected").closest(z)},_toggle:function(e,t,n){var i,r,o=this.options,a=c(e),s=n?"expand":"collapse";a.data("animating")||this._trigger(s,e)||(this._expanded(e,n),i=t&&t.loaded(),r=!a.children().length,!n||i&&!r?(this._updateNodeClasses(e,{},{expanded:n}),n||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(m({reset:!0},o.animation[s],{complete:function(){n&&a.css("height","")}}))):(o.loadOnDemand&&this._progress(e,!0),a.remove(),t.load()))},toggle:function(t,n){t=e(t),u(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(n=!this._expanded(t)),this._expanded(t,n))},destroy:function(){var e=this;_.fn.destroy.call(e),e.wrapper.off(x),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),p.destroy(e.element),e.root=e.wrapper=e.element=null},_expanded:function(e,n){var i=p.attr("expanded"),r=this.dataItem(e);return 1==arguments.length?"true"===e.attr(i)||r&&r.expanded:(c(e).data("animating")||(r&&(r.set("expanded",n),n=r.expanded),n?(e.attr(i,"true"),e.attr("aria-expanded","true")):(e.removeAttr(i),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var n=this.element,i=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e)?n.html(i):n.empty():u(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,n){var i=this.dataItem(e),r=this.options[V.text],o=i.level(),a=r.length,s=r[Math.min(o,a-1)];return n?(i.set(s,n),t):i[s]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,n,i,r){var o,a=this._objectOrSelf(i||n),s=a.dataSource,l=e.Deferred().resolve().promise();return i&&i[0]!=a.element[0]&&((o=a.dataItem(i)).loaded()||(a._progress(i,!0),l=o.load()),i!=this.root&&((s=o.children)&&s instanceof k||(o._initChildren(),o.loaded(!0),s=o.children))),t=this._toObservableData(t),r.call(this,s,t,l)},_toObservableData:function(t){var n,i,r=t;return(t instanceof o||W(t))&&(n=this._objectOrSelf(t).dataSource,i=e(t).attr(p.attr("uid")),(r=n.getByUid(i))&&(r=n.remove(r))),r},_insert:function(e,t,n){t instanceof p.data.ObservableArray?t=t.toJSON():b(t)||(t=[t]);var i=e.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),e.splice.apply(e,[n,0].concat(t)),this.findByUid(e[n].uid)},insertAfter:a(1),insertBefore:a(0),append:function(t,n,i){var r=this,o=r.root;return n&&(o=d(n)),r._dataSourceMove(t,o,n,function(t,o,a){var s;return a.then(function(){s=function(){n&&r._expanded(n,!0);var e=t.data(),i=Math.max(e.length,0);return r._insert(e,o,i)}(),(i=i||e.noop)(s)}),s||null})},_remove:function(t,n){var i,r,o,a=this;return t=e(t,a.element),this.angular("cleanup",function(){return{elements:t.get()}}),i=t.parent().parent(),r=t.prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(s(i),a._updateNodeClasses(i)),a._updateNodeClasses(r),a._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,i){return e(i).text()==t}).closest(z)},findByUid:function(t){var n,i,r=this.element.find(".k-item"),o=p.attr("uid");for(i=0;r.length>i;i++)if(r[i].getAttribute(o)==t){n=r[i];break}return e(n)},expandPath:function(n,i){function r(e,t,n){e&&!e.loaded()?e.set("expanded",!0):t.call(n)}var o,a,s;for(n=n.slice(0),o=this,s=(a=this.dataSource).get(n[0]),i=i||e.noop;n.length>0&&s&&(s.expanded||s.loaded());)s.set("expanded",!0),n.shift(),s=a.get(n[0]);return n.length?(a.bind("change",function(e){var t=e.node&&e.node.id;t&&t===n[0]&&(n.shift(),n.length?r(a.get(n[0]),i,o):i.call(o))}),r(s,i,o),t):i.call(o)},_parents:function(e){for(var t=e&&e.parentNode(),n=[];t&&t.parentNode;)n.push(t),t=t.parentNode();return n},expandTo:function(e){var t,n;for(e instanceof p.data.Node||(e=this.dataSource.get(e)),t=this._parents(e),n=0;t.length>n;n++)t[n].set("expanded",!0)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",i=0,r=e.items,o=r?r.length:0,a=e.group;for(a.length=o;o>i;i++)e.group=a,e.item=r[i],e.item.index=i,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),f.plugin(l)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r,o,a;if(!e)return[];for(i=0,r=[],o=(e=e.filters).length;o>i;i++)a=e[i].operator,(n||"in"===a)&&a!==n||e[i].field!==t||r.push(e[i]);return r}function i(t,i,r){var o,a=0,s=r.length;if(t=n(t,i,"in")[0])for(o=t.value.split(",");s>a;a++)r[a].checked=e.inArray(r[a].uniqueName,o)>=0;else for(;s>a;a++)r[a].checked=!0}var r=window.kendo,o=r.ui,a="kendoContextMenu",s=e.proxy,l=".kendoPivotFieldMenu",d=o.Widget,c=d.extend({init:function(e,t){d.fn.init.call(this,e,t),this._dataSource(),this._layout(),r.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:!0,sortable:!0,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var t=this.options;this.wrapper=e(r.template(u)({ns:r.ns,filterable:t.filterable,sortable:t.sortable,messages:t.messages})),this.menu=this.wrapper[a]({filter:t.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:!1,open:s(this._menuOpen,this),select:s(this._select,this),copyAnchorStyles:!1}).data(a),this._createWindow(),t.filterable&&this._initFilterForm()},_initFilterForm:function(){var e=this.menu.element.find(".k-filter-item"),t=s(this._filter,this);this._filterOperator=new r.ui.DropDownList(e.find("select")),this._filterValue=e.find(".k-textbox"),e.on("submit"+l,t).on("click"+l,".k-button-filter",t).on("click"+l,".k-button-clear",s(this._reset,this))},_setFilterForm:function(e){var t=this._filterOperator,n="",i="";e&&(n=e.operator,i=e.value),t.value(n),t.value()||t.select(0),this._filterValue.val(i)},_clearFilters:function(e){var t,i,r=this.dataSource.filter()||{},o=0;for(r.filters=r.filters||[],i=(t=n(r,e)).length;i>o;o++)r.filters.splice(r.filters.indexOf(t[o]),1);return r},_filter:function(e){var n,i,r=this,o=r._filterValue.val();return e.preventDefault(),o?(n={field:r.currentMember,operator:r._filterOperator.value(),value:o},(i=r._clearFilters(r.currentMember)).filters.push(n),r.dataSource.filter(i),r.menu.close(),t):(r.menu.close(),t)},_reset:function(e){var t=this,n=t._clearFilters(t.currentMember);e.preventDefault(),n.filters[0]||(n={}),t.dataSource.filter(n),t._setFilterForm(null),t.menu.close()},_sort:function(e){var t=this.currentMember,n=this.dataSource.sort()||[];(n=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r}(n,t)).push({field:t,dir:e}),this.dataSource.sort(n),this.menu.close()},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},_dataSource:function(){this.dataSource=r.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var t=this.options.messages;this.includeWindow=e(r.template(h)({messages:t})).on("click"+l,".k-button-ok",s(this._applyIncludes,this)).on("click"+l,".k-button-cancel",s(this._closeWindow,this)),this.includeWindow=new o.Window(this.includeWindow,{title:t.title,visible:!1,resizable:!1,open:s(this._windowOpen,this)})},_applyIncludes:function(e){var t,i=[],r=this.treeView.dataSource.view(),o=r[0].checked,a=this.dataSource.filter(),s=n(a,this.currentMember,"in")[0];(function e(t,n){var i,r=t.length;for(i=0;r>i;i++)t[i].checked&&0!==t[i].level()&&n.push(t[i].uniqueName),t[i].hasChildren&&e(t[i].children.view(),n)})(r,i),s&&(o?(a.filters.splice(a.filters.indexOf(s),1),a.filters.length||(a={})):s.value=i.join(","),t=a),i.length&&(t||o||(t={field:this.currentMember,operator:"in",value:i.join(",")},a&&(a.filters.push(t),t=a))),t&&this.dataSource.filter(t),this._closeWindow(e)},_closeWindow:function(e){e.preventDefault(),this.includeWindow.close()},_treeViewDataSource:function(){var e=this;return r.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(t){var n={},r=e.treeView.dataSource.get(t.data.uniqueName);t.data.uniqueName?(n.memberUniqueName=r.uniqueName.replace(/\&/g,"&amp;"),n.treeOp=1):n.levelUniqueName=e.currentMember+".[(ALL)]",e.dataSource.schemaMembers(n).done(function(n){i(e.dataSource.filter(),e.currentMember,n),t.success(n)}).fail(t.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new o.TreeView(e,{autoBind:!1,dataSource:t._treeViewDataSource(),dataTextField:"caption",template:"#: data.item.caption || data.item.name #",checkboxes:{checkChildren:!0},dataBound:function(){o.progress(t.includeWindow.element,!1)}})},_menuOpen:function(t){var i;t.event&&(i=r.attr("name"),this.currentMember=e(t.event.target).closest("["+i+"]").attr(i),this.options.filterable&&this._setFilterForm(n(this.dataSource.filter(),this.currentMember)[0]))},_select:function(t){var n=e(t.item);e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"),n.hasClass("k-include-item")?this.includeWindow.center().open():n.hasClass("k-sort-asc")?this._sort("asc"):n.hasClass("k-sort-desc")&&this._sort("desc")},_windowOpen:function(){this.treeView||this._createTreeView(this.includeWindow.element.find(".k-treeview")),o.progress(this.includeWindow.element,!0),this.treeView.dataSource.read()},destroy:function(){d.fn.destroy.call(this),this.menu&&(this.menu.destroy(),this.menu=null),this.treeView&&(this.treeView.destroy(),this.treeView=null),this.includeWindow&&(this.includeWindow.destroy(),this.includeWindow=null),this.wrapper=null,this.element=null}}),u='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.filterFields}</span><ul><li><div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div></li></ul></li># } #</ul>',h='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';o.plugin(c)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=n.data.DataSource,o=i.Widget,a="change",s="boolean",l="enums",d="string",c="Is equal to",u="Is not equal to",h=e.proxy,p=o.extend({init:function(i,r){var c,u,p,f,g,m,v,b,_,k,w;if(i=e(i).addClass("k-filtercell"),c=this.wrapper=e("<span/>").appendTo(i),g=r,b=(u=this).operators=r.operators||{},_=u.input=e("<input/>").attr(n.attr("bind"),"value: value").appendTo(c),o.fn.init.call(u,i[0],r),r=u.options,p=u.dataSource=r.dataSource,u.model=p.reader.model,v=r.type=d,(k=(n.getter("reader.model.fields",!0)(p)||{})[r.field])&&k.type&&(v=r.type=k.type),r.values&&(r.type=v=l),b=b[v]||r.operators[v],!g.operator)for(m in b){r.operator=m;break}u._parse=function(e){return e+""},u.model&&u.model.fields&&(w=u.model.fields[r.field])&&w.parse&&(u._parse=h(w.parse,w)),u.viewModel=f=n.observable({operator:r.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&e!==t&&"undefined"!=e}}),f.bind(a,h(u.updateDsFilter,u)),v==d&&u.initSuggestDataSource(r),null!==r.inputWidth&&_.width(r.inputWidth),u._setInputType(r,v),v!=s&&!1!==r.showOperators?u._createOperatorDropDown(b):c.addClass("k-operator-hidden"),u._createClearIcon(),n.bind(this.wrapper,f),v==d&&(r.template||u.setAutoCompleteSource()),v==l&&u.setComboBoxSource(u.options.values),u._refreshUI(),u._refreshHandler=h(u._refreshUI,u),u.dataSource.bind(a,u._refreshHandler)},_setInputType:function(t,i){var r,o,a,c,u,h=this,p=h.input;"function"==typeof t.template?t.template.call(h.viewModel,{element:h.input,dataSource:h.suggestDataSource}):i==d?p.attr(n.attr("role"),"autocomplete").attr(n.attr("text-field"),t.dataTextField||t.field).attr(n.attr("filter"),t.suggestionOperator).attr(n.attr("delay"),t.delay).attr(n.attr("min-length"),t.minLength).attr(n.attr("value-primitive"),!0):"date"==i?p.attr(n.attr("role"),"datepicker"):i==s?(p.remove(),r=e("<input type='radio'/>"),o=h.wrapper,a=n.guid(),c=e("<label/>").text(t.messages.isTrue).append(r),r.attr(n.attr("bind"),"checked:value").attr("name",a).val("true"),u=c.clone().text(t.messages.isFalse),r.clone().val("false").appendTo(u),o.append([c,u])):"number"==i?p.attr(n.attr("role"),"numerictextbox"):i==l&&p.attr(n.attr("role"),"combobox").attr(n.attr("text-field"),"text").attr(n.attr("suggest"),!0).attr(n.attr("filter"),"contains").attr(n.attr("value-field"),"value").attr(n.attr("value-primitive"),!0)},_createOperatorDropDown:function(t){var i,r,o=[];for(i in t)o.push({text:t[i],value:i});r=e('<input class="k-dropdown-operator" '+n.attr("bind")+'="value: operator"/>').appendTo(this.wrapper),this.operatorDropDown=r.kendoDropDownList({dataSource:o,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(e){var i=e.suggestDataSource;i instanceof r||(!e.customDataSource&&i&&(i.group=t),i=this.suggestDataSource=r.create(i)),e.customDataSource||(i._pageSize=t,i.reader.data=function(e,t){var i=n.getter(t,!0);return function(t){for(var n,r,o=e(t),a=[],s=0,l={};o.length>s;)n=o[s++],r=i(n),l.hasOwnProperty(r)||(a.push(n),l[r]=!0);return a}}(i.reader.data,this.options.field)),this.suggestDataSource=i},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){var t=r.create({data:e}),n=this.input.data("kendoComboBox");n&&n.setDataSource(t)},_refreshUI:function(){var t=this,n=function t(n,i){var r,o,a=[];if(e.isPlainObject(n))if(n.hasOwnProperty("filters"))a=n.filters;else if(n.field==i)return n;for(e.isArray(n)&&(a=n),r=0;a.length>r;r++)if(o=t(a[r],i))return o}(t.dataSource.filter(),this.options.field)||{},i=t.viewModel;t.manuallyUpdatingVM=!0,n=e.extend(!0,{},n),t.options.type==s&&i.value!==n.value&&t.wrapper.find(":radio").prop("checked",!1),n.operator&&i.set("operator",n.operator),i.set("value",n.value),t.manuallyUpdatingVM=!1},updateDsFilter:function(n){var i,r,o,a=this,s=a.viewModel;a.manuallyUpdatingVM||"operator"==n.field&&s.value===t||(r={logic:"and",filters:[]},(i=e.extend({},a.viewModel.toJSON(),{field:a.options.field})).value!==t&&null!==i.value&&r.filters.push(i),o=a._merge(r),a.dataSource.filter(o.filters.length?o:{}))},_merge:function(t){var n,i,r,o=this,a=t.logic||"and",s=t.filters,l=o.dataSource.filter()||{filters:[],logic:"and"};for(function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field!=i}))}(l,o.options.field),i=0,r=s.length;r>i;i++)(n=s[i]).value=o._parse(n.value);return(s=e.grep(s,function(e){return""!==e.value&&null!==e.value})).length&&(l.filters.length?(t.filters=s,"and"!==l.logic&&(l.filters=[{logic:l.logic,filters:l.filters}],l.logic="and"),l.filters.push(s.length>1?t:s[0])):(l.filters=s,l.logic=a)),l},_createClearIcon:function(){var t=this;e("<button type='button' class='k-button k-button-icon'/>").attr(n.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(h(t.clearFilter,t)).appendTo(t.wrapper)},clearFilter:function(){this.viewModel.set("value",null)},destroy:function(){var e=this;e.filterModel=null,o.fn.destroy.call(e),n.destroy(e.element)},events:[a],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:t,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:c,neq:u,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:c,neq:u,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:c,neq:u,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:c,neq:u}}}});i.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t){(t=e(t)).children(m).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent();t.append("<span class='k-icon "+(n.hasClass(E)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function i(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(w),t.filter(".k-last:not(:last-child)").removeClass(f),t.filter(":first-child").addClass(w),t.filter(":last-child").addClass(f)}var r=window.kendo,o=r.ui,a=r.keys,s=e.extend,l=e.each,d=r.template,c=o.Widget,u=/^(ul|a|div)$/i,h=".kendoPanelBar",p="href",f="k-last",g="k-link",m="."+g,v="error",b=".k-item",_=".k-group:visible",k="k-image",w="k-first",y="expand",x="select",C="k-content",S="activate",T="collapse",D="mouseenter",I="contentLoad",E="k-state-active",A="> .k-panel",O="> .k-content",R="k-state-focused",P="k-state-disabled",M="k-state-selected",F="."+M,H="k-state-highlight",N=b+":not(.k-state-disabled)",$="> "+N+" > "+m+", .k-panel > "+N+" > "+m,L="> li > "+F+", .k-panel > li > "+F,z="aria-disabled",j="aria-expanded",B="aria-hidden",U="aria-selected",V=":visible",W="single",G={content:d("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:d("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:d("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:d("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:d("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:d("<span class='#= arrowClass(item) #'></span>"),sprite:d("<span class='k-sprite #= spriteCssClass #'></span>"),empty:d("")},q={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=j+"='"+(e.expanded?"true":"false")+"' "),!1===e.enabled&&(t+=z+"='true'"),t},wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=!1===t.enabled?" "+P:!0===t.expanded?" "+E:" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(e,t){var n=g;return t.firstLevel&&(n+=" k-header"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){return"k-icon"+(e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand")},text:function(e){return!1===e.encoded?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return!0!==e.item.expanded?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},K=c.extend({init:function(t,n){var i,o=this;c.fn.init.call(o,t,n),t=o.wrapper=o.element.addClass("k-widget k-reset k-header k-panelbar"),n=o.options,t[0].id&&(o._itemId=t[0].id+"_pb_active"),o._tabindex(),o._initData(n),o._updateClasses(),o._animations(n),t.on("click"+h,$,function(t){o._click(e(t.currentTarget))&&t.preventDefault()}).on(D+h+" mouseleave"+h,$,o._toggleHover).on("click"+h,".k-item.k-state-disabled > .k-link",!1).on("keydown"+h,e.proxy(o._keydown,o)).on("focus"+h,function(){var e=o.select();o._current(e[0]?e:o._first())}).on("blur"+h,function(){o._current(null)}).attr("role","menu"),(i=t.find("li."+E+" > ."+C))[0]&&o.expand(i.parent(),!1),r.notify(o)},events:[y,T,x,S,v,I],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){c.fn.destroy.call(this),this.element.off(h),r.destroy(this.element)},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=s(!0,t,e.animation),"dataSource"in e&&this._initData(e),c.fn.setOptions.call(this,e)},expand:function(t,n){var i=this,r={};return n=!1!==n,(t=this.element.find(t)).each(function(o,a){var s=(a=e(a)).find(A).add(a.find(O));if(!a.hasClass(P)&&s.length>0){if(i.options.expandMode==W&&i._collapseAllExpanded(a))return i;t.find("."+H).removeClass(H),a.addClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(y,a)||i._toggleItem(a,!1),n||(i.options.animation=r)}}),i},collapse:function(t,n){var i=this,r={};return n=!1!==n,(t=i.element.find(t)).each(function(t,o){var a=(o=e(o)).find(A).add(o.find(O));!o.hasClass(P)&&a.is(V)&&(o.removeClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(T,o)||i._toggleItem(o,!0),n||(i.options.animation=r))}),i},_toggleDisabled:function(e,t){(e=this.element.find(e)).toggleClass("k-state-default",t).toggleClass(P,!t).attr(z,!t)},select:function(n){var i=this;return n===t?i.element.find(L).parent():((n=i.element.find(n)).length?n.each(function(){var n=e(this),r=n.children(m);return n.hasClass(P)?i:(i._triggerEvent(x,n)||i._updateSelected(r),t)}):this._updateSelected(n),i)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(A):null);return l(r.items,function(){r.group.append(this),i(this)}),n(t),i(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.before(this),i(this)}),i(t),n.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.after(this),i(this)}),i(t),n.group.height("auto"),this},remove:function(e){var t=(e=this.element.find(e)).parentsUntil(this.element,b),r=e.parent("ul");return e.remove(),!r||r.hasClass("k-panelbar")||r.children(b).length||r.remove(),t.length&&(n(t=t.eq(0)),i(t)),this},reload:function(t){var n=this;(t=n.element.find(t)).each(function(){var t=e(this);n._ajaxRequest(t,t.children("."+C),!t.is(V))})},_first:function(){return this.element.children(N).first()},_last:function(){var e=this.element.children(N).last(),t=e.children(_);return t[0]?t.children(N).last():e},_current:function(n){var i=this,r=i._focused,o=i._itemId;return n===t?r:(i.element.removeAttr("aria-activedescendant"),r&&r.length&&(r[0].id===o&&r.removeAttr("id"),r.children(m).removeClass(R)),e(n).length&&(o=n[0].id||o,n.attr("id",o).children(m).addClass(R),i.element.attr("aria-activedescendant",o)),i._focused=n,t)},_keydown:function(e){var t=this,n=e.keyCode,i=t._current();e.target==e.currentTarget&&(n==a.DOWN||n==a.RIGHT?(t._current(t._nextItem(i)),e.preventDefault()):n==a.UP||n==a.LEFT?(t._current(t._prevItem(i)),e.preventDefault()):n==a.ENTER||n==a.SPACEBAR?(t._click(i.children(m)),e.preventDefault()):n==a.HOME?(t._current(t._first()),e.preventDefault()):n==a.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(_),n=e.nextAll(":visible").first();return t[0]&&(n=t.children("."+w)),n[0]||(n=e.parent(_).parent(b).next()),n[0]||(n=this._first()),n.hasClass(P)&&(n=this._nextItem(n)),n},_prevItem:function(e){if(!e)return this._last();var t,n=e.prevAll(":visible").first();if(n[0])for(t=n;t[0];)(t=t.children(_).children("."+f))[0]&&(n=t);else(n=e.parent(_).parent(b))[0]||(n=this._last());return n.hasClass(P)&&(n=this._prevItem(n)),n},_insert:function(t,n,i){var o,a,l=this,d=e.isPlainObject(t),c=n&&n[0];return c||(i=l.element),a={firstLevel:i.hasClass("k-panelbar"),expanded:i.parent().hasClass(E),length:i.children().length},c&&!i.length&&(i=e(K.renderGroup({group:a})).appendTo(n)),t instanceof r.Observable&&(t=t.toJSON()),d||e.isArray(t)?(o=e.map(d?[t]:t,function(t,n){return e("string"==typeof t?t:K.renderItem({group:a,item:s(t,{index:n})}))}),c&&n.attr(j,!1)):(o="string"==typeof t&&"<"!=t.charAt(0)?l.element.find(t):e(t),l._updateItemsClasses(o)),{items:o,group:i}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li."+P).length||n.toggleClass("k-state-hover",t.type==D)},_updateClasses:function(){var t,r,o=this;(t=o.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group")).parent().attr(j,!1).not("."+E).children("ul").attr(B,!0).hide(),r=o.element.add(t).children(),o._updateItemsClasses(r),n(r),i(r)},_updateItemsClasses:function(e){for(var t=e.length,n=0;t>n;n++)this._updateItemClasses(e[n],n)},_updateItemClasses:function(t,n){var i,o,a=this._selected,s=this.options.contentUrls,l=s&&s[n],d=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children("img").addClass(k),(o=t.children("a").addClass(g))[0]&&(o.attr("href",l),o.children("img").addClass(k)),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(z,!0).removeAttr("disabled"),t.children("div").addClass(C).attr("role","region").attr(B,!0).hide().parent().attr(j,!1),(o=t.children(F))[0]&&(a&&a.removeAttr(U).children(F).removeClass(M),o.addClass(M),this._selected=t.attr(U,!0)),t.children(m)[0]||(i="<span class='"+g+"'/>",s&&s[n]&&t[0].parentNode==d&&(i='<a class="k-link k-header" href="'+s[n]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(u)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(i)),t.parent(".k-panelbar")[0]&&t.children(m).addClass("k-header")},_click:function(e){var t,n,i,r,o,a,s=this,l=s.element;if(!e.parents("li."+P).length&&e.closest(".k-widget")[0]==l[0]){if(o=(r=e.closest(m)).closest(b),s._updateSelected(r),n=o.find(A).add(o.find(O)),t=!((!(i=r.attr(p))||"#"!=i.charAt(i.length-1)&&-1==i.indexOf("#"+s.element[0].id+"-"))&&!n.length),n.data("animating"))return t;if(s._triggerEvent(x,o)&&(t=!0),!1!==t)return s.options.expandMode==W&&s._collapseAllExpanded(o)?t:(n.length&&(a=n.is(V),s._triggerEvent(a?T:y,o)||(t=s._toggleItem(o,a))),t)}},_toggleItem:function(e,n){var i,r,o=e.find(A),a=e.find(m).attr(p);return o.length?(this._toggleGroup(o,n),i=!0):(r=e.children("."+C)).length&&(i=!0,r.is(":empty")&&a!==t?this._ajaxRequest(e,r,n):this._toggleGroup(r,n)),i},_toggleGroup:function(e,t){var n=this,i=n.options.animation,r=i.expand,o=s({},i.collapse),a=o&&"effects"in o;e.is(V)==t&&(e.parent().attr(j,!t).attr(B,t).toggleClass(E,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?s(a?o:s({reverse:!0},r),{hide:!0}):s({complete:function(e){n._triggerEvent(S,e.closest(b))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(t){var n,i=this,r=!1,o=t.find(A).add(t.find(O));return o.is(V)&&(r=!0),o.is(V)||0===o.length||(n=t.siblings()).find(A).add(n.find(O)).filter(function(){return e(this).is(V)}).each(function(t,n){n=e(n),(r=i._triggerEvent(T,n.closest(b)))||i._toggleGroup(n,!0)}),r},_ajaxRequest:function(t,n,i){var r=this,o=t.find(".k-panelbar-collapse, .k-panelbar-expand"),a=t.find(m),s=setTimeout(function(){o.addClass("k-loading")},100),l=a.attr(p);e.ajax({type:"GET",cache:!1,url:l,dataType:"html",data:{},error:function(e,t){o.removeClass("k-loading"),r.trigger(v,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(s),o.removeClass("k-loading")},success:function(e){function o(){return{elements:n.get()}}try{r.angular("cleanup",o),n.html(e),r.angular("compile",o)}catch(e){var a=window.console;a&&a.error&&a.error(e.name+": "+e.message+" in "+l),this.error(this.xhr,"error")}r._toggleGroup(n,i),r.trigger(I,{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){return this.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this,n=t.element,i=e.parent(b),r=t._selected;r&&r.removeAttr(U),t._selected=i.attr(U,!0),n.find(L).removeClass(M),n.find("> ."+H+", .k-panel > ."+H).removeClass(H),e.addClass(M),e.parentsUntil(n,b).filter(":has(.k-header)").addClass(H),t._current(i[0]?i:null)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});s(K,{renderItem:function(e){e=s({panelBar:{},group:{}},e);var t=G.empty,n=e.item;return G.item(s(e,{image:n.imageUrl?G.image:t,sprite:n.spriteCssClass?G.sprite:t,itemWrapper:G.itemWrapper,renderContent:K.renderContent,arrow:n.items||n.content||n.contentUrl?G.arrow:t,subGroup:K.renderGroup},q))},renderGroup:function(e){return G.group(s({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=s({length:r},e.group);r>n;n++)t+=K.renderItem(s(e,{group:o,item:s({index:n},i[n])}));return t}},e,q))},renderContent:function(e){return G.content(s(e,q))}}),r.ui.plugin(K)}(window.kendo.jQuery),function(e){var t=e.proxy,n=".kendoResponsivePanel",i="open",r="close",o="click"+n+" touchstart"+n,a=kendo.ui.Widget,s=a.extend({init:function(i,r){a.fn.init.call(this,i,r),this._guid="_"+kendo.guid(),this._toggleHandler=t(this._toggleButtonClick,this),this._closeHandler=t(this._close,this),e(document.documentElement).on(o,this.options.toggleButton,this._toggleHandler),this._registerBreakpoint(),this.element.addClass("k-rpanel k-rpanel-"+this.options.orientation+" "+this._guid),this._resizeHandler=t(this.resize,this,!1),e(window).on("resize"+n,this._resizeHandler)},_mediaQuery:"@media (max-width: #= breakpoint-1 #px) {.#= guid #.k-rpanel-animate.k-rpanel-left,.#= guid #.k-rpanel-animate.k-rpanel-right {-webkit-transition: -webkit-transform .2s ease-out;-ms-transition: -ms-transform .2s ease-out;transition: transform .2s ease-out;} .#= guid #.k-rpanel-top {overflow: hidden;}.#= guid #.k-rpanel-animate.k-rpanel-top {-webkit-transition: max-height .2s linear;-ms-transition: max-height .2s linear;transition: max-height .2s linear;}} @media (min-width: #= breakpoint #px) {#= toggleButton # { display: none; } .#= guid #.k-rpanel-left { float: left; } .#= guid #.k-rpanel-right { float: right; } .#= guid #.k-rpanel-left, .#= guid #.k-rpanel-right {position: relative;-webkit-transform: translateX(0);-ms-transform: translateX(0);transform: translateX(0);-webkit-transform: translateX(0) translateZ(0);-ms-transform: translateX(0) translateZ(0);transform: translateX(0) translateZ(0);} .#= guid #.k-rpanel-top { max-height: none; }}",_registerBreakpoint:function(){var e=this.options;this._registerStyle(kendo.template(this._mediaQuery)({breakpoint:e.breakpoint,toggleButton:e.toggleButton,guid:this._guid}))},_registerStyle:function(t){var n=e("head,body")[0],i=document.createElement("style");n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))},options:{name:"ResponsivePanel",orientation:"left",toggleButton:".k-rpanel-toggle",breakpoint:640,autoClose:!0},events:[i,r],_resize:function(){this.element.removeClass("k-rpanel-animate")},_toggleButtonClick:function(e){e.preventDefault(),this.element.hasClass("k-rpanel-expanded")?this.close():this.open()},open:function(){this.trigger(i)||(this.element.addClass("k-rpanel-animate k-rpanel-expanded"),this.options.autoClose&&e(document.documentElement).on(o,this._closeHandler))},close:function(){this.trigger(r)||(this.element.addClass("k-rpanel-animate").removeClass("k-rpanel-expanded"),e(document.documentElement).off(o,this._closeHandler))},_close:function(t){var n=t.isDefaultPrevented();e(t.target).closest(this.options.toggleButton+",.k-rpanel").length||n||this.close()},destroy:function(){a.fn.destroy.call(this),e(window).off("resize"+n,this._resizeHandler),e(document.documentElement).off(o,this._closeHandler)}});kendo.ui.plugin(s)}(window.kendo.jQuery),function(e,t){function n(t){t.children(m).addClass(x),t.children("a").addClass(k).children(m).addClass(x),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(R),t.filter("li[disabled]").addClass(O).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(P+" "+H),t.attr("role","tab"),t.filter("."+P).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+k).length||t.contents().filter(function(){return!(this.nodeName.match(f)||3==this.nodeType&&!c(this.nodeValue))}).wrapAll("<span class='"+k+"'/>")})}function i(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(C),t.filter(".k-last:not(:last-child)").removeClass(w),t.filter(":first-child").addClass(C),t.filter(":last-child").addClass(w)}function r(e,t){return"<span class='k-button k-button-icon k-button-bare k-tabstrip-"+e+"' unselectable='on'><span class='k-icon "+t+"'></span></span>"}var o=window.kendo,a=o.ui,s=o.keys,l=e.map,d=e.each,c=e.trim,u=e.extend,h=o.template,p=a.Widget,f=/^(a|div)$/i,g=".kendoTabStrip",m="img",v="href",b="prev",_="show",k="k-link",w="k-last",y="click",x="k-image",C="k-first",S="select",T="activate",D="k-content",I="contentUrl",E="mouseenter",A="contentLoad",O="k-state-disabled",R="k-state-default",P="k-state-active",M="k-state-focused",F="k-state-hover",H="k-tab-on-top",N=".k-item:not(."+O+")",$=".k-tabstrip-items > "+N+":not(."+P+")",L={content:h("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:h("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:h("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:h("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:h("<span class='k-sprite #= spriteCssClass #'></span>"),empty:h("")},z={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=!1===t.enabled?" k-state-disabled":" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return!1===e.encoded?e.text:o.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return!0!==e.active?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?o.attr("content-url")+'="'+e.contentUrl+'"':""}},j=p.extend({init:function(t,n){var i,r,a=this;p.fn.init.call(a,t,n),a._animations(a.options),n=a.options,a._wrapper(),a._isRtl=o.support.isRtl(a.wrapper),a._tabindex(),a._updateClasses(),a._dataSource(),n.dataSource&&a.dataSource.fetch(),a._tabPosition(),a._scrollable(),a.options.contentUrls&&a.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+k).data(I,a.options.contentUrls[t])}),a.wrapper.on(E+g+" mouseleave"+g,$,a._toggleHover).on("focus"+g,e.proxy(a._active,a)).on("blur"+g,function(){a._current(null)}),a._keyDownProxy=e.proxy(a._keydown,a),n.navigatable&&a.wrapper.on("keydown"+g,a._keyDownProxy),a.wrapper.children(".k-tabstrip-items").on(y+g,".k-state-disabled .k-link",!1).on(y+g," > "+N,function(t){var n=a.wrapper[0];if(n!==document.activeElement)if(o.support.browser.msie)try{n.setActive()}catch(e){n.focus()}else n.focus();a._click(e(t.currentTarget))&&t.preventDefault()}),i=a.tabGroup.children("li."+P),r=a.contentHolder(i.index()),i[0]&&r.length>0&&0===r[0].childNodes.length&&a.activateTab(i.eq(0)),a.element.attr("role","tablist"),a.element[0].id&&(a._ariaId=a.element[0].id+"_ts_active"),o.notify(a)},_active:function(){var e=this.tabGroup.children().filter("."+P);(e=e[0]?e:this._endItem("first"))[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(N)[e]()},_item:function(e,t){var n;return n=t===b?"last":"first",e?((e=e[t]())[0]||(e=this._endItem(n)),e.hasClass(O)&&(e=this._item(e,t)),e):this._endItem(n)},_current:function(e){var n=this,i=n._focused,r=n._ariaId;return e===t?i:(i&&(i[0].id===r&&i.removeAttr("id"),i.removeClass(M)),e&&(e.hasClass(P)||e.addClass(M),n.element.removeAttr("aria-activedescendant"),(r=e[0].id||r)&&(e.attr("id",r),n.element.attr("aria-activedescendant",r))),n._focused=e,t)},_keydown:function(e){var n,i=this,r=e.keyCode,o=i._current(),a=i._isRtl;if(e.target==e.currentTarget){if(r==s.DOWN||r==s.RIGHT)n=a?b:"next";else if(r==s.UP||r==s.LEFT)n=a?"next":b;else if(r==s.ENTER||r==s.SPACEBAR)i._click(o),e.preventDefault();else{if(r==s.HOME)return i._click(i._endItem("first")),e.preventDefault(),t;if(r==s.END)return i._click(i._endItem("last")),e.preventDefault(),t}n&&(i._click(i._item(o,n)),e.preventDefault())}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=o.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){var t=this;t.options.dataSource=e,t._dataSource(),t.dataSource.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,n,i,r=this,a=r.options,s=o.getter(a.dataTextField),l=o.getter(a.dataContentField),d=o.getter(a.dataContentUrlField),c=o.getter(a.dataImageUrlField),u=o.getter(a.dataUrlField),h=o.getter(a.dataSpriteCssClass),p=[],f=r.dataSource.view();for((e=e||{}).action&&(f=e.items),t=0,i=f.length;i>t;t++)n={text:s(f[t])},a.dataContentField&&(n.content=l(f[t])),a.dataContentUrlField&&(n.contentUrl=d(f[t])),a.dataUrlField&&(n.url=u(f[t])),a.dataImageUrlField&&(n.imageUrl=c(f[t])),a.dataSpriteCssClass&&(n.spriteCssClass=h(f[t])),p[t]=n;if("add"==e.action)e.index<r.tabGroup.children().length?r.insertBefore(p,r.tabGroup.children().eq(e.index)):r.append(p);else if("remove"==e.action)for(t=0;f.length>t;t++)r.remove(e.index);else"itemchange"==e.action?(t=r.dataSource.view().indexOf(f[0]),e.field===a.dataTextField&&r.tabGroup.children().eq(t).find(".k-link").text(f[0].get(e.field))):(r.trigger("dataBinding"),r.remove("li"),r.append(p),r.trigger("dataBound"))},value:function(n){var i=this;return n===t?i.select().text():(n!=i.value()&&i.tabGroup.children().each(function(){e.trim(e(this).text())==n&&i.select(this)}),t)},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this,n=t.options.animation;t._animations(e),e.animation=u(!0,n,e.animation),e.navigatable?t.wrapper.on("keydown"+g,t._keyDownProxy):t.wrapper.off("keydown"+g,t._keyDownProxy),p.fn.setOptions.call(t,e)},events:[S,T,_,"error",A,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",tabPosition:"top",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1,scrollable:{distance:200}},destroy:function(){var e=this;p.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(g),e.wrapper.children(".k-tabstrip-items").off(g),e._scrollableModeActive&&(e._scrollPrevButton.off().remove(),e._scrollNextButton.off().remove()),e.scrollWrap.children(".k-tabstrip").unwrap(),o.destroy(e.wrapper)},select:function(t){var n=this;return 0===arguments.length?n.tabGroup.children("li."+P):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.tabGroup.find(t),e(t).each(function(t,i){(i=e(i)).hasClass(P)||n.trigger(S,{item:i[0],contentElement:n.contentHolder(i.index())[0]})||n.activateTab(i)}),n)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){t=this.tabGroup.find(t);var n=this;return t.each(function(){var t=e(this),i=t.find("."+k).data(I),r=n.contentHolder(t.index());i&&n.ajaxRequest(t,r,null,i)}),n},append:function(e){var t=this,n=t._create(e);return d(n.tabs,function(e){var i=n.contents[e];t.tabGroup.append(this),"bottom"==t.options.tabPosition?t.tabGroup.before(i):t._scrollableModeActive?t._scrollPrevButton.before(i):t.wrapper.append(i),t.angular("compile",function(){return{elements:[i]}})}),i(t.tabGroup),t._updateContentElements(),t.resize(!0),t},insertBefore:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return d(o.tabs,function(e){var t=o.contents[e];n.before(this),a.before(t),r.angular("compile",function(){return{elements:[t]}})}),i(r.tabGroup),r._updateContentElements(),r.resize(!0),r},insertAfter:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return d(o.tabs,function(e){var t=o.contents[e];n.after(this),a.after(t),r.angular("compile",function(){return{elements:[t]}})}),i(r.tabGroup),r._updateContentElements(),r.resize(!0),r},remove:function(t){var n,i=this,r=typeof t;return"string"===r?t=i.tabGroup.find(t):"number"===r&&(t=i.tabGroup.children().eq(t)),n=t.map(function(){var t=i.contentElement(e(this).index());return o.destroy(t),t}),t.remove(),n.remove(),i._updateContentElements(),i.resize(!0),i},_create:function(i){var r,o,a,s=e.isPlainObject(i),d=this;return s||e.isArray(i)?(i=e.isArray(i)?i:[i],r=l(i,function(t,n){return e(j.renderItem({group:d.tabGroup,item:u(t,{index:n})}))}),o=l(i,function(n,i){return"string"==typeof n.content||n.contentUrl?e(j.renderContent({item:u(n,{index:i})})):t})):(r="string"==typeof i&&"<"!=i[0]?d.element.find(i):e(i),o=e(),r.each(function(){if(a=e("<div class='"+D+"'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var t=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;a=e(d.contentElement(t))}o=o.add(a)}),n(r)),{tabs:r,contents:o}},_toggleDisabled:function(t,n){(t=this.tabGroup.find(t)).each(function(){e(this).toggleClass(R,n).toggleClass(O,!n)})},_updateClasses:function(){var r,o,a,s=this;s.wrapper.addClass("k-widget k-header k-tabstrip"),s.tabGroup=s.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),s.tabGroup[0]||(s.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(s.wrapper)),(r=s.tabGroup.find("li").addClass("k-item")).length&&(a=(o=r.filter("."+P).index())>=0?o:t,s.tabGroup.contents().filter(function(){return 3==this.nodeType&&!c(this.nodeValue)}).remove()),o>=0&&r.eq(o).addClass(H),s.contentElements=s.wrapper.children("div"),s.contentElements.addClass(D).eq(a).addClass(P).css({display:"block"}),r.length&&(n(r),i(s.tabGroup),s._updateContentElements())},_updateContentElements:function(){var t=this,n=t.options.contentUrls||[],i=t.tabGroup.find(".k-item"),r=(t.element.attr("id")||o.guid())+"-",a=t.wrapper.children("div");a.length&&i.length>a.length?(a.each(function(e){var t=parseInt(this.id.replace(r,""),10),n=i.filter("[aria-controls="+r+t+"]"),o=r+(e+1);n.data("aria",o),this.setAttribute("id",o)}),i.each(function(){var t=e(this);this.setAttribute("aria-controls",t.data("aria")),t.removeData("aria")})):i.each(function(i){var o=a.eq(i),s=r+(i+1);this.setAttribute("aria-controls",s),!o.length&&n[i]?e("<div class='"+D+"'/>").appendTo(t.wrapper).attr("id",s):(o.attr("id",s),e(this).children(".k-loading")[0]||n[i]||e("<span class='k-loading k-complete'/>").prependTo(this)),o.attr("role","tabpanel"),o.filter(":not(."+P+")").attr("aria-hidden",!0).attr("aria-expanded",!1),o.filter("."+P).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),o.kineticScrollNeeded&&o.mobile.ui.Scroller&&(o.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_wrapper:function(){var e=this;e.wrapper=e.element.is("ul")?e.element.wrapAll("<div />").parent():e.element,e.scrollWrap=e.wrapper.parent(".k-tabstrip-wrapper"),e.scrollWrap[0]||(e.scrollWrap=e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_tabPosition:function(){var e=this,t=e.options.tabPosition;e.wrapper.addClass("k-floatwrap k-tabstrip-"+t),"bottom"==t&&e.tabGroup.appendTo(e.wrapper),e.resize(!0)},_setContentElementsDimensions:function(){var e,t,n,i,r,o,a=this,s=a.options.tabPosition;("left"==s||"right"==s)&&(t=(e=a.wrapper.children(".k-content")).filter(":visible"),n="margin-"+s,i=a.tabGroup,r=i.outerWidth(),o=Math.ceil(i.height())-parseInt(t.css("padding-top"),10)-parseInt(t.css("padding-bottom"),10)-parseInt(t.css("border-top-width"),10)-parseInt(t.css("border-bottom-width"),10),setTimeout(function(){e.css(n,r).css("min-height",o)}))},_resize:function(){this._setContentElementsDimensions(),this._scrollable()},_sizeScrollWrap:function(e){var t,n;e.is(":visible")&&(t=this.options.tabPosition,n=Math.floor(e.outerHeight(!0))+("left"===t||"right"===t?2:this.tabsHeight),this.scrollWrap.css("height",n).css("height"))},_toggleHover:function(t){e(t.currentTarget).toggleClass(F,t.type==E)},_click:function(e){var t,n,i=this,r=e.find("."+k),o=r.attr(v),a=i.options.collapsible,s=i.contentHolder(e.index());if(e.closest(".k-widget")[0]==i.wrapper[0]){if(e.is("."+O+(a?"":",."+P)))return!0;if(n=r.data(I)||o&&("#"==o.charAt(o.length-1)||-1!=o.indexOf("#"+i.element[0].id+"-")),t=!o||n,i.tabGroup.children("[data-animating]").length)return t;if(i.trigger(S,{item:e[0],contentElement:s[0]}))return!0;if(!1!==t)return a&&e.is("."+P)?(i.deactivateTab(e),!0):(i.activateTab(e)&&(t=!0),t)}},_scrollable:function(){var e,t,n,i,a=this,s=a.options;a._scrollableAllowed()&&(a.wrapper.addClass("k-tabstrip-scrollable"),e=a.wrapper[0].offsetWidth,(t=a.tabGroup[0].scrollWidth)>e&&!a._scrollableModeActive?(a._nowScrollingTabs=!1,a._isRtl=o.support.isRtl(a.element),a.wrapper.append(r("prev","k-i-arrow-w")+r("next","k-i-arrow-e")),n=a._scrollPrevButton=a.wrapper.children(".k-tabstrip-prev"),i=a._scrollNextButton=a.wrapper.children(".k-tabstrip-next"),a.tabGroup.css({marginLeft:n.outerWidth()+9,marginRight:i.outerWidth()+12}),n.on("mousedown"+g,function(){a._nowScrollingTabs=!0,a._scrollTabsByDelta(s.scrollable.distance*(a._isRtl?1:-1))}),i.on("mousedown"+g,function(){a._nowScrollingTabs=!0,a._scrollTabsByDelta(s.scrollable.distance*(a._isRtl?-1:1))}),n.add(i).on("mouseup"+g,function(){a._nowScrollingTabs=!1}),a._scrollableModeActive=!0,a._toggleScrollButtons()):a._scrollableModeActive&&e>=t?(a._scrollableModeActive=!1,a.wrapper.removeClass("k-tabstrip-scrollable"),a._scrollPrevButton.off().remove(),a._scrollNextButton.off().remove(),a.tabGroup.css({marginLeft:"",marginRight:""})):a._scrollableModeActive?a._toggleScrollButtons():a.wrapper.removeClass("k-tabstrip-scrollable"))},_scrollableAllowed:function(){var e=this.options;return e.scrollable&&!isNaN(e.scrollable.distance)&&("top"==e.tabPosition||"bottom"==e.tabPosition)},_scrollTabsToItem:function(e){var t,n=this,i=n.tabGroup,r=i.scrollLeft(),o=e.outerWidth(),a=n._isRtl?e.position().left:e.position().left-i.children().first().position().left,s=i[0].offsetWidth,l=Math.ceil(parseFloat(i.css("padding-left")));n._isRtl?0>a?t=r+a-(s-r)-l:a+o>s&&(t=r+a-o+2*l):a+o>r+s?t=a+o-s+2*l:r>a&&(t=a-l),i.finish().animate({scrollLeft:t},"fast","linear",function(){n._toggleScrollButtons()})},_scrollTabsByDelta:function(e){var t=this,n=t.tabGroup,i=n.scrollLeft();n.finish().animate({scrollLeft:i+e},"fast","linear",function(){t._nowScrollingTabs?t._scrollTabsByDelta(e):t._toggleScrollButtons()})},_toggleScrollButtons:function(){var e=this,t=e.tabGroup,n=t.scrollLeft();e._scrollPrevButton.toggle(e._isRtl?t[0].scrollWidth-t[0].offsetWidth-1>n:0!==n),e._scrollNextButton.toggle(e._isRtl?0!==n:t[0].scrollWidth-t[0].offsetWidth-1>n)},deactivateTab:function(e){var t=this,n=t.options.animation,i=n.open,r=u({},n.close),a=r&&"effects"in r;e=t.tabGroup.find(e),r=u(a?r:u({reverse:!0},i),{hide:!0}),o.size(i.effects)?(e.kendoAddClass(R,{duration:i.duration}),e.kendoRemoveClass(P,{duration:i.duration})):(e.addClass(R),e.removeClass(P)),e.removeAttr("aria-selected"),t.contentAnimators.filter("."+P).kendoStop(!0,!0).kendoAnimate(r).removeClass(P).attr("aria-hidden",!0)},activateTab:function(e){var t,n,i,r,a,s,l,d,c,h,p,f,g,m,v;if(!this.tabGroup.children("[data-animating]").length)return e=this.tabGroup.find(e),n=(t=this).options.animation,i=n.open,a=(r=u({},n.close))&&"effects"in r,s=e.parent().children(),l=s.filter("."+P),d=s.index(e),r=u(a?r:u({reverse:!0},i),{hide:!0}),o.size(i.effects)?(l.kendoRemoveClass(P,{duration:r.duration}),e.kendoRemoveClass(F,{duration:r.duration})):(l.removeClass(P),e.removeClass(F)),c=t.contentAnimators,t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===c.length?(t.tabGroup.find("."+H).removeClass(H),e.addClass(H).css("z-index"),e.addClass(P),t._current(e),t.trigger("change"),t._scrollableModeActive&&t._scrollTabsToItem(e),!1):(h=c.filter("."+P),p=t.contentHolder(d),f=p.closest(".k-content"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),t._sizeScrollWrap(h),0===p.length?(h.removeClass(P).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(r),!1):(e.attr("data-animating",!0),g=!!e.children("."+k).data(I)&&p.is(":empty"),m=function(){t.tabGroup.find("."+H).removeClass(H),e.addClass(H).css("z-index"),o.size(i.effects)?(l.kendoAddClass(R,{duration:i.duration}),e.kendoAddClass(P,{duration:i.duration})):(l.addClass(R),e.addClass(P)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),t._sizeScrollWrap(f),f.addClass(P).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(u({init:function(){t.trigger(_,{item:e[0],contentElement:p[0]}),o.resize(p)}},i,{complete:function(){e.removeAttr("data-animating"),t.trigger(T,{item:e[0],contentElement:p[0]}),o.resize(p),t.scrollWrap.css("height","").css("height")}}))},v=function(){g?(e.removeAttr("data-animating"),t.ajaxRequest(e,p,function(){e.attr("data-animating",!0),m(),t.trigger("change")})):(m(),t.trigger("change")),t._scrollableModeActive&&t._scrollTabsToItem(e)},h.removeClass(P),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(u({complete:v},r)):v(),!0))},contentElement:function(e){var n,i,r,a;if(isNaN(e-0))return t;if(e=(n=this.contentElements&&this.contentElements[0]&&!o.kineticScrollNeeded?this.contentElements:this.contentAnimators)&&0>e?n.length+e:e,i=RegExp("-"+(e+1)+"$"),n)for(r=0,a=n.length;a>r;r++)if(i.test(n.eq(r).closest(".k-content")[0].id))return n[r];return t},contentHolder:function(t){var n=e(this.contentElement(t)),i=n.children(".km-scroll-container");return o.support.touch&&i[0]?i:n},ajaxRequest:function(t,n,i,r){var a,s,l,d,c,u,h,p,f;t=this.tabGroup.find(t),a=this,s=e.ajaxSettings.xhr,l=t.find("."+k),d={},c=t.width()/2,u=!1,(h=t.find(".k-loading").removeClass("k-complete"))[0]||(h=e("<span class='k-loading'/>").prependTo(t)),p=2*c-h.width(),f=function(){h.animate({marginLeft:(parseInt(h.css("marginLeft"),10)||0)<c?p:0},500,f)},o.support.browser.msie&&10>o.support.browser.version&&setTimeout(f,40),r=r||l.data(I)||l.attr(v),a.inRequest=!0,a.xhr=e.ajax({type:"GET",cache:!1,url:r,dataType:"html",data:d,xhr:function(){var t=this,n=s(),i=t.progressUpload?"progressUpload":!!t.progress&&"progress";return n&&e.each([n,n.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){i&&t[i](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),n},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";h.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){a.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(u),h.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){a.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&h.remove()},success:function(e){var s,l,d;h.addClass("k-complete");try{l=10,(s=this).noProgress&&(h.width(l+"%"),u=setInterval(function(){s.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),a.angular("cleanup",function(){return{elements:n.get()}}),o.destroy(n),n.html(e)}catch(e){(d=window.console)&&d.error&&d.error(e.name+": "+e.message+" in "+r),this.error(this.xhr,"error")}i&&i.call(a,n),a.angular("compile",function(){return{elements:n.get()}}),a.trigger(A,{item:t[0],contentElement:n[0]})}})}});u(j,{renderItem:function(e){e=u({tabStrip:{},group:{}},e);var t=L.empty,n=e.item;return L.item(u(e,{image:n.imageUrl?L.image:t,sprite:n.spriteCssClass?L.sprite:t,itemWrapper:L.itemWrapper},z))},renderContent:function(e){return L.content(u(e,z))}}),o.ui.plugin(j)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*O))}function i(e){return 60*e.getHours()*O+e.getMinutes()*O+1e3*e.getSeconds()+e.getMilliseconds()}function r(e,t,n){var r,o=i(t),a=i(n);return!e||o==a||(o>(r=i(e))&&(r+=R),o>a&&(a+=R),r>=o&&a>=r)}function o(e){var t=e.parseFormats;e.format=p(e.format||d.getCulture(e.culture).calendars.standard.patterns.t),(t=B(t)?t:[t]).splice(0,0,e.format),e.parseFormats=t}function a(e){e.preventDefault()}var s,l,d=window.kendo,c=d.keys,u=d.parseDate,h=d._activeElement,p=d._extractFormat,f=d.support,g=f.browser,m=d.ui,v=m.Widget,b="open",_="close",k="change",w=".kendoTimePicker",y="click"+w,x="k-state-default",C="disabled",S="readonly",T="li",D="<span/>",I="k-state-focused",E="k-state-hover",A="mousedown"+w,O=6e4,R=864e5,P="k-state-selected",M="k-state-disabled",F="aria-selected",H="aria-expanded",N="aria-hidden",$="aria-disabled",L="aria-readonly",z="aria-activedescendant",j="id",B=e.isArray,U=e.extend,V=e.proxy,W=Date,G=new W;G=new W(G.getFullYear(),G.getMonth(),G.getDate(),0,0,0),(s=function(t){var n=this,i=t.id;n.options=t,n.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:f.kineticScrollNeeded?"":"auto"}).on(y,T,V(n._click,n)).on("mouseenter"+w,T,function(){e(this).addClass(E)}).on("mouseleave"+w,T,function(){e(this).removeClass(E)}),n.list=e("<div class='k-list-container'/>").append(n.ul).on(A,a),i&&(n._timeViewID=i+"_timeview",n._optionID=i+"_option_selected",n.ul.attr(j,n._timeViewID)),n._popup(),n._heightHandler=V(n._height,n),n.template=d.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})}).prototype={current:function(n){var i=this,r=i.options.active;return n===t?i._current:(i._current&&i._current.removeClass(P).removeAttr(F).removeAttr(j),n&&(n=e(n).addClass(P).attr(j,i._optionID).attr(F,!0),i.scroll(n[0])),i._current=n,r&&r(n),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(w),e.list.off(w),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,o=i.format,a=d.toString,s=n.template,l=e.length,c=0,u="";l>c;c++)r(t=e[c],i.min,i.max)&&(u+=s(a(t,o,i.culture)));n._html(u)},refresh:function(){var e,t,r,o=this,a=o.options,s=a.format,l=function(){var e=new W,t=new W(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new W(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}(),c=0>l,u=a.min,h=a.max,p=i(u),f=i(h),g=a.interval*O,m=d.toString,v=o.template,b=new W(+u),_=b.getDate(),k=0,w="";for(r=c?(R+l*O)/g:R/g,p!=f&&(p>f&&(f+=R),r=(f-p)/g+1),t=parseInt(r,10);r>k;k++)k&&n(b,g,c),f&&t==k&&(e=i(b),_<b.getDate()&&(e+=R),e>f&&(b=new W(+h))),w+=v(m(b,s,a.culture));o._html(w)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e){var t=this;t.ul[0].innerHTML=e,t.popup.unbind(b,t._heightHandler),t.popup.one(b,t._heightHandler),t.current(null),t.select(t._value)},scroll:function(e){if(e){var t,n=this.ul[0],i=e.offsetTop,r=e.offsetHeight,o=n.scrollTop,a=n.clientHeight,s=i+r,l=this._touchScroller;l?(i>(t=this.list.height())&&(i=i-t+r),l.scrollTo(0,-i)):n.scrollTop=o>i?i:s>o+a?s-a:o}},select:function(t){var n=this,i=n.options,r=n._current;t instanceof Date&&(t=d.toString(t,i.format,i.culture)),"string"==typeof t&&(t=r&&r.text()===t?r:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}))[0]?t:null),n.current(t)},setOptions:function(e){var t=this.options;e.min=u(e.min),e.max=u(e.max),this.options=U(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget),r=i.text(),o=n.options.dates;o&&o.length>0&&(r=o[i.index()]),t.isDefaultPrevented()||(n.select(i),n.options.change(r,!0),n.close())},_height:function(){var e=this,t=e.list,n=t.parent(".k-animation-container"),i=e.options.height;e.ul[0].children.length&&t.add(n).show().height(e.ul[0].scrollHeight>i?i:"auto").hide()},_parse:function(e){var t=this.options,n=this._value||G;return e instanceof W?e:((e=u(e,t.parseFormats,t.culture))&&(e=new W(n.getFullYear(),n.getMonth(),n.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.options.anchor;(n.data("width")||!i)&&(t=(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0)?parseFloat(e.width):r.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:i}).data("width",i))},_popup:function(){var e=this,t=e.list,n=e.options,i=n.anchor;e.popup=new m.Popup(t,U(n.popup,{anchor:i,open:n.open,close:n.close,animation:n.animation,isRtl:f.isRtl(n.anchor)})),e._touchScroller=d.touchScroller(e.popup.element)},move:function(e){var n=this,i=e.keyCode,r=n.ul[0],o=n._current,a=i===c.DOWN;if(i===c.UP||a){if(e.altKey)return n.toggle(a),t;(o=a?o?o[0].nextSibling:r.firstChild:o?o[0].previousSibling:r.lastChild)&&n.select(o),n.options.change(n._current.text()),e.preventDefault()}else(i===c.ENTER||i===c.TAB||i===c.ESC)&&(e.preventDefault(),o&&n.options.change(o.text(),!0),n.close())}},s.getMilliseconds=i,d.TimeView=s,l=v.extend({init:function(t,n){var i,r,a=this;v.fn.init.call(a,t,n),t=a.element,(n=a.options).min=u(t.attr("min"))||u(n.min),n.max=u(t.attr("max"))||u(n.max),o(n),a._initialOptions=U({},n),a._wrapper(),a.timeView=r=new s(U({},n,{id:t.attr(j),anchor:a.wrapper,format:n.format,change:function(e,n){n?a._change(e):t.val(e)},open:function(e){a.timeView._adjustListWidth(),a.trigger(b)?e.preventDefault():(t.attr(H,!0),i.attr(N,!1))},close:function(e){a.trigger(_)?e.preventDefault():(t.attr(H,!1),i.attr(N,!0))},active:function(e){t.removeAttr(z),e&&t.attr(z,r._optionID)}})),i=r.ul,a._icon(),a._reset();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":r._timeViewID}),t.is("[disabled]")||e(a.element).parents("fieldset").is(":disabled")?a.enable(!1):a.readonly(t.is("[readonly]")),a._old=a._update(n.value||a.element.val()),a._oldText=t.val(),d.notify(a)},options:{name:"TimePicker",min:G,max:G,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[b,_,k],setOptions:function(e){var t=this,n=t._value;v.fn.setOptions.call(t,e),o(e=t.options),t.timeView.setOptions(e),n&&t.element.val(d.toString(n,e.format,e.culture))},dataBind:function(e){B(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._arrow.off(w),o=t.element.off(w),s=t._inputWrapper.off(w);i||n?(s.addClass(n?M:x).removeClass(n?x:M),o.attr(C,n).attr(S,i).attr($,n).attr(L,i)):(s.addClass(x).removeClass(M).on("mouseenter.kendoTimePicker mouseleave.kendoTimePicker",t._toggleHover),o.removeAttr(C).removeAttr(S).attr($,!1).attr(L,!1).on("keydown"+w,V(t._keydown,t)).on("focusout"+w,V(t._blur,t)).on("focus"+w,function(){t._inputWrapper.addClass(I)}),r.on(y,V(t._click,t)).on(A,a))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;v.fn.destroy.call(e),e.timeView.destroy(),e.element.off(w),e._arrow.off(w),e._inputWrapper.off(w),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(I)},_click:function(){var e=this.element;this.timeView.toggle(),f.touch||e[0]===h()||e.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t._typing||t.element.trigger(k),t.trigger(k)),t._typing=!1},_icon:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t.attr({role:"button","aria-controls":n.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView,r=t.element.val();i.popup.visible()||e.altKey?i.move(e):n===c.ENTER&&r!==t._oldText?t._change(r):t._typing=!0},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:((n=i.timeView._parse(n))&&(n=new W(+n),r[e]=n,i.timeView.options[e]=n,i.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(E,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView,o=i._parse(e);return r(o,n.min,n.max)||(o=null),t._value=o,t.element.val(o?d.toString(o,n.format,n.culture):e),i.value(o),o},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-timepicker"))[0]||(t=(t=i.wrap(D).parent().addClass("k-picker-wrap k-state-default")).wrap(D).parent()),t[0].style.cssText=i[0].style.cssText,n.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))}}),m.plugin(l)}(window.kendo.jQuery),function(e,t){function n(){var e,t=this.options.anchor,n=t.outerWidth();s.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?n-(this.element.outerWidth()-this.element.width()):n,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function r(e){e.target.is(".k-toggle-button")||e.target.toggleClass(b,"press"==e.type)}function o(t){return(t=e(t)).hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}function a(e){e.preventDefault()}var s=window.kendo,l=s.Class,d=s.ui.Widget,c=e.proxy,u=s.isFunction,h="k-button",p="k-overflow-button",f="k-toggle-button",g="k-button-group",m="k-split-button",v="k-separator",b="k-state-active",_="k-state-disabled",k="k-state-hidden",w="k-icon",y="k-i-",x="k-split-button-arrow",C="k-overflow-anchor",S="k-toolbar-first-visible",T="k-toolbar-last-visible",D="click",I="toggle",E="open",A="close",O="overflowOpen",R="overflowClose",P="never",M="auto",F="always",H="k-overflow-hidden",N=s.attr("uid"),$=s.Class.extend({addOverflowAttr:function(){this.element.attr(s.attr("overflow"),this.options.overflow||M)},addUidAttr:function(){this.element.attr(N,this.options.uid)},addIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id)},addOverflowIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id+"_overflow")},attributes:function(){this.options.attributes&&this.element.attr(this.options.attributes)},show:function(){this.element.removeClass(k).show(),this.options.hidden=!1},hide:function(){this.element.addClass(k).hide(),this.options.hidden=!0},remove:function(){this.element.remove()},enable:function(e){e===t&&(e=!0),this.element.toggleClass(_,!e),this.options.enable=e},twin:function(){var e=this.element.attr(N);return this.overflow?this.toolbar.element.find("["+N+"='"+e+"']").data(this.options.type):this.toolbar.options.resizable?this.toolbar.popup.element.find("["+N+"='"+e+"']").data(this.options.type):t}}),L=$.extend({init:function(n,i){var r=e(n.useButtonTag?"<button></button>":"<a></a>");this.element=r,this.options=n,this.toolbar=i,this.attributes(),n.primary&&r.addClass("k-primary"),n.togglable&&(r.addClass(f),this.toggle(n.selected)),n.url===t||n.useButtonTag||(r.attr("href",n.url),n.mobile&&r.attr(s.attr("role"),"button")),n.group&&(r.attr(s.attr("group"),n.group),(this.overflow&&this.options.overflow===F||!this.overflow)&&(this.group=this.toolbar.addToGroup(this,n.group))),!n.togglable&&n.click&&u(n.click)&&(this.clickHandler=n.click),n.togglable&&n.toggle&&u(n.toggle)&&(this.toggleHandler=n.toggle)},toggle:function(e,t){e=!!e,this.group&&e?this.group.select(this):this.group||this.select(e),t&&this.twin()&&this.twin().toggle(e)},getParentGroup:function(){return this.options.isChild?this.element.closest("."+g).data("buttonGroup"):t},_addGraphics:function(){var t,n,i,r=this.element,o=this.options.icon,a=this.options.spriteCssClass,s=this.options.imageUrl;(a||s||o)&&(t=!0,r.contents().not("span.k-sprite,span."+w+",img.k-image").each(function(n,i){(1==i.nodeType||3==i.nodeType&&e.trim(i.nodeValue).length>0)&&(t=!1)}),r.addClass(t?"k-button-icon":"k-button-icontext")),o?((n=r.children("span."+w).first())[0]||(n=e('<span class="'+w+'"></span>').prependTo(r)),n.addClass(y+o)):a?((n=r.children("span.k-sprite").first())[0]||(n=e('<span class="k-sprite"></span>').prependTo(r)),n.addClass(a)):s&&((i=r.children("img.k-image").first())[0]||(i=e('<img alt="icon" class="k-image" />').prependTo(r)),i.attr("src",s))}}),z=L.extend({init:function(e,t){L.fn.init.call(this,e,t);var n=this.element;n.addClass(h),this.addIdAttr(),e.align&&n.addClass("k-align-"+e.align),"overflow"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),e.hasIcon="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),e.hasIcon&&this._addGraphics(),this.addUidAttr(),this.addOverflowAttr(),this.enable(e.enable),e.hidden&&this.hide(),this.element.data({type:"button",button:this})},select:function(e){e===t&&(e=!1),this.element.toggleClass(b,e),this.options.selected=e}}),j=L.extend({init:function(e,t){this.overflow=!0,L.fn.init.call(this,e,t);var n=this.element;n.addClass(p+" "+h),"toolbar"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),e.hasIcon="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),e.hasIcon&&this._addGraphics(),e.isChild||this._wrap(),this.addOverflowIdAttr(),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.enable(e.enable),e.hidden&&this.hide(),this.element.data({type:"button",button:this})},_wrap:function(){this.element=this.element.wrap("<li></li>").parent()},overflowHidden:function(){this.element.addClass(H)},select:function(e){e===t&&(e=!1),this.options.isChild?this.element.toggleClass(b,e):this.element.find(".k-button").toggleClass(b,e),this.options.selected=e}}),B=$.extend({createButtons:function(t){var n,i=this.options,r=i.buttons||[];for(n=0;r.length>n;n++)r[n].uid||(r[n].uid=s.guid()),new t(e.extend({mobile:i.mobile,isChild:!0,type:"button"},r[n]),this.toolbar).element.appendTo(this.element)},refresh:function(){this.element.children().filter(":not('."+k+"'):first").addClass("k-group-start"),this.element.children().filter(":not('."+k+"'):last").addClass("k-group-end")}}),U=B.extend({init:function(t,n){var i=this.element=e("<div></div>");this.options=t,this.toolbar=n,this.addIdAttr(),t.align&&i.addClass("k-align-"+t.align),this.createButtons(z),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),i.addClass(g),this.element.data({type:"buttonGroup",buttonGroup:this})}}),V=B.extend({init:function(t,n){var i=this.element=e("<li></li>");this.options=t,this.toolbar=n,this.overflow=!0,this.addOverflowIdAttr(),this.createButtons(j),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),i.addClass((t.mobile?"":g)+" k-overflow-group"),this.element.data({type:"buttonGroup",buttonGroup:this})},overflowHidden:function(){this.element.addClass(H)}}),W=$.extend({init:function(t,n){var i=this.element=e('<div class="'+m+'"></div>');this.options=t,this.toolbar=n,this.mainButton=new z(t,n),this.arrowButton=e('<a class="'+h+" "+x+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),this.popupElement=e('<ul class="k-list-container k-split-container"></ul>'),this.mainButton.element.appendTo(i),this.arrowButton.appendTo(i),this.popupElement.appendTo(i),t.align&&i.addClass("k-align-"+t.align),t.id||(t.id=t.uid),i.attr("id",t.id+"_wrapper"),this.addOverflowAttr(),this.addUidAttr(),this.createMenuButtons(),this.createPopup(),this.mainButton.main=!0,i.data({type:"splitButton",splitButton:this,kendoPopup:this.popup})},createMenuButtons:function(){var t,n=this.options,i=n.menuButtons;for(t=0;i.length>t;t++)new z(e.extend({mobile:n.mobile,type:"button",click:n.click},i[t]),this.toolbar).element.wrap("<li></li>").parent().appendTo(this.popupElement)},createPopup:function(){var t=this.options,i=this.element;this.popupElement.attr("id",t.id+"_optionlist").attr(N,t.rootUid),t.mobile&&(this.popupElement=o(this.popupElement)),this.popup=this.popupElement.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:i,isRtl:this.toolbar._isRtl,copyAnchorStyles:!1,animation:t.animation,open:n}).data("kendoPopup")},remove:function(){this.popup.destroy(),this.element.remove()},toggle:function(){this.popup.toggle()},enable:function(e){e===t&&(e=!0),this.mainButton.enable(e),this.options.enable=e}}),G=$.extend({init:function(t,n){var i,r=this.element=e('<li class="'+m+'"></li>'),o=t.menuButtons;for(this.options=t,this.toolbar=n,this.overflow=!0,this.mainButton=new j(e.extend({isChild:!0},t)),this.mainButton.element.appendTo(r),i=0;o.length>i;i++)new j(e.extend({mobile:t.mobile,isChild:!0},o[i]),this.toolbar).element.appendTo(r);this.addUidAttr(),this.addOverflowAttr(),this.mainButton.main=!0,r.data({type:"splitButton",splitButton:this})},overflowHidden:function(){this.element.addClass(H)}}),q=$.extend({init:function(t,n){var i=this.element=e("<div>&nbsp;</div>");this.element=i,this.options=t,this.toolbar=n,this.attributes(),this.addIdAttr(),this.addUidAttr(),this.addOverflowAttr(),i.addClass(v),i.data({type:"separator",separator:this})}}),K=$.extend({init:function(t,n){var i=this.element=e("<li>&nbsp;</li>");this.element=i,this.options=t,this.toolbar=n,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),i.addClass(v),i.data({type:"separator",separator:this})},overflowHidden:function(){this.element.addClass(H)}}),Y=$.extend({init:function(t,n,r){var o=u(t)?t(n):t;o=o instanceof i?o.wrap("<div></div>").parent():e("<div></div>").html(o),this.element=o,this.options=n,this.options.type="template",this.toolbar=r,this.attributes(),this.addUidAttr(),this.addIdAttr(),this.addOverflowAttr(),o.data({type:"template",template:this})}}),Q=$.extend({init:function(t,n,r){var o=e(u(t)?t(n):t);o=o instanceof i?o.wrap("<li></li>").parent():e("<li></li>").html(o),this.element=o,this.options=n,this.options.type="template",this.toolbar=r,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),this.addOverflowAttr(),o.data({type:"template",template:this})},overflowHidden:function(){this.element.addClass(H)}}),X={button:{toolbar:z,overflow:j},buttonGroup:{toolbar:U,overflow:V},splitButton:{toolbar:W,overflow:G},separator:{toolbar:q,overflow:K},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},J=l.extend({init:function(e){this.name=e,this.buttons=[]},add:function(e){this.buttons[this.buttons.length]=e},remove:function(t){var n=e.inArray(t,this.buttons);this.buttons.splice(n,1)},select:function(e){for(var t=0;this.buttons.length>t;t++)this.buttons[t].select(!1);e.select(!0)}}),Z=d.extend({init:function(t,n){var i,o=this;if(d.fn.init.call(o,t,n),n=o.options,(t=o.wrapper=o.element).addClass("k-toolbar k-widget"),this.uid=s.guid(),this._isRtl=s.support.isRtl(t),this._groups={},t.attr(N,this.uid),o.isMobile="boolean"==typeof n.mobile?n.mobile:o.element.closest(".km-root")[0],o.animation=o.isMobile?{open:{effects:"fade"}}:{},o.isMobile&&(t.addClass("km-widget"),w="km-icon",y="km-",h="km-button",g="km-buttongroup km-widget",b="km-state-active",_="km-state-disabled"),n.resizable?(o._renderOverflow(),t.addClass("k-toolbar-resizable"),o.overflowUserEvents=new s.UserEvents(o.element,{threshold:5,allowSelection:!0,filter:"."+C,tap:c(o._toggleOverflow,o)}),o._resizeHandler=s.onResize(function(){o.resize()})):o.popup={element:e([])},n.items&&n.items.length)for(i=0;n.items.length>i;i++)o.add(n.items[i]);o.userEvents=new s.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+N+"="+this.uid+"] ."+h+", ["+N+"="+this.uid+"] ."+p,tap:c(o._buttonClick,o),press:r,release:r}),o.element.on(D,"."+_,a),n.resizable&&o.popup.element.on(D,NaN+_,a),n.resizable&&this._toggleOverflowAnchor(),s.notify(o)},events:[D,I,E,A,O,R],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},addToGroup:function(e,t){var n;return(n=this._groups[t]?this._groups[t]:this._groups[t]=new J).add(e),n},destroy:function(){var t=this;t.element.find("."+m).each(function(t,n){e(n).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(s.unbindResize(t._resizeHandler),t.overflowUserEvents.destroy(),t.popup.destroy()),d.fn.destroy.call(t)},add:function(t){var n,i,r=X[t.type],o=t.template,a=this,l=a.isMobile?"":"k-item k-state-default",d=t.overflowTemplate;e.extend(t,{uid:s.guid(),animation:a.animation,mobile:a.isMobile,rootUid:a.uid}),o&&!d?t.overflow=P:t.overflow||(t.overflow=M),t.overflow!==P&&a.options.resizable&&(d?i=new Q(d,t,a):r&&(i=new r.overflow(t,a)).element.addClass(l),i&&(t.overflow===M&&i.overflowHidden(),i.element.appendTo(a.popup.container),a.angular("compile",function(){return{elements:i.element.get()}}))),t.overflow!==F&&(o?n=new Y(o,t,a):r&&(n=new r.toolbar(t,a)),n&&(a.options.resizable?(n.element.appendTo(a.element).css("visibility","hidden"),a._shrink(a.element.innerWidth()),n.element.css("visibility","visible")):n.element.appendTo(a.element),a.angular("compile",function(){return{elements:n.element.get()}})))},_getItem:function(e){var t,n,i,r,o=this.options.resizable;return r=(t=this.element.find(e)).length?t.data("type"):"",(n=t.data(r))&&n.main&&(r="splitButton",n=(t=t.parent("."+m)).data(r)),!t.length&&o&&(r=(t=this.popup.element.find(e)).data("type"),i=t.data(r)),i&&i.main&&(r="splitButton",i=(t=t.parent("."+m)).data(r)),n&&o&&(i=n.twin()),{type:r,toolbar:n,overflow:i}},remove:function(e){var t=this._getItem(e);t.toolbar&&t.toolbar.remove(),t.overflow&&t.overflow.remove(),this.resize(!0)},hide:function(e){var t=this._getItem(e);t.toolbar&&(t.toolbar.hide(),"button"===t.toolbar.options.type&&t.toolbar.options.isChild&&t.toolbar.getParentGroup().refresh()),t.overflow&&(t.overflow.hide(),"button"===t.overflow.options.type&&t.overflow.options.isChild&&t.overflow.getParentGroup().refresh()),this.resize(!0)},show:function(e){var t=this._getItem(e);t.toolbar&&(t.toolbar.show(),"button"===t.toolbar.options.type&&t.toolbar.options.isChild&&t.toolbar.getParentGroup().refresh()),t.overflow&&(t.overflow.show(),"button"===t.overflow.options.type&&t.overflow.options.isChild&&t.overflow.getParentGroup().refresh()),this.resize(!0)},enable:function(e,n){var i=this._getItem(e);t===n&&(n=!0),i.toolbar&&i.toolbar.enable(n),i.overflow&&i.overflow.enable(n)},getSelectedFromGroup:function(e){return this.element.find("."+f+"[data-group='"+e+"']").filter("."+b)},toggle:function(n,i){var r=e(n).data("button");r.options.togglable&&(i===t&&(i=!0),r.toggle(i,!0))},_renderOverflow:function(){var t=this,n=X.overflowContainer,i=t._isRtl,r=i?"left":"right";t.overflowAnchor=e(X.overflowAnchor).addClass(h),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),n=o(n)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new s.ui.Popup(n,{origin:"bottom "+r,position:"top "+r,anchor:t.overflowAnchor,isRtl:i,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(n){var r=s.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):r.css("margin-left",(i?-1:1)*((r.outerWidth()-r.width())/2+1)),t.trigger(O)&&n.preventDefault()},close:function(e){t.trigger(R)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find(".k-overflow-container"):t.popup.element,t.popup.container.attr(N,this.uid)},_toggleOverflowAnchor:function(){this.overflowAnchor.css(this.popup.element.children(":not(."+H+", .k-popup)").length>0?{visibility:"visible",width:""}:{visibility:"hidden",width:"1px"})},_buttonClick:function(n){var i,r,o,a,s,l=this,d=n.target.closest("."+x).length;return n.preventDefault(),d?(l._toggle(n),t):((i=e(n.target).closest("."+h,l.element)).hasClass(C)||(!(r=i.data("button"))&&l.popup&&(r=(i=e(n.target).closest("."+p,l.popup.container)).parent("li").data("button")),r&&r.options.enable&&(r.options.togglable?(a=u(r.toggleHandler)?r.toggleHandler:null,r.toggle(!r.options.selected,!0),s={target:i,group:r.options.group,checked:r.options.selected,id:r.options.id},a&&a.call(l,s),l.trigger(I,s)):(a=u(r.clickHandler)?r.clickHandler:null,s={target:i,id:r.options.id},a&&a.call(l,s),l.trigger(D,s)),i.hasClass(p)&&l.popup.close(),(o=i.closest(".k-split-container"))[0]&&(o.data("kendoPopup")||o.parents(".km-popup-wrapper").data("kendoPopup")).close())),t)},_toggle:function(t){var n=e(t.target).closest("."+m).data("splitButton");t.preventDefault(),n.options.enable&&((n.popup.element.is(":visible")?this.trigger(A,{target:n.element}):this.trigger(E,{target:n.element}))||n.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible:not('."+k+"')").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,n,i;if(e<this._childrenWidth())for(i=(n=this.element.children(":visible:not([data-overflow='never'], ."+C+")")).length-1;i>=0&&(t=n.eq(i),!(e>this._childrenWidth()));i--)this._hideItem(t)},_stretch:function(e){var t,n,i;if(e>this._childrenWidth())for(n=this.element.children(":hidden:not('."+k+"')"),i=0;n.length>i&&(t=n.eq(i),!(e<this._childrenWidth())&&this._showItem(t,e));i++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(H)},_showItem:function(e,t){return!!(e.length&&t>this._childrenWidth()+e.outerWidth(!0))&&(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(H),!0)},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),n=e.filter(":not(.k-overflow-hidden)"),i=t.filter(":visible");e.add(t).removeClass(S+" "+T),n.first().add(i.first()).addClass(S),n.last().add(i.last()).addClass(T)}});s.ui.plugin(Z)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(2100,0,1);return t.setMinutes(-e),t}function i(e){e.preventDefault()}function r(t){var n,i=o.getCulture(t.culture).calendars.standard.patterns,r=!t.parseFormats.length;t.format=d(t.format||i.g),t.timeFormat=n=d(t.timeFormat||i.t),o.DateView.normalize(t),r&&t.parseFormats.push("yyyy-MM-ddTHH:mm:ss"),-1===e.inArray(n,t.parseFormats)&&t.parseFormats.splice(1,0,n)}var o=window.kendo,a=o.TimeView,s=o.parseDate,l=o._activeElement,d=o._extractFormat,c=o.calendar,u=c.isInRange,h=c.restrictValue,p=c.isEqualDatePart,f=a.getMilliseconds,g=o.ui,m=g.Widget,v="open",b="close",_="change",k=".kendoDateTimePicker",w="click"+k,y="disabled",x="readonly",C="k-state-default",S="k-state-focused",T="k-state-disabled",D="mousedown"+k,I="month",E="<span/>",A="aria-activedescendant",O="aria-expanded",R="aria-hidden",P="aria-owns",M="aria-disabled",F="aria-readonly",H=Date,N=new H(1800,0,1),$=new H(2099,11,31),L={view:"date"},z={view:"time"},j=e.extend,B=m.extend({init:function(t,n){var i=this;m.fn.init.call(i,t,n),t=i.element,(n=i.options).min=s(t.attr("min"))||s(n.min),n.max=s(t.attr("max"))||s(n.max),r(n),i._initialOptions=j({},n),i._wrapper(),i._views(),i._icons(),i._reset(),i._template();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),i._midnight=i._calculateMidnight(n.min,n.max),t.is("[disabled]")||e(i.element).parents("fieldset").is(":disabled")?i.enable(!1):i.readonly(t.is("[readonly]")),i._old=i._update(n.value||i.element.val()),i._oldText=t.val(),o.notify(i)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new H(N),max:new H($),interval:30,height:200,footer:"",start:I,depth:I,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:[v,b,_],setOptions:function(e){var t,n,i,a=this,l=a._value;m.fn.setOptions.call(a,e),(e=a.options).min=t=s(e.min),e.max=n=s(e.max),r(e),a._midnight=a._calculateMidnight(e.min,e.max),i=e.value||a._value||a.dateView._current,t&&!p(t,i)&&(t=new H(N)),n&&!p(n,i)&&(n=new H($)),a.dateView.setOptions(e),a.timeView.setOptions(j({},e,{format:e.timeFormat,min:t,max:n})),l&&(a.element.val(o.toString(l,e.format,e.culture)),a._updateARIA(l))},_editable:function(t){var n=this,r=n.element.off(k),a=n._dateIcon.off(k),s=n._timeIcon.off(k),d=n._inputWrapper.off(k),c=t.readonly,u=t.disable;c||u?(d.addClass(u?T:C).removeClass(u?C:T),r.attr(y,u).attr(x,c).attr(M,u).attr(F,c)):(d.addClass(C).removeClass(T).on("mouseenter.kendoDateTimePicker mouseleave.kendoDateTimePicker",n._toggleHover),r.removeAttr(y).removeAttr(x).attr(M,!1).attr(F,!1).on("keydown"+k,e.proxy(n._keydown,n)).on("focus"+k,function(){n._inputWrapper.addClass(S)}).on("focusout"+k,function(){n._inputWrapper.removeClass(S),r.val()!==n._oldText&&n._change(r.val()),n.close("date"),n.close("time")}),a.on(D,i).on(w,function(){n.toggle("date"),o.support.touch||r[0]===l()||r.focus()}),s.on(D,i).on(w,function(){n.toggle("time"),o.support.touch||r[0]===l()||r.focus()}))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;m.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(k),e._dateIcon.off(k),e._timeIcon.off(k),e._inputWrapper.off(k),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(_),t._typing||t.element.trigger(_))},_option:function(e,i){var r,o,a=this,l=a.options,d=a.timeView,c=d.options,u=a._value||a._old;if(i===t)return l[e];if(i=s(i,l.parseFormats,l.culture)){if(l.min.getTime()===l.max.getTime()&&(c.dates=[]),l[e]=new H(i.getTime()),a.dateView[e](i),a._midnight=a._calculateMidnight(l.min,l.max),u&&(r=p(l.min,u),o=p(l.max,u)),r||o){if(c[e]=i,r&&!o&&(c.max=n(l.interval)),o){if(a._midnight)return d.dataBind([$]),t;r||(c.min=N)}}else c.max=$,c.min=N;d.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_update:function(t){var i,r,a,l,d,c=this,f=c.options,g=f.min,m=f.max,v=f.dates,b=c.timeView,_=c._value,k=s(t,f.parseFormats,f.culture),w=null===k&&null===_||k instanceof Date&&_ instanceof Date;return+k==+_&&w?((d=o.toString(k,f.format,f.culture))!==t&&c.element.val(null===k?t:d),k):(null!==k&&p(k,g)?k=h(k,g,m):u(k,g,m)||(k=null),c._value=k,b.value(k),c.dateView.value(k),k&&(a=c._old,r=b.options,v[0]&&(v=e.grep(v,function(e){return p(k,e)}))[0]&&(b.dataBind(v),l=!0),l||(p(k,g)&&(r.min=g,r.max=n(f.interval),i=!0),p(k,m)&&(c._midnight?(b.dataBind([$]),l=!0):(r.max=m,i||(r.min=N),i=!0))),!l&&(!a&&i||a&&!p(a,k))&&(i||(r.max=$,r.min=N),b.bind())),c.element.val(k?o.toString(k,f.format,f.culture):t),c._updateARIA(k),k)},_keydown:function(e){var t=this,n=t.dateView,i=t.timeView,r=t.element.val(),a=n.popup.visible();e.altKey&&e.keyCode===o.keys.DOWN?t.toggle(a?"time":"date"):a?(n.move(e),t._updateARIA(n._current)):i.popup.visible()?i.move(e):e.keyCode===o.keys.ENTER&&r!==t._oldText?t._change(r):t._typing=!0},_views:function(){var e,t,n,i,r,l,d=this,c=d.element,h=d.options,p=c.attr("id");d.dateView=e=new o.DateView(j({},h,{id:p,anchor:d.wrapper,change:function(){var t,n=e.calendar.value(),i=+n,r=+h.min,o=+h.max;(i===r||i===o)&&((t=new H(+d._value)).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),u(t,r,o)&&(n=t)),d._change(n),d.close("date")},close:function(e){d.trigger(b,L)?e.preventDefault():(c.attr(O,!1),n.attr(R,!0),t.popup.visible()||c.removeAttr(P))},open:function(t){d.trigger(v,L)?t.preventDefault():(c.val()!==d._oldText&&(l=s(c.val(),h.parseFormats,h.culture),d.dateView[l?"current":"value"](l)),n.attr(R,!1),c.attr(O,!0).attr(P,e._dateViewID),d._updateARIA(l))}})),n=e.div,r=h.min.getTime(),d.timeView=t=new a({id:p,value:h.value,anchor:d.wrapper,animation:h.animation,format:h.timeFormat,culture:h.culture,height:h.height,interval:h.interval,min:new H(N),max:new H($),dates:r===h.max.getTime()?[new Date(r)]:[],parseFormats:h.parseFormats,change:function(n,i){n=t._parse(n),h.min>n?(n=new H(+h.min),t.options.min=n):n>h.max&&(n=new H(+h.max),t.options.max=n),i?(d._timeSelected=!0,d._change(n)):(c.val(o.toString(n,h.format,h.culture)),e.value(n),d._updateARIA(n))},close:function(t){d.trigger(b,z)?t.preventDefault():(i.attr(R,!0),c.attr(O,!1),e.popup.visible()||c.removeAttr(P))},open:function(e){t._adjustListWidth(),d.trigger(v,z)?e.preventDefault():(c.val()!==d._oldText&&(l=s(c.val(),h.parseFormats,h.culture),d.timeView.value(l)),i.attr(R,!1),c.attr(O,!0).attr(P,t._timeViewID),t.options.active(t.current()))},active:function(e){c.removeAttr(A),e&&c.attr(A,t._optionID)}}),i=t.ul},_icons:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),t=t.children(),n._dateIcon=t.eq(0).attr({role:"button","aria-controls":n.dateView._dateViewID}),n._timeIcon=t.eq(1).attr({role:"button","aria-controls":n.timeView._timeViewID})},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-datetimepicker"))[0]||(t=(t=i.wrap(E).parent().addClass("k-picker-wrap k-state-default")).wrap(E).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=o.template(this.options.ARIATemplate)},_calculateMidnight:function(e,t){return f(e)+f(t)===0},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr(A),i&&((t=i._cell).attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr(A,t.attr("id")))}});g.plugin(B)}(window.kendo.jQuery),function(e,t){function n(e){return b.test(e)}function r(e){return v.test(e)||/^\d+$/.test(e)}function o(e){return!n(e)&&!r(e)}function a(e,t){var i=parseInt(e,10);return n(e)&&(i=Math.floor(i*t/100)),i}function s(e,n){return function(i,r){var o=this.element.find(i).data(I);return 1==arguments.length?o[e]:(o[e]=r,n&&this.element.data("kendo"+this.options.name).resize(!0),t)}}function l(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,f(t,n===S?c:d),t._resizable=new u.ui.Resizable(e.element,{orientation:n,handle:".k-splitbar-draggable-"+n+"[data-marker="+e._marker+"]",hint:g(t._createHint,t),start:g(t._start,t),max:g(t._max,t),min:g(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:g(t._stop,t)})}var d,c,u=window.kendo,h=u.ui,p=u.keys,f=e.extend,g=e.proxy,m=h.Widget,v=/^\d+(\.\d+)?px$/i,b=/^\d+(\.\d+)?%$/i,_=".kendoSplitter",k="expand",w="collapse",y="contentLoad",x="error",C="layoutChange",S="horizontal",T="vertical",D="click",I="pane",E="k-state-focused",A="k-"+I,O="."+A,R=m.extend({init:function(e,t){var n,i=this;m.fn.init.call(i,e,t),i.wrapper=i.element,n=i.options.orientation.toLowerCase()!=T,i.orientation=n?S:T,i._dimension=n?"width":"height",i._keys={decrease:n?p.LEFT:p.UP,increase:n?p.RIGHT:p.DOWN},i._resizeStep=10,i._marker=u.guid().substring(0,8),i._initPanes(),i.resizing=new l(i),i.element.triggerHandler("init"+_)},events:[k,w,y,x,"resize",C],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var t=this,n=t.options.orientation;t.element.children(".k-splitbar-draggable-"+n).on("keydown"+_,g(t._keydown,t)).on("mousedown"+_,function(e){e.currentTarget.focus()}).on("focus"+_,function(t){e(t.currentTarget).addClass(E)}).on("blur"+_,function(n){e(n.currentTarget).removeClass(E),t.resizing&&t.resizing.end()}).on("mouseenter"+_,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on("mouseleave"+_,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+_,g(t._addOverlays,t)).end().children(".k-splitbar").on("dblclick"+_,g(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(D+_,t._arrowClick(w)).end().children(".k-expand-next, .k-expand-prev").on(D+_,t._arrowClick(k)).end().end(),e(window).on("resize"+_+t._marker,g(t.resize,t,!1)),e(document).on("mouseup"+_+t._marker,g(t._removeOverlays,t))},_detachEvents:function(){var t=this;t.element.children(".k-splitbar-draggable-"+t.orientation).off(_).end().children(".k-splitbar").off("dblclick"+_).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(_),e(window).off(_+t._marker),e(document).off(_+t._marker)},options:{name:"Splitter",orientation:S,panes:[]},destroy:function(){m.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),u.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var n,i=this,r=t.keyCode,o=i.resizing,a=e(t.currentTarget),s=i._keys,l=r===s.increase,d=r===s.decrease;l||d?(t.ctrlKey?(n=a[d?"next":"prev"](),o&&o.isResizing()&&o.end(),n[i._dimension]()?i._triggerAction(w,a[d?"prev":"next"]()):i._triggerAction(k,n)):o&&o.move((d?-1:1)*i._resizeStep,a),t.preventDefault()):r===p.ENTER&&o&&(o.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(n,i){"script"!=i.nodeName.toLowerCase()&&t._initPane(i,e[n])}),this.resize()},_initPane:function(t,n){(t=e(t).attr("role","group").addClass(A)).data(I,n||{}).toggleClass("k-scrollable",!n||!1!==n.scrollable),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var r,o=this;r=(e=o.element.find(e)).data(I),(t=t||r.contentUrl)&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),u.isLocalUrl(t)?i.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){o.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),o.angular("compile",function(){return{elements:e.get()}}),o.trigger(y,{pane:e[0]})},error:function(t,n){o.trigger(x,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n,i=this,r=e(t.target);r.closest(".k-splitter")[0]==i.element[0]&&1===(n=r.children(".k-icon:not(.k-resize-handle)")).length&&(n.is(".k-collapse-prev")?i._triggerAction(w,r.prev()):n.is(".k-collapse-next")?i._triggerAction(w,r.next()):n.is(".k-expand-prev")?i._triggerAction(k,r.prev()):n.is(".k-expand-next")&&i._triggerAction(k,r.next()))},_arrowClick:function(t){var n=this;return function(i){var r,o=e(i.target);o.closest(".k-splitter")[0]==n.element[0]&&(r=o.is(".k-"+t+"-prev")?o.parent().prev():o.parent().next(),n._triggerAction(t,r))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,o=!1!==t.resizable&&!1!==n.resizable,a=t.collapsible,s=t.collapsed,l=n.collapsible,d=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(s||d)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!s&&!d).toggleClass("k-splitbar-static-"+r,!o&&!a&&!l).html(i("k-collapse-prev",a&&!s&&!d)+i("k-expand-prev",a&&s&&!d)+i("k-resize-handle",o)+i("k-collapse-next",l&&!d&&!s)+i("k-expand-next",l&&d&&!s)),o||a||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prevAll(O).first().data(I),r=n.nextAll(O).first().data(I);r&&t._updateSplitBar(n,i,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element?this.element.children(O):e()},_resize:function(){var n,i,r,s,l,d,c,h,p,f=this,g=f.element,m=g.children(O),v=f.orientation==S,b=g.children(".k-splitbar"),_=b.length,k=v?"width":"height",w=g[k]();f.wrapper.addClass("k-splitter-resizing"),0===_?(_=m.length-1,m.slice(0,_).after("<div tabindex='0' class='k-splitbar' data-marker='"+f._marker+"' />"),f._updateSplitBars(),b=g.children(".k-splitbar")):f._updateSplitBars(),b.each(function(){w-=this[v?"offsetWidth":"offsetHeight"]}),n=0,i=e(),m.css({position:"absolute",top:0})[k](function(){var r,s=e(this),l=s.data(I)||{};if(s.removeClass("k-state-collapsed"),l.collapsed)r=l.collapsedSize?a(l.collapsedSize,w):0,s.css("overflow","hidden").addClass("k-state-collapsed");else{if(o(l.size))return i=i.add(this),t;r=a(l.size,w)}return n+=r,r}),w-=n,r=i.length,s=Math.floor(w/r),i.slice(0,r-1).css(k,s).end().eq(r-1).css(k,w-(r-1)*s),l=0,d=v?"height":"width",c=v?"left":"top",h=v?"offsetWidth":"offsetHeight",0===r&&(p=m.filter(function(){return!(e(this).data(I)||{}).collapsed}).last())[k](w+p[0][h]),g.children().css(d,g[d]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[c]=Math.floor(l)+"px",l+=t[h])}),f._detachEvents(),f._attachEvents(),f.wrapper.removeClass("k-splitter-resizing"),u.resize(m),f.trigger(C)},toggle:function(e,n){var i;i=(e=this.element.find(e)).data(I),(n||i.collapsible)&&(1==arguments.length&&(n=i.collapsed!==t&&i.collapsed),i.collapsed=!n,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),this.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var i=this;return n.length&&(i.options.panes.splice(t,0,e),i._initPane(n,e),i._removeSplitBars(),i.resize(!0)),n},append:function(t){t=t||{};var n=this,i=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,i)},insertBefore:function(t,n){n=e(n),t=t||{};var i=this.wrapper.children(".k-pane").index(n),r=e("<div />").insertBefore(e(n));return this._addPane(t,i,r)},insertAfter:function(t,n){n=e(n),t=t||{};var i=this.wrapper.children(".k-pane").index(n),r=e("<div />").insertAfter(e(n));return this._addPane(t,i+1,r)},remove:function(t){t=e(t);var n=this;return t.length&&(u.destroy(t),t.each(function(t,i){n.options.panes.splice(n.wrapper.children(".k-pane").index(i),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.resize(!0)),n},size:s("size",!0),min:s("min"),max:s("max")});h.plugin(R),d={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},c={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},l.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,i=e(t.currentTarget),o=i.prev(),a=i.next(),s=o.data(I),l=a.data(I),d=parseInt(o[0].style[n.positioningProperty],10),c=parseInt(a[0].style[n.positioningProperty],10)+a[0][n.sizingDomProperty]-i[0][n.sizingDomProperty],u=parseInt(n._element.css(n.sizingProperty),10),h=function(e){var t=parseInt(e,10);return(r(e)?t:u*t/100)||0},p=h(s.min),f=h(s.max)||c-d,g=h(l.min),m=h(l.max)||c-d;n.previousPane=o,n.nextPane=a,n._maxPosition=Math.min(c-g,d+f),n._minPosition=Math.max(d+p,c-m)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n,i,r,a,s,l,d,c,h=this,p=e(t.currentTarget),f=h.owner;return f._panes().children(".k-splitter-overlay").remove(),t.keyCode!==u.keys.ESC&&(n=t.position,i=p.prev(),r=p.next(),a=i.data(I),s=r.data(I),l=n-parseInt(i[0].style[h.positioningProperty],10),d=parseInt(r[0].style[h.positioningProperty],10)+r[0][h.sizingDomProperty]-n-p[0][h.sizingDomProperty],c=h._element.children(O).filter(function(){return o(e(this).data(I).size)}).length,(!o(a.size)||c>1)&&(o(a.size)&&c--,a.size=l+"px"),(!o(s.size)||c>1)&&(s.size=d+"px"),f.resize(!0)),!1}}}(window.kendo.jQuery),function(e,t){function n(e){return e[e.length-1]}function r(e){return e instanceof Array?e:[e]}function o(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function a(e,t,n){var i=document.createElement(n||"div");return t&&(i.className=t),e.appendChild(i),i}function s(n,i,r){var o=r.template;n=e(n),i.item||(o=r.placeholderTemplate),this.angular("cleanup",function(){return{elements:[n]}}),n.attr("data-uid",i.item?i.item.uid:"").attr("data-offset-index",i.index).html(o(i.item||{})),n.toggleClass(m,i.current),n.toggleClass(g,i.selected),n.toggleClass("k-first",i.newGroup),n.toggleClass("k-loading-item",!i.item),0!==i.index&&i.newGroup&&e("<div class="+f+"></div>").appendTo(n).html(r.groupTemplate({group:i.group})),i.top!==t&&function(e,t){l.support.browser.msie&&10>l.support.browser.version?e.style.top=t+"px":(e.style.webkitTransform="translateY("+t+"px)",e.style.transform="translateY("+t+"px)")}(n[0],i.top),this.angular("compile",function(){return{elements:[n],data:[{dataItem:i.item,group:i.group,newGroup:i.newGroup}]}})}var l=window.kendo,d=l.ui,c=d.Widget,u=d.DataBoundWidget,h=e.proxy,p="k-virtual-item",f="k-group",g="k-state-selected",m="k-state-focused",v="k-state-hover",b="change",_="click",k="listBound",w="itemChange",y="activate",x="deactivate",C=".VirtualList",S=u.extend({init:function(t,n){var i=this;i._listCreated=!1,i._fetching=!1,i._filter=!1,c.fn.init.call(i,t,n),i.options.itemHeight||(i.options.itemHeight=function(){var t,n=e('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>');return n.css({position:"absolute",left:"-200000px",visibility:"hidden"}),n.appendTo(document.body),t=parseFloat(l.getComputedStyles(n.find(".k-item")[0],["line-height"])["line-height"]),n.remove(),t}()),n=i.options,i.element.addClass("k-list k-virtual-list").attr("role","listbox"),i.content=i.element.wrap("<div unselectable='on' class='k-virtual-content'></div>").parent(),i.wrapper=i.content.wrap("<div class='k-virtual-wrap'></div>").parent(),i.header=i.content.before("<div class='k-group-header'></div>").prev(),i.element.on("mouseenter"+C,"li:not(.k-loading-item)",function(){e(this).addClass(v)}).on("mouseleave"+C,"li",function(){e(this).removeClass(v)}),i._values=r(i.options.value),i._selectedDataItems=[],i._selectedIndexes=[],i._rangesList={},i._activeDeferred=null,i._promisesList=[],i._optionID=l.guid(),i.setDataSource(n.dataSource),i.content.on("scroll"+C,l.throttle(function(){i._renderItems()},n.delay)),i._selectable()},options:{name:"VirtualList",autoBind:!0,delay:100,height:null,listScreens:4,threshold:.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:!1,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:group#",fixedGroupTemplate:"fixed header template",valueMapper:null},events:[b,_,k,w,y,x],setOptions:function(e){c.fn.setOptions.call(this,e),this._selectProxy&&!1===this.options.selectable?this.element.off(_,"."+p,this._selectProxy):!this._selectProxy&&this.options.selectable&&this._selectable(),this.refresh()},items:function(){return e(this._items)},destroy:function(){this.wrapper.off(C),this.dataSource.unbind(b,this._refreshHandler),c.fn.destroy.call(this)},setDataSource:function(t){var n,i=this,r=t||{};r=e.isArray(r)?{data:r}:r,r=l.data.DataSource.create(r),i.dataSource?(i.dataSource.unbind(b,i._refreshHandler),i.dataSource.unbind(b,i._rangeChangeHandler),n=i.value(),i.value([]),i.mute(function(){i.value(n)})):(i._refreshHandler=e.proxy(i.refresh,i),i._rangeChangeHandler=e.proxy(i.rangeChange,i)),i.dataSource=r.bind(b,i._refreshHandler).bind(b,i._rangeChangeHandler),0!==i.dataSource.view().length?i.refresh():i.options.autoBind&&i.dataSource.fetch()},rangeChange:function(){var e=this,t=e.dataSource.page();e.isBound()&&!0===e._rangeChange&&e._lastPage!==t&&(e._lastPage=t,e.trigger(k))},refresh:function(e){var t,n=this,i=e&&e.action;n._mute||(n._fetching?n._renderItems&&n._renderItems(!0):(n._filter&&n.focus(0),n._createList(),i||!n._values.length||n._filter?(n._lastPage=n.dataSource.page(),n._listCreated=!0,n.trigger(k)):n.value(n._values,!0).done(function(){n._lastPage=n.dataSource.page(),n._listCreated=!0,n.trigger(k)})),"itemchange"===i&&(t=function(e,t){var n,i,r,o=t.length,a=[];for(i=0;e.length>i;i++)for(n=e[i],r=0;o>r;r++)n===t[r]&&a.push({index:i,item:n});return a}(n._selectedDataItems,e.items)).length&&n.trigger("selectedItemChange",{items:t}),n._fetching=!1)},removeAt:function(e){return this._selectedIndexes.splice(e,1),this._values.splice(e,1),{position:e,dataItem:this._selectedDataItems.splice(e,1)[0]}},setValue:function(e){this._values=r(e)},value:function(n,i){var o=this;return n===t?o._values.slice():(n=r(n),"multiple"===o.options.selectable&&o.select().length&&n.length&&o.select(-1),o._valueDeferred&&"resolved"!==o._valueDeferred.state()||(o._valueDeferred=e.Deferred()),n.length||o.select(-1),o._values=n,(o.isBound()&&!o._mute||i)&&o._prefetchByValue(n),o._valueDeferred)},_prefetchByValue:function(e){var n,i,a,s=this,l=s._dataView,d=s._valueGetter,c=[];for(i=0;e.length>i;i++)for(a=0;l.length>a;a++)(n=l[a].item)&&(o(n)?e[i]===n:e[i]===d(n))&&c.push(a);if(c.length===e.length)return s._values=[],s.select(c),t;if("function"!=typeof s.options.valueMapper)throw Error("valueMapper is not provided");s.options.valueMapper({value:"multiple"===this.options.selectable?e:e[0],success:function(e){s._values=[],s._selectedIndexes=[],s._selectedDataItems=[],(e=r(e)).length||(e=[-1]),s.select(e)}})},deferredRange:function(t){var n=this.dataSource,i=this.itemCount,r=this._rangesList,o=e.Deferred(),a=[],s=Math.floor(t/i)*i,l=Math.ceil(t/i)*i,d=l===s?[l]:[s,l];return e.each(d,function(t,o){var s,l=o+i,d=r[o];d&&d.end===l?s=d.deferred:(s=e.Deferred(),r[o]={end:l,deferred:s},n._multiplePrefetch(o,i,function(){s.resolve()})),a.push(s)}),e.when.apply(e,a).then(function(){o.resolve()}),o},prefetch:function(t){var n=this,i=this.itemCount,r=!n._promisesList.length;return n._activeDeferred||(n._activeDeferred=e.Deferred(),n._promisesList=[]),e.each(t,function(e,t){var r=Math.floor(t/i)*i;n._promisesList.push(n.deferredRange(r))}),r&&e.when.apply(e,n._promisesList).done(function(){n._activeDeferred.resolve(),n._activeDeferred=null,n._promisesList=[]}),n._activeDeferred},_findDataItem:function(e){var t,n,i=this.dataSource.view();if("group"===this.options.type)for(n=0;i.length>n;n++){if(!(e>=(t=i[n].items).length))return t[e];e-=t.length}return i[e]},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollTo:function(e){this.content.scrollTop(e)},scrollToIndex:function(e){this.scrollTo(e*this.options.itemHeight)},focus:function(i){var r,o,a,s,l,d,c=this.options.itemHeight,u=this._optionID,h=!0;if(i===t)return(s=this.element.find("."+m)).length?s:null;if("function"==typeof i)for(a=this.dataSource.flatView(),l=0;a.length>l;l++)if(i(a[l])){i=l;break}return i instanceof Array&&(i=n(i)),isNaN(i)?(r=e(i),o=parseInt(e(r).attr("data-offset-index"),10)):(o=i,r=this._getElementByIndex(o)),-1===o?(this.element.find("."+m).removeClass(m),this._focusedIndex=t,t):(r.length?(r.hasClass(m)&&(h=!1),this._focusedIndex!==t&&((s=this._getElementByIndex(this._focusedIndex)).removeClass(m).removeAttr("id"),h&&this.trigger(x)),this._focusedIndex=o,r.addClass(m).attr("id",u),"top"===(d=this._getElementLocation(o))?this.scrollTo(o*c):"bottom"===d?this.scrollTo(o*c+c-this.screenHeight):"outScreen"===d&&this.scrollTo(o*c),h&&this.trigger(y)):(this._focusedIndex=o,this.items().removeClass(m),this.scrollToIndex(o)),t)},focusIndex:function(){return this._focusedIndex},first:function(){this.scrollTo(0),this.focus(0)},last:function(){var e=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight),this.focus(e)},prev:function(){var e,n=this._focusedIndex;return!isNaN(n)&&n>0?(n-=1,this.focus(n),(e=this.focus())&&e.hasClass("k-loading-item")&&(n+=1,this.focus(n)),n):t},next:function(){var e,n=this._focusedIndex,i=this.dataSource.total()-1;return!isNaN(n)&&i>n?(n+=1,this.focus(n),(e=this.focus())&&e.hasClass("k-loading-item")&&(n-=1,this.focus(n)),n):t},select:function(e){var i,r,o,a=this,s="multiple"!==a.options.selectable,l=!!a._activeDeferred,d=[];return e===t?a._selectedIndexes.slice():(i=a._getIndecies(e),a._filter&&!s&&a._deselectFiltered(i)||!i.length||s&&!a._filter&&n(i)===n(this._selectedIndexes)||(d=a._deselect(i),s&&(a._activeDeferred=null,l=!1,i.length&&(i=[n(i)])),o=function(){var e=a._select(i);a.focus(i),(e.length||d.length)&&a.trigger(b,{added:e,removed:d}),a._valueDeferred&&a._valueDeferred.resolve()},r=a.prefetch(i),l||(r?r.done(o):o())),t)},isBound:function(){return this._listCreated},mute:function(e){this._mute=!0,h(e(),this),this._mute=!1},filter:function(e){return e===t?this._filter:(this._filter=e,this._rangeChange=!0,t)},skipUpdate:e.noop,_getElementByIndex:function(t){return this.items().filter(function(n,i){return t===parseInt(e(i).attr("data-offset-index"),10)})},_clean:function(){this.result=t,this._lastScrollTop=t,this._lastPage=t,e(this.heightContainer).remove(),this.heightContainer=t,this.element.empty()},_height:function(){var e=!!this.dataSource.view().length,t=this.options.height,n=this.options.itemHeight,i=this.dataSource.total();return e?t/n>i&&(t=i*n):t=0,t},_screenHeight:function(){var e=this._height();this.content.height(e),this.screenHeight=e},_getElementLocation:function(e){var t=this.content.scrollTop(),n=this.screenHeight,i=this.options.itemHeight,r=e*i,o=r+i,a=t+n;return r===t-i||o>t&&t>r?"top":r===a||a>r&&o>a?"bottom":r>=t&&t+(n-i)>=r?"inScreen":"outScreen"},_templates:function(){var e,t={template:this.options.template,placeholderTemplate:this.options.placeholderTemplate,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(e in t)"function"!=typeof t[e]&&(t[e]=l.template(t[e]));this.templates=t},_generateItems:function(e,t){for(var n,i=[],r=this.options.itemHeight+"px";t-- >0;)(n=document.createElement("li")).tabIndex=-1,n.className=p+" k-item",n.setAttribute("role","option"),n.style.height=r,n.style.minHeight=r,e.appendChild(n),i.push(n);return i},_saveInitialRanges:function(){var t,n=this.dataSource._ranges,i=e.Deferred();for(i.resolve(),this._rangesList={},t=0;n.length>t;t++)this._rangesList[n[t].start]={end:n[t].end,deferred:i}},_createList:function(){var t=this,n=t.content.get(0),i=t.options,r=t.dataSource;r.total(),t._listCreated&&t._clean(),t._saveInitialRanges(),t._screenHeight(),t._buildValueGetter(),t.itemCount=function(e,t,n){return Math.ceil(e*t/n)}(t.screenHeight,i.listScreens,i.itemHeight),t.itemCount>r.total()&&(t.itemCount=r.total()),t._templates(),t._items=t._generateItems(t.element[0],t.itemCount),t._setHeight(i.itemHeight*r.total()),t.options.type=(r.group()||[]).length?"group":"flat","flat"===t.options.type?t.header.hide():t.header.show(),t.getter=t._getter(function(){t._renderItems(!0)}),t._onScroll=function(e,n){var i=t._listItems(t.getter);return t._fixedHeader(e,i(e,n))},t._renderItems=t._whenChanged(function(e,t){return function(n){return t(e.scrollTop,n)}}(n,t._onScroll),function(e){return function(t,n){return e(t.items,t.index,n),t}}(t._reorderList(t._items,e.proxy(s,t)))),t._renderItems(),t._calculateGroupPadding(t.screenHeight)},_setHeight:function(e){var t,n,i=this.heightContainer;if(i?t=i.offsetHeight:i=this.heightContainer=a(this.content[0],"k-height-container"),e!==t)for(i.innerHTML="";e>0;)n=Math.min(e,25e4),a(i).style.height=n+"px",e-=n},_getter:function(){var e=null,t=this.dataSource,n=t.skip(),i=this.options.type,r=this.itemCount,o={};return function(a,s){var l,d,c,u,h,p,f,g,m=this;if(t.inRange(s,r)){if(n!==s&&(m._mute=!0,m._fetching=!0,m._rangeChange=!0,t.range(s,r),n=s,m._rangeChange=!1,m._fetching=!1,m._mute=!1),"group"===i){if(!o[s])for(d=o[s]=[],u=0,h=(c=t.view()).length;h>u;u++)for(f=0,g=(p=c[u]).items.length;g>f;f++)d.push({item:p.items[f],group:p.value});l=o[s][a-s]}else l=t.view()[a-s];return l}return e!==s&&(e=s,n=s,m._fetching=!0,m._getterDeferred&&m._getterDeferred.reject(),m._getterDeferred=m.deferredRange(s),m._getterDeferred.then(function(){var e=m._indexConstraint(m.content[0].scrollTop);m._getterDeferred=null,e>=s&&s+r>=e&&(m._fetching=!0,m._rangeChange=!0,t.range(s,r),m._rangeChange=!1)})),null}},_fixedHeader:function(e,t){var n,i=this.currentVisibleGroup,r=this.options.itemHeight,o=Math.floor((e-t.top)/r),a=t.items[o];return a&&a.item&&(n=a.group)!==i&&(this.header[0].innerHTML=n||"",this.currentVisibleGroup=n),t},_itemMapper:function(e,t,n){var i,r=this.options.type,a=this.options.itemHeight,s=this._focusedIndex,l=!1,d=!1,c=!1,u=null,h=this._valueGetter;if("group"===r&&(e&&(c=0===t||this._currentGroup&&this._currentGroup!==e.group,this._currentGroup=e.group),u=e?e.group:null,e=e?e.item:null),n.length&&e)for(i=0;n.length>i;i++)if(o(e)?n[i]===e:n[i]===h(e)){n.splice(i,1),l=!0;break}return s===t&&(d=!0),{item:e||null,group:u,newGroup:c,selected:l,current:d,index:t,top:t*a}},_range:function(e){var t,n,i,r=this.itemCount,o=this._values.slice(),a=[];for(this._view={},this._currentGroup=null,n=e,i=e+r;i>n;n++)t=this._itemMapper(this.getter(n,e),n,o),a.push(t),this._view[t.index]=t;return this._dataView=a,a},_getDataItemsCollection:function(e,t){var n=this._range(this._listIndex(e,t));return{index:n.length?n[0].index:0,top:n.length?n[0].top:0,items:n}},_listItems:function(){var t=this.screenHeight,n=function(e,t){var n=(e.listScreens-1-e.threshold)*t,i=e.threshold*t;return function(e,t,r){return t>r?n>t-e.top:0===e.top||t-e.top>i}}(this.options,t);return e.proxy(function(e,t){var i=this.result,r=this._lastScrollTop;return!t&&i&&n(i,e,r)||(i=this._getDataItemsCollection(e,r)),this._lastScrollTop=e,this.result=i,i},this)},_whenChanged:function(e,t){var n;return function(i){var r=e(i);r!==n&&(n=r,t(r,i))}},_reorderList:function(t,n){var i=this,r=t.length,o=-1/0;return n=e.proxy(function(t,n){return function(i,r){for(var o=0,a=i.length;a>o;o++)t(i[o],r[o],n),r[o].item&&(this.trigger(w,{item:e(i[o]),data:r[o].item,ns:l.ui}),r[o].index===this._selectedIndex&&this.select(this._selectedIndex))}}(n,this.templates),this),function(e,a,s){var l,d,c=a-o;s||Math.abs(c)>=r?(l=t,d=e):(l=function(e,t){var n;return t>0?(n=e.splice(0,t),e.push.apply(e,n)):(n=e.splice(t,-t),e.unshift.apply(e,n)),n}(t,c),d=c>0?e.slice(-c):e.slice(0,-c)),n(l,d,i._listCreated),o=a}},_bufferSizes:function(){var e=this.options;return function(e,t,n){return{down:e*n,up:e*(t-1-n)}}(this.screenHeight,e.listScreens,e.oppositeBuffer)},_indexConstraint:function(e){var t=this.itemCount,n=this.options.itemHeight,i=this.dataSource.total();return Math.min(Math.max(i-t,0),Math.max(0,Math.floor(e/n)))},_listIndex:function(e,t){var n,i=this._bufferSizes();return n=e-(e>t?i.down:i.up),this._indexConstraint(n)},_selectable:function(){this.options.selectable&&(this._selectProxy=e.proxy(this,"_clickHandler"),this.element.on(_+C,"."+p,this._selectProxy))},_getIndecies:function(e){var t,n,r=[];if("function"==typeof e)for(t=this.dataSource.flatView(),n=0;t.length>n;n++)if(e(t[n])){r.push(n);break}return"number"==typeof e&&r.push(e),e instanceof i&&(e=parseInt(e.attr("data-offset-index"),10),isNaN(e)||r.push(e)),e instanceof Array&&(r=e),r},_deselect:function(n){var i,r,o,a,s,l,d=[],c=this._selectedIndexes,u=0,h=this.options.selectable,p=0;if(-1===n[u]){for(s=0;c.length>s;s++)r=c[s],this._getElementByIndex(r).removeClass(g),d.push({index:r,position:s,dataItem:this._selectedDataItems[s]});return this._values=[],this._selectedDataItems=[],this._selectedIndexes=[],n.splice(0,n.length),d}if(!0===h)i=n[u],(r=c[u])!==t&&i!==r&&(this._getElementByIndex(r).removeClass(g),d.push({index:r,position:u,dataItem:this._selectedDataItems[u]}),this._values=[],this._selectedDataItems=[],this._selectedIndexes=[]);else if("multiple"===h)for(l=0;n.length>l;l++)if((r=c[u=e.inArray(n[l],c)])!==t){if(!(a=this._getElementByIndex(r)).hasClass("k-state-selected"))continue;a.removeClass(g),this._values.splice(u,1),this._selectedIndexes.splice(u,1),o=this._selectedDataItems.splice(u,1)[0],n.splice(l,1),d.push({index:r,position:u+p,dataItem:o}),p++,l--}return d},_deselectFiltered:function(t){for(var n,i,r,o,a=this.element[0].children,s=this._values,l=[],d=0;t.length>d;d++){for(r=-1,i=t[d],n=this._valueGetter(this._view[i].item),o=0;s.length>o;o++)if(n==s[o]){r=o;break}r>-1&&(l.push(this.removeAt(r)),e(a[i]).removeClass("k-state-selected"))}return!!l.length&&(this.trigger("change",{added:[],removed:l}),!0)},_select:function(t){var n,i,r=this,a="multiple"!==this.options.selectable,s=this.dataSource,l=this.itemCount,d=this._valueGetter,c=[];return a&&(r._selectedIndexes=[],r._selectedDataItems=[],r._values=[]),i=s.skip(),e.each(t,function(e,t){var a=((l>t?1:Math.floor(t/l)+1)-1)*l;r.mute(function(){s.range(a,l),n=r._findDataItem([t-a]),r._selectedIndexes.push(t),r._selectedDataItems.push(n),r._values.push(o(n)?n:d(n)),c.push({index:t,dataItem:n}),r._getElementByIndex(t).addClass(g),s.range(i,l)})}),c},_clickHandler:function(t){var n=e(t.currentTarget);!t.isDefaultPrevented()&&n.attr("data-uid")&&this.trigger(_,{item:n})},_buildValueGetter:function(){this._valueGetter=l.getter(this.options.dataValueField)},_calculateGroupPadding:function(e){var t=this.items().first(),n=this.header,i=0;n[0]&&"none"!==n[0].style.display&&("auto"!==e&&(i=l.support.scrollbar()),i+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("right"),10),n.css("padding-right",i))}});l.ui.VirtualList=S,l.ui.plugin(S)}(window.kendo.jQuery),function(e){function t(e,t){var n=[];return function e(i,r){var o,a;if(r=r[t])for(o=n[i]=n[i]||[],a=0;r.length>a;a++)o.push(r[a]),e(i+1,r[a])}(0,e),n}function n(){return x.support.cssBorderSpacing?"":'cellspacing="0"'}function i(t,i){return t.length?"<table "+n()+' class="'+e.trim("k-scheduler-table "+(i||""))+'"><tr>'+t.join("</tr><tr>")+"</tr></table>":""}function r(t,n,r){var o,a=[];if(r>0)for(o=0;t>o;o++)a.push("<th>&nbsp;</th>");return n&&a.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>r?e():e('<div class="k-scheduler-times">'+i(a)+"</div>")}function o(t,n,r){var o,a,s,l,d,c,u,h,p,f,g=[];for(a=0;t.length>a;a++){for(l=[],d=n/(s=t[a]).length,o=0;s.length>o;o++)c=s[o],l.push('<th colspan="'+(c.colspan||d)+'" class="'+(c.className||"")+'">'+c.text+"</th>");g.push(l.join(""))}if(u=[],r){for(h=t[t.length-1],p=[],f=r.cellContent,o=0;h.length>o;o++)p.push('<td class="'+(h[o].className||"")+'">'+(f?f(o):"&nbsp;")+"</th>");u.push(p.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+i(g)+function(e,t){return e.length?"<div style='position:relative'>"+i(e,t)+"</div>":""}(u,"k-scheduler-header-all-day")+"</div></div>")}function a(t,n){var r,o,a,s,l,d=Array(n).join().split(","),c=[];for(o=0;t.length>o;o++)for(s=n/(a=t[o]).length,r=0;a.length>r;r++)l=a[r].className||"",a[r].allDay&&(l="k-scheduler-times-all-day"),d[s*r]+='<th class="'+l+'" rowspan="'+s+'">'+a[r].text+"</th>";for(r=0;n>r;r++)c.push(d[r]);return 1>n?e():e('<div class="k-scheduler-times">'+i(c)+"</div>")}function s(){return e('<div class="k-scheduler-content"><table '+n()+' class="k-scheduler-table"/></div>')}function l(e){return{start:e.start,end:e.end}}function d(e){var t,n,i,r,o,a,s,d=[];for(t=0;e.length>t;t++){for(i=l(n=e[t]),r=null,o=0,a=d.length;a>o;o++)if(s=i.start>d[o].end,d[o].start>i.start||s){r=d[o],i.end>r.end&&(r.end=i.end);break}r||(r={start:i.start,end:i.end,events:[]},d.push(r)),r.events.push(n)}return d}function c(e,t,n,i){var r,o,a,s,l=t[0];if(l){for(r=[],o=l.dataSource.view(),a=0;o.length>a;a++)(s={text:i({text:x.htmlEncode(x.getter(l.dataTextField)(o[a])),color:x.getter(l.dataColorField)(o[a]),field:l.field,title:l.title,name:l.name,value:x.getter(l.dataValueField)(o[a])}),className:"k-slot-cell"})[e]=c(e,t.slice(1),n,i),r.push(s);return r}return n}function u(e){e.className=e.className.replace(y,"")+" k-state-selected"}var h,p,f,g,m,v,b,_,k,w,y,x=window.kendo,C=x.ui,S=C.Widget,T=x.keys,D=Math;x.ui.scheduler={},h=x.Class.extend({init:function(e){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[]},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,n){var i=new m(e,t,this._index,n.length);return n.push(i),i},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,n){var i,r,o,a,s,l,d=x.support.browser;for(i=0;n.length>i;i++)for(r=n[i],o=0;o<r.count();o++)if(s=(a=r.at(o)).offsetWidth,l=a.clientHeight,d.msie&&(l=a.clientHeight-1,s=a.clientWidth),e>=a.offsetLeft&&a.offsetLeft+s>e&&t>=a.offsetTop&&a.offsetTop+l>=t)return a},refresh:function(){var e;for(e=0;this._daySlotCollections.length>e;e++)this._daySlotCollections[e].refresh();for(e=0;this._timeSlotCollections.length>e;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var n,i=this._timeSlotCollections,r=this._startSlot(e,i);return!r.inRange&&e>=r.slot.end&&(r=null),n=r,t>e&&(n=this._endSlot(t,i)),n&&!n.inRange&&n.slot.start>=t&&(n=null),null===r&&null===n?[]:(null===r&&(r={inRange:!0,slot:i[n.slot.collectionIndex].first()}),null===n&&(n={inRange:!0,slot:i[r.slot.collectionIndex].last()}),this._continuousRange(f,i,r,n))},daySlotRanges:function(e,t,n){var i,r=this._daySlotCollections,o=this._startSlot(e,r,n);if(!o.inRange&&e>=o.slot.end&&(o=null),i=o,t>e&&(i=this._endSlot(t,r,n)),i&&!i.inRange&&i.slot.start>=t&&(i=null),null===o&&null===i)return[];if(null===o)do{e+=x.date.MS_PER_DAY,o=this._startSlot(e,r,n)}while(!o.inRange&&e>=o.slot.end);if(null===i)do{t-=x.date.MS_PER_DAY,i=this._endSlot(t,r,n)}while(!i.inRange&&i.slot.start>=t);return this._continuousRange(g,r,o,i)},_continuousRange:function(e,t,n,i){var r,o,a,s,l,d,c=n.slot,u=i.slot,h=c.collectionIndex,p=u.collectionIndex,f=[];for(r=h;p>=r;r++)a=(o=t[r]).first(),s=o.last(),l=!1,d=!1,r==h&&(d=!n.inRange),r==p&&(l=!i.inRange),c.start>a.start&&(a=c),s.start>u.start&&(s=u),p>h&&(r==h?l=!0:r==p?d=!0:l=d=!0),f.push(new e({start:a,end:s,collection:o,head:l,tail:d}));return f},slotRanges:function(e,t){var n=e._startTime||x.date.toUtcTime(e.start),i=e._endTime||x.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(n,i,e.isAllDay):this.timeSlotRanges(n,i)},ranges:function(e,t,n,i){return"number"!=typeof e&&(e=x.date.toUtcTime(e)),"number"!=typeof t&&(t=x.date.toUtcTime(t)),n?this.daySlotRanges(e,t,i):this.timeSlotRanges(e,t)},_startCollection:function(e,t){var n,i;for(n=0;t.length>n;n++)if((i=t[n]).startInRange(e))return i;return null},_endCollection:function(e,t,n){var i,r;for(i=0;t.length>i;i++)if((r=t[i]).endInRange(e,n))return r;return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var n=t?-1:1,i=this._getCollections(e.isDaySlot)[e.collectionIndex+n];return i?i[t?"last":"first"]():void 0},firstSlot:function(){return this._getCollections(this.daySlotCollectionCount())[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var n=this;return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,function(e,i,r){return t||e||0!==r||!n.daySlotCollectionCount()?void 0:n._daySlotCollections[0].at(i)})},downSlot:function(e,t){var n=this;return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,function(e,i,r){return!t&&e&&n.timeSlotCollectionCount()?n._timeSlotCollections[r].at(0):void 0})},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var n,i=e.index,r=e.isDaySlot,o=e.collectionIndex;return r?i+=t:o+=t,(n=this._getCollections(r)[o])?n.at(i):void 0},_verticalSlot:function(e,t,n){var i,r=e.index,o=e.isDaySlot,a=e.collectionIndex,s=this._getCollections(o);return(e=n(o,a,r))?e:(o?a+=t:r+=t,(i=s[a])?i.at(r):void 0)},_collection:function(e,t){return(t?this._daySlotCollections:this._timeSlotCollections)[e]},_startSlot:function(e,t,n){var i,r=this._startCollection(e,t),o=!0;return r||(r=t[0],o=!1),(i=r.slotByStartDate(e,n))||(i=r.first(),o=!1),{slot:i,inRange:o}},_endSlot:function(e,t,n){var i,r=this._endCollection(e,t,n),o=!0;return r||(r=t[t.length-1],o=!1),(i=r.slotByEndDate(e,n))||(i=r.last(),o=!1),{slot:i,inRange:o}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),p=x.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),f=p.extend({innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},outerRect:function(e,t,n){return this._rect("offset",e,t,n)},_rect:function(e,t,n,i){var r,o,a,s,l,d,c,u,h=this.start,p=this.end,f=x.support.isRtl(h.element);return"number"!=typeof t&&(t=x.date.toUtcTime(t)),"number"!=typeof n&&(n=x.date.toUtcTime(n)),i?(r=h.offsetTop,o=p.offsetTop+p[e+"Height"],f?(a=p.offsetLeft,s=h.offsetLeft+h[e+"Width"]):(a=h.offsetLeft,s=p.offsetLeft+p[e+"Width"])):(0>(l=t-h.start)&&(l=0),d=h.end-h.start,r=h.offsetTop+h[e+"Height"]*l/d,0>(c=p.end-n)&&(c=0),u=p.end-p.start,o=p.offsetTop+p[e+"Height"]-p[e+"Height"]*c/u,f?(a=Math.round(p.offsetLeft+p[e+"Width"]*c/u),s=Math.round(h.offsetLeft+h[e+"Width"]-h[e+"Width"]*l/d)):(a=Math.round(h.offsetLeft+h[e+"Width"]*l/d),s=Math.round(p.offsetLeft+p[e+"Width"]-p[e+"Width"]*c/u))),{top:r,bottom:o,left:0===a?a:a+1,right:s}},innerRect:function(e,t,n){return this._rect("client",e,t,n)}}),g=p.extend({innerWidth:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0,o=n!==i?"offsetWidth":"clientWidth";for(e=n;i>=e;e++)r+=t.at(e)[o];return r}}),m=x.Class.extend({init:function(e,t,n,i){this._slots=[],this._events=[],this._start=x.date.toUtcTime(e),this._end=x.date.toUtcTime(t),this._groupIndex=n,this._collectionIndex=i},refresh:function(){for(var e=0;this._slots.length>e;e++)this._slots[e].refresh()},startInRange:function(e){return e>=this._start&&this._end>e},endInRange:function(e,t){var n=t?this._end>e:this._end>=e;return e>=this._start&&n},slotByStartDate:function(e){var t,n,i=e;for("number"!=typeof i&&(i=x.date.toUtcTime(e)),t=0;this._slots.length>t;t++)if((n=this._slots[t]).startInRange(i))return n;return null},slotByEndDate:function(e,t){var n,i,r=e;if("number"!=typeof r&&(r=x.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(n=0;this._slots.length>n;n++)if((i=this._slots[n]).endInRange(r))return i;return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,n,i){var r=new b(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},addDaySlot:function(e,t,n,i){var r=new _(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),v=x.Class.extend({init:function(e,t,n,i,r,o){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=n,this.element=e,this.groupIndex=i,this.collectionIndex=r,this.index=o,this.isDaySlot=!1},startDate:function(){return x.timezone.toLocalDate(this.start)},endDate:function(){return x.timezone.toLocalDate(this.end)},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(){return this.start},endOffset:function(){return this.end}}),b=v.extend({init:function(e,t,n,i,r,o,a){v.fn.init.apply(this,arguments),this.isHorizontal=!!a},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft},offsetX:function(e,t){return this.offsetLeft+t},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.start;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=x.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s},endOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.end;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=x.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s}}),_=v.extend({init:function(e,t,n,i,r,o,a){v.fn.init.apply(this,arguments),this.eventCount=a,this.isDaySlot=!0,this.element.children.length?(this.firstChildHeight=this.element.children[0].offsetHeight+3,this.firstChildTop=this.element.children[0].offsetTop):(this.firstChildHeight=3,this.firstChildTop=0)},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return x.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return x.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e}}),x.ui.SchedulerView=S.extend({init:function(t,n){S.fn.init.call(this,t,n),this._scrollbar=k=k||x.support.scrollbar(),this._isRtl=x.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=x.guid(),this._resourcesForGroups(),this._selectedSlots=[]},_isMobile:function(){var e=this.options;return!0===e.mobile&&x.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return!0===e.mobile&&x.support.mobileOS&&!x.support.mobileOS.tablet||"phone"===e.mobile},_addResourceView:function(){var e=new h(this.groups.length);return this.groups.push(e),e},dateForTitle:function(){return x.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},shortDateForTitle:function(){return x.format(this.options.selectedShortDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var n=this[t?"prevGroupSlot":"nextGroupSlot"](e.start,e.groupIndex,e.isAllDay);return n&&(e.groupIndex+=t?-1:1),n},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,n,i){var r,o,a=i?"leftSlot":"rightSlot",s=t[0].start,l=t[t.length-1].end,d=this.groups[e.groupIndex];return n||(r=this._normalizeHorizontalSelection(e,t,i))&&(s=l=r),s=d[a](s),l=d[a](l),n||this._isVerticallyGrouped()||s&&l||(s=l=this._changeGroup(e,i)),s&&l||(o=this._continuousSlot(e,t,i),(o=this._changeGroupContinuously(e,o,n,i))&&(s=l=o)),{startSlot:s,endSlot:l}},_verticalSlots:function(e,t,n,i){var r,o,a=t[0].start,s=t[t.length-1].end,l=this.groups[e.groupIndex];return n||(r=this._normalizeVerticalSelection(e,t,i))&&(a=s=r),a=l[o=i?"upSlot":"downSlot"](a,n),s=l[o](s,n),n||!this._isVerticallyGrouped()||a&&s||(a=s=this._changeGroup(e,i)),{startSlot:a,endSlot:s}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,n){return n?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){var t,n=this.groups[0];this.inRange(e)?n.daySlotCollectionCount()||(e.isAllDay=!1):(t=n.firstSlot(),e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()),this.groups[e.groupIndex]||(e.groupIndex=0)},move:function(e,t,n){var i,r,o,a,s,l,d=!1,c=this.groups[e.groupIndex];if(c.timeSlotCollectionCount()||(e.isAllDay=!0),i=c.ranges(e.start,e.end,e.isAllDay,!1),t===T.DOWN||t===T.UP){if(d=!0,a=t===T.UP,this._updateDirection(e,i,n,a,!0),!(s=this._verticalSlots(e,i,n,a)).startSlot&&!n&&this._changeViewPeriod(e,a,!0))return d}else if((t===T.LEFT||t===T.RIGHT)&&(d=!0,a=t===T.LEFT,this._updateDirection(e,i,n,a,!1),!(s=this._horizontalSlots(e,i,n,a)).startSlot&&!n&&this._changeViewPeriod(e,a,!1)))return d;return d&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward)&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate()):r&&o&&(e.isAllDay=r.isDaySlot,e.start=r.startDate(),e.end=o.endDate()),e.events=[]),d},moveToEventInGroup:function(t,n,i,r){for(var o,a=t._continuousEvents||[],s=r?-1:1,l=a.length,d=r?l-1:0;l>d&&d>-1&&(o=a[d],!(!r&&o.start.startDate()>=n.startDate()||r&&o.start.startDate()<=n.startDate())||(i.length&&(o=a[d+s]),!o||-1!==e.inArray(o.uid,i)));)d+=s;return o},moveToEvent:function(e,t){for(var n,i=e.groupIndex,r=this.groups[i],o=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,a=this.groups.length,s=t?-1:1,l=e.events;a>i&&i>-1&&(n=this.moveToEventInGroup(r,o,l,t),i+=s,(r=this.groups[i])&&!n);)l=[],o=t?r.lastSlot():r.firstSlot(!0);return n&&(e.events=[n.uid],e.start=n.start.startDate(),e.end=n.end.endDate(),e.isAllDay=n.start.isDaySlot,e.groupIndex=n.start.groupIndex),!!n},current:function(e){return void 0===e?this._current:(this._current=e,void(this.content.has(e)&&this._scrollTo(e,this.content[0])))},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t,n,i,r,o,a,s,l=e.isAllDay,d=this.groups[e.groupIndex];for(d.timeSlotCollectionCount()||(l=!0),this._selectedSlots=[],t=d.ranges(e.start,e.end,l,!1),r=0;t.length>r;r++)for(a=(o=t[r]).collection,s=o.start.index;o.end.index>=s;s++)(n=(i=a.at(s)).element).setAttribute("aria-selected",!0),u(n),this._selectedSlots.push({start:i.startDate(),end:i.endDate(),element:n});e.backward&&(n=t[0].start.element),this.current(n)},_selectEvents:function(t){var n,i,r=!1,o=t.events,a=this.groups[t.groupIndex]._continuousEvents||[],s=a.length;if(!o[0]||!a[0])return r;for(i=e(),t.events=[],n=0;s>n;n++)e.inArray(a[n].uid,o)>-1&&(i=i.add(a[n].element),t.events.push(a[n].uid));return i[0]&&(i.addClass("k-state-selected").attr("aria-selected",!0),this.current(i.last()[0]),this._selectedSlots=[],r=!0),r},inRange:function(e){var t=this.startDate(),n=x.date.addDays(this.endDate(),1),i=e.start,r=e.end;return i>=t&&n>i&&r>t&&n>=r},_resourceValue:function(e,t){return e.valuePrimitive&&(t=x.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t,n,i,r,o=this.groupedResources,a={};if(o.length)for(t=e.groupIndex,n=o.length-1;n>=0;n--)i=o[n],r=this._resourceValue(i,i.dataSource.view()[t%i.dataSource.total()]),i.multiple&&(r=[r]),x.setter(i.field)(a,r),t=Math.floor(t/i.dataSource.total());return a},_createResizeHint:function(t,n,i,r){return e('<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>').css({left:t,top:n,width:i,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var n,i=e.offsetTop,r=e.offsetHeight,o=t.scrollTop,a=t.clientHeight,s=i+r;n=o>i?i:s>o+a?a>=r?s-a:i:o,t.scrollTop=n},_shouldInverseResourceColor:function(e){var t=new w(e.color).isDark(),n=this.element.css("color");return t==new w(n).isDark()},_eventTmpl:function(t,n){var i,r=this.options,o=e.extend({},x.Template,r.templateSettings),a=o.paramName,s="",l=typeof t,d={storage:{},count:0};return"function"===l?(d.storage["tmpl"+d.count]=t,s+="#=this.tmpl"+d.count+"("+a+")#",d.count++):"string"===l&&(s+=t),i=x.template(x.format(n,s),o),d.count>0&&(i=e.proxy(i,d.storage)),i},eventResources:function(e){var t,n,i,r,o,a,s,l,d,c,u=[],h=this.options;if(!h.resources)return u;for(t=0;h.resources.length>t;t++)if(i=(n=h.resources[t]).field,null!=(r=x.getter(i)(e)))for(n.multiple||(r=[r]),o=n.dataSource.view(),a=0;r.length>a;a++){for(s=null,l=r[a],n.valuePrimitive||(l=x.getter(n.dataValueField)(l)),d=0;o.length>d;d++)if(o[d].get(n.dataValueField)==l){s=o[d];break}null!==s&&(c=x.getter(n.dataColorField)(s),u.push({field:n.field,title:n.title,name:n.name,text:x.getter(n.dataTextField)(s),value:l,color:c}))}return u},createLayout:function(i){var r,o,a,s,l,d=-1;for(i.rows||(i.rows=[]),r=0;i.rows.length>r;r++)if(i.rows[r].allDay){d=r;break}o=i.rows[d],d>=0&&i.rows.splice(d,1),a=this.columnLevels=t(i,"columns"),s=this.rowLevels=t(i,"rows"),this.table=e("<table "+n()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"/>'),l=s[s.length-1].length,this.table.append(this._topSection(a,o,l)),this.table.append(this._bottomSection(a,s,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,n,i,r,o,a,s=this,l=s.element.find(">.k-scheduler-toolbar"),d=s.element.innerHeight(),c=this._scrollbar,u=0,h=this._isRtl?"left":"right";for(t=0;l.length>t;t++)d-=l.eq(t).outerHeight();s.datesHeader&&(u=s.datesHeader.outerHeight()),s.timesHeader&&s.timesHeader.outerHeight()>u&&(u=s.timesHeader.outerHeight()),s.datesHeader&&s.timesHeader&&(n=s.datesHeader.find("table:first tr"),s.timesHeader.find("tr").height(function(t){e(this).height(n.eq(t).height())})),u&&(d-=u),s.footer&&(d-=s.footer.outerHeight()),i=function(e){var t;return!!e[0].style.height||(t=e.height(),e.height("auto"),t!=e.height()?(e.height(""),!0):(e.height(""),!1))},r=s.content[0],o=x.support.kineticScrollNeeded?0:c,i(s.element)&&(s.content.height(d>2*c?d:2*c+1),s.times.height(r.clientHeight),(a=s.times.find("table")).length&&a.height(s.content.find("table")[0].clientHeight)),r.offsetWidth-r.clientWidth>0?(s.table.addClass("k-scrollbar-v"),s.datesHeader.css("padding-"+h,o-parseInt(s.datesHeader.children().css("border-"+h+"-width"),10))):s.datesHeader.css("padding-"+h,""),r.offsetHeight-r.clientHeight>0||r.clientHeight>s.content.children(".k-scheduler-table").height()?s.table.addClass("k-scrollbar-h"):s.table.removeClass("k-scrollbar-h")},_topSection:function(t,n,i){this.timesHeader=r(t.length,n,i);var a=t[t.length-1].length;return this.datesHeader=o(t,a,n),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,n,i){return this.times=a(n,i),this.content=s(t[t.length-1],n[n.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,n=this;this.content.bind("scroll.kendoSchedulerView",function(){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),n.times.scrollTop(this.scrollTop)}),(t=x.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-event-active").length>0}}))&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),n.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,n,i,r=[],o=this.options.group,a=this.options.resources;if(o=o&&o.resources?o.resources:[],a&&o.length)for(e=0,t=a.length;t>e;e++)for(n=0,i=o.length;i>n;n++)a[e].name===o[n]&&r.push(a[e]);this.groupedResources=r},_createColumnsLayout:function(e,t,n){return c("columns",e,t,n)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t,n){return c("rows",e,t,n)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){var e=this;S.fn.destroy.call(this),e.table&&(x.destroy(e.table),e.table.remove()),e.groups=null,e.table=null,e.content=null,e.times=null,e.datesHeader=null,e.timesHeader=null,e.footer=null,e._resizeHint=null,e._moveHint=null},calendarInfo:function(){return x.getCulture().calendars.standard},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(i=r._collection(n?o.index:o.collectionIndex,!1)).last():(i=r._collection(r.daySlotCollectionCount()-1,!0)).at(o.index):r.timeSlotCollectionCount()?(i=r._collection(n?0:r.timeSlotCollectionCount()-1,n),n?i.last():i.at(o.index)):(i=r._collection(o.collectionIndex,!0)).last()},nextGroupSlot:function(e,t,n){var i,r,o=this.groups[t],a=o.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o.timeSlotCollectionCount()?(r=o.daySlotCollectionCount(),i=o._collection(r?0:a.collectionIndex,r),n?i.first():i.at(a.collectionIndex)):(i=o._collection(0,!0)).at(a.index):o.timeSlotCollectionCount()?(i=o._collection(0,n),n?i.first():i.at(a.index)):(i=o._collection(a.collectionIndex,!0)).first()},_eventOptionsForMove:function(){return{}},_updateEventForResize:function(){},_updateEventForSelection:function(e){return e}}),(w=function(e){var t,n,i,r,o,a=this,s=w.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,(i=t.exec(e))&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)}).prototype={resolveColor:function(e){return"#"==(e=e||"#000").charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),w.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return D.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){return 180>this.percBrightness()}},w.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],w.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},y=/\s*k-state-selected/,e.extend(C.SchedulerView,{createColumns:function(e){return d(e)},createRows:function(e){return d(e)},rangeIndex:l,collidingEvents:function(e,t,n){var i,r,o,a;for(i=e.length-1;i>=0;i--)o=(r=l(e[i])).start,a=r.end,(t>=o&&a>=t||o>=t&&n>=a||o>=t&&n>=o)&&(t>o&&(t=o),a>n&&(n=a));return function(e,t,n){var i,r,o=[];for(i=0;e.length>i;i++)r=l(e[i]),(t>r.start&&r.end>t||r.start>=t&&n>=r.end)&&o.push(e[i]);return o}(e,t,n)},groupEqFilter:function(t){return function(n){if(e.isArray(n)||n instanceof x.data.ObservableArray){for(var i=0;n.length>i;i++)if(n[i]==t)return!0;return!1}return n==t}}})}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return l(t,g(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e,t,n,i){return i=i?n>=e:n>e,e>t&&i}function o(e,t,n,i){var r,o=e._continuousEvents,s=o[o.length-1],l=h(t.start.startDate()).getTime();if(i&&s&&h(s.start.startDate()).getTime()==l){for(r=o.length-1;r>-1&&!(o[r].isAllDay||h(o[r].start.startDate()).getTime()<l);r--);o.splice(r+1,0,{element:n,isAllDay:!0,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})}else o.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})}var a=window.kendo,s=a.ui,l=a.date.setTime,d=s.SchedulerView,c=e.extend,u=e.proxy,h=a.date.getDate,p=a.date.MS_PER_MINUTE,f=a.date.MS_PER_DAY,g=a.date.getMilliseconds,m=".kendoMultiDayView",v=a.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),b=a.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),_=a.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),k=d.extend({init:function(e,t){var n=this;d.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=function(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},_currentTimeMarkerUpdater:function(){var t,n,i,r,o,s,l,d=new Date,c=this.options;for(!1===c.currentTimeMarker.useLocalTimezone&&(t=c.dataSource.options.schema.timezone,c.dataSource&&t&&(n=a.timezone.offset(d,t),d=a.timezone.convert(d,d.getTimezoneOffset(),n))),this.times.find(".k-current-time").remove(),i=c.group&&"horizontal"!=c.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],s=a.date.toUtcTime(d),0===(l=o.timeSlotRanges(s,s+1)).length)return;l[0].collection.slotByStartDate(d)&&e("<div class='k-current-time'></div>").appendTo(this.times).css({top:Math.round(l[0].innerRect(d,new Date(d.getTime()+1),!1).top),height:"1px",right:"1px",left:0})}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;!1!==i&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(u(this._currentTimeMarkerUpdater,n),e))},_updateResizeHint:function(e,t,n,i){var r,o,s,l,c,u,h,p,f,g,m=e.isMultiDay(),v=this.groups[t].ranges(n,i,m,e.isAllDay);for(this._removeResizeHint(),r=0;v.length>r;r++)l=(s=(o=v[r]).startSlot()).offsetWidth,c=s.clientHeight,u=s.offsetTop,m?l=o.innerWidth():(u=(h=o.outerRect(n,i,this.options.snap)).top,c=h.bottom-h.top),p=d.fn._createResizeHint.call(this,s.offsetLeft,u,l,c),this._resizeHint=this._resizeHint.add(p);f="t",g=this.content,m&&(f="M/dd",(g=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(g=this.content)),this._resizeHint.appendTo(g),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),f)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),f))},_updateMoveHint:function(e,t,n){var i,r,o,s,l,d,c,u=e.isMultiDay(),h=this.groups[t],p=a.date.toUtcTime(e.start)+n,f=p+e.duration(),m=h.ranges(p,f,u,e.isAllDay);for(p=a.timezone.toLocalDate(p),f=a.timezone.toLocalDate(f),this._removeMoveHint(),!u&&(0===g(f)||g(f)<g(this.startTime()))&&m.length>1&&m.pop(),i=0;m.length>i;i++)o=(r=m[i]).start,(s=this._createEventElement(e.clone({start:p,end:f}),!u)).addClass("k-event-drag-hint"),l={left:o.offsetLeft+2,top:o.offsetTop},this._isRtl&&(l.left=.1*o.clientWidth+o.offsetLeft+2),u?l.width=r.innerWidth()-4:(d=r.outerRect(p,f,this.options.snap),l.top=d.top,l.height=d.bottom-d.top,l.width=.9*o.clientWidth-4),s.css(l),this._moveHint=this._moveHint.add(s);c=this.content,u&&((c=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(c=this.content)),this._moveHint.appendTo(c)},_slotByPosition:function(e,t){var n,i,r;for(this._isVerticallyGrouped()?(i=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):i=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),i&&(e-=i.left,t-=i.top),e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(n=this.groups[r].daySlotByPosition(e,t))return n;for(i&&(e+=i.left,t+=i.top),e-=(i=this.content.offset()).left,t-=i.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(n=this.groups[r].timeSlotByPosition(e,t))return n;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,d,c,u,h,p,f,m,v,b=this._timeSlotInterval(),_=this.content.find("tr:not(.k-scheduler-header-all-day)");for(_.attr("role","row"),n=_.length,this._isVerticallyGrouped()&&(n=Math.floor(n/e)),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=r*n,s=0,this._isVerticallyGrouped()||(s=i);(r+1)*n>o;){for(l=_[o].children,d=this.groups[i],o%n==0&&(a=g(new Date(+this.startTime()))),c=s*t;(s+1)*t>c;c++)u=l[c],h=c%t,p=d.getTimeSlotCollection(h),f=this._dates[h],v=(m=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate())+a)+b,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),p.addTimeSlot(u,m,v);a+=b,o++}},_daySlotGroups:function(e,t){var n,i,r,o,s,l,d,c,u,h,p;for((n=this.element.find(this._isVerticallyGrouped()?".k-scheduler-header-all-day":".k-scheduler-header-all-day tr")).attr("role","row"),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=this.groups[i].getDaySlotCollection(0),s=n[r].children,l=0,this._isVerticallyGrouped()||(l=i),d=0,c=l*t;(l+1)*t>c;c++)u=s[c],c%t==0&&(d=0),h=this._dates[d],p=Date.UTC(h.getFullYear(),h.getMonth(),h.getDate()),d++,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),o.addDaySlot(u,p,p+a.date.MS_PER_DAY)},_groups:function(){var e,t,n,i=this._groupCount(),r=this._columnCountInResourceView();for(this.groups=[],e=0;i>e;e++){for(t=this._addResourceView(e),n=0;r>n;n++)t.addTimeSlotCollection(this._dates[n],a.date.addDays(this._dates[n],1));this.options.allDaySlot&&t.addDaySlotCollection(this._dates[0],a.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(i,r),this.options.allDaySlot&&this._daySlotGroups(i,r)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:a.date.today(),endTime:a.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:v,allDayEventTemplate:b,dateHeaderTemplate:_,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=c({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>'),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=a.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.allDaySlotTemplate=a.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+m,".k-scheduler-content td",function(n){var i,r;e(this).parent().hasClass("k-scheduler-header-all-day")||((i=t._slotByPosition(n.pageX,n.pageY))&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:c({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}).on("dblclick"+m,".k-scheduler-header-all-day td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:c({},{isAllDay:!0,start:a.date.getDate(i.startDate()),end:a.date.getDate(i.startDate())},n)})),e.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+m,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this,n=0;a.support.mobileOS.android&&(n=5),!1!==t.options.editable.create&&(t._addUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-scheduler-content td",tap:function(n){var i,r;e(n.target).parent().hasClass("k-scheduler-header-all-day")||((i=t._slotByPosition(n.x.location,n.y.location))&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:c({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}}),t._allDayUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-scheduler-header-all-day td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:c({},{isAllDay:!0,start:a.date.getDate(i.startDate()),end:a.date.getDate(i.startDate())},n)})),e.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(a.attr("uid"))}),n.preventDefault()}}))},_layout:function(e){var t,n,i,r=[],o=[],s=this.options,l=this;for(t=0;e.length>t;t++)(n={}).text=l.dateHeaderTemplate({date:e[t]}),a.date.isToday(e[t])&&(n.className="k-today"),r.push(n);return i=this.groupedResources,s.allDaySlot&&o.push({text:s.messages.allDay,allDay:!0,cellContent:function(t){var n=t;return t=i.length&&"vertical"!==l._groupOrientation()?t%e.length:t,l.allDaySlotTemplate({date:e[t],resources:function(){return l._resourceBySlot({groupIndex:n})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,n,i){var r={text:(t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate)({date:e}),className:i?"k-slot-cell":""};o.push(r)}),i.length&&("vertical"===this._groupOrientation()?o=this._createRowsLayout(i,o,this.groupHeaderTemplate):r=this._createColumnsLayout(i,r,this.groupHeaderTemplate)),{columns:r,rows:o}},_footer:function(){var t,n,i,r=this.options;!1!==r.footer&&(t='<div class="k-header k-scheduler-footer">',(n=r.footer.command)&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_forTimeRange:function(e,t,i,r){var o,a,s,d,c,u,h,m,v,b,_,k;for(e=n(e),t=n(t),o=g(e),a=g(t),s=this.options.minorTickCount,c=(d=this.options.majorTick*p)/s||1,h=(u=new Date(+e)).getDate(),v=0,_="",b=f/c,o!=a&&(o>a&&(a+=f),b=(a-o)/c),b=Math.round(b);b>v;v++)_+=i(u,0==(k=v%(d/c)),s-1>k,k===s-1),l(u,c,!1);return a&&(m=g(u),h<u.getDate()&&(m+=f),m>a&&(u=new Date(+t))),r&&(_+=r(u)),_},_content:function(e){var t,n,i,r=this,o=r.options,s=r.startTime(),l=this.endTime(),d=1,c=1,u=e.length,h="",p=this.groupedResources,f=this.slotTemplate,g=this.allDaySlotTemplate,m=!1;for(p.length&&((m="vertical"===r._groupOrientation())?(c=this._rowCountForLevel(this.rowLevels.length-2),o.allDaySlot&&(t=function(t){var n,i,o='<tr class="k-scheduler-header-all-day">',a=function(){return r._resourceBySlot({groupIndex:t})};for(n=0,i=e.length;i>n;n++)o+="<td>"+g({date:e[n],resources:a})+"</td>";return o+"</tr>"})):d=this._columnCountForLevel(this.columnLevels.length-2)),h+="<tbody>",n=function(t,n){var o,s,l,c,h="",p="",g=0;for(h="<tr"+(n?' class="k-middle-row"':"")+">",c=function(e){return function(){return r._resourceBySlot({groupIndex:e})}};d>g;g++)for(o=0,s=u;s>o;o++)p="",a.date.isToday(e[o])&&(p+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(r.options.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(r.options.workDayEnd)||!r._isWorkDay(e[o]))&&(p+=" k-nonwork-hour"),h+="<td"+(""!==p?' class="'+p+'"':"")+">",l=a.date.getDate(e[o]),a.date.setTime(l,a.date.getMilliseconds(t)),h+=f({date:l,resources:c(m?i:g)}),h+="</td>";return h+"</tr>"},i=0;c>i;i++)h+=t?t(i):"",h+=this._forTimeRange(s,l,n);h+="</tbody>",this.content.find("table").append(h)},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_render:function(t){var n,i=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),(n=this.element.find(".k-scheduler-header-all-day td")).length&&(this._allDayHeaderHeight=n.first()[0].clientHeight),i.datesHeader.on("click"+m,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=n.offset(),o=i._slotByPosition(r.left,r.top+n.outerHeight());i.trigger("navigate",{view:"day",date:o.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=g(this.endTime())||f;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(m),e.element&&e.element.off(m),e.footer&&e.footer.remove(),d.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(!1!==e.options.editable.create&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),!1!==e.options.editable.update&&e._editUserEvents.destroy())},inRange:function(e){var t=d.fn.inRange.call(this,e),n=g(this.startTime()),i=g(this.endTime())||a.date.MS_PER_DAY,r=g(e.start),o=g(e.end)||a.date.MS_PER_DAY;return t&&r>=n&&i>=o},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*p},_timeSlotIndex:function(e){var t=this.options;return(g(e)-g(this.startTime()))/(t.majorTick/t.minorTickCount*p)},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var n,r,o=this._dates||[];for(n=0,r=o.length;r>n;n++)if(i(e,a.date.getDate(o[n]),new Date(a.date.getDate(o[n]).getTime()+f-(t?0:1))))return 1*n;return-1},_positionAllDayEvent:function(t,n){var i,r,o,a,s,l,c,u=n.innerWidth(),h=n.start.index,p=n.end.index,f=d.collidingEvents(n.events(),h,p),g=this._headerColumnCount||0,m=h!==p?5:4,v=this._allDayHeaderHeight,b=n.startSlot();for(t.css({left:b.offsetLeft+2,width:u-m}),n.addEvent({slotIndex:h,start:h,end:p,element:t}),f.push({slotIndex:h,start:h,end:p,element:t}),(i=d.createRows(f)).length&&i.length>g&&(this._headerColumnCount=i.length),r=n.start.offsetTop,o=0,a=i.length;a>o;o++)for(l=0,c=(s=i[o].events).length;c>l;l++)e(s[l].element).css({top:r+o*v})},_arrangeColumns:function(e,t,n,i){var r,o,a,s,l,c,u,h,p,f,g,m=i.start;for(e={element:e,slotIndex:m.index,start:t,end:t+n},a=.1*(o=m.clientWidth),l=i.events(),c=d.collidingEvents(l,e.start,e.end),i.addEvent(e),c.push(e),u=(o-a)/(r=d.createColumns(c)).length,h=0,p=r.length;p>h;h++)for(f=0,g=(s=r[h].events).length;g>f;f++)s[f].element[0].style.width=u-4+"px",s[f].element[0].style.left=(this._isRtl?a:0)+m.offsetLeft+h*u+2+"px"},_positionEvent:function(e,t,n){var i=e._startTime||e.start,r=e._endTime||e.end,o=n.innerRect(i,r,!1),a=o.bottom-o.top-2;0>a&&(a=0),t.css({top:o.top,height:a}),this._arrangeColumns(t,o.top,t[0].clientHeight,n)},_createEventElement:function(t,n,r,o){var s,l,d,u,p,m,v=n?this.eventTemplate:this.allDayEventTemplate,b=this.options.editable,_=this._isMobile(),k=b&&!1!==b.destroy&&!_,w=b&&!1!==b.resize,y=h(this.startDate()),x=h(this.endDate()),C=g(this.startTime()),S=g(this.endTime()),T=t._time("start"),D=t._time("end");return C>=S&&(S=g(new Date(this.endTime().getTime()+f-1))),n||t.isAllDay||(x=new Date(x.getTime()+f)),l=t.start,d=t.end,t.isAllDay&&(d=h(t.end)),!i(h(l),y,x)&&!i(d,y,x)||n&&C>T&&D>S?s=!0:h(l)<y||n&&C>T?o=!0:(d>x&&!n||n&&D>S)&&(r=!0),u=this.eventResources(t),t._startTime&&T!==a.date.getMilliseconds(t.start)&&(l=new Date(T),l=a.timezone.apply(l,"Etc/UTC")),t._endTime&&D!==a.date.getMilliseconds(t.end)&&(d=new Date(D),d=a.timezone.apply(d,"Etc/UTC")),p=c({},{ns:a.ns,resizable:w,showDelete:k,middle:s,head:r,tail:o,singleDay:1==this._dates.length,resources:u,inverseColor:!(!u||!u[0])&&this._shouldInverseResourceColor(u[0])},t,{start:l,end:d}),m=e(v(p)),this.angular("compile",function(){return{elements:m,data:[{dataItem:p}]}}),m},_isInTimeSlot:function(e){var t,n=this.startTime(),i=this.endTime(),o=e._startTime||e.start,s=e._endTime||e.end;return g(i)===g(a.date.getDate(i))&&(i=a.date.getDate(i),l(i,f-1)),e._date("end")>e._date("start")&&(s=+e._date("end")+(f-1)),s-=e._date("end"),o-=e._date("start"),i=g(i),(n=g(n))===o&&o===s||r(o,n,i,t=o!==i)||r(s,n,i,t)||r(n,o,s)||r(i,o,s)},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,r=t.lastSlot().end-1,o=a.date.toUtcTime(e.start),s=a.date.toUtcTime(e.end);return(i(o,n,r)||i(s,n,r)||i(n,o,s)||i(r,o,s))&&(!i(s,n,n)||i(s,o,o)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,n;if(this._height!==e&&(this._height=e,(t=this.element.find(".k-scheduler-header-all-day td")).length))for(t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),n=0;this.groups.length>n;n++)this.groups[n].refresh()},_renderEvents:function(e,t){var n,i,r,a,s,l,d,c,u,h,p,g,m,v,b,_=this.datesHeader.find(".k-scheduler-header-wrap > div");for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))if(s=(a=n.isAllDay||n.end.getTime()-n.start.getTime()>=f)&&!this._isVerticallyGrouped()?_:this.content,a)this.options.allDaySlot&&((c=this.groups[t])._continuousEvents||(c._continuousEvents=[]),(d=c.slotRanges(n)).length&&(l=this._createEventElement(n,!a),this._positionAllDayEvent(l,d[0]),o(c,d[0],l,!0),l.appendTo(s)));else if(this._isInTimeSlot(n))for((c=this.groups[t])._continuousEvents||(c._continuousEvents=[]),u=(d=c.slotRanges(n)).length,h=0;u>h;h++)p=d[h],g=n.start,m=n.end,u>1&&(0===h?m=p.end.endDate():h==u-1?g=p.start.startDate():(g=p.start.startDate(),m=p.end.endDate())),v=n.clone({start:g,end:m,_startTime:n._startTime,_endTime:n.endTime}),this._isInTimeSlot(v)&&(b=p.head,(l=this._createEventElement(n,!a,b,p.tail)).appendTo(s),this._positionEvent(v,l,p),o(c,p,l,!1))},render:function(t){var n,r,o,s;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return e.isMultiDay()&&i(t,h(e.start),h(e.end))}).length}))}),o=Math.max.apply(null,r),this._updateAllDayHeaderHeight((o+1)*this._allDayHeaderHeight),s=0;n.length>s;s++)this._renderEvents(n[s],s);this.refreshLayout(),this.trigger("activate")},_eventsByResource:function(e,t,n){var i,r,o,s,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),s=new a.data.Query(e).filter({field:l.field,operator:d.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),n):n.push(s);else n.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,n,i,r){var o=e.isAllDay,a=t[0].start,s=t[t.length-1].end;n&&(r?o||a.index!==s.index||a.collectionIndex!==s.collectionIndex||(e.backward=i):(o&&a.index===s.index||!o&&a.collectionIndex===s.collectionIndex)&&(e.backward=i))},_changeViewPeriod:function(e,n,i){var r,o,a,s;return i?t:(r=n?this.previousDate():this.nextDate(),o=e.start,a=e.end,e.start=new Date(r),e.end=new Date(r),s=e.isAllDay?f:g(a),l(e.start,g(o)),l(e.end,s),this._isVerticallyGrouped()||(e.groupIndex=n?this.groups.length-1:0),e.events=[],!0)}});c(!0,s,{MultiDayView:k,DayView:k.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:k.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var e,t=this.options.date,n=a.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),i=[];for(e=0;7>e;e++)i.push(n),n=a.date.nextDay(n);this._render(i)}}),WorkWeekView:k.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1)},previousDate:function(){var e=a.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);return a.date.previousDay(e)},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek,n=t(e,this.calendarInfo().firstDay,-1),i=t(n,this.options.workWeekStart,1),r=t(i,this.options.workWeekEnd,1),o=[];r>=i;)o.push(i),i=a.date.nextDay(i);this._render(o)}})})}(window.kendo.jQuery),function(e){function t(e){var t,n,i=0;for(t=0,n=e.length;n>t;t++)i+=e[t].items.length;return i}function n(e,t){return e.valuePrimitive&&(t=o.getter(e.dataValueField)(t)),t}function i(e){for(var t,n=0,i=e.length,o=[];i>n;n++)(t=e[n]).groups?(t=r(t.groups),o=o.concat(t)):o=o.concat(r(t.items));return o}function r(e){for(var t=[].concat(e),n=t.shift(),i=[],r=[].push;n;)n.groups?r.apply(t,n.groups):n.items?r.apply(t,n.items):r.call(i,n),n=t.shift();return i}var o=window.kendo,a=o.ui,s=".kendoAgendaView";a.AgendaView=a.SchedulerView.extend({init:function(t,n){a.SchedulerView.fn.init.call(this,t,n),(n=this.options).editable&&(n.editable=e.extend({delete:!0},n.editable,{create:!1,update:!1})),this.title=n.title,this.name="agenda",this._eventTemplate=this._eventTmpl(n.eventTemplate,'<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>'),this._dateTemplate=o.template(n.eventDateTemplate),this._groupTemplate=o.template(n.eventGroupTemplate),this._timeTemplate=o.template(n.eventTimeTemplate),this.element.on("mouseenter"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+s,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(n.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(o.attr("uid"))})},nextDate:function(){return o.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return o.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=o.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")},_layout:function(){var e,t,n,i=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(this._isMobilePhoneView()||i.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"}),(e=this.groupedResources).length){for(t=[],n=0;e.length>n;n++)t.push({text:"",className:"k-scheduler-groupcolumn"});i=t.concat(i)}return{columns:i}},_tasks:function(e){var t,n,i,r,a,s,l,d=[];for(t=0;e.length>t;t++)if(i=(n=e[t]).start,r=n.end,a=(o.date.getDate(r)-o.date.getDate(i))/o.date.MS_PER_DAY+1,(s=n.clone()).startDate=o.date.getDate(i),s.startDate>=this.startDate()&&d.push(s),a>1)for(s.end=o.date.nextDay(i),s.head=!0,l=1;a>l;l++)i=s.end,(s=n.clone()).start=i,s.startDate=o.date.getDate(i),s.end=o.date.nextDay(i),l==a-1?(s.end=new Date(s.start.getFullYear(),s.start.getMonth(),s.start.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),s.tail=!0):(s.isAllDay=!0,s.middle=!0),(o.date.getDate(s.end)<=this.endDate()&&s.start>=this.startDate()||o.date.getDate(s.start).getTime()==this.endDate().getTime())&&d.push(s);return new o.data.Query(d).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var n,i,r,a,s,l,d,c,u,h=[],p=this.options.editable,f=p&&!1!==p.destroy&&!this._isMobile(),g=this._isMobilePhoneView();for(n=0;e.length>n;n++)for(i=e[n].value,r=e[n].items,a=o.date.isToday(i),s=0;r.length>s;s++){if(l=r[s],d=[],c=g?[]:d,0===n&&0===s&&t.length)for(u=0;t.length>u;u++)c.push(o.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[u].rowSpan,this._groupTemplate({value:t[u].text}),t[u].className));0===s&&(g?(c.push(o.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:i}))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+c.join("")+"</tr>")):d.push(o.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',r.length,this._dateTemplate({date:i}),n!=e.length-1||t.length?"":" k-last",t.length?"":" k-first"))),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),d.push(o.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l.clone({start:l._startTime||l.start,end:l.endTime||l.end})),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l.clone({showDelete:f})))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+d.join("")+"</tr>")}return h.join("")},render:function(e){var t,n,r=this.content.find("table").empty(),o=[];e.length>0&&((t=this.groupedResources).length?(o=this._createGroupConfiguration(e,t,null),this._renderGroups(o,r,[])):(o=this._tasks(e),r.append(this._renderTaskGroups(o,[])))),n=this._eventsList=i(o),this._angularItems(r,n),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,t){this.angular("compile",function(){var n=[];return{elements:t.map(function(t){return n.push({dataItem:t}),e.find(".k-task["+o.attr("uid")+"="+t.uid+"]")}),data:n}})},_renderGroups:function(e,t,n){var i,r,o;for(i=0,r=e.length;r>i;i++)(o=n.splice(0)).push(e[i]),e[i].groups?this._renderGroups(e[i].groups,t,o):t.append(this._renderTaskGroups(e[i].items,o))},_createGroupConfiguration:function(e,i,r){var s,l,d,c,u,h,p,f=i[0],g=[],m=f.dataSource.view(),v=this._isMobilePhoneView();for(s=0;m.length>s;s++)l=n(f,m[s]),(d=new o.data.Query(e).filter({field:f.field,operator:a.SchedulerView.groupEqFilter(l)}).toArray()).length&&(c=this._tasks(d),u=r?"":" k-first",s===m.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(u+=" k-last"),h={text:o.getter(f.dataTextField)(m[s]),value:l,rowSpan:0,className:u},i.length>1?(h.groups=this._createGroupConfiguration(d,i.slice(1),h),r&&(r.rowSpan+=h.rowSpan)):(h.items=c,p=t(h.items),v&&(p+=h.items.length),h.rowSpan=p,r&&(r.rowSpan+=p)),g.push(h));return g},selectionByElement:function(t){var n,i,r;return!(t=e(t)).hasClass("k-scheduler-datecolumn")&&this._eventsList.length?(t.is(".k-task")&&(t=t.closest("td")),{index:n=this._isMobile()?(r=t.parent()).parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(r):t.parent().index(),start:(i=this._eventsList[n]).start,end:i.end,isAllDay:i.isAllDay,uid:i.uid}):void 0},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,t){var n,i=!1,r=e.index;return t==o.keys.UP?(r--,i=!0):t==o.keys.DOWN&&(r++,i=!0),i&&(n=this._eventsList[r])&&(e.start=n.start,e.end=n.end,e.isAllDay=n.isAllDay,e.events=[n.uid],e.index=r),i},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(s),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",selectedShortDateFormat:"{0:d} - {1:d}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i;return(i=e)>=t&&n>=i}var n=window.kendo,i=n.ui,r=i.SchedulerView,o=".kendoMonthView",a=e.extend,s=n.date.getDate,l=n.date.MS_PER_DAY,d=n.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),c=n.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),u=n.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');i.MonthView=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.title=n.options.title,n.name="month",n._templates(),n._editable(),n._renderLayout(n.options.date),n._groups()},_updateDirection:function(e,t,n,i,r){var o,a,s,l;n&&(o=t[0].start,a=t[t.length-1].end,s=o.index===a.index,l=o.collectionIndex===a.collectionIndex,(r?s&&l||l:s&&l)&&(e.backward=i))},_changeViewPeriod:function(e,t,i){var r=i?7:1;return t&&(r*=-1),e.start=n.date.addDays(e.start,r),e.end=n.date.addDays(e.end,r),(!i||i&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,n){var i=e.backward?0:t.length-1;return this.groups[e.groupIndex].continuousSlot(t[i].start,n)},_changeGroupContinuously:function(e,t,n,i){var r,o,a,s;return n||(r=e.groupIndex,o=this.groups.length-1,a=this._isVerticallyGrouped(),s=this.groups[r],!t&&a?(t=s[i?"lastSlot":"firstSlot"](),r+=i?-1:1):t&&!a&&(r=i?o:0),(0>r||r>o)&&(r=i?o:0,t=null),e.groupIndex=r),t},_normalizeHorizontalSelection:function(e,t,n){return n?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){return e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=a({},n.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.dayTemplate=n.template(e.dayTemplate,t),this.groupHeaderTemplate=n.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return n.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},shortDateForTitle:function(){return n.format(this.options.selectedShortDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return n.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return n.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var i=this;this._firstDayOfMonth=n.date.firstDayOfMonth(t),this._lastDayOfMonth=n.date.lastDayOfMonth(t),this._startDate=function(e,t){for(var i=t.firstDay,r=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());r.getDay()!=i;)n.date.setTime(r,-1*l);return r}(t,this.calendarInfo()),this.createLayout(this._layout()),this._content(),this.refreshLayout(),this.content.on("click"+o,".k-nav-day,.k-more-events",function(t){var n=e(t.currentTarget).offset(),r=i._slotByPosition(n.left,n.top);t.preventDefault(),i.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&!this._isMobilePhoneView()&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+o,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+o,".k-scheduler-monthview .k-scheduler-content td",function(n){var i,r=e(n.currentTarget).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:a({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+o,".k-scheduler-monthview .k-event",function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault()})},_touchEditable:function(){var t=this,i=0;n.support.mobileOS.android&&(i=5),!1!==t.options.editable.create&&(t._addUserEvents=new n.UserEvents(t.element,{threshold:i,filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(n){var i,r=e(n.target).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:a({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new n.UserEvents(t.element,{threshold:i,filter:".k-scheduler-monthview .k-event",tap:function(i){0===e(i.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(i.target).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault())}}))},selectionByElement:function(t){var n=e(t).offset();return this._slotByPosition(n.left,n.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e,t="<tbody>",n=1,i=this.groupedResources;for(i.length&&this._isVerticallyGrouped()&&(n=this._rowCountForLevel(i.length-1)),e=0;n>e;e++)t+=this._createCalendar(e);t+="</tbody>",this.content.find("table").html(t)},_createCalendar:function(e){var t,i,r,o=this.startDate(),a=[o],s="",l=1,d=this._isVerticallyGrouped(),c=this.groupedResources;for(c.length&&(d||(l=this._columnCountForLevel(c.length-1))),this._slotIndices={},t=0;6>t;t++){for(s+="<tr>",a.push(o),i=7*t,r=0;l>r;r++)s+=this._createRow(o,i,7,d?e:r);o=n.date.addDays(o,7),s+="</tr>"}return this._weekStartDates=a,this._endDate=n.date.previousDay(o),s},_createRow:function(e,t,i,r){var o,a=this,l=a._firstDayOfMonth,d=a._lastDayOfMonth,c=a.dayTemplate,u="",h="",p=function(){return a._resourceBySlot({groupIndex:r})};for(o=0;i>o;o++)u="",n.date.isToday(e)&&(u+="k-today"),n.date.isInDateRange(e,l,d)||(u+=" k-other-month"),h+="<td ",""!==u&&(h+='class="'+u+'"'),h+=">",h+=c({date:e,resources:p}),h+="</td>",a._slotIndices[s(e).getTime()]=t+o,e=n.date.nextDay(e);return h},_layout:function(){var t,n,i,r=this.calendarInfo(),o=function(e,t){return e.slice(t).concat(e.slice(0,t))}(this._isMobile()?r.days.namesShort:r.days.names,r.firstDay),a=e.map(o,function(e){return{text:e}}),s=this.groupedResources;if(s.length)if(this._isVerticallyGrouped()){for(n=[],i=0;6>i;i++)n.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});t=this._createRowsLayout(s,n,this.groupHeaderTemplate)}else a=this._createColumnsLayout(s,a,this.groupHeaderTemplate);return{columns:a,rows:t}},_createEventElement:function(t){var i,r=this.options.editable,o=this._isMobile();return t.showDelete=r&&!1!==r.destroy&&!o,t.resizable=r&&!1!==r.resize&&!o,t.ns=n.ns,t.resources=this.eventResources(t),t.inverseColor=!(!t.resources||!t.resources[0])&&this._shouldInverseResourceColor(t.resources[0]),i=e(this.eventTemplate(t)),this.angular("compile",function(){return{elements:i,data:[{dataItem:t}]}}),i},_isInDateSlot:function(e){var i=this.groups[0],r=i.firstSlot().start,o=i.lastSlot().end-1,a=n.date.toUtcTime(e.start),s=n.date.toUtcTime(e.end);return(t(a,r,o)||t(s,r,o)||t(r,a,s)||t(o,a,s))&&(!t(s,r,r)||t(s,a,a)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[s(e).getTime()]},_positionMobileEvent:function(t,i,o){var a,s,l,d,c,u,h=t.start;t.start.offsetLeft>t.end.offsetLeft&&(h=t.end),s=a=t.start.index,(l=r.collidingEvents(t.events(),a,s)).push({element:i,start:a,end:s}),d=r.createRows(l),(u=(c=t.collection.at(a)).container)||(u=e(n.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',h.offsetTop+h.firstChildTop+h.firstChildHeight-3+"px",h.offsetLeft+"px",h.offsetWidth+"px")),c.container=u,this.content[0].appendChild(u[0])),3>=d.length&&(t.addEvent({element:i,start:a,end:s,groupIndex:h.groupIndex}),o._continuousEvents.push({element:i,uid:i.attr(n.attr("uid")),start:t.start,end:t.end}),u[0].appendChild(i[0]))},_positionEvent:function(t,i,o){var a,s,l,d,c,h,p,f,g,m,v,b,_,k,w=this.options.eventHeight,y=t.start;for(t.start.offsetLeft>t.end.offsetLeft&&(y=t.end),a=t.start.index,s=t.end.index,l=y.eventCount,c=a!==s?5:4,(d=r.collidingEvents(t.events(),a,s)).push({element:i,start:a,end:s}),h=r.createRows(d),p=0,f=Math.min(h.length,l);f>p;p++)for(g=h[p].events,m=y.offsetTop+y.firstChildHeight+p*w+3*p+"px",v=0,b=g.length;b>v;v++)g[v].element[0].style.top=m;if(h.length>l)for(_=a;s>=_;_++){if((k=t.collection.at(_)).more)return;k.more=e(u({ns:n.ns,start:_,end:_,width:k.clientWidth-2,left:k.offsetLeft+2,top:k.offsetTop+k.firstChildHeight+l*w+3*l})),this.content[0].appendChild(k.more[0])}else t.addEvent({element:i,start:a,end:s,groupIndex:y.groupIndex}),i[0].style.width=t.innerWidth()-c+"px",i[0].style.left=y.offsetLeft+2+"px",i[0].style.height=w+"px",o._continuousEvents.push({element:i,uid:i.attr(n.attr("uid")),start:t.start,end:t.end}),i.appendTo(this.content)},_slotByPosition:function(e,t){var n,i,r=this.content.offset();for(e-=r.left,t-=r.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),n=0;this.groups.length>n;n++)if(i=this.groups[n].daySlotByPosition(e,t))return i;return null},_createResizeHint:function(e){var t=e.startSlot().offsetLeft,n=e.start.offsetTop,i=e.innerWidth(),o=e.start.clientHeight-2,a=r.fn._createResizeHint.call(this,t,n,i,o);a.appendTo(this.content),this._resizeHint=this._resizeHint.add(a)},_updateResizeHint:function(e,t,i,r){var o,a;for(this._removeResizeHint(),o=this.groups[t].ranges(i,r,!0,e.isAllDay),a=0;o.length>a;a++)this._createResizeHint(o[a]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(n.toString(n.timezone.toLocalDate(i),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(n.toString(n.timezone.toLocalDate(r),"M/dd"))},_updateMoveHint:function(e,t,i){var r,o,a,s,l,d=n.date.toUtcTime(e.start)+i,c=d+e.duration(),u=this.groups[t].ranges(d,c,!0,e.isAllDay);for(this._removeMoveHint(),r=0;u.length>r;r++)a=(o=u[r]).startSlot(),s=o.endSlot(),(l=this._createEventElement(e.clone({head:o.head,tail:o.tail}))).css({left:a.offsetLeft+2,top:a.offsetTop+a.firstChildHeight,height:this.options.eventHeight,width:o.innerWidth()-(a.index!==s.index?5:4)}),l.addClass("k-event-drag-hint"),l.appendTo(this.content),this._moveHint=this._moveHint.add(l)},_groups:function(){var e,t,i,r,o,a,s,l,d,c,u,h,p,f,g,m,v=this._groupCount();for(this.groups=[],e=0;v>e;e++)this._addResourceView(e);for(t=this.content[0].getElementsByTagName("tr"),i=0;v>i;i++)for(r=0,o=0,this._isVerticallyGrouped()&&(o=i),a=6*o;6*(o+1)>a;a++)for(s=this.groups[i].addDaySlotCollection(n.date.addDays(this.startDate(),r),n.date.addDays(this.startDate(),r+7)),d=(l=t[a]).children,c=0,l.setAttribute("role","row"),this._isVerticallyGrouped()||(c=i),u=7*c;7*(c+1)>u;u++)p=(h=d[u]).clientHeight,f=h.children.length?h.children[0].offsetHeight+3:0,g=n.date.toUtcTime(n.date.addDays(this.startDate(),r)),r++,m=Math.floor((p-f-this.options.moreButtonHeight)/(this.options.eventHeight+3)),h.setAttribute("role","gridcell"),h.setAttribute("aria-selected",!1),s.addDaySlot(h,g,g+n.date.MS_PER_DAY,m)},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove(),this._groups(),e=new n.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var n,i,r,o,a,s,l,d,c,u,h,p=this._isMobilePhoneView();for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))for((o=this.groups[t])._continuousEvents||(o._continuousEvents=[]),s=(a=o.slotRanges(n,!0)).length,l=0;s>l;l++)d=a[l],c=n.start,u=n.end,s>1&&(0===l?u=d.end.endDate():l==s-1?c=d.start.startDate():(c=d.start.startDate(),u=d.end.endDate())),h=n.clone({start:c,end:u,head:d.head,tail:d.tail}),p?this._positionMobileEvent(d,this._createEventElement(h),o):this._positionEvent(d,this._createEventElement(h),o)},_renderGroups:function(e,t,i,o){var a,s,l,d,c=t[0];if(c)for(a=c.dataSource.view(),s=0;a.length>s;s++)l=this._resourceValue(c,a[s]),d=new n.data.Query(e).filter({field:c.field,operator:r.groupEqFilter(l)}).toArray(),t.length>1?i=this._renderGroups(d,t.slice(1),i++,o+1):this._renderEvents(d,i++);return i},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(o),this.element&&this.element.off(o),r.fn.destroy.call(this),this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable&&(!1!==this.options.editable.create&&this._addUserEvents.destroy(),!1!==this.options.editable.update&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:!0,selectedDateFormat:"{0:y}",selectedShortDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:d,eventTemplate:c}})}(window.kendo.jQuery),function(e,t){function n(e,t){var n;return 0!==e&&t>e?n=t-e:(n=e%t)&&(n=t-n),n}function i(e){var t=e.getMonth();return(g(e)?X[t]:J[t])+e.getDate()}function r(e,n){var i,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),K(e,0),i=e.getFullYear(),n!==t?(q(e,n,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),K(e,0),r=Math.floor((e.getTime()-new Date(i,0,1,-6))/864e5),1+Math.floor(r/7)}function o(e,t){var n=7-(Y(e).getDay()+7-(t||7))||7;return 0>n&&(n+=7),Math.ceil((e.getDate()-n)/7)+1}function a(e,t){return e+(t>e?7:0)}function s(e,t,n){var i,r,s,l,d,c=t.offset;return c?(r=o(i=new Date(e.getFullYear(),e.getMonth()+1,0),n),l=(s=a(t.day,n))<a(new Date(e.getFullYear(),e.getMonth(),1).getDay(),n),d=s>a(i.getDay(),n),0>c?c=r+(c+1-(d?1:0)):l&&(c+=1),r-=d?1:0,(l?1:0)>c||c>r?null:c):o(e,n)}function l(e,t){return o(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function d(e,t,n){return o(e,n)===s(e,t,n)}function c(e,t,n){for(var i,r,l,d,c=a(t.getDay(),n),u=e.length,h=[],p=0;u>p;p++)if(r=e[p],d=o(t,n),null!==(i=s(t,r,n)))if(i>d)h.push(r);else if(d===i)if((l=a(r.day,n))>c)h.push(r);else if(c===l)return null;return h}function u(e,t,n){for(var i,r=0,o=e.length,a=[];o>r;r++){if(i=e[r],n&&(i=n(i)),t===i)return null;i>t&&a.push(i)}return a}function h(e,t){for(var n,i=0,r=e.length;r>i;i++){if(n=parseInt(e[i],10),isNaN(n)||t.start>n||n>t.end||0===n&&0>t.start)return null;e[i]=n}return e.sort(m)}function p(e){for(var n,i,r,o=0,a=e.length;a>o;o++){if(i=(n=e[o]).length,r=n.substring(i-2).toUpperCase(),(r=te[r])===t)return null;e[o]={offset:parseInt(n.substring(0,i-2),10)||0,day:r}}return e}function f(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:Z[t]}function g(e){return(e=e.getFullYear())%4==0&&e%100!=0||e%400==0}function m(e,t){return e-t}function v(e,t){var n,i,r=0,o=[];if(e)for(n=(e=e.split(";")).length;n>r;r++)(i=y(e[r],t))&&o.push(i);return o}function b(t,n,i){for(var r=e.isArray(t)?t:v(t,i),o=n.getTime()-n.getMilliseconds(),a=0,s=r.length;s>a;a++)if(r[a].getTime()===o)return!0;return!1}function _(e,t){var n,i,r=0,o=[].concat(e);for(n=o.length;n>r;r++)i=o[r],i=L.timezone.convert(i,t||i.getTimezoneOffset(),"Etc/UTC"),o[r]=L.toString(i,oe);return o.join(";")+";"}function k(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),11,31);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth()+1,0);break;case"weekly":q(n,t.weekStart,-1),n.setDate(n.getDate()+6)}return t.hours&&n.setHours(23),t.minutes&&n.setMinutes(59),t.seconds&&n.setSeconds(59),n}function w(e,t,n){var i,r,o,a,s=e.slice(n._startIdx),l=s.length,d=n.positions,c=[];for(o=0,a=d.length;a>o;o++)0>(i=d[o])?i=l+i:i-=1,(r=s[i])&&r.start>=t&&c.push(r);return e=e.slice(0,n._startIdx).concat(c),n._startIdx=e.length,e}function y(e,t){return(e=L.parseDate(e,ne))&&t&&(e=z.convert(e,e.getTimezoneOffset(),t)),e}function x(e,n){var i,r,o,a,s,l,d,c,u=e.split(";");for(d=0,c=u.length;c>d;d++)if(r=(i=u[d].split(":"))[0],o=i[1],-1!==r.indexOf("TZID")&&(a=r.substring(r.indexOf("TZID")).split("=")[1]),o)for(s=0,l=(o=o.split(",")).length;l>s;s++)o[s]=y(o[s],a||n);return o?{value:o,tzid:a}:t}function C(n,i){var r,o,a,s,l,d,c,u,f,g={},m=0,v=!1;if(!n)return null;for((d=n.split("\n"))[1]||-1===n.indexOf("DTSTART")&&-1===n.indexOf("DTEND")&&-1===n.indexOf("EXDATE")||(d=n.split(" ")),m=0,a=d.length;a>m;m++)-1!==(l=e.trim(d[m])).indexOf("DTSTART")?g.start=x(l,i):-1!==l.indexOf("DTEND")?g.end=x(l,i):-1!==l.indexOf("EXDATE")?g.exdates=x(l,i):-1!==l.indexOf("RRULE")?s=l.substring(6):e.trim(l)&&(s=l);for(m=0,a=(s=s.split(";")).length;a>m;m++)switch(c=s[m],r=c.split("="),o=e.trim(r[1]).split(","),e.trim(r[0]).toUpperCase()){case"FREQ":g.freq=o[0].toLowerCase();break;case"UNTIL":g.until=y(o[0],i);break;case"COUNT":g.count=parseInt(o[0],10);break;case"INTERVAL":g.interval=parseInt(o[0],10);break;case"BYSECOND":g.seconds=h(o,{start:0,end:60}),v=!0;break;case"BYMINUTE":g.minutes=h(o,{start:0,end:59}),v=!0;break;case"BYHOUR":g.hours=h(o,{start:0,end:23}),v=!0;break;case"BYMONTHDAY":g.monthDays=h(o,{start:-31,end:31}),v=!0;break;case"BYYEARDAY":g.yearDays=h(o,{start:-366,end:366}),v=!0;break;case"BYMONTH":g.months=h(o,{start:1,end:12}),v=!0;break;case"BYDAY":g.weekDays=f=p(o),v=!0;break;case"BYWEEKNO":g.weeks=h(o,{start:-53,end:53}),v=!0;break;case"BYSETPOS":g.positions=h(o,{start:-366,end:366});break;case"WKST":g.weekStart=u=te[o[0]]}return g.freq===t||g.count!==t&&g.until?null:(g.interval||(g.interval=1),u===t&&(g.weekStart=u=L.culture().calendar.firstDay),f&&(g.weekDays=f.sort(function(e,t){var n=e.day,i=t.day;return u>n&&(n+=7),u>i&&(i+=7),n-i})),g.positions&&!v&&(g.positions=null),g._hasRuleValue=v,g)}function S(e,t){for(var n,i=e.value,r=e.tzid||"",o=i.length,a=0;o>a;a++)n=i[a],n=z.convert(n,r||t||n.getTimezoneOffset(),"Etc/UTC"),i[a]=L.toString(n,"yyyyMMddTHHmmssZ");return r&&(r=";TZID="+r),r+":"+i.join(",")+" "}function T(e,n){var i=e.weekStart,r="FREQ="+e.freq.toUpperCase(),o=e.exdates||"",a=e.start||"",s=e.end||"",l=e.until;return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),l&&(l=z.convert(l,n||l.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+L.toString(l,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+function(e){for(var t,n,i=0,r=e.length,o=[];r>i;i++)"string"==typeof(t=e[i])?n=t:(n=""+ee[t.day],t.offset&&(n=t.offset+n)),o.push(n);return""+o}(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.positions&&(r+=";BYSETPOS="+e.positions),i!==t&&(r+=";WKST="+ee[i]),a&&(a="DTSTART"+S(a,n)),s&&(s="DTEND"+S(s,n)),o&&(o="EXDATE"+S(o,n)),(a||s||o)&&(r=a+s+o+"RRULE:"+r),r}var D,I,E,A,O,R,P,M,F,H,N,$,L=window.kendo,z=L.timezone,j=L.Class,B=L.ui,U=B.Widget,V=B.DropDownList,W=L.date,G=W.setTime,q=W.setDayOfWeek,K=W.adjustDST,Y=W.firstDayOfMonth,Q=W.getMilliseconds,X=[0,31,60,91,121,152,182,213,244,274,305,335,366],J=[0,31,59,90,120,151,181,212,243,273,304,334,365],Z=[31,28,30,31,30,31,30,31,30,31,30,31],ee={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},te={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},ne=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],ie=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],re=ie.length,oe="yyyyMMddTHHmmssZ",ae={months:function(e,t,n){var i=n.months,r=u(i,e.getMonth()+1),o=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,i[0]-1,1),o=!0),o},monthDays:function(e,t,n){for(var i,r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=i+e),e};t>=e;){if(r=e.getMonth(),i=f(e),null===(o=u(n.monthDays,e.getDate(),l)))return a;if(a=!0,o.length){if(e.setMonth(r,o.sort(m)[0]),K(e,s),r===e.getMonth())break}else e.setMonth(r+1,1)}return a},yearDays:function(e,t,n){for(var r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=r+e),e};t>e;){if(r=g(e)?366:365,null===(o=u(n.yearDays,i(e),l)))return a;if(a=!0,r=e.getFullYear(),o.length){e.setFullYear(r,0,o.sort(m)[0]),K(e,s);break}e.setFullYear(r+1,0,1)}return a},weeks:function(e,t,n){for(var i,o,a,s=n.weekStart,l=!1,d=e.getHours(),c=function(e){return 0>e&&(e=53+e),e};t>e;){if(null===(o=u(n.weeks,r(e,s),c)))return l;if(l=!0,i=e.getFullYear(),o.length){a=7*o.sort(m)[0]-1,e.setFullYear(i,0,a),q(e,s,-1),K(e,d);break}e.setFullYear(i+1,0,1)}return l},weekDays:function(e,t,n){var i,r,a=n.weekDays,s=n.weekStart,u=c(a,e,s),h=e.getHours();if(null===u)return!1;if((i=u[0])||(i=a[0],q(e,s)),r=i.day,i.offset)for(;t>=e&&!d(e,i,s);)o(e,s)===l(e,s)?(e.setMonth(e.getMonth()+1,1),K(e,h)):(e.setDate(e.getDate()+7),K(e,h),q(e,s,-1));return e.getDay()!==r&&q(e,r),!0},hours:function(e,t,n){var i=n.hours,r=n._startTime,o=r.getHours(),a=u(i,o),s=!1;return null!==a&&(s=!0,e.setHours(o),K(e,o),a.length?(a=a[0],e.setHours(a)):(a=e.getHours(),e.setDate(e.getDate()+1),K(e,a),a=i[0],e.setHours(a),K(e,a)),n.minutes&&e.setMinutes(0),r.setHours(a,e.getMinutes())),s},minutes:function(e,t,n){var i=n.minutes,r=u(i,e.getMinutes()),o=n._startTime.getHours(),a=!1;return null!==r&&(a=!0,r.length?r=r[0]:(o+=1,r=i[0]),n.seconds&&e.setSeconds(0),e.setHours(o,r),K(e,o%=24),n._startTime.setHours(o,r,e.getSeconds())),a},seconds:function(e,t,n){var i=n.seconds,r=n._startTime.getHours(),o=u(i,e.getSeconds()),a=e.getMinutes(),s=!1;return null!==o&&(s=!0,o.length?e.setSeconds(o[0]):(a+=1,e.setMinutes(a,i[0]),a>59&&(a%=60,r=(r+1)%24)),n._startTime.setHours(r,a,e.getSeconds())),s}},se=j.extend({next:function(e,t){var n,i,r=t._startTime,o=r.getDate();if(t.seconds)i=e.getSeconds()+1,e.setSeconds(i),r.setSeconds(i),r.setDate(o);else{if(!t.minutes)return!1;n=e.getMinutes()+1,e.setMinutes(n),r.setMinutes(n),r.setDate(o)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,n,i){for(var r,o,a,s,l,d=i.interval;n>=e;){for(a=o=t,l=e.getDate(),s=0;re>s;s++){if(i[r=ie[s]]){if(a=ae[r](e,n,i),o!==t&&a)break;o=a}a&&this.normalize({date:e,rule:i,day:l,idx:s})}if((1===d||!this.interval(i,e))&&s===re)break}},interval:function(e,t){var i,o,a=new Date(e._startPeriod),s=new Date(t),l=t.getHours(),d=e.weekStart,c=e.interval,u=e.freq,h=!1,p=0,f=0,g=1;return"hourly"===u?(i=s.getTimezoneOffset()-a.getTimezoneOffset(),o=e._startTime.getHours(),s=s.getTime(),l!==o&&(s+=(o-l)*W.MS_PER_HOUR),s-=a,i&&(s-=i*W.MS_PER_MINUTE),0!==(p=n(i=Math.floor(s/W.MS_PER_HOUR),c))&&(this._hour(t,e,p),h=!0)):"daily"===u?(W.setTime(s,-a),0!==(p=n(i=Math.floor(s/W.MS_PER_DAY),c))&&(this._date(t,e,p),h=!0)):"weekly"===u?(i=52*(t.getFullYear()-a.getFullYear()),0!==(p=n(p=r(t,d)-r(a,d)+i,c))&&(W.setDayOfWeek(t,e.weekStart,-1),t.setDate(t.getDate()+7*p),K(t,l),h=!0)):"monthly"===u?(i=t.getFullYear()-a.getFullYear(),0!==(p=n(i=t.getMonth()-a.getMonth()+12*i,c))&&(g=e._hasRuleValue?1:t.getDate(),t.setFullYear(t.getFullYear(),t.getMonth()+p,g),K(t,l),h=!0)):"yearly"===u&&(p=n(i=t.getFullYear()-a.getFullYear(),c),e.months||(f=t.getMonth()),e.yearDays||e.monthDays||e.weekDays||(g=t.getDate()),0!==p&&(t.setFullYear(t.getFullYear()+p,f,g),K(t,l),h=!0)),h},_hour:function(e,t,n){var i=t._startTime,r=i.getHours();n&&(r+=n),e.setHours(r),r%=24,i.setHours(r),K(e,r)},_date:function(e,t,n){var i=e.getHours();e.setDate(e.getDate()+n),K(e,i)||this._hour(e,t)}}),le=se.extend({next:function(e,t){se.fn.next(e,t)||this._hour(e,t,1)},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),de=se.extend({next:function(e,t){se.fn.next(e,t)||this[t.hours?"_hour":"_date"](e,t,1)}}),ce=de.extend({setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),ue=se.extend({next:function(e,t){var n,i;if(!se.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(n=e.getDate(),i=e.getHours(),e.setMonth(e.getMonth()+1),K(e,i);e.getDate()!==n;)e.setDate(n),K(e,i);this._hour(e,t)}},normalize:function(e){var t=e.rule,n=e.date,i=n.getHours();0!==e.idx||t.monthDays||t.weekDays?se.fn.normalize(e):(n.setDate(e.day),K(n,i))},setup:function(e,t,n){e.monthDays||e.weekDays||n.setDate(t.getDate())}}),he=ue.extend({next:function(e,t){var n,i=e.getHours();if(!se.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(n=e.getDate(),e.setMonth(e.getMonth()+1),K(e,i);e.getDate()!==n;)e.setDate(n),K(e,i);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),K(e,i),this._hour(e,t)},setup:function(){}}),pe={hourly:new le,daily:new de,weekly:new ce,monthly:new ue,yearly:new he},fe="click";L.recurrence={rule:{parse:C,serialize:T},expand:function(e,n,i,r){var o,a,s,l,d,c,u,h,p,f,g,m,y,x,S,T,D,I,E,A,O=C(e.recurrenceRule,r),R=[];if(!O)return[e];for(A=(E=O.positions)?0:1,p=O.start,f=O.end,(p||f)&&(e=e.clone({start:p?new Date(p.value[0]):t,end:f?new Date(f.value[0]):t})),S=(T=e.start).getTime(),x=Q(T),!(y=v(e.recurrenceException,r))[0]&&O.exdates&&(y=O.exdates.value,e.set("recurrenceException",_(y,r))),h=n=new Date(n),i=new Date(i),m=O.freq,I=pe[m],D=O.count,O.until&&i>O.until&&(i=new Date(O.until)),g="yearly"===m||"monthly"===m||"weekly"===m,S>n||D||O.interval>1||g?n=new Date(S):(l=n.getHours(),d=n.getMinutes(),c=n.getSeconds(),O.hours||(l=T.getHours()),O.minutes||(d=T.getMinutes()),O.seconds||(c=T.getSeconds()),n.setHours(l,d,c,T.getMilliseconds())),O._startPeriod=new Date(n),E&&(n=function(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),0,1);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth(),1);break;case"weekly":q(n,t.weekStart,-1)}return t.hours&&n.setHours(0),t.minutes&&n.setMinutes(0),t.seconds&&n.setSeconds(0),n}(n,O),i=k(i,O),0>Q(i)-Q(n)&&(l=n.getHours(),i.setHours(l,n.getMinutes(),n.getSeconds(),n.getMilliseconds()),W.adjustDST(i,l)),O._startPeriod=new Date(n),O._endPeriod=k(n,O),O._startIdx=0),u=e.duration(),O._startTime=o=W.toInvariantTime(n),I.setup&&I.setup(O,T,n),I.limit(n,i,O);i>=n;)if(s=new Date(n),G(s,u),((n>=h||s>h)&&!b(y,n,r)||E)&&(a=(o=W.toUtcTime(W.getDate(n))+Q(O._startTime))+u,S!==n.getTime()||x!==Q(O._startTime)?R.push(e.toOccurrence({start:new Date(n),end:s,_startTime:o,_endTime:a})):(e._startTime=o,e._endTime=a,R.push(e))),E){if(I.next(n,O),I.limit(n,i,O),n>O._endPeriod&&(R=w(R,T,O),O._endPeriod=k(n,O),A=R.length),D&&D===A)break}else{if(D&&D===A)break;A++,I.next(n,O),I.limit(n,i,O)}return R},dayInYear:i,weekInYear:r,weekInMonth:o,numberOfWeeks:l,isException:b,toExceptionString:_},D=function(e){for(var t=L.culture().calendar.days.namesShort,n=t.length,i="",r=0,o=[];n>r;r++)o.push(r);for(t=t.slice(e).concat(t.slice(0,e)),o=o.slice(e).concat(o.slice(0,e)),r=0;n>r;r++)i+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+o[r]+'" /> '+t[r]+"</label>";return i},I=L.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #'),E=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}],A=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}],O=[{day:0,offset:0},{day:6,offset:0}],P=(R=U.extend({init:function(e,t){var n,i=this,r=t&&t.frequencies;U.fn.init.call(i,e,t),i.wrapper=i.element,(t=i.options).start=n=t.start||W.today(),r&&(t.frequencies=r),"string"==typeof n&&(t.start=L.parseDate(n,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=L.culture().calendar.firstDay),i._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:!0,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:!1,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this,t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value(),e._trigger()}})},_weekDayRule:function(e){var t=this,n=(t._weekDay.element||t._weekDay).val(),i=+(t._weekDayOffset.element||t._weekDayOffset).val(),r=null,o=null;e||("day"===n?(r=E,o=i):"weekday"===n?(r=A,o=i):"weekend"===n?(r=O,o=i):r=[{offset:i,day:+n}]),t._value.weekDays=r,t._value.positions=o},_weekDayView:function(){var e,t,n,i,r=this,o=r._value.weekDays,a=r._value.positions,s=r._weekDayOffset;o&&(n=o.length,a&&(7===n?(t="day",e=a):5===n?(t="weekday",e=a):2===n&&(t="weekend",e=a)),t||(t=(o=o[0]).day,e=o.offset||""),s[i=s.value?"value":"val"](e),r._weekDay[i](t))},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n._trigger()};o[0]&&(n._weekDayOffset=new V(n._container.find(".k-recur-weekday-offset"),{change:a,dataTextField:"text",dataValueField:"value",dataSource:[{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}]}),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],n._weekDay=new V(o,{value:n.options.start.getDay(),change:a,dataTextField:"text",dataValueField:"value",dataSource:t.concat(e.map(L.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))}),n._weekDayView())},_initWeekDays:function(){var t,n,i,r,o,a=this,s=a._value,l=a._container.find(".k-recur-weekday-checkbox");if(l[0]&&(l.on(fe+a._namespace,function(){s.weekDays=e.map(l.filter(":checked"),function(e){return{day:+e.value,offset:0}}),a.options.mobile||a._trigger()}),s.weekDays))for(i=0,r=l.length,o=s.weekDays.length;r>i;i++)for(n=l[i],t=0;o>t;t++)n.value==s.weekDays[t].day&&(n.checked=!0)},_initMonthDay:function(){var e=this,t=e._value,n=e._container.find(".k-recur-monthday");n[0]&&(e._monthDay=new L.ui.NumericTextBox(n,{spinners:e.options.spinners,min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var n=this.value();t.monthDays=n?[n]:n,e._trigger()}}))},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),n=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:n.count||1,decimals:0,format:"#",min:1,change:function(){n.count=this.value(),e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until;e._until=t.kendoDatePicker({min:r&&n>r?r:n,value:r||new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59),change:function(){var t=this.value();i.until=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59),e._trigger()}}).data("kendoDatePicker")},_trigger:function(){this.options.mobile||this.trigger("change")}})).extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),n._initFrequency(),n._initContainer(),n.value(n.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var e=this;e._frequency.destroy(),e._container.find("input[type=radio],input[type=checkbox]").off(fe+e._namespace),L.destroy(e._container),R.fn.destroy.call(e)},value:function(e){var n,i=this,r=i.options.timezone;return e===t?i._value.freq?T(i._value,r):"":(i._value=C(e,r)||{},(n=i._value.freq)?i._frequency.value(n):i._frequency.select(0),i._initView(i._frequency.value()),t)},_initContainer:function(){var t=this.element,n=e('<div class="k-recur-view" />'),i=t.parent(".k-edit-field");i[0]?n.insertAfter(i):t.append(n),this._container=n},_initFrequency:function(){var t,n=this,i=n.options,r=i.frequencies,o=i.messages.frequencies,a=e("<input />");(t=(r=e.map(r,function(e){return{text:o[e],value:e}}))[0])&&"never"===t.value&&(t.value=""),n.element.append(a),n._frequency=new V(a,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){n._value={},n._initView(n._frequency.value()),n.trigger("change")}})},_initView:function(e){var n=this,i=n._value,r=n.options,o={frequency:e||"never",weekDayCheckBoxes:D,firstWeekDay:r.firstWeekDay,messages:r.messages[e],end:r.messages.end};return L.destroy(n._container),n._container.html(I(o)),e?(i.freq=e,"weekly"!==e||i.weekDays||(i.weekDays=[{day:r.start.getDay(),offset:0}]),n._initInterval(),n._initWeekDays(),n._initMonthDay(),n._initWeekDay(),n._initMonth(),n._initCount(),n._initUntil(),n._period(),n._end(),t):(n._value={},t)},_initMonth:function(){var t,n=this,i=n._value,r=i.months||[n.options.start.getMonth()+1],o=n._container.find(".k-recur-month");o[0]&&(t={change:function(){i.months=[+this.value()],n.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:e.map(L.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})},n._month1=new V(o[0],t),n._month2=new V(o[1],t),r&&(r=r[0],n._month1.value(r),n._month2.value(r)))},_end:function(){var e,t=this,n=t._value,i=t._container,r=t._namespace,o=function(e){t._toggleEnd(e.currentTarget.value),t.trigger("change")};t._buttonNever=i.find(".k-recur-end-never").on(fe+r,o),t._buttonCount=i.find(".k-recur-end-count").on(fe+r,o),t._buttonUntil=i.find(".k-recur-end-until").on(fe+r,o),n.count?e="count":n.until&&(e="until"),t._toggleEnd(e)},_period:function(){var e=this,t=e._value,n="monthly"===t.freq,i=n?e._toggleMonthDay:e._toggleYear,r=".k-recur-"+(n?"month":"year")+"-radio",o=e._container.find(r);(n||"yearly"===t.freq)&&(o.on(fe+e._namespace,function(t){i.call(e,t.currentTarget.value),e.trigger("change")}),e._buttonMonthDay=o.eq(0),e._buttonWeekDay=o.eq(1),i.call(e,t.weekDays?"weekday":"monthday"))},_toggleEnd:function(e){var t,n,i,r,o=this;"count"===e?(o._buttonCount.prop("checked",!0),i=!0,r=!1,t=o._count.value(),n=null):"until"===e?(o._buttonUntil.prop("checked",!0),i=!1,r=!0,t=null,n=o._until.value()):(o._buttonNever.prop("checked",!0),i=r=!1,t=n=null),o._count.enable(i),o._until.enable(r),o._value.count=t,o._value.until=n},_toggleMonthDay:function(e){var t,n=this,i=!1,r=!0,o=!1;"monthday"===e?(n._buttonMonthDay.prop("checked",!0),t=[n._monthDay.value()],i=!0,r=!1,o=!0):(n._buttonWeekDay.prop("checked",!0),t=null),n._weekDay.enable(r),n._weekDayOffset.enable(r),n._monthDay.enable(i),n._value.monthDays=t,n._weekDayRule(o)},_toggleYear:function(e){var t,n=this,i=!1,r=!0;"monthday"===e?(i=!0,r=!1,t=n._month1.value()):t=n._month2.value(),n._month1.enable(i),n._month2.enable(r),n._value.months=[t],n._toggleMonthDay(e)}}),B.plugin(P),M=L.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'),F=L.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #'),H=L.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'),N=L.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'),$=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),t=n.options,n._optionTemplate=L.template('<option value="#:value#">#:text#</option>'),n.value(t.value),n._pane=t.pane,n._initRepeatButton(),n._initRepeatEnd(),n._defaultValue=n._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:!0,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?T(n._value,i):"":(n._value=C(e,i)||{},t)},destroy:function(){this._destroyView(),L.destroy(this._endFields),this._repeatButton.off(fe+this._namespace),R.fn.destroy.call(this)},_initRepeatButton:function(){var t=this,n=t.options.messages.frequencies[this._value.freq||"never"];t._repeatButton=e('<a href="#" class="k-button k-scheduler-recur">'+n+"</a>").on(fe+t._namespace,function(e){e.preventDefault(),t._createView("repeat"),t._pane.navigate("recurrence",t.options.animations.left)}),t.element.append(t._repeatButton)},_initRepeatEnd:function(){var t=this,n=e('<div class="k-edit-label"><label>'+t.options.messages.end.mobileLabel+"</label></div>").insertAfter(t.element.parent(".k-edit-field")),i=e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(fe+t._namespace,function(e){e.preventDefault(),t._value.freq&&(t._createView("end"),t._pane.navigate("recurrence",t.options.animations.left))}).insertAfter(n);t._endFields=n.add(i).toggleClass("k-state-disabled",!t._value.freq),t._endButton=i.find(".k-scheduler-recur-end").text(t._endText())},_endText:function(){var e=this._value,t=this.options.messages.end,n=t.never;return e.count?n=L.format("{0} {1}",t.after,e.count):e.until&&(n=L.format("{0} {1:d}",t.on,e.until)),n},_initFrequency:function(){var t=this,n=t.options.messages.frequencies,i=N({dataSource:e.map(this.options.frequencies,function(e){return{text:n[e],value:"never"!==e?e:""}}),value:t._value.freq||"",ns:L.ns});t._view.element.find(".k-recur-pattern").append(i).on(fe+t._namespace,".k-scheduler-navigation li",function(n){var i=e(this);n.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._value={freq:i.children("a").attr(L.attr("value"))},t._initRepeatView()})},_initEndNavigation:function(){var t,n=this,i=n.options.messages.end.patterns,r=n._value,o="";r.count?o="count":r.until&&(o="until"),t=N({dataSource:[{text:i.never,value:""},{text:i.after,value:"count"},{text:i.on,value:"until"}],value:o,ns:L.ns}),n._view.element.find(".k-recur-pattern").append(t).on(fe+n._namespace,".k-scheduler-navigation li",function(t){var i=e(this),o=null,a=null;t.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),n._initEndView(i.children("a").attr(L.attr("value"))),n._count?(o=n._count.value(),a=null):n._until&&(o=null,a=n._until.val?L.parseDate(n._until.val(),"yyyy-MM-dd"):n._until.value()),r.count=o,r.until=a})},_createView:function(t){var n=this,i=n.options.messages,r=i["repeat"===t?"repeatTitle":"endTitle"],o='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+i.cancel+"</a>"+i.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+i.update+"</a></div>",a=n._pane.view().id;n._view=n._pane.append(o+M({headerTitle:r})),n._view.element.on(fe+n._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(t){t.preventDefault(),t.stopPropagation(),e(this).hasClass("k-scheduler-update")?(n.trigger("change"),n._defaultValue=e.extend({},n._value)):n._value=n._defaultValue;var r=n._value.freq;n._endButton.text(n._endText()),n._endFields.toggleClass("k-state-disabled",!r),n._repeatButton.text(i.frequencies[r||"never"]),n._pane.one("viewShow",function(){n._destroyView()}),n._pane.navigate(a,n.options.animations.right)}),n._container=n._view.element.find(".k-recur-view"),"repeat"===t?(n._initFrequency(),n._initRepeatView()):(n._initEndNavigation(),n._initEndView())},_destroyView:function(){this._view&&(this._view.destroy(),this._view.element.remove()),this._view=null},_initRepeatView:function(){var e=this,n=e._value.freq||"never",i={frequency:n,weekDayCheckBoxes:D,firstWeekDay:e.options.firstWeekDay,messages:e.options.messages[n]},r=F(i),o=e._container,a=e._value;return L.destroy(o),o.html(r),r?("weekly"!==n||a.weekDays||(a.weekDays=[{day:e.options.start.getDay(),offset:0}]),e._initInterval(),e._initMonthDay(),e._initWeekDays(),e._initWeekDay(),e._initMonth(),e._period(),t):(e._value={},t)},_initEndView:function(e){var n,i=this,r=i._value;e===t&&(r.count?e="count":r.until&&(e="until")),n={endPattern:e,messages:i.options.messages.end},L.destroy(i._container),i._container.html(H(n)),i._initCount(),i._initUntil()},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n.trigger("change")};o[0]&&(n._weekDayOffset=n._container.find(".k-recur-weekday-offset").html(n._options([{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}])).change(a),t=(t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}]).concat(e.map(L.culture().calendar.days.names,function(e,t){return{text:e,value:t}})),n._weekDay=o.html(n._options(t)).change(a).val(n.options.start.getDay()),n._weekDayView())},_initMonth:function(){var t,n=this,i=n._value,r=n.options.start,o=i.months||[r.getMonth()+1],a=n._container.find(".k-recur-month"),s=L.culture().calendar.months.names;a[0]&&(t=e.map(s,function(e,t){return{text:e,value:t+1}}),a.html(n._options(t)).change(function(){i.months=[+this.value]}),n._monthSelect=a,o&&a.val(o[0]))},_period:function(){var t,n,i,r=this,o=r._value,a=r._container,s=r.options.messages[o.freq],l=a.find(".k-repeat-rule"),d=a.find(".k-weekday-view"),c=a.find(".k-monthday-view");l[0]&&(t=o.weekDays?"weekday":"monthday",n=N({value:t,dataSource:[{text:s.dayOfMonth,value:"monthday"},{text:s.dayOfWeek,value:"weekday"}],ns:L.ns}),i=function(e){var t=r._weekDay.val(),n=r._weekDayOffset.val(),i=r._monthDay.value(),a=r._monthSelect?r._monthSelect.val():null;"monthday"===e?(o.weekDays=null,o.monthDays=i?[i]:i,o.months=a?[+a]:a,d.hide(),c.show()):(o.monthDays=null,o.months=a?[+a]:a,o.weekDays=[{offset:+n,day:+t}],d.show(),c.hide())},l.append(n).on(fe+r._namespace,".k-scheduler-navigation li",function(t){var n,r=e(this).addClass("k-state-selected");t.preventDefault(),r.siblings().removeClass("k-state-selected"),n=r.children("a").attr(L.attr("value")),i(n)}),i(t))},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until,o=r&&n>r?r:n;e._until=L.support.input.date?t.attr("min",L.toString(o,"yyyy-MM-dd")).val(L.toString(r||n,"yyyy-MM-dd")).on("change",function(){i.until=L.parseDate(this.value,"yyyy-MM-dd")}):t.kendoDatePicker({min:o,value:r||n,change:function(){i.until=this.value()}}).data("kendoDatePicker")},_options:function(e,t){var n=0,i="",r=e.length,o=this._optionTemplate;for(t&&(i+=o({value:"",text:t}));r>n;n++)i+=o(e[n]);return i}}),B.plugin($)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return o(t,c(e)),t}var i=window.kendo,r=i.ui,o=i.date.setTime,a=r.SchedulerView,s=e.extend,l=e.proxy,d=i.date.getDate,c=i.date.getMilliseconds,u=i.date.MS_PER_DAY,h=i.date.MS_PER_MINUTE,p=".kendoTimelineView",f=i.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),g=i.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),m=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=function(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,n,r,o,a,s,l,d,c,u,h=new Date,p=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:h,end:h}))for(!1===p.currentTimeMarker.useLocalTimezone&&(t=p.dataSource.options.schema.timezone,p.dataSource&&t&&(n=i.timezone.offset(h,t),h=i.timezone.convert(h,h.getTimezoneOffset(),n))),r=p.group&&"vertical"!=p.group.orientation?this.groups.length:1,o=0;r>o;o++){if(a=this.groups[o],s=i.date.toUtcTime(h),0===(l=a.timeSlotRanges(s,s+1)).length)return;l[0].collection.slotByStartDate(h)&&(d=e("<div class='k-current-time'></div>"),c=this.datesHeader,u=Math.round(l[0].innerRect(h,new Date(h.getTime()+1),!1).left),d.appendTo(c.find(".k-scheduler-header-wrap")).css({left:this._adjustLeftPosition(u),width:"1px",bottom:"1px",top:0}))}},_adjustLeftPosition:function(e){return this._isRtl&&(e-=this.content[0].scrollWidth-this.content[0].offsetWidth),e},_currentTime:function(){var e,t=this,n=t.options.currentTimeMarker;!1!==n&&void 0!==n.updateInterval&&(e=n.updateInterval,t._currentTimeMarkerUpdater(),t._currentTimeUpdateTimer=setInterval(l(this._currentTimeMarkerUpdater,t),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+p,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),n.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+p,".k-scheduler-content td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:s({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+p,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this,n=0;i.support.mobileOS.android&&(n=5),!1!==t.options.editable.create&&(t._addUserEvents=new i.UserEvents(t.element,{threshold:n,filter:".k-scheduler-content td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:s({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new i.UserEvents(t.element,{threshold:n,filter:".k-event",tap:function(n){var r=e(n.target).closest(".k-event");r.hasClass("k-event-active")||t.trigger("edit",{uid:r.attr(i.attr("uid"))}),n.preventDefault()}}))},_slotByPosition:function(e,t){var n,r,o,a=this.content,s=a.offset();for(e-=s.left,t-=s.top,this._isRtl?(o=i.support.browser).mozilla?(e+=a[0].scrollWidth-a[0].offsetWidth,e+=a[0].scrollLeft):o.msie?(e-=a.scrollLeft(),e+=a[0].scrollWidth-a[0].offsetWidth):o.webkit&&(e+=a[0].scrollLeft):e+=a[0].scrollLeft,t+=a[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(n=this.groups[r].timeSlotByPosition(e,t))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",date:i.date.today(),startTime:i.date.today(),endTime:i.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:f,dateHeaderTemplate:g,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=s({},i.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.majorTimeHeaderTemplate=i.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=i.template(e.dateHeaderTemplate,t),this.slotTemplate=i.template(e.slotTemplate,t),this.groupHeaderTemplate=i.template(e.groupHeaderTemplate,t)},_render:function(t){var n=this;t=t||[],n._dates=t,n._startDate=t[0],n._endDate=t[t.length-1||0],n._calculateSlotRanges(),n.createLayout(n._layout(t)),n._content(t),n._footer(),n._setContentWidth(),n.refreshLayout(),n.datesHeader.on("click"+p,".k-nav-day",function(t){var i=e(t.currentTarget).closest("th"),r=n._slotByPosition(i.offset().left,n.content.offset().top);n.trigger("navigate",{view:"timeline",date:r.startDate()})}),n.timesHeader.find("table tr:last").hide(),n.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content.width(),t=this.content.find("table"),n=100,i=t.find("tr:first").children().length*this.options.columnWidth;i>e&&(n=Math.ceil(i/e*100)),t.add(this.datesHeader.find("table")).css("width",n+"%")},_calculateSlotRanges:function(){var e,t,n,r,a=this._dates,s=this.startTime(),l=this.endTime();for(c(l)===c(i.date.getDate(l))&&(l=i.date.getDate(l),o(l,u-1)),l=c(l),s=c(s),e=[],t=0;a.length>t;t++)n=d(a[t]),o(n,s),r=d(a[t]),o(r,l),e.push({start:i.date.toUtcTime(n),end:i.date.toUtcTime(r)});this._slotRanges=e},_forTimeRange:function(e,t,i,r){var a,s,l,d,p,f,g,m,v,b,_,k,w,y;for(e=n(e),t=n(t),a=c(e),s=c(t),l=this.options.minorTickCount,p=(d=this.options.majorTick*h)/l||1,g=(f=new Date(+e)).getDate(),v=0,_="",b=u/p,a!=s&&(a>s&&(s+=u),b=(s-a)/p),b=Math.round(b);b>v;v++)w=0==(k=v%(d/p)),y=l,b%l!=0&&w&&l>b-(v+1)&&(y=b%l),_+=i(f,w,l-1>k,k===l-1,y),o(f,p,!1);return s&&(m=c(f),g<f.getDate()&&(m+=u),m>s&&(f=new Date(+t))),r&&(_+=r(f)),_},_layout:function(e){var t,n,i,r=[],o=[],a=this,s=[{text:a.options.messages.defaultRowText}],l=[];for(t=0;a.options.minorTickCount>t;t++)l.push({text:"",className:""});for(this._forTimeRange(a.startTime(),a.endTime(),function(e,t,n,i,o){var s,d=a.majorTimeHeaderTemplate;t&&(function e(t){var n,i=0;if(t.columns){for(n=0;t.columns.length>n;n++)i+=e(t.columns[n]);return t.colspan=i,i}return t.colspan=1,1}(s={text:d({date:e}),className:i?"k-slot-cell":"",columns:l.slice(0,o)}),r.push(s))}),n=0;e.length>n;n++)o.push({text:a.dateHeaderTemplate({date:e[n]}),className:"k-slot-cell",columns:r.slice(0)});return(i=this.groupedResources).length&&("vertical"===this._groupOrientation()?s=a._createRowsLayout(i,null,this.groupHeaderTemplate):o=a._createColumnsLayout(i,o,this.groupHeaderTemplate)),{columns:o,rows:s}},_footer:function(){var t,n,i,r=this.options;!1!==r.footer&&(t='<div class="k-header k-scheduler-footer">',(n=r.footer.command)&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+p,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_content:function(e){var t,n,r,o,a,s=this,l=s.options,d=s.startTime(),c=this.endTime(),u=1,h=1,p=e.length,f="",g=this.groupedResources,m=this.slotTemplate,v=!1;for(g.length&&((v="vertical"===s._groupOrientation())?h=s._groupCount():u=s._groupCount()),f+="<tbody>",t=function(t){var a,d="",c="";return i.date.isToday(e[o])&&(c+="k-today"),(i.date.getMilliseconds(t)<i.date.getMilliseconds(l.workDayStart)||i.date.getMilliseconds(t)>=i.date.getMilliseconds(l.workDayEnd)||!s._isWorkDay(e[o]))&&(c+=" k-nonwork-hour"),d+="<td"+(""!==c?' class="'+c+'"':"")+">",a=i.date.getDate(e[o]),i.date.setTime(a,i.date.getMilliseconds(t)),(d+=m({date:a,resources:function(e){return function(){return s._resourceBySlot({groupIndex:e})}}(v?n:r)}))+"</td>"},n=0;h>n;n++){for(f+="<tr>",r=0;u>r;r++)for(o=0,a=p;a>o;o++)f+=this._forTimeRange(d,c,t);f+="</tr>"}f+="</tbody>",this.content.find("table").append(f)},_groups:function(){var e,t,n,r,o=this._groupCount(),a=this._dates,s=a.length;for(this.groups=[],e=0;o>e;e++)t=this._addResourceView(e),n=a[0],r=a[a.length-1||0],t.addTimeSlotCollection(n,i.date.addDays(r,1));this._timeSlotGroups(o,s)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,d,u,h,p,f,g,m,v,b,_=this._timeSlotInterval(),k=this._isVerticallyGrouped(),w=this.content.find("tr"),y=w.length;for(w.attr("role","row"),k&&(y=Math.floor(y/e)),n=0;e>n;n++)for(i=0,r=this.groups[n],k&&(i=n),a=0,k||(a=n),d=(l=(s=w[i*y].children).length/(k?1:e))/t,u=0;t>u;u++)for(h=u*d+l*a,o=c(new Date(+this.startTime())),p=0;d>p;p++)f=s[p+h],g=r.getTimeSlotCollection(0),m=this._dates[u],b=(v=Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())+o)+_,f.setAttribute("role","gridcell"),f.setAttribute("aria-selected",!1),g.addTimeSlot(f,v,b,!0),o+=_},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*h},nextDate:function(){return i.date.nextDay(this.endDate())},previousDate:function(){return i.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(e){var t,n,r,o,a;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),e=new i.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),t=[],this._eventsByResource(e,this.groupedResources,t),n=[],r=0,o=0;t.length>o;o++)a={groupIndex:o,maxRowCount:0,events:{}},n.push(a),this._renderEvents(t[o],o,a),a.maxRowCount>r&&(r=a.maxRowCount);this._setRowsHeight(n,t.length,r),this._positionEvents(n,t.length),this.trigger("activate")},_positionEvents:function(e,t){var n,i,r,o;for(n=0;t>n;n++)for(r in i=e[n].events)o=i[r],this._positionEvent(o)},_setRowsHeight:function(t,n,i){var r,o,a,s,l=this.options.eventHeight+2,d=this._getBottomRowOffset();for(n=this._isVerticallyGrouped()?n:1,r=0;n>r;r++)o=(l+2)*((this._isVerticallyGrouped()?t[r].maxRowCount:i)||1)+d,a=e(this.times.find("tr")[r]),s=e(this.content.find("tr")[r]),a.height(o),s.height(o);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,n=.5*this.options.eventHeight;return this._isMobile()?(e=30,t=60):(e=15,t=30),n>t?n=t:e>n&&(n=e),n},_positionEvent:function(e){var t,n,i,r=this.options.eventHeight+2,o=e.slotRange.innerRect(e.start,e.end,!1),a=this._adjustLeftPosition(o.left),s=o.right-o.left-2;0>s&&(s=0),this.options.eventMinWidth>s&&(i=(n=(t=e.slotRange.collection)._slots[t._slots.length-1]).offsetLeft+n.offsetWidth,a+(s=this.options.eventMinWidth)>i&&(s=i-o.left-2)),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(r+2)+"px",left:a,width:s})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,n){var r,o,s,l,d=t[0];if(d)for(r=d.dataSource.view(),o=0;r.length>o;o++)s=this._resourceValue(d,r[o]),l=new i.data.Query(e).filter({field:d.field,operator:a.groupEqFilter(s)}).toArray(),t.length>1?this._eventsByResource(l,t.slice(1),n):n.push(l);else n.push(e)},_isInDateSlot:function(e){var t=e.start,n=e.end,r=d(this._startDate);return i.date.addDays(d(this._endDate),1)>t&&n>=r},_isInTimeSlot:function(e){var t,n=e._startTime||i.date.toUtcTime(e.start),r=e._endTime||i.date.toUtcTime(e.end),o=this._slotRanges;for(n===r&&(r+=1),t=0;o.length>t;t++)if(o[t].end>n&&r>o[t].start)return!0;return!1},_adjustEvent:function(e){var t=e.start,n=e.end,r=e._time("start"),a=e._time("end"),s=c(this.startTime()),l=c(this.endTime()),h=null,p=null,f=!1,g=!1;return e.isAllDay?(h=d(t),s>r&&(o(h,s),g=!0),p=d(n),l===c(d(this.endTime()))?p=i.date.addDays(p,1):(o(p,l),f=!0)):(l=0===l?u:l,s>r?(h=d(t),o(h,s),g=!0):r>l&&(h=d(t),h=i.date.addDays(h,1),o(h,s),g=!0),a>l?(p=d(n),o(p,l),f=!0):s>a&&(p=d(n),p=i.date.addDays(p,-1),o(p,l),f=!0)),{occurrence:e.clone({start:h||t,end:p||n,_startTime:h?i.date.toUtcTime(h):e._startTime,_endTime:p?i.date.toUtcTime(p):e._endTime,isAllDay:!1}),head:f,tail:g}},_renderEvents:function(e,t,n){var i,r,o,a,s,l,d,c,h,p;for(r=0,o=e.length;o>r;r++)i=e[r],this._isInDateSlot(i)&&(a=i.isAllDay||i.end.getTime()-i.start.getTime()>=u,s=this.content,(a||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),(d=this.groups[t])._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(l.occurrence,!1)[0],this._isInTimeSlot(l.occurrence)&&((h=this._createEventElement(l.occurrence,i,c.head||l.head,c.tail||l.tail)).appendTo(s).css({top:0,height:this.options.eventHeight}),p={start:l.occurrence._startTime||l.occurrence.start,end:l.occurrence._endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:c,rowIndex:0,offsetTop:0},n.events[i.uid]=p,this.addContinuousEvent(d,c,h,i.isAllDay),this._arrangeRows(p,c,n))))},addContinuousEvent:function(e,t,n,r){e._continuousEvents.push({element:n,isAllDay:r,uid:n.attr(i.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,n,r,o){var a,l,d=this.eventTemplate,c=this.options.editable,u=this._isMobile(),h=c&&!1!==c.destroy&&!u,p=c&&!1!==c.resize,f=n._time("start"),g=n._time("end"),m=n.start,v=n.end,b=this.eventResources(n);return n._startTime&&f!==i.date.getMilliseconds(n.start)&&(m=new Date(f),m=i.timezone.apply(m,"Etc/UTC")),n._endTime&&g!==i.date.getMilliseconds(n.end)&&(v=new Date(g),v=i.timezone.apply(v,"Etc/UTC")),a=s({},{ns:i.ns,resizable:p,showDelete:h,head:r,tail:o,singleDay:1==this._dates.length,resources:b,inverseColor:!(!b||!b[0])&&this._shouldInverseResourceColor(b[0])},n,{start:m,end:v}),l=e(d(a)),this.angular("compile",function(){return{elements:l,data:[{dataItem:a}]}}),l},_arrangeRows:function(e,t,n){var i,r,o,s,l,d,c=t.start.index,u=t.end.index,h=e.slotRange.innerRect(e.start,e.end,!1),p=h.right+this.options.eventMinWidth,f=function(e,t,n){var i,r,o;for(i=e.length-1;i>=0;i--)r=e[i].rectLeft,o=e[i].rectRight,(t>=r&&o>=t||r>=t&&n>=o||r>=t&&n>=r)&&(t>r&&(t=r),o>n&&(n=o));return function(e,t,n){var i,r,o=[];for(i=0;e.length>i;i++)r={rectLeft:e[i].rectLeft,rectRight:e[i].rectRight},(t>r.rectLeft&&r.rectRight>t||r.rectLeft>=t&&n>=r.rectRight)&&o.push(e[i]);return o}(e,t,n)}(t.events(),h.left,p);for(t.addEvent({slotIndex:c,start:c,end:u,rectLeft:h.left,rectRight:p,element:e.element,uid:e.uid}),f.push({start:c,end:u,uid:e.uid}),(i=a.createRows(f)).length>n.maxRowCount&&(n.maxRowCount=i.length),r=0,o=i.length;o>r;r++)for(l=0,d=(s=i[r].events).length;d>l;l++)n.events[s[l].uid].rowIndex=r},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){return this._adjustEvent(e.clone()).occurrence},_eventOptionsForMove:function(e){return e.isAllDay?{isAllDay:!1}:{}},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,n){var i,r,o,a,s,l,d,c,u,h,p=this.groups[t],f=e.clone({start:e.start,end:e.end}),g=f.duration();for(f.start=new Date(f.start.getTime()+n),f.end=new Date(+f.start+g),i=this._adjustEvent(f),r=p.slotRanges(i.occurrence,!1),this._removeMoveHint(),o=0;r.length>o;o++)s=(a=r[o]).start,(l=this._createEventElement(i.occurrence,i.occurrence,!1,!1)).addClass("k-event-drag-hint"),0>(c=(d=a.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap)).right-d.left-2)&&(c=0),u={left:this._adjustLeftPosition(d.left),top:s.offsetTop,height:s.offsetHeight-2,width:c},l.css(u),this._moveHint=this._moveHint.add(l);h=this.content,this._moveHint.appendTo(h)},_updateResizeHint:function(e,t,n,r){var o,s,l,d,c,u,h,p,f,g=this.groups[t].ranges(n,r,!1,!1);for(this._removeResizeHint(),o=0;g.length>o;o++)l=(s=g[o]).startSlot(),(d=s.innerRect(n,r,!1)).top=l.offsetTop,c=d.right-d.left,u=l.offsetHeight,h=this._adjustLeftPosition(d.left),p=a.fn._createResizeHint.call(this,h,d.top,c,u),this._resizeHint=this._resizeHint.add(p);f=this.content,this._resizeHint.appendTo(f),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(i.toString(i.timezone.toLocalDate(n),"t")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(i.toString(i.timezone.toLocalDate(r),"t"))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,n,i,r){var o=t[0].start,a=t[t.length-1].end;n&&!r&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var n=this[t?"prevGroupSlot":"nextGroupSlot"](e.start,e.groupIndex,!1);return n&&(e.groupIndex+=t?-1:1),n},prevGroupSlot:function(e,t,n){var i=this.groups[t],r=i.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r:i._collection(0,n).last()},nextGroupSlot:function(e,t,n){var i=this.groups[t],r=i.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?r:i._collection(0,n).first()},_verticalSlots:function(e,t,n,i){var r=i?"leftSlot":"rightSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isVerticallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_horizontalSlots:function(e,t,n,i){var r=i?"upSlot":"downSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isHorizontallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_changeViewPeriod:function(e,t){var n,i=t?this.previousDate():this.nextDate(),r=e.start,a=e.end;return e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),n=a-r,t?(a=0===(a=c(this.endTime()))?u:a,o(e.start,a-n),o(e.end,a)):(r=c(this.startTime()),o(e.start,r),o(e.end,r+n)),e.events=[],!0},move:function(e,t,n){var r,o,a,s,l,d=!1,c=this.groups[e.groupIndex],u=i.keys,h=c.ranges(e.start,e.end,!1,!1);if(t===u.DOWN||t===u.UP)d=!0,a=t===u.UP,this._updateDirection(e,h,n,a,!0),s=this._verticalSlots(e,h,n,a);else if(!(t!==u.LEFT&&t!==u.RIGHT||(d=!0,a=t===u.LEFT,this._updateDirection(e,h,n,a,!1),s=this._horizontalSlots(e,h,n,a),s.startSlot&&s.endSlot||n||!this._changeViewPeriod(e,a,!1))))return d;return d&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward)&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate()):r&&o&&(e.start=r.startDate(),e.end=o.endDate()),e.events=[]),d},destroy:function(){var e=this;e.element&&e.element.off(p),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),a.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(!1!==e.options.editable.create&&e._addUserEvents.destroy(),!1!==e.options.editable.update&&e._editUserEvents.destroy())}});s(!0,r,{TimelineView:m,TimelineWeekView:m.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t=this.options.date,n=i.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),r=[];for(e=0;7>e;e++)r.push(n),n=i.date.nextDay(n);this._render(r)}}),TimelineWorkWeekView:m.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return i.date.dayOfWeek(i.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return i.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=i.date.dayOfWeek(e,this.options.workWeekStart,-1),n=i.date.dayOfWeek(t,this.options.workWeekEnd,1),r=[];n>=t;)r.push(t),t=i.date.nextDay(t);this._render(r)}}),TimelineMonthView:m.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var e,t,n=this.options.date,r=i.date.firstDayOfMonth(n),o=[];for(e=0,t=i.date.lastDayOfMonth(n).getDate();t>e;e++)o.push(r),r=i.date.nextDay(r);this._render(o)}})})}(window.kendo.jQuery),function(e,t){function n(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function i(e,t){var n=t.timezone;n&&(e[C.attr("timezone")]=n)}function r(e,t){var n,i=t.model.fields[t.field].validation;i&&(n=i.dateCompare)&&L(n)&&n.message&&(e[C.attr("dateCompare-msg")]=n.message)}function o(e,t,n,i){var r,o,a;for(o=0,a=(e=e||[]).length;a>o;o++)r=e[o],i?r.startTimezone||r.endTimezone?n?(r.start=C.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=C.timezone.convert(r.end,r.endTimezone||r.startTimezone,n),r.start=C.timezone[t](r.start,n),r.end=C.timezone[t](r.end,n)):(r.start=C.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=C.timezone[t](r.end,r.endTimezone||r.startTimezone)):n&&(r.start=C.timezone[t](r.start,n),r.end=C.timezone[t](r.end,n)):r.startTimezone||r.endTimezone?(r.start=C.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=C.timezone[t](r.end,r.endTimezone||r.startTimezone),n&&(r.start=C.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=C.timezone.convert(r.end,r.endTimezone||r.startTimezone,n))):n&&(r.start=C.timezone[t](r.start,n),r.end=C.timezone[t](r.end,n)),i&&delete r.uid;return e}function a(e,t){for(var n,i=e.length,r=0;i>r;r++)if((n=e[r]).uid===t)return n}function s(e,t,n){return n?C.timezone.convert(e,t,n):C.timezone.remove(e,t)}function l(t,n){var i,r,o=(t.fields||t)[n],a=["url","email","number","date","boolean"],s=o?o.validation:{},l=(function(t){(t=null!=t?t:"").type||e.type(t)}(o),C.attr("type")),d=e.inArray,c={};for(i in s)r=s[i],d(i,a)>=0?c[l]=i:C.isFunction(r)||(c[i]=L(r)?r.value||i:r),c[C.attr(i+"-msg")]=r.message;return c}function d(t,n){var i=l(n,t.field);return function(n){e(C.format('<select data-{0}bind="value:{1}">',C.ns,t.field)).appendTo(n).attr(i).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function c(t){var n=l(t.model,t.field);return function(t){e('<textarea name="description" class="k-textbox"/>').attr(n).appendTo(t)}}function u(e,t){var n,i=e.end.getTime()-e.start.getTime(),r=new Date(e.start.getTime());return C.date.setTime(r,t),n=new Date(r.getTime()),C.date.setTime(n,i,!0),{start:r,end:n}}var h,p,f,g,m,v,b,_,k,w,y,x,C=window.kendo,S=C.date,T=C.support.input,D=S.MS_PER_DAY,I=S.getDate,E=C.date.getMilliseconds,A=C.recurrence,O=C.keys,R=C.ui,P=R.Widget,M=R.DataBoundWidget,F="string",H=R.Popup,N=R.Calendar,$=C.data.DataSource,L=e.isPlainObject,z=e.extend,j=e.proxy,B=Object.prototype.toString,U=e.isArray,V=".kendoScheduler",W="click",G="change",q="cancel",K="remove",Y="save",Q="edit",X=/(?:value:start|value:end)(?:,|$)/,J=I(new Date),Z="recurrenceException",ee="Do you want to edit only this event occurrence or the whole series?",te=C.template('<li class="k-current-view" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>'),ne=C.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-refresh"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div>'),ie=C.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-refresh"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-current"><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li></ul></div>'),re=C.Class.extend({init:function(t,n){var i=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=i,this.data=function(e,t){return function(n){return o(n=e(n),"apply",t),n||[]}}(e.proxy(this.data,this),i),this.serialize=function(e,t){return function(n){return n&&("[object Array]"===B.call(n)||n instanceof C.data.ObservableArray||(n=[n])),o(n,"remove",t,!0),(n=e(n))||[]}}(e.proxy(this.serialize,this),i)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),oe=C.data.Model.define({init:function(e){var t=this;C.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],n="_"+e+"Time";return this[n]?this[n]-C.date.toUtcTime(C.date.getDate(t)):E(t)},_date:function(e){var t="_"+e+"Time";return this[t]?this[t]-this._time(e):C.date.getDate(this[e])},clone:function(t,n){var i=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return n||(r.uid=i),r},duration:function(){var e=this.end,t=this.start,n=(e.getTimezoneOffset()-t.getTimezoneOffset())*C.date.MS_PER_MINUTE;return e-t-n},expand:function(e,t,n){return A?A.expand(this,e,t,n):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this._startTime&&this.set("_startTime",C.date.toUtcTime(this.start)),this._endTime&&this.set("_endTime",C.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=C.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return(t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}))[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=C.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e._startTime,delete e._endTime,e},shouldSerialize:function(e){return C.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var n,i,r,o=this.isAllDay||!1;C.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(n=C.date.getDate(this.start),i=new Date(this.end),0===(r=C.date.getMilliseconds(i))&&t&&(r=D),this.set("start",n),!0===t?(C.date.setTime(i,-r),n>i&&(i=n)):C.date.setTime(i,D-r),this.set("end",i))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:function(e){var t,n,i,r,o,a,l,d,c,u,h,p;return!(e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),i=t.find("[name=end]:visible"),i[0]&&n[0]&&(a=C.widgetInstance(n,C.ui),l=C.widgetInstance(i,C.ui),d=t.data("kendoEditable"),c=d?d.options.model:null,a&&l?(r=a.value(),o=l.value()):(r=C.parseDate(n.val()),o=C.parseDate(i.val())),r&&o)))||(c&&(u=n.attr(C.attr("timezone")),h=c.startTimezone,p=c.endTimezone,h=h||p,p=p||h,h&&(r=s(r,h,u),o=s(o,p,u))),o>=r)}}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),ae=$.extend({init:function(e){$.fn.init.call(this,z(!0,{},{schema:{modelBase:oe,model:oe}},e)),this.reader=new re(this.options.schema,this.reader)},expand:function(e,t){var n=this.view(),i={};return e&&t&&(i={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t=new Date(t.getTime()+D-1)}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+D-1)},{field:"end",operator:"gte",value:e}]}]},n=new C.data.Query(function(e,t,n,i){for(var r=e.length,o=[],a=0;r>a;a++)o=o.concat(e[a].expand(t,n,i));return o}(n,e,t,this.reader.timezone)).filter(i).toArray()),n},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),$.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof oe)){var n=t;(t=this._createNewModel()).accept(n)}return(!this._pushCreated&&t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),$.fn.insert.call(this,e,t)}},pushCreate:function(e){this._pushCreated=!0,$.fn.pushCreate.call(this,e),this._pushCreated=!1},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),$.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),n=t.shift(),i=e.id;n;)n.recurrenceId===i&&$.fn.remove.call(this,n),n=t.shift();e.set(Z,"")},_removeExceptionDate:function(e){var t,n;e.recurrenceId&&(t=this.get(e.recurrenceId))&&(n=e.start,t.set(Z,t.recurrenceException.replace(A.toExceptionString(n,this.reader.timezone),"")))},_addExceptionDate:function(e){var t=e.start,n=this.reader.timezone,i=this.get(e.recurrenceId),r=i.recurrenceException||"";A.isException(r,t,n)||i.set(Z,r+A.toExceptionString(t,n))}});ae.create=function(e){(U(e)||e instanceof C.data.ObservableArray)&&(e={data:e});var t=e||{},n=t.data;if(t.data=n,!(t instanceof ae)&&t instanceof C.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof ae?t:new ae(t)},z(!0,C.data,{SchedulerDataSource:ae,SchedulerDataReader:re,SchedulerEvent:oe}),h={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},p={mobile:{dateRange:function(t,n){var o={name:n.field},a=T.date?"":C.attr("role")+'="datepicker" ',s=C.attr("role")+'="datetimepicker" ',l=n.model.isAllDay,d=C.attr("validate")+"='"+!l+"'",c=C.attr("validate")+"='"+l+"'";i(o,n),r(o,n),e('<input type="datetime-local" required '+C.attr("type")+'="date" '+s+C.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+d+"/>").attr(o).appendTo(t),e('<input type="date" required '+C.attr("type")+'="date" '+a+C.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+c+"/>").attr(o).appendTo(t),e("<span "+C.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,i){var r=n(i.model,i.messages.noTimezone);e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+r+"</a>").click(i.click).appendTo(t)},timezone:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoMobileTimezoneEditor({optionLabel:n.noTimezone})},recurrence:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages,pane:n.pane,value:n.model[n.field]})},description:c,multipleResources:function(t,n){var i=l(n,t.field);return function(n){var r,o,a="",s=t.dataSource.view();for(r=0,o=s.length;o>r;r++)a+=C.format('<option value="{0}">{1}</option>',C.getter(t.dataValueField)(s[r]),C.getter(t.dataTextField)(s[r]));e(C.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',C.ns,t.field,a,t.valuePrimitive)).appendTo(n).attr(i)}},resources:d},desktop:{dateRange:function(t,n){var o={name:n.field},a=n.model.isAllDay,s=C.attr("validate")+"='"+!a+"' ",l=C.attr("validate")+"='"+a+"' ";i(o,n),r(o,n),e('<input type="text" required '+C.attr("type")+'="date" '+C.attr("role")+'="datetimepicker" '+C.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+s+"/>").attr(o).appendTo(t),e('<input type="text" required '+C.attr("type")+'="date" '+C.attr("role")+'="datepicker" '+C.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+l+"/>").attr(o).appendTo(t),e("<span "+C.attr("bind")+'="text: '+n.field+'Timezone"></span>').appendTo(t),"end"===n.field&&e("<span "+C.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+C.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,n){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+n.messages.timezoneEditorButton+"</a>").click(n.click).appendTo(t)},timezone:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoTimezoneEditor({optionLabel:n.noTimezone})},recurrence:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},description:c,multipleResources:function(t,n){var i=l(n,t.field);return function(n){e(C.format('<select data-{0}bind="value:{1}">',C.ns,t.field)).appendTo(n).attr(i).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}},resources:d}},f=C.Observable.extend({init:function(e,t){C.Observable.fn.init.call(this),this.element=e,this.options=z(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=j(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var n,i,r,o=this.container,a=this.editable.options.model.isAllDay,s=C.attr("bind");o.find("["+s+"*=end],["+s+"*=start]").each(function(){n=e(this),X.test(n.attr(s))&&(i=n.is("["+C.attr("role")+"=datetimepicker],[type*=datetime]"),r=a!==i,n.attr(C.attr("validate"),r))})}},fields:function(e,t){var n,i,r=this,o=r.options.messages,a=r.options.timezone,s=[{field:"title",title:o.editor.title},{field:"start",title:o.editor.start,editor:e.dateRange,timezone:a},{field:"end",title:o.editor.end,editor:e.dateRange,timezone:a},{field:"isAllDay",title:o.editor.allDayEvent}];C.timezone.windows_zones&&(s.push({field:"timezone",title:o.editor.timezone,editor:e.timezonePopUp,click:function(e){e.preventDefault(),r._initTimezoneEditor(t,this)},messages:o.editor,model:t}),s.push({field:"startTimezone",title:o.editor.startTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone}),s.push({field:"endTimezone",title:o.editor.endTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone})),t.recurrenceId||s.push({field:"recurrenceRule",title:o.editor.repeat,editor:e.recurrence,timezone:a,messages:o.recurrenceEditor,pane:this.pane}),"description"in t&&s.push({field:"description",title:o.editor.description,editor:e.description({model:t,field:"description"})});for(n=0;this.options.resources.length>n;n++)i=this.options.resources[n],s.push({field:i.field,title:i.title,editor:i.multiple?e.multipleResources(i,t):e.resources(i,t)});return s},end:function(){return this.editable.end()},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.messages,l=z({},C.Template,this.options.templateSettings),d=l.paramName,c=this.options.editable.template,u="";if(c)typeof c===F&&(c=window.unescape(c)),u+=C.template(c,l)(e);else for(i=0,r=t.length;r>i;i++)"startTimezone"===(o=t[i]).field&&(u+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',u+='<div class="k-edit-form-container">',u+='<div class="k-edit-label"></div>',u+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+s.editor.separateTimezones+"</label></div>"),u+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",!e.editable||e.editable(o.field)?(n.push(o),u+="<div "+C.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(a="#:",o.field?a+=(o=C.expr(o.field,d))+"==null?'':"+o:a+="''",a+="#",u+='<div class="k-edit-field">'+(a=C.template(a,l))(e)+"</div>"),"endTimezone"===o.field&&(u+=this._createEndTimezoneButton());return u},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),g=f.extend({init:function(){f.fn.init.apply(this,arguments),this.pane=C.mobile.ui.Pane.wrap(this.element),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view(),this._actionSheetButtonTemplate=C.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var i,r=this,o=r.pane,a=r.options.messages,s=r.timezoneView,l=r.container.find(".k-scheduler-timezones"),d=l.find(".k-timezone-toggle"),c=l.find(".k-edit-label:last").add(l.find(".k-edit-field:last")),u=function(e){if("startTimezone"===e.field){var n=t.startTimezone;d.prop("disabled",!n),n||(c.hide(),t.set("endTimezone",""),d.prop("checked",!1))}};r._startTimezone=t.startTimezone||"",r._endTimezone=t.endTimezone||"",s||(i='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+a.cancel+"</a>"+a.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+a.save+"</a></div></div>",this.timezoneView=s=o.append(i),s.contentElement().append(l.show()),s.element.on(W+V,".k-scheduler-cancel, .k-scheduler-update",function(i){var s,l;i.preventDefault(),i.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&r._revertTimezones(t),t.unbind("change",u),s=o.element.find("#edit").data("kendoMobileView"),l=n(t,a.editor.noTimezone),s.contentElement().find(".k-timezone-button").text(l),o.navigate(s,r.options.animations.right)}),d.click(function(){c.toggle(d.prop("checked")),t.set("endTimezone","")}),t.bind("change",u)),d.prop("checked",t.endTimezone).prop("disabled",!t.startTimezone),t.endTimezone?c.show():c.hide(),o.navigate(s,r.options.animations.left)},_createActionSheetButton:function(e){return e.template=this._actionSheetButtonTemplate,this.createButton(e)},showDialog:function(t){var n,i,r="",o='<ul><li class="km-actionsheet-title">'+t.title+"</li>",a=this.element.find(".k-event["+C.attr("uid")+"='"+t.model.uid+"']");for(this.container&&(a=this.container.find(".k-scheduler-delete"))[0]&&(r="phone"),n=0;t.buttons.length>n;n++)o+=this._createActionSheetButton(t.buttons[n]);(i=e(o+="</ul>").appendTo(this.pane.view().element).kendoMobileActionSheet({type:r,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(n){var r=i.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(n.currentTarget));r>-1&&(i.close(),t.buttons[r].click())},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet")).open(a)},editEvent:function(t){var n,i,r,o,a,s=this.pane,l="",d=this.options.messages,c=d.save,u=d.destroy,h=d.cancel,f=d.editor.editorTitle;return l+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+C.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+h+"</a>"+f+'<a href="#" class="k-button k-scheduler-update">'+c+"</a></div>",n=this.fields(p.mobile,t),i=this,r=[],l+=this._buildEditTemplate(t,n,r),!t.isNew()&&this.options.editable&&!1!==this.options.editable.destroy&&(l+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+u+"</a></div>"),l+="</div>",o=s.append(l),a=this.container=o.element,this.editable=a.kendoEditable({fields:r,model:t,clearContainer:!1,target:i.options.target,validateOnBlur:!0}).data("kendoEditable"),a.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),this.trigger("edit",{container:a,model:t})?this.trigger("cancel",{container:a,model:t}):(a.on(W+V,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(n){var r,o;n.preventDefault(),n.stopPropagation(),(r=e(this)).hasClass("k-scheduler-edit")?s.navigate("#edit",i.options.animations.right):(o="cancel",r.hasClass("k-scheduler-update")?o="save":r.hasClass("k-scheduler-delete")&&(o="remove"),i.trigger(o,{container:a,model:t}))}),s.navigate(o,i.options.animations.left),t.bind("change",i.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(C.roleSelector("view")).not(this.view.element)},close:function(){var e,t,n,i;if(this.container){for(this.pane.navigate("",this.options.animations.right),n=0,i=(e=this._views()).length;i>n;n++)(t=e.eq(n).data("kendoMobileView"))&&t.purge();e.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),m=f.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var n,i,r,o=this,a=o.options.editable,s="<div "+C.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=o.options.messages,d=l.save,c=l.cancel,u=l.destroy,h=this.fields(p.desktop,t),f=[];return s+=this._buildEditTemplate(t,h,f),i=L(a)?a.window:{},s+='<div class="k-edit-buttons k-state-default">',s+=this.createButton({name:"update",text:d,attr:n})+this.createButton({name:"canceledit",text:c,attr:n}),t.isNew()||!1===a.destroy||(s+=this.createButton({name:"delete",text:u,attr:n})),s+="</div></div></div>",r=this.container=e(s).appendTo(o.element).eq(0).kendoWindow(z({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&o.trigger(q,{container:r,model:t})&&e.preventDefault()}},i)),o.editable=r.kendoEditable({fields:f,model:t,clearContainer:!1,validateOnBlur:!0,target:o.options.target}).data("kendoEditable"),o.trigger(Q,{container:r,model:t})?o.trigger(q,{container:r,model:t}):(r.data("kendoWindow").center().open(),r.on(W+V,"a.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(q,{container:r,model:t})}),r.on(W+V,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("save",{container:r,model:t})}),r.on(W+V,"a.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(K,{container:r,model:t})}),C.cycleForm(r),t.bind("change",o.toggleDateValidationHandler)),o.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',(t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}))+"</div></div></div>"},showDialog:function(t){var n,i,r,o=C.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);for(o+='<div class="k-edit-buttons k-state-default">',n=0;t.buttons.length>n;n++)o+=this.createButton(t.buttons[n]);o+="</div></div></div>",i=this.element,this.popup&&this.popup.destroy(),(r=this.popup=e(o).appendTo(i).eq(0).on("click",".k-button",function(n){n.preventDefault(),r.close();var i=e(n.currentTarget).index();t.buttons[i].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),i.focus()}}).getKendoWindow()).center().open()},_initTimezoneEditor:function(e,t){var n,i=this,r=i.container.find(".k-scheduler-timezones"),o=r.find(".k-timezone-toggle"),a=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),s=r.find(".k-scheduler-savetimezone"),l=r.find(".k-scheduler-canceltimezone"),d=i._timezonePopup,c=function(t){if("startTimezone"===t.field){var n=e.startTimezone;o.prop("disabled",!n),n||(a.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};i._startTimezone=e.startTimezone,i._endTimezone=e.endTimezone,d||(i._timezonePopup=d=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:i.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(n){e.unbind("change",c),n.userTriggered&&i._revertTimezones(e),t&&t.focus()}}),o.click(function(){a.toggle(o.prop("checked")),e.set("endTimezone","")}),s.click(function(e){e.preventDefault(),n.close()}),l.click(function(t){t.preventDefault(),i._revertTimezones(e),n.close()}),e.bind("change",c)),o.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?a.show():a.hide(),(n=d.data("kendoWindow")).center().open()}}),v=M.extend({init:function(t,n){var i=this;P.fn.init.call(i,t,n),i.options.views&&i.options.views.length||(i.options.views=["day","week"]),i.resources=[],i._initModel(),i._wrapper(),i._views(),i._toolbar(),i._dataSource(),i._resources(),i._resizeHandler=function(){i.resize()},i.wrapper.on("mousedown"+V+" selectstart"+V,function(t){e(t.target).is(":kendoFocusable")||t.preventDefault()}),i.options.editable&&!1!==i.options.editable.resize&&i._resizable(),i._movable(),i._bindResize(),i.options.messages&&i.options.messages.recurrence&&(A.options=i.options.messages.recurrence),i._selectable(),i._ariaId=C.guid(),i._createEditor()},_bindResize:function(){e(window).on("resize"+V,this._resizeHandler)},_unbindResize:function(){e(window).off("resize"+V,this._resizeHandler)},dataItems:function(){var n,i,r,o,a,s=this.items(),l=this._data,d=e.map(s,function(t){return e(t).attr("data-uid")}),c={},u=d.length;for(n=0;u>n;n++)c[d[n]]=null;for(r=l.length,n=0;r>n;n++)c[(o=l[n]).uid]!==t&&(c[o.uid]=o);for(i in a=[],c)a.push(c[i]);return a},_isMobile:function(){var e=this.options;return!0===e.mobile&&C.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return!0===e.mobile&&C.support.mobileOS&&!C.support.mobileOS.tablet||"phone"===e.mobile},_groupsByResource:function(e,t,n,i,r){var o,a,s,l,d,c,u;if(n||(n=[]),o=e[0]){for(s=o.dataSource.view(),l=0,d=0;s.length>d;d++)c=C.getter(o.dataValueField)(s[d]),u=t+l+d,(a=this._groupsByResource(e.slice(1),u,n,c,o.field))[o.field]=c,l=a.groupIndex,r&&i&&(a[r]=i),1===e.length&&(a.groupIndex=t+d,n.push(a));return a}return{}},data:function(){return this._data},select:function(n){var i,r,o,a,s,l,d,c,u=this,h=u.view(),p=u._selection,f=h.groups;if(n===t)return o=h._selectedSlots,p?(p&&p.events&&(r=u._selectedEvents()),{start:p.start,end:p.end,events:r,slots:o,resources:h._resourceBySlot(p)}):[];if(!n)return u._selection=null,h.clearSelection(),t;if(e.isArray(n)&&(n={events:n.splice(0)}),n.resources){for(a in s=[],l=[],h.groupedResources&&u._groupsByResource(h.groupedResources,0,l),n.resources)s.push({field:a,operator:"eq",value:n.resources[a]});i=new C.data.Query(l).filter(s).toArray()}return n.events&&n.events.length?(u._selectEvents(n.events,i),u._select(),t):(f&&n.start&&n.end&&(d=I(h._startDate),C.date.addDays(I(h._endDate),1)>n.start&&n.end>=d&&(c=(i&&i.length?f[i[0].groupIndex]:f[0]).ranges(n.start,n.end,n.isAllDay,!1)).length&&(u._selection={start:C.timezone.toLocalDate(c[0].start.start),end:C.timezone.toLocalDate(c[c.length-1].end.end),groupIndex:c[0].start.groupIndex,index:c[0].start.index,isAllDay:c[0].start.isDaySlot,events:[]},u._select())),t)},_selectEvents:function(e,t){var n,i,r,o,a,s,l,d,c=this,u=c.view(),h=u.groups,p=e.length,f=t&&t.length;for(n=0;p>n;n++)if(h&&f){for(r=[],o=(i=h[t[0].groupIndex]).timeSlotCollectionCount(),a=i.daySlotCollectionCount(),s=0;o>s;s++)r=r.concat(i.getTimeSlotCollection(s).events());for(l=0;a>l;l++)r=r.concat(i.getDaySlotCollection(l).events());(r=new C.data.Query(r).filter({field:"element[0].getAttribute('data-uid')",operator:"eq",value:e[n]}).toArray())[0]&&c._createSelection(r[0].element)}else(d=u.element.find(C.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",e[n]))).length&&c._createSelection(d[0])},_selectable:function(){var t,n=this,i=n.wrapper,r=C.support.mobileOS?"touchend":"mousedown";n.options.selectable&&(n._tabindex(),i.on(r+V,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var t=e.which,r=e.button,o=C.support.browser,a=t&&3===t||r&&2==r;C.support.mobileOS&&e.isDefaultPrevented()||(a||n._createSelection(e.currentTarget),i.focus(),o.msie&&9>o.version&&setTimeout(function(){i.focus()}))}),t=e.proxy(n._mouseMove,n),i.on("mousedown"+V,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var n=e.which,r=e.button;n&&3===n||r&&2==r||i.on("mousemove"+V,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("mouseup"+V+" mouseleave"+V,function(){i.off("mousemove"+V,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("focus"+V,function(){n._selection||n._createSelection(n.wrapper.find(".k-scheduler-content").find("td:first")),n._select()}),i.on("focusout"+V,function(){n.view().clearSelection(),n._ctrlKey=n._shiftKey=!1}),i.on("keydown"+V,j(n._keydown,n)),i.on("keyup"+V,function(e){n._ctrlKey=e.ctrlKey,n._shiftKey=e.shiftKey}))},_select:function(){var t,n,i,r,o,a=this,s=a.view(),l=a.wrapper,d=s.current(),c=a._selection;if(d&&(d.removeAttribute("id"),d.removeAttribute("aria-label"),l.removeAttr("aria-activedescendant")),s.select(c),(d=s.current())&&a._old!==d){if(t=e(d).data("uid"),a._old&&t&&t===e(a._old).data("uid"))return;i=c,r=a._selectedEvents(),o=s._selectedSlots,r[0]?(i=r[0]||c,n=C.format(a.options.messages.ariaEventLabel,i.title,i.start,i.start)):n=C.format(a.options.messages.ariaSlotLabel,i.start,i.end),d.setAttribute("id",a._ariaId),d.setAttribute("aria-label",n),l.attr("aria-activedescendant",a._ariaId),a._old=d,a.trigger("change",{start:c.start,end:c.end,events:r,slots:o,resources:s._resourceBySlot(c)})}},_selectedEvents:function(){for(var e,t=this._selection.events,n=t.length,i=0,r=[];n>i;i++)(e=this.occurrenceByUid(t[i]))&&r.push(e);return r},_mouseMove:function(t){var n=this;clearTimeout(n._moveTimer),n._moveTimer=setTimeout(function(){var i,r,o,a=n.view(),s=n._selection;s&&(i=a.selectionByElement(e(t.currentTarget)))&&s.groupIndex===i.groupIndex&&(r=i.startDate(),o=i.endDate(),r>=s.end?s.backward=!1:s.start>=o&&(s.backward=!0),s.backward?s.start=r:s.end=o,n._select())},5)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_keydown:function(t){var n=this,i=t.keyCode,r=n.view(),o=r.options.editable,a=n._selection,s=t.shiftKey;n._ctrlKey=t.ctrlKey,n._shiftKey=t.shiftKey,i===O.TAB?r.moveToEvent(a,s)&&(n._select(),t.preventDefault()):o&&i===O.ENTER?a.events.length?!1!==o.update&&n.editEvent(a.events[0]):!1!==o.create&&(a.isAllDay&&(a=e.extend({},a,{end:C.date.addDays(a.end,-1)})),n.addEvent(z({},a,r._resourceBySlot(a)))):i===O.DELETE&&!1!==o&&!1!==o.destroy?n.removeEvent(a.events[0]):i>=49&&57>=i?n.view(n._viewByIndex(i-49)):r.move(a,i,s)&&(r.inRange(a)?n._select():n.date(a.start),t.preventDefault()),n._adjustSelectedDate()},_createSelection:function(t){var n,i,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,t.is(".k-event")&&(n=t.attr(C.attr("uid"))),(i=this.view().selectionByElement(t))&&(r.groupIndex=i.groupIndex||0),n&&(i=a(this._data,n)),i&&i.uid&&(n=[i.uid]),this._updateSelection(i,n),this._adjustSelectedDate()},_updateSelection:function(e,t){var n,i,r=this._selection;e&&r&&(n=this.view(),e.uid&&(e=n._updateEventForSelection(e)),this._shiftKey&&r.start&&r.end?(i=r.end>e.end,r.end=e.endDate?e.endDate():e.end,i&&n._timeSlotInterval&&C.date.setTime(r.end,-n._timeSlotInterval())):(r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end),r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,r.index=e.index,r.events=this._ctrlKey?r.events.concat(t||[]):t||[])},options:{name:"Scheduler",date:J,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:"Are you sure you want to delete this event?"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:[K,Q,q,Y,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var t=this;P.fn.destroy.call(t),t.dataSource&&(t.dataSource.unbind(G,t._refreshHandler),t.dataSource.unbind("progress",t._progressHandler),t.dataSource.unbind("error",t._errorHandler)),t.calendar&&(t.calendar.destroy(),t.popup.destroy()),t.view()&&t.view().destroy(),t._editor&&t._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t.element.add(t.wrapper).add(t.toolbar).add(t.popup).off(V),clearTimeout(t._moveTimer),t._model=null,t.toolbar=null,t.element=null,e(window).off("resize"+V,t._resizeHandler),C.destroy(t.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.find(".k-scheduler-content").children(".k-event, .k-task")},_movable:function(){var n,i,r,o,a,s,l,d=this,c=0,h=d._isMobile(),p=d.options.editable&&!1!==d.options.editable.move,f=d.options.editable&&!1!==d.options.editable.resize;(p||f&&h)&&(h&&C.support.mobileOS.android&&(c=5),d._moveDraggable=new C.ui.Draggable(d.element,{distance:c,filter:".k-event",ignore:".k-resize-handle",holdToDrag:h}),p&&d._moveDraggable.bind("dragstart",function(e){var o=d.view(),c=e.currentTarget;return o.options.editable&&!1!==o.options.editable.move?h&&!c.hasClass("k-event-active")?(d.element.find(".k-event-active").removeClass("k-event-active"),e.preventDefault(),t):(a=d.occurrenceByUid(c.attr(C.attr("uid"))),(s=a.clone()).update(o._eventOptionsForMove(s)),n=o._slotByPosition(e.x.startLocation,e.y.startLocation),r=n.startOffset(e.x.startLocation,e.y.startLocation,d.options.snap),i=n,l=n,(!n||d.trigger("moveStart",{event:a}))&&e.preventDefault(),t):(e.preventDefault(),t)}).bind("drag",function(e){var t,l,c=d.view(),h=c._slotByPosition(e.x.location,e.y.location);h&&(o=h.startOffset(e.x.location,e.y.location,d.options.snap),h.isDaySlot!==n.isDaySlot?(n=c._slotByPosition(e.x.location,e.y.location),r=n.startOffset(e.x.location,e.y.location,d.options.snap),t=o-r,s.isAllDay=h.isDaySlot,s.start=C.timezone.toLocalDate(r),s.end=C.timezone.toLocalDate(o),c._updateMoveHint(s,h.groupIndex,t),l={start:s.start,end:s.end}):(t=o-r,c._updateMoveHint(s,h.groupIndex,t),l=u(s,t)),d.trigger("move",{event:a,slot:{element:h.element,start:h.startDate(),end:h.endDate(),isDaySlot:h.isDaySlot},resources:c._resourceBySlot(h),start:l.start,end:l.end})?c._updateMoveHint(s,h.groupIndex,t):i=h)}).bind("dragend",function(t){var c,h,p,f,g,m,v;d.view()._removeMoveHint(),h=(c=u(s,o-r)).start,p=c.end,f=d.view()._resourceBySlot(i),g=d.view()._resourceBySlot(n),d.trigger("moveEnd",{event:a,slot:{element:i.element,start:i.startDate(),end:i.endDate()},start:h,end:p,resources:f})||a.start.getTime()===h.getTime()&&a.end.getTime()===p.getTime()&&l.isDaySlot===i.isDaySlot&&C.stringify(f)===C.stringify(g)||(m=d.view()._eventOptionsForMove(a),v=l.isDaySlot!==i.isDaySlot?i.isDaySlot?e.extend({start:i.startDate(),end:i.startDate(),isAllDay:i.isDaySlot},m,f):e.extend({isAllDay:i.isDaySlot,start:h,end:p},m,f):e.extend({isAllDay:a.isAllDay,start:h,end:p},m,f),d._updateEvent(null,a,v)),t.currentTarget.removeClass("k-event-active"),this.cancelHold()}).bind("dragcancel",function(){d.view()._removeMoveHint(),this.cancelHold()}),h&&(d._moveDraggable.bind("hold",function(e){d.element.find(".k-scheduler-monthview").length&&e.preventDefault(),d.element.find(".k-event-active").removeClass("k-event-active"),e.currentTarget.addClass("k-event-active")}),d._moveDraggable.userEvents.bind("press",function(e){e.preventDefault()})))},_resizable:function(){function t(e){var t,n={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in n)if(e.hasClass(t))return n[t]}var n,i,r,o,a,s=this,l=0;s._isMobile()&&C.support.mobileOS.android&&(l=5),s._resizeDraggable=new C.ui.Draggable(s.element,{distance:l,filter:".k-resize-handle",dragstart:function(t){var l=e(t.currentTarget).closest(".k-event").attr(C.attr("uid")),d=s.view();r=s.occurrenceByUid(l),o=r.clone(),d._updateEventForResize(o),a=d._slotByPosition(t.x.startLocation,t.y.startLocation),s.trigger("resizeStart",{event:r})&&t.preventDefault(),n=C.date.toUtcTime(o.start),i=C.date.toUtcTime(o.end)},drag:function(l){var d,c,u,h,p;a&&(d=t(e(l.currentTarget)),(u=(c=s.view())._slotByPosition(l.x.location,l.y.location))&&a.groupIndex==u.groupIndex&&(a=u,h=n,p=i,"south"==d?!a.isDaySlot&&a.end-C.date.toUtcTime(o.start)>=c._timeSlotInterval()&&(i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==d?!a.isDaySlot&&C.date.toUtcTime(o.end)-a.start>=c._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==d?a.isDaySlot&&C.date.toUtcTime(C.date.getDate(a.endDate()))>=C.date.toUtcTime(C.date.getDate(o.start))?i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&a.end-C.date.toUtcTime(o.start)>=c._timeSlotInterval()&&(i=a.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==d&&(a.isDaySlot&&C.date.toUtcTime(C.date.getDate(o.end))>=C.date.toUtcTime(C.date.getDate(a.startDate()))?n=a.startOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&C.date.toUtcTime(o.end)-a.start>=c._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap))),s.trigger("resize",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:C.timezone.toLocalDate(n),end:C.timezone.toLocalDate(i),resources:c._resourceBySlot(a)})?(n=h,i=p):c._updateResizeHint(o,a.groupIndex,n,i)))},dragend:function(l){var d=e(l.currentTarget),c=new Date(o.start.getTime()),u=new Date(o.end.getTime()),h=t(d);s.view()._removeResizeHint(),"south"==h?u=C.timezone.toLocalDate(i):"north"==h?c=C.timezone.toLocalDate(n):"east"==h?u=a.isDaySlot?C.date.getDate(C.timezone.toLocalDate(i)):C.timezone.toLocalDate(i):"west"==h&&(a.isDaySlot?((c=new Date(C.timezone.toLocalDate(n))).setHours(0),c.setMinutes(0)):c=C.timezone.toLocalDate(n)),!s.trigger("resizeEnd",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:c,end:u,resources:s.view()._resourceBySlot(a)})&&u.getTime()>=c.getTime()&&(o.start.getTime()!=c.getTime()||o.end.getTime()!=u.getTime())&&(s.view()._updateEventForResize(r),s._updateEvent(h,r,{start:c,end:u})),a=null,r=null},dragcancel:function(){s.view()._removeResizeHint(),a=null,r=null}})},_updateEvent:function(e,t,n){var i,r=this,o=function(e,t){try{r._preventRefresh=!0,e.update(n),r._convertDates(e)}finally{r._preventRefresh=!1}r.trigger(Y,{event:e})||(t&&t(),r._updateSelection(e),r.dataSource.sync())},a=function(e){return e.recurrenceRule?r.dataSource.getByUid(e.uid):r.dataSource.get(e.recurrenceId)};t.recurrenceRule||t.isOccurrence()?(i=r.options.messages.recurrenceMessages,r._showRecurringDialog(t,function(){var e=a(t),n=e.toOccurrence({start:t.start,end:t.end});o(r.dataSource.add(n),function(){r._convertDates(e)})},function(){var i,s,l=a(t);("south"==e||"north"==e)&&(n.start&&(i=C.date.getDate(l.start),C.date.setTime(i,E(n.start)),n.start=i),n.end&&(s=C.date.getDate(l.end),C.date.setTime(s,E(n.end)),n.end=s)),r.dataSource._removeExceptions(l),o(l)},{title:i.editWindowTitle,text:i.editRecurring?i.editRecurring:ee,occurrenceText:i.editWindowOccurrence,seriesText:i.editWindowSeries})):o(r.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+C.attr("uid")+"]"),this.dataSource.getByUid(t.attr(C.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t){var n,i,r,o,a,s=this.options.editable;!0===s||!1!==s.confirmation?(i=(n=this.options.messages).deleteWindowTitle,r=typeof s.confirmation===F?s.confirmation:n.editable.confirmation,this._isEditorOpened()&&t.isRecurring()&&(i=(o=this.options.messages.recurrenceMessages).deleteWindowTitle,r=t.isException()?o.deleteRecurringConfirmation?o.deleteRecurringConfirmation:"Are you sure you want to delete this event occurrence?":o.deleteSeriesConfirmation?o.deleteSeriesConfirmation:"Are you sure you want to delete the whole series?"),a=[{name:"destroy",text:n.destroy,click:function(){e()}}],this._isMobile()&&C.mobile.ui.Pane||a.push({name:"canceledit",text:n.cancel,click:function(){e(!0)}}),this._unbindResize(),this.showDialog({model:t,text:r,title:i,buttons:a}),this._bindResize()):e()},addEvent:function(e){var t,n=this._editor.editable,i=this.dataSource;e=e||{},!this.trigger("add",{event:e})&&(n&&n.end()||!n)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),(t=i.add(e))&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e,t,n,i=this._editor;i&&(e=i.editable,t=i.container,n=this._modelForContainer(t),t&&e&&e.end()&&!this.trigger(Y,{container:t,event:n})&&(n.isRecurrenceHead()&&this.dataSource._removeExceptions(n),n.dirty||n.isOccurrence()||this._convertDates(n,"remove"),this.dataSource.sync()))},cancelEvent:function(){var e,t=this._editor,n=t.container;n&&((e=this._modelForContainer(n))&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._unbindResize(),this._createPopupEditor(e),this._bindResize()},_editRecurringDialog:function(e){var t=this,n=t.options.messages.recurrenceMessages;t._showRecurringDialog(e,function(){e.isException()?t._editEvent(e):t.addEvent(e)},function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},{title:n.editWindowTitle,text:n.editRecurring?n.editRecurring:ee,occurrenceText:n.editWindowOccurrence,seriesText:n.editWindowSeries})},_showRecurringDialog:function(e,t,n,i){var r=this.options.editable,o=L(r)?r.editRecurringMode:"dialog";"series"===o?n():"occurrence"===o?t():(this._unbindResize(),this.showDialog({model:e,title:i.title,text:i.text,buttons:[{text:i.occurrenceText,click:t},{text:i.seriesText,click:n}]}),this._bindResize())},_createButton:function(e){var t=e.template||'<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',n=typeof e===F?e:e.name||e.text,i={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||L(e)&&e.template))throw Error("Custom commands should have name specified");return L(e)?(e.className&&(e.className+=" "+i.className),"edit"===n&&L(e.text)&&((e=z(!0,{},e)).text=e.text.edit),i=z(!0,i,h[n],e)):i=z(!0,i,h[n]),C.template(t)(i)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,i=e.startTimezone,r=e.endTimezone,o=e.start,a=e.start;t=t||"apply",i=i||r,r=r||i,i&&(n?"apply"===t?(o=C.timezone.convert(e.start,n,i),a=C.timezone.convert(e.end,n,r)):(o=C.timezone.convert(e.start,i,n),a=C.timezone.convert(e.end,r,n)):(o=C.timezone[t](e.start,i),a=C.timezone[t](e.end,r)),e._set("start",o),e._set("end",a))},_createEditor:function(){var e,n=this;(e=n._editor=this._isMobile()&&C.mobile.ui.Pane?new g(this.wrapper,z({},this.options,{target:this,timezone:n.dataSource.reader.timezone,resources:n.resources,createButton:j(this._createButton,this)})):new m(this.wrapper,z({},this.options,{target:this,createButton:j(this._createButton,this),timezone:n.dataSource.reader.timezone,resources:n.resources}))).bind("cancel",function(e){return n.trigger("cancel",{container:e.container,event:e.model})?(e.preventDefault(),t):(n.cancelEvent(),n.focus(),t)}),e.bind("edit",function(e){n.trigger(Q,{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){n.saveEvent()}),e.bind("remove",function(e){n.removeEvent(e.model)})},_createPopupEditor:function(e){var t=this._editor;(!e.isNew()||e.isOccurrence())&&(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,n="string"==typeof e?t.occurrenceByUid(e):e;n&&(n.isRecurring()?t._deleteRecurringDialog(n):t._confirmation(function(e){e||t._removeEvent(n)},n))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=a(this._data,e)),t},occurrencesInRange:function(e,t){return new C.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(K,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t,n,i,r,o,a=this,s=e,l=a.options.editable,d=L(l)?l.editRecurringMode:"dialog",c=function(){var e=s.recurrenceId?s:s.toOccurrence(),t=a.dataSource.get(e.recurrenceId);a._convertDates(t),a._removeEvent(e)},u=function(){s.recurrenceId&&(s=a.dataSource.get(s.recurrenceId)),a._removeEvent(s)};("dialog"!=d||a._isEditorOpened())&&(t=function(){a._confirmation(function(e){e||c()},s)},n=function(){a._confirmation(function(e){e||u()},s)}),i=n||u,r=t||c,a._isEditorOpened()?e.isException()?r():i():(o=a.options.messages.recurrenceMessages,a._showRecurringDialog(e,r,i,{title:o.deleteWindowTitle,text:o.deleteRecurring?o.deleteRecurring:"Do you want to delete only this event occurrence or the whole series?",occurrenceText:o.deleteWindowOccurrence,seriesText:o.deleteWindowSeries}))},_isEditorOpened:function(){return!!this._editor.container},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(K,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(K,t._viewRemoveHandler),t._viewAddHandler&&e.unbind("add",t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind("add",this._viewAddHandler),t._viewEditHandler&&e.unbind(Q,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(Q,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var n,i;e.view&&(i=(n="isWorkDay"in e)?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:i,date:e.date})||(n&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){t._selection&&(this.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t,n,i=this;e&&i.views[e]&&(i._selectedView&&i._unbindView(i._selectedView),i._selectedView=i._renderView(e),i._selectedViewName=e,i._viewsCount>1&&(t=te({views:i.views,view:e,ns:C.ns}),(n=i.toolbar.find(".k-scheduler-views li:first-child")).is(".k-current-view")?n.replaceWith(t):i.toolbar.find(".k-scheduler-views").prepend(t),i.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected")))},view:function(e){var n=this;return e?(n._selectView(e),n.rebind(),t):n._selectedView},viewName:function(){return this.view().name},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),this._model.set("formattedShortDate",t.shortDateForTitle()),t},resize:function(e){var t=this.getSize(),n=this._size,i=this.view();i&&i.groups&&(e||!n||t.width!==n.width||t.height!==n.height)&&(this.refresh({action:"resize"}),this._size=t)},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!C.date.isInDateRange(e,I(n),I(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t,n,i=this.views[e];if(i){if(t=L(i),typeof(n=i.type)===F&&(n=C.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,function(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}(z(!0,{},this.options,t?i:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}return i},_views:function(){var e,t,n,i,r,o,a,s,l=this.options.views;for(this.views={},this._viewsCount=0,o=0,a=l.length;a>o;o++)s=!1,e=l[o],(i=L(e))?typeof(r=e.type?e.type:e)!==F&&(r=e.title,s=!0):r=e,(t=b[r])&&!s&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=z({title:r},t,i?e:{}),r&&(this.views[r]=e,this._viewsCount++,(!n||e.selected)&&(n=r));n&&(this._selectedViewName=n)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=U(n)?{data:n}:n,!t.timezone||n instanceof ae?n instanceof ae&&(t.timezone=n.options.schema?n.options.schema.timezone:""):n=z(!0,n,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(G,e._refreshHandler).unbind("progress",e._progressHandler).unbind("error",e._errorHandler):(e._refreshHandler=j(e.refresh,e),e._progressHandler=j(e._requestStart,e),e._errorHandler=j(e._error,e)),e.dataSource=C.data.SchedulerDataSource.create(n).bind(G,e._refreshHandler).bind("progress",e._progressHandler).bind("error",e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");C.ui.progress(t,e)},_resources:function(){var t,n,i,r,o,a=this,s=a.options.resources;for(t=0;s.length>t;t++){if(i=(n=s[t]).field,r=n.dataSource,!i||!r)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');a.resources.push({field:i,name:n.name||i,title:n.title||i,dataTextField:n.dataTextField||"text",dataValueField:n.dataValueField||"value",dataColorField:n.dataColorField||"color",valuePrimitive:null==n.valuePrimitive||n.valuePrimitive,multiple:n.multiple||!1,dataSource:C.data.DataSource.create(r)})}o=e.map(a.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,o).then(function(){a.options.autoBind?a.view(a._selectedViewName):a._selectView(a._selectedViewName)})},_initModel:function(){var e=this;e._model=C.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options,n=t.height,i=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),e._isMobilePhoneView()&&e.wrapper.addClass("k-scheduler-phone"),n&&e.wrapper.height(n),i&&e.wrapper.width(i)},date:function(e){return null!=e&&I(e)>=I(this.options.min)&&I(e)<=I(this.options.max)&&this._model.set("selectedDate",e),I(this._model.get("selectedDate"))},_toolbar:function(){var n,i,r=this,o=r.options,a=[];o.toolbar&&(a=e.isArray(o.toolbar)?o.toolbar:[o.toolbar]),n=this._isMobilePhoneView()?ie:ne,i=e(n({messages:o.messages,pdf:e.grep(a,function(e){return"pdf"==e||"pdf"==e.name}).length>0,ns:C.ns,views:r.views,viewsCount:r._viewsCount})),r.wrapper.append(i),r.toolbar=i,C.bind(r.toolbar,r._model),i.on(W+V,".k-pdf",function(e){e.preventDefault(),r.saveAsPDF()}),i.on(W+V,".k-scheduler-navigation li",function(n){var i=e(this),o=new Date(r.date()),a="";if(n.preventDefault(),i.hasClass("k-nav-today"))a="today",o=new Date;else if(i.hasClass("k-nav-next"))a="next",o=r.view().nextDate();else if(i.hasClass("k-nav-prev"))a="previous",o=r.view().previousDate();else if(i.hasClass("k-nav-current")&&!r._isMobilePhoneView())return r._showCalendar(),t;r.trigger("navigate",{view:r._selectedViewName,action:a,date:o})||r.date(o)}),i.on(W+V,".k-scheduler-views li, .k-scheduler-refresh",function(t){t.preventDefault();var n=e(this).attr(C.attr("name"));r.trigger("navigate",{view:n,action:"changeView",date:r.date()})||(r.view(n),r.element.find(".k-state-expanded").removeClass("k-state-expanded"))}),i.on(W+V,".k-scheduler-views li.k-current-view",function(){r.element.find(".k-scheduler-views").toggleClass("k-state-expanded")}),i.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,n=t.toolbar.find(".k-nav-current"),i=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new H(i,{anchor:n,activate:function(){t.calendar||(t.calendar=new N(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())},min:t.options.min,max:t.options.max})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this,n=this.view();this._progress(!1),this.angular("cleanup",function(){return{elements:t.items()}}),e=e||{},n&&(e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(n.startDate(),n.endDate()),n.render(this._data),this.trigger("dataBound")))},slotByPosition:function(e,t){var n,i=this.view();return i._slotByPosition&&(n=i._slotByPosition(e,t))?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null},slotByElement:function(t){var n=e(t).offset();return this.slotByPosition(n.left,n.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),b={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}},R.plugin(v),C.PDFMixin&&(C.PDFMixin.extend(v.prototype),_="k-scheduler-pdf-export",v.fn._drawPDF=function(t){var n,i,r=this.wrapper,o=r[0].style.cssText;return r.css({width:r.width(),height:r.height()}),r.addClass(_),this.resize(!0),n=this,i=new e.Deferred,this._drawPDFShadow().done(function(e){var n={page:e,pageNumber:1,progress:1,totalPages:1};t.notify(n),i.resolve(n.page)}).fail(function(e){i.reject(e)}).always(function(){r[0].style.cssText=o,r.removeClass(_),n.resize(!0)}),i}),k=P.extend({init:function(e,t){var n=this,i=C.timezone.windows_zones;if(!i||!C.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");P.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new C.data.Query(i),n._zoneTitleId=C.guid(),n._zoneTitlePicker(),n._zonePicker(),n._zoneTitle.bind("cascade",function(){this.value()||n._zone.wrapper.hide()}),n._zone.bind("cascade",function(){n._value=this.value(),n.trigger("change")}),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'"/>').appendTo(t.wrapper);t._zoneTitle=new C.ui.DropDownList(n,{dataSource:C.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel})},_zonePicker:function(){var t=this,n=e("<input />").appendTo(this.wrapper);t._zone=new C.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){P.fn.destroy.call(this),C.destroy(this.wrapper)},value:function(e){var n,i=this;return e===t?i._value:((n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])?(i._zoneTitle.value(n.other_zone),i._zone.value(n.zone)):i._zoneTitle.select(0),t)}}),R.plugin(k),w=C.template('<option value="#=other_zone#">#=name#</option>'),y=C.template('<option value="#=zone#">#=territory#</option>'),x=P.extend({init:function(e,t){var n=this,i=C.timezone.windows_zones;if(!i||!C.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");P.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new C.data.Query(i),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,y))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,n){var i=0,r="",o=e.length;for(n&&(r+=t({other_zone:"",name:n}));o>i;i++)r+=t(e[i]);return r},_zoneTitlePicker:function(){var t=this,n=t._options(C.timezone.zones_titles,w,t.options.optionLabel);t._zoneTitle=e("<select>"+n+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,n=t._zone;t._bindZones(e),e&&n[0].children.length>1?n.show():n.hide(),t._value=n[0].value,t.trigger("change")})},_zonePicker:function(){var t=this;t._zone=e('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){t._value=this.value,t.trigger("change")}),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){P.fn.destroy.call(this),C.destroy(this.wrapper)},value:function(e){var n,i=this,r=i._zone,o="",a="";return e===t?i._value:((n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])&&(a=n.zone,o=n.other_zone),i._zoneTitle.val(o),i._bindZones(o),r.val(a),(a=r[0].value)&&r[0].children.length>1?r.show():r.hide(),i._value=a,t)}}),R.plugin(x)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.Widget,i=e.proxy,r=Math.abs,o=n.extend({init:function(e,r){function o(e){return function(t){s._triggerTouch(e,t)}}function a(e){return function(t){s.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var s=this;n.fn.init.call(s,e,r),r=s.options,e=s.element,s.wrapper=e,s.events=new t.UserEvents(e,{filter:r.filter,surface:r.surface,minHold:r.minHold,multiTouch:r.multiTouch,allowSelection:!0,press:o("touchstart"),hold:o("hold"),tap:i(s,"_tap"),gesturestart:a("gesturestart"),gesturechange:a("gesturechange"),gestureend:a("gestureend")}),r.enableSwipe?(s.events.bind("start",i(s,"_swipestart")),s.events.bind("move",i(s,"_swipemove"))):(s.events.bind("start",i(s,"_dragstart")),s.events.bind("move",o("drag")),s.events.bind("end",o("dragend"))),t.notify(s)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var n=this,i=n.lastTap,r=e.touch;i&&n.options.doubleTapTimeout>r.endTime-i.endTime&&t.touchDelta(r,i).distance<20?(n._triggerTouch("doubletap",e),n.lastTap=null):(n._triggerTouch("tap",e),n.lastTap=r)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this.options,n=e.touch,i=e.event.timeStamp-n.startTime,o=n.x.initialDelta>0?"right":"left";r(n.x.initialDelta)>=t.minXDelta&&r(n.y.initialDelta)<t.maxYDelta&&t.maxDuration>i&&(this.trigger("swipe",{direction:o,touch:e.touch}),n.cancel())}});t.ui.plugin(o)}(window.kendo.jQuery),function(e){function t(){var t=n._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var n=window.kendo,i=n.dom,r=i.element,o=i.text,a=n.support.browser,s=n.support.mobileOS,l=n.ui,d=l.Widget,c=e.extend,u=e.map,h=e.isFunction,p=a.msie&&9>a.version,f=n.keys,g={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},m=".kendoGanttList",v="click",b=".",_=l.GanttList=d.extend({init:function(e,t){d.fn.init.call(this,e,t),0===this.options.columns.length&&this.options.columns.push("title"),this.dataSource=this.options.dataSource,this._columns(),this._layout(),this._domTrees(),this._header(),this._sortable(),this._editable(),this._selectable(),this._draggable(),this._attachEvents(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.parent().outerHeight())},destroy:function(){d.fn.destroy.call(this),this._reorderDraggable&&this._reorderDraggable.destroy(),this._tableDropArea&&this._tableDropArea.destroy(),this._contentDropArea&&this._contentDropArea.destroy(),this.touch&&this.touch.destroy(),this.timer&&clearTimeout(this.timer),this.content.off(m),this.header.find(b+_.link).off(m),this.header=null,this.content=null,this.levels=null,n.destroy(this.element)},options:{name:"GanttList",selectable:!0,editable:!0},_attachEvents:function(){var t=this,n=_.styles;t.content.on(v+m,"td > span."+n.icon+":not(."+n.iconHidden+")",function(n){var i=e(this),r=t._modelFromElement(i);r.set("expanded",!r.get("expanded")),n.stopPropagation()})},_domTrees:function(){this.headerTree=new i.Tree(this.header[0]),this.contentTree=new i.Tree(this.content[0])},_columns:function(){var e=this.options.columns,t=function(){this.field="",this.title="",this.editable=!1,this.sortable=!1};this.columns=u(e,function(e){return e="string"==typeof e?{field:e,title:g[e]}:e,c(new t,e)})},_layout:function(){var e=this.element,t=_.styles;e.addClass(t.wrapper).append("<div class='"+t.gridHeader+"'><div class='"+t.gridHeaderWrap+"'></div></div>").append("<div class='"+t.gridContentWrap+"'></div>"),this.header=e.find(b+t.gridHeaderWrap),this.content=e.find(b+t.gridContent)},_header:function(){var e=this.headerTree,t=r("colgroup",null,this._cols()),n=r("thead",{role:"rowgroup"},[r("tr",{role:"row"},this._ths())]),i=r("table",{style:{minWidth:this.options.listWidth+"px"},role:"grid"},[t,n]);e.render([i])},_render:function(e){var t,n,i;this.levels=[{field:null,value:0}],t=r("colgroup",null,this._cols()),n=r("tbody",{role:"rowgroup"},this._trs(e)),i=r("table",{style:{minWidth:this.options.listWidth+"px"},tabIndex:0,role:"treegrid"},[t,n]),this.contentTree.render([i]),this.trigger("render")},_ths:function(){var e,t,n,i,a=this.columns,s=[];for(n=0,i=a.length;i>n;n++)t={"data-field":(e=a[n]).field,"data-title":e.title,className:_.styles.header,role:"columnheader"},s.push(r("th",t,[o(e.title)]));return s},_cols:function(){var e,t,n,i,o=this.columns,a=[];for(n=0,i=o.length;i>n;n++)e=(t=o[n].width)&&0!==parseInt(t,10)?{style:{width:"string"==typeof t?t:t+"px"}}:null,a.push(r("col",e,[]));return a},_trs:function(e){var t,n,i,r,o,a=[],s=[],l=_.styles;for(r=0,o=e.length;o>r;r++)t=e[r],i=this._levels({idx:t.parentId,id:t.id,summary:t.summary}),n={"data-uid":t.uid,"data-level":i,role:"row"},t.summary&&(n["aria-expanded"]=t.expanded),r%2!=0&&s.push(l.alt),t.summary&&s.push(l.group),s.length&&(n.className=s.join(" ")),a.push(this._tds({task:t,attr:n,level:i})),s=[];return a},_tds:function(e){var t,n,i,o=[],a=this.columns;for(n=0,i=a.length;i>n;n++)t=a[n],o.push(this._td({task:e.task,column:t,level:e.level}));return r("tr",e.attr,o)},_td:function(e){var t,i,a,s=[],l=this.options.resourcesField,d=_.styles,c=e.task,u=e.column,h=c.get(u.field)||[];if(u.field==l){for(t=[],i=0;h.length>i;i++)t.push(n.format("{0} [{1}]",h[i].get("name"),h[i].get("formatedValue")));t=t.join(", ")}else t=u.format?n.format(u.format,h):h;return"title"===u.field&&((s=function(e){var t,n,i=[],o=e.className;for(t=0,n=e.level;n>t;t++)i.push(r("span",{className:o}));return i}({level:e.level,className:d.iconPlaceHolder})).push(r("span",{className:d.icon+" "+(c.summary?c.expanded?d.iconCollapse:d.iconExpand:d.iconHidden)})),a=n.format("{0}, {1:P0}",t,c.percentComplete)),s.push(r("span",{"aria-label":a},[o(t)])),r("td",{role:"gridcell"},s)},_levels:function(e){var t,n,i,r=this.levels,o=e.summary,a=e.idx,s=e.id;for(n=0,i=r.length;i>n;n++)if((t=r[n]).field==a)return o&&r.push({field:s,value:t.value+1}),t.value},_sortable:function(){var e,t,i,r,o,a=this,s=this.options.resourcesField,l=this.columns,d=this.header.find("th"),c=function(e){a.editable&&a.editable.trigger("validate")&&(e.preventDefault(),e.stopImmediatePropagation())};for(r=0,o=d.length;o>r;r++)(e=l[r]).sortable&&e.field!==s&&((t=(i=d.eq(r)).data("kendoColumnSorter"))&&t.destroy(),i.attr("data-"+n.ns+"field",e.field).kendoColumnSorter({dataSource:this.dataSource}).find(b+_.link).on("click"+m,c));d=null},_selectable:function(){var t=this;this.options.selectable&&this.content.on(v+m,"tr",function(n){var i=e(this);t.editable&&t.editable.trigger("validate"),n.ctrlKey?t.clearSelection():t.select(i)})},select:function(e){var t=this.content.find(e),n=_.styles.selected;return t.length?(t.siblings(b+n).removeClass(n).attr("aria-selected",!1).end().addClass(n).attr("aria-selected",!0),void this.trigger("change")):this.content.find(b+n)},clearSelection:function(){var e=this.select();e.length&&(e.removeClass(_.styles.selected),this.trigger("change"))},_setDataSource:function(e){this.dataSource=e},_editable:function(){var n=this,i=_.styles,r="span."+i.icon+":not("+i.iconHidden+")",o=function(){var e=n.editable;e&&(e.end()?n._closeCell():e.trigger("validate"))},a=function(n){e(n.currentTarget).hasClass(i.editCell)||t()};this.options.editable&&(this._startEditHandler=function(t){var i=t.currentTarget?e(t.currentTarget):t,r=n._columnFromElement(i);n.editable||r.editable&&n._editCell({cell:i,column:r})},n.content.on("focusin"+m,function(){clearTimeout(n.timer),n.timer=null}).on("focusout"+m,function(){n.timer=setTimeout(o,1)}).on("keyup"+m,function(e){var i,r;switch(e.keyCode){case f.ENTER:t(),o();break;case f.ESC:n.editable&&(i=n._editableContainer,r=n._modelFromElement(i),n.trigger("cancel",{model:r,cell:i})||n._closeCell(!0))}}),s?n.touch=n.content.kendoTouch({filter:"td",touchstart:function(e){a(e.touch)},doubletap:function(t){e(t.touch.initialTouch).is(r)||n._startEditHandler(t.touch)}}).data("kendoTouch"):n.content.on("mousedown"+m,"td",function(e){a(e)}).on("dblclick"+m,"td",function(t){e(t.target).is(r)||n._startEditHandler(t)}))},_editCell:function(t){var i,r=this.options.resourcesField,o=_.styles,a=t.cell,s=t.column,l=this._modelFromElement(a),d=this.dataSource._createNewModel(l.toJSON()),c=d.fields[s.field]||d[s.field],u=c.validation,f=n.attr("type"),g=n.attr("bind"),m=n.attr("format"),v={name:s.field,required:!!c.validation&&!0===c.validation.required};return s.field===r?void s.editor(a,d):(this._editableContent=a.children().detach(),this._editableContainer=a,a.data("modelCopy",d),"date"!==c.type&&"date"!==e.type(c)||s.format&&!/H|m|s|F|g|u/.test(s.format)||(v[g]="value:"+s.field,v[f]="date",s.format&&(v[m]=n._extractFormat(s.format)),i=function(t,n){e('<input type="text"/>').attr(v).appendTo(t).kendoDateTimePicker({format:n.format})}),this.editable=a.addClass(o.editCell).kendoEditable({fields:{field:s.field,format:s.format,editor:s.editor||i},model:d,clearContainer:!1}).data("kendoEditable"),u&&u.dateCompare&&h(u.dateCompare)&&u.message&&(e("<span "+n.attr("for")+'="'+s.field+'" class="k-invalid-msg"/>').hide().appendTo(a),a.find("[name="+s.field+"]").attr(n.attr("dateCompare-msg"),u.message)),this.trigger("edit",{model:l,cell:a})&&this._closeCell(!0),void this.editable.bind("validate",function(e){var t=this.element.find(":kendoFocusable:first").focus();p&&t.focus(),e.preventDefault()}))},_closeCell:function(e){var t=_.styles,n=this._editableContainer,i=this._modelFromElement(n),r=this._columnFromElement(n).field,o=n.data("modelCopy"),a={};a[r]=o.get(r),n.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent),this.editable.unbind(),this.editable.destroy(),this.editable=null,this._editableContainer=null,this._editableContent=null,e||("start"===r&&(a.end=new Date(a.start.getTime()+i.duration())),this.trigger("update",{task:i,updateInfo:a}))},_draggable:function(){var t,i=this,r=null,o=!0,a=_.styles,l="tr["+n.attr("level")+" = 0]:last",d={},u=function(){r=null,t=null,o=!0,d={}},h=function(){var i=e(t).height(),r=n.getOffset(t).top;c(t,{beforeLimit:r+.25*i,afterLimit:r+.75*i})},p=function(){return i._reorderDraggable.hint.children(b+a.dragStatus).removeClass(a.dropPositions)};this.options.editable&&(this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:s,group:"listGroup",filter:"tr[data-uid]",ignore:b+a.input,hint:function(t){return e('<div class="'+a.header+" "+a.dragClue+'"/>').css({width:300,paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).append('<span class="'+a.icon+" "+a.dragStatus+'" /><span class="'+a.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(e){return i.editable&&i.editable.trigger("validate")?void e.preventDefault():(r=i._modelFromElement(e.currentTarget),void this.hint.children(b+a.dragClueText).text(r.get("title")))},drag:function(e){o&&(function(e){var i,r=e.location,o=a.dropAdd,s="add",l=parseInt(t.attr(n.attr("level")),10);t.beforeLimit>=r?(i=t.prev(),o=a.dropTop,s="insert-before"):r>=t.afterLimit&&(i=t.next(),o=a.dropBottom,s="insert-after"),i&&parseInt(i.attr(n.attr("level")),10)===l&&(o=a.dropMiddle),d.className=o,d.command=s}(e.y),p().addClass(d.className))},dragend:function(){u()},dragcancel:function(){u()}}).data("kendoDraggable"),this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(e){t=e.dropTarget,function(e){for(var t=e;t;){if(r.get("id")===t.get("id")){o=!1;break}t=i.dataSource.taskParent(t)}}(i._modelFromElement(t)),h(),p().toggleClass(a.dropDenied,!o)},dragleave:function(){o=!0,p()},drop:function(){var e=i._modelFromElement(t),n=e.orderId,a={parentId:e.parentId};if(o){switch(d.command){case"add":a.parentId=e.id;break;case"insert-before":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?n-1:n;break;case"insert-after":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?n:n+1}i.trigger("update",{task:r,updateInfo:a})}}}).data("kendoDropTargetArea"),this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:b+a.gridContent,drop:function(){var e=i._modelFromElement(i.content.find(l)).orderId,t={parentId:null,orderId:null!==r.parentId?e+1:e};i.trigger("update",{task:r,updateInfo:t})}}).data("kendoDropTargetArea"))},_modelFromElement:function(e){var t=e.closest("tr");return this.dataSource.getByUid(t.attr(n.attr("uid")))},_columnFromElement:function(e){var t=e.closest("td"),n=t.parent().children().index(t);return this.columns[n]}});c(!0,l.GanttList,{styles:{wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",link:"k-link",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"}})}(window.kendo.jQuery),function(e){function t(){var t=kendo._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var n,i,r=kendo.ui.Widget,o=kendo.dom.element,a=kendo.dom.text,s=e.isPlainObject,l=e.extend,d=e.proxy,c=kendo.support.browser,u=!1,h=kendo.keys,p=kendo.data.Query,f=".kendoGanttTimeline",g="click",m="mousemove",v="mouseleave",b=".",_=kendo.template("#=kendo.toString(start, 't')#"),k=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),w=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),y=kendo.template("#=kendo.toString(start, 'MMM')#"),x=kendo.template("#=kendo.toString(start, 'yyyy')#"),C=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),S=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>#=messages.start#: #=kendo.toString(start, format)#</div><div>#=messages.end#: #=kendo.toString(end, format)#</div></div></div>'),T=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),D=kendo.template('<div class="#=styles.taskDetails#"><strong>#=task.title#</strong><div class="#=styles.taskDetailsPercent#">#=kendo.toString(task.percentComplete, "p0")#</div><ul class="#=styles.reset#"><li>#=messages.start#: #=kendo.toString(task.start, "h:mm tt ddd, MMM d")#</li><li>#=messages.end#: #=kendo.toString(task.end, "h:mm tt ddd, MMM d")#</li></ul></div>'),I={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}},E=kendo.ui.GanttView=r.extend({init:function(e,t){r.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this.header=this.element.find(b+E.styles.gridHeader),this.content=this.element.find(b+E.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=function(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}(this.options),this._headerTree=t.headerTree,this._taskTree=t.taskTree,this._dependencyTree=t.dependencyTree,this._taskCoordinates={},this._currentTime()},destroy:function(){r.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._taskTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100,currentTimeMarker:{updateInterval:1e4}},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight(),this.content.find(b+E.styles.dependenciesWrapper).width(this._tableWidth)},_adjustHeight:function(){this.content.height(this.element.height()-this.header.outerHeight())},createLayout:function(e){var t=this._headers(e),n=this._colgroup(),i=this._headerTree,r=o("thead",null,t),a=o("table",{style:{width:this._tableWidth+"px"}},[n,r]);i.render([a]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var e,t,n,i,r=this.headerRow[0].children,o=this._timeSlots();for(n=0,i=r.length;i>n;n++)t=r[n],(e=o[n]).offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,n=e.length,i=E.styles,r=this._rowsTable(n),o=this._columnsTable(n),a=this._tasksTable(e),s=this.options.currentTimeMarker;this._taskTree.render([r,o,a]),t=this.content.find(b+i.rowsTable),this._contentHeight=t.height(),this._rowHeight=this._contentHeight/t.find("tr").length,this.content.find(b+i.columnsTable).height(this._contentHeight),!1!==s&&void 0!==s.updateInterval&&this._renderCurrentTime()},_rowsTable:function(e){var t,n,i=[],r=E.styles,s=[null,{className:r.alt}];for(n=0;e>n;n++)t=o("tr",s[n%2],[o("td",null,[a("")])]),i.push(t);return this._createTable(1,i,{className:r.rowsTable})},_columnsTable:function(){var e,t,n,i,r,s=[],l=E.styles,d=this._timeSlots(),c=d.length,u=0;for(r=0;c>r;r++)i={},u+=n=(t=d[r]).span,1!==n&&(i.colspan=n),t.isNonWorking&&(i.className=l.nonWorking),s.push(o("td",i,[a("")]));return e=o("tr",null,s),this._createTable(u,[e],{className:l.columnsTable})},_tasksTable:function(e){var t,n,i,r,a,s,l,d,c=[],h=E.styles,p=this._taskCoordinates={},f=this._calculateMilestoneWidth(),g=Math.round(f.width),m=this.options.resourcesField,v=[h.resource,h.resourceAlt],b=this._calculateResourcesMargin(),_=this._calculateTaskBorderWidth(),k=function(e){var t=i.left,n=t+i.width;r.isMilestone()&&(n=(t-=g/2)+g),p[r.id]={start:t,end:n,rowIndex:e}};for(l=0,d=e.length;d>l;l++)r=e[l],(i=this._taskPosition(r)).borderWidth=_,t=o("tr",null),n=o("td",null,[this._renderTask(e[l],i)]),r[m]&&r[m].length&&(a=u?this._tableWidth-i.left:Math.max(i.width||f.clientWidth,0)+i.left,(s={width:this._tableWidth-(a+b)+"px"})[u?"right":"left"]=a+"px",n.children.push(o("div",{className:h.resourcesWrap,style:s},this._renderResources(r[m],v[l%2])))),t.children.push(n),c.push(t),k(l);return this._createTable(1,c,{className:E.styles.tasksTable})},_createTable:function(e,t,n){var i,r,a,s=[];for(a=0;e>a;a++)s.push(o("col"));return i=o("colgroup",null,s),r=o("tbody",null,t),n.style||(n.style={}),n.style.width=this._tableWidth+"px",o("table",n,[i,r])},_calculateTableWidth:function(){var e,t,n,i=this._timeSlots(),r=0,o=0;for(t=0,n=i.length;n>t;t++)o+=e=i[t].span,e>r&&(r=e);return Math.round(o*this.options.slotSize/r)},_calculateMilestoneWidth:function(){var t,n,i=E.styles.task+" "+E.styles.taskMilestone,r=e("<div class='"+i+"' style='visibility: hidden; position: absolute'>");return this.content.append(r),t={width:(n=r[0].getBoundingClientRect()).right-n.left,clientWidth:r[0].clientWidth},r.remove(),t},_calculateResourcesMargin:function(){var t,n=e("<div class='"+E.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(n),t=parseInt(n.css(u?"margin-right":"margin-left"),10),n.remove(),t},_calculateTaskBorderWidth:function(){var t,n,i=E.styles.task+" "+E.styles.taskSingle,r=e("<div class='"+i+"' style='visibility: hidden; position: absolute'>");return this.content.append(r),n=kendo.getComputedStyles(r[0],["border-left-width"]),t=parseFloat(n["border-left-width"],10),r.remove(),t},_renderTask:function(e,t){var n,i,r,a=this.options.editable,s=t.left,l=E.styles,d=l.taskWrap,c={};return e.summary?i=this._renderSummary(e,t):e.isMilestone()?(i=this._renderMilestone(e,t),d+=" "+l.taskMilestoneWrap):i=this._renderSingleTask(e,t),n=o("div",{className:d,style:{left:s+"px"}},[i]),a&&(n.children.push(o("div",{className:l.taskDot+" "+l.taskDotStart})),n.children.push(o("div",{className:l.taskDot+" "+l.taskDotEnd}))),e.summary||e.isMilestone()||!a||(r=Math.round(t.width*e.percentComplete),c[u?"right":"left"]=r+"px",n.children.push(o("div",{className:l.taskDragHandle,style:c}))),n},_renderSingleTask:function(e,t){var n=E.styles,i=Math.round(t.width*e.percentComplete),r=o("div",{className:n.taskContent},[o("div",{className:n.taskTemplate},[a(e.title)])]);return this.options.editable&&(r.children.push(o("span",{className:n.taskActions},[o("a",{className:n.link+" "+n.taskDelete,href:"#"},[o("span",{className:n.icon+" "+n.iconDelete})])])),r.children.push(o("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleWest})),r.children.push(o("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleEast}))),o("div",{className:n.task+" "+n.taskSingle,"data-uid":e.uid,style:{width:Math.max(t.width-2*t.borderWidth,0)+"px"}},[o("div",{className:n.taskComplete,style:{width:i+"px"}}),r])},_renderMilestone:function(e){var t=E.styles;return o("div",{className:t.task+" "+t.taskMilestone,"data-uid":e.uid})},_renderSummary:function(e,t){var n=E.styles,i=Math.round(t.width*e.percentComplete);return o("div",{className:n.task+" "+n.taskSummary,"data-uid":e.uid,style:{width:t.width+"px"}},[o("div",{className:n.taskSummaryProgress,style:{width:i+"px"}},[o("div",{className:n.taskSummaryComplete,style:{width:t.width+"px"}})])])},_renderResources:function(e,t){var n,i,r,s=[];for(i=0,r=e.length;r>i;i++)n=e[i],s.push(o("span",{className:t,style:{color:n.get("color")}},[a(n.get("name"))]));return u&&s.reverse(),s},_taskPosition:function(e){var t=Math.round,n=t(this._offset(u?e.end:e.start));return{left:n,width:t(this._offset(u?e.start:e.end))-n}},_offset:function(e){var t,n=this._timeSlots(),i=0;return n.length?(e>(t=n[this._slotIndex("start",e)]).end?i=t.offsetWidth:e>=t.start&&(i=(e-t.start)/(t.end-t.start)*t.offsetWidth),u&&(i=t.offsetWidth+1-i),t.offsetLeft+i):0},_slotIndex:function(e,t,n){var i,r=this._timeSlots(),o=0,a=r.length-1;n&&(r=[].slice.call(r).reverse());do{t>r[i=Math.ceil((a+o)/2)][e]?o=i:(i===a&&i--,a=i)}while(o!==a);return n&&(o=r.length-1-o),o},_timeByPosition:function(t,n,i){var r,o,a,s=this._slotByPosition(t);return n?i?s.end:s.start:(r=t-e(b+E.styles.tasksTable).offset().left,o=s.end-s.start,a=r-s.offsetLeft,u&&(a=s.offsetWidth-a),new Date(s.start.getTime()+o*(a/s.offsetWidth)))},_slotByPosition:function(t){var n=t-e(b+E.styles.tasksTable).offset().left,i=this._slotIndex("offsetLeft",n,u);return this._timeSlots()[i]},_renderDependencies:function(e){var t,n,i=[],r=this._dependencyTree;for(t=0,n=e.length;n>t;t++)i.push.apply(i,this._renderDependency(e[t]));r.render(i)},_renderDependency:function(e){var t,n,i,r=this._taskCoordinates[e.predecessorId],o=this._taskCoordinates[e.successorId];if(!r||!o)return[];for(n=0,i=(t=this["_render"+["FF","FS","SF","SS"][u?3-e.type:e.type]](r,o)).length;i>n;n++)t[n].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var n=this._dependencyFF(e,t,!1);return n[n.length-1].children[0]=this._arrow(!0),n},_renderSS:function(e,t){var n=this._dependencyFF(t,e,!0);return n[0].children[0]=this._arrow(!1),n.reverse()},_renderFS:function(e,t){var n=this._dependencyFS(e,t,!1);return n[n.length-1].children[0]=this._arrow(!1),n},_renderSF:function(e,t){var n=this._dependencyFS(t,e,!0);return n[0].children[0]=this._arrow(!0),n.reverse()},_dependencyFF:function(e,t,n){var i,r=this,o=[],a=0,s=0,l=0,d=0,c=n?"start":"end",u=this._rowHeight,h=e.rowIndex*u+Math.floor(u/2)-1,p=t.rowIndex*u+Math.floor(u/2)-1,f=E.styles,g=function(){o.push(r._line(f.line+" "+f.lineHorizontal,{left:a+"px",top:s+"px",width:l+"px"}))},m=function(){o.push(r._line(f.line+" "+f.lineVertical,{left:a+"px",top:s+"px",height:d+"px"}))};return a=e[c],s=h,l=10,(i=t[c]-e[c])>0!==n&&(l=Math.abs(i)+10),n?(a-=l,l-=1,g()):(g(),a+=l-2),s>p?(d=s-p,d+=2,s=p,m()):(d=p-s,d+=2,m(),s+=d-2),l=Math.abs(a-t[c]),n||(a-=l-=1),g(),o},_dependencyFS:function(e,t,n){var i=this,r=[],o=0,a=0,s=0,l=0,d=this._rowHeight,c=Math.floor(d/2),u=t.start-e.end,h=e.rowIndex*d+Math.floor(d/2)-1,p=t.rowIndex*d+Math.floor(d/2)-1,f=E.styles,g=function(){r.push(i._line(f.line+" "+f.lineHorizontal,{left:o+"px",top:a+"px",width:s+"px"}))},m=function(){r.push(i._line(f.line+" "+f.lineVertical,{left:o+"px",top:a+"px",height:l+"px"}))};return o=e.end,a=h,s=10,n&&(o+=1,u>20&&(s=u-8),s-=1),g(),o+=s-2,20>=u&&(l=n?Math.abs(p-h)-c:c,h>p?(a-=l,l+=2,m()):(m(),a+=l),10>(s=e.end-t.start+20)&&(s=10),o-=s-2,g()),h>p?(l=a-p,a=p,l+=2,m()):(l=p-a,m(),a+=l),s=t.start-o,n||(s-=1),g(),r},_line:function(e,t){return o("div",{className:e,style:t})},_arrow:function(e){return o("span",{className:e?E.styles.arrowWest:E.styles.arrowEast})},_colgroup:function(){var e,t,n,i=this._timeSlots(),r=i.length,a=[];for(e=0;r>e;e++)for(t=0,n=i[e].span;n>t;t++)a.push(o("col"));return o("colgroup",null,a)},_createDragHint:function(e){this._dragHint=e.clone().addClass(E.styles.dragHint).css("cursor","move"),e.parent().append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var n,i=E.styles,r=this._taskCoordinates[t.id].rowIndex*this._rowHeight,o=this.options,a=o.messages;this._resizeHint=e(C({styles:i})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(S({styles:i,start:t.start,end:t.end,messages:a.views,format:o.resizeTooltipFormat})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=this._resizeTooltip.outerWidth(),0>(n=r-this._resizeTooltip.outerHeight())&&(n=r+this._rowHeight),this._resizeTooltipTop=n},_updateResizeHint:function(t,n,i){var r=this._offset(u?n:t),o=this._offset(u?t:n),a=o-r,s=i!==u?r:o,l=this._tableWidth-kendo.support.scrollbar(),d=this._resizeTooltipWidth,c=this.options,h=c.messages,p=e(b+E.styles.tasksTable).offset().left-e(b+E.styles.tasksWrapper).offset().left;u&&(r+=p),this._resizeHint.css({left:r,width:a}),this._resizeTooltip&&this._resizeTooltip.remove(),0>(s-=Math.round(d/2))?s=0:s+d>l&&(s=l-d),u&&(s+=p),this._resizeTooltip=e(S({styles:E.styles,start:t,end:n,messages:h.views,format:c.resizeTooltipFormat})).css({top:this._resizeTooltipTop,left:s,"min-width":d}).appendTo(this.content)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,n,i){var r,o,a,s;this._removePercentCompleteTooltip(),r=this._percentCompleteResizeTooltip=e(T({styles:E.styles,text:i})).appendTo(this.element),o=Math.round(r.outerWidth()/2),a=r.find(b+E.styles.callout),s=Math.round(a.outerWidth()/2),r.css({top:t-(r.outerHeight()+s),left:n-o}),a.css("left",o-s)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t,n){this._removeDependencyDragHint(),n?this._creteVmlDependencyDragHint(e,t):this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,n){var i=E.styles,r=n.x-t.x,o=n.y-t.y,a=Math.sqrt(r*r+o*o),s=Math.atan(o/r);0>r&&(s+=Math.PI),e("<div class='"+i.line+" "+i.lineHorizontal+" "+i.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:a,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+s+"rad)","-ms-transform":"rotate("+s+"rad)","-webkit-transform":"rotate("+s+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(t,n){var i=e("<kvml:line class='"+E.styles.dependencyHint+"' style='position:absolute; top: 0px; left: 0px;' strokecolor='black' strokeweight='2px' from='"+t.x+"px,"+t.y+"px' to='"+n.x+"px,"+n.y+"px'></kvml:line>").appendTo(this.content);i[0].outerHTML=i[0].outerHTML},_removeDependencyDragHint:function(){this.content.find(b+E.styles.dependencyHint).remove()},_createTaskTooltip:function(t,n,i){var r,o=E.styles,a=this.options,s=this.content,l=s.offset(),d=s.width(),c=s.scrollLeft(),u=e(n).parents("tr").first(),h=u.offset(),p=a.tooltip&&a.tooltip.template?kendo.template(a.tooltip.template):D,f=i-(l.left-s.scrollLeft()),g=h.top+u.outerHeight()-l.top+s.scrollTop(),m=this._taskTooltip=e('<div style="z-index: 100002;" class="'+o.tooltipWrapper+'" ><div class="'+o.taskContent+'"></div></div>');m.css({left:f,top:g}).appendTo(s).find(b+o.taskContent).append(p({styles:o,task:t,messages:a.messages.views})),m.outerHeight()<h.top-l.top&&m.css("top",h.top-l.top-m.outerHeight()+s.scrollTop()),(r=m.outerWidth())+f-c>d&&(c>(f-=r)&&(f=c+d-(r+17)),m.css("left",f))},_removeTaskTooltip:function(){this._taskTooltip&&this._taskTooltip.remove(),this._taskTooltip=null},_scrollTo:function(e){var t=e.offset().left,n=e.width(),i=t+n,r=e.closest("tr"),o=r.offset().top,a=o+r.height(),s=this.content,l=s.offset(),d=l.top,c=d+s.height(),u=l.left,h=s.width(),p=u+h,f=kendo.support.scrollbar();d>o?s.scrollTop(s.scrollTop()+(o-d)):a>c&&s.scrollTop(s.scrollTop()+(a+f-c)),u>t&&n>h&&p>i||i>p&&h>n?s.scrollLeft(s.scrollLeft()+(i+f-p)):(i>p&&n>h&&t>u||u>t&&h>n)&&s.scrollLeft(s.scrollLeft()+(t-u))},_timeSlots:function(){return this._slots&&this._slots.length?this._slots[this._slots.length-1]:[]},_headers:function(e){var t,n,i,r,s,l,d,c,u=[],h=E.styles;for(s=0,l=e.length;l>s;s++){for(n=[],d=0,c=(t=e[s]).length;c>d;d++)i=t[d],r=a(i.text),n.push(o("th",{colspan:i.span,className:h.header+(i.isNonWorking?" "+h.nonWorking:"")},[r]));u.push(o("tr",null,n))}return u},_hours:function(e,t){var n,i,r,o=[],a=this.options,s=a.workDayStart.getHours(),l=a.workDayEnd.getHours(),d=a.hourSpan;for(e=new Date(e),t=new Date(t);t>e;)i=(r=(n=new Date(e)).getHours())>=s&&l>r,n.setHours(n.getHours()+d),r==n.getHours()&&n.setHours(n.getHours()+2*d),(!a.showWorkHours||i)&&o.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return o},_days:function(e,t){var n,i,r=[];for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.nextDay(e),i=this._isWorkDay(e),(!this.options.showWorkDays||i)&&r.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return r},_weeks:function(e,t){var n,i,r,o=[],a=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);t>e;)(n=kendo.date.dayOfWeek(kendo.date.addDays(e,1),a,1))>t&&(n=t),(r=(i=this._days(e,n)).length)>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_months:function(e,t){var n,i,r,o=[];for(e=new Date(e),t=new Date(t);t>e;)(n=new Date(e)).setMonth(n.getMonth()+1),(r=(i=this._days(e,n)).length)>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_years:function(e,t){var n,i=[];for(e=new Date(e),t=new Date(t);t>e;)(n=new Date(e)).setFullYear(n.getFullYear()+1),i.push({start:e,end:n,span:12}),e=n;return i},_slotHeaders:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push({text:t(n),isNonWorking:!!n.isNonWorking,span:n.span});return o},_isWorkDay:function(e){var t,n,i=e.getDay(),r=this._workDays;for(t=0,n=r.length;n>t;t++)if(r[t]===i)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard},_renderCurrentTime:function(){var t,n=this._getCurrentTime(),i=this._offset(n),r=e("<div class='k-current-time'></div>"),o=E.styles,a=e(b+o.tasksWrapper),s=e(b+o.tasksTable);this.content&&this._timeSlots().length&&(this.content.find(".k-current-time").remove(),(t=this._timeSlots()[this._slotIndex("start",n)]).start>n||n>t.end||(a.length&&s.length&&(i+=s.offset().left-a.offset().left),r.css({left:i+"px",top:"0px",width:"1px",height:this._contentHeight+"px"}).appendTo(this.content)))},_getCurrentTime:function(){return new Date},_currentTime:function(){var e=this.options.currentTimeMarker;!1!==e&&void 0!==e.updateInterval&&(this._renderCurrentTime(),this._currentTimeUpdateTimer=setInterval(d(this._renderCurrentTime,this),e.updateInterval))}});l(!0,E,{styles:{alt:"k-alt",reset:"k-reset",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",tasksWrapper:"k-gantt-tables",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",dependenciesWrapper:"k-gantt-dependencies",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",taskDetails:"k-task-details",taskDetailsPercent:"k-task-pct",link:"k-link",icon:"k-icon",iconDelete:"k-si-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"}}),kendo.ui.GanttDayView=E.extend({name:"day",options:{timeHeaderTemplate:_,dayHeaderTemplate:k,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1))},_createSlots:function(){var e,t,n,i,r=[],o=this._days(this.start,this.end),a=[];for(n=0,i=o.length;i>n;n++)e=o[n],t=this._hours(e.start,e.end),e.span=t.length,a.push.apply(a,t);return r.push(o),r.push(a),r},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=E.extend({name:"week",options:{dayHeaderTemplate:k,weekHeaderTemplate:w,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){var t=this.calendarInfo().firstDay,n=e.end;t===n.getDay()&&n.setDate(n.getDate()+7),this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,t,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(n,t,1))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=E.extend({name:"month",options:{weekHeaderTemplate:w,monthHeaderTemplate:y,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1)},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=E.extend({name:"year",options:{yearHeaderTemplate:x,monthHeaderTemplate:y,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)))},_createSlots:function(){var t=[],n=this._months(this.start,this.end);return e(n).each(function(e,t){t.span=1}),t.push(this._years(this.start,this.end)),t.push(n),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}}),n={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"},i=kendo.ui.GanttTimeline=r.extend({init:function(e,t){r.fn.init.call(this,e,t),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),u=kendo.support.isRtl(e),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents(),this._tooltip()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"}},snap:!0,selectable:!0,editable:!0},destroy:function(){r.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this._currentTimeUpdateTimer&&clearInterval(this._currentTimeUpdateTimer),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this.touch&&this.touch.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(f),kendo.destroy(this.wrapper)},_wrapper:function(){var e=i.styles;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.gridHeader+"'><div class='"+e.gridHeaderWrap+"'></div></div>").append("<div class='"+e.gridContentWrap+"'><div class='"+e.tasksWrapper+"'></div><div class='"+e.dependenciesWrapper+"'></div></div>")},_domTrees:function(){var e=i.styles,t=kendo.dom.Tree,n=this.wrapper;this._headerTree=new t(n.find(b+e.gridHeaderWrap)[0]),this._taskTree=new t(n.find(b+e.tasksWrapper)[0]),this._dependencyTree=new t(n.find(b+e.dependenciesWrapper)[0])},_views:function(){var e,t,n,i,r,o,a,d=this.options.views;for(this.views={},o=0,a=d.length;a>o;o++)e=d[o],(t=s(e))&&!1===e.selectable||(n=t?"string"!=typeof e.type?e.title:e.type:e,(i=I[n])&&(t&&(e.type=i.type),i.title=this.options.messages.views[n]),e=l({title:n},i,t?e:{}),n&&(this.views[n]=e,(!r||e.selected)&&(r=n)));r&&(this._selectedViewName=r)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_initializeView:function(e){var t,n=this.views[e];if(n){if("string"==typeof(t=n.type)&&(t=kendo.getter(n.type)(window)),!t)throw Error("There is no such view");n=new t(this.wrapper,function(e){return delete e.name,delete e.prefix,delete e.views,e}(l(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree},n,this.options)))}return n},_unbindView:function(e){e&&e.destroy()},_range:function(e){var t,n;return e&&e.length?(t=new p(e).sort({field:"start",dir:"asc"}).toArray()[0].start||new Date,n=new p(e).sort({field:"end",dir:"desc"}).toArray()[0].end||new Date,{start:new Date(t),end:new Date(n)}):{start:new Date,end:new Date}},_render:function(e){var t=this.view(),n=this._range(e);this._tasks=e,t.range(n),t.renderLayout(),t.render(e)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){var t,n,i=this._tasks,r=i.length;for(n=0;r>n;n++)if((t=i[n]).uid===e)return t},_draggable:function(){var e,n,r,o,a=this,s=this.options.snap,l=i.styles,d=function(){a.view()._removeDragHint(),e&&e.css("opacity",1),e=null,n=null,a.dragInProgress=!1};this.options.editable&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:b+l.task,holdToDrag:kendo.support.mobileOS,ignore:b+l.taskResizeHandle}),this._moveDraggable.bind("dragstart",function(t){var i=a.view();return e=t.currentTarget.parent(),n=a._taskByUid(t.currentTarget.attr("data-uid")),a.trigger("moveStart",{task:n})?void t.preventDefault():(r=n.start,o=i._timeByPosition(t.x.location,s)-r,i._createDragHint(e),e.css("opacity",.5),clearTimeout(a._tooltipTimeout),void(a.dragInProgress=!0))}).bind("drag",kendo.throttle(function(e){var t,i,l;a.dragInProgress&&(t=a.view(),l=i=new Date(t._timeByPosition(e.x.location,s)-o),a.trigger("move",{task:n,start:i})||(r=i,u&&(l=new Date(r.getTime()+n.duration())),t._updateDragHint(l)))},15)).bind("dragend",function(){a.trigger("moveEnd",{task:n,start:r}),d()}).bind("dragcancel",function(){d()}).userEvents.bind("select",function(){t()}))},_resizable:function(){var e,n,r,o,a,s=this,l=this.options.snap,d=i.styles,c=function(){s.view()._removeResizeHint(),e=null,n=null,s.dragInProgress=!1};this.options.editable&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:b+d.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",function(t){return a=t.currentTarget.hasClass(d.taskResizeHandleWest),u&&(a=!a),e=t.currentTarget.closest(b+d.task),n=s._taskByUid(e.attr("data-uid")),s.trigger("resizeStart",{task:n})?void t.preventDefault():(r=n.start,o=n.end,s.view()._createResizeHint(n),clearTimeout(s._tooltipTimeout),void(s.dragInProgress=!0))}).bind("drag",kendo.throttle(function(e){var t,i;s.dragInProgress&&(i=(t=s.view())._timeByPosition(e.x.location,l,!a),a?r=o>i?i:o:o=i>r?i:r,s.trigger("resize",{task:n,start:r,end:o})||t._updateResizeHint(r,o,a))},15)).bind("dragend",function(){s.trigger("resizeEnd",{task:n,resizeStart:a,start:r,end:o}),c()}).bind("dragcancel",function(){c()}).userEvents.bind("select",function(){t()}))},_percentResizeDraggable:function(){var e,n,r,o,a,s,l,d,c,h,p=this,f=i.styles,g=function(){p.view()._removePercentCompleteTooltip(),n=null,e=null,p.dragInProgress=!1},m=function(e){n.find(b+f.taskComplete).width(e).end().siblings(b+f.taskDragHandle).css(u?"right":"left",e)};this.options.editable&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:b+f.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",function(t){return p.trigger("percentResizeStart")?void t.preventDefault():(n=t.currentTarget.siblings(b+f.task),e=p._taskByUid(n.attr("data-uid")),l=e.percentComplete,r=n.offset(),o=this.element.offset(),a=n.find(b+f.taskComplete).width(),s=n.outerWidth(),clearTimeout(p._tooltipTimeout),void(p.dragInProgress=!0))}).bind("drag",kendo.throttle(function(e){if(p.dragInProgress){h=u?-e.x.initialDelta:e.x.initialDelta;var t=Math.max(0,Math.min(s,a+h));l=Math.round(t/s*100),m(t),d=r.top-o.top,c=r.left+t-o.left,u&&(c+=s-2*t),p.view()._updatePercentCompleteTooltip(d,c,l)}},15)).bind("dragend",function(){p.trigger("percentResizeEnd",{task:e,percentComplete:l/100}),g()}).bind("dragcancel",function(){m(a),g()}).userEvents.bind("select",function(){t()}))},_createDependencyDraggable:function(){var n,r,o,a=this,s=e(),l=e(),d=c.msie&&9>c.version,u=i.styles,h=function(){n.css("display","").removeClass(u.hovered),n.parent().removeClass(u.origin),n=null,p(!1),l=e(),s=e(),a.view()._removeDependencyDragHint(),a.dragInProgress=!1},p=function(e){l.hasClass(u.origin)||(l.find(b+u.taskDot).css("display",e?"block":""),s.toggleClass(u.hovered,e))};this.options.editable&&(d&&document.namespaces&&document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:b+u.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",function(t){var i,s;return a.trigger("dependencyDragStart")?void t.preventDefault():((n=t.currentTarget.css("display","block").addClass(u.hovered)).parent().addClass(u.origin),i=n.offset(),s=e(b+u.tasksWrapper).offset(),r=Math.round(i.left-s.left+n.outerHeight()/2),o=Math.round(i.top-s.top+n.outerWidth()/2),clearTimeout(a._tooltipTimeout),void(a.dragInProgress=!0))}).bind("drag",kendo.throttle(function(t){var n,i,c,h;a.dragInProgress&&(a.view()._removeDependencyDragHint(),n=e(kendo.elementUnderCursor(t)),i=e(b+u.tasksWrapper).offset(),c=t.x.location-i.left,h=t.y.location-i.top,a.view()._updateDependencyDragHint({x:r,y:o},{x:c,y:h},d),p(!1),s=n.hasClass(u.taskDot)?n:e(),l=n.closest(b+u.taskWrap),p(!0))},15)).bind("dragend",function(){var e,t,i,r,o;s.length&&(e=n.hasClass(u.taskDotStart),t=s.hasClass(u.taskDotStart),i=e?t?3:2:t?1:0,(r=a._taskByUid(n.siblings(b+u.task).attr("data-uid")))!==(o=a._taskByUid(s.siblings(b+u.task).attr("data-uid")))&&a.trigger("dependencyDragEnd",{type:i,predecessor:r,successor:o})),h()}).bind("dragcancel",function(){h()}).userEvents.bind("select",function(){t()}))},_selectable:function(){var t=this,n=i.styles;this.options.selectable&&this.wrapper.on(g+f,b+n.task,function(n){n.stopPropagation(),n.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:e(this).attr("data-uid")})}).on(g+f,b+n.taskWrap,function(t){t.stopPropagation(),e(this).css("z-index","0");var i=e(document.elementFromPoint(t.clientX,t.clientY));i.hasClass(n.line)&&i.click(),e(this).css("z-index","")}).on(g+f,b+n.tasksWrapper,function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")}).on(g+f,b+n.line,function(e){e.stopPropagation(),t.selectDependency(this)})},select:function(e){var t=this.wrapper.find(e),n=i.styles;return t.length?(this.clearSelection(),t.addClass(n.selected),void(kendo.support.mobileOS&&t.parent().addClass(n.taskWrapActive))):this.wrapper.find(b+n.task+b+n.selected)},selectDependency:function(t){var n,r=this.wrapper.find(t),o=i.styles;return r.length?(this.clearSelection(),this.trigger("clear"),n=e(r).attr("data-uid"),void this.wrapper.find(b+o.line+"[data-uid='"+n+"']").addClass(o.selected)):this.wrapper.find(b+o.line+b+o.selected)},clearSelection:function(){var e=i.styles;this.wrapper.find(b+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find(b+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,n=i.styles;this.options.editable&&(this._tabindex(),this.wrapper.on(g+f,b+n.taskDelete,function(i){t.trigger("removeTask",{uid:e(this).closest(b+n.task).attr("data-uid")}),i.stopPropagation(),i.preventDefault()}).on("keydown"+f,function(e){var n;e.keyCode===h.DELETE&&(n=t.selectDependency()).length&&(t.trigger("removeDependency",{uid:n.attr("data-uid")}),t.clearSelection())}),kendo.support.mobileOS?this.touch=this.wrapper.kendoTouch({filter:b+n.task,doubletap:function(n){t.trigger("editTask",{uid:e(n.touch.currentTarget).attr("data-uid")})}}).data("kendoTouch"):this.wrapper.on("dblclick"+f,b+n.task,function(n){t.trigger("editTask",{uid:e(this).attr("data-uid")}),n.stopPropagation(),n.preventDefault()}))},_tooltip:function(){var t,n=this,r=this.options.tooltip,o=i.styles,a=function(e){t=e.clientX};r&&!1===r.visible||(kendo.support.mobileOS?(this.wrapper.on(g+f,b+o.taskDelete,function(e){e.stopPropagation(),n.view()._removeTaskTooltip()}).on(v+f,b+o.task,function(t){0===e(t.relatedTarget).parents(b+o.taskWrap,b+o.task).length&&n.view()._removeTaskTooltip()}),this.touch.bind("tap",function(t){var i=t.touch.target,r=n._taskByUid(e(i).attr("data-uid")),o=t.touch.x.client;n.view()._taskTooltip&&n.view()._removeTaskTooltip(),n.view()._createTaskTooltip(r,i,o)}).bind("doubletap",function(){n.view()._removeTaskTooltip()})):this.wrapper.on("mouseenter"+f,b+o.task,function(){var i=this,r=n._taskByUid(e(this).attr("data-uid"));n.dragInProgress||(n._tooltipTimeout=setTimeout(function(){n.view()._createTaskTooltip(r,i,t)},800),e(this).on(m,a))}).on(v+f,b+o.task,function(){clearTimeout(n._tooltipTimeout),n.view()._removeTaskTooltip(),e(this).off(m,a)}))}}),l(!0,i,{styles:n})}(window.kendo.jQuery),function(e,t){function n(e){return"["+u.attr("uid")+(e?"='"+e+"']":"]")}function i(t,n){var i=t.parents("["+u.attr("role")+'="gantt"]'),r=[],o=function(t){return e(t).parentsUntil("body").filter(function(e,t){var n=u.getComputedStyles(t,["overflow"]);return"visible"!=n.overflow}).add(window)}(i);t.attr(A,0),n&&o.each(function(t,n){r[t]=e(n).scrollTop()});try{t[0].setActive()}catch(e){t[0].focus()}n&&o.each(function(t,n){e(n).scrollTop(r[t])})}var r,o,a,s,l,d,c,u=window.kendo,h=u.support.browser,p=u.support.mobileOS,f=u.Observable,g=u.ui.Widget,m=u.data.DataSource,v=u.data.ObservableObject,b=u.data.ObservableArray,_=u.data.Query,k=e.isArray,w=e.inArray,y=u.isFunction,x=e.proxy,C=e.extend,S=e.isPlainObject,T=e.map,D=u.keys,I=".kendoGantt",E="p0",A="tabIndex",O="click",R="width",P="string",M={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"}},F="aria-activedescendant",H="gantt_active_cell",N="action-option-focused",$=".",L='<button class="#=styles.button# #=className#" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span>#=text#</button>',z=u.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),j=u.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),B={wrapper:"k-widget k-gantt",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",viewButtonDefault:"k-state-default",viewButton:"k-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}},U={append:{text:"Add Task",action:"add",className:B.toolbar.appendButton,iconClass:B.toolbar.iconPlus},pdf:{text:"Export to PDF",className:B.toolbar.pdfButton,iconClass:B.toolbar.iconPdf}},V=f.extend({init:function(e,t){f.fn.init.call(this),this.element=e,this.options=C(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=c.styles,n=this.list.find($+t.focused),i=n[e]();i.length&&(n.removeClass(t.focused).removeAttr("id"),i.addClass(t.focused).attr("id",N),this.list.find("ul").removeAttr(F).attr(F,N))},_popup:function(){var t=this,n=c.styles,i="li."+n.item,r=$+n.toolbar.appendButton,o=this.options.messages.actions,a=this.options.navigatable;this.list=e(j({styles:n,actions:[{data:"add",text:o.addChild},{data:"insert-before",text:o.insertBefore},{data:"insert-after",text:o.insertAfter}]})),this.element.append(this.list),this.popup=new u.ui.Popup(this.list,C({anchor:this.element.find(r),open:function(){t._adjustListWidth()},animation:this.options.animation},M[this.options.direction])),this.element.on(O+I,r,function(i){var r=e(this).attr(u.attr("action"));i.preventDefault(),r?t.trigger("command",{type:r}):(t.popup.open(),a&&t.list.find("li:first").addClass(n.focused).attr("id",N).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":N}).focus())}),this.list.find(i).hover(function(){e(this).addClass(n.hovered)},function(){e(this).removeClass(n.hovered)}).end().on(O+I,i,function(){t.trigger("command",{type:e(this).attr(u.attr("action"))}),t.popup.close()}),a&&(this.popup.bind("close",function(){t.list.find(i).removeClass(n.focused).end().find("ul").attr(A,0),t.element.parents("["+u.attr("role")+'="gantt"]').find($+n.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+I,function(e){switch(e.keyCode){case D.UP:e.preventDefault(),t._current("prev");break;case D.DOWN:e.preventDefault(),t._current("next");break;case D.ENTER:t.list.find($+n.focused).click();break;case D.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,n=this.list,i=c.styles,r=n[0].style.width,o=this.element.find($+i.toolbar.appendButton);(n.data(R)||!r)&&(t=(e=window.getComputedStyle?window.getComputedStyle(o[0],null):0)?parseFloat(e.width):o.outerWidth(),e&&(h.mozilla||h.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),r="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:o.css("font-family"),width:r}).data(R,r))},destroy:function(){clearTimeout(this._focusTimeout),this.popup.destroy(),this.element.off(I),this.list.off(I),this.unbind()}}),W=function(e,t){return function(n){var i,r;if(r=(i=(n=k(i)?{data:n}:n)||{}).data,i.data=r,!(i instanceof e)&&i instanceof m)throw Error("Incorrect DataSource type. Only "+t+" instances are supported");return i instanceof e?i:new e(i)}},G=u.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),q=m.extend({init:function(e){m.fn.init.call(this,C(!0,{},{schema:{modelBase:G,model:G}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),n=this.successors(e);return t.push.apply(t,n),t},_dependencies:function(e,t){var n=this.view(),i={field:e,operator:"eq",value:t};return new _(n).filter(i).toArray()}});q.create=W(q,"GanttDependencyDataSource"),r=u.data.Model.define({duration:function(){return this.end-this.start},isMilestone:function(){return 0===this.duration()},_offset:function(e){var t,n,i=["start","end"];for(n=0;i.length>n;n++)t=new Date(this.get(i[n]).getTime()+e),this.set(i[n],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:""},start:{type:"date",validation:{required:!0}},end:{type:"date",validation:{required:!0,dateCompare:function(e){var t,n,i,r,o,a;if(e.filter("[name=end], [name=start]").length){for(t=e.attr("name"),n=u.widgetInstance(e,u.ui),i={},r=e;r!==window&&!o;)o=(r=r.parent()).data("kendoEditable");return!(a=o?o.options.model:null)||(i.start=a.start,i.end=a.end,i[t]=n?n.value():u.parseDate(e.value()),i.end>=i.start)}return!0},message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),(o=m.extend({init:function(e){m.fn.init.call(this,C(!0,{},{schema:{modelBase:r,model:r}},e))},remove:function(e){var t=e.get("parentId"),n=this.taskAllChildren(e);return this._removeItems(n),e=m.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){return e?(e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)):t},insert:function(e,n){return n?((n=this._toGanttTask(n)).set("orderId",e),n=m.fn.insert.call(this,e,n),this._reorderSiblings(n,this.taskSiblings(n).length-1),this._resolveSummaryFields(this.taskParent(n)),n):t},taskChildren:function(e){var n,i=this.view(),r={field:"parentId",operator:"eq",value:null},o=this._sort||{field:"orderId",dir:"asc"};if(e){if((n=e.get("id"))===t||null===n||""===n)return[];r.value=n}return new _(i).filter(r).sort(o).toArray()},taskAllChildren:function(e){var t=[],n=this,i=function(e){var r=n.taskChildren(e);t.push.apply(t,r),T(r,i)};return e?i(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,n=this.taskParent(e);null!==n;)t+=1,n=this.taskParent(n);return t},taskTree:function(e){var t,n,i,r,o=[],a=this.taskChildren(e);for(n=0,i=a.length;i>n;n++)t=a[n],o.push(t),t.get("expanded")&&(r=this.taskTree(t),o.push.apply(o,r));return o},update:function(e,n){var i,r,o=this,a=function(e){var t=e.field,n=e.sender;switch(t){case"start":o._resolveSummaryStart(o.taskParent(n)),function(e,t){var n,i,r=o.taskAllChildren(e);for(n=0,i=r.length;i>n;n++)r[n]._offset(t)}(n,n.get(t).getTime()-i.getTime());break;case"end":o._resolveSummaryEnd(o.taskParent(n));break;case"percentComplete":o._resolveSummaryPercentComplete(o.taskParent(n));break;case"orderId":o._reorderSiblings(n,i)}};for(r in n.parentId!==t&&((i=e.get("parentId"))!==n.parentId&&(e.set("parentId",n.parentId),o._childRemoved(i,e.get("orderId")),e.set("orderId",o.taskSiblings(e).length-1),o._resolveSummaryFields(o.taskParent(e))),delete n.parentId),e.bind("change",a),n)i=e.get(r),e.set(r,n[r]);e.unbind("change",a)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this;this._updateSummaryRecursive(e,"start",function(e){var n,i,r,o=t.taskChildren(e),a=o[0].start.getTime();for(i=1,r=o.length;r>i;i++)a>(n=o[i].start.getTime())&&(a=n);return new Date(a)})},_resolveSummaryEnd:function(e){var t=this;this._updateSummaryRecursive(e,"end",function(e){var n,i,r,o=t.taskChildren(e),a=o[0].end.getTime();for(i=1,r=o.length;r>i;i++)(n=o[i].end.getTime())>a&&(a=n);return new Date(a)})},_resolveSummaryPercentComplete:function(e){var t=this;this._updateSummaryRecursive(e,"percentComplete",function(e){var n=t.taskChildren(e);return new _(n).aggregate([{field:"percentComplete",aggregate:"average"}]).percentComplete.average})},_updateSummaryRecursive:function(e,t,n){var i,r;e&&(i=n(e),e.set(t,i),(r=this.taskParent(e))&&this._updateSummaryRecursive(r,t,n))},_childRemoved:function(e,t){var n,i,r=null===e?null:this.get(e),o=this.taskChildren(r);for(n=t,i=o.length;i>n;n++)o[n].set("orderId",n);this._resolveSummaryFields(r)},_reorderSiblings:function(e,t){var n,i=e.get("orderId"),r=i>t,o=r?t:i,a=r?i:t,s=r?o:o+1,l=this.taskSiblings(e);for(a=Math.min(a,l.length-1),n=o;a>=n;n++)l[n]!==e&&(l[n].set("orderId",s),s+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof r)){var t=e;(e=this._createNewModel()).accept(t)}return e}})).create=W(o,"GanttDataSource"),C(!0,u.data,{GanttDataSource:o,GanttTask:r,GanttDependencyDataSource:q,GanttDependency:G}),a={desktop:{dateRange:function(t,n){var i={name:n.field},r=n.model.fields[n.field].validation;r&&S(r)&&r.message&&(i[u.attr("dateCompare-msg")]=r.message),e('<input type="text" required '+u.attr("type")+'="date" '+u.attr("role")+'="datetimepicker" '+u.attr("bind")+'="value:'+n.field+'" '+u.attr("validate")+"='true' />").attr(i).appendTo(t),e("<span "+u.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},resources:function(t,n){e('<a href="#" class="'+n.styles.button+'">'+n.messages.assignButton+"</a>").click(n.click).appendTo(t)}}},s=u.Observable.extend({init:function(e,t){u.Observable.fn.init.call(this),this.element=e,this.options=C(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(t,n){var i,r=this,o=this.options,a=o.messages.editor,s=o.resources;return o.editable.template?i=e.map(n.fields,function(e,t){return{field:t}}):(i=[{field:"title",title:a.title},{field:"start",title:a.start,editor:t.dateRange},{field:"end",title:a.end,editor:t.dateRange},{field:"percentComplete",title:a.percentComplete,format:E}],n.get(s.field)&&i.push({field:s.field,title:a.resources,messages:a,editor:t.resources,click:function(e){e.preventDefault(),s.editor(r.container.find($+c.styles.popup.resourcesField),n)},styles:c.styles.popup})),i},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.resources,l=this.options.editable.template,d=C({},u.Template,this.options.templateSettings),h=d.paramName,p=c.styles.popup,f="";if(l)typeof l===P&&(l=window.unescape(l)),f+=u.template(l,d)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],f+='<div class="'+p.editLabel+'"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",o.field===s.field&&(f+='<div class="'+p.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(o.field)?(n.push(o),f+="<div "+u.attr("container-for")+'="'+o.field+'" class="'+p.editField+'"></div>'):(a="#:",o.field?a+=(o=u.expr(o.field,h))+"==null?'':"+o:a+="''",a+="#",a=u.template(a,d),f+='<div class="'+p.editField+'">'+a(e)+"</div>");return f}}),l=s.extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?this.container.data("kendoWindow").bind("deactivate",t).close():t()},showDialog:function(t){var n,i,r,o,a=t.buttons,s=c.styles.popup,l=u.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',s.form,s.formContainer,s.message,t.text,s.buttonsContainer);for(n=0,i=a.length;i>n;n++)l+=this.createButton(a[n]);l+="</div></div></div>",r=this.element,this.popup&&this.popup.destroy(),(o=this.popup=e(l).appendTo(r).eq(0).on("click",$+s.button,function(t){t.preventDefault(),o.close();var n=e(t.currentTarget).index();a[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.focus()}}).getKendoWindow()).center().open()},_createPopupEditor:function(t){var n,i,r=this,o=this.options.messages,s=c.styles,l=s.popup,d=u.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',u.attr("uid"),t.uid,l.form,l.editForm,l.formContainer),h=this.fields(a.desktop,t),p=[];return d+=this._buildEditTemplate(t,h,p),d+='<div class="'+l.buttonsContainer+'">',d+=this.createButton({name:"update",text:o.save,className:c.styles.primary}),d+=this.createButton({name:"cancel",text:o.cancel}),d+=this.createButton({name:"delete",text:o.destroy}),d+="</div></div></div>",i=(n=this.container=e(d).appendTo(this.element).eq(0).kendoWindow(C({modal:!0,resizable:!1,draggable:!0,title:o.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&r.trigger("cancel",{container:n,model:t})&&e.preventDefault()}},{}))).kendoEditable({fields:p,model:t,clearContainer:!1,validateOnBlur:!0,target:r.options.target}).data("kendoEditable"),u.cycleForm(n),this.trigger("edit",{container:n,model:t})?r.trigger("cancel",{container:n,model:t}):(n.data("kendoWindow").center().open(),n.on(O+I,$+s.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("cancel",{container:n,model:t})}),n.on(O+I,$+s.buttonSave,function(e){var i,o,s,l,d;for(e.preventDefault(),e.stopPropagation(),o={},l=0,d=(i=r.fields(a.desktop,t)).length;d>l;l++)o[s=i[l].field]=t.get(s);r.trigger("save",{container:n,model:t,updateInfo:o})}),n.on(O+I,$+s.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("remove",{container:n,model:t})})),i}}),d=g.extend({init:function(e,t){g.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open(),this.grid.resize(!0)},close:function(){this.window.bind("deactivate",x(this.destroy,this)).close()},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,g.fn.destroy.call(this),u.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=c.styles,n=this.grid,i=this._cancelProxy=x(this._cancel,this);this.container.on(O+I,$+t.buttonCancel,this._cancelProxy),this._saveProxy=x(this._save,this),this.container.on(O+I,$+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&i(e)}),n.wrapper.on(O+I,"input[type='checkbox']",function(){var t=e(this),i=e(t).closest("tr"),r=n.dataSource.getByUid(i.attr(u.attr("uid"))),o=e(t).is(":checked")?1:"";r.set("value",o)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(I),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is($+c.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=c.styles.popup,n=u.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);n=e(n),this.container=n.find($+t.resourcesFormContainer),this.window=n.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this.options.messages,n=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new u.ui.Grid(n,{columns:[{field:"name",title:t.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:t.unitsHeader,template:function(e){var t=e.format,n=null!==e.value?e.value:"";return t?u.toString(n,t):n}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:this.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){var e,t,n=this.options.buttons,i='<div class="'+c.styles.popup.buttonsContainer+'">';for(e=0,t=n.length;t>e;e++)i+=this.createButton(n[e]);i+="</div>",this.container.append(i)},_updateModel:function(){var e,t,n,i=[],r=this.grid.dataSource.data();for(t=0,n=r.length;n>t;t++)null!==(e=r[t].get("value"))&&e>0&&i.push(r[t]);this.model[this.resourcesField]=i}}),c=g.extend({init:function(e,t){k(t)&&(t={dataSource:t}),g.fn.init.call(this,e,t),this._wrapper(),this._resources(),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),u.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskConfirmation:"Are you sure you want to delete this task?",deleteDependencyConfirmation:"Are you sure you want to delete this dependency?",deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assignButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,toolbar:null,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%"},select:function(e){var n=this.list;return e?(n.select(e),t):n.select()},clearSelection:function(){this.list.clearSelection()},destroy:function(){g.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(I),e(window).off("resize"+I,this._resizeHandler),e(this.wrapper).off(I),this.toolbar=null,this.footer=null},_attachEvents:function(){this._resizeHandler=x(this.resize,this,!1),e(window).on("resize"+I,this._resizeHandler)},_wrapper:function(){var e=c.styles,t=[e.icon,e.resizeHandle].join(" "),n=this.options,i=n.height,r=n.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find($+e.list).width(n.listWidth),i&&this.wrapper.height(i),r&&this.wrapper.width(r)},_toolbar:function(){var t,n,i=this,r=c.styles,o=$+r.toolbar.views+" > li",a=$+r.toolbar.pdfButton,s=r.hovered,l=this.options.toolbar,d=e("<div class='"+r.toolbar.actions+"'>");y(l)||(l=typeof l===P?l:this._actions(l),l=x(u.template(l),this)),n=e(z({ns:u.ns,views:this.timeline.views,styles:r.toolbar})),d.append(l({})),t=e("<div class='"+r.toolbar.headerWrapper+"'>").append(d).append(n),this.wrapper.prepend(t),this.toolbar=t,t.on(O+I,o,function(t){var n,r;t.preventDefault(),n=i.list,r=e(this).attr(u.attr("name")),n.editable&&n.editable.trigger("validate")||i.trigger("navigate",{view:r})||i.view(r)}).on(O+I,a,function(){i.saveAsPDF()}),this.wrapper.find($+r.toolbar.toolbar+" li").hover(function(){e(this).addClass(s)},function(){e(this).removeClass(s)})},_actions:function(){var e,t,n=this.options,i=n.toolbar,r="";if(!k(i)){if(!n.editable)return r;i=["append"]}for(e=0,t=i.length;t>e;e++)r+=this._createButton(i[e]);return r},_footer:function(){var t,n,i,r,o;this.options.editable&&(t=c.styles.toolbar,n=this.options.messages.actions,i=e(u.template(L)(C(!0,{styles:t},U.append,{text:n.append}))),r=e("<div class='"+t.actions+"'>").append(i),o=e("<div class='"+t.footerWrapper+"'>").append(r),this.wrapper.append(o),this.footer=o)},_createButton:function(e){var t=e.template||L,n=this.options.messages.actions,i=typeof e===P?e:e.name||e.text,r={iconClass:"",action:"",text:i,className:U[i]?U[i].className:"k-gantt-"+(i||"").replace(/\s/g,""),styles:c.styles.toolbar};if(!(i||S(e)&&e.template))throw Error("Custom commands should have name specified");return r=C(!0,r,U[i],{text:n[i]}),S(e)&&(e.className&&w(r.className,e.className.split(" "))<0&&(e.className+=" "+r.className),r=C(!0,r,e)),u.template(t)(r)},_adjustDimensions:function(){var e=this.element,t=c.styles,n=$+t.list,i=$+t.timeline,r=$+t.splitBar,o=this.toolbar.outerHeight(),a=this.footer?this.footer.outerHeight():0,s=e.height(),l=e.width(),d=e.find(r).outerWidth(),u=e.find(n).outerWidth();e.children([n,i,r].join(",")).height(s-(o+a)).end().children(i).width(l-(d+u))},_scrollTo:function(e){var t=this.timeline.view(),i=u.attr("uid"),r="string"==typeof e?e:e.closest("tr"+n()).attr(i),o=t.content.find(n(r));0!==o.length&&t._scrollTo(o)},_dropDowns:function(){var e=this,t=$+c.styles.toolbar.actions,n=this.options.messages.actions,i=this.dataSource,r=this.timeline,o=function(t){var n,o=t.type,a=i._createNewModel(),s=e.dataItem(e.select()),l=i.taskParent(s),d=r.view()._timeSlots()[0],c="add"===o?s:l,u=e.list.editable;u&&u.trigger("validate")||(a.set("title","New task"),c?(a.set("parentId",c.get("id")),a.set("start",c.get("start")),a.set("end",c.get("end"))):(a.set("start",d.start),a.set("end",d.end)),"add"!==o&&(n=s.get("orderId"),n="insert-before"===o?n:n+1),e._createTask(a,n))};this.options.editable&&(this.footerDropDown=new V(this.footer.children(t).eq(0),{messages:{actions:n},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new V(this.toolbar.children(t).eq(0),{messages:{actions:n},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",o),this.headerDropDown.bind("command",o))},_list:function(){var e,t,n=this,r=n.options.navigatable,o=c.styles,a=this.wrapper.find($+o.list),s=a.find("> div"),l=this.wrapper.find($+o.toolbar.actions+" > button"),d={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,listWidth:a.outerWidth(),resourcesField:this.resources.field},h=d.columns,p=function(){r&&(n._current(n._cachedCurrent),i(n.list.content.find("table"),!0)),delete n._cachedCurrent};for(t=0;h.length>t;t++)(e=h[t]).field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=x(this._createResourceEditor,this));this.list=new u.ui.GanttList(s,d),this.list.bind("render",function(){n._navigatable()},!0).bind("edit",function(e){n._cachedCurrent=e.cell,n.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){n.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),p()}).bind("update",function(e){n._updateTask(e.task,e.updateInfo),p()}).bind("change",function(){n.trigger("change");var e=n.list.select();e.length?(l.removeAttr("data-action","add"),n.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(l.attr("data-action","add"),n.timeline.clearSelection())})},_timeline:function(){var e=this,n=c.styles,i=function(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}(C(!0,{resourcesField:this.resources.field},this.options)),r=this.wrapper.find($+n.timeline+" > div");this.timeline=new u.ui.GanttTimeline(r,i),this.timeline.bind("navigate",function(t){e.toolbar.find($+n.toolbar.views+" > li").removeClass(n.selected).end().find($+n.toolbar.viewButton+"-"+t.view.replace(/\./g,"\\.").toLowerCase()).addClass(n.selected),e.refresh()}).bind("moveStart",function(n){var i=e.list.editable;return i&&i.trigger("validate")?(n.preventDefault(),t):(e.trigger("moveStart",{task:n.task})&&n.preventDefault(),t)}).bind("move",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("move",{task:n,start:i,end:r})&&t.preventDefault()}).bind("moveEnd",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("moveEnd",{task:n,start:i,end:r})||e._updateTask(e.dataSource.getByUid(n.uid),{start:i,end:r})}).bind("resizeStart",function(n){var i=e.list.editable;return i&&i.trigger("validate")?(n.preventDefault(),t):(e.trigger("resizeStart",{task:n.task})&&n.preventDefault(),t)}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var n=t.task,i={};t.resizeStart?i.start=t.start:i.end=t.end,e.trigger("resizeEnd",{task:n,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(n.uid),i)}).bind("percentResizeStart",function(t){var n=e.list.editable;n&&n.trigger("validate")&&t.preventDefault()}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragStart",function(t){var n=e.list.editable;n&&n.trigger("validate")&&t.preventDefault()}).bind("dependencyDragEnd",function(t){var n=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(n)}).bind("select",function(t){var n=e.list.editable;n&&n.trigger("validate"),e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){var n=e.list.editable;n&&n.trigger("validate")||e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){var n=e.list.editable;n&&n.trigger("validate")||e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){var n=e.list.editable;n&&n.trigger("validate")||e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options.dataSource;e=k(e)?{data:e}:e,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=x(this.refresh,this),this._progressHandler=x(this._requestStart,this),this._errorHandler=x(this._error,this)),this.dataSource=u.data.GanttDataSource.create(e).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=k(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=x(this.refreshDependencies,this),this._dependencyErrorHandler=x(this._error,this)),this.dependencies=u.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},C(this.resources,e),this.resources.dataSource=u.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=x(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},C(this.assignments,e),this.assignments.dataSource=u.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this;(this._editor=new l(this.wrapper,C({},this.options,{target:this,resources:{field:this.resources.field,editor:x(this._createResourceEditor,this)},createButton:x(this._createPopupButton,this)}))).bind("cancel",function(n){var i=e.dataSource.getByUid(n.model.uid);return e.trigger("cancel",{container:n.container,task:i})?(n.preventDefault(),t):(e.cancelTask(),t)}).bind("edit",function(t){var n=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:n})&&t.preventDefault()}).bind("save",function(t){var n=e.dataSource.getByUid(t.model.uid);e.saveTask(n,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)})},_createResourceEditor:function(e,t){var n=this,i=t instanceof v?t:t.model,r=i.get("id"),o=this.options.messages,a=n.resources.field;(this._resourceEditor=new d(e,{resourcesField:a,data:this._wrapResourceData(r),model:i,messages:C({},o.editor),buttons:[{name:"update",text:o.save,className:c.styles.primary},{name:"cancel",text:o.cancel}],createButton:x(this._createPopupButton,this),save:function(e){n._updateAssignments(e.model.get("id"),e.model.get(a))}})).open()},_createPopupButton:function(e){var t=e.name||e.text,n={className:c.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||S(e)&&e.template))throw Error("Custom commands should have name specified");return S(e)&&(e.className&&(e.className+=" "+n.className),n=C(!0,n,e)),u.template('<a class="#=className#" #=attr# href="\\#">#=text#</a>')(n)},view:function(e){return this.timeline.view(e)},dataItem:function(e){var t,n;return e?(n=(t=this.list).content.find(e),t._modelFromElement(n)):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var n,i,r,o,a,s,l,d=this.assignments.dataSource,c=this.assignments.dataTaskIdField,u=this.assignments.dataResourceIdField,h=!1,p=new _(d.view()).filter({field:c,operator:"eq",value:e}).toArray();p.length;){for(n=p[0],o=0,a=t.length;a>o;o++)if(i=t[o],n.get(u)===i.get("id")){r=t[o].get("value"),this._updateAssignment(n,r),t.splice(o,1),h=!0;break}h||this._removeAssignment(n),h=!1,p.shift()}for(s=0,l=t.length;l>s;s++)i=t[s],this._createAssignment(i,e);d.sync()},cancelTask:function(){var e=this._editor;e.container&&e.close()},editTask:function(e){var t,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&((t=this.dataSource._createNewModel(n.toJSON())).uid=n.uid,this.cancelTask(),this._editTask(t))},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var n=this._editor,i=n.container,r=n.editable;i&&r&&r.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var n=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[n]&&this._updateAssignments(e.get("id"),t[n]),this._syncDataSource())},_updateAssignment:function(e,t){var n=this.assignments.dataValueField;e.set(n,t)},removeTask:function(e){var t=this,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&this._taskConfirm(function(e){e||t._removeTask(n)},n)},_createTask:function(e,n){if(!this.trigger("add",{task:e,dependency:null})){var i=this.dataSource;this._preventRefresh=!0,n===t?i.add(e):i.insert(n,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},_createAssignment:function(e,t){var n=this.assignments,i=n.dataSource,r=n.dataTaskIdField,o=n.dataResourceIdField,a=n.dataValueField,s=i._createNewModel();s[r]=t,s[o]=e.get("id"),s[a]=e.get("value"),i.add(s)},removeDependency:function(e){var t=this,n="string"==typeof e?this.dependencies.getByUid(e):e;n&&this._dependencyConfirm(function(e){e||t._removeDependency(n)},n)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var n=0,i=t.length;i>n;n++)this.dependencies.remove(t[n]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeTaskAssignments:function(e){var t,n,i=this.assignments.dataSource,r=i.view(),o={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};for(r=new _(r).filter(o).toArray(),this._preventRefresh=!0,t=0,n=r.length;n>t;t++)i.remove(r[t]);this._preventRefresh=!1,i.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeTaskAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_removeAssignment:function(e){this.assignments.dataSource.remove(e)},_taskConfirm:function(e,t){var n=this.options.messages;this._confirm(e,{model:t,text:n.deleteTaskConfirmation,title:n.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){var n=this.options.messages;this._confirm(e,{model:t,text:n.deleteDependencyConfirmation,title:n.deleteDependencyWindowTitle})},_confirm:function(e,t){var n,i,r=this.options.editable;!0===r||!1!==r.confirmation?(i=[{name:"delete",text:(n=this.options.messages).destroy,className:c.styles.primary,click:function(){e()}},{name:"cancel",text:n.cancel,click:function(){e(!0)}}],this.showDialog(C(!0,{},t,{buttons:i}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){var e,t,i,r,o;this._preventRefresh||this.list.editable||(this._progress(!1),e=this.dataSource.taskTree(),t=this._scrollToUid,o=-1,this.current&&(r=this.current.closest("tr").attr(u.attr("uid")),o=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(e),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(e),this.timeline._render(e),this.timeline._renderDependencies(this.dependencies.view()),t&&(this._scrollTo(t),this.select(n(t))),(t||r)&&o>=0&&(i=this.list.content.find("tr"+n(t||r)+" > td:eq("+o+")"),this._current(i)),this._scrollToUid=null,this.trigger("dataBound")))},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){var t,n,i=this.resources,r=this.assignments,o=function(){var e=r.dataSource.view(),t={field:r.dataTaskIdField};return new _(e).group(t).toArray()}(),a=function(e,t){var n,r,a=e.get("id");for(u.setter(i.field)(e,new b([])),n=0,r=o.length;r>n;n++)o[n].value===a&&t(e,o[n].items)},s=function(e,t){var n,o,a,s,l,d,c,h;for(n=0,o=t.length;o>n;n++)a=t[n],s=i.dataSource.get(a.get(r.dataResourceIdField)),l=a.get(r.dataValueField),d=a.get(r.dataResourceIdField),c=s.get(i.dataFormatField)||E,h=u.toString(l,c),e[i.field].push(new v({id:d,name:s.get(i.dataTextField),color:s.get(i.dataColorField),value:l,formatedValue:h}))};for(t=0,n=e.length;n>t;t++)a(e[t],s)},_wrapResourceData:function(e){var t,n,i,r=this,o=[],a=this.resources.dataSource.view(),s=this.assignments.dataSource.view(),l=new _(s).filter({field:r.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),d=function(e){var t=null;return new _(l).filter({field:r.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(r.assignments.dataValueField)}),t};for(n=0,i=a.length;i>n;n++)t=a[n],o.push({id:t.get("id"),name:t.get(r.resources.dataTextField),format:t.get(r.resources.dataFormatField)||E,value:d(t.id)});return o},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){u.ui.progress(this.element,e)},_resizable:function(){var t,n,i,r=this,o=this.wrapper,a=c.styles,s=$+a.gridContent,l=o.find($+a.list),d=o.find($+a.timeline);this._resizeDraggable=o.find($+a.splitBar).height(l.height()).hover(function(){e(this).addClass(a.splitBarHover)},function(){e(this).removeClass(a.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:$+a.splitBar,start:function(){t=l.width(),n=d.width(),i=d.find(s).scrollLeft()},resize:function(e){var a=e.x.initialDelta;u.support.isRtl(o)&&(a*=-1),0>t+a||0>n-a||(l.width(t+a),d.width(n-a),d.find(s).scrollLeft(i+a),r.timeline.view()._renderCurrentTime())}}).data("kendoResizable")},_scrollable:function(){var t=c.styles,n=$+t.gridContent,i=$+t.gridHeaderWrap,r=this.timeline.element.find(i),o=this.timeline.element.find(n),a=this.list.element.find(i),s=this.list.element.find(n);p&&s.css("overflow-y","auto"),o.on("scroll",function(){r.scrollLeft(this.scrollLeft),s.scrollTop(this.scrollTop)}),s.on("scroll",function(){a.scrollLeft(this.scrollLeft),o.scrollTop(this.scrollTop)}).on("DOMMouseScroll"+I+" mousewheel"+I,function(t){var n=o.scrollTop(),i=u.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+I,!1),o.scrollTop(n+-i))})},_navigatable:function(){var r,o=this,a=this.options.navigatable,s=this.options.editable,l=this.list.header.find("table"),d=this.list.content.find("table"),h=c.styles,p=u.support.isRtl(this.wrapper),f=this.timeline.element.find($+h.gridContent),g=l.add(d),m=n(),v=!1,b=!0,_=function(e){var t=o.timeline.view()._timeSlots()[0].offsetWidth;f.scrollLeft(f.scrollLeft()+(e?-t:t))},k=function(e){var t=o.current.parent("tr"+n()),r=o.current.index(),a=t[e]();0!==o.select().length&&o.clearSelection(),0!==a.length?(o._current(a.children("td:eq("+r+")")),o._scrollTo(o.current)):o.current.is("td")&&"prev"==e?i(l):o.current.is("th")&&"next"==e&&i(d)},w=function(e){var t=o.current[e]();0!==t.length&&(o._current(t),r=o.current.index())},y=function(e){var t=o.dataItem(o.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},x=function(){var e,t;o.options.editable&&!o.list.editable&&(e=o.select(),t=u.attr("uid"),e.length&&o.removeTask(e.attr(t)))};return e(this.wrapper).on("mousedown"+I,"tr"+m+", div"+m+":not("+$+h.line+")",function(t){var r,l=e(t.currentTarget),d=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(a&&(r=l.is("tr")?e(t.target).closest("td"):o.list.content.find("tr"+n(l.attr(u.attr("uid")))+" > td:first"),o._current(r)),!a&&!s||d||(o._focusTimeout=setTimeout(function(){i(o.list.content.find("table"),!0)},2)))}),!0!==a?(d.on("keydown"+I,function(e){e.keyCode==D.DELETE&&x()}),t):(g.on("focus"+I,function(){var t=this===d.get(0)?"td":"th",n=(e(this),o.select()),i=o.current||e(n.length?n:this).find(t+":eq("+(r||0)+")");o._current(i)}).on("blur"+I,function(){o._current(),this==l&&e(this).attr(A,-1)}).on("keydown"+I,function(e){var t,n=e.keyCode;if(o.current)switch(t=o.current.is("td"),n){case D.RIGHT:e.preventDefault(),e.altKey?_():e.ctrlKey?y(p?v:b):w(p?"prev":"next");break;case D.LEFT:e.preventDefault(),e.altKey?_(!0):e.ctrlKey?y(p?b:v):w(p?"next":"prev");break;case D.UP:e.preventDefault(),k("prev");break;case D.DOWN:e.preventDefault(),k("next");break;case D.SPACEBAR:e.preventDefault(),t&&o.select(o.current.closest("tr"));break;case D.ENTER:e.preventDefault(),t?o.options.editable&&(o._cachedCurrent=o.current,o.list._startEditHandler(o.current),e.stopPropagation()):o.current.children("a.k-link").click();break;case D.ESC:e.stopPropagation();break;case D.DELETE:t&&x();break;default:n>=49&&57>=n&&o.view(o.timeline._viewByIndex(n-49))}}),t)},_current:function(t){var n,i=c.styles;this.current&&this.current.length&&this.current.removeClass(i.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(i.focused).attr("id",H),(n=e(u._activeElement())).is("table")&&this.wrapper.find(n).length>0&&n.removeAttr(F).attr(F,H)):this.current=null},_dataBind:function(){var t,n=this;n.options.autoBind&&(this._preventRefresh=!0,this._preventDependencyRefresh=!0,t=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){n._preventRefresh=!1,n._preventDependencyRefresh=!1,n.refresh()}))},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.timeline.view()._renderCurrentTime(),this.list._adjustHeight()}}),u.PDFMixin&&(u.PDFMixin.extend(c.fn),c.fn._drawPDF=function(){var e="."+B.list,t=this.wrapper.find(e).width(),n=this.wrapper.clone();return n.find(e).css("width",t),this._drawPDFShadow({content:n})}),u.ui.plugin(c),C(!0,c,{styles:B})}(window.kendo.jQuery),function(e,t){function n(e){return function(t){return t[e]}}function i(e){return function(t){return!e(t)}}function r(){return"none"!==this.style.display}function o(n){var i,r=n.find(">tr:not(.k-filter-row)"),o=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();return r.length>1&&(a=r.find("th").filter(o).filter(function(){return this.rowSpan>1})),a=a.add(r.last().find("th").filter(o)),i=kendo.attr("index"),a.sort(function(n,r){var o,a;return n=e(n),r=e(r),o=n.attr(i),a=r.attr(i),o===t&&(o=e(n).index()),a===t&&(a=e(r).index()),(o=parseInt(o,10))>(a=parseInt(a,10))?1:a>o?-1:0}),a}function a(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(g("span",{className:r}));return i}function s(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)(t=e[n].style.width)&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}var l,d,c,u,h=kendo.data,p=e.extend,f=kendo.dom,g=f.element,m=f.text,v=f.html,b=kendo.ui,_=b.DataBoundWidget,k=h.DataSource,w=h.ObservableArray,y=h.Query,x=h.Model,C=e.proxy,S=e.map,T=e.grep,D=e.inArray,I=e.isPlainObject,E=Array.prototype.push,A="string",O="change",R="error",P="progress",M=".",F=".kendoTreeList",H="click",N="edit",$="save",L="expand",z="collapse",j="remove",B="dataBinding",U="dataBound",V="cancel",W="filterMenuInit",G="columnHide",q="columnShow",K="columnReorder",Y="columnResize",Q="columnMenuInit",X="columnLock",J="columnUnlock",Z="parentId",ee={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-loading",refresh:"k-i-refresh",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},te={create:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-delete",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-update",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}},ne=x.define({id:"id",parentId:Z,fields:{id:{type:"number"},parentId:{type:"number",nullable:!0}},init:function(e){x.fn.init.call(this,e),this._loaded=!1,this.parentIdField||(this.parentIdField=Z),this.parentId=this.get(this.parentIdField)},accept:function(e){x.fn.accept.call(this,e),this.parentId=this.get(this.parentIdField)},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return x.fn.shouldSerialize.call(this,e)&&"_loaded"!==e&&"_error"!=e&&"_edit"!=e&&!("parentId"!==this.parentIdField&&"parentId"===e)}});ne.parentIdField=Z,ne.define=function(e,n){var i,r;return n===t&&(n=e,e=ne),i=n.parentId||Z,delete n.parentId,n.parentIdField=i,r=x.define(e,n),i&&(r.parentIdField=i),r},(l=k.extend({init:function(e){k.fn.init.call(this,p(!0,{},{schema:{modelBase:ne,model:ne}},e))},_createNewModel:function(e){var t={},n=e instanceof x;return n&&(t=e),t=k.fn._createNewModel.call(this,t),n||(e.parentId&&(e[t.parentIdField]=e.parentId),t.accept(e)),t},_shouldWrap:function(){return!0},_readData:function(e){var t=this.data();return e=k.fn._readData.call(this,e),this._concat(e,t),e instanceof w?e:t},_concat:function(e,t){var n,i=t.length;for(n=0;e.length>n;n++)t[i++]=e[n];t.length=i},_readAggregates:function(e){var t=p(this._aggregateResult,this.reader.aggregates(e));return""in t&&(t[this._defaultParentId()]=t[""],delete t[""]),t},remove:function(e){var t=this._subtree(this._childrenMap(this.data()),e.id);this._removeItems(t),k.fn.remove.call(this,e)},_filterCallback:function(e){var t,n,i={},r=[],o=e.toArray();for(t=0;o.length>t;t++)for(n=o[t];n&&(i[n.id]||(i[n.id]=!0,r.push(n)),!i[n.parentId]);)i[n.parentId]=!0,(n=this.parentNode(n))&&r.push(n);return new y(r)},_subtree:function(e,t){var n,i,r=e[t]||[],o=this._defaultParentId();for(n=0,i=r.length;i>n;n++)r[n].id!==o&&(r=r.concat(this._subtree(e,r[n].id)));return r},_childrenMap:function(e){var t,n,i,r,o={};for(e=this._observeView(e),t=0;e.length>t;t++)i=(n=e[t]).id,r=n.parentId,o[i]=o[i]||[],o[r]=o[r]||[],o[r].push(n);return o},_calculateAggregates:function(e,t){var n,i,r,o,a,s;for(n={},(a=(t=t||{}).filter)&&(e=y.process(e,{filter:a,filterCallback:C(this._filterCallback,this)}).data),s=this._childrenMap(e),n[this._defaultParentId()]=new y(this._subtree(s,this._defaultParentId())).aggregate(t.aggregate),o=0;e.length>o;o++)i=e[o],r=this._subtree(s,i.id),n[i.id]=new y(r).aggregate(t.aggregate);return n},_queryProcess:function(e,t){var n,i,r,o,a,s,l;for((t=t||{}).filterCallback=C(this._filterCallback,this),n=this._defaultParentId(),i=y.process(e,t),e=(r=this._childrenMap(i.data))[n]||[],a=0;e.length>a;a++)(s=e[a]).id!==n&&(o=!(!(l=r[s.id])||!l.length),s.loaded()||s.loaded(o||!s.hasChildren),(s.loaded()||!0!==s.hasChildren)&&(s.hasChildren=o),o&&(e=e.slice(0,a+1).concat(l,e.slice(a+1))));return i.data=e,i},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},success:function(e,t){return t&&t.id||(this._data=this._observe([])),k.fn.success.call(this,e,t)},load:function(t){var n="_query",i=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates,r=e.Deferred().resolve().promise();if(t.loaded()){if(i)return r}else t.hasChildren&&(n="read");return this[n]({id:t.id}).then(C(this._modelLoaded,this,t.id),C(this._modelError,this,t.id))},contains:function(e,t){for(var n=e.id;t;){if(t.parentId===n)return!0;t=this.parentNode(t)}return!1},_byParentId:function(e,t){var n,i,r=[],o=this.view();if(e===t)return[];for(i=0;o.length>i;i++)(n=o.at(i)).parentId==e&&r.push(n);return r},_defaultParentId:function(){return this.reader.model.fn.defaults[this.reader.model.parentIdField]},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(e){return this.get(e.parentId)},level:function(e){var t=-1;e instanceof ne||(e=this.get(e));do{e=this.parentNode(e),t++}while(e);return t},filter:function(e){var n=k.fn.filter;return e===t?n.call(this,e):(n.call(this,e),t)}})).create=function(t){return e.isArray(t)?t={data:t}:t instanceof w&&(t={data:t.toJSON()}),t instanceof l?t:new l(t)},d=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=p(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new b.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model})},_isEditable:function(e){return e.field&&this.model.editable(e.field)},_fields:function(e){var t,n,i,r=[];for(t=0,n=e.length;n>t;t++)i=e[t],this._isEditable(i)&&r.push({field:i.field,format:i.format,editor:i.editor});return r},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty().end().removeAttr(kendo.attr("role")),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),c=d.extend({init:function(e,t){d.fn.init.call(this,e,t),this._attachHandlers(),kendo.cycleForm(this.wrapper),this.open()},events:[V,$],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t=this.options,n=[];this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>'),t.template?(this._appendTemplate(n),this.fields=[]):this._appendFields(n),this._appendButtons(n),new f.Tree(this.wrapper.children()[0]).render(n),this.wrapper.appendTo(t.appendTo),this.window=new b.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;typeof t===A&&(t=window.unescape(t)),t=kendo.template(t)(this.model),e.push(v(t))},_appendFields:function(e){var t,n,i,r=this.options.columns;for(t=0,n=r.length;n>t;t++)(i=r[t]).command||(e.push(v('<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>")),e.push(this._isEditable(i)?v("<div "+kendo.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'):g("div",{class:"k-edit-field"},[this.options.fieldRenderer(i,this.model)])))},_appendButtons:function(e){e.push(g("div",{class:"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var e=this._cancelProxy=C(this._cancel,this);this.wrapper.on(H+F,".k-grid-cancel",this._cancelProxy),this._saveProxy=C(this._save,this),this.wrapper.on(H+F,".k-grid-update",this._saveProxy),this.window.bind("close",function(t){t.userTriggered&&e(t)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.wrapper.off(F)},_cancel:function(e){this.trigger(V,e)},_save:function(){this.trigger($)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",C(this.destroy,this)).close()},destroy:function(){this.window.destroy(),this.window=null,this._dettachHandlers(),d.fn.destroy.call(this)}}),u=_.extend({init:function(t,n){if(_.fn.init.call(this,t,n),this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._selectable(),this._sortable(),this._resizable(),this._filterable(),this._attachEvents(),this._toolbar(),this._scrollable(),this._reorderable(),this._columnMenu(),this._minScreenSupport(),this._draggable(),this.options.autoBind&&this.dataSource.fetch(),this._hasLockedColumns){var i=this;this.wrapper.addClass("k-grid-lockedcolumns"),this._resizeHandler=function(){i.resize()},e(window).on("resize"+F,this._resizeHandler)}kendo.notify(this)},_draggable:function(){var t=this.options.editable;t&&t.move&&(this._dragging=new kendo.ui.HierarchicalDragAndDrop(this.wrapper,{$angular:this.$angular,autoScroll:!0,filter:"tbody>tr",itemSelector:"tr",allowedContainers:this.wrapper,hintText:function(t){return t.children("td").map(function(){return e(this).text()}).toArray().join("<span class='k-header k-drag-separator' />")},contains:C(function(e,t){var n=this.dataItem(t),i=this.dataItem(e);return i==n||this.dataSource.contains(i,n)},this),itemFromTarget:function(e){var t=e.closest("tr");return{item:t,content:t}},dragstart:C(function(){this.wrapper.addClass("k-treelist-dragging")},this),drop:C(function(){this.wrapper.removeClass("k-treelist-dragging")},this),dragend:C(function(e){var t=this.dataItem(e.destination);this.dataItem(e.source).set("parentId",t?t.id:null)},this),reorderable:!1,dropHintContainer:function(e){return e.children("td:eq(1)")},dropPositionFrom:function(e){return e.prevAll(".k-i-none").length>0?"after":"before"}}))},_scrollable:function(){var t,n,i;this.options.scrollable&&(t=this.thead.closest(".k-grid-header-wrap"),n=e(this.lockedContent).bind("DOMMouseScroll"+F+" mousewheel"+F,C(this._wheelScroll,this)),this.content.bind("scroll"+F,function(){t.scrollLeft(this.scrollLeft),n.scrollTop(this.scrollTop)}),(i=kendo.touchScroller(this.content))&&i.movable&&(this._touchScroller=i,i.movable.bind("change",function(e){t.scrollLeft(-e.sender.x),n&&n.scrollTop(-e.sender.y)})))},_wheelScroll:function(t){if(!t.ctrlKey){var n=kendo.wheelDeltaY(t);n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+F,!1),this.content.scrollTop(this.content.scrollTop()+-n))}},_progress:function(){var e=this.options.messages;this.tbody.find("tr").length||this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:ee.icon+" "+ee.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(e){"itemchange"==(e=e||{}).action&&this.editor||this.trigger(B)||(this._cancelEditor(),this._render(),this._adjustHeight(),this.trigger(U))},_angularFooters:function(e){var t,n,i,r=this.dataSource.aggregates(),o=this._footerItems();for(t=0;o.length>t;t++)i=r[(n=o.eq(t)).attr("data-parentId")],this._angularFooter(e,n.find("td").get(),i)},_angularFooter:function(e,t,n){var i=this.columns;this.angular(e,function(){return{elements:t,data:S(i,function(e){return{column:e,aggregate:n&&n[e.field]}})}})},items:function(){return this._hasLockedColumns?this._items(this.tbody).add(this._items(this.lockedTable)):this._items(this.tbody)},_items:function(t){return t.find("tr").filter(function(){return!e(this).hasClass(ee.footerTemplate)})},_footerItems:function(){var t=this.tbody;return this._hasLockedColumns&&(t=t.add(this.lockedTable)),t.find("tr").filter(function(){return e(this).hasClass(ee.footerTemplate)})},dataItems:function(){var e,t,n,i=kendo.ui.DataBoundWidget.fn.dataItems.call(this);if(this._hasLockedColumns){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_showStatus:function(t){var n=this.element.find(".k-status"),i=e(this.content).add(this.lockedContent);n.length||(n=e("<div class='k-status' />").appendTo(this.element)),this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]),i.hide(),n.html(t)},_hideStatus:function(){this.element.find(".k-status").remove(),e(this.content).add(this.lockedContent).show()},_adjustHeight:function(){var e,t=this.element,n=t.find(M+ee.gridContentWrap),i=t.find(M+ee.gridHeader),r=t.find(M+ee.gridToolbar),o=kendo.support.scrollbar();t.height(this.options.height),function(e){var t,n;return!!e[0].style.height||(t=e.height(),e.height("auto"),n=e.height(),e.height(""),t!=n)}(t)&&(e=t.height()-i.outerHeight()-r.outerHeight(),n.height(e),this._hasLockedColumns&&(o=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?o:0,this.lockedContent.height(e-o)))},_resize:function(){this._applyLockedContainersWidth(),this._adjustHeight()},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=C(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e,n,i,r=this.columns,o=!1,a=window.innerWidth>0?window.innerWidth:screen.width;for(e=0;r.length>e;e++)(i=(n=r[e]).minScreenWidth)!==t&&null!==i&&(o=!0,i>a?this.hideColumn(n):this.showColumn(n));return o},destroy:function(){_.fn.destroy.call(this);var t=this.dataSource;t.unbind(O,this._refreshHandler),t.unbind(R,this._errorHandler),t.unbind(P,this._progressHandler),this._resizeHandler&&e(window).off("resize"+F,this._resizeHandler),this._dragging&&(this._dragging.destroy(),this._dragging=null),this.resizable&&(this.resizable.destroy(),this.resizable=null),this.reorderable&&(this.reorderable.destroy(),this.reorderable=null),this._draggableInstance&&this._draggableInstance.element&&(this._draggableInstance.destroy(),this._draggableInstance=null),this.minScreenResizeHandler&&e(window).off("resize",this.minScreenResizeHandler),this._destroyEditor(),this.element.off(F),this._touchScroller&&this._touchScroller.destroy(),this._autoExpandable=null,this._refreshHandler=this._errorHandler=this._progressHandler=null,this.thead=this.content=this.tbody=this.table=this.element=this.lockedHeader=this.lockedContent=null,this._statusTree=this._headerTree=this._contentTree=this._lockedHeaderColsTree=this._lockedContentColsTree=this._lockedHeaderTree=this._lockedContentTree=null},options:{name:"TreeList",columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,columnMenu:!1,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:!0},resizable:!1,filterable:!1,editable:!1,reorderable:!1},events:[O,N,$,j,L,z,B,U,V,W,G,q,K,Y,Q,X,J],_toggle:function(e,n){var i=e.loaded();e._error&&(e.expanded=!1,e._error=t),(i||!e.expanded)&&(t===n&&(n=!e.expanded),e.expanded=n,i||this.dataSource.load(e).always(C(function(){this._render(),this._syncLockedContentHeight()},this)),this._render(),this._syncLockedContentHeight())},expand:function(e){this._toggle(this.dataItem(e),!0)},collapse:function(e){this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var n=e(t.currentTarget),i=this.dataItem(n),r=i.expanded?z:L;this.trigger(r,{model:i})||this._toggle(i),t.preventDefault()},_attachEvents:function(){var e=M+ee.iconCollapse+", ."+ee.iconExpand+", ."+ee.refresh,t=M+ee.retry,n=this.dataSource;this.element.on("mousedown"+F,e,C(this._toggleChildren,this)).on(H+F,t,C(n.fetch,n)).on(H+F,".k-button[data-command]",C(this._commandClick,this))},_commandByName:function(t){var n,i,r,o,a=this.columns,s=e.isArray(this.options.toolbar)?this.options.toolbar:[];if(t=t.toLowerCase(),te[t])return te[t];for(n=0;a.length>n;n++)if(r=a[n].command)for(i=0;r.length>i;i++)if((o=r[i].name)&&o.toLowerCase()==t)return r[i];for(n=0;s.length>n;n++)if((o=s[n].name)&&o.toLowerCase()==t)return s[n]},_commandClick:function(n){var i=e(n.currentTarget),r=i.attr("data-command"),o=this._commandByName(r),a=i.parentsUntil(this.wrapper,"tr");a=a.length?a:t,o&&(o.methodName?this[o.methodName](a):o.click&&o.click.call(this,n),n.preventDefault())},_ensureExpandableColumn:function(){var e,t;this._autoExpandable&&delete this._autoExpandable.expandable,e=T(this.columns,i(n("hidden"))),t=T(e,n("expandable")),this.columns.length&&!t.length&&(this._autoExpandable=e[0],e[0].expandable=!0)},_columns:function(){var e,t=this.options.columns||[];this.columns=S(t,function(e){return p({encoded:!0},e="string"==typeof e?{field:e}:e)}),(e=this._lockedColumns()).length>0&&(this._hasLockedColumns=!0,this.columns=e.concat(this._nonLockedColumns())),this._ensureExpandableColumn(),this._columnTemplates(),this._columnAttributes()},_columnTemplates:function(){var e,t,n,i=this.columns;for(e=0,t=i.length;t>e;e++)(n=i[e]).template&&(n.template=kendo.template(n.template)),n.headerTemplate&&(n.headerTemplate=kendo.template(n.headerTemplate)),n.footerTemplate&&(n.footerTemplate=kendo.template(n.footerTemplate))},_columnAttributes:function(){function t(t){var n,i,r,o;if(t&&t.style)for(n=t.style.split(";"),t.style={},i=0;n.length>i;i++)r=n[i].split(":"),(o=e.trim(r[0]))&&(t.style[e.camelCase(o)]=e.trim(r[1]))}var n,i,r=this.columns;for(n=0,i=r.length;i>n;n++)t(r[n].attributes),t(r[n].headerAttributes)},_layout:function(){var e,t,n=this.columns,i=this.element,r="";this.wrapper=i.addClass(ee.wrapper),r="<div class='#= gridHeader #' style=\"padding-right: "+kendo.support.scrollbar()+'px;">',this._hasLockedColumns&&(r+="<div class='k-grid-header-locked'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div>"),r+="<div class='#= gridHeaderWrap #'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div></div>",this._hasLockedColumns&&(r+="<div class='k-grid-content-locked'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>"),r+="<div class='#= gridContentWrap #'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>",this.options.scrollable||(r="<table role='treegrid' tabindex='0'><colgroup></colgroup><thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"),this.options.toolbar&&(r="<div class='#= header # #= gridToolbar #' />"+r),i.append(kendo.template(r)(ee)+"<div class='k-status' />"),this.toolbar=i.find(M+ee.gridToolbar),e=i.find(M+ee.gridHeader).find("thead").addBack().filter("thead"),this.thead=e.last(),(t=i.find(M+ee.gridContentWrap)).length?this.content=t:t=i,this.table=t.find(">table"),this.tbody=this.table.find(">tbody"),this._hasLockedColumns&&(this.lockedHeader=e.first().closest(".k-grid-header-locked"),this.lockedContent=i.find(".k-grid-content-locked"),this.lockedTable=this.lockedContent.children()),this._initVirtualTrees(),this._renderCols(),this._renderHeader(),this.angular("compile",function(){return{elements:e.find("th.k-header").get(),data:S(n,function(e){return{column:e}})}})},_initVirtualTrees:function(){this._headerColsTree=new f.Tree(this.thead.prev()[0]),this._contentColsTree=new f.Tree(this.tbody.prev()[0]),this._headerTree=new f.Tree(this.thead[0]),this._contentTree=new f.Tree(this.tbody[0]),this._statusTree=new f.Tree(this.element.children(".k-status")[0]),this.lockedHeader&&(this._lockedHeaderColsTree=new f.Tree(this.lockedHeader.find("colgroup")[0]),this._lockedContentColsTree=new f.Tree(this.lockedTable.find(">colgroup")[0]),this._lockedHeaderTree=new f.Tree(this.lockedHeader.find("thead")[0]),this._lockedContentTree=new f.Tree(this.lockedTable.find(">tbody")[0]))},_toolbar:function(){var t,n=this.options.toolbar,i=this.toolbar;n&&(e.isArray(n)?(t=this._buildCommands(n),new f.Tree(i[0]).render(t)):i.append(kendo.template(n)({})),this.angular("compile",function(){return{elements:i.get()}}))},_lockedColumns:function(){return T(this.columns,n("locked"))},_nonLockedColumns:function(){return T(this.columns,i(n("locked")))},_flushCache:function(){this.options.$angular&&(this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]))},_render:function(t){var n,i,r;t=t||{},n=this.options.messages,i=this.dataSource.rootNodes(),this.dataSource.aggregates(),r=this.select().map(function(t,n){return e(n).attr("data-uid")}),this._absoluteIndex=0,this._angularItems("cleanup"),this._angularFooters("cleanup"),this._flushCache(),t.error?this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[ee.button,ee.retry].join(" "),messages:n})):i.length?(this._hideStatus(),this._contentTree.render(this._trs({columns:this._nonLockedColumns(),aggregates:t.aggregates,selected:r,data:i,visible:!0,level:0})),this._hasLockedColumns&&(this._absoluteIndex=0,this._lockedContentTree.render(this._trs({columns:this._lockedColumns(),aggregates:t.aggregates,selected:r,data:i,visible:!0,level:0})))):this._showStatus(kendo.htmlEncode(n.noRows)),this._touchScroller&&this._touchScroller.contentResized(),this._angularItems("compile"),this._angularFooters("compile"),this._adjustRowsHeight()},_adjustRowsHeight:function(){var e,t,n,i,r,o,a,s,l,d,c,u,h,p;if(this._hasLockedColumns){for(e=this.table,t=this.lockedTable,i=(n=e[0].rows).length,o=t[0].rows,s=(a=e.add(t)).length,l=[],d=this.lockedHeader.find("tr"),c=this.thead.find("tr"),d.add(c).height("auto").height(Math.max(d.height(),c.height())),r=0;i>r&&o[r];r++)n[r].style.height&&(n[r].style.height=o[r].style.height=""),p=0,(u=n[r].offsetHeight)>(h=o[r].offsetHeight)?p=u:h>u&&(p=h),l.push(p);for(r=0;s>r;r++)a[r].style.display="none";for(r=0;i>r;r++)l[r]&&(n[r].style.height=o[r].style.height=l[r]+1+"px");for(r=0;s>r;r++)a[r].style.display=""}},_ths:function(e){var t,n,i,r,o,a,s,l,d=[];for(s=0,l=e.length;l>s;s++)t=e[s],i=[],r=[ee.header],n=t.headerTemplate?t.headerTemplate({}):t.title||t.field||"",a=t.headerTemplate?v(n):m(n),i.push(t.sortable?g("a",{href:"#",className:ee.link},[a]):a),o={"data-field":t.field,"data-title":t.title,style:!0===t.hidden?{display:"none"}:{},className:r.join(" "),role:"columnheader"},o=p(!0,{},o,t.headerAttributes),d.push(g("th",o,i));return d},_cols:function(e){var t,n,i,r=[];for(i=0;e.length>i;i++)!0!==e[i].hidden&&(n={},(t=e[i].width)&&0!==parseInt(t,10)&&(n.style={width:"string"==typeof t?t:t+"px"}),r.push(g("col",n)));return r},_renderCols:function(){var e=this._nonLockedColumns();this._headerColsTree.render(this._cols(e)),this.options.scrollable&&this._contentColsTree.render(this._cols(e)),this._hasLockedColumns&&(e=this._lockedColumns(),this._lockedHeaderColsTree.render(this._cols(e)),this._lockedContentColsTree.render(this._cols(e)))},_renderHeader:function(){var e=this._nonLockedColumns();this._headerTree.render([g("tr",{role:"row"},this._ths(e))]),this._hasLockedColumns&&(e=this._lockedColumns(),this._lockedHeaderTree.render([g("tr",{role:"row"},this._ths(e))]),this._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){var e,t,n,i,r,o;this._hasLockedColumns&&(e=s(this.lockedHeader.find(">table>colgroup>col")),n=s((t=this.thead.parent()).find(">colgroup>col")),i=this.wrapper[0].clientWidth,r=kendo.support.scrollbar(),e>=i&&(e=i-3*r),this.lockedHeader.add(this.lockedContent).width(e),t.add(this.table).width(n),o=i-e-2,this.content.width(o),t.parent().width(o-r))},_trs:function(t){var n,i,r,o,a,s,l,d,c=[],u=t.level,h=t.data,p=this.dataSource,f=p.aggregates()||{},g=t.columns;for(s=0,l=h.length;l>s;s++)r=[],o=(a=(n=h[s]).loaded()&&p.childNodes(n))&&a.length,i={"data-uid":n.uid,role:"row"},o&&(i["aria-expanded"]=!!n.expanded),t.visible?(this._absoluteIndex%2!=0&&r.push(ee.alt),this._absoluteIndex++):i.style={display:"none"},e.inArray(n.uid,t.selected)>=0&&r.push(ee.selected),o&&r.push(ee.group),n._edit&&r.push("k-grid-edit-row"),i.className=r.join(" "),c.push(this._tds({model:n,attr:i,level:u},g,C(this._td,this))),o&&(c=c.concat(this._trs({columns:g,parentId:n.id,aggregates:f,selected:t.selected,visible:t.visible&&!!n.expanded,data:a,level:u+1})));return this._hasFooterTemplate()&&(d=t.parentId||null,i={className:ee.footerTemplate,"data-parentId":d},t.visible||(i.style={display:"none"}),c.push(this._tds({model:f[d],attr:i,level:u},g,this._footerTd))),c},_footerTd:function(t){var n=[],i=t.column,r=t.column.footerTemplate||e.noop,o=t.model[i.field]||{},s={role:"gridcell",style:!0===i.hidden?{display:"none"}:{}};return i.expandable&&(n=n.concat(a({level:t.level+1,className:ee.iconPlaceHolder}))),i.attributes&&p(s,i.attributes),n.push(v(r(o)||"")),g("td",s,n)},_hasFooterTemplate:function(){return!!T(this.columns,function(e){return e.footerTemplate}).length},_tds:function(e,t,n){var i,r,o,a=[];for(r=0,o=t.length;o>r;r++)i=t[r],a.push(n({model:e.model,column:i,level:e.level}));return g("tr",e.attr,a)},_td:function(e){var t,n=[],i=e.model,r=e.column,o={role:"gridcell",style:!0===r.hidden?{display:"none"}:{}};return i._edit&&r.field&&i.editable(r.field)?o[kendo.attr("container-for")]=r.field:(r.expandable&&(n=a({level:e.level,className:ee.iconPlaceHolder}),(t=[ee.icon]).push(i.hasChildren?i.expanded?ee.iconCollapse:ee.iconExpand:ee.iconHidden),i._error?t.push(ee.refresh):!i.loaded()&&i.expanded&&t.push(ee.loading),n.push(g("span",{className:t.join(" ")})),o.style["white-space"]="nowrap"),r.attributes&&p(!0,o,r.attributes),r.command?n=this._buildCommands(i._edit?["update","canceledit"]:r.command):n.push(this._cellContent(r,i))),g("td",o,n)},_cellContent:function(e,n){var i;return e.template?i=e.template(n):e.field&&null!==(i=n.get(e.field))&&e.format&&(i=kendo.format(e.format,i)),(null===i||t===i)&&(i=""),e.template||!e.encoded?v(i):m(i)},_buildCommands:function(e){var t,n=[];for(t=0;e.length>t;t++)n.push(this._button(e[t]));return n},_button:function(e){var t=(e.name||e).toLowerCase(),n=this.options.messages.commands[t],i=[];return(e=p({},te[t],{text:n},e)).imageClass&&i.push(g("span",{className:["k-icon",e.imageClass].join(" ")})),g("button",{"data-command":t,className:["k-button k-button-icontext",e.className].join(" ")},i.concat([m(e.text||e.name)]))},_positionResizeHandle:function(n){var i,r,o=e(n.currentTarget),a=this.resizeHandle,s=o.position(),l=s.left,d=o.outerWidth(),c=o.closest("div"),u=n.clientX+e(window).scrollLeft(),h=this.options.columnResizeHandleWidth||3;return l+=c.scrollLeft(),a||(a=this.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner" /></div>')),u>(i=o.offset().left+d)-h&&i+h>u?(c.append(a),a.show().css({top:s.top,left:l+d-h-1,height:o.outerHeight(),width:3*h}).data("th",o),r=this,a.off("dblclick"+F).on("dblclick"+F,function(){var t=o.index();e.contains(r.thead[0],o[0])&&(t+=T(r.columns,function(e){return e.locked&&!e.hidden}).length),r.autoFitColumn(t)}),t):(a.hide(),t)},autoFitColumn:function(t){var n,i,a,s,l,d,c,u,h,p,f,g,m,v,b,_,k,w=this,y=w.options,x=w.columns,C=kendo.support.browser,S=w.lockedHeader?o(w.lockedHeader.find(">table>thead")).filter(r).length:0;if((t="number"==typeof t?x[t]:I(t)?T(x,function(e){return e===t})[0]:T(x,function(e){return e.field===t})[0])&&!t.hidden){for(n=D(t,x),i=(a=(s=t.locked)?w.lockedHeader.children("table"):w.thead.parent()).find("[data-index='"+n+"']"),d=s?w.lockedTable:w.table,c=w.footer||e(),w.footer&&w.lockedContent&&(c=w.footer.children(s?".k-grid-footer-locked":".k-grid-footer-wrap")),u=c.find("table").first(),w.lockedHeader&&S>=n&&!s&&(n-=S),h=0;x.length>h&&x[h]!==t;h++)x[h].hidden&&n--;if(l=y.scrollable?a.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")").add(d.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")).add(u.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")):d.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")"),p=a.add(d).add(u),f=i.outerWidth(),l.width(""),p.css("table-layout","fixed"),l.width("auto"),p.addClass("k-autofitting"),p.css("table-layout",""),Math.max(a.width(),d.width(),u.width()),g=Math.ceil(Math.max(i.outerWidth(),d.find("tr").eq(0).children("td:visible").eq(n).outerWidth(),u.find("tr").eq(0).children("td:visible").eq(n).outerWidth())),l.width(g),t.width=g,y.scrollable){for(m=a.find("col"),b=0,_=0,k=m.length;k>_;_+=1){if(!(v=m[_].style.width)||-1!=v.indexOf("%")){b=0;break}b+=parseInt(v,10)}b&&p.each(function(){this.style.width=b+"px"})}C.msie&&8==C.version&&(p.css("display","inline-table"),setTimeout(function(){p.css("display","table")},1)),p.removeClass("k-autofitting"),w.trigger(Y,{column:t,oldWidth:f,newWidth:g}),w._applyLockedContainersWidth(),w._syncLockedContentHeight(),w._syncLockedHeaderHeight()}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?kendo.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this._touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),function(e,t){var n,i,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&((n=e.offsetHeight)>(i=t.offsetHeight)?(r=t.rows[t.rows.length-1],o=n-i):(r=e.rows[e.rows.length-1],o=i-n),r.style.height=r.offsetHeight+o+"px")}(e,t))},_resizable:function(){if(this.options.resizable){this.resizable&&this.resizable.destroy();var t=this;e(this.lockedHeader).find("thead").add(this.thead).on("mousemove"+F,"th",e.proxy(this._positionResizeHandle,this)),this.resizable=new kendo.ui.Resizable(this.wrapper,{handle:".k-resize-handle",start:function(n){var i,r,o=e(n.currentTarget).data("th"),a="col:eq("+e.inArray(o[0],o.parent().children().filter(":visible"))+")";t.wrapper.addClass("k-grid-column-resizing"),t.lockedHeader&&e.contains(t.lockedHeader[0],o[0])?(i=t.lockedHeader,r=t.lockedTable):(i=t.thead.parent(),r=t.table),this.col=r.children("colgroup").find(a).add(i.find(a)),this.th=o,this.startLocation=n.x.location,this.columnWidth=o.outerWidth(),this.table=this.col.closest("table"),this.totalWidth=this.table.width()},resize:function(e){var t=e.x.location-this.startLocation;11>this.columnWidth+t&&(t=11-this.columnWidth),this.table.width(this.totalWidth+t),this.col.width(this.columnWidth+t)},resizeend:function(){var e,n,i;t.wrapper.removeClass("k-grid-column-resizing"),e=this.th.attr("data-field"),n=T(t.columns,function(t){return t.field==e}),i=Math.floor(this.th.outerWidth()),n[0].width=i,t._resize(),t._adjustRowsHeight(),t.trigger(Y,{column:n,oldWidth:this.columnWidth,newWidth:i}),this.table=this.col=this.th=null}})}},_sortable:function(){var t,n,i,r,o,a=this.columns,s=e(this.lockedHeader).add(this.thead).find("th"),l=kendo.attr("field"),d=this.options.sortable;if(d)for(r=0,o=s.length;o>r;r++)!1!==(t=a[r]).sortable&&!t.command&&t.field&&((n=(i=s.eq(r)).data("kendoColumnSorter"))&&n.destroy(),i.attr(l,t.field).kendoColumnSorter(p({},d,t.sortable,{dataSource:this.dataSource})))},_filterable:function(){var t,n,i,r,o,a,s=e(this.lockedHeader).add(this.thead).find("th"),l=this.options.filterable;if(l&&!this.options.columnMenu)for(a=C(function(e){this.trigger(W,{field:e.field,container:e.container})},this),t=0,n=s.length;n>t;t++)i=this.columns[t],(o=(r=s.eq(t)).data("kendoFilterMenu"))&&o.destroy(),i.command||!1===i.filterable||r.kendoFilterMenu(p(!0,{},l,i.filterable,{dataSource:this.dataSource,init:a}))},_change:function(){this.trigger(O)},_selectable:function(){var e,n,i=this.options.selectable,r=this.table;i&&(i=kendo.ui.Selectable.parseOptions(i),this._hasLockedColumns&&(r=r.add(this.lockedTable),n=i.multiple&&i.cell),e=">tbody>tr:not(.k-footer-template)",i.cell&&(e+=">td"),this.selectable=new kendo.ui.Selectable(r,{filter:e,aria:!0,multiple:i.multiple,change:C(this._change,this),useAllItems:n,continuousItems:C(this._continuousItems,this,e,i.cell),relatedTarget:!i.cell&&this._hasLockedColumns?C(this._selectableTarget,this):t}))},_continuousItems:function(t,n){var i,r,o,a,s,l;if(this.lockedContent){for(i=e(t,this.lockedTable),r=e(t,this.table),o=n?this._lockedColumns().length:1,a=n?this.columns.length-o:1,s=[],l=0;i.length>l;l+=o)E.apply(s,i.slice(l,l+o)),E.apply(s,r.splice(0,a));return s}},_selectableTarget:function(t){var n,i,r,o=e();for(i=0,r=t.length;r>i;i++)n=this._relatedRow(t[i]),D(n[0],t)<0&&(o=o.add(n));return o},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(i=(n=t.closest(this.table.add(this.lockedTable))).find(">tbody>tr").index(t),(n=n[0]===this.table[0]?r:this.table).find(">tbody>tr").eq(i)):t},select:function(n){var i=this.selectable;return i?(t!==n&&(i.options.multiple||(i.clear(),n=n.first()),this._hasLockedColumns&&(n=n.add(e.map(n,C(this._relatedRow,this))))),i.value(n)):e()},clearSelection:function(){this.select().length&&(this.selectable.clear(),this.trigger(O))},_dataSource:function(e){var t=this.dataSource;t&&(t.unbind(O,this._refreshHandler),t.unbind(R,this._errorHandler),t.unbind(P,this._progressHandler)),this._refreshHandler=C(this.refresh,this),this._errorHandler=C(this._error,this),this._progressHandler=C(this._progress,this),(t=this.dataSource=l.create(e)).bind(O,this._refreshHandler),t.bind(R,this._errorHandler),t.bind(P,this._progressHandler)},setDataSource:function(e){this._dataSource(e),this._sortable(),this._filterable(),this._contentTree.render([]),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){var n=e(t).closest("tr");return this.dataSource.getByUid(n.attr(kendo.attr("uid")))},editRow:function(e){var t;typeof e===A&&(e=this.tbody.find(e)),(t=this.dataItem(e))&&("popup"!=this._editMode()&&(t._edit=!0),this._cancelEditor(),this._render(),this._createEditor(t),this.trigger(N,{container:this.editor.wrapper,model:t}))},_cancelEdit:function(e){e=p(e,{container:this.editor.wrapper,model:this.editor.model}),this.trigger(V,e)||this.cancelRow()},cancelRow:function(){this._cancelEditor(),this._render()},saveRow:function(){var e,t=this.editor;t&&(e={model:t.model,container:t.wrapper},t.end()&&!this.trigger($,e)&&this.dataSource.sync())},addRow:function(e){var n=this.editor,i=0,r={};if(!n||n.end())return e?(e instanceof ne||(e=this.dataItem(e)),r[e.parentIdField]=e.id,i=this.dataSource.indexOf(e)+1,e.set("expanded",!0),this.dataSource.load(e).then(C(this._insertAt,this,r,i)),t):(this._insertAt(r,i),t)},_insertAt:function(e,t){e=this.dataSource.insert(t,e);var n=this.tbody.find("["+kendo.attr("uid")+"="+e.uid+"]");this.editRow(n)},removeRow:function(e){var t=this.dataItem(e),n={model:t,row:e};t&&!this.trigger(j,n)&&(this.dataSource.remove(t),this.dataSource.sync())},_cancelEditor:function(){var e,t=this.editor;t&&(e=t.model,this._destroyEditor(),this.dataSource.cancelChanges(e),e._edit=!1)},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_createEditor:function(e){var t,n,i=this.tbody.find("["+kendo.attr("uid")+"="+e.uid+"]");i=i.add(this._relatedRow(i)),t=this._editMode(),n={columns:this.columns,model:e,target:this,clearContainer:!1,template:this.options.editable.template},"inline"==t?this.editor=new d(i,n):(p(n,{window:this.options.editable.window,commandRenderer:C(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:C(this.saveRow,this),cancel:C(this._cancelEdit,this),appendTo:this.wrapper}),this.editor=new c(i,n))},_editMode:function(){var e="inline",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e.toLowerCase()},hideColumn:function(e){this._toggleColumnVisibility(e,!0)},showColumn:function(e){this._toggleColumnVisibility(e,!1)},_toggleColumnVisibility:function(e,t){(e=this._findColumn(e))&&e.hidden!==t&&(e.hidden=t,this._ensureExpandableColumn(),this._renderCols(),this._renderHeader(),this._render(),this._adjustTablesWidth(),this.trigger(t?G:q,{column:e}),t||e.width||this.table.add(this.thead.closest("table")).width(""))},_findColumn:function(e){return e="number"==typeof e?this.columns[e]:I(e)?T(this.columns,function(t){return t===e})[0]:T(this.columns,function(t){return t.field===e})[0]},_adjustTablesWidth:function(){var e,t,n,i=this.thead.prev().children(),r=0;for(e=0,t=i.length;t>e;e++){if(!(n=i[e].style.width)||-1!=n.indexOf("%")){r=0;break}r+=parseInt(n,10)}r&&this.table.add(this.thead.closest("table")).width(r)},_reorderable:function(){var t,n;this.options.reorderable&&(t=(!0===this.options.scrollable?".k-grid-header:first ":"table:first>.k-grid-header ")+"th.k-header",n=this,this._draggableInstance=new b.Draggable(this.wrapper,{group:kendo.guid(),filter:t,hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(kendo.attr("title"))||t.attr(kendo.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}),this.reorderable=new b.Reorderable(this.wrapper,{draggable:this._draggableInstance,dragOverContainers:C(this._allowDragOverContainers,this),inSameContainer:function(t){return e(t.source).parent()[0]===e(t.target).parent()[0]},change:function(e){var t=e.newIndex,i=e.oldIndex,r="before"===e.position,o=n.columns[i];n.trigger(K,{newIndex:t,oldIndex:i,column:o}),n.reorderColumn(t,o,r)}}))},_allowDragOverContainers:function(e){return!1!==this.columns[e].lockable},reorderColumn:function(n,i,r){var o,a,s,l=this.columns,d=D(i,l),c=!!l[n].locked,u=this._nonLockedColumns().length;d!==n&&(!c||i.locked||1!=u)&&(c||!i.locked||l.length-u!=1)&&(r===t&&(r=d>n),o=(o=!!i.locked)!=c,i.locked=c,l.splice(r?n:n+1,0,i),l.splice(n>d?d:d+1,1),this._renderCols(),(a=e(this.lockedHeader).add(this.thead).find("th")).eq(d)[r?"insertBefore":"insertAfter"](a.eq(n)),s=this._headerTree.children[0].children,this._hasLockedColumns&&(s=this._lockedHeaderTree.children[0].children.concat(s)),s.splice(r?n:n+1,0,s[d]),s.splice(n>d?d:d+1,1),this._hasLockedColumns&&(this._lockedHeaderTree.children[0].children=s.splice(0,this._lockedColumns().length),this._headerTree.children[0].children=s),this._applyLockedContainersWidth(),this.refresh(),o&&(c?this.trigger(X,{column:i}):this.trigger(J,{column:i})))},lockColumn:function(e){var t,n=this.columns;(e="number"==typeof e?n[e]:T(n,function(t){return t.field===e})[0])&&!e.hidden&&(t=this._lockedColumns().length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;(e="number"==typeof e?n[e]:T(n,function(t){return t.field===e})[0])&&!e.hidden&&(t=this._lockedColumns().length,this.reorderColumn(t,e,!0))},_columnMenu:function(){var t,n,i,r,o,a,s=e(this.lockedHeader).add(this.thead).find("th"),l=this.columns,d=this.options,c=d.columnMenu,u=C(this._columnMenuInit,this),h=this._lockedColumns().length;if(c)for("boolean"==typeof c&&(c={}),a=0;s.length>a;a++)(t=l[a]).field&&((n=s.eq(a).data("kendoColumnMenu"))&&n.destroy(),r=!1,!1!==t.sortable&&!1!==c.sortable&&!1!==d.sortable&&(r=p({},d.sortable,{compare:(t.sortable||{}).compare})),o=!1,d.filterable&&!1!==t.filterable&&!1!==c.filterable&&(o=p({pane:this.pane},t.filterable,d.filterable)),i={dataSource:this.dataSource,values:t.values,columns:c.columns,sortable:r,filterable:o,messages:c.messages,owner:this,closeCallback:e.noop,init:u,pane:this.pane,lockedColumns:!1!==t.lockable&&h>0},d.$angular&&(i.$angular=d.$angular),s.eq(a).kendoColumnMenu(i))},_columnMenuInit:function(e){this.trigger(Q,{field:e.field,container:e.container})}}),kendo.ExcelMixin&&kendo.ExcelMixin.extend(u.prototype),kendo.PDFMixin&&kendo.PDFMixin.extend(u.prototype),p(!0,kendo.data,{TreeListDataSource:l,TreeListModel:ne}),p(!0,kendo.ui,{TreeList:u}),b.plugin(u)}(window.kendo.jQuery),function(e){function t(e){return{name:e.uniqueName,type:e.type}}function n(t){var n=e(t).closest(".k-pivot-setting");return n.length?n.data("kendoPivotSettingTarget"):null}function i(e,t,n){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:n,kpi:!0}}function r(e){var t=e.name;return[i(t,e.value,"value"),i(t,e.goal,"goal"),i(t,e.status,"status"),i(t,e.trend,"trend")]}var o=window.kendo,a=o.ui,s=a.Widget,l=".kendoPivotConfigurator",d=o.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'),c=s.extend({init:function(e,t){s.fn.init.call(this,e,t),this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"),this._dataSource(),this._layout(),this.refresh(),o.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:!1,sortable:!1,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler).unbind("error",t._errorHandler).unbind("progress",t._progressHandler):(t._errorHandler=e.proxy(t._error,t),t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t)),t.dataSource=o.data.PivotDataSource.create(t.options.dataSource),t.dataSource.bind("change",t._refreshHandler).bind("error",t._errorHandler).bind("progress",t._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measures&&this.measures.setDataSource(e),this.rows&&this.rows.setDataSource(e),this.columns&&this.columns.setDataSource(e),this.refresh()},_treeViewDataSource:function(){var t=this;return o.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e||"aggregator"in e)}}},transport:{read:function(n){var i,o;e.isEmptyObject(n.data)?t.dataSource.schemaDimensions().done(function(e){t.dataSource.cubeBuilder||function(e){for(var t,n=0,i=e.length;i>n;n++)if(2==e[n].type){t=!0;break}t&&e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}(e),n.success(e)}).fail(n.error):("[KPIs]"===(i=t.treeView.dataSource.get(n.data.uniqueName)).uniqueName?(o=!0,t.dataSource.schemaKPIs().done(function(e){n.success(function(e){for(var t=0,n=e.length;n>t;t++)e[t].uniqueName=e[t].name,e[t].type="kpi";return e}(e))}).fail(n.error)):"kpi"==i.type&&(o=!0,n.success(r(i))),o||(2==i.type?t.dataSource.schemaMeasures():i.dimensionUniqueName?t.dataSource.schemaLevels(n.data.uniqueName):t.dataSource.schemaHierarchies(n.data.uniqueName)).done(n.success).fail(n.error))}}})},_progress:function(e){o.ui.progress(this.element,e)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_layout:function(){this.form=e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element),this._fields(),this._targets()},_fields:function(){var i=e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form);this.treeView=e("<div/>").appendTo(i).kendoTreeView({template:'# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-dimension"></span># } ##: item.caption || item.name #',dataTextField:"caption",dragAndDrop:!0,autoBind:!1,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);(t.hasChildren||t.aggregator||t.measure)&&2!=t.type&&"[KPIs]"!==t.uniqueName||e.preventDefault()},drag:function(e){var t="k-denied",i=n(e.dropTarget);i&&i.validate(this.dataItem(e.sourceNode))&&(t="k-add"),e.setStatusClass(t)},drop:function(e){var i,o,a,s,l,d;if(e.preventDefault(),i=n(e.dropTarget),o=this.dataItem(e.sourceNode),i&&i.validate(o)){if(d=o.defaultHierarchy||o.uniqueName,"kpi"===o.type)for(s=(l=r(o)).length,d=[],a=0;s>a;a++)d.push(t(l[a]));else o.kpi&&(d=[t(o)]);i.add(d)}}}).data("kendoTreeView")},_createTarget:function(t,n){var i='<li class="k-item k-header" data-'+o.ns+'name="${data.name}">${data.name}',r=n.sortable,a="";return r&&(a+="#if (data.sortIcon) {#",a+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',a+="#}#"),(n.filterable||r)&&(a+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),i+='<span class="k-field-actions">'+(a+='<span class="k-icon k-si-close k-setting-delete"></span>')+"</span></li>",new o.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,hint:function(t){var n=e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');return n.find(".k-list").append(t.clone()),n},template:i,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},n))},_targets:function(){var t=e('<div class="k-state-default"/>').appendTo(this.form),n=e(d({name:this.options.messages.columnsLabel,icon:"k-i-vbars"})).appendTo(t),i=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(n.last()),r=e(d({name:this.options.messages.rowsLabel,icon:"k-i-hbars"})).appendTo(t),o=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last()),a=e(d({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(t),s=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(a.last()),l=this.options;this.columns=this._createTarget(i,{filterable:l.filterable,sortable:l.sortable,connectWith:o,messages:{empty:l.messages.columns,fieldMenu:l.messages.fieldMenu}}),this.rows=this._createTarget(o,{filterable:l.filterable,setting:"rows",connectWith:i,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}}),this.measures=this._createTarget(s,{setting:"measures",messages:{empty:l.messages.measures}}),i.add(o).add(s).on("mouseenter.kendoPivotConfigurator mouseleave.kendoPivotConfigurator",".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_resize:function(){var e,t,n=this.element,i=this.options.height;i&&(n.height(i),n.is(":visible")&&(t=n.children(".k-columns").children("div.k-state-default"),i=n.innerHeight(),e=(n.outerHeight()-i)/2,i=i-(t.outerHeight(!0)-t.height())-e,t.height(i)))},refresh:function(){var e=this.dataSource;(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog())&&this.treeView.dataSource.fetch(),this._catalog=this.dataSource.catalog(),this._cube=this.dataSource.cube(),this._resize(),this._progress(!1)},destroy:function(){s.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.form.find(".k-list").off(l),this.rows.destroy(),this.columns.destroy(),this.measures.destroy(),this.treeView.destroy(),this.element=null,this._refreshHandler=null}});a.plugin(c)}(window.kendo.jQuery),function(e,t,n){"use strict";function r(e,i,r,o){i[r]=t.copy(e.$eval(o)),i[r]===n&&o.match(/^\w*$/)&&x.warn(r+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+o+"'?")}function o(o,d,f,g,m,v){function b(){var n,i,v,b,_,k,w,I,E,A,O,R,P;return f.kRebind&&(n=e(e(d)[0].cloneNode(!0))),i=g.replace(/^kendo/,""),v=t.extend({},f.defaultOptions,o.$eval(f.kOptions||f.options)),(b=e(d)[g])?(_=b.widget.prototype.options,k=b.widget.prototype.events,e.each(f,function(e,t){var n,i,a,s;"source"!==e&&"kDataSource"!==e&&"kScopeField"!==e&&(n="data"+e.charAt(0).toUpperCase()+e.slice(1),0===e.indexOf("on")&&(i=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()}),k.indexOf(i)>-1&&(v[i]=t)),_.hasOwnProperty(n)?r(o,v,n,t):_.hasOwnProperty(e)&&!D[e]?r(o,v,e,t):T[e]||(a=e.match(/^k(On)?([A-Z].*)/))&&(s=a[2].charAt(0).toLowerCase()+a[2].slice(1),a[1]&&"kOnLabel"!=e?v[s]=t:("kOnLabel"==e&&(s="onLabel"),r(o,v,s,t))))}),(w=f.kDataSource||f.source)&&(v.dataSource=S(o,d,i,w)),v.$angular=[o],d.is("select")&&function(t){if(t.length>0){var n=e(t[0]);!/\S/.test(n.text())&&/^\?/.test(n.val())&&n.remove()}}(d[0].options),l(I=b.call(d,C=v).data(g),o,f,g,m),o.$emit("kendoWidgetCreated",I),E=h(o,I),f.kRebind&&p(I,o,d,n,f.kRebind,E,f),f.kNgDisabled&&(A=f.kNgDisabled,(O=o.$eval(A))&&I.enable(!O),a(I,o,0,A)),f.kNgReadonly&&(R=f.kNgReadonly,(P=o.$eval(R))&&I.readonly(P),s(I,o,0,R)),f.kNgModel&&u(I,o,f.kNgModel),y&&c(I,o,d,y,x),I&&function(t,n){function i(){a.disconnect()}function r(){a.observe(e(n)[0],{attributes:!0})}var o,a;window.MutationObserver&&t.wrapper&&(o=[].slice.call(e(n)[0].classList),a=new MutationObserver(function(n){i(),t&&(n.forEach(function(n){var i,r=e(t.wrapper)[0];switch(n.attributeName){case"class":(i=[].slice.call(n.target.classList)).forEach(function(e){o.indexOf(e)<0&&(r.classList.add(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(e))}),o.forEach(function(e){i.indexOf(e)<0&&(r.classList.remove(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(e))}),o=i;break;case"disabled":"function"==typeof t.enable&&t.enable(!e(n.target).attr("disabled"));break;case"readonly":"function"==typeof t.readonly&&t.readonly(!!e(n.target).attr("readonly"))}}),r())}),r(),t.first("destroy",i))}(I,d),I):(window.console.error("Could not find: "+g),null)}var _,k,y,x,I,E;if(!(d instanceof i))throw Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");return _=f.kNgDelay,k=o.$eval(_),y=(v=v||[])[0],x=v[1],_&&!k?(I=o.$root||o,E=function(){var e=o.$watch(_,function(t,n){t!==n&&(e(),d.removeAttr(f.$attr.kNgDelay),_=null,w(b))})},/^\$(digest|apply)$/.test(I.$$phase)?E():o.$apply(E),n):b()}function a(e,t,i,r){return kendo.ui.PanelBar&&e instanceof kendo.ui.PanelBar||kendo.ui.Menu&&e instanceof kendo.ui.Menu?(x.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+e.options.name),n):(t.$watch(r,function(t,n){t!=n&&e.enable(!t)}),n)}function s(e,t,i,r){return"function"!=typeof e.readonly?(x.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+e.options.name),n):(t.$watch(r,function(t,n){t!=n&&e.readonly(t)}),n)}function l(e,t,n,i,r){if(n[r]){var o=k(n[r]).assign;if(!o)throw Error(r+" attribute used but expression in it is not assignable: "+n[i]);o(t,e)}}function d(e){return I.test(e[0].tagName)}function c(e,t,i,r,o){var a,s,l,c;e.value&&(a=d(i)?function(){return/checkbox|radio/i.test((e=i).attr("type"))?e.prop("checked"):e.val();var e}:function(){return e.value()},r.$render=function(){var t=r.$viewValue;t===n&&(t=r.$modelValue),t===n&&(t=null),setTimeout(function(){e&&e.value(t)},0)},s=!1,d(i)&&i.on("change",function(){s=!0}),l=function(e){return function(){var n;s||(s=!1,e&&o&&(n=o.$pristine),r.$setViewValue(a()),e&&(r.$setPristine(),n&&o.$setPristine()),m(t))}},e.first("change",l(!1)),kendo.ui.AutoComplete&&e instanceof kendo.ui.AutoComplete||e.first("dataBound",l(!0)),c=a(),isNaN(r.$viewValue)||c==r.$viewValue||(r.$isEmpty(r.$viewValue)?null!=c&&""!==c&&c!=r.$viewValue&&r.$setViewValue(c):e.value(r.$viewValue)),r.$setPristine())}function u(t,i,r){var o,a,s,l,d,c;return"function"!=typeof t.value?(x.warn("k-ng-model specified on a widget that does not have the value() method: "+t.options.name),n):(o=e(t.element).parents("form"),a=i[o.attr("name")],s=k(r),l=s.assign,d=!1,t.$angular_setLogicValue(s(i)),c=function(e,i){e===n&&(e=null),d||e!==i&&t.$angular_setLogicValue(e)},kendo.ui.MultiSelect&&t instanceof kendo.ui.MultiSelect?i.$watchCollection(r,c):i.$watch(r,c),t.first("change",function(){d=!0,a&&a.$pristine&&a.$setDirty(),i.$apply(function(){l(i,t.$angular_getLogicValue())}),d=!1}),n)}function h(e,t){var n=e.$on("$destroy",function(){n(),t&&(t.element&&(t=g(t.element))&&t.destroy(),t=null)});return n}function p(t,n,i,r,o,a,s){var l=n.$watch(o,function(o,d){var c,u,h,p;o!==d&&(l(),(c=P[t.options.name])&&c.forEach(function(t){var i=n.$eval(s["k"+t]);i&&r.append(e(i).attr(kendo.toHyphens("k"+t),""))}),u=e(t.wrapper)[0],h=e(t.element)[0],p=i.injector().get("$compile"),t._destroy(),a&&a(),t=null,u&&h&&(u.parentNode.replaceChild(h,u),e(i).replaceWith(r)),p(r)(n))},!0);m(n)}function f(e,n){function i(e,t){b.directive(e,["directiveFactory",function(n){return n.create(t,e)}])}var r,o,a,s,l=n?"Mobile":"";l+=e.fn.options.name,r=l,o="kendo"+l.charAt(0)+l.substr(1).toLowerCase(),a=(l="kendo"+l).replace(/([A-Z])/g,"-$1"),-1==A.indexOf(l.replace("kendo",""))&&(s=l===o?[l]:[l,o],t.forEach(s,function(e){b.directive(e,function(){return{restrict:"E",replace:!0,template:function(e,t){var n=E[r]||"div",i=t.kScopeField;return"<"+n+" "+a+(i?'="'+i+'"':"")+">"+e.html()+"</"+n+">"}}})})),O.indexOf(l.replace("kendo",""))>-1||(i(l,l),o!=l&&i(o,l))}function g(t){return t=e(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}function m(e,t){var n=e.$root||e,i=/^\$(digest|apply)$/.test(n.$$phase);t?i?t():n.$apply(t):i||n.$digest()}function v(n,i,r){var o,a,s;if(e.isArray(n))return t.forEach(n,function(e){v(e,i,r)});if("string"==typeof n){for(o=n.split("."),a=kendo;a&&o.length>0;)a=a[o.shift()];if(!a)return R.push([n,i,r]),!1;n=a.prototype}return s=n[i],n[i]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return s.apply(e,arguments.length>0?arguments:t)}},t)},!0}var b,_,k,w,y,x,C,S,T,D,I,E,A,O,R,P;t&&(b=t.module("kendo.directives",[]),_=t.injector(["ng"]),k=_.get("$parse"),w=_.get("$timeout"),x=_.get("$log"),S=function(){var e={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},t=function(e,t){return"$PLAIN"==t?e:kendo.data[t].create(e)};return function(n,i,r,o){var a=e[r]||"DataSource",s=t(n.$eval(o),a);return n.$watch(o,function(e,n){var r,o;e!==n&&(r=t(e,a),(o=g(i))&&"function"==typeof o.setDataSource&&o.setDataSource(r))}),s}}(),T={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},D={name:!0,title:!0,style:!0},I=/^(input|select|textarea)$/i,b.factory("directiveFactory",["$compile",function(t){var n,i=!1;return y=t,{create:function(t,r){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){var n=this;n.template=function(e,n){t[e]=kendo.stringify(n)},e.$on("$destroy",function(){n.template=null,n=null})}],link:function(a,s,l,d){var c=e(s),u=t.replace(/([A-Z])/g,"-$1");c.attr(u,c.attr("data-"+u)),c[0].removeAttribute("data-"+u),o(a,s,l,t,r,d)&&(n&&clearTimeout(n),n=setTimeout(function(){a.$emit("kendoRendered"),i||(i=!0,e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))}))}}}}}]),E={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},A=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],O=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"],t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(e){O.push(e),e="kendo"+e,b.directive(e,function(){return{restrict:"A",link:function(t,n,i){o(t,n,i,e,e)}}})}),function(){function e(e){return function(n){t.forEach(n,function(t){t.fn&&t.fn.options&&t.fn.options.name&&/^[A-Z]/.test(t.fn.options.name)&&f(t,e)})}}t.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],e(!1)),t.forEach([kendo.mobile&&kendo.mobile.ui],e(!0))}(),R=[],v(kendo.ui,"plugin",function(t,n,i){this.next(),R=e.grep(R,function(e){return!v.apply(null,e)}),f(t,"Mobile"==i)}),v(["ui.Widget","mobile.ui.Widget"],"angular",function(i,r){var o,a=this.self;return"init"==i?(!r&&C&&(r=C),C=null,r&&r.$angular&&(a.$angular_scope=r.$angular[0],a.$angular_init(a.element,r)),n):((o=a.$angular_scope)&&function(e){var t=w;try{w=function(e){return e()},e()}finally{w=t}}(function(){var s,l,d=r(),c=d.elements,u=d.data;if(c.length>0)switch(i){case"cleanup":t.forEach(c,function(t){var n=e(t).data("$$kendoScope");n&&n!==o&&n.$$kendoScope&&function(t,n){t.$destroy(),n&&e(n).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}(n,t)});break;case"compile":s=a.element.injector(),l=s?s.get("$compile"):y,t.forEach(c,function(t,i){var r,a;d.scopeFrom?r=d.scopeFrom:(a=u&&u[i])!==n?(r=e.extend(o.$new(),a)).$$kendoScope=!0:r=o,e(t).data("$$kendoScope",r),l(t)(r)}),m(o)}}),n)}),v("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),v("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),v("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem(),t=this.self.options.dataValueField;return e?this.self.options.valuePrimitive?t?e[t]:e:e.toJSON():null}),v("ui.Select","$angular_setLogicValue",function(e){var t=this.self,i=t.options,r=i.dataValueField,o=i.text||"";e===n&&(e=""),r&&!i.valuePrimitive&&e&&(o=e[i.dataTextField]||"",e=e[r||i.dataTextField]),!1!==t.options.autoBind||t.listView.isBound()?t.value(e):!o&&e&&i.valuePrimitive?t.value(e):t._preselect(e,o)}),v("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems().slice(0),n=this.self.options.dataValueField;return n&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),t}),v("ui.MultiSelect","$angular_setLogicValue",function(t){var n,i,r,o;null==t&&(t=[]),i=(n=this.self).options,o=t,(r=i.dataValueField)&&!i.valuePrimitive&&(t=e.map(t,function(e){return e[r]})),!1!==i.autoBind||i.valuePrimitive||n.listView.isBound()?n.value(t):n._preselect(o,t)}),v("ui.AutoComplete","$angular_getLogicValue",function(){var e,t,n,i,r,o=this.self.options,a=this.self.value().split(o.separator),s=o.valuePrimitive,l=this.self.dataSource.data(),d=[];for(e=0,t=l.length;t>e;e++)for(n=l[e],i=o.dataTextField?n[o.dataTextField]:n,r=0;a.length>r;r++)if(i===a[r]){d.push(s?i:n.toJSON());break}return d}),v("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataTextField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),n.value(t)}),v("ui.Widget","$angular_init",function(t,n){var i,r,o,a,s=this.self;if(n&&!e.isArray(n))for(i=s.$angular_scope,r=s.events.length;--r>=0;)(a=n[o=s.events[r]])&&"string"==typeof a&&(n[o]=s.$angular_makeEventHandler(o,i,a))}),v("ui.Widget","$angular_makeEventHandler",function(e,t,n){return n=k(n),function(e){m(t,function(){n(t,{kendoEvent:e})})}}),v(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,n,i){return"change"!=e?this.next():(i=k(i),function(e){var r,o,a,s,l,d,c,u,h,p=e.sender,f=p.options,g={kendoEvent:e};for(t.isString(f.selectable)&&(r=-1!==f.selectable.indexOf("cell"),o=-1!==f.selectable.indexOf("multiple")),a=g.selected=this.select(),s=g.data=[],l=g.columns=[],c=0;a.length>c;c++)u=r?a[c].parentNode:a[c],h=p.dataItem(u),r?(t.element.inArray(h,s)<0&&s.push(h),d=t.element(a[c]).index(),t.element.inArray(d,l)<0&&l.push(d)):s.push(h);o||(g.dataItem=g.data=s[0],g.selected=a[0]),m(n,function(){i(n,g)})})}),v("ui.Grid","$angular_init",function(i,r){if(this.next(),r.columns){var o=e.extend({},kendo.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==n&&!e.encoded||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,o.paramName)+"#</span>")})}}),v("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.km-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),v("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),b.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(e,t,n){o(e,t,n,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileView","kendoMobileView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,n){n._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,n){o(e,t,n,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(t,n,i){n.find("a[k-action]").each(function(){e(this).attr("data-"+kendo.ns+"action",e(this).attr("k-action"))}),o(t,n,i,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="k"+e.slice(0,1).toUpperCase()+e.slice(1);b.directive(t,function(){return{restrict:"A",priority:2,link:function(n,i,r){i.attr(kendo.attr(kendo.toHyphens(e)),n.$eval(r[t]))}}})}),P={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var e={};t.forEach(P,function(n,i){t.forEach(n,function(t){e[t]||(e[t]=[]),e[t].push("?^^kendo"+i)})}),t.forEach(e,function(e,t){var n="k"+t,i=kendo.toHyphens(n);b.directive(n,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[n]){t.removeAttr(i);var o=t[0].outerHTML;return function(r,a,s,l){for(var d;!d&&l.length;)d=l.shift();d?(d.template(n,o),t.remove()):x.warn(i+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}())}(window.kendo.jQuery,window.angular),window.kendo;var e,t,n,a,s,l,d,c,u})?a.apply(t,s):a)||(e.exports=l)}).call(this,n(10),n(10),n(10))},function(e,t,n){var i,r,o;n(117),r=[],void 0===(o="function"==typeof(i=function(){return e=window,(e.kendo||(e.kendo={cultures:{}})).cultures["nl-NL"]={name:"nl-NL",numberFormat:{pattern:["-n"],decimals:2,",":".",".":",",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":".",".":",",groupSize:[3],symbol:"%"},currency:{pattern:["$ -n","$ n"],decimals:2,",":".",".":",",groupSize:[3],symbol:""}},calendars:{standard:{days:{names:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],namesAbbr:["zo","ma","di","wo","do","vr","za"],namesShort:["zo","ma","di","wo","do","vr","za"]},months:{names:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],namesAbbr:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]},AM:[""],PM:[""],patterns:{d:"d-M-yyyy",D:"dddd d MMMM yyyy",F:"dddd d MMMM yyyy HH:mm:ss",g:"d-M-yyyy HH:mm",G:"d-M-yyyy HH:mm:ss",m:"d MMMM",M:"d MMMM",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"HH:mm",T:"HH:mm:ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM yyyy",Y:"MMMM yyyy"},"/":"-",":":":",firstDay:1}}},window.kendo;var e})?i.apply(t,r):i)||(e.exports=o)},function(e,t,n){(function(e,t){!function(e,n){"use strict";var i,r,o="asc",a="desc",s="_ng_field_",l="_ng_depth_",d="_ng_hidden_",c="_ng_column_",u=/CUSTOM_FILTERS/g,h=/COL_FIELD/g,p=/DISPLAY_CELL_TEMPLATE/g,f=/EDITABLE_CELL_TEMPLATE/g,g=/CELL_EDITABLE_CONDITION/g,m=/<.+>/;e.ngGrid={},e.ngGrid.i18n={};t.module("ngGrid.services",[]);var v=t.module("ngGrid.directives",[]),b=t.module("ngGrid.filters",[]);t.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]),i=function(e,t,n,i){var r,o,a,s;if(void 0===e.selectionProvider.selectedItems)return!0;var l,d=n.which||n.keyCode,c=!1,u=!1,h=void 0===e.selectionProvider.lastClickedRow?1:e.selectionProvider.lastClickedRow.rowIndex,p=e.columns.filter(function(e){return e.visible}),f=e.columns.filter(function(e){return e.pinned});if(e.col&&(l=p.indexOf(e.col)),37!==d&&38!==d&&39!==d&&40!==d&&(i.config.noTabInterference||9!==d)&&13!==d)return!0;if(e.enableCellSelection){9===d&&n.preventDefault();var g=e.showSelectionCheckbox?1===e.col.index:0===e.col.index,m=1===e.$index||0===e.$index,v=e.$index===e.renderedColumns.length-1||e.$index===e.renderedColumns.length-2,b=p.indexOf(e.col)===p.length-1,_=f.indexOf(e.col)===f.length-1;37===d||9===d&&n.shiftKey?(r=0,g||(l-=1),m?g&&9===d&&n.shiftKey?(r=i.$canvas.width(),l=p.length-1,u=!0):r=i.$viewport.scrollLeft()-e.col.width:f.length>0&&(r=i.$viewport.scrollLeft()-p[l].width),i.$viewport.scrollLeft(r)):39!==d&&(9!==d||n.shiftKey)||(v?b&&9===d&&!n.shiftKey?(i.$viewport.scrollLeft(0),l=e.showSelectionCheckbox?1:0,c=!0):i.$viewport.scrollLeft(i.$viewport.scrollLeft()+e.col.width):_&&i.$viewport.scrollLeft(0),b||(l+=1))}return o=e.configGroups.length>0?i.rowFactory.parsedData.filter(function(e){return!e.isAggRow}):i.filteredRows,a=0,0!==h&&(38===d||13===d&&n.shiftKey||9===d&&n.shiftKey&&u)?a=-1:h!==o.length-1&&(40===d||13===d&&!n.shiftKey||9===d&&c)&&(a=1),a&&((s=o[h+a]).beforeSelectionChange(s,n)&&(s.continueSelection(n),e.$emit("ngGridEventDigestGridParent"),e.selectionProvider.lastClickedRow.renderedRowIndex>=e.renderedRows.length-6-2?i.$viewport.scrollTop(i.$viewport.scrollTop()+e.rowHeight):e.selectionProvider.lastClickedRow.renderedRowIndex<=8&&i.$viewport.scrollTop(i.$viewport.scrollTop()-e.rowHeight))),e.enableCellSelection&&setTimeout(function(){e.domAccessProvider.focusCellElement(e,e.renderedColumns.indexOf(p[l]))},3),!1},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n,i,r,o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError;for(t=[],n=arguments[1],i=0;i<a;i++)i in o&&(r=o[i],e.call(n,r,i,o)&&t.push(r));return t}),b.filter("checkmark",function(){return function(e){return e?"":""}}),b.filter("ngColumns",function(){return function(e){return e.filter(function(e){return!e.isAggCol})}}),t.module("ngGrid.services").factory("$domUtilityService",["$utilityService","$window",function(e,t){var i={},r={};return i.eventStorage={},i.AssignGridContainers=function(e,t,r){r.$root=n(t),r.$topPanel=r.$root.find(".ngTopPanel"),r.$groupPanel=r.$root.find(".ngGroupPanel"),r.$headerContainer=r.$topPanel.find(".ngHeaderContainer"),e.$headerContainer=r.$headerContainer,r.$headerScroller=r.$topPanel.find(".ngHeaderScroller"),r.$headers=r.$headerScroller.children(),r.$viewport=r.$root.find(".ngViewport"),r.$canvas=r.$viewport.find(".ngCanvas"),r.$footerPanel=r.$root.find(".ngFooterPanel");var o=e.$watch(function(){return r.$viewport.scrollLeft()},function(e){return r.$headerContainer.scrollLeft(e)});e.$on("$destroy",function(){n(r.$root.parent()).off("resize.nggrid"),r.$root=null,r.$topPanel=null,r.$headerContainer=null,r.$headers=null,r.$canvas=null,r.$footerPanel=null,o()}),i.UpdateGridLayout(e,r)},i.getRealWidth=function(e){var t=0,i=e.parents().andSelf().not(":visible");return n.swap(i[0],{visibility:"hidden",display:"block"},function(){t=e.outerWidth()}),t},i.UpdateGridLayout=function(e,t){if(t.$root){var n=t.$viewport.scrollTop();t.elementDims.rootMaxW=t.$root.width(),t.$root.is(":hidden")&&(t.elementDims.rootMaxW=i.getRealWidth(t.$root)),t.elementDims.rootMaxH=t.$root.height(),t.refreshDomSizes(),e.adjustScrollTop(n,!0)}},i.numberOfGrids=0,i.setStyleText=function(e,n){var i=e.styleSheet,r=e.gridId,o=t.document;i||(i=o.getElementById(r)),i||((i=o.createElement("style")).type="text/css",i.id=r,(o.head||o.getElementsByTagName("head")[0]).appendChild(i)),i.styleSheet&&!i.sheet?i.styleSheet.cssText=n:i.innerHTML=n,e.styleSheet=i,e.styleText=n},i.BuildStyles=function(e,t,n){for(var r,o=t.config.rowHeight,a=t.gridId,s=e.columns,l=0,d=e.totalRowWidth(),c="."+a+" .ngCanvas { width: "+d+"px; }."+a+" .ngRow { width: "+d+"px; }."+a+" .ngCanvas { width: "+d+"px; }."+a+" .ngHeaderScroller { width: "+(d+i.ScrollH)+"px}",u=0;u<s.length;u++)!1!==(r=s[u]).visible&&(c+="."+a+" .col"+u+" { width: "+r.width+"px; left: "+l+"px; height: "+o+"px }."+a+" .colt"+u+" { width: "+r.width+"px; }",l+=r.width);i.setStyleText(t,c),e.adjustScrollLeft(t.$viewport.scrollLeft()),n&&i.digest(e)},i.setColLeft=function(e,t,n){var o,a;n.styleText&&((o=r[e.index])||(o=r[e.index]=new RegExp(".col"+e.index+" { width: [0-9]+px; left: [0-9]+px")),a=n.styleText.replace(o,".col"+e.index+" { width: "+e.width+"px; left: "+t+"px"),i.setStyleText(n,a))},i.setColLeft.immediate=1,i.RebuildGrid=function(e,t){i.UpdateGridLayout(e,t),(null==t.config.maintainColumnRatios||t.config.maintainColumnRatios)&&t.configureColumnWidths(),e.adjustScrollLeft(t.$viewport.scrollLeft()),i.BuildStyles(e,t,!0)},i.digest=function(e){e.$root.$$phase||e.$digest()},i.ScrollH=17,i.ScrollW=17,i.LetterW=10,function(){var e=n("<div></div>");e.appendTo("body"),e.height(100).width(100).css("position","absolute").css("overflow","scroll"),e.append('<div style="height: 400px; width: 400px;"></div>'),i.ScrollH=e.height()-e[0].clientHeight,i.ScrollW=e.width()-e[0].clientWidth,e.empty(),e.attr("style",""),e.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>'),i.LetterW=e.children().first().width(),e.remove()}(),i}]),t.module("ngGrid.services").factory("$sortService",["$parse",function(e){var t={colSortFnCache:{},isCustomSort:!1,guessSortFn:function(e){switch(typeof e){case"number":return t.sortNumber;case"boolean":return t.sortBool;case"string":return e.match(/^[-+]?[$]?[\d,.]+%?$/)?t.sortNumberStr:t.sortAlpha;default:return"[object Date]"===Object.prototype.toString.call(e)?t.sortDate:t.basicSort}},basicSort:function(e,t){return e===t?0:e<t?-1:1},sortNumber:function(e,t){return e-t},sortNumberStr:function(e,t){var n,i,r=!1,o=!1;return n=parseFloat(e.replace(/[^0-9.-]/g,"")),isNaN(n)&&(r=!0),i=parseFloat(t.replace(/[^0-9.-]/g,"")),isNaN(i)&&(o=!0),r&&o?0:r?1:o?-1:n-i},sortAlpha:function(e,t){var n=e.toLowerCase(),i=t.toLowerCase();return n===i?0:n<i?-1:1},sortDate:function(e,t){var n=e.getTime(),i=t.getTime();return n===i?0:n<i?-1:1},sortBool:function(e,t){return e&&t?0:e||t?e?1:-1:0},sortData:function(n,i){if(i&&n){var r,a,s=n.fields.length,l=n.fields,d=i.slice(0);i.sort(function(i,c){for(var u,h,p,f,g=0,m=0;0===g&&m<s;)r=n.columns[m],a=n.directions[m],h=t.getSortFn(r,d),p=e(l[m])(i),f=e(l[m])(c),t.isCustomSort?(u=h(p,f),g=a===o?u:0-u):!p&&0!==p||!f&&0!==f?f||p?p?f||(g=-1):g=1:g=0:(u=h(p,f),g=a===o?u:0-u),m++;return g})}},Sort:function(e,n){t.isSorting||(t.isSorting=!0,t.sortData(e,n),t.isSorting=!1)},getSortFn:function(n,i){var r,o;if(t.colSortFnCache[n.field])r=t.colSortFnCache[n.field];else if(void 0!==n.sortingAlgorithm)r=n.sortingAlgorithm,t.colSortFnCache[n.field]=n.sortingAlgorithm,t.isCustomSort=!0;else{if(!(o=i[0]))return r;(r=t.guessSortFn(e(n.field)(o)))?t.colSortFnCache[n.field]=r:r=t.sortAlpha}return r}};return t}]),t.module("ngGrid.services").factory("$utilityService",["$parse",function(t){var i=/function (.{1,})\(/;return{visualLength:function(e){var t,i,r=document.getElementById("testDataLength");return r||((r=document.createElement("SPAN")).id="testDataLength",r.style.visibility="hidden",document.body.appendChild(r)),t=n(e),n(r).css({font:t.css("font"),"font-size":t.css("font-size"),"font-family":t.css("font-family")}),r.innerHTML=t.text(),i=r.offsetWidth,document.body.removeChild(r),i},forIn:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},evalProperty:function(e,n){return t("entity."+n)({entity:e})},endsWith:function(e,t){return!(!e||!t||"string"!=typeof e)&&-1!==e.indexOf(t,e.length-t.length)},isNullOrUndefined:function(e){return null==e},getElementsByClassName:function(e){var t,n;if(document.getElementsByClassName)return document.getElementsByClassName(e);var i=[],r=new RegExp("\\b"+e+"\\b"),o=document.getElementsByTagName("*");for(t=0;t<o.length;t++)n=o[t].className,r.test(n)&&i.push(o[t]);return i},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}(),seti18n:function(t,n){var i=e.ngGrid.i18n[n];for(var r in i)t.i18n[r]=i[r]},getInstanceType:function(e){var t=i.exec(e.constructor.toString());return t&&t.length>1?t[1].replace(/^\s+|\s+$/g,""):""}}}]),(r=function(e,t,n,i){this.rowIndex=0,this.offsetTop=this.rowIndex*n,this.entity=e,this.label=e.gLabel,this.field=e.gField,this.depth=e.gDepth,this.parent=e.parent,this.children=e.children,this.aggChildren=e.aggChildren,this.aggIndex=e.aggIndex,this.collapsed=i,this.groupInitState=i,this.rowFactory=t,this.rowHeight=n,this.isAggRow=!0,this.offsetLeft=25*e.gDepth,this.aggLabelFilter=e.aggLabelFilter}).prototype.toggleExpand=function(){this.collapsed=!this.collapsed,this.orig&&(this.orig.collapsed=this.collapsed),this.notifyChildren()},r.prototype.setExpand=function(e){this.collapsed=e,this.notifyChildren()},r.prototype.notifyChildren=function(){for(var e,t,n=Math.max(this.rowFactory.aggCache.length,this.children.length),i=0;i<n;i++)this.aggChildren[i]&&(this.aggChildren[i].entity[d]=this.collapsed,this.collapsed&&this.aggChildren[i].setExpand(this.collapsed)),this.children[i]&&(this.children[i][d]=this.collapsed),i>this.aggIndex&&this.rowFactory.aggCache[i]&&(e=this.rowFactory.aggCache[i],t=30*this.children.length,e.offsetTop=this.collapsed?e.offsetTop-t:e.offsetTop+t);this.rowFactory.renderedChange()},r.prototype.aggClass=function(){return this.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded"},r.prototype.totalChildren=function(){if(this.aggChildren.length>0){var e=0,n=function(i){i.aggChildren.length>0?t.forEach(i.aggChildren,function(e){n(e)}):e+=i.children.length};return n(this),e}return this.children.length},r.prototype.copy=function(){var e=new r(this.entity,this.rowFactory,this.rowHeight,this.groupInitState);return e.orig=this,e};var _=function(e,t,i,r,s,l){var d=this,c=e.colDef,h=0,p=null;d.colDef=e.colDef,d.width=c.width,d.groupIndex=0,d.isGroupedBy=!1,d.minWidth=c.minWidth?c.minWidth:50,d.maxWidth=c.maxWidth?c.maxWidth:9e3,d.enableCellEdit=void 0!==c.enableCellEdit?c.enableCellEdit:e.enableCellEdit||e.enableCellEditOnFocus,d.cellEditableCondition=c.cellEditableCondition||e.cellEditableCondition||"true",d.headerRowHeight=e.headerRowHeight,d.displayName=void 0===c.displayName?c.field:c.displayName,d.index=e.index,d.isAggCol=e.isAggCol,d.cellClass=c.cellClass,d.sortPriority=void 0,d.cellFilter=c.cellFilter?c.cellFilter:"",d.field=c.field,d.aggLabelFilter=c.aggLabelFilter||c.cellFilter,d.visible=l.isNullOrUndefined(c.visible)||c.visible,d.sortable=!1,d.resizable=!1,d.pinnable=!1,d.pinned=e.enablePinning&&c.pinned,d.originalIndex=null==e.originalIndex?d.index:e.originalIndex,d.groupable=l.isNullOrUndefined(c.groupable)||c.groupable,e.enableSort&&(d.sortable=l.isNullOrUndefined(c.sortable)||c.sortable),e.enableResize&&(d.resizable=l.isNullOrUndefined(c.resizable)||c.resizable),e.enablePinning&&(d.pinnable=l.isNullOrUndefined(c.pinnable)||c.pinnable),d.sortDirection=void 0,d.sortingAlgorithm=c.sortFn,d.headerClass=c.headerClass,d.cursor=d.sortable?"pointer":"default",d.headerCellTemplate=c.headerCellTemplate||s.get("headerCellTemplate.html"),d.cellTemplate=c.cellTemplate||s.get("cellTemplate.html").replace(u,d.cellFilter?"|"+d.cellFilter:""),d.enableCellEdit&&(d.cellEditTemplate=c.cellEditTemplate||s.get("cellEditTemplate.html"),d.editableCellTemplate=c.editableCellTemplate||s.get("editableCellTemplate.html")),c.cellTemplate&&!m.test(c.cellTemplate)&&(d.cellTemplate=s.get(c.cellTemplate)||n.ajax({type:"GET",url:c.cellTemplate,async:!1}).responseText),d.enableCellEdit&&c.editableCellTemplate&&!m.test(c.editableCellTemplate)&&(d.editableCellTemplate=s.get(c.editableCellTemplate)||n.ajax({type:"GET",url:c.editableCellTemplate,async:!1}).responseText),c.headerCellTemplate&&!m.test(c.headerCellTemplate)&&(d.headerCellTemplate=s.get(c.headerCellTemplate)||n.ajax({type:"GET",url:c.headerCellTemplate,async:!1}).responseText),d.colIndex=function(){var e=d.pinned?"pinned ":"";return e+="col"+d.index+" colt"+d.index,d.cellClass&&(e+=" "+d.cellClass),e},d.groupedByClass=function(){return d.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon"},d.toggleVisible=function(){d.visible=!d.visible},d.showSortButtonUp=function(){return d.sortable?d.sortDirection===a:d.sortable},d.showSortButtonDown=function(){return d.sortable?d.sortDirection===o:d.sortable},d.noSortVisible=function(){return!d.sortDirection},d.sort=function(t){if(!d.sortable)return!0;var n=d.sortDirection===o?a:o;return d.sortDirection=n,e.sortCallback(d,t),!1},d.gripClick=function(){1===++h?p=setTimeout(function(){h=0},500):(clearTimeout(p),e.resizeOnDataCallback(d),h=0)},d.gripOnMouseDown=function(e){return t.isColumnResizing=!0,e.ctrlKey&&!d.pinned?(d.toggleVisible(),r.BuildStyles(t,i),!0):(e.target.parentElement.style.cursor="col-resize",d.startMousePosition=e.clientX,d.origWidth=d.width,n(document).mousemove(d.onMouseMove),n(document).mouseup(d.gripOnMouseUp),!1)},d.onMouseMove=function(e){var n=e.clientX-d.startMousePosition+d.origWidth;return d.width=n<d.minWidth?d.minWidth:n>d.maxWidth?d.maxWidth:n,t.hasUserChangedGridColumnWidths=!0,r.BuildStyles(t,i),!1},d.gripOnMouseUp=function(e){return n(document).off("mousemove",d.onMouseMove),n(document).off("mouseup",d.gripOnMouseUp),e.target.parentElement.style.cursor="default",r.digest(t),t.isColumnResizing=!1,!1},d.copy=function(){var n=new _(e,t,i,r,s,l);return n.isClone=!0,n.orig=d,n},d.setVars=function(e){d.orig=e,d.width=e.width,d.groupIndex=e.groupIndex,d.isGroupedBy=e.isGroupedBy,d.displayName=e.displayName,d.index=e.index,d.isAggCol=e.isAggCol,d.cellClass=e.cellClass,d.cellFilter=e.cellFilter,d.field=e.field,d.aggLabelFilter=e.aggLabelFilter,d.visible=e.visible,d.sortable=e.sortable,d.resizable=e.resizable,d.pinnable=e.pinnable,d.pinned=e.pinned,d.originalIndex=e.originalIndex,d.sortDirection=e.sortDirection,d.sortingAlgorithm=e.sortingAlgorithm,d.headerClass=e.headerClass,d.headerCellTemplate=e.headerCellTemplate,d.cellTemplate=e.cellTemplate,d.cellEditTemplate=e.cellEditTemplate}},k=function(e){this.outerHeight=null,this.outerWidth=null,n.extend(this,e)},w=function(e){this.previousColumn=null,this.grid=e};w.prototype.changeUserSelect=function(e,t){e.css({"-webkit-touch-callout":t,"-webkit-user-select":t,"-khtml-user-select":t,"-moz-user-select":"none"===t?"-moz-none":t,"-ms-user-select":t,"user-select":t})},w.prototype.focusCellElement=function(e,n){var i,r,o,a;e.selectionProvider.lastClickedRow&&(i=void 0!==n?n:this.previousColumn,r=e.selectionProvider.lastClickedRow.clone?e.selectionProvider.lastClickedRow.clone.elm:e.selectionProvider.lastClickedRow.elm,void 0!==i&&r&&(o=t.element(r[0].children).filter(function(){return 8!==this.nodeType}),a=Math.max(Math.min(e.renderedColumns.length-1,i),0),this.grid.config.showSelectionCheckbox&&t.element(o[a]).scope()&&0===t.element(o[a]).scope().col.index&&(a=1),o[a]&&o[a].children[1].children[0].focus(),this.previousColumn=i))},w.prototype.selectionHandlers=function(e,t){function n(n){if(16===n.keyCode)return a.changeUserSelect(t,"none",n),!0;if(!o){o=!0;var r=i(e,t,n,a.grid);return o=!1,r}return!0}function r(e){return 16===e.keyCode&&a.changeUserSelect(t,"text",e),!0}var o=!1,a=this;t.bind("keydown",n),t.bind("keyup",r),t.on("$destroy",function(){t.off("keydown",n),t.off("keyup",r)})};var y=function(i,r,o,a){var s=this;s.colToMove=void 0,s.groupToMove=void 0,s.assignEvents=function(){i.config.jqueryUIDraggable&&!i.config.enablePinning?(i.$groupPanel.droppable({addClasses:!1,drop:function(e){s.onGroupDrop(e)}}),i.$groupPanel.on("$destroy",function(){i.$groupPanel=null})):(i.$groupPanel.on("mousedown",s.onGroupMouseDown).on("dragover",s.dragOver).on("drop",s.onGroupDrop),i.$topPanel.on("mousedown",".ngHeaderScroller",s.onHeaderMouseDown).on("dragover",".ngHeaderScroller",s.dragOver),i.$groupPanel.on("$destroy",function(){i.$groupPanel&&i.$groupPanel.off("mousedown"),i.$groupPanel=null}),i.config.enableColumnReordering&&i.$topPanel.on("drop",".ngHeaderScroller",s.onHeaderDrop),i.$topPanel.on("$destroy",function(){i.$topPanel&&i.$topPanel.off("mousedown"),i.config.enableColumnReordering&&i.$topPanel&&i.$topPanel.off("drop"),i.$topPanel=null})),r.$on("$destroy",r.$watch("renderedColumns",function(){a(s.setDraggables)}))},s.dragStart=function(e){e.dataTransfer.setData("text","")},s.dragOver=function(e){e.preventDefault()},s.setDraggables=function(){var e,n;i.config.jqueryUIDraggable?i.$root&&i.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:!1,start:function(e){s.onHeaderMouseDown(e)}}).droppable({drop:function(e){s.onHeaderDrop(e)}}):(e=i.$root.find(".ngHeaderSortColumn"),t.forEach(e,function(e){e.className&&-1!==e.className.indexOf("ngHeaderSortColumn")&&(e.setAttribute("draggable","true"),e.addEventListener)&&(e.addEventListener("dragstart",s.dragStart),t.element(e).on("$destroy",function(){t.element(e).off("dragstart",s.dragStart),e.removeEventListener("dragstart",s.dragStart)}))}),-1!==navigator.userAgent.indexOf("MSIE")&&((n=i.$root.find(".ngHeaderSortColumn")).bind("selectstart",function(){return this.dragDrop(),!1}),t.element(n).on("$destroy",function(){n.off("selectstart")})))},s.onGroupMouseDown=function(e){var r,o=n(e.target);"ngRemoveGroup"!==o[0].className?(r=t.element(o).scope())&&(i.config.jqueryUIDraggable||(o.attr("draggable","true"),this.addEventListener&&(this.addEventListener("dragstart",s.dragStart),t.element(this).on("$destroy",function(){this.removeEventListener("dragstart",s.dragStart)})),-1!==navigator.userAgent.indexOf("MSIE")&&(o.bind("selectstart",function(){return this.dragDrop(),!1}),o.on("$destroy",function(){o.off("selectstart")}))),s.groupToMove={header:o,groupName:r.group,index:r.$index}):s.groupToMove=void 0},s.onGroupDrop=function(e){var o,a;e.stopPropagation(),s.groupToMove?("ngGroupPanel"===(o=n(e.target).closest(".ngGroupElement")).context.className?(r.configGroups.splice(s.groupToMove.index,1),r.configGroups.push(s.groupToMove.groupName)):(a=t.element(o).scope())&&s.groupToMove.index!==a.$index&&(r.configGroups.splice(s.groupToMove.index,1),r.configGroups.splice(a.$index,0,s.groupToMove.groupName)),s.groupToMove=void 0,i.fixGroupIndexes()):s.colToMove&&(-1===r.configGroups.indexOf(s.colToMove.col)&&("ngGroupPanel"===(o=n(e.target).closest(".ngGroupElement")).context.className||"ngGroupPanelDescription ng-binding"===o.context.className?r.groupBy(s.colToMove.col):(a=t.element(o).scope())&&r.removeGroup(a.$index)),s.colToMove=void 0),r.$$phase||r.$apply()},s.onHeaderMouseDown=function(e){var i=n(e.target).closest(".ngHeaderSortColumn"),r=t.element(i).scope();r&&(s.colToMove={header:i,col:r.col})},s.onHeaderDrop=function(e){if(s.colToMove&&!s.colToMove.col.pinned){var a=n(e.target).closest(".ngHeaderSortColumn"),l=t.element(a).scope();if(l){if(s.colToMove.col===l.col||l.col.pinned)return;r.columns.splice(s.colToMove.col.index,1),r.columns.splice(l.col.index,0,s.colToMove.col),i.fixColumnIndexes(),s.colToMove=void 0,o.digest(r)}}},s.assignGridEventHandlers=function(){var t,a,s,l;-1===i.config.tabIndex?(i.$viewport.attr("tabIndex",o.numberOfGrids),o.numberOfGrids++):i.$viewport.attr("tabIndex",i.config.tabIndex),a=function(){clearTimeout(t),t=setTimeout(function(){o.RebuildGrid(r,i)},100)},n(e).on("resize.nggrid",a),l=function(){clearTimeout(s),s=setTimeout(function(){o.RebuildGrid(r,i)},100)},n(i.$root.parent()).on("resize.nggrid",l),r.$on("$destroy",function(){n(e).off("resize.nggrid",a)})},s.assignGridEventHandlers(),s.assignEvents()},x=function(e,t){e.maxRows=function(){return Math.max(e.totalServerItems,t.data.length)},e.$on("$destroy",e.$watch("totalServerItems",function(){e.currentMaxPages=e.maxPages()})),e.multiSelect=t.config.enableRowSelection&&t.config.multiSelect,e.selectedItemCount=t.selectedItemCount,e.maxPages=function(){return 0===e.maxRows()?1:Math.ceil(e.maxRows()/e.pagingOptions.pageSize)},e.pageForward=function(){var t=e.pagingOptions.currentPage;e.totalServerItems>0?e.pagingOptions.currentPage=Math.min(t+1,e.maxPages()):e.pagingOptions.currentPage++},e.pageBackward=function(){var t=e.pagingOptions.currentPage;e.pagingOptions.currentPage=Math.max(t-1,1)},e.pageToFirst=function(){e.pagingOptions.currentPage=1},e.pageToLast=function(){var t=e.maxPages();e.pagingOptions.currentPage=t},e.cantPageForward=function(){var n=e.pagingOptions.currentPage,i=e.maxPages();return e.totalServerItems>0?n>=i:t.data.length<1},e.cantPageToLast=function(){return!(e.totalServerItems>0)||e.cantPageForward()},e.cantPageBackward=function(){return e.pagingOptions.currentPage<=1}},C=function(i,r,o,a,s,l,c,u,h,p,f){var g={aggregateTemplate:void 0,afterSelectionChange:function(){},beforeSelectionChange:function(){return!0},checkboxCellTemplate:void 0,checkboxHeaderTemplate:void 0,columnDefs:void 0,data:[],dataUpdated:function(){},enableCellEdit:!1,enableCellEditOnFocus:!1,enableCellSelection:!1,enableColumnResize:!1,enableColumnReordering:!1,enableColumnHeavyVirt:!1,enablePaging:!1,enablePinning:!1,enableRowSelection:!0,enableSorting:!0,enableHighlighting:!1,excludeProperties:[],filterOptions:{filterText:"",useExternalFilter:!1},footerRowHeight:55,footerTemplate:void 0,forceSyncScrolling:!0,groups:[],groupsCollapsedByDefault:!0,headerRowHeight:30,headerRowTemplate:void 0,jqueryUIDraggable:!1,jqueryUITheme:!1,keepLastSelected:!0,maintainColumnRatios:void 0,menuTemplate:void 0,multiSelect:!0,pagingOptions:{pageSizes:[250,500,1e3],pageSize:250,currentPage:1},pinSelectionCheckbox:!1,plugins:[],primaryKey:void 0,rowHeight:30,rowTemplate:void 0,selectedItems:[],selectWithCheckboxOnly:!1,showColumnMenu:!1,showFilter:!1,showFooter:!1,showGroupPanel:!1,showSelectionCheckbox:!1,sortInfo:{fields:[],columns:[],directions:[]},tabIndex:-1,totalServerItems:0,useExternalSorting:!1,i18n:"en",virtualizationThreshold:50,noTabInterference:!1},v=this;v.maxCanvasHt=0,v.config=n.extend(g,e.ngGrid.config,r),v.config.showSelectionCheckbox=v.config.showSelectionCheckbox&&!1===v.config.enableColumnHeavyVirt,v.config.enablePinning=v.config.enablePinning&&!1===v.config.enableColumnHeavyVirt,v.config.selectWithCheckboxOnly=v.config.selectWithCheckboxOnly&&!1!==v.config.showSelectionCheckbox,v.config.pinSelectionCheckbox=v.config.enablePinning,"string"==typeof r.columnDefs&&(v.config.columnDefs=i.$eval(r.columnDefs)),v.rowCache=[],v.rowMap=[],v.gridId="ng"+c.newId(),v.$root=null,v.$groupPanel=null,v.$topPanel=null,v.$headerContainer=null,v.$headerScroller=null,v.$headers=null,v.$viewport=null,v.$canvas=null,v.rootDim=v.config.gridDim,v.data=[],v.lateBindColumns=!1,v.filteredRows=[],v.initTemplates=function(){var e=[];return t.forEach(["rowTemplate","aggregateTemplate","headerRowTemplate","checkboxCellTemplate","checkboxHeaderTemplate","menuTemplate","footerTemplate"],function(t){e.push(v.getTemplate(t))}),f.all(e)},v.getTemplate=function(e){var t,n=v.config[e],i=v.gridId+e+".html",r=f.defer();return n&&!m.test(n)?p.get(n,{cache:l}).success(function(e){l.put(i,e),r.resolve()}).error(function(){r.reject("Could not load template: "+n)}):n?(l.put(i,n),r.resolve()):(t=e+".html",l.put(i,l.get(t)),r.resolve()),r.promise},"object"==typeof v.config.data&&(v.data=v.config.data),v.calcMaxCanvasHeight=function(){return v.config.groups.length>0?v.rowFactory.parsedData.filter(function(e){return!e[d]}).length*v.config.rowHeight:v.filteredRows.length*v.config.rowHeight},v.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0},v.setRenderedRows=function(e){i.renderedRows.length=e.length;for(var t=0;t<e.length;t++)!i.renderedRows[t]||e[t].isAggRow||i.renderedRows[t].isAggRow?(i.renderedRows[t]=e[t].copy(),i.renderedRows[t].collapsed=e[t].collapsed,e[t].isAggRow||i.renderedRows[t].setVars(e[t])):i.renderedRows[t].setVars(e[t]),i.renderedRows[t].rowIndex=e[t].rowIndex,i.renderedRows[t].offsetTop=e[t].offsetTop,i.renderedRows[t].selected=e[t].selected,e[t].renderedRowIndex=t;v.refreshDomSizes(),i.$emit("ngGridEventRows",e)},v.minRowsToRender=function(){var e=i.viewportDimHeight()||1;return Math.floor(e/v.config.rowHeight)},v.refreshDomSizes=function(){var e=new k;e.outerWidth=v.elementDims.rootMaxW,e.outerHeight=v.elementDims.rootMaxH,v.rootDim=e,v.maxCanvasHt=v.calcMaxCanvasHeight()},v.buildColumnDefsFromData=function(){v.config.columnDefs=[];var e=v.data[0];e?c.forIn(e,function(e,t){-1===v.config.excludeProperties.indexOf(t)&&v.config.columnDefs.push({field:t})}):v.lateBoundColumns=!0},v.buildColumns=function(){var e,n,r=v.config.columnDefs,o=[];r||(v.buildColumnDefsFromData(),r=v.config.columnDefs),v.config.showSelectionCheckbox&&o.push(new _({colDef:{field:"",width:v.elementDims.rowSelectedCellW,sortable:!1,resizable:!1,groupable:!1,headerCellTemplate:l.get(i.gridId+"checkboxHeaderTemplate.html"),cellTemplate:l.get(i.gridId+"checkboxCellTemplate.html"),pinned:v.config.pinSelectionCheckbox},index:0,headerRowHeight:v.config.headerRowHeight,sortCallback:v.sortData,resizeOnDataCallback:v.resizeOnData,enableResize:v.config.enableColumnResize,enableSort:v.config.enableSorting,enablePinning:v.config.enablePinning},i,v,a,l,c)),r.length>0&&(e=v.config.showSelectionCheckbox?1:0,n=i.configGroups.length,i.configGroups.length=0,t.forEach(r,function(t,r){var s=new _({colDef:t,index:(r+=e)+n,originalIndex:r,headerRowHeight:v.config.headerRowHeight,sortCallback:v.sortData,resizeOnDataCallback:v.resizeOnData,enableResize:v.config.enableColumnResize,enableSort:v.config.enableSorting,enablePinning:v.config.enablePinning,enableCellEdit:v.config.enableCellEdit||v.config.enableCellEditOnFocus,cellEditableCondition:v.config.cellEditableCondition},i,v,a,l,c),d=v.config.groups.indexOf(t.field);-1!==d&&(s.isGroupedBy=!0,i.configGroups.splice(d,0,s),s.groupIndex=i.configGroups.length),o.push(s)}),i.columns=o,v.config.groups.length>0&&v.rowFactory.getGrouping(v.config.groups))},v.configureColumnWidths=function(){var e,n,r,o,s,l=[],d=[],u=0,h=0,p={};t.forEach(i.columns,function(e,t){if(!c.isNullOrUndefined(e.originalIndex)){var n=e.originalIndex;v.config.showSelectionCheckbox&&(0===e.originalIndex&&e.visible&&(h+=25),n--),p[n]=t}}),t.forEach(v.config.columnDefs,function(e,t){var n,r,o,a=i.columns[p[t]];if(e.index=t,n=!1,c.isNullOrUndefined(e.width)?e.width="*":r=(n=!!isNaN(e.width)&&c.endsWith(e.width,"%"))?e.width:parseInt(e.width,10),isNaN(r)&&!i.hasUserChangedGridColumnWidths){if("auto"===(r=e.width))return a.width=a.minWidth,h+=a.width,o=a,void i.$on("$destroy",i.$on("ngGridEventData",function(){v.resizeOnData(o)}));if(-1!==r.indexOf("*"))return!1!==a.visible&&(u+=r.length),void l.push(e);if(n)return void d.push(e);throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid'}!1!==a.visible&&(h+=a.width=parseInt(a.width,10))}),d.length>0&&(v.config.maintainColumnRatios=!1!==v.config.maintainColumnRatios,e=0,n=0,t.forEach(d,function(t){var r=i.columns[p[t.index]],o=parseFloat(t.width)/100;e+=o,r.visible||(n+=o)}),r=e-n,t.forEach(d,function(t){var o,a=i.columns[p[t.index]],s=parseFloat(t.width)/100;s=n>0?s/r:s/e,o=v.rootDim.outerWidth*e,a.width=o*s,h+=a.width})),l.length>0&&(v.config.maintainColumnRatios=!1!==v.config.maintainColumnRatios,o=v.rootDim.outerWidth-h,v.maxCanvasHt>i.viewportDimHeight()&&(o-=a.ScrollW),s=Math.floor(o/u),t.forEach(l,function(e,t){var n,r=i.columns[p[e.index]];r.width=s*e.width.length,!1!==r.visible&&(h+=r.width),t===l.length-1&&h<v.rootDim.outerWidth&&(n=v.rootDim.outerWidth-h,v.maxCanvasHt>i.viewportDimHeight()&&(n-=a.ScrollW),r.width+=n)}))},v.init=function(){return v.initTemplates().then(function(){i.selectionProvider=new E(v,i,h),i.domAccessProvider=new w(v),v.rowFactory=new D(v,i,a,l,c),v.searchProvider=new I(i,v,s),v.styleProvider=new A(i,v),i.$on("$destroy",i.$watch("configGroups",function(e){var n=[];t.forEach(e,function(e){n.push(e.field||e)}),v.config.groups=n,v.rowFactory.filteredRowsChanged(),i.$emit("ngGridEventGroups",e)},!0)),i.$on("$destroy",i.$watch("columns",function(e){i.isColumnResizing||a.RebuildGrid(i,v),i.$emit("ngGridEventColumns",e)},!0)),i.$on("$destroy",i.$watch(function(){return r.i18n},function(e){c.seti18n(i,e)})),v.maxCanvasHt=v.calcMaxCanvasHeight(),v.config.sortInfo.fields&&v.config.sortInfo.fields.length>0&&i.$on("$destroy",i.$watch(function(){return v.config.sortInfo},function(){o.isSorting||(v.sortColumnsInit(),i.$emit("ngGridEventSorted",v.config.sortInfo))},!0))})},v.resizeOnData=function(e){var r=e.minWidth,o=c.getElementsByClassName("col"+e.index);t.forEach(o,function(e,t){var i,o,a;0===t?(o=n(e).find(".ngHeaderText"),i=c.visualLength(o)+10):(a=n(e).find(".ngCellText"),i=c.visualLength(a)+10),i>r&&(r=i)}),e.width=e.longest=Math.min(e.maxWidth,r+7),a.BuildStyles(i,v,!0)},v.lastSortedColumns=[],v.sortData=function(e,r){var o,a,s;r&&r.shiftKey&&v.config.sortInfo?-1===(o=v.config.sortInfo.columns.indexOf(e))?(1===v.config.sortInfo.columns.length&&(v.config.sortInfo.columns[0].sortPriority=1),v.config.sortInfo.columns.push(e),e.sortPriority=v.config.sortInfo.columns.length,v.config.sortInfo.fields.push(e.field),v.config.sortInfo.directions.push(e.sortDirection),v.lastSortedColumns.push(e)):v.config.sortInfo.directions[o]=e.sortDirection:(!v.config.useExternalSorting||v.config.useExternalSorting&&v.config.sortInfo)&&(a=n.isArray(e),v.config.sortInfo.columns.length=0,v.config.sortInfo.fields.length=0,v.config.sortInfo.directions.length=0,s=function(e){v.config.sortInfo.columns.push(e),v.config.sortInfo.fields.push(e.field),v.config.sortInfo.directions.push(e.sortDirection),v.lastSortedColumns.push(e)},a?t.forEach(e,function(e,t){e.sortPriority=t+1,s(e)}):(v.clearSortingData(e),e.sortPriority=void 0,s(e)),v.sortActual(),v.searchProvider.evalFilter(),i.$emit("ngGridEventSorted",v.config.sortInfo))},v.sortColumnsInit=function(){v.config.sortInfo.columns?v.config.sortInfo.columns.length=0:v.config.sortInfo.columns=[];var e=[];t.forEach(i.columns,function(t){var n=v.config.sortInfo.fields.indexOf(t.field);-1!==n&&(t.sortDirection=v.config.sortInfo.directions[n]||"asc",e[n]=t)}),1===e.length?v.sortData(e[0]):v.sortData(e)},v.sortActual=function(){if(!v.config.useExternalSorting){var e=v.data.slice(0);t.forEach(e,function(e,t){var n,i=v.rowMap[t];void 0!==i&&(void 0!==(n=v.rowCache[i])&&(e.preSortSelected=n.selected,e.preSortIndex=t))}),o.Sort(v.config.sortInfo,e),t.forEach(e,function(e,t){v.rowCache[t].entity=e,v.rowCache[t].selected=e.preSortSelected,v.rowMap[e.preSortIndex]=t,delete e.preSortSelected,delete e.preSortIndex})}},v.clearSortingData=function(e){e?(t.forEach(v.lastSortedColumns,function(t){e.index!==t.index&&(t.sortDirection="",t.sortPriority=null)}),v.lastSortedColumns[0]=e,v.lastSortedColumns.length=1):(t.forEach(v.lastSortedColumns,function(e){e.sortDirection="",e.sortPriority=null}),v.lastSortedColumns=[])},v.fixColumnIndexes=function(){for(var e=0;e<i.columns.length;e++)i.columns[e].index=e},v.fixGroupIndexes=function(){t.forEach(i.configGroups,function(e,t){e.groupIndex=t+1})},i.elementsNeedMeasuring=!0,i.columns=[],i.renderedRows=[],i.renderedColumns=[],i.headerRow=null,i.rowHeight=v.config.rowHeight,i.jqueryUITheme=v.config.jqueryUITheme,i.showSelectionCheckbox=v.config.showSelectionCheckbox,i.enableCellSelection=v.config.enableCellSelection,i.enableCellEditOnFocus=v.config.enableCellEditOnFocus,i.footer=null,i.selectedItems=v.config.selectedItems,i.multiSelect=v.config.multiSelect,i.showFooter=v.config.showFooter,i.footerRowHeight=i.showFooter?v.config.footerRowHeight:0,i.showColumnMenu=v.config.showColumnMenu,i.forceSyncScrolling=v.config.forceSyncScrolling,i.showMenu=!1,i.configGroups=[],i.gridId=v.gridId,i.enablePaging=v.config.enablePaging,i.pagingOptions=v.config.pagingOptions,i.i18n={},c.seti18n(i,v.config.i18n),i.adjustScrollLeft=function(e){for(var t,n,r,o=0,s=0,l=i.columns.length,d=[],c=!v.config.enableColumnHeavyVirt,u=0,h=function(e){c?d.push(e):i.renderedColumns[u]?i.renderedColumns[u].setVars(e):i.renderedColumns[u]=e.copy(),u++},p=0;p<l;p++)!1!==(t=i.columns[p]).visible&&(n=t.width+o,t.pinned?(h(t),r=p>0?e+s:e,a.setColLeft(t,r,v),s+=t.width):n>=e&&o<=e+v.rootDim.outerWidth&&h(t),o+=t.width);c&&(i.renderedColumns=d)},v.prevScrollTop=0,v.prevScrollIndex=0,i.adjustScrollTop=function(e,t){var n,r,o;if(v.prevScrollTop!==e||t){if(e>0&&v.$viewport[0].scrollHeight-e<=v.$viewport.outerHeight()&&i.$emit("ngGridEventScroll"),n=Math.floor(e/v.config.rowHeight),v.filteredRows.length>v.config.virtualizationThreshold){if(v.prevScrollTop<e&&n<v.prevScrollIndex+4)return;if(v.prevScrollTop>e&&n>v.prevScrollIndex-4)return;r=new S(Math.max(0,n-6),n+v.minRowsToRender()+6)}else o=i.configGroups.length>0?v.rowFactory.parsedData.length:v.filteredRows.length,r=new S(0,Math.max(o,v.minRowsToRender()+6));v.prevScrollTop=e,v.rowFactory.UpdateViewableRange(r),v.prevScrollIndex=n}},i.toggleShowMenu=function(){i.showMenu=!i.showMenu},i.toggleSelectAll=function(e,t){i.selectionProvider.toggleSelectAll(e,!1,t)},i.totalFilteredItemsLength=function(){return v.filteredRows.length},i.showGroupPanel=function(){return v.config.showGroupPanel},i.topPanelHeight=function(){return!0===v.config.showGroupPanel?v.config.headerRowHeight+32:v.config.headerRowHeight},i.viewportDimHeight=function(){return Math.max(0,v.rootDim.outerHeight-i.topPanelHeight()-i.footerRowHeight-2)},i.groupBy=function(e){if(!(v.data.length<1)&&e.groupable&&e.field){e.sortDirection||e.sort({shiftKey:i.configGroups.length>0});var t=i.configGroups.indexOf(e);-1===t?(e.isGroupedBy=!0,i.configGroups.push(e),e.groupIndex=i.configGroups.length):i.removeGroup(t),v.$viewport.scrollTop(0),a.digest(i)}},i.removeGroup=function(e){var t=i.columns.filter(function(t){return t.groupIndex===e+1})[0];t.isGroupedBy=!1,t.groupIndex=0,i.columns[e].isAggCol&&(i.columns.splice(e,1),i.configGroups.splice(e,1),v.fixGroupIndexes()),0===i.configGroups.length&&(v.fixColumnIndexes(),a.digest(i)),i.adjustScrollLeft(0)},i.togglePin=function(e){for(var t=e.index,n=0,r=0;r<i.columns.length&&i.columns[r].pinned;r++)n++;e.pinned&&(n=Math.max(e.originalIndex,n-1)),e.pinned=!e.pinned,i.columns.splice(t,1),i.columns.splice(n,0,e),v.fixColumnIndexes(),a.BuildStyles(i,v,!0),v.$viewport.scrollLeft(v.$viewport.scrollLeft()-e.width)},i.totalRowWidth=function(){for(var e=0,t=i.columns,n=0;n<t.length;n++)!1!==t[n].visible&&(e+=t[n].width);return e},i.headerScrollerDim=function(){var e=i.viewportDimHeight(),t=v.maxCanvasHt,n=t>e,r=new k;return r.autoFitHeight=!0,r.outerWidth=i.totalRowWidth(),n?r.outerWidth+=v.elementDims.scrollW:t-e<=v.elementDims.scrollH&&(r.outerWidth+=v.elementDims.scrollW),r}},S=function(e,t){this.topRow=e,this.bottomRow=t},T=function(e,t,n,i,r){this.entity=e,this.config=t,this.selectionProvider=n,this.rowIndex=i,this.utils=r,this.selected=n.getSelection(e),this.cursor=this.config.enableRowSelection&&!this.config.selectWithCheckboxOnly?"pointer":"default",this.beforeSelectionChange=t.beforeSelectionChangeCallback,this.afterSelectionChange=t.afterSelectionChangeCallback,this.offsetTop=this.rowIndex*t.rowHeight,this.rowDisplayIndex=0};T.prototype.setSelection=function(e){this.selectionProvider.setSelection(this,e),this.selectionProvider.lastClickedRow=this},T.prototype.continueSelection=function(e){this.selectionProvider.ChangeSelection(this,e)},T.prototype.ensureEntity=function(e){this.entity!==e&&(this.entity=e,this.selected=this.selectionProvider.getSelection(this.entity))},T.prototype.toggleSelected=function(e){if(!this.config.enableRowSelection&&!this.config.enableCellSelection)return!0;var t=e.target||e;return"checkbox"===t.type&&"ngSelectionCell ng-scope"!==t.parentElement.className||(this.config.selectWithCheckboxOnly&&"checkbox"!==t.type?(this.selectionProvider.lastClickedRow=this,!0):(this.beforeSelectionChange(this,e)&&this.continueSelection(e),!1))},T.prototype.alternatingRowClass=function(){var e=this.rowIndex%2==0;return{ngRow:!0,selected:this.selected,even:e,odd:!e,"ui-state-default":this.config.jqueryUITheme&&e,"ui-state-active":this.config.jqueryUITheme&&!e}},T.prototype.getProperty=function(e){return this.utils.evalProperty(this.entity,e)},T.prototype.copy=function(){return this.clone=new T(this.entity,this.config,this.selectionProvider,this.rowIndex,this.utils),this.clone.isClone=!0,this.clone.elm=this.elm,this.clone.orig=this,this.clone},T.prototype.setVars=function(e){e.clone=this,this.entity=e.entity,this.selected=e.selected,this.orig=e};var D=function(e,t,n,i,o){var a=this;a.aggCache={},a.parentCache=[],a.dataChanged=!0,a.parsedData=[],a.rowConfig={},a.selectionProvider=t.selectionProvider,a.rowHeight=30,a.numberOfAggregates=0,a.groupedData=void 0,a.rowHeight=e.config.rowHeight,a.rowConfig={enableRowSelection:e.config.enableRowSelection,rowClasses:e.config.rowClasses,selectedItems:t.selectedItems,selectWithCheckboxOnly:e.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:e.config.beforeSelectionChange,afterSelectionChangeCallback:e.config.afterSelectionChange,jqueryUITheme:e.config.jqueryUITheme,enableCellSelection:e.config.enableCellSelection,rowHeight:e.config.rowHeight},a.renderedRange=new S(0,e.minRowsToRender()+6),a.buildEntityRow=function(e,t){return new T(e,a.rowConfig,a.selectionProvider,t,o)},a.buildAggregateRow=function(t,n){var i=a.aggCache[t.aggIndex];return i||(i=new r(t,a,a.rowConfig.rowHeight,e.config.groupsCollapsedByDefault),a.aggCache[t.aggIndex]=i),i.rowIndex=n,i.offsetTop=n*a.rowConfig.rowHeight,i},a.UpdateViewableRange=function(e){a.renderedRange=e,a.renderedChange()},a.filteredRowsChanged=function(){e.lateBoundColumns&&e.filteredRows.length>0&&(e.config.columnDefs=void 0,e.buildColumns(),e.lateBoundColumns=!1,t.$evalAsync(function(){t.adjustScrollLeft(0)})),a.dataChanged=!0,e.config.groups.length>0&&a.getGrouping(e.config.groups),a.UpdateViewableRange(a.renderedRange)},a.renderedChange=function(){var t,n,i,r;if(!a.groupedData||e.config.groups.length<1)return a.renderedChangeNoGroups(),void e.refreshDomSizes();for(a.wasGrouped=!0,a.parentCache=[],t=0,n=a.parsedData.filter(function(e){return e.isAggRow?!e.parent||!e.parent.collapsed:(e[d]||(e.rowIndex=t++),!e[d])}),a.totalRows=n.length,i=[],r=a.renderedRange.topRow;r<a.renderedRange.bottomRow;r++)n[r]&&(n[r].offsetTop=r*e.config.rowHeight,i.push(n[r]));e.setRenderedRows(i)},a.renderedChangeNoGroups=function(){for(var t=[],n=a.renderedRange.topRow;n<a.renderedRange.bottomRow;n++)e.filteredRows[n]&&(e.filteredRows[n].rowIndex=n,e.filteredRows[n].offsetTop=n*e.config.rowHeight,t.push(e.filteredRows[n]));e.setRenderedRows(t)},a.fixRowCache=function(){var t,n=e.data.length;if(n-e.rowCache.length<0)e.rowCache.length=e.rowMap.length=n;else for(t=e.rowCache.length;t<n;t++)e.rowCache[t]=e.rowFactory.buildEntityRow(e.data[t],t)},a.parseGroupData=function(e){var t,n,i;if(e.values)for(t=0;t<e.values.length;t++)a.parentCache[a.parentCache.length-1].children.push(e.values[t]),a.parsedData.push(e.values[t]);else for(n in e){if(n===s||n===l||n===c)continue;e.hasOwnProperty(n)&&(i=a.buildAggregateRow({gField:e[s],gLabel:n,gDepth:e[l],isAggRow:!0,_ng_hidden_:!1,children:[],aggChildren:[],aggIndex:a.numberOfAggregates,aggLabelFilter:e[c].aggLabelFilter},0),a.numberOfAggregates++,i.parent=a.parentCache[i.depth-1],i.parent&&(i.parent.collapsed=!1,i.parent.aggChildren.push(i)),a.parsedData.push(i),a.parentCache[i.depth]=i,a.parseGroupData(e[n]))}},a.getGrouping=function(r){function u(e,t){return e.filter(function(e){return e.field===t})}var h,p,f,g,m;a.aggCache=[],a.numberOfAggregates=0,a.groupedData={};var v=e.filteredRows,b=r.length,k=t.columns;for(h=0;h<v.length;h++){if(!(p=v[h].entity))return;for(v[h][d]=e.config.groupsCollapsedByDefault,f=a.groupedData,g=0;g<r.length;g++){var w=r[g],y=u(k,w)[0],x=o.evalProperty(p,w);f[x=x?x.toString():"null"]||(f[x]={}),f[s]||(f[s]=w),f[l]||(f[l]=g),f[c]||(f[c]=y),f=f[x]}f.values||(f.values=[]),f.values.push(v[h])}if(k.length>0)for(m=0;m<r.length;m++)!k[m].isAggCol&&m<=b&&k.splice(0,0,new _({colDef:{field:"",width:25,sortable:!1,resizable:!1,headerCellTemplate:'<div class="ngAggHeader"></div>',pinned:e.config.pinSelectionCheckbox},enablePinning:e.config.enablePinning,isAggCol:!0,headerRowHeight:e.config.headerRowHeight},t,e,n,i,o));e.fixColumnIndexes(),t.adjustScrollLeft(0),a.parsedData.length=0,a.parseGroupData(a.groupedData),a.fixRowCache()},e.config.groups.length>0&&e.filteredRows.length>0&&a.getGrouping(e.config.groups)},I=function(e,t,i){var r=this,o=[];r.extFilter=t.config.filterOptions.useExternalFilter,e.showFilter=t.config.showFilter,e.filterText="",r.fieldMap={};var a=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t},s=function(e,t,n){var r,o,l,d,c,u,h,p;for(o in t)if(t.hasOwnProperty(o)){if(!(l=n[o.toLowerCase()]))continue;if("object"!=typeof(d=t[o])||d instanceof Date){if(u=null,h=null,l&&l.cellFilter&&(h=l.cellFilter.split(":"),u=i(h[0])),null!=d&&("function"==typeof u?(p=u(d,h[1].slice(1,-1)).toString(),r=e.regex.test(p)):r=e.regex.test(d.toString()),r))return!0}else if(c=a(l),r=s(e,d,c))return!0}return!1},l=function(e,t){var n,o,a=r.fieldMap[e.columnDisplay];if(!a)return!1;var s=a.cellFilter.split(":"),l=a.cellFilter?i(s[0]):null,c=t[e.column]||t[a.field.split(".")[0]];return null!=c&&("function"==typeof l?(o=l("object"==typeof c?d(c,a.field):c,s[1]).toString(),n=e.regex.test(o)):n=e.regex.test("object"==typeof c?d(c,a.field).toString():c.toString()),!!n)};r.evalFilter=function(){t.filteredRows=0===o.length?t.rowCache:t.rowCache.filter(function(e){return function(e){for(var t,n=0,i=o.length;n<i;n++)if(!((t=o[n]).column?l(t,e):s(t,e,r.fieldMap)))return!1;return!0}(e.entity)});for(var e=0;e<t.filteredRows.length;e++)t.filteredRows[e].rowIndex=e;t.rowFactory.filteredRowsChanged()};var d=function(e,t){var n,i,r,o;if("object"!=typeof e||"string"!=typeof t)return e;if(i=e,(n=t.split(".")).length>1){for(r=1,o=n.length;r<o;r++)if(!(i=i[n[r]]))return e;return i}return e},c=function(e,t){try{return new RegExp(e,t)}catch(t){return new RegExp(e.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}},u=function(e){var t,i,r,a,s,l,d;if(o=[],t=n.trim(e))for(i=t.split(";"),r=0;r<i.length;r++)(a=i[r].split(":")).length>1?(s=n.trim(a[0]),l=n.trim(a[1]),s&&l&&o.push({column:s,columnDisplay:s.replace(/\s+/g,"").toLowerCase(),regex:c(l,"i")})):(d=n.trim(a[0]))&&o.push({column:"",regex:c(d,"i")})};r.extFilter||e.$on("$destroy",e.$watch("columns",function(e){for(var t,n,i,o,a=0;a<e.length;a++){if((t=e[a]).field)if(t.field.match(/\./g)){for(n=t.field.split("."),i=r.fieldMap,o=0;o<n.length-1;o++)i[n[o]]=i[n[o]]||{},i=i[n[o]];i[n[n.length-1]]=t}else r.fieldMap[t.field.toLowerCase()]=t;t.displayName&&(r.fieldMap[t.displayName.toLowerCase().replace(/\s+/g,"")]=t)}})),e.$on("$destroy",e.$watch(function(){return t.config.filterOptions.filterText},function(t){e.filterText=t})),e.$on("$destroy",e.$watch("filterText",function(t){r.extFilter||(e.$emit("ngGridEventFilter",t),u(t),r.evalFilter())}))},E=function(e,n,i){var r=this;r.multi=e.config.multiSelect,r.selectedItems=e.config.selectedItems,r.selectedIndex=e.config.selectedIndex,r.lastClickedRow=void 0,r.ignoreSelectedItemChanges=!1,r.pKeyParser=i(e.config.primaryKey),r.ChangeSelection=function(t,i){var o,a,s,l,d,c,u,h,p=i.which||i.keyCode,f=40===p||38===p;if(i&&i.shiftKey&&!i.keyCode&&r.multi&&e.config.enableRowSelection){if(r.lastClickedRow){if(o=n.configGroups.length>0?e.rowFactory.parsedData.filter(function(e){return!e.isAggRow}):e.filteredRows,(a=t.rowIndex)===(s=r.lastClickedRowIndex))return!1;for(a<s?(a^=s,a^=s^=a,a--):s++,l=[];s<=a;s++)l.push(o[s]);if(l[l.length-1].beforeSelectionChange(l,i)){for(d=0;d<l.length;d++)u=(c=l[d]).selected,c.selected=!u,c.clone&&(c.clone.selected=c.selected),-1===(h=r.selectedItems.indexOf(c.entity))?r.selectedItems.push(c.entity):r.selectedItems.splice(h,1);l[l.length-1].afterSelectionChange(l,i)}return r.lastClickedRow=t,r.lastClickedRowIndex=t.rowIndex,!0}}else r.multi?i.keyCode&&(!f||e.config.selectWithCheckboxOnly)||r.setSelection(t,!t.selected):r.lastClickedRow===t?r.setSelection(r.lastClickedRow,!!e.config.keepLastSelected||!t.selected):(r.lastClickedRow&&r.setSelection(r.lastClickedRow,!1),r.setSelection(t,!t.selected));return r.lastClickedRow=t,r.lastClickedRowIndex=t.rowIndex,!0},r.getSelection=function(e){return-1!==r.getSelectionIndex(e)},r.getSelectionIndex=function(n){var i,o=-1;return e.config.primaryKey?(i=r.pKeyParser(n),t.forEach(r.selectedItems,function(e,t){i===r.pKeyParser(e)&&(o=t)})):o=r.selectedItems.indexOf(n),o},r.setSelection=function(t,n){if(e.config.enableRowSelection){if(n)-1===r.getSelectionIndex(t.entity)&&(!r.multi&&r.selectedItems.length>0&&r.toggleSelectAll(!1,!0),r.selectedItems.push(t.entity));else{var i=r.getSelectionIndex(t.entity);-1!==i&&r.selectedItems.splice(i,1)}t.selected=n,t.orig&&(t.orig.selected=n),t.clone&&(t.clone.selected=n),t.afterSelectionChange(t)}},r.toggleSelectAll=function(t,n,i){var o,a=i?e.filteredRows:e.rowCache;if(n||e.config.beforeSelectionChange(a,t)){for(r.selectedItems.length>0&&(r.selectedItems.length=0),o=0;o<a.length;o++)a[o].selected=t,a[o].clone&&(a[o].clone.selected=t),t&&r.selectedItems.push(a[o].entity);n||e.config.afterSelectionChange(a,t)}}},A=function(e,t){e.headerCellStyle=function(e){return{height:e.headerRowHeight+"px"}},e.rowStyle=function(t){var n={top:t.offsetTop+"px",height:e.rowHeight+"px"};return t.isAggRow&&(n.left=t.offsetLeft),n},e.canvasStyle=function(){return{height:t.maxCanvasHt+"px"}},e.headerScrollerStyle=function(){return{height:t.config.headerRowHeight+"px"}},e.topPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.topPanelHeight()+"px"}},e.headerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:t.config.headerRowHeight+"px"}},e.groupPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:"32px"}},e.viewportStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.viewportDimHeight()+"px"}},e.footerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.footerRowHeight+"px"}}};v.directive("ngCellHasFocus",["$domUtilityService",function(e){var t=function(t){t.isFocused=!0,e.digest(t),t.$broadcast("ngGridEventStartCellEdit"),t.$emit("ngGridEventStartCellEdit"),t.$on("$destroy",t.$on("ngGridEventEndCellEdit",function(){t.isFocused=!1,e.digest(t)}))};return function(e,n){function i(){return e.enableCellEditOnFocus?d=!0:n.focus(),!0}function r(i){e.enableCellEditOnFocus&&(i.preventDefault(),d=!1,t(e,n))}function o(){return l=!0,e.enableCellEditOnFocus&&!d&&t(e,n),!0}function a(){return l=!1,!0}function s(i){return e.enableCellEditOnFocus||(l&&37!==i.keyCode&&38!==i.keyCode&&39!==i.keyCode&&40!==i.keyCode&&9!==i.keyCode&&!i.shiftKey&&13!==i.keyCode&&t(e,n),l&&i.shiftKey&&i.keyCode>=65&&i.keyCode<=90&&t(e,n),27===i.keyCode&&n.focus()),!0}var l=!1,d=!1;e.editCell=function(){e.enableCellEditOnFocus||setTimeout(function(){t(e,n)},0)},n.bind("mousedown",i),n.bind("click",r),n.bind("focus",o),n.bind("blur",a),n.bind("keydown",s),n.on("$destroy",function(){n.off("mousedown",i),n.off("click",r),n.off("focus",o),n.off("blur",a),n.off("keydown",s)})}}]),v.directive("ngCellText",function(){return function(e,t){function n(e){e.preventDefault()}function i(e){e.preventDefault()}t.bind("mouseover",n),t.bind("mouseleave",i),t.on("$destroy",function(){t.off("mouseover",n),t.off("mouseleave",i)})}}),v.directive("ngCell",["$compile","$domUtilityService",function(e,t){return{scope:!1,compile:function(){return{pre:function(t,i){var r,o,a=t.col.cellTemplate.replace(h,"row.entity."+t.col.field);t.col.enableCellEdit?r=(r=(r=(r=t.col.cellEditTemplate).replace(g,t.col.cellEditableCondition)).replace(p,a)).replace(f,t.col.editableCellTemplate.replace(h,"row.entity."+t.col.field)):r=a,o=n(r),i.append(o),e(o)(t),t.enableCellSelection&&-1===o[0].className.indexOf("ngSelectionCell")&&(o[0].setAttribute("tabindex",0),o.addClass("ngCellElement"))},post:function(e,n){e.enableCellSelection&&e.domAccessProvider.selectionHandlers(e,n),e.$on("$destroy",e.$on("ngGridEventDigestCell",function(){t.digest(e)}))}}}}}]),v.directive("ngEditCellIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,t,n){return function(e,t,i){var r,o;e.$on("$destroy",e.$watch(i.ngEditCellIf,function(i){r&&(r.remove(),r=void 0),o&&(o.$destroy(),o=void 0),i&&(o=e.$new(),n(o,function(e){r=e,t.after(e)}))}))}}}}]),v.directive("ngGridFooter",["$compile","$templateCache",function(e,t){return{scope:!1,compile:function(){return{pre:function(n,i){0===i.children().length&&i.append(e(t.get(n.gridId+"footerTemplate.html"))(n))}}}}}]),v.directive("ngGridMenu",["$compile","$templateCache",function(e,t){return{scope:!1,compile:function(){return{pre:function(n,i){0===i.children().length&&i.append(e(t.get(n.gridId+"menuTemplate.html"))(n))}}}}}]),v.directive("ngGrid",["$compile","$filter","$templateCache","$sortService","$domUtilityService","$utilityService","$timeout","$parse","$http","$q",function(e,i,r,o,a,s,l,d,c,u){return{scope:!0,compile:function(){return{pre:function(h,p,f){var g,m=n(p),v=h.$eval(f.ngGrid);return v.gridDim=new k({outerHeight:n(m).height(),outerWidth:n(m).width()}),g=new C(h,v,o,a,i,r,s,l,d,c,u),h.$on("$destroy",function(){v.gridDim=null,v.selectRow=null,v.selectItem=null,v.selectAll=null,v.selectVisible=null,v.groupBy=null,v.sortBy=null,v.gridId=null,v.ngGrid=null,v.$gridScope=null,v.$gridServices=null,h.domAccessProvider.grid=null,t.element(g.styleSheet).remove(),g.styleSheet=null}),g.init().then(function(){if("string"==typeof v.columnDefs?h.$on("$destroy",h.$parent.$watch(v.columnDefs,function(e){if(!e)return g.refreshDomSizes(),void g.buildColumns();g.lateBoundColumns=!1,h.columns=[],g.config.columnDefs=e,g.buildColumns(),g.eventProvider.assignEvents(),a.RebuildGrid(h,g)},!0)):g.buildColumns(),"string"==typeof v.totalServerItems?h.$on("$destroy",h.$parent.$watch(v.totalServerItems,function(e){h.totalServerItems=t.isDefined(e)?e:0})):h.totalServerItems=0,"string"==typeof v.data){var i=function(e){g.data=n.extend([],e),g.rowFactory.fixRowCache(),t.forEach(g.data,function(e,t){var n=g.rowMap[t]||t;g.rowCache[n]&&g.rowCache[n].ensureEntity(e),g.rowMap[n]=t}),g.searchProvider.evalFilter(),g.configureColumnWidths(),g.refreshDomSizes(),g.config.sortInfo.fields.length>0&&(g.sortColumnsInit(),h.$emit("ngGridEventSorted",g.config.sortInfo)),h.$emit("ngGridEventData",g.gridId)};h.$on("$destroy",h.$parent.$watch(v.data,i)),h.$on("$destroy",h.$parent.$watch(v.data+".length",function(){i(h.$eval(v.data)),h.adjustScrollTop(g.$viewport.scrollTop(),!0)}))}return g.footerController=new x(h,g),p.addClass("ngGrid").addClass(g.gridId.toString()),v.enableHighlighting||p.addClass("unselectable"),v.jqueryUITheme&&p.addClass("ui-widget"),p.append(e(r.get("gridTemplate.html"))(h)),a.AssignGridContainers(h,p,g),g.eventProvider=new y(g,h,a,l),v.selectRow=function(e,t){g.rowCache[e]&&(g.rowCache[e].clone&&g.rowCache[e].clone.setSelection(!!t),g.rowCache[e].setSelection(!!t))},v.selectItem=function(e,t){v.selectRow(g.rowMap[e],t)},v.selectAll=function(e){h.toggleSelectAll(e)},v.selectVisible=function(e){h.toggleSelectAll(e,!0)},v.groupBy=function(e){if(e)h.groupBy(h.columns.filter(function(t){return t.field===e})[0]);else{var i=n.extend(!0,[],h.configGroups);t.forEach(i,h.groupBy)}},v.sortBy=function(e){var t=h.columns.filter(function(t){return t.field===e})[0];t&&t.sort()},v.gridId=g.gridId,v.ngGrid=g,v.$gridScope=h,v.$gridServices={SortService:o,DomUtilityService:a,UtilityService:s},h.$on("$destroy",h.$on("ngGridEventDigestGrid",function(){a.digest(h.$parent)})),h.$on("$destroy",h.$on("ngGridEventDigestGridParent",function(){a.digest(h.$parent)})),h.$evalAsync(function(){h.adjustScrollLeft(0)}),t.forEach(v.plugins,function(e){"function"==typeof e&&(e=new e);var t=h.$new();e.init(t,g,v.$gridServices),v.plugins[s.getInstanceType(e)]=e,h.$on("$destroy",function(){t.$destroy()})}),"function"==typeof v.init&&v.init(g,h),null})}}}}}]),v.directive("ngHeaderCell",["$compile",function(e){return{scope:!1,compile:function(){return{pre:function(t,n){n.append(e(t.col.headerCellTemplate)(t))}}}}}]),v.directive("ngHeaderRow",["$compile","$templateCache",function(e,t){return{scope:!1,compile:function(){return{pre:function(n,i){0===i.children().length&&i.append(e(t.get(n.gridId+"headerRowTemplate.html"))(n))}}}}}]),v.directive("ngInput",[function(){return{require:"ngModel",link:function(e,n,i,r){function o(t){switch(t.keyCode){case 37:case 38:case 39:case 40:t.stopPropagation();break;case 27:e.$$phase||e.$apply(function(){r.$setViewValue(l),n.blur()});break;case 13:(e.enableCellEditOnFocus&&e.totalFilteredItemsLength()-1>e.row.rowIndex&&e.row.rowIndex>0||e.col.enableCellEdit)&&n.blur()}return!0}function a(e){e.stopPropagation()}function s(e){e.stopPropagation()}var l,d=e.$watch("ngModel",function(){l=r.$modelValue,d()});n.bind("keydown",o),n.bind("click",a),n.bind("mousedown",s),n.on("$destroy",function(){n.off("keydown",o),n.off("click",a),n.off("mousedown",s)}),e.$on("$destroy",e.$on("ngGridEventStartCellEdit",function(){n.focus(),n.select()})),t.element(n).bind("blur",function(){e.$emit("ngGridEventEndCellEdit")})}}}]),v.directive("ngRow",["$compile","$domUtilityService","$templateCache",function(e,t,n){return{scope:!1,compile:function(){return{pre:function(i,r){if(i.row.elm=r,i.row.clone&&(i.row.clone.elm=r),i.row.isAggRow){var o=n.get(i.gridId+"aggregateTemplate.html");o=i.row.aggLabelFilter?o.replace(u,"| "+i.row.aggLabelFilter):o.replace(u,""),r.append(e(o)(i))}else r.append(e(n.get(i.gridId+"rowTemplate.html"))(i));i.$on("$destroy",i.$on("ngGridEventDigestRow",function(){t.digest(i)}))}}}}}]),v.directive("ngViewport",[function(){return function(e,t){function n(t){var n=t.target.scrollLeft,i=t.target.scrollTop;return e.$headerContainer&&e.$headerContainer.scrollLeft(n),e.adjustScrollLeft(n),e.adjustScrollTop(i),e.forceSyncScrolling?o():(clearTimeout(r),r=setTimeout(o,150)),n,i,!1,!0}function i(){return!0,t.focus&&t.focus(),!0}var r,o=function(){e.$root.$$phase||e.$digest()};t.bind("scroll",n),t.bind("mousewheel DOMMouseScroll",i),t.on("$destroy",function(){t.off("scroll",n),t.off("mousewheel DOMMouseScroll",i)}),e.enableCellSelection||e.domAccessProvider.selectionHandlers(e,t)}}]),e.ngGrid.i18n.da={ngAggregateLabel:"artikler",ngGroupPanelDescription:"Grupr rkker udfra en kolonne ved at trkke dens overskift hertil.",ngSearchPlaceHolder:"Sg...",ngMenuText:"Vlg kolonner:",ngShowingItemsLabel:"Viste rkker:",ngTotalItemsLabel:"Rkker totalt:",ngSelectedItemsLabel:"Valgte rkker:",ngPageSizeLabel:"Side strrelse:",ngPagerFirstTitle:"Frste side",ngPagerNextTitle:"Nste side",ngPagerPrevTitle:"Forrige side",ngPagerLastTitle:"Sidste side"},e.ngGrid.i18n.de={ngAggregateLabel:"eintrag",ngGroupPanelDescription:"Ziehen Sie eine Spaltenberschrift hierhin um nach dieser Spalte zu gruppieren.",ngSearchPlaceHolder:"Suche...",ngMenuText:"Spalten auswhlen:",ngShowingItemsLabel:"Zeige Eintrge:",ngTotalItemsLabel:"Eintrge gesamt:",ngSelectedItemsLabel:"Ausgewhlte Eintrge:",ngPageSizeLabel:"Eintrge pro Seite:",ngPagerFirstTitle:"Erste Seite",ngPagerNextTitle:"Nchste Seite",ngPagerPrevTitle:"Vorherige Seite",ngPagerLastTitle:"Letzte Seite"},e.ngGrid.i18n.en={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"},e.ngGrid.i18n.es={ngAggregateLabel:"Artculos",ngGroupPanelDescription:"Arrastre un encabezado de columna aqu y soltarlo para agrupar por esa columna.",ngSearchPlaceHolder:"Buscar...",ngMenuText:"Elegir columnas:",ngShowingItemsLabel:"Artculos Mostrando:",ngTotalItemsLabel:"Artculos Totales:",ngSelectedItemsLabel:"Artculos Seleccionados:",ngPageSizeLabel:"Tamao de Pgina:",ngPagerFirstTitle:"Primera Pgina",ngPagerNextTitle:"Pgina Siguiente",ngPagerPrevTitle:"Pgina Anterior",ngPagerLastTitle:"ltima Pgina"},e.ngGrid.i18n.fa={ngAggregateLabel:"",ngGroupPanelDescription:"            .",ngSearchPlaceHolder:"...",ngMenuText:" :",ngShowingItemsLabel:" :",ngTotalItemsLabel:" :",ngSelectedItemsLabel:" :",ngPageSizeLabel:" :",ngPagerFirstTitle:" ",ngPagerNextTitle:" ",ngPagerPrevTitle:" ",ngPagerLastTitle:" "},e.ngGrid.i18n.fr={ngAggregateLabel:"articles",ngGroupPanelDescription:"Faites glisser un en-tte de colonne ici et dposez-le vers un groupe par cette colonne.",ngSearchPlaceHolder:"Recherche...",ngMenuText:"Choisir des colonnes:",ngShowingItemsLabel:"Articles Affichage des:",ngTotalItemsLabel:"Nombre total d'articles:",ngSelectedItemsLabel:"lments Articles:",ngPageSizeLabel:"Taille de page:",ngPagerFirstTitle:"Premire page",ngPagerNextTitle:"Page Suivante",ngPagerPrevTitle:"Page prcdente",ngPagerLastTitle:"Dernire page"},e.ngGrid.i18n.nl={ngAggregateLabel:"items",ngGroupPanelDescription:"Sleep hier een kolomkop om op te groeperen.",ngSearchPlaceHolder:"Zoeken...",ngMenuText:"Kies kolommen:",ngShowingItemsLabel:"Toon items:",ngTotalItemsLabel:"Totaal items:",ngSelectedItemsLabel:"Geselecteerde items:",ngPageSizeLabel:"Pagina grootte:, ",ngPagerFirstTitle:"Eerste pagina",ngPagerNextTitle:"Volgende pagina",ngPagerPrevTitle:"Vorige pagina",ngPagerLastTitle:"Laatste pagina"},e.ngGrid.i18n["pt-br"]={ngAggregateLabel:"itens",ngGroupPanelDescription:"Arraste e solte uma coluna aqui para agrupar por essa coluna",ngSearchPlaceHolder:"Procurar...",ngMenuText:"Selecione as colunas:",ngShowingItemsLabel:"Mostrando os Itens:",ngTotalItemsLabel:"Total de Itens:",ngSelectedItemsLabel:"Items Selecionados:",ngPageSizeLabel:"Tamanho da Pgina:",ngPagerFirstTitle:"Primeira Pgina",ngPagerNextTitle:"Prxima Pgina",ngPagerPrevTitle:"Pgina Anterior",ngPagerLastTitle:"ltima Pgina"},e.ngGrid.i18n["zh-cn"]={ngAggregateLabel:"",ngGroupPanelDescription:"",ngSearchPlaceHolder:"...",ngMenuText:"",ngShowingItemsLabel:"",ngTotalItemsLabel:"",ngSelectedItemsLabel:"",ngPageSizeLabel:"",ngPagerFirstTitle:"",ngPagerNextTitle:"",ngPagerPrevTitle:"",ngPagerLastTitle:""},e.ngGrid.i18n["zh-tw"]={ngAggregateLabel:"",ngGroupPanelDescription:"",ngSearchPlaceHolder:"...",ngMenuText:"",ngShowingItemsLabel:"",ngTotalItemsLabel:"",ngSelectedItemsLabel:"",ngPageSizeLabel:"",ngPagerFirstTitle:"",ngPagerNextTitle:"",ngPagerPrevTitle:"",ngPagerLastTitle:""},t.module("ngGrid").run(["$templateCache",function(e){e.put("aggregateTemplate.html",'<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate">\r\n    <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})</span>\r\n    <div class="{{row.aggClass()}}"></div>\r\n</div>\r\n'),e.put("cellEditTemplate.html",'<div ng-cell-has-focus ng-dblclick="CELL_EDITABLE_CONDITION && editCell()">\r\n\t<div ng-edit-cell-if="!(isFocused && CELL_EDITABLE_CONDITION)">\t\r\n\t\tDISPLAY_CELL_TEMPLATE\r\n\t</div>\r\n\t<div ng-edit-cell-if="isFocused && CELL_EDITABLE_CONDITION">\r\n\t\tEDITABLE_CELL_TEMPLATE\r\n\t</div>\r\n</div>\r\n'),e.put("cellTemplate.html",'<div class="ngCellText" ng-class="col.colIndex()"><span ng-cell-text>{{COL_FIELD CUSTOM_FILTERS}}</span></div>'),e.put("checkboxCellTemplate.html",'<div class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>'),e.put("checkboxHeaderTemplate.html",'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected, true)"/>'),e.put("editableCellTemplate.html",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD" />'),e.put("footerTemplate.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">\r\n    <div class="ngTotalSelectContainer" >\r\n        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >\r\n            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>\r\n        </div>\r\n        <div class="ngFooterSelectedItems" ng-show="multiSelect">\r\n            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>\r\n        </div>\r\n    </div>\r\n    <div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">\r\n        <div style="float:left; margin-right: 10px;" class="ngRowCountPicker">\r\n            <span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span>\r\n            <select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" >\r\n                <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>\r\n            </select>\r\n        </div>\r\n        <div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">\r\n            <button type="button" class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button>\r\n            <button type="button" class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button>\r\n            <input class="ngPagerCurrent" min="1" max="{{currentMaxPages}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>\r\n            <span class="ngGridMaxPagesNumber" ng-show="maxPages() > 0">/ {{maxPages()}}</span>\r\n            <button type="button" class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button>\r\n            <button type="button" class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("gridTemplate.html",'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()">\r\n    <div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="groupPanelStyle()">\r\n        <div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}</div>\r\n        <ul ng-show="configGroups.length > 0" class="ngGroupList">\r\n            <li class="ngGroupItem" ng-repeat="group in configGroups">\r\n                <span class="ngGroupElement">\r\n                    <span class="ngGroupName">{{group.displayName}}\r\n                        <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span>\r\n                    </span>\r\n                    <span ng-hide="$last" class="ngGroupArrow"></span>\r\n                </span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="ngHeaderContainer" ng-style="headerStyle()">\r\n        <div ng-header-row class="ngHeaderScroller" ng-style="headerScrollerStyle()"></div>\r\n    </div>\r\n    <div ng-grid-menu></div>\r\n</div>\r\n<div class="ngViewport" unselectable="on" ng-viewport ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()">\r\n    <div class="ngCanvas" ng-style="canvasStyle()">\r\n        <div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" ng-class="row.alternatingRowClass()" ng-row></div>\r\n    </div>\r\n</div>\r\n<div ng-grid-footer></div>\r\n'),e.put("headerCellTemplate.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !col.noSortVisible() }">\r\n    <div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}}</div>\r\n    <div class="ngSortButtonDown" ng-click="col.sort($event)" ng-show="col.showSortButtonDown()"></div>\r\n    <div class="ngSortButtonUp" ng-click="col.sort($event)" ng-show="col.showSortButtonUp()"></div>\r\n    <div class="ngSortPriority">{{col.sortPriority}}</div>\r\n    <div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"></div>\r\n</div>\r\n<div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>\r\n'),e.put("headerRowTemplate.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell">\r\n\t<div class="ngVerticalBar" ng-style="{height: col.headerRowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\r\n\t<div ng-header-cell></div>\r\n</div>'),e.put("menuTemplate.html",'<div ng-show="showColumnMenu || showFilter"  class="ngHeaderButton" ng-click="toggleShowMenu()">\r\n    <div class="ngHeaderButtonArrow"></div>\r\n</div>\r\n<div ng-show="showMenu" class="ngColMenu">\r\n    <div ng-show="showFilter">\r\n        <input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/>\r\n    </div>\r\n    <div ng-show="showColumnMenu">\r\n        <span class="ngMenuText">{{i18n.ngMenuText}}</span>\r\n        <ul class="ngColList">\r\n            <li class="ngColListItem" ng-repeat="col in columns | ngColumns">\r\n                <label><input ng-disabled="col.pinned" type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label>\r\n\t\t\t\t<a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable && col.visible" ng-click="groupBy(col)"></a>\r\n\t\t\t\t<span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span>          \r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'),e.put("rowTemplate.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}">\r\n\t<div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\r\n\t<div ng-cell></div>\r\n</div>')}])}(window,e)}).call(this,n(10),n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(144),r=(n(145),e.module("Magister.Web.Aanwezigheid",["ngRoute","ngResource","Magister.Shared","Magister.Web.Agenda","googlechart"]));r.directive("smChart",i.a.$inject);var o={module:["$ocLazyLoad",function(e){return n.e(0).then(n.bind(null,413)).then(function(t){var n=t.aanwezigheidAMD;return e.load(n)})}]};r.config(["$routeProvider",function(e){e.when("/afwezigheid",{pageTitle:"Afwezigheid",controller:"aanwezigheidController",resolve:o,template:n(146)}).when("/afwezigheid/totalen",{pageTitle:"Afwezigheid",controller:"aanwezigheidController",resolve:o,template:n(147)}).when("/afwezigheid/ziekmelden/:absentieMeldenLink?",{pageTitle:"Ziek melden",controller:"ziekmeldenController",resolve:o,template:n(148)})}])}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return r});var r=function(){function t(){var e=this;this.template="<div data-google-chart data-chart='chartConfig'></div>",this.restrict="E",this.scope={chartOptions:"=chartOptions",chartData:"=chartData"},this.controller=o,this.link=function(t,n,i,r){return e.linkFn(t,n,i,r)}}return t.prototype.linkFn=function(t,n,i,r){t.$watch("chartData",function(n,i){if(e.isArray(n)){var o=r.shapeDataToViewModel(t.chartData,t.chartOptions);t.chartConfig=o}})},t.$inject=[function(){return new t}],t}(),o=function(){function t(e){}return t.prototype.shapeDataToViewModel=function(e,t){return"PieChart"===t.type?this.shapeDataToPieView(e,t):this.shapeDataToColumnView(e,t)},t.prototype.shapeDataToColumnView=function(t,n){var r=i.clone(n);i.omit(r,"columns");var o=[];i.each(t,function(t){var r={c:[]};i.each(n.columns,function(n){var i=t[n.id];i=e.isDefined(i)?i:null,r.c.push({v:i})}),o.push(r)});var a={cols:n.columns,rows:o};return r.data=a,r},t.prototype.shapeDataToPieView=function(t,n){var r=i.clone(n),o=i.first(n.columns),a=i.rest(n.columns);i.omit(r,"columns");var s=[];i.each(t,function(t){i.each(a,function(n){var i={c:[]},r=t[n.id];r=e.isDefined(r)?r:null,i.c.push({v:n.label}),i.c.push({v:r}),s.push(i)})});var l={cols:[{id:o.id,type:o.type},{id:"value",type:"number"}],rows:s};return r.data=l,r},t.$inject=["$scope"],t}()}).call(this,n(1),n(3))},function(e,t,n){(function(e){
/**
 * @description Google Chart Api Directive Module for AngularJS
 * @version 0.0.9
 * @author Nicolas Bouillon <nicolas@bouil.org>
 * @author GitHub contributors
 * @license MIT
 * @year 2013
 */
!function(t,n){"use strict";e.module("googlechart",[]).constant("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}}).provider("googleJsapiUrl",function(){var e="https:",t="//www.google.com/jsapi";this.setProtocol=function(t){e=t},this.setUrl=function(e){t=e},this.$get=function(){return(e||"")+t}}).factory("googleChartApiPromise",["$rootScope","$q","googleChartApiConfig","googleJsapiUrl",function(i,r,o,a){var s=r.defer(),l=function(){var t={callback:function(){var t=o.optionalSettings.callback;i.$apply(function(){s.resolve()}),e.isFunction(t)&&t.call(this)}};t=e.extend({},o.optionalSettings,t),n.google.load("visualization",o.version,t)},d=t.getElementsByTagName("head")[0],c=t.createElement("script");return c.setAttribute("type","text/javascript"),c.src=a,c.addEventListener?c.addEventListener("load",l,!1):c.onreadystatechange=function(){("loaded"===c.readyState||"complete"===c.readyState)&&(c.onreadystatechange=null,l())},d.appendChild(c),s.promise}]).directive("googleChart",["$timeout","$window","$rootScope","googleChartApiPromise",function(e,t,n,i){return{restrict:"A",scope:{chart:"=chart",onReady:"&",select:"&"},link:function(t,r){function o(e,n,i){var r,o,a,s;if(void 0!==t.chart.formatters[e]){if(null==t.formatters[e])if(t.formatters[e]=[],"color"===e)for(r=0;r<t.chart.formatters[e].length;r++){for(o=new n,s=0;s<t.chart.formatters[e][r].formats.length;s++)void 0!==(a=t.chart.formatters[e][r].formats[s]).fromBgColor&&void 0!==a.toBgColor?o.addGradientRange(a.from,a.to,a.color,a.fromBgColor,a.toBgColor):o.addRange(a.from,a.to,a.color,a.bgcolor);t.formatters[e].push(o)}else for(s=0;s<t.chart.formatters[e].length;s++)t.formatters[e].push(new n(t.chart.formatters[e][s]));for(s=0;s<t.formatters[e].length;s++)t.chart.formatters[e][s].columnNum<i.getNumberOfColumns()&&t.formatters[e][s].format(i,t.chart.formatters[e][s].columnNum);("arrow"===e||"bar"===e||"color"===e)&&(t.chart.options.allowHtml=!0)}}function a(){i.then(function(){!function n(){n.triggered||null==t.chart||(n.triggered=!0,e(function(){var i,a,s;if(n.triggered=!1,void 0===t.formatters&&(t.formatters={}),i=t.chart.data instanceof google.visualization.DataTable?t.chart.data:Array.isArray(t.chart.data)?google.visualization.arrayToDataTable(t.chart.data):new google.visualization.DataTable(t.chart.data,.5),void 0!==t.chart.formatters&&(o("number",google.visualization.NumberFormat,i),o("arrow",google.visualization.ArrowFormat,i),o("date",google.visualization.DateFormat,i),o("bar",google.visualization.BarFormat,i),o("color",google.visualization.ColorFormat,i)),void 0!==(a=t.chart.customFormatters))for(name in a)o(name,a[name],i);s={chartType:t.chart.type,dataTable:i,view:t.chart.view,options:t.chart.options,containerId:r[0]},t.chartWrapper=new google.visualization.ChartWrapper(s),google.visualization.events.addListener(t.chartWrapper,"ready",function(){t.chart.displayed=!0,t.$apply(function(e){e.onReady({chartWrapper:e.chartWrapper})})}),google.visualization.events.addListener(t.chartWrapper,"error",function(e){console.log("Chart not displayed due to error: "+e.message+". Full error object follows."),console.log(e)}),google.visualization.events.addListener(t.chartWrapper,"select",function(){var e=t.chartWrapper.getChart().getSelection()[0];e&&t.$apply(function(){t.select({selectedItem:e})})}),e(function(){r.empty(),t.chartWrapper.draw()})},0,!0))}()})}t.$watch("chart",function(){a()},!0),n.$on("resizeMsg",function(){e(function(){t.chartWrapper&&a()})})}}}]).run(["$rootScope","$window",function(t,n){e.element(n).bind("resize",function(){t.$emit("resizeMsg")})}])}(document,window)}).call(this,n(1))},function(e,t){e.exports='<div id="aanwezigheid-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !vm.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1 data-ng-bind-template="{{vm.title}}, {{vm.selectedInstellingen.Periode.name}}"></h1>\r\n        <div id="knop-ziek-melden" ng-if="vm.absentieMeldenLink !== \'\'" ng-class="{\'disabled-button\' : vm.disableButton()}" data-ng-click="vm.ziekMelden()"><a href="" title=""><span class="icon-plus ziek-melden-button"></span>melden</a></div>\r\n    </div>\r\n    \x3c!--<div data-sm-menu="menu"></div>--\x3e\r\n    <section class="main">\r\n        <span data-ng-bind="vm.tableClass[afspraak.month]"></span>\r\n        <div class="content-container full-width" data-sm-scrollbar="scrollbar" data-sm-loading-indicator="{domain: \'absenties;absentieperioden\', content: \'scheduler\', className: \'icon-ok-circled\', overlay: true}">\r\n            <div id="aanwezigheid" class="normaal" data-use-native-scrolling="true">\r\n                <table class="table-grid-layout normaal"\r\n                       data-ng-class="vm.tableClass[afspraak.month]"\r\n                       data-ng-repeat="afspraak in vm.afsprakenGroupedByMonth">\r\n                    \x3c!--data-ng-show="vm.filterAfspraken(afspraak.items, vm.selectedOptions, vm.selectedGeoorloofd).length"--\x3e\r\n                    <colgroup>\r\n                        <col width="90" />\r\n                        <col width="180" />\r\n                        <col width="100%" />\r\n                        <col width="100" align="center" />\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr data-ng-click="vm.toggleMonthFold(afspraak.month)">\r\n                            <th colspan="4">\r\n                                <span class="icon-up-arrow"></span>\r\n                                <strong data-ng-bind="afspraak.month"></strong>\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr data-ng-repeat="item in afspraak.items" data-ng-click="vm.updateDetails(item)" sm-notify-complete="notify">\r\n                            <td data-ng-bind="item.start | date:\'EEE dd-MM\'"></td>\r\n                            <td><span class="nrblock" data-ng-bind="getLesuurString(item.afspraak.LesuurVan, item.afspraak.LesuurTotMet)"></span>{{item.afspraak.Omschrijving}} ({{item.afspraak.Lokatie}})</td>\r\n                            <td>\r\n                                <span class="text-icon inline" data-ng-repeat="absentie in item.items" icon-type="{{absentie.Geoorloofd ? \'ok\': \'error\'}}" data-ng-class="{\'inline-list\': item.items.length > 1}">{{absentie.iconCode}}</span>\r\n                                <span data-ng-if="item.items.length === 1">{{item.items[0].Omschrijving}} ({{item.items[0].Code}})</span>\r\n                            </td>\r\n                            <td>\r\n                                <span data-ng-show="item.afspraak.afspraakType !== 103 && item.afspraak.InfoType === 2" class="agenda-text-icon" icon-type="information">proefwerk</span>\r\n                                <span data-ng-show="item.afspraak.afspraakType !== 103 && item.afspraak.InfoType === 3" class="agenda-text-icon" icon-type="information">tentamen</span>\r\n                                <span data-ng-show="item.afspraak.afspraakType !== 103 && item.afspraak.InfoType === 4" class="agenda-text-icon" icon-type="information">SO</span>\r\n                                <span data-ng-show="item.afspraak.afspraakType !== 103 && item.afspraak.InfoType === 5" class="agenda-text-icon" icon-type="information">MO</span>\r\n                                <span data-ng-show="item.afspraak.afspraakType === 103" class="text-icon" icon-type="information">examen</span>\r\n\r\n                                <span data-ng-show="item.afspraak.InfoType !== 0 && !vm.isToets(item.afspraak)" class="agenda-text-icon" ng-class="{\'outline\': !item.afspraak.Afgerond}"\r\n                                      icon-type="{{item.afspraak.Afgerond ? \'ok\': \'information\'}}">huiswerk</span>\r\n                            </td>\r\n\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div data-sm-no-items="sm-no-items" data-override="vm.afsprakenGroupedByMonth.length"></div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-sm-instellingen-selectie="Instellingen" data-title="Instellingen" data-items="vm.instellingenSelectors" data-selected-options="vm.selectedInstellingen"></div>\r\n            <div data-sm-aanwezigheid-filter="AanwezigheidFilter" data-title="Gebeurtenissen" data-selected-options="vm.selectedOptions" data-filter-options="vm.allOptions"></div>\r\n            <div data-sm-radio-select="AanwezigheidRadio" data-title="Toon selectie" data-selected-options="vm.selectedGeoorloofd"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t){e.exports='<div id="aanwezigheid-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !vm.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1 data-ng-bind-template="{{vm.title}}, {{vm.selectedInstellingen.Periode.name}}"></h1>\r\n    </div>\r\n    \x3c!--<div data-sm-menu="menu"></div>--\x3e\r\n    <section class="main">\r\n        <div id="aanwezigheid-totalen" class="content-container" data-sm-loading-indicator="{domain: \'absenties;absentieperioden\', content: \'scheduler\', className: \'icon-ok-circled\', overlay: true}">\r\n            <div class="widget wide">\r\n                <div class="block" data-ng-class="{\'fold\': foldAanwezigheid}">\r\n                    <h3>\r\n                        <span data-ng-click="foldAanwezigheid=!foldAanwezigheid" class="icon-up-arrow"></span>\r\n                        <b>Totalen</b>\r\n                    </h3>\r\n                    <div class="content content-auto">\r\n                        <ul class="list multi-line">\r\n                            <li data-ng-repeat="item in vm.afsprakenGroupedByAllowed">\r\n                                <strong data-ng-bind-template="Totalen, {{item.geoorloofd}} ({{item.totalCount}})"></strong>\r\n                                <span data-ng-repeat="(verantwoording, itm) in item.reden" data-ng-bind-template="{{verantwoording}} ({{itm}})"></span>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="widget wide">\r\n                <div class="block" data-ng-class="{\'fold\': foldLesbijzonderheden}">\r\n                    <h3>\r\n                        <span data-ng-click="foldLesbijzonderheden=!foldLesbijzonderheden" class="icon-up-arrow"></span>\r\n                        <b>Lesbijzonderheden</b>\r\n                    </h3>\r\n                    <div class="content content-auto">\r\n                        <ul class="list multi-line">\r\n                            <li data-ng-repeat="item in vm.afsprakenGroupedByReason">\r\n                                <strong data-ng-bind-template="{{vm.verantwoordingTypeOmschrijvingen[item.reden]}} ({{item.totalCount}})"></strong>\r\n                                <span data-ng-show="item.geoorloofd.false" data-ng-bind-template="ongeoorloofd ({{item.geoorloofd.false}})"></span>\r\n                                <span data-ng-show="item.geoorloofd.true" data-ng-bind-template="geoorloofd ({{item.geoorloofd.true}})"></span>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-sm-instellingen-selectie="Instellingen" data-title="Instellingen" data-items="vm.instellingenSelectors" data-selected-options="vm.selectedInstellingen"></div>\r\n            <div data-sm-aanwezigheid-filter="AanwezigheidFilter" data-title="Gebeurtenissen" data-selected-options="vm.selectedOptions" data-filter-options="vm.allOptions"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t){e.exports='<div id="ziek-melden-container" class="container">\r\n    <div class="head-bar">\r\n        <h1><a id="knop-ziek-melden-verlaten" data-ng-click="vm.onCheckDirty()"><span class="icon-back"></span></a>Ziek melden</h1>\r\n        <div id="knop-ziek-melden-versturen" ng-class="{\'disabled-button\' : !vm.$scope.selectedDay}" data-ng-click="vm.onShowMeldingVersturenDialog()"><a href="" title=""><span></span>versturen</a></div>\r\n    </div>\r\n\r\n    <section class="main">\r\n        <div class="content-container full-width">\r\n            <ul>\r\n                <li>\r\n                    <b class="ziek-melden-label" id="ziek-melden-label-datum">Datum</b>\r\n                    <div class="ziek-melden-block">\r\n                        <input type="text" id="calendar" data-kendo-date-picker="agendaCalendar" data-k-options="agendaCalendarOptions"\r\n                            data-ng-bind="vm.calendarSelectedDate" data-k-on-change="calendarOnChange(kendoEvent)" ng-keydown="vm.onKeydown($event)"/>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <b class="ziek-melden-label" id="ziek-melden-label-opmerking">Opmerking</b>\r\n                    <div class="ziek-melden-block">\r\n                        <textarea id="ziek-melden-opmerking" data-ng-model="vm.opmerking" maxlength="255" />\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </section>\r\n\r\n    <div class="dialog-overlay" data-ng-show="vm.showMeldingVersturenDialog">\r\n        <div class="dialog" style="position:fixed">\r\n            <div class="content-pane">\r\n                <h2 class="title indent">Ziek melden</h2>\r\n                <div class="content" style="padding-bottom:77px">\r\n                    <p>Wilt u <b>{{vm.childName}}</b> ziek melden voor {{vm.vandaagMorgen}}?</p>\r\n                </div>\r\n                <footer class="footer" style="margin-bottom:4px">\r\n                    <a id="knop-bevestigen-annuleren" class="secondary-button" ng-click="vm.onCloseMeldingVersturenDialog()">\r\n                        <span>terug</span>\r\n                    </a>                    \r\n                    <a id="knop-bevestigen-akkoord" class="primary-button" ng-click="vm.onMeldingVersturen()">\r\n                        <span>akkoord</span>\r\n                    </a>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="dialog-overlay" data-ng-show="vm.showDirtyDialog">\r\n        <div class="dialog" style="position:fixed">\r\n            <div class="content-pane">\r\n                <h2 class="title indent">Ziek melden</h2>\r\n                <div class="content" style="padding-bottom:77px">\r\n                    <p>De inhoud is gewijzigd, weet je zeker dat je deze pagina wilt verlaten?</p>\r\n                </div>\r\n                <footer class="footer" style="margin-bottom:4px">\r\n                    <a id="knop-pagina-verlaten-annuleren" class="secondary-button" ng-click="vm.showDirtyDialog = false">\r\n                        <span>annuleren</span>\r\n                    </a>                    \r\n                    <a id="knop-pagina-verlaten-bevestigen" class="primary-button" ng-click="vm.goBack()">\r\n                        <span>ja</span>\r\n                    </a>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    </div>      \r\n</div>'},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return r});var r=function(){function t(e,t,i,r,o,a,s,l,d){var c=this;this.$rootScope=e,this.$q=t,this.$http=i,this.$location=r,this.$window=o,this.applicationService=a,this.personInfoService=s,this.instellingService=l,this.currentUser=d,this.LAATST_GEKOZEN_KIND_KEY="laatstGekozenKind",this.template=n(150),this.replace=!0,this.controller=["$scope",function(e){return c.controllerFn(e)}]}return t.prototype.controllerFn=function(e){var t=this;this.hideChildPickerOnBodyClick(e),e.showMessage=!1,e.onOk=function(){return t.onOk(e)},e.person=this.currentUser.person,e.showChildPicker=!1;var n=[];this.currentUser.relatedPersons.persons.forEach(function(e){var i=e;i.isSelected=e===t.currentUser.relatedPersons.current,n.push(i)}),e.kinderen=n,e.selectedChild=this.currentUser.relatedPersons.current,e.selectChild=function(n){return t.selectChild(n,e)},e.toggleChildPicker=function(){e.showChildPicker||t.$rootScope.$broadcast("HIDE_ACCOUNT_MENU"),event.preventDefault(),event.stopPropagation(),e.showChildPicker=!e.showChildPicker},e.$on("HIDE_CHILD_MENU",function(){e.showChildPicker=!1})},t.prototype.getChildren=function(e){if(!e)return this.$q.reject("Geen ouder");var t="/api/personen/persoonId/kinderen?openData=''";t=t.replace("persoonId",e.toString(10));var n={headers:{}};return this.$http.get(t,n).then(function(e){return e.data})},t.prototype.onOk=function(e){e.showMessage=!1},t.prototype.selectChild=function(t,n){var i=this;this.getChildren(this.currentUser.person.id).then(function(r){e.find(r.Items,function(e){return e.Id===t.id}).ZichtbaarVoorOuder?(i.currentUser.setCurrentPerson(e.find(i.currentUser.relatedPersons.persons,function(e){return e.id===t.id})),i.instellingService.set(i.currentUser.person.id,"latestRelatedPerson",i.currentUser.relatedPersons.current).then(function(e){n.selectedChild=t,n.kinderen.forEach(function(e){e.isSelected=n.selectedChild.id===e.id}),i.$location.absUrl().endsWith("vandaag")?location.reload():(i.$location.url("/vandaag"),i.$rootScope.$broadcast("CHILD_RELOAD"))})):(n.kinderen.forEach(function(e){e.isSelected=n.selectedChild.id===e.id}),n.showMessage=!0)})},t.prototype.hideChildPicker=function(e){e.showChildPicker=!1},t.prototype.hideChildPickerOnBodyClick=function(e){var t=this,n=i("body")[0];i(n).on("click",function(){return t.hideChildPicker(e)}),window.addEventListener("blur",function(){return t.hideChildPicker(e)})},t.$inject=["$rootScope","$q","$http","$location","$window","applicationService","personInfoService","instellingService","currentUser",function(e,n,i,r,o,a,s,l,d){return new t(e,n,i,r,o,a,s,l,d)}],t}()}).call(this,n(3),n(10))},function(e,t){e.exports='<div>\r\n    <a id="child-picker-menu" ng-click="toggleChildPicker()">\r\n        <figure>\r\n            <img alt="{{selectedChild.fullName}}" mg-http-src="{{ \'/api/leerlingen/\'+ selectedChild.id + \'/foto\' }}" />\r\n            <i class="far fa-user-graduate"></i>\r\n        </figure>\r\n        <span>{{selectedChild.fullName}}</span>\r\n    </a>\r\n    <div class="popup-menu user-menu" ng-if="showChildPicker">\r\n        <li data-ng-repeat="child in kinderen" class="child" data-ng-click="selectChild(child)"\r\n            ng-class="{ \'active\': selectedChild === child }">\r\n            <figure>\r\n                <img alt="{{child.fullName}}" mg-http-src="{{ \'/api/leerlingen/\'+ child.id + \'/foto\' }}" />\r\n                <i class="far fa-user-graduate"></i>\r\n            </figure>\r\n            <a>{{child.fullName}}</a>\r\n        </li>\r\n        <div class="child-info">\r\n            <li>\r\n                <a data-ng-href="#/leerling-gegevens">Gegevens van {{selectedChild.fullName}}</a>\r\n            </li>\r\n        </div>\r\n    </div>\r\n    <div class="dialog-overlay" data-ng-show="showMessage">\r\n        <div class="dialog" style="position:fixed">\r\n            <div class="content-pane">\r\n                <h2 class="title indent">Kind 18 jaar of ouder</h2>\r\n                <div class="content" style="padding-bottom:77px">\r\n                    <p>Uw kind heeft u geen toestemming gegeven om zijn/haar gegevens te bekijken. Uw kind kan u toestemming geven bij zijn/haar instellingen in Magister.</p>\r\n                </div>\r\n                <footer class="footer" style="margin-bottom:4px">\r\n                    <a class="primary-button" ng-click="onOk()">\r\n                        <span>ok</span>\r\n                    </a>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var i=n(152),r=n(153),o=n(155),a=n(156),s=n(157),l=n(158),d=n(159),c=n(160),u=n(162),h=n(163),p=e.module("Magister.Web.Agenda",["ngRoute","ngResource"]);p.service("agendaResources",a.a.$inject).service("verantwoordingResource",l.a.$inject).service("absentiePeriodenResource",o.a.$inject).service("roosterwijzigingenResource",s.a.$inject).service("agendaService",c.a.$inject).service("roosterwijzigingenService",u.a.$inject).service("verantwoordingService",h.a.$inject).service("absentiePeriodenService",d.a.$inject).service("aanwezigheidService",i.a.$inject),p.directive("agendaDatePickerDirective",r.a.$inject);var f={module:["$ocLazyLoad",function(e){return n.e(2).then(n.bind(null,426)).then(function(t){var n=t.agendaAMD;return e.load(n)})}]};p.config(["$locationProvider","$routeProvider",function(e,t){t.when("/agenda",{pageTitle:"Agenda",controller:"afsprakenLijstController",controllerAs:"ctrl",reloadOnSearch:!1,resolve:f,template:n(164)}).when("/agenda/afspraak/nieuw/:start?/:end?",{pageTitle:"Nieuwe afspraak",controller:"agendaAfspraakNieuwController",resolve:f,template:n(101)}).when("/agenda/afspraak/nieuw",{pageTitle:"Nieuwe afspraak",controller:"agendaAfspraakNieuwController",resolve:f,template:n(101)}).when("/agenda/afspraak/bewerken/:id?",{pageTitle:"Afspraak bewerken",controller:"agendaAfspraakNieuwController",resolve:f,template:n(101)}).when("/agenda/afspraak/:afspraakId/:returnUrl?",{pageTitle:"Agenda afspraak",controller:"agendaAfspraakController",reloadOnSearch:!1,resolve:f,template:n(165)}).when("/agenda/huiswerk/:huiswerkId/:returnUrl?",{pageTitle:"Agenda huiswerk",controller:"agendaHuiswerkController",resolve:f,template:n(166)}).when("/agenda/:view/:id?",{pageTitle:"Agenda",controller:"agendaController",resolve:f,template:n(167)})}])}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i,r,o,a){this.$resource=e,this.$filter=t,this.$location=n,this.$q=i,this.applicationService=r,this.magisterLocale=o,this.currentUser=a;var s=globalSettings.apiHost+"api/personen/:persoonId/absenties?van=:van&tot=:tot";this.absentieResource=this.$resource(s,{persoonId:a.person.id})}return e.prototype.getAbsenties=function(e,t){var n=this.$q.defer();return this.absentieResource.get({van:e,tot:t},function(e){n.resolve(e)}),n.promise},e.prototype.postAbsentie=function(e,t){var n=this.$q.defer(),i=globalSettings.apiHost+e;return this.$resource(i,{},{execute:{method:"POST"}}).execute(t).$promise.then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},e.$inject=["$resource","$filter","$location","$q","applicationService","magisterLocale","currentUser",e],e}()},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(0),o=function(){function t(){var e=this;this.scope={selectedView:"=",changeDateCallback:"&"},this.template=n(154),this.replace=!0,this.controller=a.$inject,this.controllerAs="ctrl",this.link=function(t,n,i,r){return e.linkFn(t,n,i,r)}}return t.prototype.linkFn=function(e,t,n,i){var r=this;i.updateCalendarSelectedWeek=function(e,t){return r.updateCalendarSelectedWeek(e,t)}},t.prototype.updateCalendarSelectedWeek=function(t,n){if("day"!==n.name){var o=Object(r.w)(t)?null:t.sender._cellID;e(null!==o?"#"+o:"#calendar .k-state-selected").removeClass("k-state-selected").removeClass("k-state-focused"),e("div#calendar").find(".range-select").removeClass("first").removeClass("last").removeClass("range-select");for(var a=i(n.startDate);a<=n.endDate;){var s=i(a),l=s.year()+"/"+s.month()+"/"+s.date(),d=e(".k-link[data-value='"+l+"']");d.parent().addClass("range-select"),0===a.diff(n.startDate)?(d.parent().removeClass("k-state-selected"),d.parent().addClass("first")):0===a.diff(n.endDate)&&d.parent().addClass("last"),a=a.add("day",1)}}},t.$inject=[function(){return new t}],t}(),a=function(){function e(e){var t=this;if(this.$scope=e,this.datePickerOptions={value:new Date,footer:!1},this.datePickerOnChange=function(n){t.onDatePickerChanged(n),void 0!==t.updateCalendarSelectedWeek&&t.updateCalendarSelectedWeek(n,e.selectedView)},Object(r.w)(e.selectedView))var n=e.$watch("selectedView",function(e){Object(r.w)(e)||(n(),t.onIsolatedScopeInitialized(e))});else this.onIsolatedScopeInitialized(e.selectedView)}return e.prototype.onIsolatedScopeInitialized=function(e){var t=this;Object(r.w)(this.$scope.agendaDatePicker)?this.$scope.$watch("agendaDatePicker",function(e){Object(r.w)(e)||t.onDatePickerInitialized(e)}):this.onDatePickerInitialized(this.$scope.agendaDatePicker)},e.prototype.onDatePickerInitialized=function(e){this.datePickerOptions.value=this.$scope.selectedView.selectedDate.toDate(),e.setOptions(this.datePickerOptions),this.updateCalendarSelectedWeek(null,this.$scope.selectedView)},e.prototype.onDatePickerChanged=function(e){void 0===this.changeDateCallback?void 0!==this.$scope.changeDateCallback&&(this.changeDateCallback=this.$scope.changeDateCallback(),void 0!==this.changeDateCallback&&this.changeDateCallback(i(e.sender.value()))):this.changeDateCallback(i(e.sender.value()))},e.$inject=["$scope",e],e}()}).call(this,n(10),n(15))},function(e,t){e.exports='<div class="widget">\r\n    <div>\r\n        <div class="content">\r\n            <div id="calendar" data-kendo-calendar="agendaDatePicker" data-k-options="ctrl.datePickerOptions" data-k-on-change="ctrl.datePickerOnChange(kendoEvent)" />\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.absentiePeriodenUrl=globalSettings.apiHost+"api/personen/:persoonId/absentieperioden"}return e.prototype.get=function(e){return this.$resource(this.absentiePeriodenUrl,{persoonId:":persoonId"},{execute:{method:"GET"}}).execute({persoonId:e}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.$q=e,this.$resource=t,this.syncHttpService=n,this.afspraakUrl=globalSettings.apiHost+"api/personen/:persoonId/afspraken/:afspraakId",this.afsprakenUrl=globalSettings.apiHost+"api/personen/:persoonId/afspraken"}return e.prototype.get=function(e,t,n,i){return this.$resource(this.afsprakenUrl,{persoonId:":persoonId"},{execute:{method:"GET"}}).execute({persoonId:e,van:t,tot:n,status:i}).$promise},e.prototype.getById=function(e,t,n){if(void 0===n&&(n=!0),n)return this.$resource(this.afspraakUrl,{persoonId:":persoonId",afspraakId:":afspraakId"},{execute:{method:"GET"}}).execute({persoonId:e,afspraakId:t}).$promise;(new Date).getTime();var i=this.$q.defer(),r=this.afspraakUrl.replace(":persoonId",e.toString()).replace(":afspraakId",t.toString());return this.syncHttpService.get(r).then(function(e){i.resolve(e.data)}).catch(function(e){i.reject(e)}),i.promise},e.prototype.getByDirection=function(e){return this.$resource(e).get().$promise},e.prototype.add=function(e,t){return this.$resource(this.afsprakenUrl,{persoonId:":persoonId"},{execute:{method:"POST"}}).execute({persoonId:e},t).$promise},e.prototype.update=function(e,t,n){return this.$resource(this.afspraakUrl,{persoonId:":persoonId",afspraakId:":afspraakId"},{execute:{method:"PUT"}}).execute({persoonId:e,afspraakId:t},n).$promise},e.prototype.delete=function(e,t){return this.$resource(this.afspraakUrl,{persoonId:":persoonId",afspraakId:":afspraakId"},{execute:{method:"DELETE"}}).execute({persoonId:e,afspraakId:t}).$promise},e.$inject=["$q","$resource","syncHttpService",e],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(e){this.$resource=e,this.roosterwijzigingenUrl=globalSettings.apiHost+"api/personen/:persoonId/roosterwijzigingen"}return t.prototype.getRoosterwijzigingenResource=function(){return this.$resource(globalSettings.apiHost+"api/personen/:persoonId/roosterwijzigingen",{persoonId:"@persoonId",van:"@van",tot:"@tot"})},t.prototype.get=function(t){return this.$resource(this.roosterwijzigingenUrl,{persoonId:":persoonId"},{execute:{method:"GET"}}).execute({persoonId:t,van:e().format("YYYY-MM-DD"),tot:e().day(e().day()+1).format("YYYY-MM-DD")}).$promise},t.$inject=["$resource",t],t}()}).call(this,n(15))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.verantwoordingenUrl=globalSettings.apiHost+"api/personen/:persoonId/absenties"}return e.prototype.get=function(e,t,n,i,r){return this.$resource(this.verantwoordingenUrl,{persoonId:":persoonId"},{execute:{method:"GET"}}).execute({persoonId:e,van:t,tot:n,geoorloofd:i,verantwoordingsTypen:r}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$q=e,this.absentiePeriodenResource=t}return e.prototype.get=function(e){return this.absentiePeriodenResource.get(e)},e.$inject=["$q","absentiePeriodenResource",e],e}()},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return y});var r,o,a,s,l=n(6),d=n(5),c=n(4),u=n(0),h=n(99),p=n(161),f=n(118),g=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v=["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],b=((o={}).zondag=0,o.maandag=1,o.dinsdag=2,o.woensdag=3,o.donderdag=4,o.vrijdag=5,o.zaterdag=6,o),_=((a={}).eerste=p.b.FIRST,a.tweede=p.b.SECOND,a.derde=p.b.THIRD,a.vierde=p.b.FOURTH,a.laatste=p.b.LAST,a),k=((s={}).dag=p.a.ANY_DAY,s.werkdag=p.a.WORK_DAY,s.weekenddag=p.a.WEEKEND_DAY,s.zondag=p.a.SUNDAY,s.maandag=p.a.MONDAY,s.dinsdag=p.a.TUESDAY,s.woensdag=p.a.WEDNESDAY,s.donderdag=p.a.THURSDAY,s.vrijdag=p.a.FRIDAY,s.zaterdag=p.a.SATURDAY,s),w=[Contracts.Agenda.Afspraken.Enums.AfspraakInfoType.MondelingeOverhoring,Contracts.Agenda.Afspraken.Enums.AfspraakInfoType.Proefwerk,Contracts.Agenda.Afspraken.Enums.AfspraakInfoType.Tentamen,Contracts.Agenda.Afspraken.Enums.AfspraakInfoType.SchriftelijkeOverhoring],y=function(t){function n(e,n,i,r,o){var a=t.call(this,n)||this;return a.$filter=e,a.applicationService=n,a.verantwoordingService=i,a.agendaResource=r,a.currentUser=o,a}return g(n,t),n.prototype.getAfspraken=function(t,n,i,r,o,a){var s,c=this;return void 0===r&&(r=!1),void 0===o&&(o="1,3"),void 0===a&&(a=h.b.Actief),r=r&&this.currentUser.hasPrivilege(d.a.Absenties,l.a.Read),this.agendaResource.get(t,n,i,a).then(function(a){return s=c.convertResponseToViewData(a),r?c.verantwoordingService.get(t,n,i,null,o).then(function(t){return s.agendaItems=e.map(s.agendaItems,function(e){return c.addAbsentieToAgendaItem(e,t.Items)}),s.agendaItems}):s.agendaItems})},n.prototype.orderByDateTime=function(e){return this.$filter("orderBy")(e,"start",!1)},n.prototype.mergeAfsprakenArrays=function(t,n,i){if(void 0===i&&(i=!1),e.each(t,function(t){var i=e.find(n,function(e){return e.id===t.id});null!=i&&(i.absentieOmschrijving=t.absentieOmschrijving,i.absentieType=t.absentieType,e.extend(t,i))}),i)return n;var r=e.reject(t,function(t){return e.any(n,function(e){return e.id===t.id})});if(!this.allLessenCanceled(t,n))return e.union(r,n);var o=e.reject(n,function(e){return-1===e.id&&(e.afspraakType===Contracts.Agenda.Afspraken.Enums.AfspraakType.Les||e.afspraakType===Contracts.Agenda.Afspraken.Enums.AfspraakType.Kwt)});return e.union(r,o)},n.prototype.allLessenCanceled=function(t,n){var i=function(e){return e.afspraakType===Contracts.Agenda.Afspraken.Enums.AfspraakType.Les||e.afspraakType===Contracts.Agenda.Afspraken.Enums.AfspraakType.Kwt};return 0===e.difference(e.filter(t,i),e.filter(n,i)).length},n.prototype.getByDay=function(t,n){var r,o,a=this,s=[],l=i(n),d=i(i(n).add("days",1));return e.each(t,function(e){r=i(a.toCrossBrowserDateString(e.start)),o=i(a.toCrossBrowserDateString(e.einde)),(r>=l&&r<d||o>l&&o<=d||r<l&&o>d)&&s.push(e)}),this.$filter("orderBy")(s,"lesuur",!1)},n.prototype.removeAfspraak=function(e,t){return this.agendaResource.delete(t,e)},n.prototype.toCrossBrowserDateString=function(e){return e.replace("0000Z","Z")},n.prototype.addAbsentieToAgendaItem=function(e,t){var n=this.getAbsentie(e.id,t);return e.absentieType=this.getAbsentieType(e.id,t),null!=n&&(e.absentieOmschrijving=n.Omschrijving,e.absentieCode=n.Code,e.verantwoordingType=n.Verantwoordingtype),e},n.prototype.getAbsentieType=function(t,n){var i=e.find(n,function(e){return t===e.AfspraakId});return null==i?h.a.aanwezig:i.Geoorloofd?h.a.geoorloofd:h.a.ongeoorloofd},n.prototype.getAbsentie=function(t,n){return e.find(n,function(e){return t===e.AfspraakId})},n.prototype.mapItemsToViewModel=function(e){var t=this;return e.map(function(e){var n=i(t.toCrossBrowserDateString(e.start)),r=i(t.toCrossBrowserDateString(e.einde)),o=!1;0===n.hours()&&0===n.minutes()&&0===n.seconds()&&0===r.hours()&&0===r.minutes()&&0===r.seconds()&&(o=!0,r.subtract("days",1));var a,s=Object(u.w)(e.locatie)?e.lokaal:e.locatie;return 1===e.herhaalStatus&&e.herhaling&&(a=m({},e.herhaling,{BeginDatum:new Date(e.herhaling.BeginDatum),EindDatum:e.herhaling.EindDatum?new Date(e.herhaling.EindDatum):void 0,Wekelijks:e.herhaling.Wekelijks?m({},e.herhaling.Wekelijks,{dagenLijst:t.getWeekDays(e.herhaling.Wekelijks.Dagen)}):void 0})),{id:e.id,datumBegin:i(n).startOf("day").toDate(),begin:n,einde:r,beginString:t.toCrossBrowserDateString(e.start),eindString:t.toCrossBrowserDateString(e.einde),lesuur:e.lesuur,title:e.omschrijving,lokaal:e.lokaal,omschrijving:e.omschrijving,isWijziging:e.isWijziging,docent:e.docent,vak:e.vak,locatie:s,absentieType:e.absentieType,absentieOmschrijving:e.absentieOmschrijving,afspraakType:e.afspraakType,isToets:w.some(function(t){return t===e.infoType}),bijlagen:e.bijlagen,huiswerk:e.inhoud,isAfgerond:e.afgerond,aantekeningLeerling:e.aantekeningLeerling,isHeleDag:o,heeftBijlagen:e.heeftBijlagen,infoType:e.infoType,status:e.status,verantwoordingType:e.verantwoordingType,isAbsent:-1!==[1].indexOf(e.verantwoordingType),isZiek:-1!==[3].indexOf(e.verantwoordingType),heeftVrijstelling:-1!==[6].indexOf(e.verantwoordingType),heeftOnafgerondHuiswerk:(e.inhoud||e.heeftBijlagen)&&!e.afgerond&&6!==e.infoType&&0!==e.infoType,heeftAfgerondHuiswerk:(e.inhoud||e.heeftBijlagen)&&e.afgerond&&6!==e.infoType&&0!==e.infoType,heeftInformatie:(e.inhoud||e.heeftBijlagen)&&(6===e.infoType||0===e.infoType),heeftProefwerk:103!==e.afspraakType&&2===e.infoType,heeftTussentijdseToets:103!==e.afspraakType&&3===e.infoType,heeftSchriftelijkeOverhoring:103!==e.afspraakType&&4===e.infoType,heeftMondelingeOverhoring:103!==e.afspraakType&&5===e.infoType,isExamen:103===e.afspraakType,magLocatieZien:!(t.currentUser.isInRole(c.a.Ouder)&&e.afspraakType===Contracts.Agenda.Afspraken.Enums.AfspraakType.Persoonlijk),isHerhalend:1===e.herhaalStatus,herhaling:a,recurrencePattern:1===e.herhaalStatus?t.composeRecurrencePattern(a,n,r,o):null,heeftLesUur:void 0!==e.lesuur&&null!==e.lesuur&&""!==e.lesuur&&"0"!==e.lesuur,isOnlineDeelname:e.isOnlineDeelname}})},n.prototype.composeRecurrencePattern=function(e,t,n,i){var r=this.deriveRecurrencePropertiesFromHerhalingDto(e);return i?this.getRecurrenceStringFromHerhaling(e,r):this.getRecurrenceStringFromHerhaling(e,r,{begin:t,end:n})},n.prototype.getWeekDays=function(e){var t=v.filter(function(t,n){return e&1<<n}).map(function(e){return e});return"zondag"===t[0]&&t.push(t.shift()),t},n.prototype.deriveRecurrencePropertiesFromHerhalingDto=function(e){var t;if(e.AantalKeer)t={maxRepetitions:e.AantalKeer};else{if(!e.EindDatum)throw new Error("Invalid herhaalpatroon: either aantalKeer or eindDatum must be defined.");t={maxEndDate:e.EindDatum}}if(e.Dagelijks)return e.Dagelijks.Interval?Object(p.c)(e.BeginDatum,t,e.Dagelijks.Interval):Object(p.g)(e.BeginDatum,t);if(e.Wekelijks){var n=e.Wekelijks.dagenLijst.map(function(e){return b[e]});return Object(p.f)(e.BeginDatum,t,e.Wekelijks.Interval,n)}if(e.Maandelijks){if(e.Maandelijks.DagVanMaand)return Object(p.d)(e.BeginDatum,t,e.Maandelijks.Interval,e.Maandelijks.DagVanMaand.dagNummer);if(e.Maandelijks.DagInWeek)return Object(p.e)(e.BeginDatum,t,e.Maandelijks.Interval,_[e.Maandelijks.DagInWeek.rangorde],k[e.Maandelijks.DagInWeek.weekDag]);throw new Error("Invalid herhaalpatroon: herhaalpatroon of 'maandelijks' must be specified by either dagVanMaand or dagInWeek.")}throw new Error("Invalid herhaalpatroon: herhaalpatroon must specify a pattern of either dagelijks, wekelijks or maandelijks.")},n.prototype.getRecurrenceStringFromHerhaling=function(e,t,n){var r="Vindt plaats ";if(e.Dagelijks)r+="elke ",e.Dagelijks.Interval?r+=1===e.Dagelijks.Interval?"dag":e.Dagelijks.Interval+" dagen":r+="werkdag";else if(e.Wekelijks){r+="elke ",e.Wekelijks.Interval&&e.Wekelijks.Interval>1&&(r+=e.Wekelijks.Interval+" weken op ");var o=e.Wekelijks.dagenLijst.slice();if(o.length>1){var a=o.pop();r+=o.join(", "),r+=" en "+a}else r+=o.join()}else e.Maandelijks&&(e.Maandelijks.DagVanMaand?r+="op de "+e.Maandelijks.DagVanMaand.dagNummer+"e dag ":e.Maandelijks.DagInWeek&&(r+="op de "+e.Maandelijks.DagInWeek.rangorde,r+=" "+e.Maandelijks.DagInWeek.weekDag+" "),1===e.Maandelijks.Interval?r+="van elke maand":r+="van elke "+e.Maandelijks.Interval+" maanden");return r+=" vanaf ",t.dateOfFirstAfspraak&&(r+=i(t.dateOfFirstAfspraak).format("D-M-YYYY")),r+=" tot",e.EindDatum?r+=" "+i(e.EindDatum).format("D-M-YYYY"):t.dateOfLastAfspraak&&(r+=" "+i(t.dateOfLastAfspraak).format("D-M-YYYY")),n&&(r+=" van "+i(n.begin).format("HH:mm"),r+=" tot "+i(n.end).format("HH:mm")),r},n.$inject=["$filter","applicationService","verantwoordingService","agendaResources","currentUser",n],n}(f.a)}).call(this,n(3),n(15))},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return c});var i,r,o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};function a(e,t,n){if(n<1)throw new Error("Recurrence interval must be at least 1.");return u(e,t,function(){return!0},function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+n)})}function s(e,t){return u(e,t,function(e){return 0!==e.getDay()&&6!==e.getDay()},function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)})}function l(e,t,n,i){if(n<1)throw new Error("Recurrence interval must be at least 1.");return u(e,t,function(e){return i.indexOf(e.getDay())>-1},function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);return 1===t.getDay()&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7*(n-1))),t})}function d(e,t,n,i){if(n<1)throw new Error("Recurrence interval must be at least 1.");return u(e,t,function(e){return e.getDate()===i},function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);return 1===t.getDate()&&(t=new Date(t.getFullYear(),t.getMonth()+(n-1),1)),t})}function c(e,t,n,i,r){if(n<1)throw new Error("Recurrence interval must be at least 1.");var o=h(e.getFullYear(),e.getMonth(),i,r);return u(e,t,function(e){return!!o&&e.getTime()===o.getTime()},function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);return 1===t.getDate()&&(t=new Date(t.getFullYear(),t.getMonth()+(n-1),1),o=h(t.getFullYear(),t.getMonth(),i,r)),t})}function u(e,t,n,i){var r=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(p(t)&&(t=o({},t,{maxEndDate:new Date(t.maxEndDate.getFullYear(),t.maxEndDate.getMonth(),t.maxEndDate.getDate())})).maxEndDate<r)throw new Error("Invalid recurrence period: maxEndDate may not precede startDate.");for(var a=null,s=null,l=0;(void 0===t.maxRepetitions||l<t.maxRepetitions)&&(!p(t)||r<=t.maxEndDate);)n(r)&&(l+=1,s=r,a||(a=r)),r=i(r);return{dateOfFirstAfspraak:a,dateOfLastAfspraak:s,afspraakCount:l}}function h(e,t,n,o){for(var a=new Date(e,t,1),s=function(e){switch(e){case r.ANY_DAY:return function(){return!0};case r.WEEKEND_DAY:return function(e){return 0===e.getDay()||6===e.getDay()};case r.WORK_DAY:return function(e){return!(0===e.getDay()||6===e.getDay())};default:return function(t){return t.getDay()===e}}}(o),l=function(e){switch(e){case i.FIRST:return 1;case i.SECOND:return 2;case i.THIRD:return 3;case i.FOURTH:return 4;case i.LAST:return 1/0}}(n),d=0,c=new Date(a.getTime());d<l&&a.getMonth()===t;)s(a)&&(d+=1,c=a),a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);return 0===d?null:c}function p(e){return void 0!==e.maxEndDate}!function(e){e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.THIRD=2]="THIRD",e[e.FOURTH=3]="FOURTH",e[e.LAST=4]="LAST"}(i||(i={})),function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY",e[e.ANY_DAY=7]="ANY_DAY",e[e.WORK_DAY=8]="WORK_DAY",e[e.WEEKEND_DAY=9]="WEEKEND_DAY"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i,r=n(118),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,i){var r=e.call(this,n)||this;return r.$q=t,r.applicationService=n,r.roosterwijzigingenResource=i,r}return o(t,e),t.prototype.get=function(e){var t=this,n=this.$q.defer();return this.roosterwijzigingenResource.get(e).then(function(e){var i=t.convertResponseToViewData(e);n.resolve(i),i.agendaItems=t.markAllAsWijziging(i.agendaItems)},function(e){t.handleErrorResult(e.data.Message),n.reject(e)}),n.promise},t.prototype.markAllAsWijziging=function(e){for(var t=0;t<e.length;t++)e[t].isWijziging=!0;return e},t.$inject=["$q","applicationService","roosterwijzigingenResource",t],t}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$q=e,this.verantwoordingResource=t}return e.prototype.get=function(e,t,n,i,r){return this.verantwoordingResource.get(e,t,n,i,r)},e.$inject=["$q","verantwoordingResource",e],e}()},function(e,t){e.exports='<div id="afsprakenlijst-container" class="container afsprakenlijst-container sidecolumn" data-ng-class="{\'aside-toggle\': !ctrl.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Afsprakenlijst</h1>\r\n        <div>\r\n            <a title="Afspraak verwijderen" data-ng-show="ctrl.magVerwijderen" data-ng-class="{\'grayed\' : !ctrl.kanVerwijderen}" data-ng-click="ctrl.bevestigVerwijderenAfspraak();">\r\n                <i class="far fa-trash"></i>\r\n            </a>\r\n        </div>\r\n        <div>\r\n            <a title="Afspraak bewerken" data-ng-show="ctrl.magBewerken" data-ng-class="{\'grayed\' : !ctrl.kanBewerken}" data-ng-click="ctrl.bewerkenAfspraak();">\r\n                <i class="far fa-pencil"></i>\r\n            </a>\r\n        </div>\r\n        <div>\r\n            <a title="Nieuwe afspraak" data-ng-if="ctrl.magNieuw" data-ng-click="ctrl.nieuweAfspraak();">\r\n                <i class="far fa-plus"></i>\r\n            </a>\r\n        </div>\r\n        <div>\r\n            <a title="Afdrukken" data-ng-click="ctrl.afdrukkenAfspraak();" class="ng-binding">\r\n                <i class="far fa-print"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container" data-sm-loading-indicator="{domain: \'afspraken\', content: \'scheduler\', className: \'icon-calendar\', overlay: true}">\r\n            <div data-sm-afspraken-lijst="sm-afspraken-lijst" data-afspraken="ctrl.afspraken" data-selection-changed="ctrl.onAfsprakenLijstSelectionChanged"></div>\r\n            <div data-sm-no-items="sm-no-items" data-items="ctrl.afspraken"></div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-agenda-date-picker-directive="agenda-date-picker-directive" data-selected-view="ctrl.view" data-change-date-callback="ctrl.onChangeDate"></div>\r\n            <div data-agenda-instellingen="agenda-instellingen" data-views="ctrl.viewTypes" data-show-huiswerk-callback="ctrl.onChangeShowHuiswerk"></div>\r\n        </sm-tab>\r\n        <sm-tab title="Details" id="idDetails">\r\n            <div data-agenda-lesuur="agenda-lesuur" data-event="ctrl.afspraak"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t){e.exports='<div id="agenda-lesdashboard-container" class="container agenda-lesdashboard sidecolumn" data-ng-class="{\'aside-toggle\': !vm.tabState.tabContainerVisible}">\r\n    \x3c!--<div data-sm-menu="menu"></div>--\x3e\r\n    <div class="head-bar">\r\n        <h1>\r\n            <a ng-click="vm.terug();">\r\n                <i class="far fa-chevron-circle-left"></i>\r\n            </a>\r\n            <span data-ng-bind="vm.typeOmschrijving"></span>\r\n        </h1>\r\n        <div aria-haspopup="true" class="dropdown-menu">\r\n            <a title="afspraak">\r\n                afspraak\r\n            </a>\r\n            <ul class="foldout">\r\n                <li><a data-ng-click="vm.verwijderAfspraak();" data-ng-class="{\'grayed\': !vm.magVerwijderen}">verwijderen</a></li>\r\n                <li><a data-ng-click="vm.wijzigAfspraak();" data-ng-class="{\'grayed\': !vm.magWijzigen}">bewerken</a></li>\r\n                <li data-ng-show="vm.afspraak.Afgerond && vm.allowEdit"><a data-ng-class="{\'grayed\': !vm.magAfronden}" data-ng-click="vm.afrondenOngedaanMaken();" title="afronden ongedaan maken">afronden ongedaan maken</a></li>\r\n                <li data-ng-show="!vm.afspraak.Afgerond && vm.allowEdit"><a data-ng-class="{\'grayed\': !vm.magAfronden}" data-ng-click="vm.afspraakAfronden();" title="afspraak afronden">afspraak afronden</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container" data-sm-scrollbar="scrollbar">\r\n            <div class="widget wide uitwerking">\r\n                <div id="huiswerkOmschrijving" class="block">\r\n                    <h3>\r\n                        <span class="block-menu icon-fullsize" data-ng-click="vm.showAfspraakInPopup();"></span>\r\n                        <span data-loading-indicator="" image="assets/images/throbber-forward-concept1.png"></span>\r\n                        <b data-ng-bind="vm.afspraak.Omschrijving"></b>\r\n                    </h3>\r\n                    <div class="content content-auto">\r\n                        <div class="comment" data-ng-bind-html="vm.afspraak.Inhoud">\r\n                        </div>\r\n                        <br />\r\n                        <div class="attachment-bar">\r\n                            <div data-ng-repeat="attachment in vm.afspraak.Bijlagen track by $index">\r\n                                <a ng-click="vm.onOpenAttachment(attachment)">\r\n                                    <span ng-bind="attachment.Naam" style="display: inline;"></span>\r\n                                </a>\r\n                                <div>&nbsp;</div>\r\n                                <span data-ng-click="deleteAttachment($index);"></span>\r\n                            </div>\r\n                            <div ng-hide="vm.afspraak.Bijlagen && vm.afspraak.Bijlagen.length > 0">\r\n                                <em>Er zijn geen bijlagen op dit moment.</em>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <footer class="endlink"></footer>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Details" id="idDetails">\r\n            <div sm-agenda-afspraak-detail-directive></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n\r\n'},function(e,t){e.exports='<style>\r\n    /* Maurice heeft dit gezien. 14-03-2017 */\r\n    .bottom_border {\r\n        border-bottom: 1px solid #cccccc;\r\n    }\r\n\r\n    .tri-columns {\r\n        width: 33.33333%;\r\n        display: inline-block;\r\n    }\r\n\r\n        .tri-columns strong {\r\n            display: block;\r\n            width: 100%;\r\n        }\r\n\r\n        .tri-columns div {\r\n            padding: 0 1px;\r\n        }\r\n</style>\r\n\r\n<div id="agenda-lesdashboard-container" class="container sidecolumn agenda-lesdashboard" data-ng-class="{\'aside-toggle\': !vm.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <div>\r\n            <a class="ng-hide text-button" data-ng-show="!vm.selectedKWTKeuze.Status && !vm.KwtIsDisabled(vm.selectedKWTKeuze) && vm.getVisibility(vm.visibilityState.KWTBlock) && vm.isLeerling" data-ng-class="{\'disabled\': !vm.selectedKWTKeuze}" data-ng-click="vm.SubscribeKWT(vm.selectedKWTKeuze);" title="inschrijven KWT">inschrijven KWT</a>\r\n            <a class="ng-hide text-button" data-ng-show="vm.selectedKWTKeuze.Status && vm.getVisibility(vm.visibilityState.KWTBlock) && vm.isLeerling" data-ng-click="vm.UnsubscribeKWT(vm.selectedKWTKeuze);" title="uitschrijven KWT">uitschrijven KWT</a>\r\n            <a class="ng-hide text-button" data-ng-show="vm.les.Afgerond && vm.isLeerling && !vm.getVisibility(vm.visibilityState.KWTBlock)" data-ng-click="vm.afrondenOngedaanMaken();" title="afronden ongedaan maken">afronden ongedaan maken</a>\r\n            <a class="ng-hide text-button" data-ng-show="!vm.les.Afgerond && !vm.getVisibility(vm.visibilityState.KWTBlock) && vm.heeftHuiswerkEnIsLeerling()" data-ng-click="vm.huiswerkInleveren();" title="huiswerk afronden">huiswerk afronden</a>\r\n        </div>\r\n        <h1>\r\n            <a ng-click="vm.terug();">\r\n                <i class="far fa-chevron-circle-left"></i>\r\n            </a>\r\n            <span data-ng-bind="vm.les.Omschrijving"></span>\r\n        </h1>\r\n    </div>\r\n    <section id="agenda-section" class="main">\r\n        <div class="content-container" data-sm-scrollbar="scrollbar">\r\n            <div class="widget kwt-widget wide" data-ng-if="vm.getVisibility(vm.visibilityState.KWTBlock) && vm.isLeerling">\r\n                <div class="block">\r\n                    <h3>\r\n                        <span class="icon-up-arrow"></span>\r\n                        <b>KWT-keuze maken</b>\r\n                    </h3>\r\n                    <div class="content content-auto">\r\n                        <table class="table-grid-layout">\r\n                            <colgroup>\r\n                                <col width="80px" />\r\n                                <col width="15%" />\r\n                                <col width="15%" />\r\n                                <col width="15%" />\r\n                                <col width="51%" />\r\n                            </colgroup>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>&nbsp;</th>\r\n                                    <th>Ruimte</th>\r\n                                    <th>Omschrijving</th>\r\n                                    <th>Docent</th>\r\n                                    <th>Onderwerp / Huiswerk</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr data-ng-repeat="KwtLes in vm.KWTKeuzes | orderBy : [\'Status\',\'MagInschrijven\',\'IsEnabled\'] :true" data-ng-class="{\'disabled\' : vm.KwtIsDisabled(KwtLes), \'selected\': vm.selectedKWTKeuze.Id == KwtLes.Id}" data-ng-click="vm.ToggleSubscribeKWT(KwtLes)">\r\n                                    <td><span data-ng-bind="vm.CreateDisabledString(KwtLes)" class="disabled-message"></span><span data-ng-class="{\'icon-oke\' : vm.KwtIsSubscribed(KwtLes)}"></span></td>\r\n                                    <td data-ng-bind="KwtLes.Ruimte"></td>\r\n                                    <td data-ng-bind="KwtLes.Omschrijving"></td>\r\n                                    <td data-ng-bind="KwtLes.Docent"></td>\r\n                                    <td data-ng-bind="KwtLes.Inhoud | stripHtml" title="{{ KwtLes.Inhoud  | stripHtml }}"></td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <footer class="endlink"></footer>\r\n                </div>\r\n            </div>\r\n            <div class="widget wide uitwerking">\r\n                <div class="block fold disabled" data-ng-if="!vm.getVisibility(vm.visibilityState.huiswerkBlock)">\r\n                    <h3>\r\n                        <span class="icon-up-arrow"></span>\r\n                        <b>Huiswerk</b>\r\n                    </h3>\r\n                </div>\r\n                <div data-ng-if="vm.getVisibility(vm.visibilityState.huiswerkBlock)" id="huiswerkomschrijving" class="block" data-ng-class="{\'fold\': vm.foldHuiswerk}" ng-init="vm.foldHuiswerk=false">\r\n                    <h3>\r\n                        <span class="block-menu icon-up-arrow" data-ng-click="vm.foldHuiswerk=!vm.foldHuiswerk"></span>\r\n                        <span class="block-menu icon-fullsize" data-ng-click="vm.showHuiswerkInPopup();"></span>\r\n                        <div data-loading-indicator=\'\'></div>\r\n                        <b>Huiswerk</b>\r\n                    </h3>\r\n\r\n                    <div class="comment bottom_border">\r\n                        <div class="tri-columns">\r\n                            <strong>Aangemaakt </strong>\r\n                            <div ng-bind="vm.les.TaakAangemaaktOp | date:\'EEEE dd MMMM yyyy HH:mm\'"></div>\r\n                        </div>\r\n                        <div class="tri-columns">\r\n                            <strong>Laatst gewijzigd </strong>\r\n                            <div ng-bind="vm.les.TaakGewijzigdOp | date:\'EEEE dd MMMM yyyy HH:mm\'"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="content content-auto background-white">\r\n                        <div class="comment" data-ng-bind-html="vm.les.Inhoud" data-ng-if="vm.getVisibility(vm.visibilityState.huiswerkInhoud)"></div>\r\n                        <div class="comment" data-ng-if="!vm.getVisibility(vm.visibilityState.huiswerkInhoud)">\r\n                            <div class="block-empty">\r\n                                <em>Er is geen huiswerk omschrijving.</em>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="attachment-bar">\r\n                            <div data-ng-repeat="attachment in vm.les.Bijlagen track by $index">\r\n                                <a ng-click="vm.onOpenAttachment(attachment)">\r\n                                    <span style="display: block;" ng-bind="attachment.Naam"></span>\r\n                                </a>\r\n                                <div>&nbsp;</div>\r\n                                <span data-ng-click="deleteAttachment($index);"></span>\r\n                            </div>\r\n                            <div data-ng-if="!vm.getVisibility(vm.visibilityState.huiswerkAttachments)">\r\n                                <em>Er zijn geen bijlagen op dit moment.</em>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <footer class="endlink"></footer>\r\n                </div>\r\n            </div>\r\n            <div class="widget small" data-ng-if="vm.hasOpdrachtenPrivilege()">\r\n                <div class="block fold disabled" data-ng-if="!vm.getVisibility(vm.visibilityState.eloOpdrachtBlock)">\r\n                    <h3>\r\n                        <span class="icon-up-arrow"></span>\r\n                        <b>ELO-opdracht</b>\r\n                    </h3>\r\n                </div>\r\n                <div id="eloOpdrachtContainer" class="block" data-ng-class="{\'clickable\': vm.opdracht}" data-ng-if="vm.getVisibility(vm.visibilityState.eloOpdrachtBlock)">\r\n                    <h3>\r\n                        <div data-loading-indicator=\'\'></div>\r\n                        <b>ELO-opdracht</b>\r\n                    </h3>\r\n                    <div class="content content-auto">\r\n                        <ul class="list agenda-list" data-ng-show="vm.opdracht">\r\n                            <li>\r\n                                <a>\r\n                                    <span class="time">Opdracht</span>\r\n                                    <span class="classroom ellipsis" data-ng-bind="vm.opdracht.Titel"></span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a>\r\n                                    <span class="time">Omschrijving</span>\r\n                                    <span class="classroom ellipsis" data-ng-bind="vm.opdracht.Omschrijving"></span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a>\r\n                                    <span class="time">Bijzonderheden</span>\r\n                                    <span style="clear: both; display: block;" data-ng-bind-template="Inleveren voor : {{vm.opdracht.InleverenVoor | date: \'dd MMM HH:mm\'}}"></span>\r\n                                    <span style="clear: both; display: block;" data-ng-bind-template="Ingeleverd op :{{vm.opdracht.IngeleverdOp | date: \'dd MMM HH:mm\'}}"></span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <footer class="endlink">\r\n                        <a data-ng-href="#/elo/opdrachten/{{vm.opdracht.Id}}">naar opdracht</a>\r\n                    </footer>\r\n                </div>\r\n            </div>\r\n            <div class="widget small" data-ng-if="vm.hasStudieWijzersPrivilege()">\r\n                <div class="block fold disabled" data-ng-if="!vm.getVisibility(vm.visibilityState.studiewijzersBlock)">\r\n                    <h3>\r\n                        <span class="icon-up-arrow"></span>\r\n                        <b>Studiewijzers</b>\r\n                    </h3>\r\n                </div>\r\n                <div id="studiewijzersContainer" class="block" data-ng-if="vm.getVisibility(vm.visibilityState.studiewijzersBlock)">\r\n                    <h3>\r\n                        <span data-loading-indicator="loading-indicator" data-image="assets/images/throbber-forward-concept1.png"></span>\r\n                        <b>Studiewijzers {{vm.les.Vakken | commaseparated: \', \': \'Naam\'}}</b>\r\n                    </h3>\r\n                    <div class="content content-auto">\r\n                        <ul class="list" data-ng-show="vm.studiewijzers">\r\n                            <li data-ng-repeat="studiewijzer in vm.studiewijzers">\r\n                                <a style="padding-left: 8px" data-ng-click="vm.selectStudiewijzer(studiewijzer);" class="ellipsis">{{studiewijzer.Titel}}</a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <footer class="endlink"></footer>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Lesrooster" id="idLesrooster" enabled="true">\r\n            <div data-sm-agenda-lessen-vak-directive="agenda-lessen-vak-directive"></div>\r\n            <div data-sm-agenda-lessen-dag-directive="agenda-lessen-dag-directive"></div>\r\n        </sm-tab>\r\n        <sm-tab title="Details" id="idDetails" enabled="true">\r\n            <div data-sm-agenda-huiswerk-detail-directive="agenda-huiswerk-detail-directive" data-agenda-bijzonderheden="vm.agendaBijzonderheden"></div>\r\n        </sm-tab>\r\n        <sm-tab title="Aantekeningen" id="idAantekeningen">\r\n            <div data-sm-agenda-aantekeningen-directive="agenda-aantekeningen-directive"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t){e.exports='<div id="agenda-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1 data-ng-bind="viewName"></h1>\r\n        <div>\r\n            <a title="Afspraak verwijderen" data-ng-show="magVerwijderen" data-ng-class="{\'grayed\' : !kanVerwijderen}" data-ng-click="verwijderenAfspraak();">\r\n                <i class="far fa-trash"></i>\r\n            </a>\r\n        </div>\r\n        <div>\r\n            <a title="Afspraak bewerken" data-ng-show="magBewerken" data-ng-class="{\'grayed\' : !kanBewerken}" data-ng-click="bewerkenAfspraak();">\r\n                <i class="far fa-pencil"></i>\r\n            </a>\r\n        </div>\r\n        <div>\r\n            <a title="Afspraak toevoegen" data-ng-if="magNieuw" data-ng-click="nieuweAfspraak();">\r\n                <i class="far fa-plus"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container" data-sm-loading-indicator="{domain: \'afspraken\', content: \'scheduler\', className: \'icon-calendar\', overlay: true}">\r\n            <div id="scheduler" data-kendo-scheduler="agenda" data-k-options="agendaOptions" data-k-on-change="agendaOnChange(kendoEvent)" data-k-data-source="agendaDataSource"></div>\r\n            <div data-sm-no-items="sm-no-items" data-override="dataAvailable"></div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-agenda-date-picker-directive="agenda-date-picker-directive"\r\n                data-selected-view="selectedView" data-change-date-callback="onChangeDate"></div>\r\n            <div data-agenda-instellingen="agenda-instellingen" data-views="viewTypes"\r\n                data-size-options="sizeOptions" data-change-size-callback="changeSize"></div>\r\n        </sm-tab>\r\n        <sm-tab title="Details" id="idDetails">\r\n            <div data-agenda-lesuur="agenda-lesuur" data-event="agendaLesuurEvent"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(119),r=n(169),o=e.module("Magister.Web.Berichten",["Magister.Core"]);o.value("berichtenSettings",i.a.$inject),o.service("berichtenService",r.a.$inject),o.filter("berichtSoort",function(){return function(e){return Contracts.Communicatie.Berichten.Enums.BerichtSoort[e]}});var a={module:["$ocLazyLoad",function(e){return n.e(4).then(n.bind(null,462)).then(function(t){var n=t.berichtenAMD;return e.load(n)})}]};o.config(["$routeProvider",function(e){e.when("/berichten",{pageTitle:"Berichten",controller:"BerichtenController",reloadOnSearch:!1,resolve:a,template:n(170)})}])}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(8),r=n(119),o=function(){function e(e,t,n){this.$q=e,this.$resource=t,this.berichtenSettings=n,this.BERICHTDETAILS_URI=globalSettings.apiHost+"api/personen/:persoonId/berichten/:berichtId",this.berichtenSettings=new r.a}return e.prototype.getWidgetMededelingen=function(e){var t={persoonId:e,mapId:4};return this.getBerichtenResource().get(t).$promise},e.prototype.getBerichtDetails=function(e,t,n){var i=this.$q.defer();return this.$resource(this.BERICHTDETAILS_URI,{persoonId:e,berichtId:t,berichtSoort:n}).get(function(e){i.resolve(e)}),i.promise},e.prototype.getBerichtenResource=function(){var e=this.berichtenSettings.ConfigItems.get("berichten").get(i.h.GET);return this.$resource(e.DataTemplate)},e.$inject=["$q","$resource","berichtenSettings",e],e}()},function(e,t){e.exports='<iframe id="berichten-nieuw-frame" src="/magister-berichten/#/overzicht"\n    ng-class="{ \'to-front\': shellIsBlocked }"></iframe>\n\n<div ng-switch="hideTourNextTimeSetting">\n    <div ng-switch-when="false" data-sm-magister-tour="magister tour" data-hide-tour-next-time="hideTourNextTime" data-hide-tour="hideTour" data-is-loaded="areSettingsLoaded"></div>\n</div>\n\n<div class="shell-blocker" ng-if="shellIsBlocked"\n    ng-class="{ \'is-opaque\' : isOpaque }"></div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(172),r=n(647),o=e.module("Magister.Web.Bestellen",["Magister.Core"]);o.service("bestellenService",i.a),o.component("mgLeverancierOverzicht",r.a),o.config(["$routeProvider",function(e){e.when("/bestellen",{name:"Leermiddelen bestellen",template:"<mg-leverancier-overzicht></mg-leverancier-overzicht>"})}])}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$http=e,this.$q=t}return e.prototype.getLeveranciers=function(e){return this.$http.get(e).then(function(e){return e.data})},e.prototype.getBestelInfo=function(){var t=this;return this.bestelInfo?this.$q.resolve(this.bestelInfo):this.$http.get(e.BESTEL_INFO_ENDPOINT).then(function(e){return t.bestelInfo=e.data,e.data})},e.BESTEL_INFO_ENDPOINT="/api/bestellen/info",e.$inject=["$http","$q"],e}()},function(e,t){e.exports='<div class="container bestellen-container">\n    <div class="head-bar">\n        <h1>{{ ::strings.ORDER_HEADER }}</h1>\n    </div>\n    <section class="main">\n        <div class="content-container bestellen-body" ng-switch="$ctrl.entrypointData.status">\n            <div ng-switch-when="SUCCESS" class="entrypoint-success fill-parent">\n                <div ng-if="$ctrl.entrypointData.entrypoint.kanBestellen" class="bestel-info-panel">\n                    <div ng-if="$ctrl.currentUserIsParent" id="parent-order-instruction" class="fill-parent">\n                        <p class="block-message">{{ ::strings.PARENT_ORDER_INSTRUCTION }}</p>\n                        <div class="warning-panel">\n                            <h1>{{ ::strings.WARNING }}</h1>\n                            <p>{{ ::strings.CLOSE_BROWSER_WARNING }}</p>\n                        </div>\n                    </div>\n                    <div ng-if="!$ctrl.currentUserIsParent">\n                        <div class="foto-header">\n                            <figure>\n                                <img class="student-foto" alt="{{$ctrl.currentUser.person.fullName}}" mg-http-src="{{$ctrl.currentUser.person.imageUrl + \'?width=72&height=72&crop=true\'}}">\n                                <i class="far fa-user"></i>\n                            </figure>\n                            <div class="header-text">{{ ::strings.ORDER_PRODUCTS_FOR }} <strong id="student-name">{{::$ctrl.currentUser.person.fullName}}</strong></span></div>\n                        </div>\n                        <div ng-switch="$ctrl.leveranciersData.status" class="leverancier-container">\n                            <div ng-switch-when="SUCCESS" class="leveranciers-success">\n                                <div ng-if="($ctrl.leveranciersData.leveranciers.huidig.leveranciers.length || $ctrl.leveranciersData.leveranciers.volgend.leveranciers.length)">\n                                    <p class="colored-header">{{ ::strings.CHOOSE_LEVERANCIER_MESSAGE }}</p>\n                                    <div id="current-year" ng-if="$ctrl.leveranciersData.leveranciers.huidig.leveranciers.length">\n                                        <p class="indent block-message year-description">{{ ::strings.CURRENT_SCHOOLYEAR }} {{::$ctrl.leveranciersData.leveranciers.huidig.lesperiode.korteOmschrijving}}</p>\n                                        <button class="leverancier-btn indent" ng-repeat="leverancier in $ctrl.leveranciersData.leveranciers.huidig.leveranciers"\n                                            ng-click="$ctrl.onSelectLeverancier(leverancier)">\n                                            {{::leverancier.naam}}\n                                        </button>\n                                    </div>\n                                    <div id="next-year" ng-if="$ctrl.leveranciersData.leveranciers.volgend.leveranciers.length">\n                                        <p class="indent block-message margin-above year-description">{{ ::strings.NEXT_SCHOOLYEAR }} {{::$ctrl.leveranciersData.leveranciers.volgend.lesperiode.korteOmschrijving}}</p>\n                                        <button class="leverancier-btn indent" ng-repeat="leverancier in $ctrl.leveranciersData.leveranciers.volgend.leveranciers"\n                                            ng-click="$ctrl.onSelectLeverancier(leverancier)">\n                                            {{::leverancier.naam}}\n                                        </button>\n                                    </div>\n                                    <div class="warning-panel">\n                                        <h1>{{ ::strings.WARNING }}</h1>\n                                        <p>{{ ::strings.CLOSE_BROWSER_WARNING }}</p>\n                                    </div>\n                                </div>\n                                <div ng-if="!($ctrl.leveranciersData.leveranciers.huidig.leveranciers.length || $ctrl.leveranciersData.leveranciers.volgend.leveranciers.length)">\n                                    <div id="no-leveranciers-warning" class="warning-panel">\n                                        <h1>{{ ::strings.WARNING }}</h1>\n                                        <p>{{ ::strings.NO_LEVERANCIERS_REGISTERED }}</p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-switch-when="PENDING" class="pending" sm-loading-indicator="{ startShowing: true, hideEvent: \'bestellen-entrypoint\' }"></div>\n                            <div ng-switch-when="ERROR" id="leverancier-error" class="warning-panel">\n                                <h1>Let op!</h1>\n                                <p id="leverancier-error-reason">{{ ::$ctrl.leveranciersData.error }}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div ng-if="!$ctrl.entrypointData.entrypoint.kanBestellen">\n                    <div id="unauthorized-message" class="error-message">\n                        <h3>{{ ::strings.UNAUTHORIZED_HEADER }}</h3>\n                        <p>{{ ::strings.UNAUTHORIZED_MESSAGE }}</p>\n                    </div>\n                </div>\n            </div>\n            <div ng-switch-when="ERROR" id="entrypoint-error" class="error-message">\n                <h3>{{ ::strings.APOLOGY }}</h3>\n                <p>{{ ::strings.AUTHORIZATION_FAILURE }}</p>\n            </div>\n            <div ng-switch-when="PENDING" class="pending" sm-loading-indicator="{ startShowing: true, hideEvent: \'bestellen-entrypoint\' }"></div>\n        </div>\n    </section>\n</div>\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return _});var i=n(175),r=n(176),o=n(177),a=n(178),s=n(179),l=n(180),d=n(181),c=n(182),u=n(183),h=n(120),p=n(185),f=n(186),g=n(187),m=n(189),v=n(191),b=n(192),_=e.module("Magister.Web.Cijfers",["ngRoute","ngResource","Magister.Core"]);_.constant("sideMenuConfiguration",{tabs:[{title:"Details",active:!0,widgets:[{directive:"sm-cijfer-informatie"},{directive:"sm-aanvullende-informatie"}]},{title:"Berekening",widgets:[{directive:"sm-berekend-gemiddelde"}]},{title:"Weergave",widgets:[{directive:"sm-weergave-filter-oud"},{directive:"sm-weergave-instellingen-oud"}]}]}).constant("settingsWeergaveKey","gridWeerGave"),_.component("smSchooljaarSelectie",g.a).component("smToetsboomGrid",m.a),_.filter("capitalize",h.a.prototype.capitalize),_.service("cijfersServiceOud",i.a.$inject).service("cijfersService",b.a.$inject).service("cijfersGemiddeldenResource",a.a.$inject).service("cijfersPeriodeResource",r.a.$inject).service("cijfersOverzichtResource",s.a.$inject).service("cijfersLaatstBehaaldeResultatenResource",l.a.$inject).service("cijfersKolomResource",o.a.$inject).service("cijfersGerelateerdeKolomResource",d.a.$inject).service("cijfersLaatstenResource",c.a.$inject).service("toetsboomService",v.a.$inject),_.factory("laatsteCijfersAdapter",f.a.$inject).factory("gemiddeldeCijfersAdapter",p.a.$inject).factory("overzichtCijfersAdapter",u.a.$inject);var k={module:["$ocLazyLoad",function(e){return n.e(6).then(n.bind(null,465)).then(function(t){var n=t.cijfersAMD;return e.load(n)})}]};_.config(["$routeProvider",function(e){e.when("/cijfersold",{pageTitle:"Cijferoverzicht",controller:"CijfersOverzichtControllerOud",resolve:k,template:n(193)}).when("/cijfers",{pageTitle:"Cijfers - Laatst behaalde resultaten",controller:"CijfersLaatstBehaaldeResultatenController",controllerAs:"ctrl",resolve:k,template:n(194)}).when("/cijfers/cijferoverzicht",{pageTitle:"Cijferoverzicht",controller:"CijfersOverzichtController",controllerAs:"ctrl",resolve:k,template:n(195)}).when("/cijfer/toetsboom",{pageTitle:"Toetsboom",controller:"ToetsboomController",controllerAs:"ctrl",resolve:k,template:n(196)})}])}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(0),o=function(){function t(e,t,n,i,r,o,a,s,l,d){this.$q=e,this.$filter=t,this.aanmeldingenService=n,this.vakkenService=i,this.cijfersGemiddeldenResource=r,this.cijfersPeriodeResource=o,this.cijfersLaatstenResource=a,this.cijfersKolomResource=s,this.cijfersGerelateerdeKolomResource=l,this.cijfersOverzichtResource=d,this.cachedVakDetails=null}return t.prototype.getCijferKolomInfo=function(e,t,n){return this.cijfersKolomResource.get(t,e,n)},t.prototype.getGerelateerdeKolommen=function(t,n,r){var o=this,a=this.$q.defer();return this.cijfersGerelateerdeKolomResource.get(t,n).then(function(t){if(e.isDefined(t.Items)&&null!==t.Items){var n=i.map(t.Items,function(e){return e.voldoende=o.isVoldoende(e.Cijfer),e});a.resolve(n)}else a.reject()},function(e){a.reject(e)}),a.promise},t.prototype.getGemiddeldeCijfers=function(e){var t=this,n=this.$q.defer();return this.getAanmeldingIdsVakkenIds(e).then(function(e){return t.$q.all(e)}).then(function(n){return t.getGemiddeldeCijfersInternal(e,n)}).then(function(e){n.resolve(e)}),n.promise},t.prototype.getAanmeldingIdsVakkenIds=function(e){var t=this,n=this.$q.defer();return this.getAanmeldingenIds(e).then(function(r){var o=[];i.each(r,function(n){o.push(t.getVakkenIds(e,n))}),n.resolve(o)}),n.promise},t.prototype.getAanmeldingenIds=function(e){var t=this.$q.defer();return this.aanmeldingenService.getLeerlingAanmeldingen(e).then(function(e){t.resolve(i.map(e,function(e){return e.id}))}),t.promise},t.prototype.getVakkenIds=function(e,t){var n=this,i=this.$q.defer();return this.vakkenService.getVakken(e.toString(),t.toString()).then(function(e){i.resolve({aanmeldingId:t,vakkenIds:n.toIdsString(e,"id",",")})}),i.promise},t.prototype.getGemiddeldeCijfersInternal=function(e,t){var n=this,r=this.$q.defer(),o=[];return i.each(t,function(t){o.push(n.cijfersGemiddeldenResource.get(e,t.aanmeldingId,t.vakkenIds))}),this.$q.all(o).then(function(e){var t=[];i.each(e,function(e){t=t.concat(e.Items)}),r.resolve(t)}),r.promise},t.prototype.getLaatsteCijfers=function(t,n){var r=this,o=this.$q.defer();return this.aanmeldingenService.getLeerlingAanmeldingen(t).then(function(n){var a=n;e.isDefined(a)&&a.length>0?i.each(a,function(e){r.vakkenService.getVakken(t.toString(),e.Id).then(function(n){n.length>0?r.cijfersLaatstenResource.get(t,e.Id).then(function(e){o.resolve(e)}):o.reject()})}):o.reject()},function(){o.reject()}),o.promise},t.prototype.getLaatsteCijfersBijAanmelding=function(e,t,n){return n?this.cijfersLaatstenResource.get(e,t,Date.parse(n)):this.cijfersLaatstenResource.get(e,t)},t.prototype.getOverzichtCijfers=function(e,t,n,i,r){return this.cijfersOverzichtResource.get(parseInt(e,10),t,n,i,r,null)},t.prototype.getCijferPerioden=function(e,t){return this.cijfersPeriodeResource.get(e,t)},t.prototype.setCachedVakDetails=function(e){this.cachedVakDetails=e},t.prototype.getCachedVakDetails=function(){return this.cachedVakDetails},t.prototype.setSelectedPeriode=function(e){this.selectedPeriodeId=e},t.prototype.getSelectedPeriode=function(){return this.selectedPeriodeId},t.prototype.isBerekend=function(e){return!Object(r.w)(e)&&!Object(r.w)(e.CijferKolom)&&!Object(r.w)(e.CijferKolom.KolomSoort)&&(e.CijferKolom.KolomSoort!==Contracts.Cijfers.Enums.KolomSoort.Cijfer&&e.CijferKolom.KolomSoort!==Contracts.Cijfers.Enums.KolomSoort.VrijeTekst||(e.CijferKolom.IsDocentKolom||e.CijferKolom.IsHerkansingKolom)&&e.CijferKolom.HeeftOnderliggendeKolommen)},t.prototype.isVoldoende=function(e){var t=parseFloat(e);return Object(r.s)(t)?"O"!==e.toLocaleUpperCase():t>=5.5},t.prototype.toIdsString=function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(e[r][t]);return i.join(n)},t.$inject=["$q","$filter","aanmeldingenService","vakkenService","cijfersGemiddeldenResource","cijfersPeriodeResource","cijfersLaatstenResource","cijfersKolomResource","cijfersGerelateerdeKolomResource","cijfersOverzichtResource",t],t}()}).call(this,n(1),n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t){return this.$resource(this.apiHost+"api/personen/:persoonId/aanmeldingen/:aanmeldingId/cijfers/cijferperiodenvooraanmelding",{persoonId:"@persoonId",aanmeldingId:"@aanmeldingId"},{execute:{method:"GET"}}).execute({persoonId:e,aanmeldingId:t}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t,n){return this.$resource(this.apiHost+"api/personen/:persoonId/aanmeldingen/:aanmeldingId/cijfers/extracijferkolominfo/:cijferKolomId",{persoonId:"@persoonId",aanmeldingId:"@aanmeldingId",cijferKolomId:"@cijferKolomId"},{execute:{method:"GET"}}).execute({persoonId:e,aanmeldingId:t,cijferKolomId:n}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t,n){return this.$resource(this.apiHost+"api/personen/:persoonId/aanmeldingen/:aanmeldingId/cijfers/gemiddelden/:vakken",{persoonId:"@persoonId",aanmeldingId:"@aanmeldingId",vakken:"@vakken"},{execute:{method:"GET"}}).execute({persoonId:e,aanmeldingId:t,vakken:n}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t,n,i,r,o){return this.$resource(this.apiHost+"api/personen/:persoonId/aanmeldingen/:aanmeldingId/cijfers/cijferoverzichtvooraanmelding",{persoonId:"@persoonId",aanmeldingId:"@aanmeldingId",actievePerioden:"@actievePerioden",alleenBerekendeKolommen:"@alleenBerekendeKolommen",alleenPTAKolommen:"@alleenPTAKolommen",peildatum:"@peildatum"},{execute:{method:"GET"}}).execute({persoonId:e,aanmeldingId:t,actievePerioden:n,alleenBerekendeKolommen:i,alleenPTAKolommen:r,peildatum:o}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t,n){return this.$resource(this.apiHost+"api/personen/:persoonId/cijfers/laatste?top=:top&skip=:skip",{persoonId:"@persoonId",top:"@top",skip:"@skip"},{execute:{method:"GET"}}).execute({persoonId:e,top:t,skip:n}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t){return this.$resource(this.apiHost+"api/personen/:persoonId/cijfers/gerelateerdekolommen/:cijferKolomId",{persoonId:"@persoonId",cijferKolomId:"@cijferKolomId"},{execute:{method:"GET"}}).execute({persoonId:e,cijferKolomId:t}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t,n,i){return this.$resource(this.apiHost+"api/personen/:persoonId/aanmeldingen/:aanmeldingId/cijfers",{persoonId:"@persoonId",aanmeldingId:"@aanmeldingId",datumVan:"@datumVan",vakken:"@vakken"},{execute:{method:"GET"}}).execute({persoonId:e,aanmeldingId:t,datumVan:n,vakken:i}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return l});var r,o=n(184),a=n(0),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(t){function n(e){var n=t.call(this)||this;return n.$filter=e,n}return s(n,t),n.prototype.createCijfersTabel=function(t,n){var i=this,r={periodes:[],kolommen:[],vakken:[],emptyData:""},o=t;return e.each(o,function(t){e.extend(t,{isGemiddelde:i.isGemiddeldeKolom(t)}),i.clearCijferStrForOntheffing(t),i.clearCijferStrForVrijstelling(t)}),r.periodes=this.getPeriodes(o),r.kolommen=this.getKolommen(o,r.periodes),r.vakken=this.getVakken(o,r.kolommen,n,r.periodes,function(e,t,n,r){return i.getCijfers(e,t,n,r)}),r},n.prototype.getCijfers=function(t,n,r,o){var s=this,l=this.$filter("orderBy"),d=[],c=e.filter(t,function(e){return e.Vak.Id===n.id});return c.length?(d=e.map(r,function(t){var r=e.filter(c,function(e){return parseInt(e.CijferKolom.KolomNummer,a.b)===parseInt(t.KolomNummer,a.b)});if(r.length)return i.copy(e.first(r));var o=i.copy(s.defaultCijfer);return o.CijferPeriode=i.copy(s.defaultPeriode),o.CijferPeriode.VolgNummer=t.cijferPeriodeVolgNr,o.CijferKolom={Id:0,IsDocentKolom:!1,IsHerkansingKolom:!1,KolomKop:t.KolomKop,KolomNaam:n.afkorting+t.KolomNummer,KolomNummer:t.KolomNummer,KolomVolgNummer:t.KolomVolgNummer,KolomOmschrijving:t.KolomOmschrijving,KolomSoort:t.KolomSoort,HeeftOnderliggendeKolommen:t.HeeftOnderliggendeKolommen,IsPTAKolom:!1},o}),d=l(e.map(d,function(t){var n=i.copy(t);if(Object(a.w)(t.CijferKolom)||(n.CijferKolom.KolomNummer=+t.CijferKolom.KolomNummer,n.CijferKolom.KolomVolgNummer=+t.CijferKolom.KolomVolgNummer),!Object(a.w)(t.CijferPeriode)){var r=e.filter(o,function(e){return e.Naam===t.CijferPeriode.Naam});n.CijferPeriode.VolgNummer=0!==r.length?+r[0].VolgNummer:+n.CijferPeriode.VolgNummer}return n}),["CijferPeriode.VolgNummer","CijferKolom.KolomVolgNummer"])):d},n.prototype.getKolommen=function(t,n){var r=this.$filter("orderBy"),o=[];e.filter(t,function(e){return null!==e.CijferPeriode}).forEach(function(e){if(!o.some(function(t){return t.KolomNummer===e.CijferKolom.KolomNummer})){var t={cijferPeriodeId:e.CijferPeriode.Id,cijferPeriodeVolgNr:e.CijferPeriode.VolgNummer,cijferPeriodeNaam:e.CijferPeriode.Naam,KolomKop:e.CijferKolom.KolomKop,Id:0,IsDocentKolom:!1,IsPTAKolom:!1,IsHerkansingKolom:!1,KolomNaam:"",KolomNummer:e.CijferKolom.KolomNummer,KolomVolgNummer:e.CijferKolom.KolomVolgNummer,KolomOmschrijving:"",KolomSoort:null,HeeftOnderliggendeKolommen:!1};o.push(t)}});var a=e.map(o,function(t){var r=i.copy(t);r.KolomNummer=+t.KolomNummer;var o=e.filter(n,function(e){return e.Naam===t.cijferPeriodeNaam});return r.cijferPeriodeVolgNr=0!==o.length?+o[0].VolgNummer:+r.cijferPeriodeVolgNr,r});return o=r(a,["cijferPeriodeVolgNr","KolomVolgNummer"])},n.prototype.getPeriodes=function(t){var n=this.$filter("orderBy"),r=[],o=e.filter(t,function(e){return null!==e.CijferPeriode});return o.forEach(function(e){var t=i.copy(e.CijferPeriode);r.some(function(t){return t.Naam===e.CijferPeriode.Naam})||r.push(t)}),r.forEach(function(t){var n=o.filter(function(e){if(e.CijferPeriode.Naam===t.Naam)return!0}).map(function(e){return e.CijferKolom}),i=e.countBy(n,"KolomNummer");t.kolomCount=Object.keys(i).length}),r=n(r,"Volg",!0)},n.$inject=["$filter",function(e){return new n(e)}],n}(o.a)}).call(this,n(3),n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return r});var r=function(){function t(){this.defaultPeriode={Id:0,Naam:"-",Omschrijving:"-",Start:null,Einde:null,VolgNummer:0,kolomCount:0},this.defaultCijfer={Inhalen:!1,Vrijstelling:!1,TeltMee:!0,CijferKolomIdEloOpdracht:0,Groep:"",Docent:"",VakOntheffing:!1,VakVrijstelling:!1,CijferId:0,CijferStr:"",DatumIngevoerd:null,IngevoerdDoor:"-",IsVoldoende:!0,PersoonId:0,TextId:0,CijferKolom:null,CijferPeriode:null,Vak:null,selected:!1}}return t.prototype.getVakken=function(t,n,r,o,a){var s=[];return e.each(r,function(e){var r=i.copy(e);r.omschrijving=e.omschrijving||e.afkorting;var l=a(t,r,n,o);r.cijfers=l,0!==r.cijfers.length&&s.push(r)}),s},t.prototype.clearCijferStrForOntheffing=function(t){t.VakOntheffing&&(t.CijferStr="",e.extend(t,{isGemiddelde:!1}))},t.prototype.clearCijferStrForVrijstelling=function(t){t.VakVrijstelling&&(t.CijferStr="",e.extend(t,{isGemiddelde:!1}))},t.prototype.isGemiddeldeKolom=function(e){switch(e.CijferKolom.KolomSoort){case Contracts.Cijfers.Enums.KolomSoort.Gemiddelde:case Contracts.Cijfers.Enums.KolomSoort.Maximum:case Contracts.Cijfers.Enums.KolomSoort.Formule:case Contracts.Cijfers.Enums.KolomSoort.Minimum:case Contracts.Cijfers.Enums.KolomSoort.Som:case Contracts.Cijfers.Enums.KolomSoort.Tel:case Contracts.Cijfers.Enums.KolomSoort.Eindcijfer:case Contracts.Cijfers.Enums.KolomSoort.Tekortpunten:return!0;default:return!(!(e.CijferKolom.IsDocentKolom||e.CijferKolom.IsHerkansingKolom||e.CijferKolom.IsPTAKolom)||!e.CijferKolom.HeeftOnderliggendeKolommen)}},t}()}).call(this,n(3),n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(e,t){this.$filter=e,this.magisterLocale=t}return t.prototype.getDefaultGemiddeldeCijfers=function(){return{kolommen:[],vakken:[],emptyData:this.magisterLocale.CijferStrings.GEEN_INFORMATIE}},t.prototype.createGemiddeldeCijfersTabel=function(t){var n={kolommen:[],vakken:[],emptyData:""},r=Object(i.t)(t)?e.each(t,function(e){null===e.CijferStr&&(e.CijferStr="-")}):[];return n.kolommen=this.getKolommen(r),n.vakken=this.getVakken(r,n.kolommen),n},t.prototype.getCijfers=function(e,t,n){var i=this.$filter("orderBy"),r=[];return n.forEach(function(n){var i;e.forEach(function(e){e.CijferKolom&&n&&e.CijferKolom.KolomNummer===n.KolomNummer&&e.Vak.Afkorting===t.afkorting?i=e:null===e.CijferStr&&(i=e)}),r.push(i)}),r=i(r,"cijferKolomNaam")},t.prototype.getVakken=function(e,t){var n=this,i=[];return e.forEach(function(r){var o={afkorting:r.Vak.Afkorting,id:r.Vak.Id,omschrijving:r.Vak.Omschrijving,volgnr:r.Vak.Volgnr},a=n.getCijfers(e,o,t);i.some(function(e){return e.afkorting===r.Vak.Afkorting})||(o.cijfers=a,i.push(o))}),i},t.prototype.getKolommen=function(e){var t=this,n=this.$filter("orderBy"),i=[];return e.forEach(function(e){if(e.CijferKolom){var t=e.CijferKolom;i.some(function(n){return n?n.KolomNummer===t.KolomNummer:"-"===e.CijferStr})||i.push(t)}}),i=n(i=i.filter(function(e){return t.isKolomFirstInActivePeriode(i,e)||t.isColumnUnique(i,e)}),"cijferKolomNaam")},t.prototype.isKolomFirstInActivePeriode=function(e,t){return e.some(function(e){return t&&e&&t.cijferPeriodeId===e.cijferPeriodeId&&+t.KolomNummer<+e.KolomNummer})},t.prototype.isColumnUnique=function(e,t){return e.filter(function(e){return t&&e&&t.cijferPeriodeId===e.cijferPeriodeId}).length<=1},t.prototype.toIdsString=function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(e[r][t]);return i.join(n)},t.FACTORY_NAME="gemiddeldeCijfersAdapter",t.$inject=["$filter","magisterLocale",function(e,n){return new t(e,n)}],t}()}).call(this,n(3))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(e,t){this.$filter=e,this.magisterLocale=t}return t.prototype.getDefaultLaatsteCijfers=function(){return{weekCijfers:[],vandaagCijfers:[],laatsteCijfer:{waarde:"-",vak:{omschrijving:this.magisterLocale.CijferStrings.GEEN_CIJFERS}}}},t.prototype.createLaatsteCijfers=function(t){var n=this.$filter("orderBy"),r=Object(i.w)(t.items)?[]:t.items,o=e().startOf("day").subtract(6,"days"),a=e().endOf("day");r=n(r,"ingevoerdOp",!0)||[];var s=this.getCijfersForPeriod(r,"ingevoerdOp",o,a),l=e().startOf("day"),d=e().endOf("day");return{weekCijfers:s,vandaagCijfers:this.getCijfersForPeriod(s,"ingevoerdOp",l,d),laatsteCijfer:s[0]||{waarde:"-",vak:{omschrijving:this.magisterLocale.CijferStrings.GEEN_CIJFERS}}}},t.prototype.getCijfersForPeriod=function(t,n,i,r){var o=this,a=i,s=r,l=n;return t.filter(function(t,n){var i=e(o.toCrossBrowserDateString(t[l]));return i>a&&i<s})||[]},t.prototype.toCrossBrowserDateString=function(e){return Object(i.w)(e)?"":e.replace("0000Z","Z")},t.prototype.toIdsString=function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(e[r][t]);return i.join(n)},t.$inject=["$filter","magisterLocale",function(e,n){return new t(e,n)}],t}()}).call(this,n(15))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=function(){function t(){}return t.prototype.$onInit=function(){},t.prototype.$onChanges=function(t){if(t.items.isFirstChange){var n=new Date,r=e.find(this.items,function(e){return e.begin&&e.einde?e.begin<n&&n<e.einde:null===e.begin&&null!==e.einde?n<e.einde:null!==e.begin&&null===e.einde&&e.einde<n});i.isUndefined(r)&&(r=e.first(this.items)),i.isUndefined(r)||(this.selectedItem=r,this.onSelect({aanmelding:this.selectedItem}))}},t.prototype.onSelectItem=function(){this.onSelect({aanmelding:this.selectedItem})},t.$inject=[],t}(),o={template:n(188),controller:r,bindings:{items:"<",onSelect:"&"}}}).call(this,n(3),n(1))},function(e,t){e.exports='<div class="widget">\r\n    <div class="block" ng-class="{\'fold\': fold}">\r\n        <h3 ng-click="fold =!fold" ng-init="title=\'Filter\'"><span ng-class="{\'icon-up-arrow\': !fold, \'icon-down-arrow\': fold}"></span><b>Toon selectie</b></h3>\r\n        <div class="content">\r\n            <form>\r\n                <div>\r\n                    <div class="fancy-select">\r\n                        <select id="select-aanmelding"\r\n                            class="select" \r\n                            kendo-drop-down-list\r\n                            k-data-source="$ctrl.items" \r\n                            k-ng-model="$ctrl.selectedItem"\r\n                            k-on-change="$ctrl.onSelectItem()"\r\n                            k-options="{dataTextField: \'omschrijving\', dataValueField: \'id\'}"\r\n                            k-value-primitive="false"></select>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=function(){function t(){}return t.prototype.onInUitklappen=function(e){e.ingeklapt=!e.ingeklapt;var t=!e.ingeklapt;this.setZichtbaar(e.kolomId,t)},t.prototype.setZichtbaar=function(t,n){var i=this,r=e.where(this.items,{parentId:t});e.each(r,function(e){e.zichtbaar=n,e.ingeklapt||i.setZichtbaar(e.kolomId,n)})},t.prototype.iconContent=function(e){return e.heeftOnderliggende?e.ingeklapt?"+":"-":"x"},t}(),r={template:n(190),controller:i,bindings:{items:"<"}}}).call(this,n(3))},function(e,t){e.exports='<style>\r\n    span.transparant {\r\n        color: transparent !important;\r\n        background-color: transparent !important;\r\n    }\r\n\r\n    table.table-grid-layout span.blockcollapse {\r\n        margin-top: 13px;\r\n    }\r\n\r\n    table.table-grid-layout.overview td.center {\r\n        text-align: center;\r\n    }\r\n\r\n    table.table-grid-layout.overview th.center {\r\n        text-align: center;\r\n    }\r\n    \r\n    span.blockcollapse {\r\n        display: block;\r\n        float: left;\r\n        margin: 2px 8px 0 0;\r\n        padding: 0 2px !important;\r\n        min-width: 13px;\r\n        height: 14px;\r\n        line-height: 12px;\r\n        text-align: center;\r\n        color: #ffffff;\r\n        background-color: #333333;\r\n        border-radius: 3px;\r\n        font-family: tahoma, sans-serif;\r\n        font-weight: bold;\r\n        font-size: 11px;\r\n    }\r\n\r\n</style>\r\n<table class="table-grid-layout overview">\r\n    <colgroup>\r\n        <col width="2" />\r\n        <col width="2" align="center" />\r\n        <col width="1" align="center" />\r\n        <col width="1" align="center" />\r\n        <col width="1" align="center" />\r\n        <col width="1" align="center" />\r\n        <col width="1" align="center" />\r\n        <col width="1" align="center" />\r\n    </colgroup>\r\n    <thead>\r\n        <tr>\r\n            <th><strong>Toets</strong></th>\r\n            <th><strong>Omschrijving</strong></th>\r\n            <th class="center"><strong>Resultaat</strong></th>\r\n            <th class="center"><strong>SP</strong></th>\r\n            <th class="center"><strong>Behaald</strong></th>\r\n            <th class="center"><strong>Ingevoerd</strong></th>\r\n            <th class="center"><strong>Weging</strong></th>\r\n            <th class="center"><strong>Toetsvorm</strong></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr ng-repeat="item in $ctrl.items| filter:{zichtbaar:true}">\r\n            <td>\r\n                <div ng-style="{\'padding-left\': item.diepte*10+\'px\'}">\r\n                    <a ng-click="$ctrl.onInUitklappen(item)"><span class="blockcollapse small" ng-class="{transparant: !item.heeftOnderliggende}" ng-bind="$ctrl.iconContent(item)"></span></a>\r\n                    <span ng-bind="::item.kolomnaam"></span>\r\n                </div>\r\n            </td>\r\n            <td ng-bind="::item.omschrijving"></td>\r\n            <td class="center" ng-bind="::item.waarde" ng-class="{\'teltnietmee\': item.teltMee === false}"></td>\r\n            <td class="center" ng-bind="::item.studiepunten"></td>\r\n            <td class="center">{{::item.behaaldOp | date:"dd-MM-yyyy"}}</td>\r\n            <td class="center">{{::item.ingevoerdOp | date:"dd-MM-yyyy"}}</td>\r\n            <td class="center" ng-bind="::item.weegfactor"></td>\r\n            <td class="center" ng-bind="::item.toetsvorm"></td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n\r\n<div data-sm-no-items="sm-no-items" data-override="$ctrl.items.length"></div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$http=e}return e.prototype.getToetsboom=function(e){return this.$http.get(e).then(function(e){return e.data})},e.$inject=["$http",e],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(102),r=n(0),o=n(88),a=function(){function e(e,t,n,i,r,o,a,s,l){this.$q=e,this.$filter=t,this.vakkenService=n,this.collectionResource=i,this.hateOsResource=r,this.api10CijferperiodesResource=o,this.api10CijfersOverzichtResource=a,this.api10CijfersLaatstBehaaldeResultatenResource=s,this.currentUser=l,this.cijferLinks=[{rel:"aanmeldingCijfers",href:"/api/aanmeldingen/:aanmeldingId/cijfers"},{rel:"klasGroepCijfers",href:"/api/klasgroep/:klasGroepId/cijfers"}]}return e.prototype.getLaatstBehaaldeResultaten=function(e,t,n){return this.api10CijfersLaatstBehaaldeResultatenResource.get(e,t,n).then(function(e){return e})},e.prototype.getCijfersByKlasGroepId=function(e,t,n,i){return this.$q.defer().promise},e.prototype.getCijfersByAanmeldingId=function(e,t,n,i,r){var a=this,l=this.$q.defer(),d=!1,c=!1,u=!1;switch(r){case o.c.ActievePeriode:d=!0;break;case o.c.BerekendeKolommen:c=!0;break;case o.c.PtaKolommen:u=!0;break;case o.c.Alle:}var h=this.$filter("date")(t,"yyyy-MM-dd");return new Date(t)>new Date&&(h=null),this.api10CijfersOverzichtResource.get(this.currentUser.relatedPersons.current.id,e,d,c,u,h).then(function(t){a.vakkenService.getVakken(a.currentUser.relatedPersons.current.id.toString(),e.toString()).then(function(n){var i=s.shapeApi10CollectionResult(t,n,e,a.currentUser.relatedPersons.current.id);l.resolve(i)})}),l.promise},e.prototype.getCijferKolomInfo=function(e){var t=this.$q.defer();return this.hateOsResource.get(e).then(function(n){e.extraInfo=n,t.resolve(e)}),t.promise},e.prototype.getEloOpdracht=function(e){var t=this.$q.defer();return this.hateOsResource.get(e,"eloopdracht").then(function(e){t.resolve(e)}),t.promise},e.prototype.getGerelateerdeKolommen=function(e){var t=this.$q.defer();return this.hateOsResource.get(e,"gerelateerdeKolommen").then(function(e){t.resolve(e.Items)}),t.promise},e.prototype.getCijferperiodes=function(e){var t=this.$q.defer();return this.api10CijferperiodesResource.get(this.currentUser.relatedPersons.current.id,e).then(function(e){t.resolve(e.Items)}),t.promise},e.$inject=["$q","$filter","vakkenService","collectionResource","hateOsResource","cijfersPeriodeResource","cijfersOverzichtResource","cijfersLaatstBehaaldeResultatenResource","currentUser",e],e}(),s=function(){function t(){}return t.shapeApi10CollectionResult=function(n,i,r,o){return e.map(n.Items,function(e){return t.shapeApi10CijferDtoToCijfer(e,i,r,o)})},t.shapeApi10CijferDtoToCijfer=function(e,n,i,o){var a="string"==typeof e.DatumIngevoerd?new Date(e.DatumIngevoerd):e.DatumIngevoerd;return{waarde:e.CijferStr,isVoldoende:e.IsVoldoende,isVrijstelling:e.Vrijstelling,moetInhalen:e.Inhalen,isHerkansingKolom:e.CijferKolom.IsHerkansingKolom,isDocentKolom:e.CijferKolom.IsDocentKolom,heeftOnderliggendeKolommen:e.CijferKolom.HeeftOnderliggendeKolommen,teltMee:e.TeltMee,isEloOpdracht:!Object(r.w)(e.CijferKolomIdEloOpdracht)&&e.CijferKolomIdEloOpdracht>0,kolom:t.shapeApi10KolomDtoToKolom(e.CijferKolom,i,o),vak:t.shapeApi10VakDtoToVak(e,n),periode:t.shapeApi10PeriodeDtoToVakPeriode(e.CijferPeriode),ingevoerdOp:a,ingevoerdDoor:{code:e.IngevoerdDoor,links:[]},links:[{Rel:"eloopdracht",Href:"/api/personen/"+o.toString()+"/opdrachten/"+e.CijferKolomIdEloOpdracht.toString()}]}},t.shapeApi10VakDtoToVak=function(t,n){var i=e.find(n,function(e){return e.afkorting===t.Vak.Afkorting}),r="string"==typeof i.begindatum?new Date(i.begindatum):i.begindatum,o="string"==typeof i.einddatum?new Date(i.einddatum):i.einddatum;return{code:i.afkorting,omschrijving:i.omschrijving,volgnummer:i.volgnr,heeftOntheffing:i.heeftOntheffing,isVrijstelling:i.vrijstelling,isHogerNiveau:i.hogerNiveau,niveau:i.niveau,begindatum:r,einddatum:o,links:[]}},t.shapeApi10PeriodeDtoToVakPeriode=function(e){if(!Object(r.w)(e))return{code:e.Naam,volgnummer:e.VolgNummer,links:[]}},t.shapeApi10KolomDtoToKolom=function(e,n,r){var o=t.isApi10GemiddeldeKolom(e),a=e.KolomSoort,s=i.b.Normaal;return o&&(e.IsDocentKolom?s=i.b.Docent:e.IsHerkansingKolom&&(s=i.b.Herkansing)),{weergaveTitel:e.KolomKop,nummer:parseInt(e.KolomNummer,10),volgnummer:parseInt(e.KolomVolgNummer,10),soort:a,type:s,heeftOnderliggendeKolommen:e.HeeftOnderliggendeKolommen,isHerkansingKolom:e.IsHerkansingKolom,isGemiddelde:o,links:[{Rel:"self",Href:"/api/personen/"+r.toString()+"/aanmeldingen/"+n.toString()+"/cijfers/extracijferkolominfo/"+e.Id},{Rel:"gerelateerdeKolommen",Href:"/api/personen/"+r.toString()+"/cijfers/gerelateerdekolommen/"+e.Id.toString()}]}},t.isApi10GemiddeldeKolom=function(e){if(!Object(r.w)(e.KolomSoort))switch(e.KolomSoort){case Contracts.Cijfers.Enums.KolomSoort.Gemiddelde:case Contracts.Cijfers.Enums.KolomSoort.Maximum:case Contracts.Cijfers.Enums.KolomSoort.Formule:case Contracts.Cijfers.Enums.KolomSoort.Minimum:case Contracts.Cijfers.Enums.KolomSoort.Som:case Contracts.Cijfers.Enums.KolomSoort.Tel:case Contracts.Cijfers.Enums.KolomSoort.Eindcijfer:case Contracts.Cijfers.Enums.KolomSoort.Tekortpunten:return!0}return(e.IsDocentKolom||e.IsHerkansingKolom||e.IsPTAKolom)&&e.HeeftOnderliggendeKolommen},t}()}).call(this,n(3))},function(e,t){e.exports='<div id="cijfers-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    \x3c!--<div data-sm-menu="menu"></div>--\x3e\r\n    <div class="head-bar">\r\n        <h1>Cijferoverzicht</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container-cijfers" data-sm-scrollbar="scrollbar" data-sm-loading-indicator="{domain: \'aanmeldingen;cijfers\', content: \'scheduler\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-grades\', overlay: true}">\r\n            <table class="grades-table-overview" data-ng-show="cijferTable.vakken.length" cellspacing="0" cellpadding="0" data-ng-class="{groot: rijHoogteGroot, normaal: rijHoogteNormaal, klein: rijHoogteKlein}">\r\n                <thead>\r\n                    <tr class="head">\r\n                        <th>&nbsp;</th>\r\n                        <th colspan="{{periode.kolomCount}}" data-ng-repeat="periode in gefilterdePeriodes" data-sm-notify-complete="aanmeldingen">{{periode.Naam}}</th>\r\n                        <th class="fill"></th>\r\n                    </tr>\r\n                    <tr class="rotate">\r\n                        <th class="sort-vak" data-ng-class="{\'sort-desc\':sorting.key == \'Vak\' && sorting.desc, \'sort-asc\': sorting.key == \'Vak\' && !sorting.desc}" data-ng-click="reverse=!reverse; sortVakken(reverse)"><i>Vak</i></th>\r\n                        <th data-ng-class="{\'sort-desc\':sorting.key == kolom.KolomNummer && sorting.desc, \'sort-asc\': sorting.key == kolom.KolomNummer && !sorting.desc }" data-ng-repeat="kolom in cijferTable.kolommen" data-ng-click="desc=!desc; sortCijfers(kolom, desc)" data-sm-notify-complete="aanmeldingen"><i><strong data-ng-bind="getKolomHeading(kolom)"></strong></i></th>\r\n                        <th class="fill"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr data-ng-repeat="vak in cijferTable.vakken" sm-notify-complete="complete">\r\n                        <td title="{{vak.afkorting}}" data-ng-bind-template="{{vak.afkorting |concatenateVakOmschrHnivoDispVrij: vak.hogerNiveau: vak.heeftOntheffing: vak.vrijstelling }}"></td>\r\n                        <td data-ng-class="{insufficient: !cijfer.IsVoldoende && !cijfer.Inhalen && !cijfer.Vrijstelling, selected: cijfer.selected, cijferCell: true, eloopdracht: cijfer.CijferKolomIdEloOpdracht != 0, gemiddeldecolumn: cijfer.isGemiddelde, teltnietmeecolumn: !cijfer.TeltMee || cijfer.Vrijstelling, bijzonderecolumn: cijfer.Inhalen}" data-ng-repeat="cijfer in vak.cijfers" data-ng-click="selectCijfer(cijfer)" data-sm-notify-complete="aanmeldingen">{{+cijfer.CijferStr}}</td>\r\n                        <td data-ng-if="$first" rowspan="{{cijferTable.vakken.length}}" class="first"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <div data-sm-no-items="sm-no-items" data-items="cijferTable.kolommen"></div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Details" id="idDetails">\r\n            \x3c!--sheet-0--\x3e\r\n            <div data-sm-cijfer-informatie></div>\r\n        </sm-tab>\r\n        <sm-tab title="Berekening" id="idBerekening">\r\n            <div data-sm-berekend-gemiddelde></div>\r\n        </sm-tab>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-sm-weergave-filter-oud></div>\r\n            <div data-sm-weergave-instellingen-oud></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t){e.exports='<style>\r\n    td.onvoldoende {\r\n        color: #c3000c !important;\r\n    }\r\n\r\n    th {\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n    }\r\n\r\n    td.moetinhalen {\r\n        background-color: #FFEEE7 !important;\r\n    }\r\n\r\n    td.vrijstelling {\r\n        color: #999999 !important;\r\n        background-color: #ebebeb !important;\r\n        box-shadow: inset 0 2px 3px -2px rgba(0, 0, 0, 0.35);\r\n    }\r\n    td.center ,\r\n    tr.center{\r\n        text-align: center !important;\r\n    }\r\n    table.table-grid-layout td + td {\r\n        padding-left: 9px !important;\r\n    }\r\n</style>\r\n<div id="cijfers-laatst-behaalde-resultaten-container" class="container sidecolumn" data-on-keydown="keyup(event)" tabindex="0" data-ng-class="{\'aside-toggle\': !ctrl.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Laatste cijfers</h1>\r\n        <div><a title="" class="text-button" data-ng-if="ctrl.heeftVO" data-ng-click="ctrl.onUitgebreideWeergave();" id="cijferslaatstbehaalderesultaten-uitgebreideweergave">\r\n            <span ng-bind="::ctrl.heeftBVE ? \'Voortgangscijfers\' : \'Uitgebreide weergave\'"></span></a></div>\r\n        <div><a title="" class="text-button" data-ng-if="ctrl.heeftBVE" data-ng-click="ctrl.onToetsboom();" id="toetsboom">Toetsbomen</a></div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container full-width" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false" data-sm-loading-indicator="{domain: \'cijfers\', content: \'scheduler\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-grades\', overlay: true}">\r\n            <div class="wide-widget">\r\n                <div class="table-block">\r\n                    <div class="content content-auto">\r\n                        <table class="data-overview table-grid-layout normaal">\r\n                            <colgroup>\r\n                                <col width="120" />\r\n                                <col width="100" />\r\n                                <col width="270" />\r\n                                <col width="90" />\r\n                                <col width="90" />\r\n                                <col width="100%" />\r\n                            </colgroup>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th class="center">Vak</th>\r\n                                    <th class="center" ng-if="ctrl.heeftVO">Datum invoer</th>\r\n                                    <th class="center" ng-if="ctrl.heeftBVE && !ctrl.heeftVO">Toets behaald</th>\r\n                                    <th>Omschrijving</th>\r\n                                    <th class="center">Resultaat</th>\r\n                                    <th class="center">Weegfactor</th>\r\n                                    <th>&nbsp;</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr data-ng-repeat="cijfer in ctrl.cijfers" data-ng-click="ctrl.selectCijfer(cijfer)" data-ng-class="{\'selected no-dots\': cijfer === ctrl.selectedCijfer}" data-sm-notify-complete="leermiddelen">\r\n                                    <td class="center" data-ng-bind="cijfer.vak.omschrijving"></td>\r\n                                    <td class="center" ng-if="ctrl.heeftVO" data-ng-bind="cijfer.ingevoerdOp | date : \'dd-MM-yyyy\'"></td>\r\n                                    <td class="center" ng-if="ctrl.heeftBVE && !ctrl.heeftVO" data-ng-bind="cijfer.behaaldOp | date : \'dd-MM-yyyy\'"></td>\r\n                                    <td data-ng-bind="cijfer.omschrijving"></td>\r\n                                    <td class="center" data-ng-bind="cijfer.waarde" ng-class="{\'onvoldoende\': cijfer.isVoldoende === false, \'teltnietmee\': cijfer.teltMee === false, \'moetinhalen\': cijfer.moetInhalen, \'vrijstelling\': cijfer.heeftVrijstelling}"></td>\r\n                                    <td class="center" data-ng-bind-template="{{cijfer.weegfactor}}x"></td>\r\n                                    <td>&nbsp;</td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div data-sm-no-items="sm-no-items" data-items="ctrl.cijfers"></div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Details" id="idDetails">\r\n            <div class="widget">\r\n                <div class="block">\r\n                    <span>\r\n                        <h3><b>Toetsinformatie</b></h3>\r\n                    </span>\r\n                    <div class="content">\r\n                        <dl class="list-dl">\r\n                            <dt>Resultaat</dt>\r\n                            <dd class="content-more"  data-ng-bind="ctrl.selectedCijfer.waarde || \'-\'"></dd>\r\n                            <dt>Weegfactor</dt>\r\n                            <dd data-ng-bind-template="{{ctrl.selectedCijfer === undefined ? \'-\' : ctrl.selectedCijfer.weegfactor + \'x\'}}"></dd>\r\n                            <dt>Omschrijving</dt>\r\n                            <dd class="content-more" title="" data-ng-bind="ctrl.selectedCijfer.omschrijving || \'-\'"></dd>\r\n                            <dt>Vak</dt>\r\n                            <dd data-ng-bind="ctrl.selectedCijfer.vak.omschrijving || \'-\'"></dd>\r\n                            <dt ng-if="ctrl.heeftVO">Cijferinvoer</dt>\r\n                            <dd ng-if="ctrl.heeftVO" data-ng-bind="(ctrl.selectedCijfer.ingevoerdOp | date:\'dd-MM-yyyy\') || \'-\'"></dd>\r\n                            <dt ng-if="ctrl.heeftBVE && !ctrl.heeftVO">Toets behaald</dt>\r\n                            <dd ng-if="ctrl.heeftBVE && !ctrl.heeftVO" data-ng-bind="(ctrl.selectedCijfer.behaaldOp | date:\'dd-MM-yyyy\') || \'-\'"></dd>\r\n                        </dl>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t){e.exports='<div id="cijfers-container" class="container sidecolumn"\r\n    data-ng-class="{\'aside-toggle\': !ctrl.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Cijferoverzicht</h1>\r\n        <div><a href="" class="text-button" ng-click="ctrl.onLaatsteCijfersClick()">Laatste cijfers</a></div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container-cijfers" data-sm-scrollbar="scrollbar"\r\n            ng-class="{\'collapsed-menu\': !$root.menuExpanded}"\r\n            data-smuit-loading-indicator="{domain: \'aanmeldingen;cijfers\', content: \'scheduler\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-grades\', overlay: true}">\r\n            <sm-cijfersoverzicht-grid set-has-data="ctrl.setHasData(hasData)" ng-show="ctrl.hasData">\r\n            </sm-cijfersoverzicht-grid>\r\n            <div data-sm-no-items="sm-no-items" data-override="ctrl.hasData"></div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Details" id="idDetails">\r\n            <div data-sm-cijfers-detail></div>\r\n        </sm-tab>\r\n        <sm-tab title="Berekening" id="idBerekening">\r\n            <div data-sm-berekening></div>\r\n        </sm-tab>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-sm-weergave-filter></div>\r\n            <div data-sm-weergave-instellingen></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t){e.exports='<div id="toetsboom-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !ctrl.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Toetsboom</h1>\r\n        <div><a href="" class="text-button" ng-click="ctrl.onLaatsteCijfersClick()">Laatste cijfers</a></div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="page-nav">\r\n            <ul class="tabs">\r\n                <li id="tab-toetsboom" ng-click="ctrl.onTabToetsboom()"><a ng-class="{\'active\': ctrl.activeTab === 1, \'disabled\': !ctrl.toetsBoomTab}">Toetsboom</a></li>\r\n                <li id="tab-examenboom" ng-click="ctrl.onTabExamenboom()"><a ng-class="{\'active\': ctrl.activeTab === 2, \'disabled\': !ctrl.examenBoomTab }">Examenboom</a></li>\r\n            </ul>\r\n        </div>\r\n        <div class="content-container" ng-if="ctrl.activeTab === 1" data-sm-loading-indicator="{domain: \'cijfers\', content: \'scheduler\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-grades\', overlay: true}">\r\n            <sm-toetsboom-grid items="ctrl.toetsboom"></sm-toetsboom-grid>\r\n            <div sm-no-items="sm-no-items" override="ctrl.toetsBoomTab"></div>\r\n        </div>\r\n        <div class="content-container" ng-if="ctrl.activeTab === 2" data-sm-loading-indicator="{domain: \'cijfers\', content: \'scheduler\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-grades\', overlay: true}">\r\n            <sm-toetsboom-grid items="ctrl.examenboom"></sm-toetsboom-grid>\r\n            <div sm-no-items="sm-no-items" override="ctrl.examenBoomTab"></div>\r\n        </div>\r\n        <div data-sm-no-items="sm-no-items" data-items="ctrl.toetsboom"></div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <sm-schooljaar-selectie items="ctrl.aanmeldingen" on-select="ctrl.onAanmeldingSelected(aanmelding)"></sm-schooljaar-selectie>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=e.module("Magister.Activiteiten",[]),r={module:["$ocLazyLoad",function(e){return n.e(1).then(n.bind(null,493)).then(function(t){var n=t.activiteitenAMD;return e.load(n)})}]};i.config(["$routeProvider",function(e){e.when("/elo/activiteiten",{pageTitle:"Activiteiten",controller:"activiteitenOverzichtController",resolve:r,template:n(198)}).when("/elo/activiteiten/:activiteitId",{pageTitle:"Activiteiten",controller:"activiteitenDetailController",resolve:r,template:n(199)})}])}).call(this,n(1))},function(e,t){e.exports='<div id="activiteiten-container" class="container" tabindex="0">\r\n    <div class="head-bar">\r\n        <h1>Inschrijven</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container" data-sm-loading-indicator="{ domain: \'activiteiten\', hideEvent: \'GRID_LOADED\', className: \'icon-tablet-right-arrow\', overlay: true }">\r\n            <sm-grid data-items="vm.activiteitenGridRows" data-on-row-click="vm.onRowClick(item, index)" \r\n                     data-config="{ enableSorting: true, rowTemplate: \'{{vm.ACTIVITEITEN_ROW_TEMPLATE}}\', enableDoubleClick: false }"\r\n                     data-domain="activiteiten"\r\n                     data-column-definitions="vm.gridColumnDefinitions"></sm-grid>\r\n            <div data-sm-no-items="sm-no-items" data-items="vm.activiteitenGridRows"></div>\r\n        </div>\r\n    </section>\r\n</div>'},function(e,t){e.exports='<div id="activiteit-detail-container" class="container">\r\n    <div class="head-bar activiteit-details">\r\n        <h1>\r\n            <a ng-click="vm.onTerugClick()">\r\n                <i class="far fa-chevron-circle-left"></i>\r\n            </a>\r\n            <span data-ng-bind="vm.activiteit.Titel" class="heading"></span>\r\n        </h1>\r\n    </div>\r\n    <section class="main wide-widgets">\r\n        <div class="content-container widget-container" data-sm-loading-indicator="{ domain: \'activiteiten\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-tablet-right-arrow\', overlay: true }">\r\n            <div class="studiewijzer-onderdeel">\r\n                <sm-panel-widget panel-title="Informatie" panel-widget-classes="wide" panel-content-classes="content-auto">\r\n                    <table class="table-grid-layout data-overview activity-info">\r\n                        <colgroup>\r\n                            <col width="100%" />\r\n                            <col width="500" />\r\n                            <col width="200" />\r\n                        </colgroup>\r\n                        <tbody>\r\n                            <tr class="new multi-line">\r\n                                <td class="no-ellipsis" valign="top">\r\n                                    <span data-ng-bind-html="vm.activiteit.Details"></span>\r\n                                </td>\r\n                                <td valign="top">\r\n                                    <b>Inschrijvingsperiode</b><br />\r\n                                    <span data-ng-bind="vm.getInschrijfStartEnEinddatum()" />\r\n                                </td>\r\n                                <td valign="top" style="text-align:center" data-ng-class="{\'valid-activiteit\': vm.isActiviteitValid(), \'expired-activiteit\': vm.isActiviteitExpired()}">\r\n                                    <b>Inschrijvingen (min/max)</b><br />\r\n                                    <span data-ng-bind="vm.activiteit.AantalInschrijvingen | inschrijvingenCount: vm.activiteit.MinimumAantalInschrijvingenPerActiviteit: vm.activiteit.MaximumAantalInschrijvingenPerActiviteit"></span>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </sm-panel-widget>\r\n                </div>\r\n                <div class="studiewijzer-onderdeel" data-ng-repeat="onderdeel in vm.activiteitOnderdelen" data-sm-notify-complete="activiteiten">\r\n                    <sm-panel-widget panel-color="{{onderdeel.Kleurstelling}}" panel-title="{{onderdeel.Titel}}" panel-widget-classes="event-widget wide" panel-content-classes="content-auto">\r\n                        <table class="table-grid-layout activity-detail">\r\n                            <colgroup>\r\n                                <col width="100%" />\r\n                                <col width="450" />\r\n                            </colgroup>\r\n                            <tr class="multi-line" data-ng-if="onderdeel.IsOpInTeSchrijven">\r\n                                <td>\r\n                                    <div data-ng-click="vm.onActiviteitClick(onderdeel)">\r\n                                        <span class="check">\r\n                                            <input type="checkbox" data-ng-disabled="!vm.isInschrijvenMogelijk(onderdeel)" class="checkbox" name="IsIngeschreven" data-ng-model="onderdeel.IsIngeschreven">\r\n                                            <label for="IsIngeschreven" data-ng-if="onderdeel.IsIngeschreven && !onderdeel.IsVerplichtIngeschreven" class="ellipsis">\r\n                                                <span></span>\r\n                                                Ingeschreven.\r\n                                            </label>\r\n                                            <label for="IsIngeschreven" data-ng-if="onderdeel.IsIngeschreven && onderdeel.IsVerplichtIngeschreven" class="ellipsis">\r\n                                                <span></span>\r\n                                                Verplicht ingeschreven.\r\n                                            </label>\r\n                                            <label for="IsIngeschreven" data-ng-if="!onderdeel.IsIngeschreven" class="ellipsis">\r\n                                                <span></span>\r\n                                                Niet ingeschreven.\r\n                                            </label>\r\n                                        </span>\r\n                                    </div>\r\n                                </td>\r\n                                <td class="inactive">\r\n                                    <span><b>Beschikbare plaatsen:</b></span>\r\n                                    <span data-ng-bind="onderdeel.AantalPlaatsenBeschikbaar" data-ng-show="onderdeel.MaxAantalDeelnemers > 0"></span>\r\n                                    <span data-ng-show="onderdeel.MaxAantalDeelnemers == 0"><br />n.v.t.</span>\r\n                                </td>\r\n                            </tr>\r\n                            <tr class="multi-line">\r\n                                <td colspan="3" class="no-ellipsis">\r\n                                    <div data-ng-bind-html="onderdeel.Details" class="user-db-content"></div>\r\n                                    <ul data-ng-if="onderdeel.Bijlagen != undefined" class="multi-file-list">\r\n                                        <li data-ng-repeat="bijlage in onderdeel.Bijlagen">\r\n                                            <span class="{{bijlage | determineFileIcon}}"></span>\r\n                                            <a ng-click="vm.onOpenAttachment(bijlage, onderdeel)" data-ng-bind="bijlage.Naam"></a>\r\n                                        </li>\r\n                                    </ul>\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </sm-panel-widget>\r\n                </div>\r\n            </div>\r\n    </section>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(201),r=n(202),o=n(123),a=n(125),s=e.module("Magister.Bronnen",["Magister.Core"]);s.directive("smMultimediaDirective",i.a).directive("smBronnenToevoegen",r.a),s.service("bronnenService",o.a.$inject).service("utilitiesService",a.a.$inject),s.config(["$routeProvider",function(e){e.when("/elo/bronnen",{pageTitle:"Bronnen",controller:"bronnenOverzichtController",resolve:{module:["$ocLazyLoad",function(e){return n.e(5).then(n.bind(null,502)).then(function(t){var n=t.bronnenAMD;return e.load(n)})}]},template:n(203)})}])}).call(this,n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(89),r=n(0),o=n(8),a=function(){function t(e,t,n,i,r,o){var a=this;this.$scope=e,this.$sce=t,this.$timeout=n,this.applicationService=i,this.bronnenService=r,this.downloadTokenService=o,this.YOUTUBE_EMBEDDED_URL="https://www.youtube.com/embed/",this.$scope.$watch("selectedBron",function(e,t){return a.onSelectedBronChanged(e,t)}),this.$scope.getContentUri=function(){return a.getContentUri()}}return t.prototype.onSelectedBronChanged=function(t,n){var o=this;if(e.isDefined(t)&&t!==n)switch(this.bronnenService.resetBronContentUri(t),this.$scope.mediaType=this.bronnenService.getMediaType(t),this.$scope.mediaType){case i.a.Audio:this.$scope.downloadLink=t.Uri,this.$scope.videoSource="",this.downloadTokenService.getLocation(t.Uri).then(function(e){o.$scope.audioSource=e});break;case i.a.Video:this.$scope.audioSource="",this.$scope.downloadLink=t.Uri+"?download=true",this.downloadTokenService.getLocation(t.Uri).then(function(e){o.$scope.videoSource=e});break;case i.a.YouTube:this.$scope.audioSource="",this.$scope.videoSource="";var a=Object(r.g)(t.Uri,"v");if(Object(r.u)(a)){var s=t.Uri,l=t.Uri.indexOf("/v/");-1!==l&&(a=t.Uri.substr(l+3,t.Uri.length-l+3),s=this.YOUTUBE_EMBEDDED_URL+a)}else s=this.YOUTUBE_EMBEDDED_URL+a;this.$scope.youTubeUrl=this.$sce.trustAsResourceUrl(s+"?autoplay=1");break;case i.a.Anders:this.$scope.audioSource="",this.$scope.videoSource=""}},t.prototype.onVideoError=function(e,t){var n=this;e.src===e.baseURI||Object(r.p)(this.$scope.videoSource)||this.$timeout(function(){n.applicationService.showMessage("Video kan niet afgespeeld worden.",o.j.ERROR,o.f,"Fout bij afspelen")})},t.prototype.getContentUri=function(){return this.$scope.downloadLink},t.$inject=["$scope","$sce","$timeout","applicationService","bronnenService","downloadTokenService"],t}();function s(){return{template:n(121),scope:{selectedBron:"="},controller:a,link:function(e,t,n,i){var r=t.find(".smVideo"),o=r[0];r.on("error",function(e){return i.onVideoError(o,e)})}}}}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return d});var r=n(5),o=n(6),a=n(0),s=Contracts.Bronnen.Enums.BronType,l=function(){function t(e,t,n,i){var r=this;this.$scope=e,this.$cookieStore=t,this.bronnenService=n,this.currentUser=i,this.BRON_TYPE_MAP=255,this.IS_AANGEMELD_BIJ_KENNISNET_SESSIONCOOKIE_KEY="isAangemeldBijKennisNet",e.addSelectedBron=function(){r.addSelectedBron()},e.createHintElement=function(e){return r.createHintElement(e)},e.getBronnenUrl=function(e){r.getBronnenUrl(e)},e.navigationToParent=function(){return r.navigationToParent()},e.selectBron=function(e){r.selectBron(e)},e.selectItem=function(e){r.selectItem(e)},e.selectParent=function(){r.selectParent()},e.getContentUri=function(e){return r.getContentUri(e)},this.handleDragStart=function(e,t){return r.internalHandlehandleDragStart(e,t)},this.initialize()}return t.prototype.initialize=function(){this.currentUser.hasPrivilege(r.a.Bronnen,o.a.Read)&&this.getBronnen(),this.$scope.showAddBron=!0},t.prototype.createHintElement=function(t){var n=e.element(document.createElement(t.get(0).tagName));return n.html(t.html()),n.width(t.width()),n.height(t.height()),n.attr("id",t.attr("id")),n.attr("class",t.attr("class")),n.addClass("bron-drag-hint"),n},t.prototype.getBronnenUrl=function(e){var t=this,n=parseInt(Object(a.g)(e,"parentId"),a.b);this.$scope.$broadcast("SHOW_API_PROGRESS_INDICATOR","bronnen"),this.bronnenService.getBron(this.currentUser.person.id,n).then(function(e){t.$scope.bronnen=e,t.$scope.selectedBron=e,t.$scope.projectFolder=t.$scope.selectedBron,t.getBronnenChildren(e)})},t.prototype.getBronnen=function(e,t,n){var i=this;if(this.$scope.$broadcast("SHOW_API_PROGRESS_INDICATOR","bronnen"),Object(a.w)(this.$scope.bronnen)||(this.$scope.bronnen.bestanden=null,this.$scope.bronnen.mappen=null),Object(a.w)(e)){var r=this.createRootBron();this.$scope.bronnen=r,this.$scope.selectedBron=r,this.bronnenService.getRoot(this.currentUser.person.id).then(function(e){i.verwerkGetBronnen(e)})}else n?(this.$scope.selectedBron=n,this.$scope.selectedBron.Naam||(this.$scope.selectedBron.Naam=this.$scope.selectedBron.naam),this.getBronnenChildren(n,t)):this.bronnenService.getBronByUri(e).then(function(e){i.$scope.selectedBron=e,i.$scope.selectedBron.Naam||(i.$scope.selectedBron.Naam=i.$scope.selectedBron.naam),i.getBronnenChildren(e,t)})},t.prototype.getBronnenChildren=function(e,t){var n=this;this.bronnenService.getBronnen(e,t).then(function(e){n.verwerkGetBronnen(e)})},t.prototype.findRoot=function(e){var t=e.RootId;return t||e.Id},t.prototype.verwerkGetBronnen=function(t){var n=this;e.isDefined(t&&t.Items)&&null!==t&&null!==t.Items&&(this.bronnenService.addStateToBronnen(t,null,this.$scope),Object(a.w)(this.$scope.excludedMap)||(t.Items=i.filter(t.Items,function(e){return e.Naam!==n.$scope.excludedMap})),this.$scope.bronnen.mappen=i.filter(t.Items,function(e){return(e.Type&s.Map)===s.Map}),this.$scope.bronnen.bestanden=i.filter(t.Items,function(e){return(e.Type&s.Map)!==s.Map})),this.$scope.$broadcast("HIDE_API_PROGRESS_INDICATOR","bronnen")},t.prototype.selectItem=function(e){var t,n;Object(a.w)(e)||((e.Type&s.OneDriveForBusiness)===s.OneDriveForBusiness&&(n=e),null===(t=Object(a.j)(e.Links,a.a.Self))&&(t=Object(a.j)(e.Links,a.a.self))),this.getBronnen(t,this.findRoot(e),n)},t.prototype.selectBron=function(e){return this.$scope.selectedFile=e,!0},t.prototype.addSelectedBron=function(){this.$scope.manualAddHandler&&!Object(a.w)(this.$scope.selectedFile)&&this.$scope.selectedFile.Id&&this.$scope.manualAddHandler(this.$scope.selectedFile)},t.prototype.getContentUri=function(e){return this.isBronSelected(e)?this.getBronUri(e):null},t.prototype.navigationToParent=function(){return!e.isUndefined(this.$scope.selectedBron)&&null!==this.$scope.selectedBron&&(!(!e.isUndefined(this.$scope.projectFolder)&&null!==this.$scope.projectFolder)||this.$scope.projectFolder.Id!==this.$scope.selectedBron.Id)},t.prototype.selectParent=function(){var e;this.navigationToParent()&&(this.$scope.selectedBron&&(e=Object(a.j)(this.$scope.selectedBron.Links,a.a.Parent)),this.getBronnen(e))},t.prototype.internalHandlehandleDragStart=function(e,t){i.find(this.$scope.bronnen.bestanden,function(e){return t===e.Id}).Type!==s.Document&&(e.dataTransfer.effectAllowed="none")},t.prototype.createRootBron=function(){var e;return e=this.$scope.onlyShowProjectFolders?"Selecteer een projectfolder":"Bibliotheken",{Id:null,Links:[],BronSoort:Contracts.Bronnen.Enums.BronSoort.Bestand,Naam:e,Referentie:0,Uri:"",Grootte:0,Privilege:Contracts.Bronnen.Enums.BronPrivilege.Eigenaar,Type:s.Onbekend,ContentType:"",GewijzigdOp:new Date,GeplaatstDoor:"",GemaaktOp:new Date,FileBlobId:0,ParentId:0,parent:null,UniqueId:"",Volgnr:0,ModuleSoort:null}},t.prototype.isBronSelected=function(e){return!!Object(a.t)(this.$scope.selectedFile)&&e===this.$scope.selectedFile},t.prototype.getBronUri=function(e){return Object(a.j)(e.Links,a.a.Contents)},t.$inject=["$scope","$cookieStore","bronnenService","currentUser"],t}();function d(){return{restrict:"A",replace:!0,template:n(122),scope:{manualAddHandler:"=",labelToevoegen:"@",excludedMap:"@"},link:function(e,t,n){e.onlyShowProjectFolders=!1},controller:l}}}).call(this,n(1),n(3))},function(e,t){e.exports='<div id="bronnen-container" class="container sidecolumn" data-on-keydown="handleKeyboardEvent(event);">\r\n    \x3c!--<div data-sm-menu="menu"></div>--\x3e\r\n    <div class="head-bar">\r\n        <div aria-haspopup="true" class="dropdown-menu">\r\n            <a title="opties">\r\n                opties\r\n            </a>\r\n            <ul class="foldout">\r\n                <li><a data-ng-click="bronHernoemen()" data-ng-class="{\'grayed\': !magWijzigen}">hernoemen</a></li>\r\n                <li><a data-ng-click="verwijderBron()" data-ng-class="{\'grayed\': !magVerwijderen}">verwijderen</a></li>\r\n                <li><a data-ng-click="downloadBron()" data-ng-class="{\'grayed\': !magDownloaden}">downloaden</a></li>\r\n            </ul>\r\n        </div>\r\n        <div aria-haspopup="true" class="dropdown-menu">\r\n            <a title="toevoegen">\r\n                toevoegen\r\n            </a>\r\n            <ul class="foldout">\r\n                <li>\r\n                    <a title="" href="" data-ng-show="(magToevoegen)" data-ng-click="clickFileUpload()">\r\n                        bestanden toevoegen\r\n                    </a>\r\n                    <input id="hiddenUploadButton" type="file" data-ng-file-select="onAddFiles($files)" data-ng-show="false" multiple />\r\n                    <a data-ng-show="(!magToevoegen)" title="" href="" class="grayed">\r\n                        \x3c!--op te zorgen dat er echt niet geupload kan worden--\x3e\r\n                        bestanden toevoegen\r\n                    </a>\r\n                </li>\r\n                <li><a data-ng-class="{\'grayed\': !magToevoegen || !magMapToevoegen}" data-sm-single-input-dialog="{title: \'Map toevoegen\', label: \'Naam\'}" data-validate-input="validateFolder" data-handle-input="createFolder" data-enabled="magToevoegen && magMapToevoegen">map toevoegen</a></li>\r\n                <li><a data-ng-class="{\'grayed\': !magToevoegen || !magUrlToevoegen}" data-ng-click="urlAanmaken();" data-enabled="magToevoegen && magUrlToevoegen">URL toevoegen</a></li>\r\n            </ul>\r\n        </div>\r\n        <h1>Bronnen</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container" data-sm-loading-indicator="{domain: \'bronnen\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-paper\', overlay: true}">\r\n            <div class="column-container {{rijHoogte}}">\r\n                <div class="first-column"\r\n                     id="mappen"\r\n                     data-sm-mappen-directive="mappen directive"\r\n                     data-drop="handleDrop"\r\n                     data-file-drop="handleFileDrop"\r\n                     data-drag-enter="handleDragEnter"\r\n                     data-tree-view-has-focus="treeViewHasFocus"\r\n                     data-root-map="bibliothekenFolder"\r\n                     data-hulpprogrammas-root-map="hulpprogrammasRootBron">\r\n\r\n                </div>\r\n                <div data-sm-drag-drop="{fileDrop: true}" data-file-drop="handleFileDrop" class="rest-column">\r\n                    <div id="bestanden"\r\n                         data-sm-bestanden-directive="bestanden directive"\r\n                         data-drop="handleDrop"\r\n                         data-file-drop="handleFileDrop"\r\n                         data-drag-enter="handleDragEnter"\r\n                         data-tree-view-has-focus="treeViewHasFocus"\r\n                         data-selected-map="selectedMap"\r\n                         data-selected-bron="selectedBron"\r\n                         class="content"\r\n                         data-view-class="viewClass">\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div class="widget">\r\n                <div class="block">\r\n                    <h3><b>Toon selectie</b></h3>\r\n                    <div class="content">\r\n                        <form action="#" method="post">\r\n                            <div>\r\n                                <label>Weergave</label>\r\n                                <div class="fancy-select">\r\n                                    <select id="views"\r\n                                        class="select"\r\n                                        data-kendo-drop-down-list="weergave"\r\n                                        data-k-data-value-field="\'type\'"\r\n                                        data-k-data-text-field="\'name\'"\r\n                                        data-k-data-source="viewOptions"\r\n                                        data-k-on-change="viewOnChange(kendoEvent)"\r\n                                        data-ng-model="viewOption">\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </sm-tab>\r\n        <sm-tab title="Multimedia" id="idMultimedia">\r\n            <div class="widget">\r\n                <div class="block">\r\n                    <h3><b>Mediaplayer</b></h3>\r\n                    <div data-sm-multimedia-directive="multimedia directive" data-selected-bron="selectedBron"></div>\r\n                </div>\r\n            </div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(123),r=n(205),o=n(206),a=e.module("Magister.Web.Opdrachten",["ngTouch"]);a.service("bronnenService",i.a.$inject).service("opdrachtenService",r.a.$inject).service("toastService",o.a.$inject),a.constant("constants",{Overzicht:{Titel:"Weergave"}});var s={module:["$ocLazyLoad",function(e){return n.e(11).then(n.bind(null,513)).then(function(t){var n=t.opdrachtenAMD;return e.load(n)})}]};a.config(["$routeProvider",function(e){e.when("/elo/opdrachten",{pageTitle:"Opdrachten",controller:"opdrachtenOverzichtController",resolve:s,template:n(126)}).when("/elo/opdrachten/filter/:filter",{pageTitle:"Opdrachten",controller:"opdrachtenOverzichtController",resolve:s,template:n(126)}).when("/elo/opdrachten/:opdrachtId/:returnUrl?",{pageTitle:"Opdracht details",controller:"opdrachtenDetailsController",resolve:s,template:n(207)})}])}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return a});var r=n(8),o=n(103),a=function(){function t(e,t){this.$resource=e,this.applicationService=t,this.QUAYN_ENTRY_LINK="api/leerlingen/quayn",this.QUAYN_HOME_LINK="api/leerlingen/quayn/home",this.endpointConfigs=[{method:"GET",type:"opdracht",url:"api/personen/:persoonId/opdrachten?skip=:skip&top=:top"},{method:"GET",type:"opdrachtDetails",params:{persoonId:"@persoonId",opdrachtId:"@opdrachtId"},url:"api/personen/:persoonId/opdrachten/:opdrachtId"},{method:"PUT",type:"opdrachtVersie",params:{persoonId:"@persoonId",opdrachtVersieId:"@opdrachtVersieId"},url:"api/personen/:persoonId/opdrachten/versie/:opdrachtVersieId"},{method:"POST",type:"opdrachtVersie",params:{persoonId:"@persoonId",opdrachtId:"@opdrachtId"},url:"api/personen/:persoonId/opdrachten/:opdrachtId/versie"}]}return t.prototype.createVersie=function(e,t){var n=this.endpointConfigs[3],i={persoonId:e,opdrachtId:t.OpdrachtId},r="";globalSettings&&(r=globalSettings.apiHost);var o=r+n.url,a=this.$resource(o,n.params),s=JSON.stringify(t);return a.save(i,s).$promise},t.prototype.updateVersie=function(e,t){var n=this.endpointConfigs[2],i={persoonId:e,opdrachtId:t.OpdrachtId,opdrachtVersieId:t.Id},r="";globalSettings&&(r=globalSettings.apiHost);var o=r+n.url,a=this.$resource(o,n.params,{update:{method:"PUT"}}),s=JSON.stringify(t);return a.update(i,s).$promise},t.prototype.getVersie=function(e){return this.$resource(e).get().$promise},t.prototype.getById=function(e,t){var n=this.endpointConfigs[1],i={persoonId:e,opdrachtId:t};return this.getResource(n,i)},t.prototype.getAll=function(e,t,n,i,a,s){void 0===i&&(i=o.a.alle);var l,d,c=this.endpointConfigs[0],u={persoonId:e,status:this.getStatusString(i),skip:a||0,top:s||25};return l=t.format("YYYY-MM-DD"),d=n.format("YYYY-MM-DD"),l.indexOf("-")>=0&&d.indexOf("-")>=0?(u.startdatum=l,u.einddatum=d):this.applicationService.showMessage("De datum voor de lesperiode is ongeldig",r.j.ERROR),this.getResource(c,u)},t.prototype.assignStatus=function(t){var n=this;return e.each(t,function(e,t,i){n.assignStatusDetail(e)}),t},t.prototype.assignStatusDetail=function(e){return e.OpdrachtStatus=this.getStatus(e.StatusLaatsteOpdrachtVersie,e.OpnieuwInleveren,e.Afgesloten),e},t.prototype.getStatus=function(e,t,n){if(void 0===n&&(n=!1),n)return o.a.alle;switch(e){case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.Ingeleverd:case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.WachtOpPlagiaat:return t?o.a.openstaand:o.a.ingeleverd;case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.Herkansing:case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.NietGestart:case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.Gestart:case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.OpnieuwInleveren:case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.NietIngeleverd:case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.Geen:return o.a.openstaand;case Contracts.ELO.Opdrachten.Enums.OpdrachtStatus.Beoordeeld:return o.a.beoordeeld;default:return o.a.alle}},t.prototype.assignOverdue=function(t){var n=i();return e.each(t,function(e){i(e.InleverenVoor)<=n&&(e.IsOverdue=!0)}),t},t.prototype.getVakkenFromOpdrachten=function(t){var n=["alle vakken"];return e.each(t,function(t){t.Vak&&!e.contains(n,t.Vak)&&n.push(t.Vak)}),n},t.prototype.getQuaynLeerlingEndpoint=function(){var e={method:"GET",url:this.QUAYN_ENTRY_LINK};return this.getResource(e,null)},t.prototype.getQuaynSSOLink=function(){var e={method:"GET",url:this.QUAYN_HOME_LINK+"?redirect_type=body"};return this.getResource(e,null)},t.prototype.getStatusString=function(e){switch(e){case o.a.alle:return"alle";case o.a.ingeleverd:return"ingeleverd";case o.a.openstaand:return"openstaand";case o.a.beoordeeld:return"beoordeeld";default:return"alle"}},t.prototype.getResource=function(e,t){var n="";globalSettings&&(n=globalSettings.apiHost);var i=n+e.url;return this.$resource(i,e.params).get(t).$promise},t.$inject=["$resource","applicationService",t],t}()}).call(this,n(3),n(15))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(8),r=function(){function e(e,t){this.$rootScope=e,this.$sanitize=t}return e.prototype.showMessage=function(e,t,n,i){void 0===i&&(i=0);var r={message:this.$sanitize(t),messageType:n,title:e,visibleTime:i};this.$rootScope.$broadcast("SHOW_NOTIFICATION_REQUEST",r)},e.prototype.showError=function(e,t,n){void 0===n&&(n=i.f),this.showMessage(e,t,i.j.ERROR,n)},e.prototype.showWarning=function(e,t,n){void 0===n&&(n=i.f),this.showMessage(e,t,i.j.WARNING,n)},e.prototype.showInformation=function(e,t,n){void 0===n&&(n=i.f),this.showMessage(e,t,i.j.INFORMATION,n)},e.$inject=["$rootScope","$sanitize",e],e}()},function(e,t){e.exports='<div id="opdrachten-container" class="container sidecolumn" tabindex="0"\r\n     data-sm-check-dirty="isDirty()" data-ng-submit="sendOpdracht()" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <div class="head-bar elopdrachten-details">\r\n        <h1>\r\n            <a ng-click="terug();">\r\n                <i class="far fa-chevron-circle-left"></i>\r\n            </a>\r\n            <span>Opdrachten</span>\r\n        </h1>\r\n        <div data-ng-show="isLaatsteVersie && magInleveren">\r\n            <a class="text-button" data-ng-show="isEditable" data-ng-click="sendOpdracht()" data-ng-class="{\'disabled\' : isUploading || isSending}">Verzenden</a>\r\n            <a class="text-button" data-ng-hide="isEditable" data-ng-click="editOpdracht()" data-ng-bind="createTitle"></a>\r\n        </div>\r\n    </div>\r\n    <section class="main">\r\n        <div id="opdracht-detail" class="content-container widget-container">\r\n            <div class="widget wide uitwerking">\r\n                <div class="block" data-ng-class="{\'fold\': foldOpdracht}">\r\n                    <h3>\r\n                        <span data-ng-click="foldOpdracht=!foldOpdracht" data-ng-class="{\'icon-up-arrow\': !foldOpdracht, \'icon-down-arrow\': foldOpdracht}"></span>\r\n                        <b data-ng-bind-template="{{opdracht.Vak}} - {{opdracht.Titel}}, versie {{opdracht.VersieNummer}}"></b>\r\n                    </h3>\r\n                    <div class="content content-auto content-assignment background-white">\r\n                        <ul class="list dualcollumn-list ">\r\n                            <li>\r\n                                <strong>Opdracht</strong>\r\n                                <span data-ng-bind-template="{{opdracht.Vak}} - {{opdracht.Titel}}"></span>\r\n                            </li>\r\n                            <li>\r\n                                <strong>Ingeleverd</strong>\r\n                                <span data-ng-bind="(opdracht.IngeleverdOp | date:\'dd-MM-yyyy HH:mm\') || \'-\'"></span>\r\n                            </li>\r\n                            <li>\r\n                                <strong>Beoordeeld</strong>\r\n                                <span data-ng-bind="(opdracht.BeoordeeldOp | date:\'dd-MM-yyyy\') || \'-\'"></span>\r\n                            </li>\r\n                            <li>\r\n                                <strong>Beoordeling</strong>\r\n                                <span data-ng-bind="opdracht.Beoordeling || \'-\'"></span>\r\n                            </li>\r\n                            <li>\r\n                                <strong>Inleveren voor</strong>\r\n                                <span data-ng-bind="(opdracht.InleverenVoor | date:\'dd-MM-yyyy HH:mm\') || \'-\'"></span>\r\n                            </li>\r\n                            <li>\r\n\r\n                            </li>\r\n                            <li class="onecol">\r\n                                <strong>Omschrijving</strong>\r\n                                <span data-ng-bind="opdracht.Omschrijving || \'-\'"></span>\r\n                            </li>\r\n                        </ul>\r\n                        <div class="attachments" data-ng-show="opdracht.Bijlagen">\r\n                            <div id="attachmentrepeat" data-ng-repeat="bijlage in opdracht.Bijlagen">\r\n                                <div data-ng-switch="getLinkType(bijlage)">\r\n                                    <div data-ng-switch-when="Scorm">\r\n                                        <span class=" glyph attachment"></span> <div>&nbsp;{{bijlage.Naam}} (scorm)</div>\r\n                                    </div>\r\n                                    <div data-ng-switch-when="Quayn">\r\n                                        <span class=" glyph attachment"></span><a data-ng-bind="bijlage.Naam" data-ng-click="showQuaynToast()"></a>\r\n                                    </div>\r\n                                    <div data-ng-switch-default>\r\n                                        <span class="glyph attachment"></span><a data-ng-bind="bijlage.Naam" data-sm-open-linked-resource="getContentUri(\'{{bijlage.Links | getLinkNavigateUrl: \'Contents\'}}\')"></a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <footer class="endlink"></footer>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="widget wide uitwerking">\r\n                <div data-ng-hide="opdracht.DocentOpmerking.length > 0 || opdracht.FeedbackBijlagen.length > 0" class="block fold disabled" data-ng-show="vm.getVisibility(1)">\r\n                    <h3>\r\n                        <b>Docent opmerkingen (na inlevering)</b>\r\n                    </h3>\r\n                </div>\r\n                <div data-ng-show="opdracht.DocentOpmerking.length > 0 || opdracht.FeedbackBijlagen.length > 0" class="block" data-ng-class="{\'fold\': foldDocentOpmerking}">\r\n                    <h3>\r\n                        <span data-ng-class="{\'icon-up-arrow\': !foldDocentOpmerking, \'icon-down-arrow\': foldDocentOpmerking}" data-ng-click="foldDocentOpmerking=!foldDocentOpmerking"></span>\r\n                        <b>Docent opmerkingen (na inlevering)</b>\r\n                    </h3>\r\n                    <div class="content content-auto background-white">\r\n                        <div class="comment" data-ng-bind="opdracht.DocentOpmerking"></div>\r\n                        <div class="attachments" data-ng-show="opdracht.FeedbackBijlagen.length">\r\n                            <div data-ng-repeat="feedbackBijlage in opdracht.FeedbackBijlagen">\r\n                                <span class="glyph attachment"></span><a data-ng-bind="feedbackBijlage.Naam" data-sm-open-linked-resource="getContentUri(\'{{feedbackBijlage.Links | getLinkNavigateUrl: \'Self\'}}\')"></a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="widget wide uitwerking" data-sm-drag-drop="{drop: true}" data-drop="handleDrop">\r\n                <div id="opdrachtinleverenleerling" data-ng-class="{\'block\': true, \'fold\': foldUitwerking}">\r\n                    <h3>\r\n                        <span data-ng-class="{\'icon-up-arrow\': !foldUitwerking, \'icon-down-arrow\': foldUitwerking}" data-ng-click="foldUitwerking=!foldUitwerking"></span>\r\n                        <span data-sm-loading-indicator="{domain: \'opdrachten\', className: \'icon-pencil\', overlay: false}"></span>\r\n                        <b>Mijn uitwerking</b>\r\n                    </h3>\r\n                    <div class="content content-auto background-white">\r\n                        <div data-sm-file-upload="onFileUploaded(guid, file, uploadMapId)" data-sm-overschrijven="true" data-sm-is-enabled="true" data-sm-file-upload-started="onFileUploadStarted(guid, file, uploadMapId)" data-sm-skip-quota-check="true">\r\n                            <div data-ng-hide="!isEditable" class="textareaContainer">\r\n                                <textarea class="comment" style="border: none; resize: none;" placeholder="Plaats hier jouw opmerkingen." data-ng-disabled="!isEditable" data-ng-model="opdracht.LeerlingOpmerking"></textarea>\r\n                            </div>\r\n                            <div class="comment" data-ng-hide="isEditable" data-ng-bind="opdracht.LeerlingOpmerking || \'Geen inhoud.\'"></div>\r\n\r\n                            <div data-ng-show="attachments.length && isEditable" id="opdracht-details-attachments" class="editable attachment-bar">\r\n                                <div data-ng-repeat="attachment in attachments track by $index">\r\n                                    <a data-ng-bind="attachment.Naam" data-sm-open-linked-resource="getContentUri(\'{{attachment.Links | getLinkNavigateUrl: \'Contents\'}}\')"></a>\r\n                                    <span data-ng-click="deleteAttachment($index);"></span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="attachments" data-ng-show="attachments.length && !isEditable">\r\n                                <div id="attachmentrepeat" data-ng-repeat="attachment in attachments">\r\n                                    <span class="glyph attachment"></span><a data-ng-bind="attachment.Naam" data-sm-open-linked-resource="getContentUri(\'{{attachment.Links | getLinkNavigateUrl: \'Self\'}}\')"></a>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div data-ng-hide="!isEditable || attachments.length != 0">\r\n                                <div class="block-empty">\r\n                                    <em>Upload bestanden door ze uit de verkenner hier te slepen.</em>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <footer class="endlink" data-ng-show="isEditable">\r\n                            <div data-sm-opdrachten-file-select="inleverenOpdracht"></div>\r\n                        </footer>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Versies" id="idVersies">\r\n            <div data-sm-opdrachten-versies-directive="opdrachtDetails"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=e.module("Magister.BeoordeeldeProducten",["kendo.directives"]);i.config(["$routeProvider",function(e){e.when("/elo/portfolio/beoordeeldeproducten",{pageTitle:"Beoordeelde producten",controller:"BeoordeeldeProductenController",controllerAs:"vm",resolve:{module:["$ocLazyLoad",function(e){return n.e(14).then(n.bind(null,526)).then(function(t){var n=t.beoordeeldeProductenAMD;return e.load(n)})}]},template:n(209)})}])}).call(this,n(1))},function(e,t){e.exports='<div id="bronnen-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Beoordeelde producten</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container">\r\n            <div class="grid-container">\r\n                <div data-kendo-grid="vm.beoordeeldeProductenOverzicht"\r\n                     data-k-options="vm.beoordeeldeProductenOverzichtOptions"\r\n                     data-k-sortable="true"\r\n                     data-k-resizable="true"\r\n                     data-k-on-change="vm.onSelectedProductChange(dataItem)"\r\n                     data-k-pageable="false"\r\n                     data-responsive-grid-options\r\n                     class="sm-grid">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Details" id="idDetails">\r\n            <sm-beoordeeldeproducten-details-directive></sm-beoordeeldeproducten-details-directive>\r\n        </sm-tab>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <sm-beoordeeldeproducten-weergave-directive\r\n                data-vakken="vm.vakken" data-changed-vak="vm.onVakChange(selectedVak)"\r\n                data-changed-periode="vm.onPeriodeChange(periode)">\r\n            </sm-beoordeeldeproducten-weergave-directive>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=e.module("Magister.PortfolioDocumenten",["kendo.directives"]);i.config(["$routeProvider",function(e){e.when("/elo/portfolio/documenten",{pageTitle:"Portfolio documenten",controller:"portfolioDocumentenController",controllerAs:"vm",resolve:{module:["$ocLazyLoad",function(e){return n.e(15).then(n.bind(null,535)).then(function(t){var n=t.portfolioDocumentenAMD;return e.load(n)})}]},template:n(211)})}])}).call(this,n(1))},function(e,t){e.exports='<div id="portfoliodocumenten-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <sm-overzicht-menu-directive data-selected-bron="vm.selectedBron"\r\n                                 data-selected-folder="vm.selectedFolder"\r\n                                 data-current-bronnen="vm.bronnen.data()"\r\n                                 data-on-edit-bron="vm.editBron(bron)"\r\n                                 data-on-add-bron="vm.addBron(bron)"\r\n                                 data-on-delete-bron="vm.deleteBron(bron)">\r\n    </sm-overzicht-menu-directive>\r\n    <section class="main">\r\n        <div class="content-container multi-columns tri-columns" data-sm-loading-indicator="{domain: \'portfolio\', className: \'icon-paper bronnen-loading-indicator\', overlay: true}">\r\n            <div class="col"\r\n                 data-sm-drag-drop="{drag: false, drop: true, fileDrop: true}"\r\n                 data-file-drop="vm.onFileDrop()"\r\n                 data-drop="vm.onDrop()">\r\n                <div kendo-tree-view k-data-source="vm.treeData"\r\n                                 k-on-data-bound="vm.onDataBound()"\r\n                                 data-k-select="vm.onSelectFolder()"\r\n                                 data-sm-focus="true"\r\n                                 data-wait-for-loaded="true">\r\n                    <a k-template class="single-row"\r\n                       data-ng-click="vm.expandTreeNode(dataItem)"\r\n                       data-sm-drag-drop="{drag: false, drop: true, fileDrop: true}"\r\n                       data-drop="vm.onDrop()"\r\n                       data-file-drop="vm.onFileDrop()"\r\n                       data-enter="vm.onDragEnter()"\r\n                       data-id="#: item.id #">\r\n                        <span class="iconic indicator icon-map-closed"></span>\r\n                        <span>#: item.text #</span>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div class="col double-col" data-sm-loading-indicator="{domain: \'portfolio-upload\', className: \'icon-paper bronnen-loading-indicator\', overlay: false}">\r\n                <div data-sm-drag-drop="{drag: false, drop: true, fileDrop: true}"\r\n                     data-file-drop="vm.onFileDrop()"\r\n                     data-drop="vm.onDrop()" style="height:100%">\r\n                    <div class="column-container">\r\n                        <div class="block">\r\n                            <h3 data-ng-bind="vm.selectedFolder.text"></h3>\r\n                            <kendo-list-view id="bronnen-list-view"\r\n                                             k-data-source="vm.bronnen"\r\n                                             k-selectable="true"\r\n                                             k-navigatable="true"\r\n                                             class="sources"\r\n                                             style="border: none;">\r\n                                <li k-template data-ng-class="dataItem.data | bronIcon"\r\n                                    data-sm-drag-drop="{drag: true, drop: true, fileDrop: true}"\r\n                                    data-hint-element="vm.onCreateHintElement()"\r\n                                    data-type="0"\r\n                                    data-id="{{dataItem.id}}"\r\n                                    data-drop="vm.onDrop()"\r\n                                    data-enter="vm.onDragEnter()"\r\n                                    data-file-drop="vm.onFileDrop()">\r\n                                    <a ng-click="vm.onSelectBron(dataItem)" data-sm-open-linked-resource="vm.getContentLink(dataItem)">{{dataItem.text}}</a>\r\n                                </li>\r\n                            </kendo-list-view>\r\n                            <p class="empty-message" ng-show="vm.bronnen.data().length === 0">Geen items in deze map.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Bronnen" id="idBronnen">\r\n            <div data-sm-bronnen-toevoegen="bronnen directive" data-manual-add-handler="vm.onManualAdd" data-label-toevoegen="voeg bron toe" data-excluded-map="Portfolio documenten"></div>\r\n        </sm-tab>\r\n        <sm-tab title="Beoordeelde producten" id="idBeoordeeldProducten" class="double-line-title">\r\n            <sm-beoordeelde-producten-directive data-add-bron="vm.onAddBeoordeeldProduct(bron)" data-set-bron="vm.activeBeoordeeldProductId"></sm-beoordeelde-producten-directive>\r\n        </sm-tab>\r\n        <sm-tab title="Multimedia" id="idMultimedia">\r\n            <div class="widget">\r\n                <div class="block">\r\n                    <h3><b>Mediaplayer</b></h3>\r\n                    <sm-portfolio-multimedia-directive data-selected-bron="vm.selectedBron"></sm-portfolio-multimedia-directive>\r\n                </div>\r\n            </div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=e.module("Magister.PortfolioProfiel",["kendo.directives"]);i.config(["$routeProvider",function(e){e.when("/elo/portfolio/profiel",{pageTitle:"Portfolio profiel",controller:"portfolioProfielController",controllerAs:"vm",resolve:{module:["$ocLazyLoad",function(e){return n.e(16).then(n.bind(null,547)).then(function(t){var n=t.portfolioProfielAMD;return e.load(n)})}]},template:n(213)})}])}).call(this,n(1))},function(e,t){e.exports='<div id="profiel-container" class="container">\r\n    <div class="head-bar">\r\n        <h1>Profiel</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container no-border widget-container">\r\n            <sm-panel-widget id="profileEditor1" panel-title="{{vm.profielOnderdelen[0].titel}}" data-panel-widget-classes="wide widget-high"\r\n                             data-footer-config="{ \'showFooter\': true,\r\n                                                   \'isCollapsed\': true,\r\n                                                buttons: [{ \'title\': \'afbeelding wijzigen\', name: vm.SubscriptionEnum.wijzigen },\r\n                                                          { \'title\': \'afbeelding verwijderen\', name: vm.SubscriptionEnum.verwijderen },\r\n                                                          { \'title\': \'wijzig tekst\', name: vm.SubscriptionEnum.userClicked, params: {index: 0} }] }">\r\n\r\n                <div class="profile-photo"\r\n                     sm-profiel-foto-directive\r\n                     data-ng-if="vm.profielOnderdelen[0].bijlageToegestaan"\r\n                     data-onderdeel="vm.profielOnderdelen[0]"\r\n                     data-get-onderdeel="vm.getOrCreateOnderdeel(0)"></div>\r\n\r\n                <div class="profile-content">\r\n                    <div ng-bind-html="vm.trustAsHtml(vm.profielOnderdelen[0].inhoud)"></div>\r\n                    <span class="datetime-label" id="profileDate1" ng-bind="vm.profielOnderdelen[0].gewijzigdOp | date:\'dd-MM-yyyy HH:mm:ss\'"></span>\r\n                </div>\r\n            </sm-panel-widget>\r\n            <sm-panel-widget id="profileEditor2" panel-title="{{vm.profielOnderdelen[1].titel}}" data-panel-widget-classes="wide widget-auto"\r\n                             data-footer-config="{ \'showFooter\': true,\r\n                                                   \'isCollapsed\': false,\r\n                                                   buttons: [{ \'title\': \'wijzig tekst\', name: vm.SubscriptionEnum.userClicked, params: {index: 1} }] }">\r\n\r\n                <div class="profile-content">\r\n                    <div ng-bind-html="vm.profielOnderdelen[1].inhoud"></div>\r\n                    <span class="datetime-label" id="profileDate2" ng-bind="vm.profielOnderdelen[1].gewijzigdOp | date:\'dd-MM-yyyy HH:mm:ss\'"></span>\r\n                </div>\r\n            </sm-panel-widget>\r\n            <sm-panel-widget id="profileEditor3" panel-title="{{vm.profielOnderdelen[2].titel}}" data-panel-widget-classes="wide widget-auto"\r\n                             data-footer-config="{ \'showFooter\': true,\r\n                                                   \'isCollapsed\': false,\r\n                                                   buttons: [{ \'title\': \'wijzig tekst\', name: vm.SubscriptionEnum.userClicked, params: {index: 2} }] }">\r\n\r\n                <div class="profile-content">\r\n                    <div ng-bind-html="vm.profielOnderdelen[2].inhoud"></div>\r\n                    <span class="datetime-label" id="profileDate3" ng-bind="vm.profielOnderdelen[2].gewijzigdOp | date:\'dd-MM-yyyy HH:mm:ss\'"></span>\r\n                </div>\r\n            </sm-panel-widget>\r\n            <sm-panel-widget id="profileEditor4" panel-title="{{vm.profielOnderdelen[3].titel}}" data-panel-widget-classes="wide widget-auto"\r\n                             data-footer-config="{ \'showFooter\': true,\r\n                                                   \'isCollapsed\': false,\r\n                                                   buttons: [{ \'title\': \'wijzig tekst\', name: vm.SubscriptionEnum.userClicked, params: {index: 3} }] }">\r\n                <div class="profile-content">\r\n                    <div ng-bind-html="vm.profielOnderdelen[3].inhoud"></div>\r\n                    <span class="datetime-label" id="profileDate4" ng-bind="vm.profielOnderdelen[3].gewijzigdOp | date:\'dd-MM-yyyy HH:mm:ss\'"></span>\r\n                </div>\r\n            </sm-panel-widget>\r\n        </div>\r\n    </section>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var i=n(94),r=n(215),o=n(217),a=n(219),s=n(220),l=n(221),d=e.module("Magister.Web.Studiewijzer",["Magister.Core"]);d.service("studiewijzerService",a.a.$inject).service("projectenService",l.a.$inject).service("studiewijzerProjectService",s.a.$inject),d.directive("smStudiewijzerMultimedia",r.a.$inject).directive("smPreview",o.a);var c={module:["$ocLazyLoad",function(e){return n.e(19).then(n.bind(null,553)).then(function(t){var n=t.studiewijzerAMD;return e.load(n)})}]};d.config(["$routeProvider",function(e){e.when("/elo/studiewijzer",{pageTitle:"Studiewijzers",controller:"overzichtController",resolve:c,template:n(222)}).when("/elo/studiewijzer/project/:studiewijzerId/:returnUrl?",{pageTitle:"Studiewijzers",controller:"studiewijzerDetailController",resolve:c,studiewijzerType:i.d.project,template:n(127)}).when("/elo/studiewijzer/:studiewijzerId/:returnUrl?",{pageTitle:"Studiewijzers",controller:"studiewijzerDetailController",resolve:c,studiewijzerType:i.d.studiewijzer,template:n(127)})}])}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(8),r=n(0),o=n(94),a="PLAY_AUDIO",s="PLAY_VIDEO",l=function(){function e(e,t,n){var i=this;this.$scope=e,this.tabService=t,this.downloadTokenService=n,e.mediaType=o.a.Anders,e.$on(s,function(t,n){i.openMultimediaTab(),e.audioSource="",e.downloadLink=n+"?download=true",e.mediaType=o.a.Video,i.downloadTokenService.getLocation(n).then(function(t){e.videoSource=t})}),e.$on(a,function(t,n){i.openMultimediaTab(),e.mediaType=o.a.Audio,e.videoSource="",e.downloadLink=n,i.downloadTokenService.getLocation(n).then(function(t){e.audioSource=t})}),e.getContentUri=function(){return i.getContentUri()}}return e.prototype.openMultimediaTab=function(){var e=this.tabService.getTab("idMultimedia");e&&this.tabService.openTab(e)},e.prototype.getContentUri=function(){return this.$scope.downloadLink},e.$inject=["$scope","tabService","downloadTokenService"],e}(),d=function(){function e(e,t){var i=this;this.$timeout=e,this.applicationService=t,this.template=n(216),this.replace=!0,this.link=function(e,t,n){return i.linkFn(e,t,n)},this.controller=l}return e.prototype.linkFn=function(e,t,n){var o=this,a=t.find(".smVideo")[0];a.addEventListener("error",function(){a.src===a.baseURI||Object(r.p)(e.videoSource)||o.$timeout(function(){o.applicationService.showMessage("Video kan niet afgespeeld worden.",i.j.ERROR,i.f,"Fout bij afspelen")})})},e.$inject=["$timeout","applicationService",function(t,n){return new e(t,n)}],e}()},function(e,t){e.exports='<div>\r\n    <div class="content">\r\n        <div ng-show="mediaType === 3">\r\n            <img width="274" height="128" data-ng-src="assets/images/PlayerPlaceHolder.png" />\r\n        </div>\r\n        <div ng-show="mediaType === 1">\r\n            <video class="smVideo" width="274" height="128" data-ng-src="{{videoSource}}" controls autoplay></video>\r\n        </div>\r\n        <div ng-show="mediaType === 0">\r\n            <audio data-ng-src="{{audioSource}}" controls autoplay></audio>\r\n        </div>\r\n    </div>\r\n    <footer class="endlink">\r\n        <a ng-show="mediaType === 1 || mediaType === 0" mg-download-file="{{getContentUri()}}" class="left">download bestand</a>\r\n    </footer>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(0),r=(n(218),function(){function t(e,t){this.$scope=e,this.objectUrlService=t}return t.prototype.showPreview=function(t,n){if(!Object(i.p)(n)){var r=globalSettings.apiHost;Object(i.C)(n,"/")&&(n=n.substring(1)),r+=n,this.objectUrlService.getObjectUrl(r).then(function(n){e.fancybox.open([n],{title:t,type:"image"})})}},t}());function o(){return{controller:["$scope","objectUrlService",r],link:function(e,t,n,i){e.$eval(n.showPreview)&&t.on("click",function(e){e.preventDefault(),i.showPreview(n.previewTitle,n.smPreview)})}}}}).call(this,n(10))},function(e,t,n){(function(e){
/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
!function(e,t,n,i){"use strict";var r=n("html"),o=n(e),a=n(t),s=n.fancybox=function(){s.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),d=null,c=void 0!==t.createTouch,u=function(e){return e&&e.hasOwnProperty&&e instanceof n},h=function(e){return e&&"string"===n.type(e)},p=function(e){return h(e)&&e.indexOf("%")>0},f=function(e,t){var n=parseInt(e,10)||0;return t&&p(e)&&(n=s.getViewport()[t]/100*n),Math.ceil(n)},g=function(e,t){return f(e,t)+"px"};n.extend(s,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!c,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeChange:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){if(e&&(n.isPlainObject(t)||(t={}),!1!==s.close(!0)))return n.isArray(e)||(e=u(e)?n(e).get():[e]),n.each(e,function(i,r){var o,a,l,d,c,p,f,g={};"object"===n.type(r)&&(r.nodeType&&(r=n(r)),u(r)?(g={href:r.data("fancybox-href")||r.attr("href"),title:r.data("fancybox-title")||r.attr("title"),isDom:!0,element:r},n.metadata&&n.extend(!0,g,r.metadata())):g=r),o=t.href||g.href||(h(r)?r:null),a=void 0!==t.title?t.title:g.title||"",!(d=(l=t.content||g.content)?"html":t.type||g.type)&&g.isDom&&((d=r.data("fancybox-type"))||(d=(c=r.prop("class").match(/fancybox\.(\w+)/))?c[1]:null)),h(o)&&(d||(s.isImage(o)?d="image":s.isSWF(o)?d="swf":"#"===o.charAt(0)?d="inline":h(r)&&(d="html",l=r)),"ajax"===d&&(p=o.split(/\s+/,2),o=p.shift(),f=p.shift())),l||("inline"===d?o?l=n(h(o)?o.replace(/.*(?=#[^\s]+$)/,""):o):g.isDom&&(l=r):"html"===d?l=o:d||o||!g.isDom||(d="inline",l=r)),n.extend(g,{href:o,type:d,content:l,title:a,selector:f}),e[i]=g}),s.opts=n.extend(!0,{},s.defaults,t),void 0!==t.keys&&(s.opts.keys=!!t.keys&&n.extend({},s.defaults.keys,t.keys)),s.group=e,s._start(s.opts.index)},cancel:function(){var e=s.coming;e&&!1!==s.trigger("onCancel")&&(s.hideLoading(),s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),s.coming=null,s.current||s._afterZoomOut(e))},close:function(e){s.cancel(),!1!==s.trigger("beforeClose")&&(s.unbindEvents(),s.isActive&&(s.isOpen&&!0!==e?(s.isOpen=s.isOpened=!1,s.isClosing=!0,n(".fancybox-item, .fancybox-nav").remove(),s.wrap.stop(!0,!0).removeClass("fancybox-opened"),s.transitions[s.current.closeMethod]()):(n(".fancybox-wrap").stop(!0).trigger("onReset").remove(),s._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(s.player.timer)},n=function(){t(),s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},i=function(){t(),a.unbind(".player"),s.player.isActive=!1,s.trigger("onPlayEnd")};!0===e||!s.player.isActive&&!1!==e?s.current&&(s.current.loop||s.current.index<s.group.length-1)&&(s.player.isActive=!0,a.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":n,"beforeLoad.player":t}),n(),s.trigger("onPlayStart")):i()},next:function(e){var t=s.current;t&&(h(e)||(e=t.direction.next),s.jumpto(t.index+1,e,"next"))},prev:function(e){var t=s.current;t&&(h(e)||(e=t.direction.prev),s.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,n){var i=s.current;i&&(e=f(e),s.direction=t||i.direction[e>=i.index?"next":"prev"],s.router=n||"jumpto",i.loop&&(e<0&&(e=i.group.length+e%i.group.length),e%=i.group.length),void 0!==i.group[e]&&(s.cancel(),s._start(e)))},reposition:function(e,t){var i,r=s.current,o=r?r.wrap:null;o&&(i=s._getPosition(t),e&&"scroll"===e.type?(delete i.position,o.stop(!0,!0).animate(i,200)):(o.css(i),r.pos=n.extend({},r.dim,i)))},update:function(e){var t=e&&e.type,n=!t||"orientationchange"===t;n&&(clearTimeout(d),d=null),s.isOpen&&!d&&(d=setTimeout(function(){var i=s.current;i&&!s.isClosing&&(s.wrap.removeClass("fancybox-tmp"),(n||"load"===t||"resize"===t&&i.autoResize)&&s._setDimension(),"scroll"===t&&i.canShrink||s.reposition(e),s.trigger("onUpdate"),d=null)},n&&!c?0:300))},toggle:function(e){s.isOpen&&(s.current.fitToView="boolean"===n.type(e)?e:!s.current.fitToView,c&&(s.wrap.removeAttr("style").addClass("fancybox-tmp"),s.trigger("onUpdate")),s.update())},hideLoading:function(){a.unbind(".loading"),n("#fancybox-loading").remove()},showLoading:function(){var e,t;s.hideLoading(),e=n('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body"),a.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),s.cancel())}),s.defaults.fixed||(t=s.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=s.current&&s.current.locked||!1,n={x:o.scrollLeft(),y:o.scrollTop()};return t?(n.w=t[0].clientWidth,n.h=t[0].clientHeight):(n.w=c&&e.innerWidth?e.innerWidth:o.width(),n.h=c&&e.innerHeight?e.innerHeight:o.height()),n},unbindEvents:function(){s.wrap&&u(s.wrap)&&s.wrap.unbind(".fb"),a.unbind(".fb"),o.unbind(".fb")},bindEvents:function(){var e,t=s.current;t&&(o.bind("orientationchange.fb"+(c?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),s.update),(e=t.keys)&&a.bind("keydown.fb",function(i){var r=i.which||i.keyCode,o=i.target||i.srcElement;if(27===r&&s.coming)return!1;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||o&&(o.type||n(o).is("[contenteditable]"))||n.each(e,function(e,o){return t.group.length>1&&void 0!==o[r]?(s[e](o[r]),i.preventDefault(),!1):n.inArray(r,o)>-1?(s[e](),i.preventDefault(),!1):void 0})}),n.fn.mousewheel&&t.mouseWheel&&s.wrap.bind("mousewheel.fb",function(e,i,r,o){for(var a,l=e.target||null,d=n(l),c=!1;d.length&&!(c||d.is(".fancybox-skin")||d.is(".fancybox-wrap"));)c=(a=d[0])&&!(a.style.overflow&&"hidden"===a.style.overflow)&&(a.clientWidth&&a.scrollWidth>a.clientWidth||a.clientHeight&&a.scrollHeight>a.clientHeight),d=n(d).parent();0===i||c||s.group.length>1&&!t.canShrink&&(o>0||r>0?s.prev(o>0?"down":"left"):(o<0||r<0)&&s.next(o<0?"up":"right"),e.preventDefault())}))},trigger:function(e,t){var i,r=t||s.coming||s.current;if(r){if(n.isFunction(r[e])&&(i=r[e].apply(r,Array.prototype.slice.call(arguments,1))),!1===i)return!1;r.helpers&&n.each(r.helpers,function(t,i){i&&s.helpers[t]&&n.isFunction(s.helpers[t][e])&&s.helpers[t][e](n.extend(!0,{},s.helpers[t].defaults,i),r)}),a.trigger(e)}},isImage:function(e){return h(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return h(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,i,r,o,a,l={};if(e=f(e),!(t=s.group[e]||null))return!1;if(o=(l=n.extend(!0,{},s.opts,t)).margin,a=l.padding,"number"===n.type(o)&&(l.margin=[o,o,o,o]),"number"===n.type(a)&&(l.padding=[a,a,a,a]),l.modal&&n.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=s.group,l.index=e,s.coming=l,!1!==s.trigger("beforeLoad")){if(r=l.type,i=l.href,!r)return s.coming=null,!(!s.current||!s.router||"jumpto"===s.router)&&(s.current.index=e,s[s.router](s.direction));if(s.isActive=!0,"image"!==r&&"swf"!==r||(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===r&&(l.aspectRatio=!0),"iframe"===r&&c&&(l.scrolling="scroll"),l.wrap=n(l.tpl.wrap).addClass("fancybox-"+(c?"mobile":"desktop")+" fancybox-type-"+r+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),n.extend(l,{skin:n(".fancybox-skin",l.wrap),outer:n(".fancybox-outer",l.wrap),inner:n(".fancybox-inner",l.wrap)}),n.each(["Top","Right","Bottom","Left"],function(e,t){l.skin.css("padding"+t,g(l.padding[e]))}),s.trigger("onReady"),"inline"===r||"html"===r){if(!l.content||!l.content.length)return s._error("content")}else if(!i)return s._error("href");"image"===r?s._loadImage():"ajax"===r?s._loadAjax():"iframe"===r?s._loadIframe():s._afterLoad()}else s.coming=null},_error:function(e){n.extend(s.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:s.coming.tpl.error}),s._afterLoad()},_loadImage:function(){var e=s.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,s.coming.width=this.width/s.opts.pixelRatio,s.coming.height=this.height/s.opts.pixelRatio,s._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,s._error("image")},e.src=s.coming.href,!0!==e.complete&&s.showLoading()},_loadAjax:function(){var e=s.coming;s.showLoading(),s.ajaxLoad=n.ajax(n.extend({},e.ajax,{url:e.href,error:function(e,t){s.coming&&"abort"!==t?s._error("ajax",e):s.hideLoading()},success:function(t,n){"success"===n&&(e.content=t,s._afterLoad())}}))},_loadIframe:function(){var e=s.coming,t=n(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",c?"auto":e.iframe.scrolling).attr("src",e.href);n(e.wrap).bind("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(s.showLoading(),t.one("load",function(){n(this).data("ready",1),c||n(this).bind("load.fb",s.update),n(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),s._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||s._afterLoad()},_preloadImages:function(){var e,t,n=s.group,i=s.current,r=n.length,o=i.preload?Math.min(i.preload,r-1):0;for(t=1;t<=o;t+=1)"image"===(e=n[(i.index+t)%r]).type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,t,i,r,o,a,l=s.coming,d=s.current,c="fancybox-placeholder";if(s.hideLoading(),l&&!1!==s.isActive){if(!1===s.trigger("afterLoad",l,d))return l.wrap.stop(!0).trigger("onReset").remove(),void(s.coming=null);switch(d&&(s.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),s.unbindEvents(),e=l,t=l.content,i=l.type,r=l.scrolling,n.extend(s,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:d}),o=e.href,i){case"inline":case"ajax":case"html":e.selector?t=n("<div>").html(t).find(e.selector):u(t)&&(t.data(c)||t.data(c,n('<div class="'+c+'"></div>').insertAfter(t).hide()),t=t.show().detach(),e.wrap.bind("onReset",function(){n(this).find(t).length&&t.hide().replaceAll(t.data(c)).data(c,!1)}));break;case"image":t=e.tpl.image.replace("{href}",o);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+o+'"></param>',a="",n.each(e.swf,function(e,n){t+='<param name="'+e+'" value="'+n+'"></param>',a+=" "+e+'="'+n+'"'}),t+='<embed src="'+o+'" type="application/x-shockwave-flash" width="100%" height="100%"'+a+"></embed></object>"}u(t)&&t.parent().is(e.inner)||e.inner.append(t),s.trigger("beforeShow"),e.inner.css("overflow","yes"===r?"scroll":"no"===r?"hidden":r),s._setDimension(),s.reposition(),s.isOpen=!1,s.coming=null,s.bindEvents(),s.isOpened?d.prevMethod&&s.transitions[d.prevMethod]():n(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),s.transitions[s.isOpened?e.nextMethod:e.openMethod](),s._preloadImages()}},_setDimension:function(){var e,t,i,r,o,a,l,d,c,u,h,m,v,b,_,k,w,y=s.getViewport(),x=0,C=s.wrap,S=s.skin,T=s.inner,D=s.current,I=D.width,E=D.height,A=D.minWidth,O=D.minHeight,R=D.maxWidth,P=D.maxHeight,M=D.scrolling,F=D.scrollOutside?D.scrollbarWidth:0,H=D.margin,N=f(H[1]+H[3]),$=f(H[0]+H[2]);if(C.add(S).add(T).width("auto").height("auto").removeClass("fancybox-tmp"),o=N+(i=f(S.outerWidth(!0)-S.width())),a=$+(r=f(S.outerHeight(!0)-S.height())),l=p(I)?(y.w-o)*f(I)/100:I,d=p(E)?(y.h-a)*f(E)/100:E,"iframe"===D.type){if(k=D.content,D.autoHeight&&1===k.data("ready"))try{k[0].contentWindow.document.location&&(T.width(l).height(9999),w=k.contents().find("body"),F&&w.css("overflow-x","hidden"),d=w.outerHeight(!0))}catch(e){}}else(D.autoWidth||D.autoHeight)&&(T.addClass("fancybox-tmp"),D.autoWidth||T.width(l),D.autoHeight||T.height(d),D.autoWidth&&(l=T.width()),D.autoHeight&&(d=T.height()),T.removeClass("fancybox-tmp"));if(I=f(l),E=f(d),h=l/d,A=f(p(A)?f(A,"w")-o:A),R=f(p(R)?f(R,"w")-o:R),O=f(p(O)?f(O,"h")-a:O),c=R,u=P=f(p(P)?f(P,"h")-a:P),D.fitToView&&(R=Math.min(y.w-o,R),P=Math.min(y.h-a,P)),b=y.w-N,_=y.h-$,D.aspectRatio?(I>R&&(E=f((I=R)/h)),E>P&&(I=f((E=P)*h)),I<A&&(E=f((I=A)/h)),E<O&&(I=f((E=O)*h))):(I=Math.max(A,Math.min(I,R)),D.autoHeight&&"iframe"!==D.type&&(T.width(I),E=T.height()),E=Math.max(O,Math.min(E,P))),D.fitToView)if(T.width(I).height(E),C.width(I+i),m=C.width(),v=C.height(),D.aspectRatio)for(;(m>b||v>_)&&I>A&&E>O&&!(x++>19);)E=Math.max(O,Math.min(P,E-10)),(I=f(E*h))<A&&(E=f((I=A)/h)),I>R&&(E=f((I=R)/h)),T.width(I).height(E),C.width(I+i),m=C.width(),v=C.height();else I=Math.max(A,Math.min(I,I-(m-b))),E=Math.max(O,Math.min(E,E-(v-_)));F&&"auto"===M&&E<d&&I+i+F<b&&(I+=F),T.width(I).height(E),C.width(I+i),m=C.width(),v=C.height(),e=(m>b||v>_)&&I>A&&E>O,t=D.aspectRatio?I<c&&E<u&&I<l&&E<d:(I<c||E<u)&&(I<l||E<d),n.extend(D,{dim:{width:g(m),height:g(v)},origWidth:l,origHeight:d,canShrink:e,canExpand:t,wPadding:i,hPadding:r,wrapSpace:v-S.outerHeight(!0),skinSpace:S.height()-E}),!k&&D.autoHeight&&E>O&&E<P&&!t&&T.height("auto")},_getPosition:function(e){var t=s.current,n=s.getViewport(),i=t.margin,r=s.wrap.width()+i[1]+i[3],o=s.wrap.height()+i[0]+i[2],a={position:"absolute",top:i[0],left:i[3]};return t.autoCenter&&t.fixed&&!e&&o<=n.h&&r<=n.w?a.position="fixed":t.locked||(a.top+=n.y,a.left+=n.x),a.top=g(Math.max(a.top,a.top+(n.h-o)*t.topRatio)),a.left=g(Math.max(a.left,a.left+(n.w-r)*t.leftRatio)),a},_afterZoomIn:function(){var e=s.current;e&&(s.isOpen=s.isOpened=!0,s.wrap.css("overflow","visible").addClass("fancybox-opened"),s.update(),(e.closeClick||e.nextClick&&s.group.length>1)&&s.inner.css("cursor","pointer").bind("click.fb",function(t){n(t.target).is("a")||n(t.target).parent().is("a")||(t.preventDefault(),s[e.closeClick?"close":"next"]())}),e.closeBtn&&n(e.tpl.closeBtn).appendTo(s.skin).bind("click.fb",function(e){e.preventDefault(),s.close()}),e.arrows&&s.group.length>1&&((e.loop||e.index>0)&&n(e.tpl.prev).appendTo(s.outer).bind("click.fb",s.prev),(e.loop||e.index<s.group.length-1)&&n(e.tpl.next).appendTo(s.outer).bind("click.fb",s.next)),s.trigger("afterShow"),e.loop||e.index!==e.group.length-1?s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play()):s.play(!1))},_afterZoomOut:function(e){e=e||s.current,n(".fancybox-wrap").trigger("onReset").remove(),n.extend(s,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),s.trigger("afterClose",e)}}),s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,n=e.orig,i={},r=50,o=50,a=e.hPadding,l=e.wPadding,d=s.getViewport();return!n&&e.isDom&&t.is(":visible")&&((n=t.find("img:first")).length||(n=t)),u(n)?(i=n.offset(),n.is("img")&&(r=n.outerWidth(),o=n.outerHeight())):(i.top=d.y+(d.h-o)*e.topRatio,i.left=d.x+(d.w-r)*e.leftRatio),("fixed"===s.wrap.css("position")||e.locked)&&(i.top-=d.y,i.left-=d.x),i={top:g(i.top-a*e.topRatio),left:g(i.left-l*e.leftRatio),width:g(r+l),height:g(o+a)}},step:function(e,t){var n,i,r=t.prop,o=s.current,a=o.wrapSpace,l=o.skinSpace;"width"!==r&&"height"!==r||(n=t.end===t.start?1:(e-t.start)/(t.end-t.start),s.isClosing&&(n=1-n),i=e-("width"===r?o.wPadding:o.hPadding),s.skin[r](f("width"===r?i:i-a*n)),s.inner[r](f("width"===r?i:i-a*n-l*n)))},zoomIn:function(){var e=s.current,t=e.pos,i=e.openEffect,r="elastic"===i,o=n.extend({opacity:1},t);delete o.position,r?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===i&&(t.opacity=.1),s.wrap.css(t).animate(o,{duration:"none"===i?0:e.openSpeed,easing:e.openEasing,step:r?this.step:null,complete:s._afterZoomIn})},zoomOut:function(){var e=s.current,t=e.closeEffect,n="elastic"===t,i={opacity:.1};n&&(i=this.getOrigPosition(),e.closeOpacity&&(i.opacity=.1)),s.wrap.animate(i,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:s._afterZoomOut})},changeIn:function(){var e,t=s.current,n=t.nextEffect,i=t.pos,r={opacity:1},o=s.direction;i.opacity=.1,"elastic"===n&&(e="down"===o||"up"===o?"top":"left","down"===o||"right"===o?(i[e]=g(f(i[e])-200),r[e]="+=200px"):(i[e]=g(f(i[e])+200),r[e]="-=200px")),"none"===n?s._afterZoomIn():s.wrap.css(i).animate(r,{duration:t.nextSpeed,easing:t.nextEasing,complete:s._afterZoomIn})},changeOut:function(){var e=s.previous,t=e.prevEffect,i={opacity:.1},r=s.direction;"elastic"===t&&(i["down"===r||"up"===r?"top":"left"]=("up"===r||"left"===r?"-":"+")+"=200px"),e.wrap.animate(i,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){n(this).trigger("onReset").remove()}})}},s.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!c,fixed:!0},overlay:null,fixed:!1,el:n("html"),create:function(e){e=n.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=n('<div class="fancybox-overlay"></div>').appendTo(s.coming?s.coming.parent:e.parent),this.fixed=!1,e.fixed&&s.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=n.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(o.bind("resize.overlay",n.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){if(n(e.target).hasClass("fancybox-overlay"))return s.isActive?s.close():t.close(),!1}),this.overlay.css(e.css).show()},close:function(){var e,t;o.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(n(".fancybox-margin").removeClass("fancybox-margin"),e=o.scrollTop(),t=o.scrollLeft(),this.el.removeClass("fancybox-lock"),o.scrollTop(e).scrollLeft(t)),n(".fancybox-overlay").remove().hide(),n.extend(this,{overlay:null,fixed:!1})},update:function(){var e,n="100%";this.overlay.width(n).height("100%"),l?(e=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),a.width()>e&&(n=a.width())):a.width()>o.width()&&(n=a.width()),this.overlay.width(n).height(a.height())},onReady:function(e,t){var i=this.overlay;n(".fancybox-overlay").stop(!0,!0),i||this.create(e),e.locked&&this.fixed&&t.fixed&&(i||(this.margin=a.height()>o.height()&&n("html").css("margin-right").replace("px","")),t.locked=this.overlay.append(t.wrap),t.fixed=!1),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var i,r;t.locked&&(!1!==this.margin&&(n("*").filter(function(){return"fixed"===n(this).css("position")&&!n(this).hasClass("fancybox-overlay")&&!n(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=o.scrollTop(),r=o.scrollLeft(),this.el.addClass("fancybox-lock"),o.scrollTop(i).scrollLeft(r)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!s.coming&&this.overlay.fadeOut(e.speedOut,n.proxy(this.close,this))}},s.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t,i,r=s.current,o=r.title,a=e.type;if(n.isFunction(o)&&(o=o.call(r.element,r)),h(o)&&""!==n.trim(o)){switch(t=n('<div class="fancybox-title fancybox-title-'+a+'-wrap">'+o+"</div>"),a){case"inside":i=s.skin;break;case"outside":i=s.wrap;break;case"over":i=s.inner;break;default:i=s.skin,t.appendTo("body"),l&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(f(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](i)}}},n.fn.fancybox=function(e){var t,i=n(this),r=this.selector||"",o=function(o){var a,l,d=n(this).blur(),c=t;o.ctrlKey||o.altKey||o.shiftKey||o.metaKey||d.is(".fancybox-wrap")||(a=e.groupAttr||"data-fancybox-group",(l=d.attr(a))||(a="rel",l=d.get(0)[a]),l&&""!==l&&"nofollow"!==l&&(c=(d=(d=r.length?n(r):i).filter("["+a+'="'+l+'"]')).index(this)),e.index=c,!1!==s.open(d,e)&&o.preventDefault())};return t=(e=e||{}).index||0,r&&!1!==e.live?a.undelegate(r,"click.fb-start").delegate(r+":not('.fancybox-item, .fancybox-nav')","click.fb-start",o):i.unbind("click.fb-start").bind("click.fb-start",o),this.filter("[data-fancybox-start=1]").trigger("click"),this},a.ready(function(){var t,i,o,a;void 0===n.scrollbarWidth&&(n.scrollbarWidth=function(){var e=n('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),i=t.innerWidth()-t.height(99).innerWidth();return e.remove(),i}),void 0===n.support.fixedPosition&&(n.support.fixedPosition=(o=n('<div style="position:fixed;top:20px;"></div>').appendTo("body"),a=20===o[0].offsetTop||15===o[0].offsetTop,o.remove(),a)),n.extend(s.defaults,{scrollbarWidth:n.scrollbarWidth(),fixed:n.support.fixedPosition,parent:n("body")}),t=n(e).width(),r.addClass("fancybox-lock-test"),i=n(e).width(),r.removeClass("fancybox-lock-test"),n("<style type='text/css'>.fancybox-margin{margin-right:"+(i-t)+"px;}</style>").appendTo("head")})}(window,document,e)}).call(this,n(10))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(94),o=function(){function t(e,t,n){this.$resource=e,this.$q=t,this.applicationService=n,this.endpointConfigs=[{method:"GET",type:r.c.studiewijzers,params:{persoonId:"@persoonId",peildatum:"@peildatum",skip:"@skip",top:"@top",orderby:"@orderby",count:"@count",vakken:"@vakken"},url:"api/leerlingen/:persoonId/studiewijzers"}]}return t.prototype.getAll=function(t,n){var o=e.first(e.where(this.endpointConfigs,{type:r.c.studiewijzers})),a={persoonId:t,peildatum:i().format("YYYY-MM-DD")};return null!=n&&n.length>0&&e.extend(a,{vakken:n.join()}),this.getResource(o,a)},t.prototype.getStudieWijzerDetail=function(e,t){var n="";globalSettings&&(n=globalSettings.apiHost);var i={persoonId:e,studiewijzerId:t};return this.$resource(n+"api/leerlingen/:persoonId/studiewijzers/:studiewijzerId").get(i).$promise},t.prototype.GetOnderdeel=function(e,t,n){var i="";globalSettings&&(i=globalSettings.apiHost);var r={persoonId:e,studiewijzerId:t,studiewijzerOnderdeelId:n};return this.$resource(i+"api/leerlingen/:persoonId/studiewijzers/:studiewijzerId/onderdelen/:studiewijzerOnderdeelId?gebruikMappenStructuur=true").get(r).$promise},t.prototype.getResource=function(e,t){var n="";globalSettings&&(n=globalSettings.apiHost);var i=n+e.url;return this.$resource(i,e.params).get(t).$promise},t.$inject=["$resource","$q","applicationService",t],t}()}).call(this,n(3),n(15))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(_,angular){__webpack_require__.d(__webpack_exports__,"a",function(){return StudiewijzerProjectService});var _core_enums_AccessType__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_core_enums_PrivilegeName__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_utils_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_EloEnums__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(94),StudiewijzerProjectService=function(){function StudiewijzerProjectService(e,t,n,i,r){this.$q=e,this.$filter=t,this.projectenService=n,this.studiewijzerService=i,this.currentUser=r,this.ALLE_VAKKEN="Alle vakken",this.studiewijzers=[],this.projecten=[],this.videoExtensions="x mp4 avi 264 m2v vc1 yuv wmv f4v raw m2ts m3u8 ismv mov 3gpp 3gp 3g2 flv mkv m2v m1v mts ts trp mpg mpeg mp4 h264 mxf divx xvid vob asf x",this.audioExtensions="x aac aif aifc au flac m4a mp2 wma wav aiff mp3 midi mid mpa opus rmi snd wav x",this.imageExtensions="x bmp eps gif exr ico jpg png svg tga tiff wbmp webp x"}return StudiewijzerProjectService.prototype.getAll=function(){var e=this,t=this.$q.defer(),n=this.currentUser.relatedPersons.current.id,i=[];return this.currentUser.hasPrivilege(_core_enums_PrivilegeName__WEBPACK_IMPORTED_MODULE_1__.a.Studiewijzers,_core_enums_AccessType__WEBPACK_IMPORTED_MODULE_0__.a.Read)&&i.push(this.getStudiewijzers(n)),this.currentUser.hasPrivilege(_core_enums_PrivilegeName__WEBPACK_IMPORTED_MODULE_1__.a.Projecten,_core_enums_AccessType__WEBPACK_IMPORTED_MODULE_0__.a.Read)&&i.push(this.getProjecten(n)),this.$q.all(i).then(function(){e.combineResults(),t.resolve(e.studiewijzerProjecten)}),t.promise},StudiewijzerProjectService.prototype.getVakCodes=function(){var e=[];return _.each(this.studiewijzerProjecten,function(t){_.each(t.VakCodes,function(t){_.some(e,function(e){return e.toLowerCase()===t.toLowerCase()})||e.push(t)})}),e.unshift(this.ALLE_VAKKEN),e},StudiewijzerProjectService.prototype.filter=function(e,t){var n=this;return void 0===t&&(t=this.ALLE_VAKKEN),_.filter(this.studiewijzerProjecten,function(i){var r=e===_EloEnums__WEBPACK_IMPORTED_MODULE_3__.b.Actueel?!i.InLeerlingArchief:i.InLeerlingArchief,o=t===n.ALLE_VAKKEN||angular.isDefined(i.VakCodes)&&null!==i.VakCodes&&_.some(i.VakCodes,function(e){return e===t});return r&&o})||[]},StudiewijzerProjectService.prototype.selectItem=function(items,selectedItemIndex,operator,limit){if(selectedItemIndex!==limit){var indexNr=eval(selectedItemIndex.toString()+operator+1);return items[indexNr]}},StudiewijzerProjectService.prototype.getDetail=function(e,t,n){var i,r=this.$q.defer();switch(t){case _EloEnums__WEBPACK_IMPORTED_MODULE_3__.d.studiewijzer:i=this.studiewijzerService.getStudieWijzerDetail(e,+n);break;case _EloEnums__WEBPACK_IMPORTED_MODULE_3__.d.project:i=this.projectenService.getProjectDetail(e,+n)}return i.then(function(e){r.resolve(e)}),r.promise},StudiewijzerProjectService.prototype.getOnderdeel=function(e,t,n,i){var r,o=this.$q.defer();switch(t){case _EloEnums__WEBPACK_IMPORTED_MODULE_3__.d.studiewijzer:r=this.studiewijzerService.GetOnderdeel(e,n,i);break;case _EloEnums__WEBPACK_IMPORTED_MODULE_3__.d.project:r=this.projectenService.GetOnderdeel(e,n,i)}return r.then(function(e){o.resolve(e)}),o.promise},StudiewijzerProjectService.prototype.getBronnen=function(e){var t=this,n=new Array,i=_.where(e,{ModuleSoort:Contracts.ELO.Enums.ModuleSoort.Map}),r=_.filter(e,function(e){return e.ModuleSoort!==Contracts.ELO.Enums.ModuleSoort.Map}),o={};return _.forEach(i,function(e){var t={Id:e.Id,Naam:e.Naam,Collapsed:!0,ModuleSoort:e.ModuleSoort,Volgnr:e.Volgnr,Bijlagen:new Array};n.push(t),o[e.Id]=t}),_.forEach(r,function(e){var i=t.createLocalBron(e);if(0===i.ParentId)n.push(i);else{var r=o[i.ParentId];r&&r.Bijlagen.push(i)}}),_(n).chain().sortBy("Naam").sortBy("Volgnr").value()},StudiewijzerProjectService.prototype.getStudiewijzers=function(e){var t=this,n=this.$q.defer();return this.studiewijzerService.getAll(e).then(function(e){angular.isDefined(e.Items)&&null!==e.Items&&(t.studiewijzers=e.Items),t.setResultTypes(t.studiewijzers,_EloEnums__WEBPACK_IMPORTED_MODULE_3__.d.studiewijzer),n.resolve(t.studiewijzers)}),n.promise},StudiewijzerProjectService.prototype.getProjecten=function(e){var t=this,n=this.$q.defer();return this.projectenService.getAll(e).then(function(e){angular.isDefined(e.Items)&&null!==e.Items&&(t.projecten=e.Items),t.setResultTypes(t.projecten,_EloEnums__WEBPACK_IMPORTED_MODULE_3__.d.project),n.resolve(t.projecten)}),n.promise},StudiewijzerProjectService.prototype.setResultTypes=function(e,t){_.each(e,function(e,n,i){e.Type=t})},StudiewijzerProjectService.prototype.combineResults=function(){this.studiewijzerProjecten=this.studiewijzers.concat(this.projecten)},StudiewijzerProjectService.prototype.createLocalBron=function(e){var t="";Object(_utils_index__WEBPACK_IMPORTED_MODULE_2__.u)(e.Naam)||(t=" "+e.Naam.substr(e.Naam.lastIndexOf(".")+1).toLowerCase()+" ");var n=_EloEnums__WEBPACK_IMPORTED_MODULE_3__.a.Anders;-1!==this.videoExtensions.indexOf(t)&&(n=_EloEnums__WEBPACK_IMPORTED_MODULE_3__.a.Video),-1!==this.audioExtensions.indexOf(t)&&(n=_EloEnums__WEBPACK_IMPORTED_MODULE_3__.a.Audio),-1!==this.imageExtensions.indexOf(t)&&(n=_EloEnums__WEBPACK_IMPORTED_MODULE_3__.a.Afbeelding);var i=Object(_utils_index__WEBPACK_IMPORTED_MODULE_2__.j)(e.Links,_utils_index__WEBPACK_IMPORTED_MODULE_2__.a.Contents),r=Object(_utils_index__WEBPACK_IMPORTED_MODULE_2__.j)(e.Links,_utils_index__WEBPACK_IMPORTED_MODULE_2__.a.ThumbnailSmall),o=Object(_utils_index__WEBPACK_IMPORTED_MODULE_2__.j)(e.Links,_utils_index__WEBPACK_IMPORTED_MODULE_2__.a.ThumbnailLarge);return{Uri:i,Naam:e.Naam,Extension:t,MediaType:n,ContentType:e.ContentType,IsAudioOrVideo:n!==_EloEnums__WEBPACK_IMPORTED_MODULE_3__.a.Anders,UriThumbnailSmall:r,UriThumbnailLarge:o,IsAfbeelding:n===_EloEnums__WEBPACK_IMPORTED_MODULE_3__.a.Afbeelding,ModuleSoort:e.ModuleSoort,Referentie:e.Referentie,ParentId:e.ParentId,Volgnr:e.Volgnr}},StudiewijzerProjectService.$inject=["$q","$filter","projectenService","studiewijzerService","currentUser",StudiewijzerProjectService],StudiewijzerProjectService}()}).call(this,__webpack_require__(3),__webpack_require__(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(94),o=function(){function t(e,t,n){this.$resource=e,this.$q=t,this.applicationService=n,this.endpointConfigs=[{method:"GET",type:r.c.projecten,params:{persoonId:"@persoonId",peildatum:"@peildatum"},url:"api/leerlingen/:persoonId/projecten"}]}return t.prototype.getAll=function(t){var n=this.$q.defer(),o=e.first(e.where(this.endpointConfigs,{type:r.c.projecten})),a={persoonId:t,peildatum:i().format("YYYY-MM-DD")};return this.getResource(o,a).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},t.prototype.getProjectDetail=function(e,t){var n="";globalSettings&&(n=globalSettings.apiHost);var i={persoonId:e,projectId:t};return this.$resource(n+"api/leerlingen/:persoonId/projecten/:projectId").get(i).$promise},t.prototype.GetOnderdeel=function(e,t,n){var i="";globalSettings&&(i=globalSettings.apiHost);var r={persoonId:e,projectId:t,projectOnderdeelId:n};return this.$resource(i+"api/leerlingen/:persoonId/projecten/:projectId/onderdelen/:projectOnderdeelId?gebruikMappenStructuur=true").get(r).$promise},t.prototype.getResource=function(e,t){var n="";globalSettings&&(n=globalSettings.apiHost);var i=n+e.url;return this.$resource(i,e.params).get(t).$promise},t.$inject=["$resource","$q","applicationService",t],t}()}).call(this,n(3),n(15))},function(e,t){e.exports='<div id="studiewijzer-container" class="container sidecolumn" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Studiewijzers</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container" data-sm-loading-indicator="{domain: \'studiewijzer\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-tablet-right-arrow\', overlay: true}">\r\n            <div class="studiewijzer-list {{rijHoogte}}">\r\n                <div class="head">\r\n                    <span>Naam</span>\r\n                    <span>Vak</span>\r\n                </div>\r\n                <ul>\r\n                    <li data-ng-repeat="studiewijzer in items" data-ng-class="{\'selected\': selectedItem.Id == studiewijzer.Id }" data-sm-notify-complete="studiewijzer">\r\n                        <a data-ng-click="selectStudiewijzer(studiewijzer)">\r\n                            <span>{{studiewijzer.Titel}}</span>\r\n                            <span>{{studiewijzer.VakCodes.join()}}</span>\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n\r\n            </div>\r\n            <div data-sm-no-items="sm-no-items" data-items="items"></div>\r\n        </div>\r\n    </section>\r\n\r\n    <sm-tab-container>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-filter-instellingen></div>\r\n            <div data-weergave-instellingen></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=e.module("Magister.Web.Examen",["ngRoute","ngResource","Magister.Core"]);i.config(["$routeProvider",function(e){e.when("/examen",{pageTitle:"Examen",controller:"examenDetailController",controllerAs:"vm",resolve:{module:["$ocLazyLoad",function(e){return n.e(7).then(n.bind(null,565)).then(function(t){var n=t.examenAMD;return e.load(n)})}]},template:n(224)})}])}).call(this,n(1))},function(e,t){e.exports='<div id="examendetail-container" class="container">\r\n    <div class="head-bar">\r\n        <h1>Examen</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container no-border">\r\n            <div sm-officiele-examen-gegevens-directive></div>\r\n            <div ng-if="vm.showExamenRooster" sm-examen-rooster-directive></div>\r\n            <div sm-examen-resultaten-directive></div>\r\n        </div>\r\n</section>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(226),r=e.module("Magister.Web.ExterneKoppelingen",["Magister.Core"]);r.service("externeKoppelingenService",i.a)}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$http=e,this.$q=t}return e.prototype.getExterneKoppelingen=function(){var t=this;return this.externeKoppelingen?this.$q.resolve(this.externeKoppelingen):this.$http.get(e.EXTERNE_KOPPELINGEN_ENDPOINT).then(function(e){return t.externeKoppelingen=e.data,e.data})},e.EXTERNE_KOPPELINGEN_ENDPOINT="/api/m6/externekoppelingen",e.$inject=["$http","$q"],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=e.module("Magister.Web.Leermiddelen",["Magister.Core"]);i.config(["$routeProvider",function(e){e.when("/leermiddelen",{pageTitle:"Leermiddelen",controller:"leermiddelenOverzichtController",resolve:{module:["$ocLazyLoad",function(e){return n.e(8).then(n.bind(null,575)).then(function(t){var n=t.leermiddelenAMD;return e.load(n)})}]},template:n(228)})}])}).call(this,n(1))},function(e,t){e.exports='<div id="leermiddelen-container" class="container sidecolumn" data-on-keydown="keyup(event)" tabindex="0" data-ng-class="{\'aside-toggle\': !tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <div>\r\n            <a ng-click="onVerifyKennisnetInfo()" class="text-button">\r\n                <span class="open-file-link">controle gegevens</span>\r\n            </a>\r\n        </div>\r\n        <div data-ng-show="isDigitaalMateriaal(selectedItem.MateriaalType)">\r\n            <a data-ng-click="openLeermiddel(selectedItem)" class="text-button">\r\n                <span class="open-file-link">open bestand</span>\r\n            </a>\r\n        </div>\r\n        <h1>Leermiddelen</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container full-width" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false" data-sm-loading-indicator="{domain: \'leermiddelen\', content: \'scheduler\', hideEvent: \'NG_REPEAT_FINISHED\', className: \'icon-book\', overlay: true}">\r\n            <div class="wide-widget">\r\n                <div class="table-block">\r\n                    <div class="content content-auto">\r\n                        <table class="data-overview table-grid-layout normaal">\r\n                            <colgroup>\r\n                                <col width="100" />\r\n                                <col width="50" />\r\n                                <col width="100%" />\r\n                                <col width="120" />\r\n                            </colgroup>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Soort</th>\r\n                                    <th>Vak</th>\r\n                                    <th>Titel</th>\r\n                                    <th>EAN</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr data-ng-repeat="leermiddel in items" data-ng-click="selectItem(leermiddel, true)" data-ng-class="{\'selected no-dots\': leermiddel.Id === selectedItem.Id}" data-sm-notify-complete="leermiddelen">\r\n                                    <td data-ng-switch data-on="leermiddel.Soort">\r\n                                        <span ng-switch-when="0">Huur</span>\r\n                                        <span ng-switch-when="1">Koop</span>\r\n                                        <span ng-switch-when="2">School</span>\r\n                                        <span ng-switch-when="3">Digitaal</span>\r\n                                    </td>\r\n                                    <td data-ng-bind="leermiddel.Vak.Afkorting"></td>\r\n                                    <td data-ng-bind="leermiddel.Titel" data-ng-hide="isDigitaalMateriaal(leermiddel.MateriaalType)"></td>\r\n                                    <td data-ng-show="isDigitaalMateriaal(leermiddel.MateriaalType)">\r\n                                        <a ng-if="canOpenDigitaalLesmateriaal" data-ng-click="openLeermiddel(leermiddel)" data-ng-bind="leermiddel.Titel"> </a>\r\n                                        <span ng-if="!canOpenDigitaalLesmateriaal" data-ng-bind="leermiddel.Titel"> </span>\r\n                                    </td>\r\n                                    <td data-ng-bind="leermiddel.EAN"></td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div data-sm-no-items="sm-no-items" data-items="items"></div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container>\r\n        <sm-tab title="Details" id="idDetails">\r\n            <div data-sm-leermiddelen-details-directive></div>\r\n        </sm-tab>\r\n        <sm-tab title="Weergave" id="idWeergave">\r\n            <div data-sm-leermiddelen-selectie-directive="sm-leermiddelen-selectie-directive"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var i=n(230),r=n(232),o=n(234),a=n(236),s=n(238),l=n(240),d=n(242),c=n(244),u=n(246),h=n(248),p=n(250),f=e.module("Magister.Web.Logboeken",[]);f.component("dkGroep",s.a).component("dkBedrag",i.a).component("dkBestand",r.a).component("dkDatum",o.a).component("dkGetal",a.a).component("dkKeuzelijst",l.a).component("dkLogisch",d.a).component("dkLookup",c.a).component("dkMemo",u.a).component("dkTekst",h.a).component("dkTijd",p.a),f.config(["$routeProvider",function(e){e.when("/lvs",{pageTitle:"Logboeken",controller:"logboekenController",controllerAs:"vm",resolve:{module:["$ocLazyLoad",function(e){return n.e(9).then(n.bind(null,585)).then(function(t){var n=t.logboekenAMD;return e.load(n)})}]},template:n(252)})}])}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this)||this;return n.$filter=t,n}return o(t,e),Object.defineProperty(t.prototype,"bedrag",{get:function(){return this._bedrag},set:function(e){e=e.replace(/[^0-9,]/g,""),this._bedrag=e},enumerable:!0,configurable:!0}),t.prototype.$onChanges=function(e){e.value&&e.value.currentValue&&(this.bedrag=e.value.currentValue.toString().replace(".",","))},t.$inject=["$filter"],t}(r.a),s={template:n(231),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<div class="input-text input-value">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <span ng-if="$ctrl.bedrag" id="{{$ctrl.model.datafield}}" class="value" ng-bind="$ctrl.bedrag | currency: \'\'"></span>\r\n    <span ng-if="!$ctrl.bedrag" id="{{$ctrl.model.datafield}}" class="value">-</span>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this)||this;return n.downloadTokenService=t,n.isUploading=!1,n.showDeleteFileDialog=!1,n}return o(t,e),t.prototype.$onChanges=function(e){var t=this;e.value&&e.value.currentValue&&e.value.currentValue.links&&this.model.getFormulierBijlage(e.value.currentValue.links.self.href).then(function(e){t.selectedFile={},t.selectedFile.bestandUri=e.links.download.href,t.selectedFile.name=e.naam,t.selectedFile.size=e.grootte})},t.prototype.onDownloadFile=function(){!this.editable&&this.selectedFile&&this.selectedFile.bestandUri&&this.downloadTokenService.downloadFromLocation(this.selectedFile.bestandUri)},t.$inject=["downloadTokenService"],t}(r.a),s={template:n(233),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<style>\r\n    div.bestand {\r\n        border-top: 0 !important;\r\n    }\r\n    .bestand-vrije-veld {\r\n    overflow:hidden;}\r\n    .bestand-vrije-veld:after {\r\n        display: block;\r\n        clear: both;\r\n        display: block;\r\n    }\r\n\r\n    .bestand-vrije-veld label {\r\n        display: block;\r\n    }\r\n\r\n    .bestand-vrije-veld a {\r\n        display: block;\r\n        float: left;\r\n        border: 1px solid #ccc;\r\n        width: 200px;\r\n        height: 50px;\r\n    }\r\n\r\n    .bestand-vrije-veld span {\r\n        display: block;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .bestand-vrije-veld .iconic {\r\n        float: left;\r\n        width: 40px;\r\n        height: 48px;\r\n        line-height: 48px;\r\n        font-size:22px;\r\n    }\r\n\r\n    .bestand-vrije-veld .download-arrow-big {\r\n    }\r\n\r\n    .bestand-vrije-veld .file-name {\r\n        padding: 8px 0 4px 0;\r\n        color: #666;\r\n    }\r\n\r\n    .bestand-vrije-veld .file-type {\r\n        padding: 0 0 4px 0;\r\n        color: #999;\r\n    }\r\n</style>\r\n\r\n\r\n<div class="input-text input-value bestand-vrije-veld">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    \x3c!--<span ng-if="$ctrl.selectedFile" class="iconic icon-attachment" ng-click="$ctrl.onDownloadFile()"></span>--\x3e\r\n    <a ng-href="" ng-click="$ctrl.onDownloadFile()">\r\n        <span class="iconic indicator icon-unknown"></span>\r\n        <span class="download-arrow-big"><i></i></span>\r\n        <span class="file-name">{{$ctrl.selectedFile.name || \'-\'}}</span>\r\n        <span class="file-type">{{$ctrl.selectedFile.type | getBronTypeFromContentType}} ({{$ctrl.selectedFile.size | sizeConverter}})</span>\r\n\r\n    </a>\r\n</div>\r\n<div ng-if="!$ctrl.selectedFile">-</div>\r\n\r\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.$onChanges=function(e){e.value&&e.value.currentValue&&(this.datum=new Date(e.value.currentValue))},t}(r.a),s={template:n(235),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<style>\r\n    .ico-date-vrijeveld {\r\n        right: 0px !important;\r\n        bottom: 16px !important;\r\n    }\r\n\r\n    .logboek-date-vrijeveld {\r\n        z-index: 101;\r\n    }\r\n</style>\r\n\r\n<div class="input-date input-value logboek-date-vrijeveld">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <span id="{{$ctrl.model.datafield}}" class="value" ng-bind="$ctrl.datum || \'-\' | date:\'dd-MM-yyyy\'"></span>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this)||this;return n.$filter=t,n}return o(t,e),Object.defineProperty(t.prototype,"getal",{get:function(){return this._getal},set:function(e){e=e.replace(/[^0-9]/g,""),this._getal=e},enumerable:!0,configurable:!0}),t.prototype.$onChanges=function(e){e.value&&e.value.currentValue&&(this.getal=e.value.currentValue.toString())},t.$inject=["$filter"],t}(r.a),s={template:n(237),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<div class="input-text input-value">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <span id="{{$ctrl.model.datafield}}" class="value" ng-bind="$ctrl.getal || \'-\'"></span>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=function(){function e(e){this.$location=e}return e.$inject=["$location"],e}(),r={template:n(239),bindings:{groep:"<",waarden:"<"},controller:i}},function(e,t){e.exports='<div mg-widget="" foldable="" class="logboek-item-widget">\r\n    <div class="content-pane">\r\n        <h3 ng-if="$ctrl.groep.showcaption" ng-bind="$ctrl.groep.caption"></h3>\r\n        <div class="content content-auto no-footer">\r\n            <div ng-repeat="item in $ctrl.groep.properties">\r\n                <dk-bedrag ng-if="item.type === \'bedrag\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-bedrag>\r\n                <dk-bestand ng-if="item.type === \'bestand\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-bestand>\r\n                <dk-datum ng-if="item.type === \'datum\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-datum>\r\n                <dk-getal ng-if="item.type === \'getal\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-getal>\r\n                <dk-keuzelijst ng-if="item.type === \'keuzelijst\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-keuzelijst>\r\n                <dk-logisch ng-if="item.type === \'logisch\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-logisch>\r\n                <dk-lookup ng-if="item.type === \'lookup\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-lookup>\r\n                <dk-lookup-c ng-if="item.type === \'lookupc\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-lookup-c>\r\n                <dk-memo ng-if="item.type === \'memo\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-memo>\r\n                <dk-tekst ng-if="item.type === \'tekst\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-tekst>\r\n                <dk-tijd ng-if="item.type === \'tijd\'" model="item" value="$ctrl.waarden[item.datafield]"></dk-tijd>\r\n\r\n                <dk-groep ng-if="item.type === \'groep\'" groep="item" waarden="$ctrl.waarden"></dk-groep>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){return e.call(this)||this}return o(t,e),Object.defineProperty(t.prototype,"keuzeWaarde",{get:function(){return this._keuzeWaarde},enumerable:!0,configurable:!0}),t.prototype.$onChanges=function(e){e.model&&e.model.currentValue&&e.model.currentValue.links&&(this._keuzeWaarde=e.value.currentValue)},t}(r.a),s={template:n(241),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<div class="input-text input-value">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <span id="{{$ctrl.model.datafield}}" class="value" ng-bind="$ctrl.keuzeWaarde.omschrijving || \'-\'"></span>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.$onChanges=function(e){e.value&&e.value.currentValue&&(this.logisch=e.value.currentValue)},t}(r.a),s={template:n(243),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<div class="input-text input-value">\r\n    <div class="checkbox-input">\r\n        <input type="checkbox" name="logisch" id="{{$ctrl.model.datafield}}" disabled="disabled" ng-model="$ctrl.logisch">\r\n        <label for="{{$ctrl.model.datafield}}"><span></span>{{$ctrl.model.titel}}</label>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a="roepnaam",s="voorletters",l="tussenvoegsel",d="achternaam",c="",u=" ",h=function(t){function n(){return t.call(this)||this}return o(n,t),n.prototype.$onChanges=function(e){if(e.model&&e.model.currentValue&&e.value&&e.value.currentValue){var t=e.value.currentValue;!e.value.currentValue.omschrijving&&e.value.currentValue.persoon?this.waarde=this.formatPersonNameFilter(e.value.currentValue.persoon):this.waarde=t.omschrijving}},n.prototype.formatPersonNameFilter=function(t){if(e.isUndefined(t)||null===t)return"";var n="";return 0===(n=this.getPaddedValueOrEmpty(a,t,u)).length&&(n+=this.getPaddedValueOrEmpty(s,t,u)),n+=this.getPaddedValueOrEmpty(l,t,u),(n+=this.getPaddedValueOrEmpty(d,t,c)).trim()},n.prototype.getPaddedValueOrEmpty=function(e,t,n){var i=function(e,t,n){return void 0===n&&(n=!0),!!Object.getOwnPropertyDescriptor(e,t)||!(!Object.getPrototypeOf(e)||!n)&&i(Object.getPrototypeOf(e),t)};return(t.hasOwnProperty(e)||i(t,e))&&null!=t[e]?t[e]+n:""},n}(r.a),p={template:n(245),controller:h,bindings:{value:"<",model:"<"}}}).call(this,n(1))},function(e,t){e.exports='<div class="input-text input-value">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <span id="{{$ctrl.model.datafield}}" class="value" ng-bind="$ctrl.waarde || \'-\'"></span>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){var t=e.call(this)||this;return t.memoHasContent=!1,t}return o(t,e),t.prototype.$onChanges=function(e){e.value&&void 0!==e.value.currentValue&&(this.memo=e.value.currentValue,this.memoHasContent=this.hasContent(this.memo),null===this.memo&&(this.memo=""))},t.prototype.hasContent=function(e){return""!==(e=(e=(e=e?String(e).replace(/&nbsp;/g,""):"").replace(/<[^>]+>/gm,"")).replace(/^\s+|\s+$|\s+/g,""))},t}(r.a),s={template:n(247),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<div class="input-text input-value">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <div>\r\n        <div ng-if="$ctrl.memoHasContent === true" ng-bind-html="$ctrl.memo" class="logboek-details-inhoud"></div>\r\n        <div ng-if="$ctrl.memoHasContent === false" class="logboek-details-inhoud">-</div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.$onChanges=function(e){e.value&&e.value.currentValue&&(this.tekst=e.value.currentValue)},t}(r.a),s={template:n(249),controller:a,bindings:{value:"<",model:"<"}}},function(e,t){e.exports='<div class="input-text input-value">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <span id="{{$ctrl.model.datafield}}" class="value" ng-bind="$ctrl.tekst || \'-\'"></span>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i,r=n(90),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(t){function n(){var e=t.call(this)||this;return e.isTijdInitialized=!1,e}return o(n,t),n.prototype.$onChanges=function(t){t.value&&t.value.currentValue&&(this.tijd=e(t.value.currentValue,"H:m:s").toDate())},n}(r.a),s={template:n(251),controller:a,bindings:{value:"<",model:"<"}}}).call(this,n(15))},function(e,t){e.exports='<div class="input-value">\r\n    <label for="{{$ctrl.model.datafield}}" ng-bind="$ctrl.model.titel"></label>\r\n    <span id="{{$ctrl.model.datafield}}" class="value" ng-bind="$ctrl.tijd || \'-\' | date : \'HH:mm:ss\'"></span>\r\n</div>'},function(e,t){e.exports='<style>\r\n    /* Tijdelijk: moet er weer uit als de kendo dropdown gestyled is */\r\n    .k-list-container.k-state-border-up .k-list {\r\n        border-radius: 0 !important;\r\n        /*border:none !important;*/\r\n        box-shadow: none !important;\r\n    }\r\n\r\n    .k-list-container .k-list li.k-item {\r\n        padding-left: 16px !important;\r\n        padding-top: 12px !important;\r\n        padding-bottom: 12px !important;\r\n        height: auto;\r\n    }\r\n\r\n    .k-list-container .k-list li.k-item:first-of-type {\r\n        border-top: 1px solid #cccccc;\r\n    }\r\n\r\n    #logboekenTree.k-treeview {\r\n        height: calc(100% - 36px);\r\n        /*\r\n            TODO: 42px is hoe hoog de fancy select nu is, moet 40px worden.\r\n        */\r\n    }\r\n\r\n    div.logboek-details {\r\n        border-bottom: 1px solid #cccccc;\r\n        -moz-box-shadow: -5px 0 #fff, 5px 0 #fff, 0 2px 5px -1px rgba(0, 0, 0, 0.15);\r\n        -webkit-box-shadow: -5px 0 #fff, 5px 0 #fff, 0 2px 5px -1px rgba(0, 0, 0, 0.15);\r\n        box-shadow: -5px 0 #fff, 5px 0 #fff, 0 2px 5px -1px rgba(0, 0, 0, 0.15);\r\n        padding: 16px 8px 8px 8px;\r\n    }\r\n\r\n    div.logboek-details .temp-attachments {\r\n        padding: 8px 0 0 24px;\r\n        border-top: 1px solid #cccccc;\r\n        position: relative;\r\n        line-height: 16px;\r\n        min-height: 32px;\r\n        overflow: hidden;\r\n        -ms-text-overflow: ellipsis;\r\n        -o-text-overflow: ellipsis;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    div.logboek-details .temp-attachments a {\r\n      margin: 0 2px;\r\n      color: #005c86;\r\n      text-decoration: underline; \r\n    }\r\n\r\n    div.logboek-details .temp-attachments .iconic {\r\n        position: absolute;\r\n        left: 8px;\r\n        font-size: 14px;\r\n    }\r\n\r\n    div.temp-details-content label {\r\n        font-weight: bold;\r\n    }\r\n\r\n    div.input-value {\r\n        padding-bottom: 12px;\r\n    }\r\n\r\n    div.input-text label {\r\n        padding-bottom: 6px;\r\n    }\r\n\r\n    span.value {\r\n        padding-bottom: 4px;\r\n        line-height: 16px;\r\n    }\r\n    span.label.omschrijving {\r\n        padding-right: 30px;\r\n    }\r\n\r\n    div.temp-details-content p {\r\n        padding: 0;\r\n    }\r\n\r\n    section.main div.double-col {\r\n        height: calc(100% - 2px)\r\n    }\r\n\r\n    section.main div.content-container {\r\n        overflow: hidden;\r\n    }\r\n</style>\r\n\r\n<div class="container" >\r\n    <div class="head-bar">\r\n        <h1>LVS - Logboeken</h1>\r\n    </div>\r\n\r\n    <section class="main">\r\n        <div class="content-container multi-columns tri-columns" data-sm-loading-indicator="{domain: \'lvs\', hideEvent: \'lvs\', className: \'icon-layered-book\', overlay: true}">\r\n            <div class="col col-noprint">\r\n\r\n                <div class="logboeken fancy-select">\r\n                    <select class="select"\r\n                            data-kendo-drop-down-list\r\n                            data-k-data-source="vm.gelezenFilterOptions"\r\n                            data-k-on-change="vm.onSelectGelezenFilter(kendoEvent)"\r\n                            data-k-value-primitive="true"\r\n                            data-k-ng-model="vm.selectedGelezenFilter"></select>\r\n                </div>\r\n                <div data-kendo-tree-view="logboekenTree" id="logboekenTree"\r\n                     class="border-bottom border-top"\r\n                     data-k-data-source="vm.logboekenTreeData"\r\n                     data-k-load-on-demand="false"\r\n                     data-k-select="vm.onSelectLogboek()"\r\n                     data-k-data-bound="vm.onLogboekenTreeDataBound()"\r\n                     data-sm-focus="true"\r\n                     data-wait-for-loaded="true">\r\n                    <a k-template data-ng-class="{\'attent\': dataItem.alert}" data-ng-click="vm.expandTreeNode(dataItem)">\r\n                        <span class="iconic indicator" data-ng-class="{\'icon-unknown\': dataItem.data.soort !== \'groep\', \'icon-layered-files\': dataItem.data.soort === \'groep\' }"></span>\r\n                        <span class="datetime" data-ng-bind-template="{{dataItem.data.aangemaaktOp | date: dd-MM}}"></span>\r\n                        <div class="icons small">\r\n                            <span class="iconic" data-ng-class="{\'icon-important\': dataItem.data.heeftPrioriteit}"></span>\r\n                            <span class="iconic" data-ng-class="{\'icon-attachment\': dataItem.data.heeftBijlagen}"></span>\r\n                        </div>\r\n                        <span data-ng-class="{\'unread\' : !dataItem.data.isGelezen}" data-ng-bind="dataItem.data.formulierType.omschrijving"></span>\r\n                        <span class="label omschrijving" data-ng-bind="dataItem.data.omschrijving"></span>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div class="col double-col">\r\n                <p class="empty-message" data-ng-if="!vm.selectedLogboekNode.data">Geen logboek geselecteerd.</p>\r\n                <div data-ng-if="vm.selectedLogboekNode.data" class="temp-details">\r\n                    <div class="temp-details-content">\r\n                        <h3 data-ng-bind="vm.selectedLogboekDetails.formulier.omschrijving"></h3>\r\n                        <strong data-ng-bind="vm.selectedLogboekNode.data.omschrijving"></strong>\r\n                        <span ng-if="vm.selectedLogboekDetails.eigenaar" data-ng-bind-template="Formulier van {{vm.selectedLogboekDetails.eigenaar.voorletters}} {{vm.selectedLogboekDetails.eigenaar.tussenvoegsel}} {{vm.selectedLogboekDetails.eigenaar.achternaam}}"></span>\r\n                        <span data-ng-bind-template="Aangemaakt op {{vm.selectedLogboekNode.data.aangemaaktOp | date:\'d MMMM yyyy\'}}"></span>\r\n                        <span ng-if="vm.selectedLogboekDetails.verlooptOp">Verloopt op: {{vm.selectedLogboekDetails.verlooptOp | date:\'d MMMM yyyy\'}}</span>\r\n                        <span ng-if="vm.selectedLogboekDetails.isAfgerond">Status: afgerond</span>\r\n                    </div>\r\n                </div>\r\n                <div class="logboek-details">\r\n                    <b>Inhoud</b>\r\n                    <div class="temp-details-content" data-ng-bind-html="vm.selectedLogboekDetails.inhoud"></div>\r\n                </div>\r\n                <div class="logboek-details" ng-if="vm.selectedLogboekDetails.formulier.layout.length">\r\n                    <div class="temp-details-content" ng-repeat="item in vm.selectedLogboekDetails.formulier.layout">\r\n                        <dk-bedrag ng-if="item.type === \'bedrag\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-bedrag>\r\n                        <dk-bestand ng-if="item.type === \'bestand\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-bestand>\r\n                        <dk-datum ng-if="item.type === \'datum\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-datum>\r\n                        <dk-getal ng-if="item.type === \'getal\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-getal>\r\n                        <dk-keuzelijst ng-if="item.type === \'keuzelijst\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-keuzelijst>\r\n                        <dk-logisch ng-if="item.type === \'logisch\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-logisch>\r\n                        <dk-lookup ng-if="item.type === \'lookup\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-lookup>\r\n                        <dk-lookup-c ng-if="item.type === \'lookupc\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-lookup-c>\r\n                        <dk-memo ng-if="item.type === \'memo\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-memo>\r\n                        <dk-tekst ng-if="item.type === \'tekst\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-tekst>\r\n                        <dk-tijd ng-if="item.type === \'tijd\'" model="item" value="vm.selectedLogboekDetails.waarden[item.datafield]"></dk-tijd>\r\n                        <dk-groep ng-if="item.type === \'groep\'" groep="item" waarden="vm.selectedLogboekDetails.waarden"></dk-groep>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(5),r=n(6),o=n(4),a=function(){function t(e,t,n,i,r,o,a){this.$rootScope=e,this.$window=t,this.currentUser=n,this.$timeout=i,this.sessieService=r,this.toestemmingsService=o,this.externeKoppelingenService=a,this.ImageSrc="",this.Naam="",this.isStudent=!0,this.buttonVisibility={messages:!1,help:!1},this.showUserMenu=!1,this.showGripper=!1,this.showChildPicker=!1,this.showHelpMenu=!1,this.version=globalSettings.clientVersion}return t.prototype.$onInit=function(){var e=this;this.hideUserMenuOnBodyClick(),this.currentUser&&this.currentUser.person&&this.currentUser.person.imageUrl&&(this.ImageSrc=this.currentUser.person.imageUrl),this.currentUser&&this.currentUser.person&&this.currentUser.person.fullName&&(this.Naam=this.currentUser.person.fullName),this.isStudent=!this.currentUser.isInRole(o.a.Ouder),this.buttonVisibility.messages=this.currentUser.hasPrivilege(i.a.Berichten,r.a.Read),this.$rootScope.$on("HIDE_ACCOUNT_MENU",function(){e.showUserMenu=!1,e.showHelpMenu=!1}),this.externeKoppelingenService.getExterneKoppelingen().then(function(t){t.links.magisterMe&&(e.externeKoppeling=t,e.showGripper=!0)})},t.prototype.toggleShowUserMenu=function(e){this.$rootScope.$broadcast("HIDE_CHILD_MENU"),this.showHelpMenu=!1,e.preventDefault(),e.stopPropagation(),this.showUserMenu=!this.showUserMenu},t.prototype.onOpenExterneKoppeling=function(){this.$rootScope.isProductswitchVisible=!0},t.prototype.logOff=function(){this.toestemmingsService.skipReminder=!1,this.sessieService.logoff()},t.prototype.toggleHelpMenu=function(e){this.$rootScope.$broadcast("HIDE_CHILD_MENU"),this.showUserMenu=!1,e.preventDefault(),e.stopPropagation(),this.showHelpMenu=!this.showHelpMenu},t.prototype.hideUserMenuOnBodyClick=function(){var t=this;e("body")[0].addEventListener("click",function(){return t.hideOpenMenus()}),window.addEventListener("blur",function(){return t.hideOpenMenus()})},t.prototype.hideOpenMenus=function(){var e=this;this.$timeout(function(){e.showHelpMenu=!1,e.showUserMenu=!1})},t}()}).call(this,n(10))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(0),r=function(){function t(){this.HEADER_HEIGHT=32,this.GRID_CONTENT_CLASS=".k-grid-content",this.GRID_HEADER_CLASS=".k-grid-header",this.GRID_DELETE_HEADER_CLASS="grid-no-header",this.GRID_NO_VERTICAL_SCROLLBAR_CLASS="no-padding"}return t.prototype.resizeGrid=function(t){var n=t.find(this.GRID_CONTENT_CLASS),i=t.innerHeight();e.isUndefined(n)||(t.hasClass(this.GRID_DELETE_HEADER_CLASS)?n.height(i):n.height(i-this.HEADER_HEIGHT),this.adjustHeaderToScrollbar(t))},t.prototype.adjustHeaderToScrollbar=function(t){var n=t.find(this.GRID_CONTENT_CLASS),i=t.find(this.GRID_HEADER_CLASS);e.isUndefined(n)||(n.get(0).scrollHeight>n.innerHeight()?i.removeClass(this.GRID_NO_VERTICAL_SCROLLBAR_CLASS):i.addClass(this.GRID_NO_VERTICAL_SCROLLBAR_CLASS))},t.$inject=[t],t}(),o=function(){function t(e,t){var n=this;this.$window=e,this.$log=t,this.restrict="A",this.controller=r.$inject,this.link=function(e,t,i,r){return n.linkFn(e,t,i,r)}}return t.prototype.linkFn=function(t,n,r,o){var a=this,s=t.$eval(r.kOptions);if(Object(i.t)(s)){var l=s.dataBound;s.dataBound=function(e){Object(i.t)(l)&&l(e),o.adjustHeaderToScrollbar(n)}}else this.$log.error("Geen gridOptions gevonden!");var d=function(){o.resizeGrid(n)};e.element(this.$window).bind("resize",d),t.$on("$destroy",function(){e.element(a.$window).unbind("resize",d)})},t.$inject=["$window","$log",function(e,n){return new t(e,n)}],t}()}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i,r,o){n.d(t,"a",function(){return c});var a=n(4),s=n(0),l=n(8),d=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c=function(){function t(e,t,i,r,o,a,s,l,d){var c=this;this.$rootScope=e,this.$window=t,this.$location=i,this.menuService=r,this.applicationService=o,this.instellingService=a,this.currentUser=s,this.menuDependencyService=l,this.bestellenService=d,this.expanded=!0,this.template=n(260),this.replace=!0,this.restrict="A",this.controllerAs="ctrl",this.scope=!0,this.link=function(e,t,n){return c.linkFn(e,t,n)}}return t.prototype.linkFn=function(t,n,r){var o=this;e.register("only screen and (max-width: 1024px)",{match:function(){o.applicationService.toggleHoofdMenu(!1)}},!0),t.menuItemState=l.i,this.watchRouteChange(t),this.$rootScope.menuExpanded=i(window).width()>1024,this.expanded=this.$rootScope.menuExpanded,t.onToggleMenuVisibility=function(){var e=o.applicationService.toggleHoofdMenu();o.$rootScope.menuExpanded=e,o.expanded=e,o.saveMenuSetting(e),o.activeItem&&(o.activeItem.expanded?o.toggleExpandedParent(t,o.activeItem):o.activeItem.parent&&o.toggleExpandedParent(t,o.activeItem.parent))},t.onSelectItem=function(e){return o.handleOnSelectItem(e,t)},this.currentUser.noConsentWithBerichten?(t.menuitems=[],this.$location.path("/berichten")):this.initMenu(t),t.clientVersion=globalSettings.clientVersion;var a=this.$window.document.querySelector("meta[name=buildDate]");t.buildDate=a?new Date(a.content).toLocaleString():"",t.onMouseOver=function(e){return o.onMouseOver(e)},t.onMouseLeave=function(){return o.onMouseLeave()},t.$on("CHILD_RELOAD",function(){o.initMenu(t)})},t.prototype.initMenu=function(e){var t=this.setMenuItemParent(this.menuService.getMenuItems());e.menuitems=t,this.bestellenService.getBestelInfo().then(function(t){t.kanBestellen&&(r.findWhere(e.menuitems,{title:"Bestellen"}).visibleState=l.i.SHOW)}).finally(function(){var e=i(".main-menu li.active");e.length&&e.offset().top>=i(".menu-container").height()&&i(".menu-container").scrollTop(e.offset().top)}),this.menuDependencyService.filterByDependency(e.menuitems),this.setActiveMenuItem(e,this.$location.path(),!1)},t.prototype.toggleExpandedParent=function(e,t){var n=r.find(e.menuitems,function(e){return e.title===t.title});n.expanded=!n.expanded},t.prototype.initSubtitles=function(e){var t=this;return r.map(e,function(e){return e.subtitle=null,"agenda"===e.title.toLowerCase()&&t.currentUser.isInRole(a.a.Ouder)&&(e.subtitle=t.currentUser.relatedPersons.current.fullName),o.isDefined(e.children)&&(e.children=t.initSubtitles(e.children)),o.copy(e)}),e},t.prototype.saveMenuSetting=function(e){this.instellingService.set(this.currentUser.person.id,"menuSetting",""+e)},t.prototype.watchRouteChange=function(e){var t=this;e.$on("routeChanged",function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];t.setMenuItemsHoverDefault(e.menuitems);var a=i[0],s=i[1];o.isUndefined(a)||(o.isUndefined(s)||a.originalPath!==s.originalPath)&&t.setActiveMenuItem(e,a.originalPath)})},t.prototype.setActiveMenuItem=function(e,t,n){void 0===n&&(n=!0);for(var i=e.menuitems,r=0;r<i.length;r++){var a=o.isDefined(i[r].url)&&null!==i[r].url?i[r].url.replace("#",""):"";if(a.indexOf("?")>-1&&(a=a.substr(0,a.indexOf("?"))),o.isDefined(i[r].children)||"#"===i[r].url){var s=this.isChildActiveMenuItem(i[r],t);if(null!==s){this.setActiveMenuItemInternal(!0,r,e,n,s),i[r].subtitle=s.title;continue}i[r].subtitle=null}else if(a.length>0&&t&&t.indexOf(a)>-1){this.setActiveMenuItemInternal(!0,r,e,n);continue}this.setActiveMenuItemInternal(!1,r,e,n)}},t.prototype.setActiveMenuItemInternal=function(e,t,n,i,r){i&&this.menuService.setMenuActive(e,t);var o=n.menuitems[t];o.isActive!==e&&(o.isActive=e,e&&(this.activeItem=o)),e||this.setChildrenInactive(o),Object(s.w)(r)||(this.setChildrenInactive(o),o.expanded=this.expanded,r.isActive=e)},t.prototype.setChildrenInactive=function(e){var t=this;r.each(e.children,function(e){e.isActive=!1,Object(s.w)(e.children)||t.setChildrenInactive(e)})},t.prototype.setMenuItemsHoverDefault=function(e){var t=this;r.each(e,function(e){e.hover=!1,Object(s.t)(e.children)&&t.setMenuItemsHoverDefault(e.children)})},t.prototype.isChildActiveMenuItem=function(e,t){if(o.isDefined(e.children)&&null!==e.children&&o.isDefined(t))for(var n=0;n<e.children.length;n++){var i=o.isDefined(e.children[n].url)&&null!==e.children[n].url?e.children[n].url.replace("#",""):"";if(i.length>0&&t.indexOf(i)>-1)return e.children[n];if(o.isDefined(e.children[n].children)&&null!==e.children[n].children)for(var r=0;r<e.children[n].children.length;r++){var a=e.children[n].children[r].url.replace("#","");if(a.length>0&&t.indexOf(a)>-1)return e.children[n]}}return null},t.prototype.openExterneKoppeling=function(e){this.$window.open(e)},t.prototype.setMenuItemParent=function(e){return e.map(function(e){return d({},e,{children:e.children?e.children.map(function(t){return d({},t,{parent:e})}):void 0})})},t.prototype.handleOnSelectItem=function(e,t){var n=this;if(this.hideFauxPopupMenu(),e.children){if(this.expanded||e.expanded||this.showFauxPopupMenu(e,t),e.expanded=!e.expanded,this.activeItem&&this.activeItem.parent&&this.activeItem.parent!==e||this.activeItem&&this.activeItem.children&&this.activeItem!==e)if(this.activeItem.children)this.activeItem.expanded=!1;else if(this.activeItem.parent){var i=r.find(t.menuitems,function(e){return e.title===n.activeItem.parent.title});i.expanded=!1,i.isActive=!1}this.activeItem&&(this.activeItem.isActive=!1),this.activeItem=e,this.activeItem.isActive=!0}else if(e.parent)this.activeItem=e,this.activeItem.isActive=!0,e.url&&this.$location.path(e.url).search("returnUrl",null);else{if(this.activeItem&&this.activeItem.children&&this.activeItem.expanded||this.activeItem&&this.activeItem.parent){if(this.activeItem.parent){this.activeItem.isActive=!1;var o=r.find(t.menuitems,function(e){return e.title===n.activeItem.parent.title});o.expanded=!1,o.isActive=!1}else if(this.activeItem.children){this.activeItem.isActive=!1;var a=r.find(t.menuitems,function(e){return e.title===n.activeItem.title});a.expanded=!1,a.isActive=!1}}else this.activeItem&&this.activeItem!==e&&(this.activeItem.isActive=!1);this.activeItem=e,this.activeItem.isActive=!0,e.url&&this.$location.path(e.url).search("returnUrl",null)}},t.prototype.showFauxPopupMenu=function(e,t){var n=this,r=i("#menu-"+e.title.toLowerCase()),o=i(".popup-menu",r.parent()),a=i(".faux.popup-menu");o.children().clone().appendTo(a),a.css({top:r.parent().position().top,display:"block"}),i("a",a).click(function(r){var o=i(r.currentTarget).text(),a=e.children.filter(function(e){return e.title===o});a.length&&(n.handleOnSelectItem(a.pop(),t),n.hideFauxPopupMenu())})},t.prototype.hideFauxPopupMenu=function(){i(".faux.popup-menu").hide(),i(".faux.popup-menu").children().remove()},t.prototype.onMouseOver=function(e){if(!this.expanded){var t=i(e.currentTarget),n=i(".caption",t),r=i("#faux-label");r.text(n.text()),r.css({top:t.position().top+8,display:"block"})}},t.prototype.onMouseLeave=function(){i("#faux-label").hide()},t.$inject=["$rootScope","$window","$location","menuService","applicationService","instellingService","currentUser","menuDependencyService","bestellenService",function(e,n,i,r,o,a,s,l,d){return new t(e,n,i,r,o,a,s,l,d)}],t}()}).call(this,n(256),n(10),n(3),n(1))},,,,,function(e,t){e.exports='<nav>\r\n  <div class="menu-container">\r\n    <ul class="main-menu">\r\n      <li ng-repeat="item in menuitems"\r\n        ng-class="{\r\n          \'active\': item.isActive,\r\n          \'children\': item.children, \r\n          \'expanded\': item.expanded,\r\n          \'highlight-menu\': item.visibleState === 1\r\n        }"\r\n        ng-hide="item.visibleState === 2"\r\n        ng-attr-id="{{item.id}}"\r\n        id="{{item.title}}"\r\n        ng-mouseover="onMouseOver($event)"\r\n        ng-mouseleave="onMouseLeave()">\r\n        <a ng-click="onSelectItem(item)" id="menu-{{item.title.toLowerCase()}}">\r\n          <i class="far" ng-if="item.icon" ng-class="item.icon"></i>\r\n          <div class="icon-stack" ng-if="item.text">\r\n            <i class="far fa-circle fa-stack-2x"></i>\r\n            <div ng-bind="item.text"></div>\r\n          </div>\r\n          <span ng-bind="item.title" class="caption"></span>\r\n        </a>\r\n        <div ng-if="item.children" class="popup-menu">\r\n          <h3 ng-bind="item.title"></h3>\r\n          <ul>\r\n            <li ng-repeat="child in item.children" class="submenu" ng-class="{\'active\': child.isActive}" ng-attr-id="{{child.id}}">\r\n              <a ng-bind="child.title" ng-click="onSelectItem(child)" title="" id="menu-{{child.title.toLowerCase()}}"></a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  <span id="faux-label"></span>\r\n  <div class="faux popup-menu"></div>\r\n  <div class="menu-footer">\r\n    <a ng-click="onToggleMenuVisibility()">\r\n      <i class="far fa-angle-double-left"></i>\r\n      <span>Inklappen</span>\r\n    </a>\r\n  </div>\r\n</nav>\r\n'},function(e,t){e.exports='<div>\r\n    <a title="" href="https://magisteraction/selectschool/">\r\n        <span class="icon-settings"></span>\r\n        <em data-ng-bind="vm.licentie"></em>\r\n    </a>\r\n</div>'},function(e,t){e.exports='<aside>\r\n    <div class="head-bar">\r\n        <ul class="tabs">\r\n            <li data-ng-show="tab.enabled" data-ng-class="{asideTrigger: true, active: tab.active}"\r\n                data-ng-repeat="tab in vm.tabs" data-ng-click="vm.openTab(tab)" class="{{tab.class}}">\r\n                <a href="">{{ tab.title }}</a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="content-container">\r\n        <div class="sheets">\r\n            <div ng-transclude></div>\r\n        </div>\r\n    </div>\r\n</aside>\r\n'},function(e,t){e.exports='<div class="tabsheet" data-ng-class="{active: vm.tab.active}" id="{{vm.tab.id}}">\r\n    <div ng-transclude></div>\r\n</div>'},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return c});var r,o,a=n(0),s=n(8),l=n(265);!function(e){e[e.NONE=-100]="NONE",e[e.ENTER=13]="ENTER",e[e.NAVIGATE_DOWN=40]="NAVIGATE_DOWN",e[e.NAVIGATE_UP=38]="NAVIGATE_UP"}(r||(r={})),function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.IELEFT=1]="IELEFT",e[e.IERIGHT=2]="IERIGHT",e[e.IEMIDDLE=4]="IEMIDDLE"}(o||(o={}));var d=function(){function t(e,t,i,o,a,d){this.$scope=e,this.$timeout=t,this.$q=i,this.$rootScope=o,this.$templateCache=a,this.tabService=d,this.TOGGLE_GRID_COLUMN_VISIBILITY_EVENT="ToggleGridColumnVisibility",this.ROW_HEIGHT=40,this.HEADER_ROW_HEIGHT=34,this.VIRTUALIZATION_TRESHOLD=100,this.HEADER_CHECKBOX_COLUMN="",this.PREFIX_COLUMN_DATA="data.",this.PROPERTY_NAME_ITEMS="items",this.CLASS_DROPDOWN_CELL="grid-select",this.COLUMN_WIDTH_CHECKBOX_COLUMN="40px",this.PROPERTY_NAME_IS_CHECKED="isChecked",this.CLASS_HEADER_CHECKBOX_COLUMN="gridCheckboxHeader",this.GRID_OPTIONS_DEFAULT={rowTemplate:s.e,showSelectionCheckbox:!1,enableColumnResize:!0,maintainColumnRatios:!0,enablePinning:!1,multiSelect:!1,keepLastSelected:!0,enableCellSelection:!1,enableCellEdit:!1,enableColumnReordering:!0,enableSorting:!0,enableHighlighting:!1,showGroupPanel:!1,filterOptions:{filterText:"",useExternalFilter:!1},enablePaging:!1,pagingOptions:{pageSizes:[25,50,100],pageSize:25,totalServerItems:0,currentPage:1},showColumnMenu:!1},this.GRID_OPTIONS_HANDHELD_OVERRIDE={enableColumnResize:!1,enableColumnReordering:!1},a.put(s.a,n(266)),a.put(s.b,n(267)),a.put(s.e,n(268)),a.put(s.g,n(269)),a.put(s.k,n(270)),a.put(s.l,n(271)),a.put(s.m,n(272)),a.put(s.n,n(273)),this.isGridLoaded=!1,this.currentKeyBoardCode=r.NONE,this.customColumnFieldNames=[],this.LAYOUT_PLUGIN=new l.a(t,i),this.init()}return t.prototype.init=function(){var e=this,t=this.$scope;t.isVisible=!1,t.isHeaderCheckboxChecked=!1,t.tabContainerVisible=this.tabService.tabState.tabContainerVisible,t.$watch("tabContainerVisible",function(){e.onSideBarToggled()}),t.onHeaderCheckboxCheckedChange=function(t){return e.onHeaderCheckboxCheckedChange(t)},t.onRadioButtonClick=function(t,n){return e.onRadioButtonClick(t,n)},t.onRadioButtonCheckboxClick=function(t,n,i){e.onRadioButtonCheckboxClick(t,n,i)},this.notifyOnGridLoaded(),this.watchOnItemsLoaded(),this.watchOnMenuToggled(),t.$on(this.TOGGLE_GRID_COLUMN_VISIBILITY_EVENT,function(n,i,r){i===t.domain&&e.toggleColumnVisibility(r)})},t.prototype.createGridOptions=function(t,n){var i=this;this.initColumns(n);var r={data:this.PROPERTY_NAME_ITEMS,selectedItems:[],columnDefs:n,rowHeight:this.ROW_HEIGHT,headerRowHeight:this.HEADER_ROW_HEIGHT,virtualizationThreshold:this.VIRTUALIZATION_TRESHOLD,afterSelectionChange:function(e,t){i.onAfterSelectionStateChange(i.$scope,e,t)},beforeSelectionChange:function(e,t){return i.onBeforeSelectionStateChange(i.$scope,e,t)},plugins:[this.LAYOUT_PLUGIN]};return e.extend(r,this.GRID_OPTIONS_DEFAULT),Object(a.w)(t)||e.extend(r,t),this.setHandHeldGridOptions(r),!0===r.showSelectionCheckbox&&this.prependCheckBoxColumn(r,n),r},t.prototype.onRadioButtonClick=function(e,t){var n=i.find(this.$scope.items,function(n){return!0===n.data[t]&&n!==e});e===n||!1===e.data[t]?e.data[t]=!0:Object(a.w)(n)||(n.data[t]=!1)},t.prototype.onRadioButtonCheckboxClick=function(e,t,n){var r=i.find(this.$scope.items,function(n){return!0===n[t]&&n!==e});Object(a.w)(r)||(r[t]=!1),Object(a.q)(n.onFieldValueEdited)&&n.onFieldValueEdited(e)},t.prototype.watchOnItemsLoaded=function(){var e=this,t=this.$scope.$watch(this.PROPERTY_NAME_ITEMS,function(n){Object(a.w)(n)||(e.initColumns(i.where(e.$scope.columnDefinitions(),{custom:!0})),e.setVisible(),t())})},t.prototype.initColumns=function(e){var t=this;i.each(e,function(e){e.originalField=e.field,(Object(a.w)(e.removeDataPrefix)||!1===e.removeDataPrefix)&&(e.field=t.PREFIX_COLUMN_DATA+e.originalField),e.custom&&t.createCustomColumn(e)}),this.convertColumnTypes(e)},t.prototype.notifyOnGridLoaded=function(){var e=this,t=this.$scope.$on("ngGridEventRows",function(n,o){if(!Object(a.w)(e.$scope.gridOptions.ngGrid)&&!Object(a.w)(n.targetScope)){n.targetScope.gridId===e.$scope.gridOptions.gridId&&(o.length>0&&e.selectRowItem(0),e.isGridLoaded=!0,e.LAYOUT_PLUGIN.updateGridLayout().then(function(){e.$rootScope.$broadcast("GRID_LOADED",e.$scope.domain)}),t());var s=e.$scope.gridOptions.ngGrid.$viewport;s.focus(),s.bind("keydown",function(t){n.targetScope.renderedRows.length-1===i.indexOf(n.targetScope.renderedRows,i.findWhere(n.targetScope.renderedRows,{selected:!0}))&&t.keyCode===r.ENTER&&e.handleKeyPress(r.ENTER)})}})},t.prototype.watchOnMenuToggled=function(){var e=this;this.$scope.$on("MENU_TOGGLE",function(){e.LAYOUT_PLUGIN.updateGridLayout()})},t.prototype.onSideBarToggled=function(){this.LAYOUT_PLUGIN.updateGridLayout()},t.prototype.setHandHeldGridOptions=function(t){Object(a.r)()&&e.extend(t,this.GRID_OPTIONS_HANDHELD_OVERRIDE)},t.prototype.onAfterSelectionStateChange=function(e,t,n){if(this.isGridLoaded&&this.currentKeyBoardCode===r.NONE&&!Object(a.w)(t)&&!0===t.selected){var o=t.entity,s=i.indexOf(e.items,o);this.$timeout(function(){e.onRowClick({item:o,index:s})},0,!0)}},t.prototype.onBeforeSelectionStateChange=function(e,t,n){var r=this;if(!this.isGridLoaded)return!0;var s=n.which||n.keyCode,l=i.some(o,function(e){return s===e});if(!Object(a.w)(s)&&!l)return this.handleKeyPress(s);if(!Object(a.w)(t)&&!0===t.selected){var d=t.entity,c=i.indexOf(e.items,d);return this.$timeout(function(){r.$scope.gridOptions.enableDoubleClick?e.onRowDoubleClick({item:d,index:c}):e.onRowClick({item:d,index:c})},0,!0),!1}return!0},t.prototype.handleKeyPress=function(e){var t=this;if(this.currentKeyBoardCode=e||r.NONE,e===r.NONE)return!0;if(!Object(a.w)(this.$scope.gridOptions.selectedItems)){var n,o=this.$scope.gridOptions.selectedItems[0],s=i.indexOf(this.$scope.items,o);return this.$scope.$apply(function(i){e===r.ENTER?(n=t.$scope.onRowDoubleClick({item:o,index:s}),Object(a.y)(n)&&(n=t.$scope.onRowClick({item:o,index:s}))):n=!t.$scope.gridOptions.enableDoubleClick||t.$scope.onRowClick({item:o,index:s})}),n}return!0},t.prototype.onHeaderCheckboxCheckedChange=function(e){i.each(this.$scope.items,function(t){t.isChecked=e})},t.prototype.createCustomColumn=function(e){Object(a.w)(e.customDataFilter)||Object(a.w)(e.field)||Object(a.e)(this.customColumnFieldNames,e.field)||(this.customColumnFieldNames.push(e.field),Object(a.w)(this.$scope.items)||i.each(this.$scope.items,function(t){var n=e.customDataFilter(t);t[e.field]=n}))},t.prototype.convertColumnTypes=function(e){for(var t=0;t<e.length;t++)switch(e[t].columnType){case s.c.Checkbox:e[t]=this.convertToCheckboxDefinition(e[t]);break;case s.c.RadioButton:e[t]=this.convertToRadioButtonDefinition(e[t]);break;case s.c.Dropdown:e[t]=this.convertToDropdownDefinition(e[t]);break;case s.c.RadioButtonCheckbox:e[t]=this.convertToRadioButtonCheckboxDefinition(e[t])}},t.prototype.convertToDropdownDefinition=function(t){var n=e.copy(t);return e.extend(n,{cellTemplate:n.cellTemplate||s.g,enableCellEdit:!1,resizable:!1,cellClass:this.CLASS_DROPDOWN_CELL}),n},t.prototype.convertToRadioButtonDefinition=function(e){var t=this.convertToCheckboxDefinition(e);return t.cellTemplate=s.k,t},t.prototype.convertToCheckboxDefinition=function(t){var n=e.copy(t);return e.extend(n,{cellTemplate:t.cellTemplate||s.a,enableCellEdit:!1,resizable:!1,headerClass:this.CLASS_HEADER_CHECKBOX_COLUMN}),n},t.prototype.convertToRadioButtonCheckboxDefinition=function(e){return this.convertToCheckboxDefinition(e)},t.prototype.prependCheckBoxColumn=function(e,t){e.showSelectionCheckbox=!1;var n={field:this.PROPERTY_NAME_IS_CHECKED,cellTemplate:s.a,displayName:this.HEADER_CHECKBOX_COLUMN,width:this.COLUMN_WIDTH_CHECKBOX_COLUMN,maxWidth:this.COLUMN_WIDTH_CHECKBOX_COLUMN,enableCellEdit:!1,headerCellTemplate:s.b};Object(a.w)(t)||t.unshift(n)},t.prototype.setVisible=function(){this.$scope.isVisible=!0},t.prototype.selectRowItem=function(e){this.$scope.gridOptions.selectItem(e,!0)},t.prototype.toggleColumnVisibility=function(e){var t=this,n=i.find(this.$scope.gridOptions.$gridScope.columns,function(n){return!0===n.colDef.removeDataPrefix?n.field===e:n.field===t.PREFIX_COLUMN_DATA+e});Object(a.w)(n)||n.toggleVisible()},t.$inject=["$scope","$timeout","$q","$rootScope","$templateCache","tabService"],t}();function c(){return{replace:!1,controller:d,restrict:"E",scope:{items:"=",columnDefinitions:"&",config:"@",onRowClick:"&",onRowDoubleClick:"&",domain:"@"},template:n(274),compile:function(e,t){return{pre:function(e,t,n,i){var r=e.$eval(e.config),o=e.columnDefinitions();e.gridOptions=i.createGridOptions(r,o),e.unselectableRows=r.unselectableRows},post:function(e,t,n,i){}}}}}}).call(this,n(1),n(3))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(e,t){this.$timeout=e,this.$q=t}return t.prototype.init=function(e,t,n){this.$scope=e,this.grid=t,this.domUtilityService=n.DomUtilityService},t.prototype.updateGridLayout=function(){var t,n=this,i=this.$q.defer(),r=this.$timeout(function(){e.isDefined(n.$scope)&&e.isDefined(n.grid)&&(n.domUtilityService.RebuildGrid(n.$scope,n.grid),t=n.$timeout(function(){n.domUtilityService.RebuildGrid(n.$scope,n.grid),i.resolve(),n.destroy(r),n.destroy(t)},0,!0))},300,!0);return i.promise},t.prototype.destroy=function(e){this.$timeout.cancel(e)},t}()}).call(this,n(1))},function(e,t){e.exports='<span class="check">\r\n    <input type="checkbox" data-ng-model="row.entity.data[col.colDef.originalField]" class="checkbox" data-ng-change="col.colDef.onFieldValueEdited(row.entity)" />\r\n    <label><span></span></label>\r\n</span>\r\n'},function(e,t){e.exports='<span class="check gridCheckboxHeader">\r\n    <input type="checkbox" data-ng-model="isHeaderCheckboxChecked" data-ng-change="onHeaderCheckboxCheckedChange(isHeaderCheckboxChecked)" />\r\n    <label><span></span></label>\r\n</span>'},function(e,t){e.exports='<div data-ng-class="{\'unselectable\' : unselectableRows === true}">\r\n        <div data-ng-repeat="col in renderedColumns" data-ng-class="col.colIndex();" class="ngCell {{col.cellClass}}">\r\n        <div class="ngVerticalBar" data-ng-class="{ ngVerticalBarVisible: !$last  }">&nbsp;</div>\r\n        <div data-ng-cell></div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="fancy-select">\r\n    <select class="select"\r\n            data-kendo-drop-down-list\r\n            data-k-data-source="row.entity.data[col.colDef.originalField]"\r\n            data-k-ng-model="row.entity[col.colDef.originalField]"\r\n            data-k-value-primitive="true"\r\n            required="required" \r\n            ng-style="{\'max-width\': col.colDef.dropdownWidth}">\r\n    </select>\r\n</div>'},function(e,t){e.exports='<span class="check">\r\n    <input data-ng-if="row.rowIndex === 0" ng-init="row.entity.data[col.colDef.originalField] = true" type="checkbox" data-ng-model="row.entity.data[col.colDef.originalField]" class="radio" data-ng-change="onRadioButtonClick(row.entity, col.colDef.originalField)" />\r\n    <input data-ng-if="row.rowIndex !== 0" type="checkbox" data-ng-model="row.entity.data[col.colDef.originalField]" class="radio" data-ng-change="onRadioButtonClick(row.entity, col.colDef.originalField)" />\r\n    <label><span></span></label>\r\n</span>'},function(e,t){e.exports='<span class="check">\r\n    <input type="checkbox" data-ng-model="row.entity[col.colDef.originalField]" class="checkbox" data-ng-change="onRadioButtonCheckboxClick(row.entity, col.colDef.originalField, col.colDef)" />\r\n    <label><span></span></label>\r\n</span>'},function(e,t){e.exports='<span class="check">\r\n    \x3c!-- De checkbox model wordt met deze template gebind aan de row object, niet aan de data object. Dit is handig wanneer je kolommen hebt die niet direct van de data komen. --\x3e\r\n    <input type="checkbox" data-ng-model="row.entity[col.colDef.originalField]" class="checkbox" data-ng-change="col.colDef.onFieldValueEdited(row.entity)" />\r\n    <label><span></span></label>\r\n</span>\r\n'},function(e,t){e.exports='<div data-ng-bind="row.entity.data[col.colDef.originalField]"></div>'},function(e,t){e.exports='<div ng-grid="gridOptions" ng-if="isVisible"></div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(e,t,n){this.$rootScope=e,this.$injector=t,this.$timeout=n}return t.prototype.filterByDependency=function(t){var n=this;e.each(t,function(e){Object(i.p)(e.dependency)||n.$injector.get(e.dependency,"").showItem().then(function(t){e.visibleState=t})})},t.$inject=["$rootScope","$injector",t],t}()}).call(this,n(3))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(8),r=n(0),o=function(){function t(e,t,n,i,r,o){this.$q=e,this.$resource=t,this.cacheService=n,this.magisterLocale=i,this.applicationService=r,this.versieResource=o,this.schoolinformatieKey="Schoolinformatie",this.schoolinformatiePromiseKey="SchoolinformatiePromise",this.createCache(),this.resource=this.createSchoolInformatieResource()}return t.prototype.getSchoolinformatie=function(){var e=this,t=this.$q.defer(),n=this.cache.get(this.schoolinformatieKey);if(!Object(r.w)(n))return t.resolve(n),t.promise;var i=this.cache.get(this.schoolinformatiePromiseKey);return Object(r.w)(i)?(this.cache.put(this.schoolinformatiePromiseKey,t.promise),this.resource.get(function(n){return e.handleGetSchoolinformatie(t,n)},function(n){return e.handleErrorPromise(t)}),t.promise):i},t.prototype.handleGetSchoolinformatie=function(e,t){this.cache.put(this.schoolinformatieKey,t),this.cache.remove(this.schoolinformatiePromiseKey),e.resolve(t)},t.prototype.createCache=function(){this.cache=this.cacheService.createCache("SiC",{capacity:2,maxAge:36e5,recycleFreq:6e4,storageMode:"localStorage"})},t.prototype.createSchoolInformatieResource=function(){return this.$resource(globalSettings.apiHost+"api/schoolconfiguratie")},t.prototype.handleErrorPromise=function(e){this.cache.remove(this.schoolinformatiePromiseKey),this.handleErrorResult(this.magisterLocale.SchoolInformatieStrings.SCHOOLINFORMATIE_NOT_RETRIVED),e.reject()},t.prototype.handleErrorResult=function(t,n,r){void 0===n&&(n=i.j.ERROR);var o=e.isDefined(t)?t:this.magisterLocale.NotificationStrings.CONTENT_UNKNOWN_ERROR;this.applicationService.showMessage(o,n,r)},t.prototype.getVersie=function(){return this.versieResource.get()},t.$inject=["$q","$resource","cacheService","magisterLocale","applicationService","versieResource",t],t}()}).call(this,n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(129),r=n(130),o=n(278),a=e.module("Magister.Web.Ouderavond",[]);a.service("ouderavondService",i.a.$inject),a.service("ouderavondOverzichtMenuService",r.a.$inject),a.factory("ouderavondModelFactory",o.a.$inject);var s={module:["$ocLazyLoad",function(e){return n.e(12).then(n.bind(null,592)).then(function(t){var n=t.ouderavondAMD;return e.load(n)})}]};a.config(["$routeProvider",function(e){e.when("/ouderavond",{pageTitle:"Ouderavond",controller:"OuderavondController",resolve:s,template:n(280)}).when("/ouderavond-overzicht",{pageTitle:"Ouderavond overzicht",controller:"OuderavondOverzichtController",resolve:s,template:n(281)})}])}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(279),r=function(){function e(e,t){this.$q=e,this.ouderavondService=t}return e.prototype.createInstance=function(){return new i.a(this.$q,this.ouderavondService)},e.$inject=["$q","ouderavondService",function(t,n){return new e(t,n)}],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(e,t){this.$q=e,this.ouderavondService=t}return t.prototype.getUitnodiging=function(e,t){var n=this;return Object(i.w)(this.uitnodigingDefer)&&(this.uitnodigingDefer=this.$q.defer(),this.ouderavondService.getUitnodiging(e,t).then(function(e){n.uitnodiging=e,n.uitnodigingDefer.resolve(e)})),this.uitnodigingDefer.promise},t.prototype.updateUitnodiging=function(e){return this.ouderavondService.putUitnodiging(e.Id,e)},t.prototype.getPersoneel=function(e){return this.ouderavondService.getPersoneel(e)},t.prototype.getGespreksverzoeken=function(e){return this.ouderavondService.getGespreksverzoeken(e)},t.prototype.createInschrijving=function(e){return this.ouderavondService.postInschrijving(e,this.getInschrijving())},t.prototype.updateInschrijving=function(){var t=e.find(this.uitnodiging.Links,function(e){return"Inschrijving"===e.Rel});return this.ouderavondService.putInschrijving(t.Href,this.getInschrijving())},t.prototype.getDagdelen=function(){return this.uitnodiging.Ouderavond.DagDelen},t.prototype.getInschrijving=function(){return Object(i.w)(this.dagdelenVoorkeuren)&&(this.dagdelenVoorkeuren=this.defaultDagdeelVoorkeuren()),{Id:this.bestaandeInschrijving?this.bestaandeInschrijving.Id:0,IdOuderavond:this.uitnodiging.Ouderavond.Id,IdPersoon:this.uitnodiging.IdPersoon,DagdeelVoorkeuren:this.dagdelenVoorkeuren,Personeelkeuzes:this.gekozenPersoneel,IsGeroosterd:!!this.bestaandeInschrijving&&this.bestaandeInschrijving.IsGeroosterd,LocatieAdres:this.bestaandeInschrijving?this.bestaandeInschrijving.LocatieAdres:"",LocatieOmschrijving:this.bestaandeInschrijving?this.bestaandeInschrijving.LocatieOmschrijving:""}},t.prototype.defaultDagdeelVoorkeuren=function(){return e.map(this.getDagdelen(),function(e){return{Id:0,IdOuderavondDagdeel:e.Id,Omschrijving:e.Omschrijving,Beginmoment:e.Beginmoment,Eindmoment:e.Eindmoment,Vroegmoment:e.VroegMoment,Laatmoment:e.LaatMoment,Beschikbaarheid:0,GlobaleTijdwens:0}})},t.prototype.setDagdelenVoorkeuren=function(e){this.dagdelenVoorkeuren=e},t.prototype.getDagdelenVoorkeuren=function(){return this.dagdelenVoorkeuren},t.prototype.setGekozenPersoneel=function(e){this.gekozenPersoneel=e},t.prototype.getGekozenPersoneel=function(){return this.gekozenPersoneel},t.prototype.getLeerlingNaamById=function(e){return this.ouderavondService.getLeerlingNaamById(e)},t.prototype.setBestaandeInschrijving=function(e){this.bestaandeInschrijving=e},t.prototype.getBestaandeInschrijving=function(){return this.bestaandeInschrijving},t.prototype.getIsDirty=function(){return this.isDirty},t.prototype.setIsDirty=function(e){this.isDirty=e},t}()}).call(this,n(3))},function(e,t){e.exports='<div data-sm-check-dirty="isDirty()"\r\n     data-dirty-message="{{dirtyMessage()}}"\r\n     data-dirty-yes-button="LeavePage"\r\n     data-dirty-cancel-button="Continue">\r\n</div>\r\n<sm-workflow data-title="Inschrijving ouderavond">\r\n    <wf-button data-is-enabled="isFinishEnabled()" data-on-click="onFinish()" data-title="inschrijven" data-finish-button="true"></wf-button>\r\n    <wf-button data-is-enabled="isAfmeldenEnabled()" data-on-click="onAfmelden()" data-title="afzeggen"></wf-button>\r\n\r\n    <step data-title="Schoolpersoneel" id="docentkeuze" data-step-controller="schoolPersoneelStepController">\r\n        <school-personeel-step></school-personeel-step>\r\n    </step>\r\n    <step data-title="Dagdeel" id="dagdeelkeuze" data-step-controller="dagdeelStepController">\r\n        <dagdeel-step></dagdeel-step>\r\n    </step>\r\n    <step data-title="Samenvatting" id="samenvatting" data-step-controller="samenvattingStepController">\r\n        <samenvatting-step></samenvatting-step>\r\n    </step>\r\n</sm-workflow>'},function(e,t){e.exports='<div class="container ng-scope">\r\n    <div class="head-bar" data-ng-click="headBarClick();">\r\n        <h1>Ouderavond overzicht</h1>\r\n        <div><a href="" title="" class="text-button" data-ng-click="onInschrijvenWijzigenClick()" class="ng-binding" data-ng-if="canInschrijven" data-ng-class="{\'disabled\': enrolmentPeriodExpired}" id="ouderavond-overzicht-inschrijven-knop">inschrijven</a></div>\r\n        <div><a href="" title="" class="text-button" data-ng-click="onInschrijvenWijzigenClick()" class="ng-binding" data-ng-if="canWijzigen" data-ng-class="{\'disabled\': enrolmentPeriodExpired}"  id="ouderavond-overzicht-wijzigen-knop">wijzigen</a></div>\r\n        <div><a href="" title="" class="text-button" data-ng-click="onAfmeldenClick()" class="ng-binding" data-ng-class="{\'disabled\': disableAfmeldenButton}" data-is-enabled="false" id="ouderavond-overzicht-afzeggen-knop">afzeggen</a></div>\r\n        <div><a href="" title="" data-ng-show="toonAdrukkenButton" data-ng-click="onAfdrukkenClick()" class="ng-binding" id="ouderavond-overzicht-afdrukken-knop">afdrukken</a></div>\r\n    </div>\r\n\r\n    <section class="main">\r\n        <div class="content-container multi-columns tri-columns">\r\n            <div class="col col-noprint">\r\n                <ul class="list duo-row">\r\n                    <li data-ng-class="{\'unread alert\': !entity.uitnodiging.HasInschrijvingen && !entity.uitnodiging.IsAfgemeld, \'active\' : entity === selectedItem}"\r\n                        data-ng-repeat="entity in items"\r\n                        data-sm-notify-complete="ouderavond">\r\n                        <a data-ng-click="setSelectedItem(entity)">\r\n                            <strong data-ng-bind="entity.uitnodiging.Ouderavond.Titel"></strong>\r\n                            {{entity.omschrijving}}\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="col double-col">\r\n\r\n                \x3c!-- OuderavondStatus.Inschrijven = 1--\x3e\r\n                <div class="content-padding" data-ng-show="selectedItem.status === 1">\r\n                    <h3 data-ng-bind="selectedItem.uitnodiging.Ouderavond.Titel"></h3>\r\n                    <br />\r\n                    U bent uitgenodigd voor de volgende ouderavond: {{selectedItem.uitnodiging.Ouderavond.Titel}} <br /><br />\r\n                    Inschrijven is mogelijk tot <span data-ng-bind="selectedItem.uitnodiging.Ouderavond.EindeInschrijven | date:\'EEEE dd MMMM yyyy HH:mm\'"> </span> uur.\r\n                </div>\r\n\r\n                \x3c!-- OuderavondStatus.Verlopen = 2 --\x3e\r\n                <div class="content-padding" data-ng-show="selectedItem.status === 2">\r\n                    <h3 data-ng-bind="selectedItem.uitnodiging.Ouderavond.Titel"></h3>\r\n                    <br />\r\n                    De inschrijfperiode is verlopen. Het is niet mogelijk om in te schrijven via Magister.\r\n                </div>\r\n\r\n                \x3c!-- OuderavondStatus.Afgemeld = 3 --\x3e\r\n                <div class="content-padding" data-ng-show="selectedItem.status === 3">\r\n                    <h3 data-ng-bind="selectedItem.uitnodiging.Ouderavond.Titel"></h3>\r\n                    <br />\r\n                    U heeft afgezegd voor de ouderavond: {{selectedItem.uitnodiging.Ouderavond.Titel}}.\r\n                    <br /><br />\r\n                    Alsnog inschrijven kan tot <span data-ng-bind="selectedItem.uitnodiging.Ouderavond.EindeInschrijven | date:\'EEEE dd MMMM yyyy HH:mm\'"></span> uur met de knop inschrijven.\r\n                </div>\r\n\r\n                \x3c!-- OuderavondStatus.Voorkeur = 4 --\x3e\r\n                <div class="content-padding" data-ng-show="selectedItem.status === 4">\r\n                    <h3 class="title" data-ng-bind="selectedItem.uitnodiging.Ouderavond.Titel"></h3>\r\n                    <br />\r\n                    U heeft zich als volgt ingeschreven voor de ouderavond:\r\n                    <br /><br />\r\n                    Dagdelen:\r\n                    <div data-ng-repeat="dagdeel in selectedItem.inschrijving.DagdeelVoorkeuren | filter: { Beschikbaarheid : \'!2\'} | orderBy: Beginmoment" data-sm-notify-complete="ouderavond">\r\n                        &#45; <span data-ng-bind="dagdeel.Beginmoment | date:\'EEEE dd MMMM yyyy\'"></span>\r\n\r\n                        <span data-ng-switch="dagdeel.GlobaleTijdwens">\r\n                            <span data-ng-switch-when="0">\r\n                                van <span data-ng-bind="dagdeel.Beginmoment | date:\'HH:mm\'"></span> - <span data-ng-bind="dagdeel.Eindmoment | date:\'HH:mm\'"></span>\r\n                            </span>\r\n                            <span data-ng-switch-when="1">\r\n                                vroeg, voor <span data-ng-bind="dagdeel.Vroegmoment | date:\'HH:mm\'"></span>\r\n                            </span>\r\n                            <span data-ng-switch-when="2">\r\n                                laat, na <span data-ng-bind="dagdeel.Laatmoment | date:\'HH:mm\'"></span>\r\n                            </span>\r\n                        </span>\r\n                        <span data-ng-show="dagdeel.Beschikbaarheid === 1">(voorkeur)</span>\r\n                    </div>\r\n                    <br />\r\n                    Personeelsleden:\r\n                    <div data-ng-repeat="keuze in selectedItem.inschrijving.Personeelkeuzes" data-sm-notify-complete="ouderavond">\r\n                        &#45; <span data-ng-bind="keuze.Personeelslid.Naam"></span>, <span data-ng-bind="keuze.VakOmschrijving"></span>\r\n                    </div>\r\n                </div>\r\n\r\n                \x3c!-- OuderavondStatus.Rooster = 5--\x3e\r\n                <div class="content-padding" data-ng-show="selectedItem.status === 5">\r\n                    <h3 data-ng-bind="selectedItem.uitnodiging.Ouderavond.Titel"></h3>\r\n                    <br />\r\n                    U wordt verwacht op de volgende afspraken: <br /><br />\r\n                    <div data-ng-repeat="keuze in selectedItem.inschrijving.Personeelkeuzes | filter:({IsPersoneelslidVolgeboekt: false}) | orderBy: \'BeginTijd\'"\r\n                         data-sm-notify-complete="ouderavond">\r\n                        &#45; &nbsp;<b><span data-ng-bind="keuze.Personeelslid.Naam" /></b>, <span data-ng-bind="keuze.VakOmschrijving" /><br />\r\n                        &nbsp;&nbsp;&nbsp;<span data-ng-bind="keuze.BeginTijd | date:\'EEEE dd MMMM yyyy\'" /><br />\r\n                        &nbsp;&nbsp;&nbsp;van <span data-ng-bind="keuze.BeginTijd | date:\'HH:mm\'" /> tot <span data-ng-bind="keuze.EindTijd | date:\'HH:mm\'" /><br />\r\n                        &nbsp;&nbsp;&nbsp;<span data-ng-bind-html="keuze.Ruimte" /><br />\r\n                        <br />\r\n                    </div>\r\n                    <div data-ng-show="selectedItem.hasPersoneelVolgeboekt">\r\n                        Met onderstaande personen kon geen afspraak worden gemaakt: <br /><br />\r\n                        <div data-ng-repeat="keuze in selectedItem.inschrijving.Personeelkeuzes | filter:({IsPersoneelslidVolgeboekt: true})" data-sm-notify-complete="ouderavond">\r\n                            &#45; &nbsp; <span data-ng-bind="keuze.Personeelslid.Naam" />, <span data-ng-bind="keuze.VakOmschrijving" /> <br />\r\n                        </div>\r\n                    </div>\r\n                    <br /><br />\r\n                    <b>Locatie</b><br />\r\n                    {{selectedItem.inschrijving.LocatieOmschrijving}}<br />\r\n                    {{selectedItem.inschrijving.LocatieAdres}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>'},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return d});var r=n(8),o=n(283),a=n(284),s=n(285),l=n(287),d=e.module("Magister.Web.Profiel",[]);d.component("overeenkomstenGrid",s.a).component("inschrijvingenTab",l.a),d.constant("profielConstants",{routes:{MijnGegevens:"/mijn-instellingen",LeerlingGegevens:"/leerling-gegevens"}}).constant("profielLocale",{pageTitles:{MY_SETTINGS:"Mijn Gegevens",STUDENT_SETTINGS:"Gegevens van {0}"}}),d.service("profielResource",a.a.$inject),d.directive("smValidate",["applicationService",function(e){var t=-1;return{scope:{},link:function(n,a,s){n.$on("VALIDATE",function(l){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];var u=function(n,i,o,a){""===i.val()?(!function(t,n,i){e.showMessage(n,r.j.ERROR,r.f),t.addClass(i),t.focus()}(i,n.errorMessage,o),t=a,i.on("keyup",function(){""===i.val()?i.addClass(o):i.removeClass(o)})):a=-1},h=n.$eval(s.smValidate),p=h.className||"validation-error";-1!==t&&t!==h.index||i.each(h.rules,function(e){switch(e.type){case o.a.REQUIRED:u(e,a,p,h.index);break;case o.a.EQUAL:}})})}}}]);var c={module:["$ocLazyLoad",function(e){return n.e(18).then(n.bind(null,608)).then(function(t){var n=t.profielAMD;return e.load(n)})}]};d.config(["$routeProvider",function(e){e.when("/mijn-instellingen",{pageTitle:"Mijn Gegevens",controller:"mijnGegevensController",controllerAs:"$ctrl",resolve:c,template:n(289)}).when("/leerling-gegevens",{pageTitle:"Mijn Gegevens",controller:"leerlingGegevensController",controllerAs:"ctrl",resolve:c,template:n(290)})}])}).call(this,n(1),n(3))},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.REQUIRED=0]="REQUIRED",e[e.EQUAL=1]="EQUAL"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e){return this.$resource(this.apiHost+"api/leerlingen/:persoonId/autorisatie",{persoonId:"@persoonId"},{execute:{method:"GET"}}).execute({persoonId:e}).$promise},e.prototype.put=function(e,t){return this.$resource(this.apiHost+"api/leerlingen/:persoonId/autorisatie",{persoonId:"@persoonId"},{execute:{method:"PUT"}}).execute({persoonId:e},t).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=function(){function e(e){this.downloadTokenService=e,this.reverse=!1,this.sortCol="naam"}return e.prototype.sort=function(e){this.sortCol===e?this.reverse=!this.reverse:this.sortCol=e},e.prototype.selectRow=function(e){e===this.selectedItem?this.downloadSelectedItem():this.selectedItem=e},e.prototype.downloadSelectedItem=function(){var e=this.selectedItem.link;e&&this.downloadTokenService.openTabToDownload(e)},e.$inject=["downloadTokenService"],e}(),r={template:n(286),controller:i,controllerAs:"$ctrl",bindings:{items:"<"}}},function(e,t){e.exports='<style>\r\n    div.ngCell, div.ngCellText, div.ngVerticalBar {\r\n        line-height: 29px !important;\r\n    }\r\n\r\n    .sortorder:after {\r\n        content: \'\\25b2\';\r\n    }\r\n\r\n    .sortorder.reverse:after {\r\n        content: \'\\25bc\';\r\n    }\r\n</style>\r\n<table class="data-overview table-grid-layout normaal" ng-if="$ctrl.items.length">\r\n    <thead>\r\n        <tr>\r\n            <th ng-click="$ctrl.sort(\'naam\')" style="width: 35%">Bestandsnaam <span class="sortorder" ng-show="$ctrl.sortCol === \'naam\'" ng-class="{reverse: $ctrl.reverse}"></span></th>\r\n            <th ng-click="$ctrl.sort(\'omschrijving\')" style="width: 35%">Omschrijving <span class="sortorder" ng-show="$ctrl.sortCol === \'omschrijving\'" ng-class="{reverse: $ctrl.reverse}"></span></th>\r\n            <th ng-click="$ctrl.sort(\'inleverdatum\')" style="width: 20%">Inleverdatum <span class="sortorder" ng-show="$ctrl.sortCol === \'inleverdatum\'" ng-class="{reverse: $ctrl.reverse}"></span></th>\r\n            <th ng-click="$ctrl.sort(\'versie\')" style="width: 10%">Versie <span class="sortorder" ng-show="$ctrl.sortCol === \'versie\'" ng-class="{reverse: $ctrl.reverse}"></span></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr ng-repeat="item in $ctrl.items | orderBy: $ctrl.sortCol:$ctrl.reverse" ng-click="$ctrl.selectRow(item)" ng-class="{\'selected\': item === $ctrl.selectedItem}">\r\n            <td>{{item.naam}}</td>\r\n            <td>{{item.omschrijving}}</td>\r\n            <td>{{item.inleverdatum | date: \'dd MMM yyyy\'}}</td>\r\n            <td>{{item.versie}}</td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n<div data-sm-no-items="sm-no-items" data-override="$ctrl.items.length"></div>'},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=function(){function t(){}return t.prototype.$onChanges=function(t){if(t.items.isFirstChange){var n=new Date,r=e.find(this.items,function(e){return e.begin&&e.einde?e.begin<n&&n<e.einde:null===e.begin&&null!==e.einde?n<e.einde:null!==e.begin&&null===e.einde&&e.begin<n});i.isUndefined(r)||(this.selectedItem=r,this.onSelect({inschrijving:this.selectedItem}))}},t.prototype.onSelectItem=function(){this.onSelect({inschrijving:this.selectedItem})},t.$inject=[],t}(),o={template:n(288),controller:r,controllerAs:"$ctrl",bindings:{items:"<",onSelect:"&"}}}).call(this,n(3),n(1))},function(e,t){e.exports='<div class="widget">\r\n    <div class="block" data-ng-class="{\'fold\': fold1}">\r\n        <h3 data-ng-click="fold1=!fold1" data-ng-init="fold1=false"><span data-ng-class="{\'icon-up-arrow\': !fold1, \'icon-down-arrow\': fold1}"></span><b>Inschrijvingen</b></h3>\r\n        <div class="content">\r\n            <form>\r\n                <div class="fancy-select">\r\n                    <select id="select-inschrijving"\r\n                        class="select" \r\n                        kendo-drop-down-list\r\n                        k-data-source="$ctrl.items" \r\n                        k-ng-model="$ctrl.selectedItem"\r\n                        k-on-change="$ctrl.onSelectItem()"\r\n                        k-options="{dataTextField: \'opleiding.omschrijving\', dataValueField: \'id\'}"\r\n                        k-value-primitive="false"></select>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="widget">\r\n    <div class="block" data-ng-class="{\'fold\': fold2}">\r\n        <h3 data-ng-click="fold2=!fold2" data-ng-init="fold2=false"><span data-ng-class="{\'icon-up-arrow\': !fold2, \'icon-down-arrow\': fold2}"></span><b>Details</b></h3>\r\n        <div class="content">\r\n            <form>\r\n                <dl class="list-dl">\r\n                    <dt>Begindatum</dt>\r\n                    <dd>{{($ctrl.selectedItem.begin | date : \'dd MMM yyyy\') || \'-\'}}</dd>\r\n                    <dt>Einddatum</dt>\r\n                    <dd>{{($ctrl.selectedItem.einde | date : \'dd MMM yyyy\') || \'-\'}}</dd>\r\n                    <dt>Gepland einde</dt>\r\n                    <dd>{{($ctrl.selectedItem.geplandEinde | date : \'dd MMM yyyy\') || \'-\'}}</dd>\r\n                    <dt>Code</dt>\r\n                    <dd>{{$ctrl.selectedItem.opleiding.code || \'-\'}}</dd>\r\n                    <dt>Omschrijving</dt>\r\n                    <dd>{{$ctrl.selectedItem.opleiding.omschrijving || \'-\'}}</dd>\r\n                    <dt>Leerweg</dt>\r\n                    <dd>{{$ctrl.selectedItem.leerweg || \'-\'}}</dd>\r\n                </dl>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t){e.exports='<div id="instellingen-container" class="container" data-on-keydown="$ctrl.keyup(event)" tabindex="0" data-ng-class="{\'sidecolumn\': $ctrl.activeTab === 2, \'aside-toggle\': !$ctrl.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Mijn gegevens</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="page-nav" ng-if="$ctrl.inschrijvingen.length > 0">\r\n            <ul class="tabs">\r\n                <li id="tab-algemeen" ng-click="$ctrl.activeTab = 1"><a ng-class="{\'active\': $ctrl.activeTab === 1}">Algemeen</a></li>\r\n                <li id="tab-documenten" ng-click="$ctrl.activeTab = 2"><a ng-class="{\'active\': $ctrl.activeTab === 2}">Documenten</a></li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class="content-container" ng-if="$ctrl.activeTab === 1">\r\n            <form name="settingsForm">\r\n                <div class="content-container settings-container">\r\n                    <div class="card-box" data-ng-if="$ctrl.showOpleidingNAW()">\r\n                        <div class="card">\r\n                            <div class="content content-high">\r\n                                <div class="photo photo-high">\r\n                                    <div class="photo-placeholder" data-ng-if="$ctrl.fallback.noPhoto">\r\n                                        <span class="iconic icon-originalsize"></span>\r\n                                    </div>\r\n                                    <img mg-http-src="{{$ctrl.profielFotoUrl}}" http-src-fallback="assets/images/anonymous.jpg" />\r\n                                </div>\r\n                                <div class="person-info">\r\n                                    <div>\r\n                                        <h3 class="content-title" data-ng-bind="$ctrl.PersoonsGegevens.firstName"></h3>\r\n                                        <strong data-ng-bind="$ctrl.PersoonsGegevens.lastName"></strong>\r\n                                        <span data-ng-bind="$ctrl.Instellingen.StaticMail"></span>\r\n                                        <span data-ng-bind="$ctrl.opleidingGegevens.StamNr"></span>\r\n                                    </div>\r\n                                    <div class="group-info">\r\n                                        <h3 class="content-title" data-ng-bind="$ctrl.opleidingGegevens.Klas"></h3>\r\n                                        <span data-ng-show="$ctrl.opleidingGegevens.Studie" data-ng-bind-template="{{$ctrl.opleidingGegevens.Studie}} "></span>\r\n                                        <span data-ng-show="$ctrl.aanmelding.profielen && $ctrl.aanmelding.profielen.length > 0" data-ng-bind-template="- {{$ctrl.aanmelding | profiel}} "></span>\r\n                                        <span data-ng-show="$ctrl.mentoren.klasseMentoren[0] || $ctrl.mentoren.persoonlijkeMentor.naam" data-ng-bind-template="- {{$ctrl.mentoren.klasseMentoren[0].naam || $ctrl.mentoren.persoonlijkeMentor.naam}}"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \x3c!--Make this a directive--\x3e\r\n                    <div class="widget widget-double" id="opleiding" data-ng-show="$ctrl.showOpleidingNAW()">\r\n                        <div class="block">\r\n                            <h3><b>Opleiding</b></h3>\r\n                            <div class="content" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false">\r\n                                <ul class="list multi-line">\r\n                                    <li>\r\n                                        <strong>Studie</strong>\r\n                                        <span data-ng-bind="$ctrl.opleidingGegevens.Studie"></span>\r\n                                    </li>\r\n                                    <li data-ng-show="$ctrl.aanmelding.profielen && $ctrl.aanmelding.profielen.length > 0">\r\n                                        <strong>Profiel</strong>\r\n                                        <span data-ng-bind-template="{{$ctrl.aanmelding | profiel}}"></span>\r\n                                    </li>\r\n                                    <li>\r\n                                        <strong>Klas</strong>\r\n                                        <span data-ng-bind="$ctrl.opleidingGegevens.Klas"></span>\r\n                                    </li>\r\n                                    <li>\r\n                                        <strong>Stamnummer</strong>\r\n                                        <span data-ng-bind="$ctrl.opleidingGegevens.StamNr"></span>\r\n                                    </li>\r\n                                    <li data-ng-show="$ctrl.opleidingGegevens.ExamenNr">\r\n                                        <strong>Examennummer</strong>\r\n                                        <span data-ng-bind="$ctrl.opleidingGegevens.ExamenNr"></span>\r\n                                    </li>\r\n                                    <li data-ng-show="$ctrl.mentoren.persoonlijkeMentor">\r\n                                        <strong>Persoonlijke Mentor</strong>\r\n                                        <span data-ng-bind="$ctrl.mentoren.persoonlijkeMentor.naam"></span>\r\n                                    </li>\r\n                                    <li data-ng-show="$ctrl.mentoren.klasseMentoren && $ctrl.mentoren.klasseMentoren[0]">\r\n                                        <strong>Klassenmentor(en)</strong>\r\n                                        <span data-ng-repeat="mentor in $ctrl.mentoren.klasseMentoren" data-ng-bind-template="{{mentor.naam}}{{$last ? \'\' : \', \' }}"></span>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <footer class="endlink"></footer>\r\n                        </div>\r\n                    </div>\r\n                    <div class="widget" data-ng-class="{\'widget-double\': !$ctrl.isOuder}" id="naw">\r\n                        <div class="block">\r\n                            <h3><b>Naam, adres, woonplaats</b></h3>\r\n                            <div class="content" data-ng-class="{\'content-high\': $ctrl.isOuder}" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false">\r\n                                <ul class="list multi-line">\r\n                                    <li>\r\n                                        <strong>Naam</strong>\r\n                                        <span data-ng-bind="$ctrl.PersoonsGegevens.fullName"></span>\r\n                                    </li>\r\n                                    <li ng-hide="$ctrl.isOuder">\r\n                                        <strong>Officile naam</strong>\r\n                                        <span data-ng-bind="$ctrl.PersoonsGegevens.officialName"></span>\r\n                                    </li>\r\n                                    <li ng-hide="$ctrl.isOuder">\r\n                                        <strong>Geboortedatum</strong>\r\n                                        <span data-ng-bind="$ctrl.PersoonsGegevens.birthday"></span>\r\n                                    </li>\r\n                                    <li>\r\n                                        <strong>Adres</strong>\r\n                                        <span>\r\n                                            <span data-ng-bind="$ctrl.adresGegevens.adres"> </span>\r\n                                            <span data-ng-bind-template="{{$ctrl.adresGegevens.postcode}}, {{$ctrl.adresGegevens.woonPlaats}}"></span>\r\n                                        </span>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <footer class="endlink"></footer>\r\n                        </div>\r\n                    </div>\r\n                    <div class="widget">\r\n                        <div class="block">\r\n                            <h3><b>Contact</b></h3>\r\n                            <div class="content-high content-auto">\r\n                                <fieldset>\r\n                                    <div data-ng-show="$ctrl.Instellingen.CanViewMail">\r\n                                        <label for="settingsschoolmailinvoer">E-mailadres</label>\r\n                                        <input type="email" name="schoolmail" id="settingsschoolmailinvoer" data-ng-model="$ctrl.Instellingen.SchoolMail" data-ng-disabled="!$ctrl.Instellingen.CanChangeMail" />\r\n                                    </div>\r\n                                    <div data-ng-show="$ctrl.Instellingen.CanViewPhone">\r\n                                        <label for="settingstelefoonnummerinvoer">Mobiel nummer</label>\r\n                                        <input type="text" name="telefoonnummer" id="settingstelefoonnummerinvoer" data-ng-model="$ctrl.Instellingen.TelefoonNummer"\r\n                                               data-ng-disabled="!$ctrl.Instellingen.CanChangePhone"/>\r\n                                        <div id="settings-email-error-container" ng-show="$ctrl.settingsForm.telefoonnummer.$dirty">\r\n                                            <small class="email form-error" ng-show="$ctrl.settingsForm.telefoonnummer.$invalid">\r\n                                                Dit is geen geldig telefoonnummer.\r\n                                            </small>\r\n                                        </div>\r\n                                    </div>\r\n                                </fieldset>\r\n                            </div>\r\n                            <footer class="endlink">\r\n                                <a data-ng-click="$ctrl.onUpdateContactGegevens()" data-ng-hide="!$ctrl.Instellingen.CanChangeMail && !$ctrl.Instellingen.CanChangePhone || $ctrl.settingsForm.$invalid">contactgegevens opslaan</a>\r\n                            </footer>\r\n                        </div>\r\n                    </div>\r\n                    <div id="magister-account-widget" class="widget">\r\n                        <div class="block">\r\n                            <h3><b>Magister-account</b></h3>\r\n                            <div class="content content-high">\r\n                                <ul class="list multi-line">\r\n                                    <li>\r\n                                        <strong>Beheer jouw Magister-account</strong>\r\n                                        <span>Ga naar de <a href="{{$ctrl.accountpaginaUrl}}" target="_blank">accountpagina</a> om je account te beheren</span>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <footer class="endlink"></footer>\r\n                        </div>\r\n                    </div>\r\n                    \x3c!--Make this a directive--\x3e\r\n                    <div class="widget" data-ng-if="($ctrl.oneDriveForBusinessInstellingen.IsEnabled) && $ctrl.Instellingen.KanKoppelingMaken">\r\n                        <div class="block">\r\n                            <h3><b>Koppelingen</b></h3>\r\n                            <div class="content content-high">\r\n                                <ul class="list multi-line">\r\n                                    <li data-ng-if="$ctrl.oneDriveForBusinessInstellingen.IsEnabled">\r\n                                        <strong>ELO Bronnen  Microsoft OneDrive Schoolaccount</strong>\r\n                                        <span data-ng-if="$ctrl.oneDriveForBusinessInstellingen.OnlyAllowSchoolDomain && !$ctrl.oneDriveForBusinessInstellingen.IsGekoppeld">Koppelen met OneDrive Schoolaccount is alleen toegestaan met je schoolaccount.</span>\r\n                                        <span data-ng-if="!$ctrl.oneDriveForBusinessInstellingen.OnlyAllowSchoolDomain && !$ctrl.oneDriveForBusinessInstellingen.IsGekoppeld">Koppelen met OneDrive Schoolaccount is toegestaan.</span>\r\n                                        <span data-ng-if="$ctrl.oneDriveForBusinessInstellingen.IsGekoppeld" data-ng-bind-template="Je bent gekoppeld met het account: {{$ctrl.oneDriveForBusinessInstellingen.Account}}"></span>\r\n                                        <span data-ng-if="!$ctrl.oneDriveForBusinessInstellingen.IsGekoppeld">\r\n                                            <a data-ng-click="$ctrl.onKoppelingMaken()">koppeling maken</a>\r\n                                        </span>\r\n                                        <span data-ng-if="$ctrl.oneDriveForBusinessInstellingen.IsGekoppeld">\r\n                                            <a data-ng-click="$ctrl.onOneDriveForBusinessKoppelingVerwijderen()">koppeling verwijderen</a>\r\n                                        </span>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <footer class="endlink"></footer>\r\n                        </div>\r\n                    </div>\r\n                    \x3c!--Make this a directive--\x3e\r\n                    <div class="widget">\r\n                        <div class="block">\r\n                            <h3><b>Instellingen</b></h3>\r\n                            <div class="content-high">\r\n                                <fieldset>\r\n                                    <div>\r\n                                        <label for="forward-mail-checkbox">Berichten</label>\r\n                                        <span class="check" data-ng-cloak="cloak">\r\n                                            <input type="checkbox" class="checkbox" name="ELOBerichtenDoorsturen" id="forward-mail-checkbox"\r\n                                                   data-ng-model="$ctrl.Instellingen.EloBerichtenDoorsturen" ng-disabled="!$ctrl.Instellingen.SchoolMail" />\r\n                                            <label>\r\n                                                <span data-ng-click="$ctrl.onUpdateMailDoorsturen(!$ctrl.Instellingen.EloBerichtenDoorsturen)" id="forward-mail-fake-checkbox"></span>                                        Doorsturen naar e-mailadres\r\n                                            </label>\r\n                                        </span>\r\n                                    </div>\r\n                                    <div data-ng-if="$ctrl.isGebruikerAchttienPlus() && !$ctrl.isOuder">\r\n                                        <label for="parental-supervision-checkbox">Toestemming</label>\r\n                                        <span class="check">\r\n                                            <input type="checkbox" class="checkbox" name="MagOuderInzien" id="parental-supervision-checkbox" data-ng-model="$ctrl.magOuderInzien">\r\n                                            <label>\r\n                                                <span data-ng-click="$ctrl.setMagOuderInzien(!$ctrl.magOuderInzien)" id="parental-supervision-fake-checkbox"></span>                                        Mijn ouders mogen mijn gegevens zien\r\n                                            </label>\r\n                                        </span>\r\n                                    </div>\r\n                                </fieldset>\r\n                            </div>\r\n                            <footer class="endlink"></footer>\r\n                        </div>\r\n                    </div>\r\n                    <mg-toestemmings-antwoorden ng-if="::$ctrl.toestemmingsEntrypoint && $ctrl.toestemmingsEntrypoint.enabled"\r\n                        class="toestemmings-widget"\r\n                        entrypoint="$ctrl.toestemmingsEntrypoint"\r\n                        edit="$ctrl.onEditToestemming()">\r\n                    </mg-toestemmings-antwoorden>\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <div class="content-container" ng-if="$ctrl.activeTab === 2">\r\n            <overeenkomsten-grid items="$ctrl.overeenkomsten"></overeenkomsten-grid>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container ng-show="$ctrl.activeTab === 2">\r\n        <sm-tab title="Weergave" id="idWeergave" active="true">\r\n            <inschrijvingen-tab items="$ctrl.inschrijvingen" on-select="$ctrl.onInschrijvingSelected(inschrijving)"> </inschrijvingen-tab>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t){e.exports='<div id="instellingen-container" class="container" data-on-keydown="keyup(event)" tabindex="0" data-ng-class="{\'sidecolumn\': ctrl.activeTab === 2, \'aside-toggle\': !ctrl.tabState.tabContainerVisible}">\r\n    <div class="head-bar">\r\n        <h1>Gegevens van {{ctrl.persoonsGegevens.firstName}}</h1>\r\n    </div>\r\n    <section class="main">\r\n        <div class="page-nav" ng-if="ctrl.inschrijvingen.length > 0">\r\n            <ul class="tabs">\r\n                <li id="tab-algemeen" ng-click="ctrl.activeTab = 1"><a ng-class="{\'active\': ctrl.activeTab === 1}">Algemeen</a></li>\r\n                <li id="tab-documenten" ng-click="ctrl.activeTab = 2" ng-if="ctrl.inschrijvingen.length > 0"><a ng-class="{\'active\': ctrl.activeTab === 2}">Documenten</a></li>\r\n            </ul>\r\n        </div>\r\n        <form name="settingsForm" ng-if="ctrl.activeTab === 1">\r\n            <div class="content-container settings-container">\r\n                <div class="card-box">\r\n                    <div class="card">\r\n                        <div class="content content-high">\r\n                            <div class="photo photo-high">\r\n                                <div class="photo-placeholder" data-ng-if="fallback.noPhoto">\r\n                                    <span class="iconic icon-originalsize"></span>\r\n                                </div>\r\n                                <figure>\r\n                                    <img mg-http-src="{{ctrl.profielFotoUrl}}"/>\r\n                                    <i class="far fa-user"></i>\r\n                                </figure>\r\n                            </div>\r\n                            <div class="person-info">\r\n                                <div>\r\n                                    <h3 class="content-title" data-ng-bind="::ctrl.persoonsGegevens.firstName"></h3>\r\n                                    <strong data-ng-bind="::ctrl.persoonsGegevens.lastName"></strong>\r\n                                    <span data-ng-bind="::ctrl.profielGegevens.EmailAdres"></span>\r\n                                    <span data-ng-bind="::ctrl.opleidingGegevens.StamNr"></span>\r\n                                </div>\r\n                                <div class="group-info">\r\n                                    <h3 class="content-title" data-ng-bind="ctrl.opleidingGegevens.Klas"></h3>\r\n                                    <span data-ng-show="ctrl.opleidingGegevens.Studie" data-ng-bind-template="{{::ctrl.opleidingGegevens.Studie}} "></span>\r\n                                    <span data-ng-show="ctrl.aanmelding.profielen && ctrl.aanmelding.profielen.length > 0" data-ng-bind-template="- {{::ctrl.aanmelding | profiel}} "></span>\r\n                                    <span data-ng-show="ctrl.opleidingGegevens.mentoren.klasseMentoren[0] || ctrl.opleidingGegevens.mentoren.persoonlijkeMentor.naam"\r\n                                          data-ng-bind-template="- {{ctrl.opleidingGegevens.mentoren.klasseMentoren[0].naam || ctrl.opleidingGegevens.mentoren.persoonlijkeMentor.naam}}"></span>\r\n                                </div>\r\n                            </div>\r\n                            \x3c!--de volgende regel moet beredeneerd worden a.d.h.v.: welke les nu of volgende, hoe laat en welk lokaal en of ze aanwezig is.--\x3e\r\n                            \x3c!--<p class="description">Rixt is aanwezig in de les Nederlands van 08:00 tot 9:50 in lokaal 301</p>--\x3e\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \x3c!--Make this a directive--\x3e\r\n                <div class="widget widget-double" id="opleiding">\r\n                    <div class="block">\r\n                        <h3><b>Opleiding</b></h3>\r\n                        <div class="content" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false">\r\n                            <ul class="list multi-line">\r\n                                <li>\r\n                                    <strong>Studie</strong>\r\n                                    <span data-ng-bind="::ctrl.opleidingGegevens.Studie"></span>\r\n                                </li>\r\n                                <li data-ng-show="ctrl.aanmelding.profielen && ctrl.aanmelding.profielen.length > 0">\r\n                                    <strong>Profiel</strong>\r\n                                    <span data-ng-bind-template="{{::ctrl.aanmelding | profiel}}"></span>\r\n                                </li>\r\n                                <li>\r\n                                    <strong>Klas</strong>\r\n                                    <span data-ng-bind="ctrl.opleidingGegevens.Klas"></span>\r\n                                </li>\r\n                                <li>\r\n                                    <strong>Stamnummer</strong>\r\n                                    <span data-ng-bind="ctrl.opleidingGegevens.StamNr"></span>\r\n                                </li>\r\n                                <li data-ng-show="ctrl.opleidingGegevens.ExamenNr">\r\n                                    <strong>Examennummer</strong>\r\n                                    <span data-ng-bind="ctrl.opleidingGegevens.ExamenNr"></span>\r\n                                </li>\r\n                                <li data-ng-show="ctrl.opleidingGegevens.mentoren.persoonlijkeMentor">\r\n                                    <strong>Persoonlijke mentor</strong>\r\n                                    <span data-ng-bind="ctrl.opleidingGegevens.mentoren.persoonlijkeMentor.naam"></span>\r\n                                </li>\r\n                                <li data-ng-show="ctrl.opleidingGegevens.mentoren.klasseMentoren && ctrl.opleidingGegevens.mentoren.klasseMentoren[0]">\r\n                                    <strong>Klassenmentor(en)</strong>\r\n                                    <span data-ng-repeat="mentor in ctrl.opleidingGegevens.mentoren.klasseMentoren" data-ng-bind-template="{{mentor.naam}}{{$last ? \'\' : \', \' }}"></span>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <footer class="endlink"></footer>\r\n                    </div>\r\n                </div>\r\n                <div class="widget widget-double" id="naw">\r\n                    <div class="block">\r\n                        <h3><b>Naam, adres, woonplaats</b></h3>\r\n                        <div class="content" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false">\r\n                            <ul class="list multi-line">\r\n                                <li>\r\n                                    <strong>Naam</strong>\r\n                                    <span data-ng-bind="ctrl.persoonsGegevens.fullName"></span>\r\n                                </li>\r\n                                <li>\r\n                                    <strong>Officile naam</strong>\r\n                                    <span data-ng-bind="ctrl.persoonsGegevens.officialName"></span>\r\n                                </li>\r\n                                <li>\r\n                                    <strong>Geboortedatum</strong>\r\n                                    <span data-ng-bind="ctrl.persoonsGegevens.birthday"></span>\r\n                                </li>\r\n                                <li>\r\n                                    <strong>Adres</strong>\r\n                                    <span>\r\n                                        <span data-ng-bind="ctrl.adresGegevens.adres"> </span>\r\n                                        <span data-ng-bind-template="{{ctrl.adresGegevens.postcode}}, {{ctrl.adresGegevens.woonPlaats}}"></span>\r\n                                    </span>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <footer class="endlink"></footer>\r\n                    </div>\r\n                </div>\r\n                <div class="widget">\r\n                    <div class="block">\r\n                        <h3><b>Contact</b></h3>\r\n                        <div class="content-high content-auto">\r\n                            <fieldset>\r\n                                <div>\r\n                                    <label for="settingsschoolmailinvoer">E-mailadres</label>\r\n                                    <input type="email" name="schoolmail" id="settingsschoolmailinvoer" data-ng-model="ctrl.profielGegevens.EmailAdres" disabled="disabled" />\r\n                                </div>\r\n                                <div>\r\n                                    <label for="settingstelefoonnummerinvoer">Mobiel nummer</label>\r\n                                    <input type="text" name="telefoonnummer" id="settingstelefoonnummerinvoer" data-ng-model="ctrl.profielGegevens.Mobiel" disabled="disabled" />\r\n                                </div>\r\n                            </fieldset>\r\n                        </div>\r\n                        <footer class="endlink"></footer>\r\n                    </div>\r\n                </div>\r\n                <mg-toestemmings-antwoorden ng-if="::ctrl.toestemmingsEntrypoint && ctrl.toestemmingsEntrypoint.enabled"\r\n                    class="toestemmings-widget"\r\n                    entrypoint="ctrl.toestemmingsEntrypoint"\r\n                    edit="ctrl.onEditToestemming()">\r\n                </mg-toestemmings-antwoorden>\r\n            </div>\r\n        </form>\r\n        <div class="content-container" ng-if="ctrl.activeTab === 2">\r\n            <overeenkomsten-grid items="ctrl.overeenkomsten"></overeenkomsten-grid>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container ng-show="ctrl.activeTab === 2">\r\n        <sm-tab title="Weergave" id="idWeergave" active="true">\r\n            <inschrijvingen-tab items="ctrl.inschrijvingen" on-select="ctrl.onInschrijvingSelected(inschrijving)"> </inschrijvingen-tab>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=function(){function e(e,t){this.$resource=e,this.apiHost=t}return e.prototype.get=function(e,t,n,i){return this.$resource(this.apiHost+"api/personen/{persoonId}/berichten/{berichtId}",{persoonId:"@persoonId",berichtId:"@berichtId",berichtSoort:"@berichtSoort",skip:"@skip",top:"@top",orderby:"@orderby",count:"@count"},{execute:{method:"GET"}}).execute({persoonId:e,berichtId:t,berichtSoort:n,skip:i.skip,top:i.top,orderby:i.orderby,count:i.count}).$promise},e.prototype.remove=function(e,t){return this.$resource(this.apiHost+"api/personen/{persoonId}/berichten/{berichtId}",{persoonId:"@persoonId",berichtId:"@berichtId"},{execute:{method:"DELETE"}}).execute({persoonId:e,berichtId:t}).$promise},e.prototype.put=function(e,t,n){return this.$resource(this.apiHost+"api/personen/{persoonId}/berichten/{berichtId}",{persoonId:"@persoonId",berichtId:"@berichtId",bericht:"@bericht"},{execute:{method:"PUT"}}).execute({persoonId:e,berichtId:t,bericht:n}).$promise},e.prototype.post=function(e,t){return this.$resource(this.apiHost+"api/personen/{persoonId}/berichten",{persoonId:"@persoonId",bericht:"@bericht"},{execute:{method:"POST"}}).execute({persoonId:e,bericht:t}).$promise},e}(),r=function(){function e(e,t){this.$resource=e,this.apiHost=t}return e.prototype.get=function(e,t,n){return this.$resource(this.apiHost+"api/personen/{persoonId}/berichten/bijlagen/{bijlageId}",{persoonId:"@persoonId",bijlageId:"@bijlageId",skip:"@skip",top:"@top",orderby:"@orderby",count:"@count"},{execute:{method:"GET"}}).execute({persoonId:e,bijlageId:t,skip:n.skip,top:n.top,orderby:n.orderby,count:n.count}).$promise},e}(),o=function(){function e(e,t){this.$resource=e,this.apiHost=t}return e.prototype.get=function(e,t,n,i,r,o){return this.$resource(this.apiHost+"api/personen/{persoonId}/berichten",{persoonId:"@persoonId",mapId:"@mapId",q:"@q",gelezen:"@gelezen",ontvangenNa:"@ontvangenNa",skip:"@skip",top:"@top",orderby:"@orderby",count:"@count"},{execute:{method:"GET"}}).execute({persoonId:e,mapId:t,q:n,gelezen:i,ontvangenNa:r,skip:o.skip,top:o.top,orderby:o.orderby,count:o.count}).$promise},e}(),a=function(){function e(e,t){this.$resource=e,this.apiHost=t}return e.prototype.remove=function(e,t){return this.$resource(this.apiHost+"api/personen/{persoonId}/berichten/map/{mapId}",{persoonId:"@persoonId",mapId:"@mapId"},{execute:{method:"DELETE"}}).execute({persoonId:e,mapId:t}).$promise},e}(),s=e.module("Magister.Resources",[]);s.service("Resources.Bericht",["$resource","apiHost",i]).service("Resources.BerichtBijlage",["$resource","apiHost",r]).service("Resources.Berichten",["$resource","apiHost",o]).service("Resources.BerichtMap",["$resource","apiHost",a])}).call(this,n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var i=n(293),r=n(294),o=n(295),a=n(132),s=n(133),l=e.module("Magister.SchoolstructuurAMD",["ngRoute","ngResource"]);l.service("lessenResource",r.a.$inject),l.service("vakkenService",s.a.$inject).service("lessenService",o.a.$inject).service("groepenService",a.a.$inject).service("lesperiodeService",i.a.$inject)}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.$q=e,this.$http=t,this.cacheService=n,this.lesperiodenCacheKey="lesperioden";var i={maxAge:864e5,recycleFreq:432e5};this.lesperiodenCache=this.cacheService.createCache("lesperioden",i)}return e.prototype.getLesperioden=function(){var e=this,t=this.lesperiodenCache.get(this.lesperiodenCacheKey);return t?this.$q.resolve(t):this.$http.get("/api/lesperioden").then(function(t){return e.lesperiodenCache.put(e.lesperiodenCacheKey,t.data),t.data})},e.$inject=["$q","$http","cacheService",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(4),r=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t){return this.$resource(this.apiHost+"api/personen/:persoonId/groepen?rol=:rol",{persoonId:"@persoonId",rol:"@rol"},{execute:{method:"GET",isArray:!0}}).execute({persoonId:e,rol:i.a[t]}).$promise},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.lessenResource=e,this.currentUser=t}return e.prototype.get=function(e,t){return this.lessenResource.get(e,t)},e.$inject=["lessenResource","currentUser",e],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return se});n(297),n(298);var i=n(26),r=n(25),o=n(29),a=n(299),s=n(27),l=n(308),d=n(310),c=n(311),u=n(312),h=n(313),p=n(314),f=n(315),g=n(316),m=n(319),v=n(320),b=n(322),_=n(323),k=n(324),w=n(325),y=n(326),x=n(327),C=n(328),S=n(329),T=n(330),D=n(331),I=n(333),E=n(334),A=n(335),O=n(337),R=n(338),P=n(340),M=n(342),F=n(344),H=n(346),N=n(348),$=n(120),L=n(349),z=n(350),j=n(351),B=n(352),U=n(353),V=n(354),W=n(355),G=n(356),q=n(358),K=n(359),Y=n(360),Q=n(648),X=n(361),J=n(362),Z=n(363),ee=n(364),te=n(365),ne=n(366),ie=n(367),re=n(368),oe=n(369),ae=n(370),se=e.module("Magister.Shared",[a.a.name,"ngSanitize","ngCookies","angularFileUpload"]);se.factory("folderValidator",ie.a.$inject),se.service("hateOsResource",W.a.$inject).service("collectionResource",V.a.$inject).service("accountResource",i.a.$inject).service("sessiesResource",r.a.$inject).service("dialogService",G.a.$inject).service("menuService",Y.a.$inject).service("cookieService",s.a.$inject).service("sessieService",o.a.$inject).service("settingsService",Z.a.$inject).service("profielService",re.a.$inject).service("fileService",K.a.$inject).service("aanmeldingenService",oe.a.$inject).service("apiRouteParserService",B.a.$inject).service("tabService",te.a.$inject).service("LoadingIndicatorService",L.a.$inject).service("panelCommunicator",J.a.$inject).service("nonceService",X.a.$inject).service("downloadTokenService",q.a).service("speechBubbleService",ee.a).service("modalService",Q.a),se.filter("limitCharacters",$.a.prototype.limitCharacters).filter("capitalize",$.a.prototype.capitalize).filter("limitWords",$.a.prototype.limitWords).filter("stripHtml",$.a.prototype.stripHtml).filter("stripHtmlShowFirstLine",$.a.prototype.stripHtmlShowFirstLine).filter("commaseparated",$.a.prototype.commaseparated).filter("concatenateItemsWithSeparator",$.a.prototype.concatenateItemsWithSeparator).filter("sizeConverter",$.a.prototype.sizeConverter).filter("determineFileIcon",$.a.prototype.determineFileIcon).filter("getLinkNavigateUrl",$.a.prototype.getLinkNavigateUrl).filter("mapColor",$.a.prototype.mapColor).filter("getValuesFromProperties",$.a.prototype.getValuesFromProperties).filter("insertString",$.a.prototype.insertString).filter("unique",["$filter",$.a.prototype.unique]).filter("highLightSubString",$.a.prototype.highLightSubString).filter("determineFileIconBronnen",N.a.prototype.determineFileIconBronnen).filter("bronIcon",N.a.prototype.bronIcon).filter("concatenateVakOmschrDispVrij",$.a.prototype.concatenateVakOmschrHnivoDispVrij).filter("appendApiKey",$.a.prototype.appendApiKey),se.factory("magisterInterceptors",U.a.$inject).factory("offlineInterceptorFactory",["$q","$rootScope","dialogService","magisterLocale",j.a.OfflineInterceptorFactory]).factory("loadingIndicatorInterceptor",["$q","$injector","LoadingIndicatorService","apiRouteParserService",z.a]).factory("cacheBusterInterceptor",["$q","$location","cacheService","LoadingIndicatorService",j.a.CacheBusterInterceptorFactory]),se.directive("ngEnter",T.a.$inject).directive("smNotifyComplete",I.a.$inject).directive("onKeydown",C.a.$inject).directive("onKeyup",x.a.$inject).directive("smDatum",f.a.$inject).directive("smToast",R.a.$inject).directive("smTypeAhead",F.a.$inject).directive("smDialog",g.a.$inject).directive("smDragDrop",v.a.$inject).directive("smDroppable",_.a).directive("smDraggableDroppable",b.a).directive("smFileUpload",k.a.$inject).directive("smNoItems",D.a.$inject).directive("smFocus",w.a).directive("smCheckDirty",["$rootScope","$location","dialogService",h.a]).directive("smLoadingIndicator",["$compile",S.a]).directive("smTreeView",M.a).directive("smScroll",[A.a]).directive("smSingleInputDialog",p.a).directive("smPanelWidget",H.a).directive("includeReplace",ne.a.$inject).directive("step",d.a.$inject).directive("wfButton",l.a.$inject).directive("smWorkflow",c.a.$inject).directive("smOpenLinkedResource",E.a.$inject).directive("treeItem",function(){return P.a}).directive("mgDownloadFile",m.a).directive("mgHttpSrc",y.a).directive("mgBackgroundImage",u.a).directive("mgSpeechBubble",O.a),se.run(ae.a.$inject),se.config(["$httpProvider","$compileProvider","$provide",function(e,t,n){t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|coui):/),e.interceptors.push("cacheBusterInterceptor"),e.interceptors.push("loadingIndicatorInterceptor"),e.interceptors.push("magisterInterceptors"),n.decorator("$exceptionHandler",["$delegate","$injector",function(e,t){return function(n,i){t.get("loggingService").logError(n),e(n,i)}}])}])}).call(this,n(1))},function(e,t){var n;
/**!
 * AngularJS file upload shim for angular XHR HTML5 browsers
 * @author  Danial  <danial.farid@gmail.com>
 * @version 1.3.0
 */
window.XMLHttpRequest&&window.FormData&&(XMLHttpRequest=(n=XMLHttpRequest,function(){var e,t=new n;return t.setRequestHeader=(e=t.setRequestHeader,function(n,i){if("__setXHR_"===n){var r=i(t);r instanceof Function&&r(t)}else e.apply(t,arguments)}),t}),window.XMLHttpRequest.__isShim=!0)},function(e,t,n){(function(e){var t;(t=e.module("angularFileUpload",[])).service("$upload",["$http","$timeout",function(e,t){function n(n){n.method=n.method||"POST",n.headers=n.headers||{},n.transformRequest=n.transformRequest||function(t,n){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:e.defaults.transformRequest[0](t,n)},window.XMLHttpRequest.__isShim&&(n.headers.__setXHR_=function(){return function(e){n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){n.progress&&t(function(){n.progress&&n.progress(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&t(function(){n.progress&&n.progress(e)})},!1)}});var i=e(n);return i.progress=function(e){return n.progress=e,i},i.abort=function(){return n.__XHR&&t(function(){n.__XHR.abort()}),i},i.xhr=function(e){return n.xhrFn=e,i},i.then=function(e,t){return function(i,r,o){n.progress=o||n.progress;var a=t.apply(e,[i,r,o]);return a.abort=e.abort,a.progress=e.progress,a.xhr=e.xhr,a}}(i,i.then),i}this.upload=function(t){t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest||e.defaults.transformRequest;var i=new FormData,r=t.transformRequest,o=t.data;return t.transformRequest=function(e,n){var i,a,s,l,d,c;if(o)if(t.formDataAppender)for(i in o)a=o[i],t.formDataAppender(e,i,a);else for(i in o){if(a=o[i],"function"==typeof r)a=r(a,n);else for(c=0;c<r.length;c++)"function"==typeof(s=r[c])&&(a=s(a,n));e.append(i,a)}if(null!=t.file)if(l=t.fileFormDataName||"file","[object Array]"===Object.prototype.toString.call(t.file))for(d="[object String]"===Object.prototype.toString.call(l),c=0;c<t.file.length;c++)e.append(d?l+c:l[c],t.file[c],t.file[c].name);else e.append(l,t.file,t.file.name);return e},t.data=i,n(t)},this.http=function(e){return n(e)}}]),t.directive("ngFileSelect",["$parse","$timeout",function(e,t){return function(n,i,r){var o=e(r.ngFileSelect);i.bind("change",function(e){var i,r,a=[];if(null!=(i=e.target.files))for(r=0;r<i.length;r++)a.push(i.item(r));t(function(){o(n,{$files:a,$event:e})})}),i.bind("click",function(){this.value=null})}}]),t.directive("ngFileDropAvailable",["$parse","$timeout",function(e,t){return function(n,i,r){if("draggable"in document.createElement("span")){var o=e(r.ngFileDropAvailable);t(function(){o(n)})}}}]),t.directive("ngFileDrop",["$parse","$timeout",function(e,t){return function(n,i,r){var o,a,s;if("draggable"in document.createElement("span")){function l(e,t){if(t.isDirectory){var n=t.createReader();s++,n.readEntries(function(t){for(var n=0;n<t.length;n++)l(e,t[n]);s--})}else s++,t.file(function(t){s--,e.push(t)})}o=null,a=e(r.ngFileDrop),i[0].addEventListener("dragover",function(e){t.cancel(o),e.stopPropagation(),e.preventDefault(),i.addClass(r.ngFileDragOverClass||"dragover")},!1),i[0].addEventListener("dragleave",function(){o=t(function(){i.removeClass(r.ngFileDragOverClass||"dragover")})},!1),s=0,i[0].addEventListener("drop",function(e){var o,d,c,u;if(i.removeClass(r.ngFileDragOverClass||"dragover"),o=[],(d=e.dataTransfer.items)&&d.length>0&&d[0].webkitGetAsEntry())for(e.stopPropagation(),e.preventDefault(),u=0;u<d.length;u++)l(o,d[u].webkitGetAsEntry());else if(null!=(c=e.dataTransfer.files)&&c.length>0)for(e.stopPropagation(),e.preventDefault(),u=0;u<c.length;u++)o.push(c.item(u));!function i(r){t(function(){s?i(10):a(n,{$files:o,$event:e})},r||0)}()},!1)}}}])}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return v});var r=n(13),o=n(300),a=n(301),s=n(302),l=n(303),d=n(304),c=n(30),u=n(32),h=n(31),p=n(33),f=n(34),g=n(305),m=n(306),v=e.module("Magister.Core",["ngRoute","ngResource","ngCookies","angular-data.DSCacheFactory",r.OidcModule.name]);v.service("instellingResource",c.a.$inject).service("instellingService",f.a.$inject).service("instellingUpdateService",h.a.$inject).service("applicationService",u.a.$inject).service("cacheService",p.a.$inject).service("resourceService",g.a.$inject).service("loggingService",s.a.$inject).service("syncHttpService",l.a).service("storageService",["$cookies",o.a]).service("objectUrlService",a.a).service("oidcSessionHandlerService",d.a),v.config(["oidcServiceProvider",function(e){e.pushSessionHandler("oidcSessionHandlerService")}]),v.directive("smNotificationBar",m.a),v.value("instellingUpdateList",[{instellingKey:"VANDAAG_SCHERM",versies:i.sortBy([{versie:1,updateInstelling:"Content/app/scripts/vandaag/instellingen/ConvertVandaagSchermVersion0ToVersion1"}],function(e){return e.versie}),defaultInstelling:"Content/app/scripts/vandaag/instellingen/VandaagSchermDefault"}])}).call(this,n(1),n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$cookies=e,this.supportsStorage=!1,this.supportsStorage=this.supportsLocalStorage()}return e.prototype.setItem=function(e,t,n){this.supportsStorage?("local"===n?window.localStorage:window.sessionStorage).setItem(e,t):this.$cookies.put(e,t)},e.prototype.getItem=function(e,t){return this.supportsStorage?("local"===t?window.localStorage:window.sessionStorage).getItem(e):this.$cookies.get(e)},e.prototype.supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("mgstr","mgstr"),window.localStorage.removeItem("mgstr"),!0)}catch(e){return!1}},e.$inject=["$cookies",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){var i=this;this.cacheService=e,this.$q=t,this.$http=n,this.objectUrlCacheOptions={maxAge:18e5,deleteOnExpire:"aggressive",recycleFreq:1e4,storageMode:"memory",storagePrefix:"M6.",onExpire:function(e){return i.revokeObjectURL(e)}},this.notFoundUrlsCacheOptions={maxAge:3e5,deleteOnExpire:"aggressive",recycleFreq:1e4,storageMode:"memory",storagePrefix:"M6."},this.objectUrlCache=this.cacheService.createCache("objectUrlCache",this.objectUrlCacheOptions),this.notFoundUrlsCache=this.cacheService.createCache("notFoundUrlsCache",this.notFoundUrlsCacheOptions)}return e.prototype.getObjectUrl=function(e){var t=this.objectUrlCache.get(e);return t?this.$q.resolve(t):this.notFoundUrlsCache.get(e)?this.$q.reject(new Error("Not found")):this.downloadAndCreateObjectUrl(e)},e.prototype.downloadAndCreateObjectUrl=function(e){var t=this,n=-1===e.indexOf("?")?"?redirect_type=body":"&redirect_type=body";return this.$http.get(""+e+n,{responseType:"arraybuffer",headers:{accept:"image/webp,image/*,*/*;q=0.8"},transformResponse:function(e,t){var n=t("Content-Type");return!n||n&&-1===n.indexOf("application/json")?e:String.fromCharCode.apply(null,new Uint8Array(e))}}).then(function(n){if("string"==typeof n.data){var i=JSON.parse(n.data);if(!i.location)throw new Error("No location in redirect body");return t.objectUrlCache.put(e,i.location),i.location}var r=void 0;n.headers&&(r=n.headers("Content-Type"));var o=new Blob([n.data],{type:r}),a=URL.createObjectURL(o);return t.objectUrlCache.put(e,a),a}).catch(function(n){return t.notFoundUrlsCache.put(e,!0),t.$q.reject(new Error("Not found"))})},e.prototype.revokeObjectURL=function(e){URL.revokeObjectURL(e)},e.$inject=["cacheService","$q","$http"],e}()},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(4),o=function(){function t(e,t,n,i,r,o){var a=this;this.$document=e,this.$q=t,this.$log=n,this.resourceService=i,this.$interval=r,this.currentUser=o,this.blackListExceptions=["transition superseded","transition prevented","Possibly unhandled rejection"],this.ERROR_LOG_FLUSH_INTERVAL=5e3,this.errorList={},this.isReleaseBuild="true"===e.find("meta[name=release]").attr("content"),this.$interval(function(){a.flushErrorLog()},this.ERROR_LOG_FLUSH_INTERVAL,0,!1)}return t.prototype.flushErrorLog=function(){for(var e in this.errorList)if(this.errorList.hasOwnProperty(e)){var t=this.errorList[e],n={name:t.name.substr(0,30),message:t.message.substr(0,256),stack:t.stack.substr(0,4096),count:t.count,app:"LO"};this.resourceService.post("/api/m6/log/error",n)}this.errorList={}},t.prototype.logRouteChange=function(e,t,n){if(!this.isReleaseBuild||!e)return this.$log.log("routechange",e,n),this.$q.resolve(null);if(globalSettings.featureFlags.m6LoggingEnabled){var i={routeName:e.substr(0,30),pageLoadTime:n,app:"LO"};return this.logToPiwik("VirtualPageview",t.replace("/",""),e),this.resourceService.post("/api/m6/log/routechange",i)}},t.prototype.logError=function(e){return this.isReleaseBuild&&(this.isExceptionBlacklisted(e)||globalSettings.featureFlags.m6LoggingEnabled&&this.collectErrors(e)),this.$q.resolve(null)},t.prototype.logToPiwik=function(e,t,n){window.dataLayer&&window.dataLayer.push({event:e,virtualPageURL:"https://"+window.location.hostname+"/lo/"+t,virtualPageTitle:n,userType:this.currentUser.isInRole(r.a.Ouder)?"ouder":"leerling"})},t.prototype.collectErrors=function(t){var n=t.name;if(n||(n=t.toString()),this.errorList[n])this.errorList[n].count++;else{var i=void 0;i=e.isArray(t)?{name:t[0].name,message:t[0].message,stack:t[0].stack,count:1,app:"LO"}:{name:t.name,message:t.message,stack:t.stack,count:1,app:"LO"},this.errorList[n]=i}},t.prototype.logCustomEvent=function(e){if(this.isReleaseBuild&&globalSettings.featureFlags.m6LoggingEnabled){var t={type:e,app:"LO"};return this.resourceService.post("/api/m6/log/event",t)}return this.$q.resolve(null)},t.prototype.isExceptionBlacklisted=function(e){var t=e.message||e||"";return i.any(this.blackListExceptions,function(e){return-1!==t.indexOf(e)})},t.$inject=["$document","$q","$log","resourceService","$interval","currentUser",t],t}()}).call(this,n(1),n(3))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(e,t){this.$q=e,this.oidcService=t}return t.prototype.post=function(t,n){var i=this;return new this.$q(function(r,o){var a;try{a=JSON.stringify(n)}catch(e){return o(e)}e.ajax({method:"POST",url:t,headers:{Authorization:"Bearer "+i.oidcService.getAccessTokenSync()},data:a,contentType:"application/json",async:!1,success:function(e,t,n){r({data:e,status:n.status})},error:o})})},t.prototype.get=function(t){var n=this;return new this.$q(function(i,r){e.ajax({method:"GET",url:t,headers:{Authorization:"Bearer "+n.oidcService.getAccessTokenSync()},contentType:"application/json",async:!1,success:function(e,t,n){i({data:e,status:n.status})},error:function(e,t,n){return r({request:e,textStatus:t,error:n})}})})},t}();i.$inject=["$q","oidcService"]}).call(this,n(10))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$window=e,this.sessieService=t}return e.prototype.onCleanUp=function(){return this.sessieService.deleteCurrent().then(function(){})},e.prototype.onRefreshed=function(e){this.sessieService.getCurrent()},e.prototype.onQuerySessionLoop=function(){this.$window.location.assign("/error.html?statusCode=Magister kan niet checken of je ergens anders bent uitgelogd, mogelijk worden de benodigde cookies geblokkeerd door je browser.")},e.$inject=["$window","sessieService"],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(e,t){this.$http=e,this.$q=t}return t.prototype.get=function(e,t){var n=this,i=this.$q.defer();if(-1!==(e=this.prefixApi(e)).indexOf("#")){var r=e.split("#");e=r[0],t=r[1];var o=this.$q.defer();this.resolveUrl(o,e,t).then(function(e){n.getData(i,e)})}else this.getData(i,e);return i.promise},t.prototype.post=function(e,t){var n=this,i=this.$q.defer();if(-1!==(e=this.prefixApi(e)).indexOf("#")){var r=e.split("#");e=r[0];var o=r[1],a=this.$q.defer();this.resolveUrl(a,e,o).then(function(e){n.postData(i,e,t)})}else this.postData(i,e,t);return i.promise},t.prototype.put=function(e,t){var n=this.$q.defer();return this.$http.put(e,t).then(function(e){return n.resolve(e)}).catch(function(e){return n.reject(e.message)}),n.promise},t.prototype.getHrefByRel=function(t,n){if(e.isString(n))if(n=n.toLowerCase(),e.isArray(t.links)){for(var i=t.links.length,r=0;r<i;r++)if(t.links[r].rel.toLowerCase()===n)return t.links[r].href}else for(var o in t.links)if(o.toLowerCase()===n)return t.links[o].href},t.prototype.hasRelation=function(t,n){return e.isString(this.getHrefByRel(t,n))},t.prototype.resolveUrl=function(e,t,n){var i=this;return this.$http.get(t).then(function(t){var r=n.split("/"),o=i.getHrefByRel(t.data,r[0]);void 0===o&&e.reject("Requested rel not found in HATEOAS links collection."),1===r.length?e.resolve(o):(r.shift(),i.resolveUrl(e,o,r.join("/")))}),e.promise},t.prototype.prefixApi=function(e){return 0!==e.indexOf("/api")&&(e="/api"+e),e},t.prototype.postData=function(e,t,n){this.$http.post(t,n).then(function(t){return e.resolve(t)}).catch(function(t){return e.reject(t.message)})},t.prototype.getData=function(e,t){this.$http.get(t).then(function(t){e.resolve(t.data)},function(t){e.reject(t)})},t.$inject=["$http","$q",t],t}()}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(8),r=function(){function e(e,t,n){var r=this;this.$scope=e,this.$sce=t,this.$timeoutService=n,this.message={message:"",trustedMessage:"",messageType:i.j.INFORMATION,visibleTime:0,title:""},this.isVisible=!1,this.notificationTimeoutPromise=null,e.$on("SHOW_NOTIFICATION_REQUEST",function(e,t){return r.onShowNotification(t)}),e.$on("HIDE_NOTIFICATION_REQUEST",function(){return r.onHideNotification()})}return e.prototype.onShowNotification=function(e){var t=this;this.message=e,this.message.trustedMessage=this.$sce.trustAsHtml(e.message),this.isVisible=!0,this.notificationTimeoutPromise&&this.$timeoutService.cancel(this.notificationTimeoutPromise),e.visibleTime&&e.visibleTime>0&&(this.notificationTimeoutPromise=this.$timeoutService(function(){return t.onHideNotification()},e.visibleTime))},e.prototype.onHideNotification=function(){this.message.trustedMessage="",this.isVisible=!1,this.$timeoutService.cancel(this.notificationTimeoutPromise),this.notificationTimeoutPromise=null},e.$inject=["$scope","$sce","$timeout"],e}();function o(){return{template:n(307),transclude:!0,controller:r,controllerAs:"vm"}}},function(e,t){e.exports='<div class="msg-container"\r\n     ng-class="{\'error-msg\': vm.message.messageType === 2, \'information-msg\': vm.message.messageType === 0, \'warning-msg\': vm.message.messageType === 1}"\r\n     ng-show="vm.isVisible"\r\n     ng-click="vm.onHideNotification()">\r\n  <a class="close-top"></a>\r\n  <span ng-bind-html="vm.message.trustedMessage"></span>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){var e=this;this.scope={title:"@",internalOnClick:"&onClick",isEnabled:"&",finishButton:"&"},this.replace=!0,this.restrict="E",this.transclude=!0,this.require="^?smWorkflow",this.template=n(309),this.link=function(t){return e.linkFN(t)}}return e.prototype.linkFN=function(e){var t=this;e.onClick=function(){return t.onClick(e)}},e.prototype.onClick=function(e){!0===e.isEnabled()&&e.internalOnClick()},e.$inject=[function(){return new e}],e}()},function(e,t){e.exports='<div class="wf-button">\r\n    <a data-ng-class="{\'grayed\': !isEnabled()}" data-ng-bind="title" data-ng-click="onClick()"\r\n     class="text-button"></a>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){this.require="^?smWorkflow",this.restrict="E",this.template='<div data-ng-class="{\'ng-hide\': !active}" class="sheet">\n                        </div>',this.replace=!0,this.transclude=!0,this.link=this.linkFn,this.scope=!0,this.controller="@",this.name="stepController"}return e.prototype.linkFn=function(e,t,n,i,r){e.id=n.id,e.title=n.title,e.$emit("registerStep",e),r(e,function(e){t.append(e)})},e.$inject=[function(){return new e}],e}()},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r=n(0),o=n(104),a=function(){function t(e){this.$scope=e,this.init()}return t.prototype.init=function(){var e=this;this.$scope.steps=[],this.$scope.$watch("activeStep",function(e,t){e&&(t&&(t.active=!1),e.active=!0)}),this.$scope.$on("registerStep",function(t,n){e.createStep(n)}),this.$scope.nextStep=function(){return e.nextStep()},this.$scope.prevStep=function(){return e.prevStep()},this.$scope.createStep=function(t){return e.createStep(t)},this.$scope.isFinishEnabled=function(){return e.isFinishActive()},this.$scope.openStep=function(t,n){return e.openStep(t,n)},this.$scope.onStepClick=function(t){return e.onStepClick(t)},this.$scope.prevStepAvailable=!1,this.$scope.nextStepAvailable=!1,this.$scope.isNextStepAvailable=function(){return e.isNextStepAvailable(e.$scope.activeStep)},this.$scope.isPrevStepAvailable=function(){return e.isPrevStepAvailable(e.$scope.activeStep)}},t.prototype.nextStep=function(){if(this.$scope.activeStep.canGoForward()){this.$scope.activeStep.beforeGoForward();var e=this.$scope.activeStep.index+1;if(this.$scope.steps[e])for(;!this.$scope.steps[e].canBeActivated();)e+=1;this.openStep(this.$scope.steps[e])}},t.prototype.prevStep=function(){if(this.$scope.activeStep.canGoBackward()){this.$scope.activeStep.beforeGoBackward();var e=this.$scope.activeStep.index-1;if(this.$scope.steps[e])for(;!this.$scope.steps[e].canBeActivated();)e-=1;this.openStep(this.$scope.steps[e])}},t.prototype.createStep=function(e){e.index=this.$scope.steps.length,0===e.index&&(this.$scope.activeStep=e),this.$scope.steps.push(e),this.$scope.nextStepAvailable=this.$scope.steps.length>1},t.prototype.isFinishActive=function(){return!this.$scope.nextStepAvailable},t.prototype.onStepClick=function(t){var n=this;if(!Object(r.w)(t)&&t.id!==this.$scope.activeStep.id&&t.canBeActivated()&&this.validateNavigation(t,this.$scope.activeStep,this.$scope.steps)){var i;e.some(this.$scope.steps,function(e){return e.id===t.id});e.each(this.$scope.steps,function(e,o){if(n.$scope.activeStep.id===e.id)var a=o;if(t.id===e.id)var s=o;Object(r.t)(a)&&Object(r.t)(s)&&(i=a>=s)}),(i?this.$scope.activeStep.canGoForward():this.$scope.activeStep.canGoBackward())&&(this.$scope.activeStep.beforeGoForward(),this.$scope.activeStep=t,this.enablePrevNextButtons())}},t.prototype.validateNavigation=function(t,n,i){var r,o=e.indexOf(i,n),a=e.indexOf(i,t);if(a>o){for(r=o;r<a;r++)if(!i[r].canGoForward())return!1}else if(a<o)for(r=o;r>a;r--)if(!i[r].canGoBackward())return!1;return!0},t.prototype.openStep=function(t,n){if(void 0===n&&(n=!1),!Object(r.w)(t)&&t.id!==this.$scope.activeStep.id&&t.canBeActivated()){e.some(this.$scope.steps,function(e){return e.id===t.id});n&&this.$scope.activeStep.beforeGoBackward(),this.$scope.activeStep=t,this.enablePrevNextButtons()}},t.prototype.jumpToStep=function(t){var n=e.find(this.$scope.steps,function(e){return e.id===t});Object(r.w)(n)||(this.$scope.activeStep=n,this.enablePrevNextButtons())},t.prototype.awaitJumpToStep=function(e){var t=this;this.$scope.$watch("steps",function(n){!Object(r.w)(n)&&n.length>0&&t.jumpToStep(e)})},t.prototype.isNextStepAvailable=function(e){return e!==this.$scope.steps[this.$scope.steps.length-1]&&e.enableGoForward()},t.prototype.isPrevStepAvailable=function(e){return e!==this.$scope.steps[0]&&e.canGoBackward()},t.prototype.enablePrevNextButtons=function(){this.$scope.prevStepAvailable=this.isPrevStepAvailable(this.$scope.activeStep),this.$scope.nextStepAvailable=this.isNextStepAvailable(this.$scope.activeStep)},t.$inject=["$scope",t],t}(),s=function(){function e(){var e=this;this.CLASS_SHEET=".sheet",this.CLASS_BUTTON=".wf-button",this.ELEMENT_DIV="<div></div>",this.ELEMENT_TRANSCLUDE_STEPS="#transclude-steps",this.ATTRIBUTE_FINISH='[data-finish-button="true"]',this.ATTRIBUTE_FORWARD='[data-forward-button="true"]',this.ATTRIBUTE_PREVIOUS='[data-previous-button="true"]',this.ATTRIBUTE_CANCEL='[data-cancel-button="true"]',this.ELEMENT_TRANSCLUDE_BUTTONS="#transclude-buttons",this.restrict="E",this.template='<div class="container">\n                                <div class="head-bar">\n                                    <div data-ng-if="showDefaultFinishButton"><a class="text-button" data-ng-click="onFinish()" data-ng-class="{\'disabled\': nextStepAvailable}" id="step-voltooien-knop">voltooien</a></div>\n                                    <div id="transclude-buttons"></div>\n                                    <div data-ng-if="showDefaultForwardButton"><a class="text-button" data-ng-click="nextStep()" data-ng-class="{\'disabled\': !nextStepAvailable}" id="volgende-step-knop">volgende</a></div>\n                                    <div data-ng-if="showDefaultPreviousButton"><a class="text-button" data-ng-click="prevStep()" data-ng-class="{\'disabled\': !prevStepAvailable}" id="vorige-step-knop">vorige</a></div>\n                                    <div data-ng-if="showDefaultCancelButton"><a class="text-button" data-ng-click="onClose()" id="step-annuleren-knop">annuleren</a></div>\n                                    <h1 data-ng-bind-template="{{title}} {{activeStep.index + 1}}/{{steps.length}}"></h1>\n                                </div>\n                                <section class="main wizzard-block">\n                                    <div class="content-container">\n                                        <div class="wizzard">\n                                            <ul class="tabs-strip col-noprint">\n                                                <li data-ng-repeat="step in steps" data-ng-class="{\'active\': step.active, \'disabled\': !step.canBeActivated()}">\n                                                    <a data-ng-click="onStepClick(step);" data-ng-bind="step.title"></a>\n                                                </li>\n                                            </ul>\n                                            <div id="transclude-steps"></div>\n                                        </div>\n                                    </div>\n                                </section>\n                            </div>',this.replace=!0,this.transclude=!0,this.scope=!0,this.controller=a.$inject,this.link=function(t,n,i,r,o){return e.linkFN(t,n,i,r,o)}}return e.prototype.init=function(e){e.showDefaultFinishButton=!0,e.showDefaultForwardButton=!0,e.showDefaultPreviousButton=!0,e.showDefaultCancelButton=!0},e.prototype.linkFN=function(e,t,n,a,s){this.init(e);var l=n.title;e.title=void 0===l?"Titel":l;var d=e.$eval(o.a.GET_INIT_STEP_FN);if(Object(r.q)(d)){var c=d();null!==c&&c.then(function(e){Object(r.x)(e)&&a.awaitJumpToStep(e)})}var u=this;s(e,function(n){var r=i.element(u.ELEMENT_DIV);r.append(n);var o=r.find(u.CLASS_SHEET),a=r.find(u.CLASS_BUTTON);r.find(u.ATTRIBUTE_FINISH).length>0&&(e.showDefaultFinishButton=!1),r.find(u.ATTRIBUTE_FORWARD).length>0&&(e.showDefaultForwardButton=!1),r.find(u.ATTRIBUTE_PREVIOUS).length>0&&(e.showDefaultPreviousButton=!1),r.find(u.ATTRIBUTE_CANCEL).length>0&&(e.showDefaultCancelButton=!1);var s=t.find(u.ELEMENT_TRANSCLUDE_STEPS),l=t.find(u.ELEMENT_TRANSCLUDE_BUTTONS);s.replaceWith(o),l.replaceWith(a)})},e.$inject=[function(){return new e}],e}()}).call(this,n(3),n(1))},function(e,t,n){"use strict";function i(e){return{restrict:"A",replace:!0,link:function(t,n,i){var r=!1,o=!1,a=function(t){r?o=!0:t&&0===t.indexOf("data:")?n.css("background-image","url("+t+")"):t?(r=!0,e.getObjectUrl(t).then(function(e){n.css("background-image","url("+e+")")}).catch(function(){n.css("background-image","")}).then(function(){r=!1,o&&(o=!1,a(i.mgBackgroundImage))})):n.css("background-image","")};i.$observe("mgBackgroundImage",function(){a(i.mgBackgroundImage)})}}}n.d(t,"a",function(){return i}),i.$inject=["objectUrlService"]},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(85);function r(t,n,r){return{scope:{smCheckDirty:"&"},link:function(o,a,s){var l=t.$on("$locationChangeStart",function(t){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];if(e.isFunction(o.smCheckDirty))if(o.smCheckDirty()){t.preventDefault();var c=n.url(),u=s.dirtyMessage?s.dirtyMessage:"De inhoud is gewijzigd, weet je zeker dat je deze pagina wilt verlaten?",h=s.dirtyYesButton?i.a[s.dirtyYesButton]:i.a.Yes,p=s.dirtyCancelButton?i.a[s.dirtyCancelButton]:i.a.Cancel;r.showConfirm("Magister",u,[h,p],function(e){e.clickedButtonType===h&&(l(),n.url(c))})}else l()})}}}}).call(this,n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(85),r=n(8),o=n(0),a=function(){function t(e,t,n,i,r){this.$scope=e,this.$q=t,this.$timeout=n,this.dialogService=i,this.applicationService=r}return t.prototype.showDialog=function(e,t){var r=this;if(Object(o.w)(this.$scope.enabled)||!1!==this.$scope.enabled){var a;a=Object(o.w)(t)?{labelnaam:e.label}:t,this.dialogService.showDialog({title:e.title,template:n(105),buttons:[i.a.Ok,i.a.Cancel],callback:function(e,t){return r.handleDialogResult(e,t)},viewModel:a}),this.$timeout(function(){document.getElementById("single-input-dialog-mapname").focus()},50)}},t.prototype.handleDialogResult=function(t,n){if(t.clickedButtonType!==i.a.Cancel){var o=t.data.mapnaam,a=[];this.$scope.validateInput(o,a)?(this.$scope.handleInput(o),n.resolve({shouldClose:!0})):(this.applicationService.showMessage(e.first(a),r.j.WARNING,r.f),n.resolve({shouldClose:!1,invalidPropertyNames:["mapnaam"]}))}else n.resolve({shouldClose:!0})},t}();function s(){return{scope:{handleInput:"=",validateInput:"=",viewModel:"=",enabled:"="},controller:["$scope","$q","$timeout","dialogService","applicationService",a],link:function(e,t,n,i){var r=e.$eval(n.smSingleInputDialog);t.on("click",function(t){i.showDialog(r,e.viewModel)})}}}}).call(this,n(3))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(){var e=this;this.template='<h1 data-ng-bind="datum"></h1>',this.replace=!0,this.restrict="A",this.scope=!1,this.link=function(t,n,i){return e.linkFn(t,n,i)}}return t.prototype.linkFn=function(t,n,i){e.lang("nl-Nl"),t.datum=e().format("dddd, D MMMM YYYY")},t.$inject=[function(){return new t}],t}()}).call(this,n(15))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r=n(317),o=n(85),a=n(0),s=function(){function t(e,t,i,r){var o=this;this.$compile=e,this.$q=t,this.$timeout=i,this.$rootScope=r,this.template=n(318),this.replace=!0,this.scope={},this.controller=["$element","$scope",function(e,t){return o.controllerFn(e,t)}]}return t.prototype.controllerFn=function(e,t){var n=this;t.isDialogVisible=!1,t.buttonClicked=function(e){return n.closeDialog(t,e)},this.initButtons(t),this.$rootScope.$on("DIALOG_SHOW",function(i,o){t.title=o.title,t.text=o.text,t.vm=o.viewModel;var s=e.find(".dialog-content").empty();s.append(o.template),n.$compile(s.children().first())(t),t.size=o.size,t.dialogMode=Object(a.w)(o.dialogMode)?r.a.Default:o.dialogMode,t.frameless=o.frameless||!1,n.callback=o.callback,n.$timeout(function(){t.isDialogVisible=!0},0,!0),n.determineButtonsVisibility(t,o),t.dialogMode===r.a.Privacy&&n.setLoginDialogBackground()}),t.isClosing=!1},t.prototype.isInternetExplorer=function(){var e=window.navigator.userAgent;return-1!==e.indexOf("MSIE ")||!!e.match(/Trident.*rv\:11\./)},t.prototype.setLoginDialogBackground=function(){this.isInternetExplorer()?e(".dialog-overlay").addClass("privacy-overlay"):(e(".dialog-overlay").addClass("privacy-overlay-blur"),e("div.view").addClass("privacy-blur"),e("header").addClass("privacy-blur"))},t.prototype.closeDialog=function(t,n){var r=this;if(!t.isClosing){this.$timeout(function(){t.isClosing=!0},0,!0),null==n&&(n=this.getLastPrimaryButton(t));var s={clickedButtonType:n?n.type:o.a.Cancel,data:t.vm},l=this.$q.defer();l.promise.then(function(n){r.$timeout(function(){if(t.isDialogVisible=!n.shouldClose,t.isDialogVisible||(e(".dialog-overlay").removeClass("privacy-overlay-blur"),e(".dialog-overlay").removeClass("privacy-overlay-blur"),e("div.view").removeClass("privacy-blur"),e("header").removeClass("privacy-blur")),!Object(a.w)(n.invalidPropertyNames)){var r=i.keys(t.vm);i.each(r,function(e){-1!==e.indexOf("IsInValid")&&(t.vm[e]=!1)}),i.each(n.invalidPropertyNames,function(e){t.vm[e+"IsInValid"]=!0})}n.shouldClose&&(t.contentTemplateUrl=""),t.isClosing=!1},0,!0)}),this.callback(s,l)}},t.prototype.getLastPrimaryButton=function(e){var t=i.filter(e.buttonsOnScreen,function(e){return e.isPrimary});return t.length>0?i.last(t):void 0},t.prototype.determineButtonsVisibility=function(e,t){e.buttonsOnScreen=[];var n=0,i=function(i,r,o){return{scope:e,buttonTypes:t.buttons,buttonType:i,buttonText:r,isPrimary:o,position:n++}};e.buttons.continueVisible=this.determineButtonVisibility(i(o.a.Continue,"Doorgaan",!0)),e.buttons.saveVisible=this.determineButtonVisibility(i(o.a.Save,"Opslaan",!0)),e.buttons.doneVisible=this.determineButtonVisibility(i(o.a.Done,"Done",!0)),e.buttons.okVisible=this.determineButtonVisibility(i(o.a.Ok,"Ok",!0)),e.buttons.noVisible=this.determineButtonVisibility(i(o.a.No,"Nee",!0)),e.buttons.yesVisible=this.determineButtonVisibility(i(o.a.Yes,"Ja",!0)),e.buttons.cancelVisible=this.determineButtonVisibility(i(o.a.Cancel,"Annuleren",!1)),e.buttons.customPrimaryVisible=this.determineButtonVisibility(i(o.a.CustomPrimary,t.customPrimaryText,!0)),e.buttons.customSecondaryVisible=this.determineButtonVisibility(i(o.a.CustomSecondary,t.customSecondaryText,!1)),e.buttons.leavePageVisible=this.determineButtonVisibility(i(o.a.LeavePage,"Pagina verlaten",!0))},t.prototype.determineButtonVisibility=function(e){var t=i.some(e.buttonTypes,function(t){return t===e.buttonType});if(t){var n=e.isPrimary?"primary-button":"secondary-button";e.scope.buttonsOnScreen.push({text:e.buttonText,nr:e.position,cssClass:n,isPrimary:e.isPrimary,type:e.buttonType})}return t},t.prototype.initButtons=function(e){e.buttons={cancelVisible:!1,continueVisible:!1,noVisible:!1,okVisible:!1,yesVisible:!1,saveVisible:!1,doneVisible:!1,customPrimaryVisible:!1,customSecondaryVisible:!1,leavePageVisible:!1}},t.$inject=["$compile","$q","$timeout","$rootScope",function(e,n,i,r){return new t(e,n,i,r)}],t}()}).call(this,n(10),n(3))},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Default=0]="Default",e[e.Privacy=1]="Privacy"}(i||(i={}))},function(e,t){e.exports='<div class="dialog-overlay" data-ng-show="isDialogVisible">\r\n    <div class="dialog" data-ng-class="{\'dialog-large\': size === 2, \'dialog-medium\': size === 1, \'dialog-small\': size === 0}">\r\n        <div class="content-pane">\r\n            <h3 class="title" data-ng-bind="title">Magister</h3>\r\n            <div ng-class="{\'content\': frameless !== true, \'content-frameless\': frameless}" class="dialog-content"></div>\r\n            <footer class="footer">\r\n                <a data-ng-repeat="button in buttonsOnScreen" data-ng-class="{\'grayed\': isClosing}" class="{{button.cssClass}}" data-ng-click="buttonClicked(button);" data-ng-bind="button.text" id="dialog-{{button.text | lowercase}}-knop"></a>\r\n            </footer>\r\n        </div>\r\n    </div>\r\n    {{ dialog.dialogState }}\r\n</div>\r\n'},function(e,t,n){"use strict";function i(e){return{restrict:"A",link:function(t,n,i){n.bind("click",function(t){if(t.preventDefault(),!i.mgDownloadFile)throw new Error("mgDownloadFile directive is used but has no value");e.downloadFromLocation(i.mgDownloadFile)})}}}n.d(t,"a",function(){return i}),i.$inject=["downloadTokenService"]},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(0),r=n(321);var o=function(){function t(e,t){var n=this;this.$q=e,this.$timeout=t,this.dragEnabled=!0,this.processing=0,this.scope={drop:"&",fileDrop:"&",hintElement:"&",dragEnabled:"=",startDrag:"&",dragEnd:"&",enter:"&"},this.replace=!0,this.link=function(e,t,i){return n.linkFn(e,t,i)}}return t.prototype.linkFn=function(t,n,i){var r=this;if(this.element=n,this.config=t.$eval(i.smDragDrop),this.className=this.config.dragOverClass||"drag-over",t.$watch("dragEnabled",function(e){r.dragEnabled=e}),this.config.drag){var o={hint:function(o){return(e.isDefined(i.hintElement)?t.hintElement():r.createHintElement)(n,r.config)},dragstart:function(e){if(!1===r.dragEnabled)return!1;t.$apply(function(t){var n=t.startDrag();void 0!==n&&n(e)})},dragend:function(e){n.removeClass(r.className),t.$apply(function(t){var n=t.dragEnd();void 0!==n&&n(e)})}};n.kendoDraggable(o)}this.config.drop&&n.kendoDropTarget({drop:function(e){n.removeClass(r.className),t.$apply(function(t){var n=t.drop();void 0!==n&&n(e)})},dragenter:function(e){n.addClass(r.className),t.$apply(function(t){var i=t.enter();void 0!==i&&(i(e.draggable.element,e.dropTarget)||(e.draggable.hint.addClass("drop-not-allowed"),n.removeClass(r.className)))})},dragleave:function(e){n.removeClass(r.className),e.draggable.hint.removeClass("drop-not-allowed")}}),this.config.fileDrop&&(n.on("dragover",function(e){return r.onDragHover(e)}),n.on("dragleave",function(e){return r.onDragHover(e)}),n.on("drop",function(e){r.isFile(e)&&(r.onDragHover(e),r.getFilesFromEvent(e.originalEvent).then(function(n){var i=t.fileDrop();void 0!==i&&i(n,e.originalEvent)}))}))},t.prototype.callback=function(e,t,n){var i=this;this.$timeout(function(){i.processing?i.callback(10,t,n):n()},e||0)},t.prototype.createHintElement=function(t,n){var i=n.dragHintClass||"drag-hint",o=e.element(document.createElement(t.get(0).tagName));return o.html(t.html()),o.width(t.width()),o.attr("data-id",t.attr("id")),r.a.setMetaData(o,n.metadata),o.addClass(i),o},t.prototype.getFilesFromEvent=function(e){var t=this.$q.defer(),n=[],i=e.dataTransfer.items;if(i&&i.length>0&&i[0].webkitGetAsEntry())for(var r=0;r<i.length;r++)this.traverseFileTree(n,i[r].webkitGetAsEntry());else{var o=e.dataTransfer.files;if(null!=o&&o.length>0)for(var a=0;a<o.length;a++)n.push(o.item(a))}return this.callback(0,e,function(){return t.resolve(n)}),t.promise},t.prototype.isFile=function(e){var t=e.originalEvent.dataTransfer,n=!1;return Object(i.w)(t.types)||(n=Object(i.w)(t.types.indexOf)?t.types.contains("application/x-moz-file")||t.types.contains("Files"):-1!==t.types.indexOf("Files")),n},t.prototype.onDragHover=function(e){this.isFile(e)&&(e.stopPropagation(),e.preventDefault(),"dragover"===e.type?this.element.addClass(this.className):this.element.removeClass(this.className))},t.prototype.traverseFileTree=function(e,t){var n=this;if(t.isDirectory){var i=t.createReader();this.processing++,i.readEntries(function(t){for(var i=0;i<t.length;i++)n.traverseFileTree(e,t[i]);n.processing--})}else this.processing++,t.file(function(t){n.processing--,e.push(t)})},t.$inject=["$q","$timeout",function(e,n){return new t(e,n)}],t}()}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(0),r=function(){function e(){}return e.eventToDragDropIds=function(e,t,n){void 0===t&&(t="id"),void 0===n&&(n="id");var r=e.draggable.currentTarget.attr(t),o=e.dropTarget.attr(n);return{dragId:parseInt(r,i.b),dropId:parseInt(o,i.b)}},e.getMetaData=function(e){return e.draggable.options.hint().attr("metadata")},e.setMetaData=function(e,t){e.attr("metadata",t)},e}()},function(e,t,n){"use strict";(function(e){function i(){return{scope:{drop:"&",dragstart:"&",operation:"@",disabled:"@"},link:function(t,n,i){if("true"!==t.disabled){var r=n[0],o=e(n[0]);if("droppable"===t.operation||"both"===t.operation){r.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),e.stopPropagation(),this.classList.add("drag-over"),!1},!1),r.addEventListener("dragenter",function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault(),o.addClass("drag-over"),!1}),r.addEventListener("dragleave",function(e){return o.removeClass("drag-over"),e.stopPropagation&&e.stopPropagation(),!1}),r.addEventListener("drop",function(e){e.stopPropagation&&""!==e.dataTransfer.getData("Text")&&e.stopPropagation(),o.removeClass("drag-over");var n=r.id,i=e.dataTransfer.getData("Text");return t.$apply(function(e){var t=e.drop();void 0!==t&&t(n,i)}),!1})}if("draggable"===t.operation||"both"===t.operation){r.draggable=!0,r.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id.toString()),o.addClass("drag");var n=this.id,i=e;return t.$apply(function(e){var t=e.dragstart();void 0!==t&&t(i,n)}),!1},!1),r.addEventListener("dragend",function(e){return o.removeClass("drag"),!1},!1)}}}}}n.d(t,"a",function(){return i})}).call(this,n(10))},function(e,t,n){"use strict";function i(){return{scope:{drop:"&",className:"@"},link:function(e,t,n){var i=e.className||"drag-over";t.kendoDropTarget({drop:function(t){e.$apply(function(e){var n=e.drop();void 0!==n&&n(t)})},dragenter:function(){t.addClass(i)},dragleave:function(){t.removeClass(i)}})}}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var i=n(8),r=n(85),o=n(0),a=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})},s=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=function(){function t(e,t,n,i,r,o,a,s,l,d){var c=this;this.$compile=e,this.$parse=t,this.settingsService=n,this.applicationService=i,this.bronnenService=r,this.dialogService=o,this.$upload=a,this.currentUser=s,this.cdsUploadService=l,this.loggingService=d,this.useCdsUpload=!1,this.transclude=!0,this.template='<div data-ng-file-drop="onFileDrop($files)" data-ng-file-drag-over-class="file-drag-over" style="height:100%;"><div ng-transclude style="height:100%;"></div>',this.link=function(e,t,n){return c.linkFn(e,t,n)},globalSettings&&(this.useCdsUpload=globalSettings.featureFlags.plagiaatCDS||!1)}return t.prototype.linkFn=function(e,t,n){var i=this;this.onFileUploadedHandler=this.$parse(n.smFileUpload),this.onFileUploadStartedHandler=this.$parse(n.smFileUploadStarted),this.settingsService.getUploadInstellingen(this.currentUser.person.id).then(function(t){i.uploadInstellingen=t,e.$eval(n.smOverschrijven)?e.onFileDrop=function(t){return i.allesOverschrijven(t,e)}:e.onFileDrop=function(t){return i.vraagOverschrijven(t,e)}}),e.skipQuotaCheck=e.$eval(n.smSkipQuotaCheck)},t.prototype.vraagOverschrijven=function(t,n){var i=this;if(n.bron){var r=n.bron.Id;this.bronnenService.getBronnen(n.bron).then(function(o){e.each(t,function(t,a){t.name,Contracts.Bronnen.Enums.BronType.Document;var s=!1;e.each(o.items,function(e){e.Naam===t.name&&(s=!0)}),s?i.showOverschrijvenBronDialog(t,n,r):i.checkUpload(t,n,r)})})}},t.prototype.allesOverschrijven=function(t,n){var i=this;e.each(t,function(e,t){i.checkUpload(e,n,void 0)})},t.prototype.checkUpload=function(t,n,r){var a=Object(o.i)(t.name);e.contains(this.uploadInstellingen.BlacklistedExtensions.split(","),a)?this.applicationService.showMessage("Uploaden mislukt: Extensie  "+a+" is niet toegestaan.",i.j.WARNING,4e3):this.uploadInstellingen.MaxUploadFileSize&&t.size>this.uploadInstellingen.MaxUploadFileSize?this.applicationService.showMessage("Uploaden mislukt: Bestand is te groot.",i.j.WARNING,4e3):!n.skipQuotaCheck&&this.uploadInstellingen.MySpaceUsed+t.size>this.uploadInstellingen.MyDiskQuota?this.applicationService.showMessage("Uploaden mislukt: Te weinig beschikbare ruimte.",i.j.WARNING,4e3):this.startUpload(t,n,r)},t.prototype.startUpload=function(e,t,n){var i=this;t.isUploading=!0,this.onFileUploadStartedHandler(t,{file:e,uploadMapId:n}),this.useCdsUpload?this.startUploadToCds(e,t):this.$upload.upload({url:globalSettings.apiHost+"api/file",file:e,method:"POST",headers:{"Content-Type":e.type}}).success(function(r,o,a,s){i.onFileUploadedHandler(t,{guid:r.Value,file:e,uploadMapId:n}),t.isUploading=!1}).error(function(e,n,i,r){t.isUploading=!1})},t.prototype.startUploadToCds=function(e,t){return a(this,void 0,void 0,function(){var n=this;return s(this,function(i){return this.cdsUploadService.getUploadRequest(e.name).then(function(i){n.cdsUploadService.uploadFile(e,i.uri).then(function(){n.onFileUploadedHandler(t,{guid:i.storageId,file:e,uploadMapId:void 0}),t.isUploading=!1,n.loggingService.logCustomEvent("CDS: Upload success")}).catch(function(){n.loggingService.logCustomEvent("CDS: Upload failed"),t.isUploading=!1})}).catch(function(){n.loggingService.logCustomEvent("CDS: uploadLink failed"),t.isUploading=!1}),[2]})})},t.prototype.showOverschrijvenBronDialog=function(e,t,n){var i=this,o="De bron <b>'"+e.name+"'</b> bestaat al, overschrijven?";this.dialogService.showConfirm("Bron overschrijven",o,[r.a.Ok,r.a.Cancel],function(o){o.clickedButtonType===r.a.Ok&&i.checkUpload(e,t,n)})},t.$inject=["$compile","$parse","settingsService","applicationService","bronnenService","dialogService","$upload","currentUser","cdsUploadService","loggingService",function(e,n,i,r,o,a,s,l,d,c){return new t(e,n,i,r,o,a,s,l,d,c)}],t}()}).call(this,n(3))},function(e,t,n){"use strict";function i(){return{link:function(e,t,n){"true"===n.smFocus&&t.focus(),n.waitForLoaded&&e.$watch("vm.isLoaded",function(e){t.focus()})}}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e){return{restrict:"A",replace:!0,link:function(t,n,i){var r=!1,o=!1,a=function(t){r?o=!0:t&&0===t.indexOf("data:")?n.attr("src",t):t?(r=!0,e.getObjectUrl(t).then(function(e){n.attr("src",e)}).catch(function(){i.httpSrcFallback?n.attr("src",i.httpSrcFallback):n.hide()}).then(function(){r=!1,o&&(o=!1,a(i.mgHttpSrc))})):i.httpSrcFallback?n.attr("src",i.httpSrcFallback):n.hide()};i.$observe("mgHttpSrc",function(){a(i.mgHttpSrc)})}}}n.d(t,"a",function(){return i}),i.$inject=["objectUrlService"]},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(){var e=this;this.capsLockKey=20,this.shiftKey=16,this.lowerCaseLetterACode=65,this.lowerCaseLetterZCode=90,this.upperCaseLetterACode=97,this.upperCaseLetterZCode=122,this.link=function(t,n,i){return e.linkFn(t,n,i)},this.restrict="A"}return t.prototype.linkFn=function(e,t,n){var i=this,r=e.$eval(n.keys),o=!!n.checkCaps&&e.$eval(n.checkCaps);t.bind("keyup",function(t){o&&i.onKeyupCheckForCapsLock(t,r,e,n.capsActive,n.capsInactive),i.onKeyup(t,r,e,n.onKeyup)})},t.prototype.onKeyupCheckForCapsLock=function(e,t,n,i,r){if(-1===navigator.userAgent.toLowerCase().indexOf("trident")){var o=e.keyCode?e.keyCode:e.which;o>=this.upperCaseLetterACode&&o<=this.upperCaseLetterZCode||o>=this.lowerCaseLetterACode&&o<=this.lowerCaseLetterZCode?this.isCapsLockOn(e)?n.$apply(i):n.$apply(r):o===this.capsLockKey&&n.$apply(r)}},t.prototype.isCapsLockOn=function(e){var t=e.keyCode?e.keyCode:e.which,n=e.target.value,i=n.slice(n.length-1,n.length),r=i===i.toUpperCase(),o=i===i.toLowerCase(),a=e.shiftKey?e.shiftKey:t===this.shiftKey;return r!==o&&(r&&!a||o&&a)},t.prototype.onKeyup=function(t,n,i,r){n&&0!==n.length?e.forEach(n,function(e){e===t.which&&i.$apply(r)}):i.$apply(r)},t.$inject=[function(){return new t}],t}()}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(0),o=function(){function t(){var e=this;this.link=function(t,n,i){return e.linkFn(t,n,i)},this.restrict="A"}return t.prototype.linkFn=function(t,n,o){if(!Object(r.r)()){e(n).focus();var a=o.onKeydown.replace("(event)",""),s=t;s[a]&&(s=s[a]),i.isFunction(s)&&e(n).on("keydown",s)}},t.$inject=[function(){return new t}],t}()}).call(this,n(10),n(3))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=function(){function t(e,t){this.$scope=e,this.$timeout=t,this.SHOW_API_PROGRESS_INDICATOR="SHOW_API_PROGRESS_INDICATOR",this.HIDE_API_PROGRESS_INDICATOR="HIDE_API_PROGRESS_INDICATOR",this.API_ERROR_INDICATOR_EVENT="HIDE_API_ERROR_PROGRESS_INDICATOR",this.DELAY_HIDE_SPINNER_TIMEOUT=500,this.spinner=null,this.overlay=null,this.elementDomain="",this.delayedHideSpinnerPromise=null,this.timeoutSpinnerPromise=null,this.isSpinnerShowing=!1,this.loadingConfig=null}return t.prototype.setLoadingIndicatorElement=function(t,n,i){var r=this;this.spinner=t,this.overlay=n,this.elementDomain=i.domain,this.loadingConfig=i,this.$scope.$on(this.SHOW_API_PROGRESS_INDICATOR,function(e,t){return r.showSpinner(e,t)}),this.$scope.$on(this.API_ERROR_INDICATOR_EVENT,function(e,t){return r.hideSpinner(e,t)}),e.isDefined(this.loadingConfig.hideEvent)?this.$scope.$on(this.loadingConfig.hideEvent,function(e,t){return r.hideSpinner(e,t)}):this.$scope.$on(this.HIDE_API_PROGRESS_INDICATOR,function(e,t){return r.hideSpinner(e,t)}),i.overlay||(i.startShowing?this.spinner.show():this.spinner.hide())},t.prototype.showSpinner=function(t,n){var i=this;this.isOwner(n)&&(null!==this.delayedHideSpinnerPromise?(this.$timeout.cancel(this.delayedHideSpinnerPromise),this.delayedHideSpinnerPromise=null):this.isSpinnerShowing||(this.spinner.show(),this.isSpinnerShowing=!0,e.isDefined(this.loadingConfig.timeout)&&(this.timeoutSpinnerPromise=this.$timeout(function(){i.$timeout.cancel(i.delayedHideSpinnerPromise),i.delayedHideSpinnerPromise=null,i.delayedHideSpinner()},this.loadingConfig.timeout))))},t.prototype.hideSpinner=function(e,t){var n=this;this.isOwner(t)&&null===this.delayedHideSpinnerPromise&&(this.delayedHideSpinnerPromise=this.$timeout(function(){return n.delayedHideSpinner()},this.DELAY_HIDE_SPINNER_TIMEOUT))},t.prototype.isOwner=function(t){if(e.isUndefined(this.elementDomain)||"*"===this.elementDomain||"*"===t)return!0;var n=this.elementDomain.split(";");return i.some(n,function(e){return e.toLowerCase()===t.toLowerCase()})},t.prototype.delayedHideSpinner=function(){this.loadingConfig.overlay?this.overlay.hide():this.spinner.hide(),this.delayedHideSpinnerPromise=null,this.isSpinnerShowing=!1},t.$inject=["$scope","$timeout"],t}();function o(){return{controller:r,scope:{},link:function(t,n,i,r){var o,a=t.$eval(i.smLoadingIndicator),s="data:image/gif;base64,R0lGODlhGAAYAPQKABui3zKq4mK+6bni9dXu+dzw+uf1/FG45ojO7hWe3nfH7Krc8+j2/GrC6obN7snp93jI7E+35lC35i6p4prW8cfo96fb86jb87Hf9Fu76JbU8HPF6zKr4lK455DR70ez5SH/C05FVFNDQVBFMi4wAwEAAAAh/i1NYWRlIGJ5IEtyYXNpbWlyYSBOZWpjaGV2YSAod3d3LmxvYWRpbmZvLm5ldCkAIfkECQUACgAsAAAAABgAGAAABcWgIo6jQVQVYZBsq1TaJhy0gAyrOxKIMNPAwGFT0SkGMh8wGBBeXJWNVLC5pE4aQbP5JBGk0kuOZNBsA8VRTDowKi5NgCD3lWLcIgRgf39LEWNGBgd7GwplbHgjegABBgYIkQSKIgMACQApkYCUCgRbAwUaCBqBeI8rZaQFnSwGFxoaaa0jA7FdtCKisbNuqCS2Fxesvo+uwhcYky6oxiwFwhgYFQXGjwXYzi0F0hgDAygoBOPVvhXf4OHjKpQm4Vfanc1uIQAh+QQJBQAZACwAAAAAGAAYAAAF32AmjiNDPA9hkGybPRTSzLPzuGxBKbQgNJGIRHHDPRAKHq0hkAgjB4zrCIEoHANCofC4NCRgySCHQCIGK5aBAg5EiiJLGQF3YSKBSYMhIszHOCMUAYSAA2UUaYEZDBKECowWFBR1iwiEEgxrkwWLJAOEAQ86k3yeIg+hAwySFoqeqQkBaBa1pqcDAACiGQO1BKciDgm7Kw8WGICeDAEACQ0iDAsDC8CnFs0LIxUD3beLBha3Bt0Do8Et5OYpDLeaBq8tDCj0WgXw7d8uJigE/vcG2qFjUMCflnzoWOhzEQIAIfkECQUAFgAsAAAAABgAFwAABdagJY6jURAEw5BsaxELhUC0oz0uayyOQ9OCRhBByL1kvR+t0cgEBy4ChdKjDFIMGEQgcEJJhqmG8lixGAvBISIojgZTijs3EEQiilEhRqkYRxR3EX4WDwuHfyMMDXcOIgOHc4mBbAZoh2aJFhURExEpkAOZiQSdEaIDqaN/BBOuqKqaj64ROA+pBbIWDq4SKwQDDziaDJ0TECIMwmWaDgkBE18vDxUpfxQTAAACmVnVBAY5CNoAE8OKKAQFKi0C2gkULibq6yqZD67xRgz19iRWsuyx+xMCACH5BAkFAAkALAAAAAAYABgAAAXVYCKOo2EUBGOQbJsUg6VpjqMthMsaw0w7CMRmqCnoXgufD+EYDhUVV2FhkS0qBRMM0XAOdgvq1cVzbnKjymCN1g02DYGjNAi3j5dGphFNENZ9RyIMEAICGiIPa0aCIwsHBxsMDBWVDI0jDwcdAgQGlRUrmH4dpaGgoyIEkAdRoKKYmpA5BLWXoxqQAisGtYyNDAIcAXMJvQRZmBoBzF8iJwW3RwvMARCwxibYJAwI1a0t2th/CAcA1RY62iUBAO7uAemCsAbt7wKBo/XnGwvbowNCHQkBACH5BAkFAAgALAAAAAAYABgAAAXTICKOpGEUJqmuCPMMVhwPBKsy1XDJXt8vBVtrsFhgZBaf78EyDJ5Pgun0SPoqKsMr2hx4FApPcER4mBlCxOML8Yy05nF6oIBAmIiCuZYWMTwNDRciBGUGfSMDgRpohVKIIg8CDQIEDIVyiAWUDUwFn5Aim5RYBgxooZKTNaYpkBYREQ2HU6h9Bg2xGm+ufbASEngivUIYwBIKabZvGrESB8IrFgEaAw8EA80TAQESGEIMAQkACdzm3AcLaRYA5OTnAQ1YaQYLDfDIA8t9Lk8P+yRCAAAh+QQJBQAHACwBAAAAFwAYAAAFyOAhjiNjMmSqHgzxDPAyPMVKti88LMvFDwYb7pGL8ShIgsrgItJOrQVFM1WSmAQCavVAIoOiVhZsI2gcjsuoUCCQbYcH2qE0FbbwMAW9YJ3yJAMOGxQGf4AjBBsbDncmiCWLG1qPkAcGiwpWliKKizWcIguLDm+QmIsaIw8CDogXAgIbFSIUAQAAFHkDAhmtIwO3CRMOeCUUGcmTJLa4Ex8OA1ldGx8fyQMqFBPDE97W4NYZ2VwZ3uff1pp5DAPV6RnRnAw5WnAhACH5BAkFAA8ALAAAAAAYABgAAAXH4COO5GOcZZqeBFG9FWGoa+vCQ17NtFnYsEoOQyzQToUkClkhXi7G0mlKI2CeFt6I2nsULBbNgMTtPiqadNSsWqTHbBVas2DEUwUNQmM/2e8GGg4aBQMBhwSACAgOLgCPcGwEiw4nAQkACHcDGxseMwqPB1o9Bh6dFiILjwmaZhidG4kPDAKHAQtdnJ0aJBW3ARqkIgYLsbIlFsACGjEuxgKxFW0RtwfX1xECGQ0bkSkVGxIB2NgCDY1mBgMIAuYbzXfENzI9IQAh+QQJBQAZACwAAAAAGAAYAAAF0WAmjqTIlGiaGQZTEHBxqiXLvvDzEDNt3y+dsJey9RgMgm4wMNCehQezOTJYnE/TtDLCAAKWrIiwGCxmjcSXSBtgLo9VAJBAiMeWyyDzCKj3dwwWgwYDcwFxgRYUV4YBiHcZDBSUUY8BgGIFlBQtEo92dw+UC04KjxJYT5MIDoCOARRiAwitBCYNEwERGE8PtQgLJA8RARISFGwrtBC1BSUDx8cNCzsvAw4Q2giJJRjSEQcCDeTk290oDxASBxENAuPmFM9ZDw7l8uhiBko7qighACH5BAkFABgALAAAAQAYABcAAAXVICaOJMacZ6mKA0WiZ8GsIzVNzwgXBVEYKwoAkBCoYoTkjFSZEAEOmiFZISxNgmHARTMRHg/CaHBLILojQ+VRWSpukSsaPBAzIrcoelQYDHIPEjcDezp+AwxkN2KFJoeJeBGMhYkLiASROY0MCwsXDAYCERFchQSdhBgOow1yXZ0LmgOjpIUVFBQWBSMQowKpNAS4FMAYBKIHAguuJg/DFK4DAhkCAhAXMgwELQgODhSTJAMN0w0NEOjo3d/hJQQI5ALn6d4XQHvODundC+17J0lkdAkBACH5BAkFABIALAAAAAAYABgAAAXVoCSOo1ENZKqWyxYAnLHOUiUAOBDIdGq9ucSuZOCpfgEO4IAYEEjFoqoSCSQRjFnUKDG4kpZet1DIigbWgEY8JhB4CKuASyu4ZQzB4bBmd91PBHsHFX5dFYgSD4NPhogVBot7jX6PBgQCHR2FfiaIBgwQmguGBQMDDyIaAgIbdDMnTiIVDRkNYWIEAwsDRggCDQoodbwDnCIEEBvLA2YpFRbRC3QDyxsNTQVFBRULGgsLFgUrD9bLDgga6uvidRrWCAgODuu9bATe8eoWA+OGXZfK9AgBACH5BAkFABUALAAAAAAYABgAAAXRYCWOI/MMw8OQbGsMihTMc7MYLfs09JwAP4AlN8LIej5gYEUcRCYzCWJAOCECQ+JDEolIKExSOBfzYogkA270OHgp6LR65Og2xmj1nNHoLuJyBisEDQIND4BpDCsPAoYFiSMFkxU7jpCRFQUEBAaEDYeZnpwVDAigZ5EGD6QVFIYIeERVD5gPELgDiQUPvWuuEAoIiGgmvQRiDgrCA78kBCgpzpUI1QgUtXrQ0c05D9YOFBQW5BYDCyjTJAULCOHiGuXSidAWFPHmD+pxagVzaCEAIfkEBQUAGAAsAAAAABcAGAAABc4gJo6jQQzDY5BsOziCJE2TBA1rOxKQFM204ETw0GEGMcnhJxMCJhRX5hdpUB6Ek2MGAASiu0ZMQMmRGI5JwjsYwQSNthFD6UJFD7HgMncTRxQNDQoMfToGDoILhjoFCoMEjC0EChCEkiIMmpQQEGaMmgwFCJ2RmKEMFJ1yoKEYFwgIFIWgBZoYBAgODkWGBgXAI7AOFKZGDFkEZqkUzb0tyFkFLATNzQsEqAUP3Fi0JNXXCwsoKNwV2UYGAxYLF+PlKel92wMX5d6Yma5GIQA7";if(a.overlay){o=e.element('<img alt="" src="'+s+'" />');var l=e.element('<div class="loading-overlay"></div>'),d=e.element('<div class="'+a.className+'"><p>Gegevens ophalen</p></div>');d.prepend(o),l.prepend(d),n.prepend(l),r.setLoadingIndicatorElement(o,l,a)}else o=e.element('<img class="loading-image" alt="" src="'+s+'" />'),n.prepend(o),r.setLoadingIndicatorElement(o,null,a)}}}}).call(this,n(1),n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){var e=this;this.link=function(t,n,i){return e.linkFn(t,n,i)}}return e.prototype.linkFn=function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})},e.$inject=[function(){return new e}],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(e){var t=this;this.$timeout=e,this.scope={items:"=",override:"="},this.template=n(332),this.replace=!0,this.link=function(e,n,i){return t.linkFn(e,n,i)}}return t.prototype.linkFn=function(t,n,i){var r=this;t.$watch("items",function(n,i){r.$timeout(function(){e.isDefined(t.items)&&null!=t.items&&(t.dataAvailable=t.items.length>0)},200)}),t.$watch("override",function(n,i){r.$timeout(function(){e.isDefined(t.override)&&null!=t.override&&(t.dataAvailable=t.override)},200)})},t.$inject=["$timeout",function(e){return new t(e)}],t}()}).call(this,n(1))},function(e,t){e.exports='<div class="loading-overlay" ng-hide="dataAvailable" ng-init="dataAvailable=true">\r\n    <div class="icon-no-data">\r\n        <p class="no-items">Geen gegevens</p>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){var n=this;this.$timeout=e,this.$rootScope=t,this.link=function(e,t,i){return n.linkFn(e,t,i)}}return e.prototype.linkFn=function(e,t,n){var i=this;!0===e.$last&&this.$timeout(function(){i.$rootScope.$broadcast("NG_REPEAT_FINISHED",n.smNotifyComplete)})},e.$inject=["$timeout","$rootScope",function(t,n){return new e(t,n)}],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=function(){function e(e,t,n,i){this.$filter=e,this.$window=t,this.nonceService=n,this.downloadTokenService=i,this.MAGISTER_APP_ACTION="http://magisteraction/open/",this.IGNORE_KENNISNET_CHECK=["eduroute"],this.appendApiKey=e("appendApiKey")}return e.prototype.openLink=function(e){this.isApiCall(e)?(0===e.indexOf("/")&&(e=e.substring(1,e.length)),this.downloadTokenService.openTabToDownload(globalSettings.apiHost+e)):(e=this.addProtocol(e),this.$window.open(e,"_blank"))},e.prototype.transformUrlForMobileApp=function(e){return e=this.addProtocol(e),e=this.MAGISTER_APP_ACTION+encodeURIComponent(e)},e.prototype.addProtocol=function(e){return-1===e.indexOf("http://")&&-1===e.indexOf("https://")&&(e="http://"+e),e},e.prototype.isApiCall=function(e){return 0===e.indexOf("/api")},e.$inject=["$filter","$window","nonceService","downloadTokenService"],e}(),r=function(){function e(){var e=this;this.replace=!1,this.controller=i,this.link=function(t,n,i,r){return e.linkFn(t,n,i,r)}}return e.prototype.linkFn=function(e,t,n,i){if(n.smOpenLinkedResource){var r=function(t){var r=e.$eval(n.smOpenLinkedResource);r&&i.openLink(r)};t.on("click",r),e.$on("$destroy",function(){t.off("click",r)})}},e.$inject=[function(){return new e}],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(336),r=n(0);function o(){return{link:function(t,n,o){var a=e.first(n);if(!Object(r.w)(a)){i(a).on("dragend scroll",function(){return a.scrollTop+a.offsetHeight>=a.scrollHeight&&t.$eval(o.smScroll),!1})}}}}}).call(this,n(3))},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(106),r=function(){function t(e,t,n,i){this.$scope=e,this.speechBubbleService=t,this.$compile=n,this.$timeout=i}return t.prototype.$onInit=function(){var e=this;this.speechBubbleService.registerSpeechBubbleCallbacks({showBubble:function(t,n,i){e.showBubble(t,n,i)},hideBubble:function(){e.hideBubble()}})},t.prototype.showBubble=function(t,n,i){var r,o=this;if(!n)throw new Error("The position argument is required.");"string"==typeof t?(r=e(t),this.$scope.showSpeechBubble(n,i,r)):(r=this.$compile(t.template)(t.scope),this.$timeout(function(){o.$scope.showSpeechBubble(n,i,r)}))},t.prototype.hideBubble=function(){this.$scope.hideSpeechBubble()},t.$inject=["$scope","speechBubbleService","$compile","$timeout"],t}();function o(){return{template:' <div class="speech-bubble-container">\n                        <div class="speech-triangle-shadow"></div>\n                        <div class="triangle-border-container">\n                            <div class="speech-triangle-border"></div>\n                        </div>\n                        <div class="speech-bubble"></div>\n                        <div class="speech-triangle"></div>\n                    </div>',controller:r,controllerAs:"$ctrl",scope:{},link:function(t,n){var r,o,a,s,l=9,d=3,c=1,u=1,h=1,p=6.35,f=0,g=2,m={all:"tri-right tri-left tri-above tri-below",right:"tri-right",left:"tri-left",above:"tri-above",below:"tri-below"},v=n.find("div.speech-bubble-container"),b=n.find("div.speech-bubble"),_=n.find("div.speech-triangle"),k=n.find("div.speech-triangle-border"),w=n.find("div.triangle-border-container"),y=n.find("div.speech-triangle-shadow"),x=e(window),C=e("body")[0],S=function(e){v[0].contains(e.target)||(s.stopClickOnHideFor&&s.stopClickOnHideFor[0].contains(e.target)&&e.stopPropagation(),C.removeEventListener("click",S,!0),t.$apply(function(){t.hideSpeechBubble()}))},T=function(e){return e.stopPropagation()},D=!1,I=0;function E(e,t,n){var r,o;n.showOnlyWithin?(r={width:n.showOnlyWithin.width(),height:n.showOnlyWithin.height()},o=n.showOnlyWithin.offset()):r={width:x.width(),height:x.height()};var a=t.offset();o&&(a={top:a.top-o.top,left:a.left-o.left});var s,w,C={width:t.outerWidth(!1),height:t.outerHeight(!1)},S=function(e,t,n,r,o){switch(e){case i.a.right:return t.width-(r.left+n.width)>=o.width+l+d-f?i.a.right:i.a.left;case i.a.left:return r.left>=o.width+l+d-f?i.a.left:i.a.right;case i.a.above:return r.top>=o.height+l+d-f?i.a.above:i.a.below;case i.a.below:return t.height-(r.top+n.height)>=o.height+l+d-f?i.a.below:i.a.above;default:throw new Error("Preferred position must have the value 'left', 'right', 'above' or 'below'")}}(n.preferredPosition,r,C,a,e),T=function(e,t,n){switch(e){case i.a.right:return{top:n.top+t.height/2,left:n.left+t.width};case i.a.left:return{top:n.top+t.height/2,left:n.left};case i.a.above:return{top:n.top,left:n.left+t.width/2};case i.a.below:return{top:n.top+t.height,left:n.left+t.width/2};default:throw new Error("Placement must have the value 'left', 'right', 'above' or 'below'")}}(S,C,a);if(n.handleHide&&n.showOnlyWithin&&(w=r,(s=T).top<0||s.top>w.height||s.left<0||s.left>w.width))return b.hide(),_.hide(),y.hide(),void k.hide();var D,E=function(e,t){switch(e){case i.a.right:return{top:t.top-l,left:t.left+d};case i.a.left:return{top:t.top-l,left:t.left-d-l};case i.a.above:return{top:t.top-l-d,left:t.left-l};case i.a.below:return{top:t.top+d,left:t.left-l};default:throw new Error("Placement must have the value 'left', 'right', 'above' or 'below'")}}(S,T),O=function(e,t){switch(e){case i.a.right:return{top:t.top+l-p,left:t.left+l-p};case i.a.left:return{top:t.top+l-p,left:t.left-p};case i.a.above:return{top:t.top-p,left:t.left+l-p};case i.a.below:return{top:t.top+l-p,left:t.left+l-p};default:throw new Error("Placement must have the value 'left', 'right', 'above' or 'below'")}}(S,E);n.style&&n.style.border&&(D=function(e,t){switch(e){case i.a.right:return{top:t.top-h,left:t.left-h};case i.a.left:return{top:t.top-h,left:t.left};case i.a.above:return{top:t.top,left:t.left-h};case i.a.below:return{top:t.top-h,left:t.left-h};default:throw new Error("Placement must have the value 'left', 'right', 'above' or 'below'")}}(S,E)),function(e,t){switch(e.removeClass(m.all),t){case i.a.right:e.addClass(m.right);break;case i.a.left:e.addClass(m.left);break;case i.a.above:e.addClass(m.above);break;case i.a.below:e.addClass(m.below);break;default:throw new Error("Placement must have the value 'left', 'right', 'above' or 'below'")}}(v,S);var R=function(e,t,n,r,o,a){var s={top:0,left:0};switch(e){case i.a.right:s.left=t.left+l-f-g;break;case i.a.left:s.left=t.left-(a.width-f-g);break;case i.a.above:s.top=t.top-(a.height-f-g);break;case i.a.below:s.top=t.top+l-f-g;break;default:throw new Error("Placement must have the value 'left', 'right', 'above' or 'below'")}switch(e){case i.a.right:case i.a.left:s.top=o.top+r.height/2-I,s.top<c?s.top=c:s.top+a.height>=n.height&&(s.top=n.height-a.height-c);break;case i.a.above:case i.a.below:s.left=o.left+r.width/2-a.width/2,s.left<u?s.left=u:s.left+a.width>=n.width&&(s.left=n.width-a.width-u);break;default:throw new Error("Placement must have the value 'left', 'right', 'above' or 'below'")}return s}(S,E,r,C,a,e),P=E,M=O,F=D;o&&(R=A(R,o),P=A(P,o),M=A(M,o),F&&(F=A(F,o))),b.show(),b.offset(R),_.show(),_.offset(P),y.css("transform",""),y.show(),y.offset(M),y.css("transform","rotate(45deg)"),F&&(k.show(),k.offset(F))}function A(e,t){return{top:"number"==typeof e.top?e.top+t.top:void 0,left:"number"==typeof e.left?e.left+t.left:void 0}}t.showSpeechBubble=function(e,t,n){s=e,e.style&&(e.style.background&&(v.css("background-color",e.style.background),v.css("border-color",e.style.background)),e.style.textColor&&v.css("color",e.style.textColor)),f=0,e.style&&e.style.border&&(b.css("border","1px solid "+e.style.border),w.css("border-color",e.style.border),f=1),e.stopClickEvents&&v.click(T);var i="number"==typeof s.bubbleWidth&&s.bubbleWidth>=0?s.bubbleWidth:300;b.css("max-width",i),a&&a.remove(),a=n,b.append(n),b[0].offsetHeight,b.show();var l=b[0].getBoundingClientRect(),d={height:l.height,width:l.width},c=null;if(e.verticalOffset){var u=/^(.*)px$/.exec(e.verticalOffset);if(u&&(c=Number(u[1])),null===c){var h=/^(.*)%$/.exec(e.verticalOffset);h&&(c=Number(h[1])/100*d.height)}}null===c&&(c=.5*d.height),I=c,E(d,t,e),r=function(){return E(d,t,e)},o=function(){return function(e,t,n){D||requestAnimationFrame(function(){D=!1,E(e,t,n)});D=!0}(d,t,e)},x.resize(r),C.addEventListener("scroll",o,!0),s.handleHide&&C.addEventListener("click",S,!0)},t.hideSpeechBubble=function(){v.attr("style",""),b.attr("style",""),_.attr("style",""),k.attr("style",""),y.attr("style",""),a&&a.remove(),x.off("resize",r),v.off("click",T),C.removeEventListener("scroll",o,!0),C.removeEventListener("scroll",S,!0),s=void 0,I=0}}}}}).call(this,n(10))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(8),r=function(){function t(e,t,i,r,o){var a=this;this.$sce=e,this.$timeout=t,this.$rootScope=i,this.applicationService=r,this.magisterLocale=o,this.CLASS_ERROR="alert-toast alert-msg",this.CLASS_WARNING="warning-toast info-msg",this.CLASS_INFORMATION="info-toast oke-msg",this.template=n(339),this.transclude=!0,this.link=function(e,t,n){return a.linkFn(e,t,n)},this.activeToasts=[]}return t.prototype.linkFn=function(e,t,n){var r=this;e.activeToasts=this.activeToasts,e.getMessageTypeClass=function(e){return r.getMessageTypeClass(e)},e.remove=function(e){return r.removeToast(e)},this.$rootScope.$on("SHOW_NOTIFICATION_REQUEST",function(e,t){return r.handleShowNotificationRequest(e,t)}),this.isOldIEVersion()&&this.applicationService.showMessage("Er wordt gebruik gemaakt van een verouderde browser die niet wordt ondersteund door Magister. Dit kan resulteren in onjuist werkende functionaliteit. Wij adviseren om gebruik te maken van een actuele browser.",i.j.WARNING,0,"Verouderde browser",!0)},t.prototype.isOldIEVersion=function(){return-1!==navigator.appName.indexOf("Internet Explorer")},t.prototype.removeToast=function(e){var t=this.findIndexAlreadyActive(e);!e.showPermanent&&t>=0&&this.activeToasts.splice(t,1)},t.prototype.handleShowNotificationRequest=function(t,n){var i;e.isDefined(n)&&null!==n&&(this.setDefaultTitleIfApplicable(n),n.trustedMessage=this.$sce.trustAsHtml(n.message),this.resetAlreadyActive(n)||(i=n.visibleTime>0?this.setTimeout(n):null,this.activeToasts.push({toast:n,timeoutPromise:i})))},t.prototype.resetAlreadyActive=function(t){var n=this.findAlreadyActive(t);return!(!e.isDefined(n)||null===n)&&(this.$timeout.cancel(n.timeoutPromise),n.timeoutPromise=this.setTimeout(t),!0)},t.prototype.setTimeout=function(e){var t=this;return this.$timeout(function(){t.removeToast(e)},e.visibleTime)},t.prototype.findAlreadyActive=function(e){var t=this.findIndexAlreadyActive(e);return this.activeToasts[t]},t.prototype.findIndexAlreadyActive=function(e){for(var t=0;t<this.activeToasts.length;t++){var n=this.activeToasts[t].toast;if(null!=n&&n.title===e.title&&n.message===e.message&&n.messageType===e.messageType)return t}return-1},t.prototype.setDefaultTitleIfApplicable=function(t){if(e.isUndefined(t.title))switch(t.messageType){case i.j.ERROR:t.title=this.magisterLocale.NotificationStrings.TITLE_ERROR_DEFAULT;break;case i.j.WARNING:t.title=this.magisterLocale.NotificationStrings.TITLE_WARNING_DEFAULT;break;default:t.title=""}},t.prototype.getMessageTypeClass=function(e){var t=this.CLASS_WARNING;switch(e){case i.j.ERROR:t=this.CLASS_ERROR;break;case i.j.WARNING:t=this.CLASS_WARNING;break;case i.j.INFORMATION:t=this.CLASS_INFORMATION}return t},t.$inject=["$sce","$timeout","$rootScope","applicationService","magisterLocale",function(e,n,i,r,o){return new t(e,n,i,r,o)}],t}()}).call(this,n(1))},function(e,t){e.exports='<div class="toasts">\r\n    <div id="toast-{{$index}}" data-ng-repeat="toast in activeToasts" class="toast" data-ng-class="getMessageTypeClass(toast.toast.messageType)" data-ng-click="remove(toast.toast)" data-ng-style="{\'z-index\': 9999999-$index}">\r\n        <span class="glyph"><a href="#"></a></span>\r\n        <span data-ng-bind="toast.toast.title"></span>\r\n        <em data-ng-bind-html="toast.toast.trustedMessage"></em>\r\n        <i></i>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={restrict:"E",scope:!1,template:n(341)}},function(e,t){e.exports='<a data-ng-bind="map.caption" id="{{map.Id}}"></a>\r\n<ul data-ng-hide="map.isCollapsed">\r\n    <li id="{{map.Id}}"\r\n        data-sm-drag-drop="{drag: true, drop: true, fileDrop: true, metadata: \'map\', dragHintClass: \'bron-drag-hint\'}"\r\n        data-drop="handleDrop"\r\n        data-file-drop="handleFileDrop"\r\n        data-start-drag="onDragStart"\r\n        data-drag-end="onDragEnd"\r\n        data-enter="onDragEnter"\r\n        data-ng-click="selectMap(map, $event);"\r\n        data-ng-class="{\'selected\': map.selected, \'openmap\': !map.isCollapsed, \'map\': map.isCollapsed }"\r\n        data-ng-repeat="map in map.mappen | orderBy: \'caption\'"\r\n        data-sm-notify-complete="{{repeatFinishedId}}">\r\n        \x3c!--data-hint-element="createHintElement"--\x3e\r\n        <tree-item></tree-item>\r\n    </li>\r\n</ul>'},function(e,t,n){"use strict";function i(){return{restrict:"A",scope:{source:"=",selectedNode:"=",drop:"&",fileDrop:"&",hasFocus:"=",repeatFinishedId:"@",onDragEnter:"&",enter:"&"},template:n(343),link:function(e,t,n){e.selectMap=function(t,n){n.preventDefault(),n.stopPropagation(),t.unserialized||(e.selectedNode===t&&(t.isCollapsed=!t.isCollapsed),e.hasFocus=!0,e.selectedNode=t,e.$emit("SELECT-MAP-CHANGE",t,!0))},e.handleDrop=function(t){window.setTimeout(function(){e.$apply(function(e){var n=e.drop();void 0!==n&&n(t)})},0)},e.handleFileDrop=function(t,n){var i=e.fileDrop();void 0!==i&&i(t,n)},e.onFileUploaded=function(t,n,i){e.$emit("FILE-UPLOADED",t,n,i)},e.onDragEnter=function(t,n){var i=e.enter();return void 0===i||i(t,n)}}}}n.d(t,"a",function(){return i})},function(e,t){e.exports='<ul class="list sources small-sources">\r\n    <li id="{{map.Id}}"\r\n        data-sm-drag-drop="{drag: false, drop: true, fileDrop: true, dragHintClass: \'bron-drag-hint\'}"\r\n        data-hint-element="createHintElement"\r\n        data-drop="handleDrop"\r\n        data-file-drop="handleFileDrop"\r\n        data-start-drag="onDragStart"\r\n        data-drag-end="onDragEnd"\r\n        data-enter="onDragEnter"\r\n        data-ng-click="selectMap(map, $event);"\r\n        data-ng-class="{\'selected\': map.selected, \'openmap\': !map.isCollapsed, \'map\': map.isCollapsed }"\r\n        class="{{map.className}}"\r\n        data-ng-repeat="map in source.mappen"\r\n        data-sm-notify-complete="{{repeatFinishedId}}">\r\n        <tree-item></tree-item>\r\n    </li>\r\n</ul>'},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return a});var r=n(8),o=n(0),a=function(){function t(e,t){var i=this;this.$timeout=e,this.$filter=t,this.MESSAGE_NO_RESULTS="Geen resultaten gevonden",this.DEFAULT_MIN_LENGTH=3,this.replace=!0,this.restrict="A",this.template=n(345),this.link=function(e,t,n){return i.linkFn(e,t,n)},this.scope={selectedItem:"=",getItems:"=",getItemsLink:"=",displayConfig:"@",leegVeld:"&",isItemGrayed:"=",navigation:"=",onVorigeCB:"&",onVolgendeCB:"&",minLength:"@?"}}return t.prototype.linkFn=function(t,n,r){var a=this;n.focusout(function(){a.leegZoekVeld(t)}),n.find("#searchterm").bind("keydown",function(n){38!==n.which&&40!==n.which||(n.preventDefault(),t.$apply(function(){var r=e.find(t.items,function(e){return i.equals(t.focusedItem,e)}),o=t.items.indexOf(r);o>-1?38===n.which&&o>0?t.focusedItem=t.items[--o]:40===n.which&&o<t.items.length-1&&(t.focusedItem=t.items[++o]):t.focusedItem=t.items[0]})),13===n.which&&(Object(o.w)(t.focusedItem)||t.selectItem(t.focusedItem,null))}),t.getItemStringValue=function(e,t,n,i){return a.getItemStringValue(e,t,n,i)},t.selectItem=function(e,n){return a.selectItem(t,e,n)},t.onVorige=function(e,n){return a.onVorige(t,e,n)},t.onVolgende=function(e,n){return a.onVolgende(t,e,n)},t.vorigeVolgendeDisabled=function(e){if("Next"===e&&!t.volgendeMogelijk)return!0;for(var n=0;n<t.links.length;n++)if(t.links[n].Rel===e)return!1;return!0},t.$watch("zoekTekst",function(e,n,r){if(e!==n){var o=t.minLength||a.DEFAULT_MIN_LENGTH;i.isDefined(e)&&null!==e&&e.length>=o?t.getItems(e).then(function(e){a.getItems(t,e)}):t.items=[]}}),t.$watch("getItemsLink",function(e,n,r){e!==n&&i.isDefined(e)&&null!==e&&t.getItemsLink().then(function(e){a.getItems(t,e)})})},t.prototype.nextPossible=function(e){for(var t="",n=0,i=0;i<e.links.length;i++)"Next"===e.links[i].Rel&&(t=e.links[i].Href);if(""!==t){var r=t.lastIndexOf("&skip=");n=parseInt(t.substring(r+6),10)}return!(e.totalCount<=n)},t.prototype.getItems=function(t,n){n instanceof Object?(t.items=e.has(n,"Items")?n.Items:e.has(n,"items")?n.items:[],t.links=e.has(n,"Links")?n.Links:e.has(n,"links")?n.links:[],t.totalCount=e.has(n,"TotalCount")?n.TotalCount:e.has(n,"totalCount")?n.totalCount:0,t.volgendeMogelijk=this.nextPossible(t)):0===n.length?t.items=[{TypeAheadResultType:r.o.Empty,Naam:this.MESSAGE_NO_RESULTS}]:t.items=n},t.prototype.getItemStringValue=function(e,t,n,r){var o=this.$filter("getValuesFromProperties")(e,t).split(","),a=o[0]+" ("+o[1]+")";if(n=n.toLowerCase(),i.isDefined(n)&&""!==n&&!0===r){var s=a.toLowerCase().indexOf(n),l=a.toLowerCase().indexOf(n)+n.length;s>-1&&(a=this.$filter("insertString")(a,l,"</b>"),a=this.$filter("insertString")(a,s,"<b>"))}return a},t.prototype.leegZoekVeld=function(e){e.leegVeld()&&this.$timeout(function(){e.zoekTekst=""},0,!0)},t.prototype.selectItem=function(e,t,n){Object(o.w)(t)||t.TypeAheadResultType===r.o.Empty?e.selectedItem=null:(t.dirty=Object(o.f)(),e.selectedItem=t),this.leegZoekVeld(e),this.preventDefaultClick(e,t,n)},t.prototype.onVorige=function(e,t,n){this.preventDefaultClick(e,t,n);for(var i=0;i<e.links.length;i++)if("Prev"===e.links[i].Rel){e.onVorigeCB({link:e.links[i].Href});break}},t.prototype.onVolgende=function(e,t,n){if(this.preventDefaultClick(e,t,n),e.volgendeMogelijk)for(var i=0;i<e.links.length;i++)if("Next"===e.links[i].Rel){e.onVolgendeCB({link:e.links[i].Href});break}},t.prototype.preventDefaultClick=function(e,t,n){!Object(o.w)(n)&&n.preventDefault&&n.preventDefault()},t.$inject=["$timeout","$filter",function(e,n){return new t(e,n)}],t}()}).call(this,n(3),n(1))},function(e,t){e.exports='<div class="fancy-input">\r\n    <input type="search" placeholder="Zoeken" id="searchterm" data-ng-model="zoekTekst" maxlength="40" />\r\n    <ul>\r\n        <li data-ng-repeat="item in items" data-ng-class="{\'selected\': focusedItem == item}" data-ng-mousedown="selectItem(item, $event)">\r\n            <a data-ng-bind-html="getItemStringValue(item, displayConfig, zoekTekst, true);" data-ng-class="{\'grayed-light\': isItemGrayed(item)}"></a>\r\n        </li>\r\n        <li ng-if="items.length > 0 && navigation === true">\r\n            <a ng-class="{ \'type-ahead-navigation-disabled\': vorigeVolgendeDisabled(\'Prev\') }" class="type-ahead-navigation" id="type-ahead-navigation-vorige" data-ng-mousedown="onVorige(item, $event)">vorige</a>\r\n            <a ng-class="{ \'type-ahead-navigation-disabled\': vorigeVolgendeDisabled(\'Next\') }" class="type-ahead-navigation" id="type-ahead-navigation-volgende" data-ng-mousedown="onVolgende(item, $event)">volgende</a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=function(){function e(e,t){var n=this;this.$scope=e,this.panelCommunicator=t,this.collapsed=!0,e.onButtonClick=function(e){return n.onButtonClick(e)}}return e.prototype.toggleCollapsed=function(e){this.collapsed=!this.collapsed},e.prototype.onButtonClick=function(e){this.panelCommunicator.callSubscribers(e.name,e.params)},e.$inject=["$scope","panelCommunicator",e],e}();function r(){return{transclude:!0,replace:!0,controller:i.$inject,controllerAs:"vm",restrict:"EA",scope:{panelTitle:"@",panelColor:"@",panelWidgetClasses:"@",panelContentClasses:"@",footerConfig:"&"},template:n(347),link:function(t,n,i,r){t.config=t.footerConfig(),e.isDefined(t.config)&&e.isDefined(t.config.isCollapsed)&&(r.collapsed=t.config.isCollapsed)}}}}).call(this,n(1))},function(e,t){e.exports='<div class="widget {{panelWidgetClasses}}">\r\n    <div class="block" data-ng-class="{\'fold\': !vm.collapsed}">\r\n        <h3 data-ng-click="vm.toggleCollapsed()" class="{{panelColor | mapColor: \'background\'}}">\r\n            <span class="color-label" ng-if="panelColor !== undefined"></span>\r\n            <span data-ng-class="{\'icon-down-arrow\': vm.collapsed, \'icon-up-arrow\': !vm.collapsed}"></span>\r\n            <b data-ng-bind="panelTitle"></b>\r\n        </h3>\r\n        <div class="content {{panelContentClasses}}">\r\n            <div ng-transclude></div>\r\n        </div>\r\n        <footer class="endlink" data-ng-if="config.showFooter">\r\n            <a data-ng-repeat="button in config.buttons" data-ng-click="onButtonClick(button)" data-ng-bind="button.title"></a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(0),r=Contracts.Bronnen.Enums.BronType,o=function(){function e(){}return e.prototype.bronIcon=function(){var e={audio:"audiofile",image:"imagefile",message:"word",text:"word",video:"videofile","application/msword":"word","application/pdf":"pdffile","application/vnd.ms-excel":"excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"excel","application/vnd.ms-powerpoint":"presentationfile","application/vnd.openxmlformats-officedocument.presentationml.presentation":"presentationfile","application/vnd.visio":"presentationfile","application/vnd.ms-works":"word","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"word",other:"unknownfile"};return function(t){if(void 0!==t){var n=0,i=1,r=3;if(t.hasOwnProperty("Soort"))switch(t.Soort){case n:return"map";case r:return"webpage";case i:return e[t.ContentType]}return"unknownfile"}}},e.prototype.determineFileIconBronnen=function(){var e={audio:"audiofile",image:"imagefile",message:"word",text:"word",video:"videofile","application/msword":"word","application/pdf":"pdffile","application/vnd.ms-excel":"excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"excel","application/vnd.ms-powerpoint":"presentationfile","application/vnd.openxmlformats-officedocument.presentationml.presentation":"presentationfile","application/vnd.visio":"presentationfile","application/vnd.ms-works":"word","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"word",other:"unknownfile"};return function(t){return Object(i.w)(t)?"unknownfile":(t.Type&r.Document)===r.Document?function(t){if(null==t)return"unknownfile";var n=t.substr(0,t.lastIndexOf("/")).toLowerCase();return"application"===n&&(n=t),e[n]||"unknownfile"}(t.ContentType):(t.Type&r.Link)===r.Link?"webpage":(t.Type&r.Map)===r.Map?"map":"unknownfile"}},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$rootScope=e,this.$timeout=t,this.SHOW_INDICATOR_EVENT="SHOW_API_PROGRESS_INDICATOR",this.HIDE_INDICATOR_EVENT="HIDE_API_PROGRESS_INDICATOR",this.HIDE_ERROR_INDICATOR_EVENT="HIDE_API_ERROR_PROGRESS_INDICATOR"}return e.prototype.show=function(e){this.$rootScope.$broadcast(this.SHOW_INDICATOR_EVENT,e)},e.prototype.hide=function(e){this.$rootScope.$broadcast(this.HIDE_INDICATOR_EVENT,e)},e.prototype.hideError=function(e){this.$rootScope.$broadcast(this.HIDE_ERROR_INDICATOR_EVENT,e)},e.$inject=["$rootScope","$timeout",e],e}()},function(e,t,n){"use strict";(function(e){function i(t,n,i,r){return{request:function(e){var n=e.url;if(r.isApiRequest(n)){var o=r.parseRoute(n);0,i.show(o.domain)}return e||t.when(e)},response:function(n){if(e.isDefined(n)&&e.isDefined(n.config)&&e.isString(n.config.url)&&r.isApiRequest(n.config.url)){var o=r.parseRoute(n.config.url);i.hide(o.domain)}return n||t.when(n)},responseError:function(n){if(e.isDefined(n)&&e.isDefined(n.config)&&e.isString(n.config.url)&&r.isApiRequest(n.config.url)){var o=r.parseRoute(n.config.url);i.hideError(o.domain)}return t.reject(n)}}}n.d(t,"a",function(){return i})}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return a});var r=n(85),o=n(0),a=function(){function t(){}return t.CacheBusterInterceptorFactory=function(t,n,r,a){var s=r.createCache("routeCache",{capacity:500,maxAge:12e4,recycleFreq:6e4,cacheFlushInterval:12e4,storageMode:"sessionStorage"}),l=function(){return(new Date).getTime().toString()},d=function(e){var t={personId:-1,domain:"",url:e},n=e.match(/api\/[a-z]*\/?([0-9]*)\/([a-z]*)/);return!Object(o.w)(n)&&n.length>1&&(Object(o.v)(parseInt(n[1],o.b))||(t.personId=parseInt(n[1],o.b)),t.domain=n[2]),t};return{request:function(n){if(0!==n.url.indexOf("api/")&&"get"===n.method.toLowerCase()){var r=d(n.url);if(""!==r.domain){var o=s.get(r.domain);if(e.isDefined(o)){var a={nocache:o.invalidator};e.isDefined(n.params)?i.extend(n.params,a):n.params=a}}}return n||t.when(n)},requestError:function(e){return t.reject(e)},response:function(n){if(e.isDefined(n.config)){var i=n.config.method.toLowerCase(),r=n.status;if("get"!==i&&r>=200&&r<300){var o=d(n.config.url);""!==o.domain&&s.put(o.domain,{invalidator:l(),added:Date()})}"post"!==i&&"put"!==i||204!==r||(n.data={location:n.headers().location})}return n||t.when(n)},responseError:function(e){return t.reject(e)},manualNoCache:function(e){""!==e.domain&&s.put(e.domain,{invalidator:l(),added:Date()})}}},t.OfflineInterceptorFactory=function(e,t,n,i){return{request:function(o){return void 0===t||void 0===t.online||t.online||n.showConfirm(i.NotificationStrings.CONNECTION_LOST_ERROR_TITLE,i.NotificationStrings.CONNECTION_LOST_ERROR_MESSAGE,[r.a.Ok],function(){}),o||e.when(o)}}},t}()}).call(this,n(1),n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(0),r=function(){function e(){this.API_URI=globalSettings.apiHost+"api/",this.parseRoute=function(e){var t={personId:-1,domain:"",url:e},n=e.match(/api\/personen\/([0-9]*)\/([a-z]*)/);return n&&n.length>1&&NaN!==parseInt(n[1],i.b)&&(t.personId=parseInt(n[1],i.b),t.domain=n[2]),t}}return e.prototype.isApiRequest=function(e){return 0===e.indexOf(this.API_URI)},e.$inject=[e],e}()},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return a});var r,o=n(8);!function(e){e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.Conflict=409]="Conflict",e[e.InternalServerError=500]="InternalServerError"}(r||(r={}));var a=function(){function t(e,t,n,i,r,o){var a=this;this.$rootScope=e,this.$window=t,this.$q=n,this.applicationService=i,this.interceptorExcludes=r,this.magisterLocale=o,this.responseError=function(e){return a.internalResponseError(e)}}return t.prototype.internalResponseError=function(t){var n=this.magisterLocale.NotificationStrings;if(void 0===t.config&&void 0!==t.message)return this.applicationService.showMessage(n.CONTENT_UNKNOWN_ERROR,o.j.ERROR,o.d),this.$q.reject(t);var i=t.status+" - Server error",a=this.getEventMessageServerError(t.status);if(this.logToPiwik(i,a),!this.shouldSkipInterception(t)){var s="";switch(t.data&&(s=e.isDefined(t.data.Message)?t.data.Message:e.isDefined(t.data.Omschrijving)?t.data.Omschrijving:""),t.status){case r.Unauthorized:case r.Forbidden:this.applicationService.showMessage(s||this.magisterLocale.NotificationStrings.CONTENT_FORBIDDEN_ERROR,o.j.ERROR,o.d);break;case r.InternalServerError:this.applicationService.showMessage(n.CONTENT_UNKNOWN_ERROR,o.j.ERROR,o.d);break;case r.NotFound:break;case r.BadRequest:this.applicationService.showMessage(s,o.j.ERROR,o.d);break;default:this.applicationService.showMessage(s||n.CONTENT_UNKNOWN_ERROR,o.j.ERROR,o.d)}}return this.$q.reject(t)},t.prototype.shouldSkipInterception=function(t){var n=t.config.url,r=t.status,a=t.config.method;return i.some(this.interceptorExcludes,function(t){var s=null!==n.match(t.pattern)&&r.toString()===t.statusCode.toString();if(e.isDefined(a)&&e.isDefined(t.httpMethods)){var l=i.any(t.httpMethods,function(e){return o.h[e]===a});s=s&&l}return s})},t.prototype.getEventMessageServerError=function(e){switch(e){case r.BadRequest:return"Foute aanvraag";case r.Unauthorized:return"Niet bevoegd";case r.Forbidden:return"Geen rechten";case r.NotFound:return"Niet gevonden";case r.InternalServerError:return"Er is iets mis gegaan";default:return"Overige responsecode"}},t.prototype.logToPiwik=function(e,t){window.parent.window.dataLayer&&window.parent.window.dataLayer.push({event:"Event",eventCategory:"Error",eventAction:e,eventName:t,userType:"docent"})},t.$inject=["$rootScope","$window","$q","applicationService","interceptorExcludes","magisterLocale",function(e,n,i,r,o,a){return new t(e,n,i,r,o,a)}],t}()}).call(this,n(1),n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(0),r=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t,n){var i=this.getCollectionLink(e,t);return this.getCollection(i,n)},e.prototype.post=function(e,t){return this.$resource(this.apiHost+e,{},{execute:{method:"POST"}}).execute(t).$promise},e.prototype.getCollection=function(e,t){return Object(i.w)(t)&&(t={}),this.$resource(this.apiHost+this.getLink(e),t,{execute:{method:"GET"}}).execute().$promise},e.prototype.getCollectionLink=function(e,t){return this.getLink(Object(i.k)(e,t))},e.prototype.getLink=function(e){return Object(i.u)(e)||0!==e.indexOf("/")||(e=e.substring(1,e.length)),e},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(0),r=function(){function e(e){this.$resource=e,this.apiHost=globalSettings.apiHost}return e.prototype.get=function(e,t){return void 0===t&&(t="self"),this.$resource(this.apiHost+this.getSoortLink(e,t),{},{execute:{method:"GET"}}).execute({}).$promise},e.prototype.getSoortLink=function(e,t){return this.getLink(Object(i.k)(e.links,t))},e.prototype.getLink=function(e){return Object(i.u)(e)||0!==e.indexOf("/")||(e=e.substring(1,e.length)),e},e.$inject=["$resource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(97),r=n(0),o=function(){function e(e,t,n){this.$rootScope=e,this.$q=t,this.$timeout=n}return e.prototype.showConfirm=function(e,t,o,a,s){void 0===s&&(s=i.a.small);this.showDialog({template:n(357),buttons:o,title:e,text:t,callback:function(e,t){t.resolve({shouldClose:!0}),Object(r.q)(a)&&a(e)},size:s})},e.prototype.showDialog=function(e){var t=this;Object(r.w)(e.viewModel)&&(e.viewModel={}),this.$timeout(function(){return t.$rootScope.$emit("DIALOG_SHOW",e)},0)},e.prototype.show=function(e){return this.activeDialogResult=this.$q.defer(),this.$rootScope.$broadcast("SHOW_DIALOG",e),this.activeDialogResult.promise},e.prototype.hide=function(e,t){this.$rootScope.$broadcast("HIDE_DIALOG",e),this.activeDialogResult.resolve(t)},e.$inject=["$rootScope","$q","$timeout",e],e}()},function(e,t){e.exports='<div>\r\n    <p data-ng-bind-html="text"></p>\r\n</div>\r\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i){this.$window=e,this.$q=t,this.$resource=n,this.syncHttpService=i}return e.prototype.getDownloadUrl=function(e){return this.getLocation(e)},e.prototype.openTabToDownload=function(e){var t=this;return this.getLocationSync(e).then(function(e){t.$window.open(e,"_blank")})},e.prototype.openTabToLocation=function(e,t){var n=this;void 0===t&&(t=!0);var i=this.$window.open("about:blank","_blank");if(!i)throw new Error("New tab blocked by user agent.");return this.getLocation(e).then(function(e){i.location.href=e}).catch(function(e){return t&&i.close(),n.$q.reject({error:e,tabRef:i})})},e.prototype.downloadFromLocation=function(e){var t=this;return/iPad|iPhone|iPod/i.test(this.$window.navigator.userAgent)&&!this.$window.MSStream?this.openTabToLocation(e):this.getLocation(e).then(function(e){t.$window.location.href=e})},e.prototype.getLocation=function(e){return this.$resource(this.appendRedirectQuery(e)).get().$promise.then(function(e){if(e&&e.location)return e.location;throw new Error("Response does not provide location")})},e.prototype.getLocationSync=function(e){return this.syncHttpService.get(this.appendRedirectQuery(e)).then(function(e){if(e&&e.data&&e.data.location)return e.data.location;throw new Error("Response does not provide location")})},e.prototype.appendRedirectQuery=function(e){return-1===e.indexOf("?")?e+"?redirect_type=body":e+"&redirect_type=body"},e}();i.$inject=["$window","$q","$resource","syncHttpService"]},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(e,t,n,r,o){this.$q=e,this.$upload=t,this.$resource=n,this.currentUser=r,this.applicationService=o,Object(i.w)(this.currentUser.person)||this.initializeUploadInstellingen()}return t.prototype.uploadFile=function(e){return this.uploadInstellingen=null,this.checkUpload(e)},t.prototype.initializeUploadInstellingen=function(){var e=this,t={persoonId:this.currentUser.person.id};this.$resource(globalSettings.apiHost+"api/personen/:persoonId/bestanden/uploadinstellingen",{persoonId:"@persoonId"}).get(t).$promise.then(function(t){e.uploadInstellingen=t})},t.prototype.checkUpload=function(t){var n=this.$q.defer(),r=Object(i.i)(t.name);return null!==this.uploadInstellingen&&e.contains(this.uploadInstellingen.BlacklistedExtensions.split(","),r)?(n.reject("Uploaden mislukt: Extensie  "+r+" is niet toegestaan."),n.promise):null!==this.uploadInstellingen&&t.size>this.uploadInstellingen.MaxUploadFileSize?(n.reject("Uploaden mislukt: Bestand is te groot."),n.promise):null!==this.uploadInstellingen&&this.uploadInstellingen.MySpaceUsed+t.size>this.uploadInstellingen.MyDiskQuota?(n.reject("Uploaden mislukt: Te weinig beschikbare ruimte."),n.promise):this.startUpload(t)},t.prototype.startUpload=function(e){var t=this.$q.defer();return this.$upload.upload({url:globalSettings.apiHost+"api/file",file:e,method:"POST",headers:{"Content-Type":e.type}}).success(function(e,n,i,r){t.resolve(e.Value)}).error(function(e,n,i,r){t.reject()}),t.promise},t.$inject=["$q","$upload","$resource","currentUser","applicationService",t],t}()}).call(this,n(3))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r=n(5),o=n(6),a=n(12),s=function(){function t(e,t){this.currentUser=e,this.menuItems=t}return t.prototype.getMenuItems=function(t){var n=this.filterByGroep(this.filterByPrivilege(this.menuItems));if(e.isDefined(t)){var r=i.filter(n,function(e){return e.title.toLowerCase()===t.toLowerCase()});if(r.length>0)n=i.first(r).children;else n=[]}return this.applyParametersToURI({},n)},t.prototype.setMenuActive=function(e,t,n){this.menuItems[t].isActive=e},t.prototype.filterByPrivilege=function(t){var n=this,a=e.copy(t);return a=i.filter(a,function(t){return(!e.isDefined(t.children)||(t.children=n.filterByPrivilege(t.children),0!==t.children.length))&&(!!(e.isDefined(t.privileges)&&i.indexOf(t.privileges,r.a.NoPrivilege)>-1)||n.currentUser.hasPrivileges(t.privileges,o.a.Read))})},t.prototype.filterByGroep=function(t){var n=this,r=e.copy(t);return r=i.filter(r,function(t){return(!e.isDefined(t.children)||(t.children=n.filterByGroep(t.children),0!==t.children.length))&&n.currentUser.isInRoles(t.roles,a.a.One)})},t.prototype.applyParametersToURI=function(e,t){return i.map(t,function(t){return i.each(e,function(e,n){"url"in t&&(t.url=t.url.replace(":"+n,e.toString()))}),t})},t.$inject=["currentUser","MenuItems",t],t}()}).call(this,n(1),n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.collectionResource=e,this.endpoint="api/nonce"}return e.prototype.requestNonce=function(e){var t={Url:e};return this.collectionResource.post(this.endpoint,t)},e.$inject=["collectionResource",e],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i,r=n(107),o=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.$inject=[t],t}(r.a)},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(e,t,n){this.$resource=e,this.cacheFactory=t,this.$q=n,this.instellingenEndPoint=[{method:"GET",params:{persoonId:"@persoonId"},url:globalSettings.apiHost+"api/personen/:persoonId/bestanden/uploadinstellingen"}],this.arraySettingsCache={},this.localSettingsCache=t.createCache("apiLocalSettingsCache",{capacity:500,maxAge:null,deleteOnExpire:"aggressive",storageMode:"sessionStorage"})}return t.prototype.setSettingVolatile=function(e,t){return!Object(i.w)(e)&&(this.localSettingsCache.put(e,t),!0)},t.prototype.getSettingVolatile=function(e,t){if(!Object(i.w)(e)){var n=this.localSettingsCache.get(e);return Object(i.w)(n)?t:n}return null},t.prototype.clearSettingVolatile=function(){this.localSettingsCache.removeAll()},t.prototype.getUploadInstellingen=function(e){var t=this,n=this.$q.defer();if(void 0===this.uploadInstellingen){var i={persoonId:e};this.getResource(this.instellingenEndPoint[0]).get(i).$promise.then(function(e){t.uploadInstellingen=e,n.resolve(t.uploadInstellingen)})}else n.resolve(this.uploadInstellingen);return n.promise},t.prototype.createInstellingenDTO=function(t,n){return e.isString(t)||(t=e.toJson(t)),{Value:t,Name:n}},t.prototype.getResource=function(e){return this.$resource(e.url,e.params)},t.$inject=["$resource","DSCacheFactory","$q",t],t}()}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.prototype.registerSpeechBubbleCallbacks=function(e){if(this.speechBubbleCallbacks)throw new Error("SpeechBubble already registered.");this.speechBubbleCallbacks=e},e.prototype.showSpeechBubble=function(e,t,n){this.speechBubbleCallbacks&&this.speechBubbleCallbacks.showBubble(e,t,n)},e.prototype.hideSpeechBubble=function(){this.speechBubbleCallbacks&&this.speechBubbleCallbacks.hideBubble()},e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(){this.tabs=[],this.tabAddedInfos=[],this.tabActiveInfos=[],this.tabState={activeTabTitle:"",tabContainerVisible:!0}}return t.prototype.subscribeTabAdded=function(t,n){this.tabAddedInfos.push({callBack:t,objectToCallOn:n}),e.each(this.tabs,function(e){t.call(n,e)})},t.prototype.unSubscribeTabAdded=function(t){this.tabAddedInfos=e.filter(this.tabAddedInfos,function(e){return!(e.callBack===t)})},t.prototype.subscribeTabActiveChanged=function(e,t){this.tabActiveInfos.push({callBack:e,objectToCallOn:t})},t.prototype.unSubscribeTabActiveChanged=function(t){this.tabActiveInfos=e.filter(this.tabActiveInfos,function(e){return!(e.callBack===t)})},t.prototype.getTab=function(t){return e.find(this.tabs,function(e){return e.id===t})},t.prototype.openTab=function(t,n){if(void 0===n&&(n=!0),!t.getEnabled())throw"An disabled tab should not be set active.";e.each(this.tabs,function(e){e.active=!1}),t.active=!0,this.tabState.activeTabTitle=t.title,this.tabState.tabContainerVisible=n,e.each(this.tabActiveInfos,function(e){e.callBack.call(e.objectToCallOn,t)})},t.prototype.setEnableTab=function(e,t){if(e.getActive()&&!t)throw"An active tab should not be disabled.";e.enabled=t},t.prototype.addContainer=function(){if(this.containerPresent)throw"Only one tabcontainer active allowed.";this.containerPresent=!0},t.prototype.removeContainer=function(){this.containerPresent=!1,this.tabAddedInfos=[]},t.prototype.addTab=function(t){this.tabs.push(t),e.each(this.tabAddedInfos,function(e){e.callBack.call(e.objectToCallOn,t)})},t.prototype.removeTab=function(t){this.tabs=e.without(this.tabs,t)},t.$inject=[t],t}()}).call(this,n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){this.restrict="A",this.require="ngInclude",this.link=this.linkFn}return e.prototype.linkFn=function(e,t,n){t.replaceWith(t.children())},e.$inject=[function(){return new e}],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(){}return t.prototype.validate=function(t,n,r,o){return Object(i.u)(t)?(o.push("Naam opgeven."),!1):(n=n.join("'").toLowerCase().split("'"),e.contains(n,t.toLowerCase())?(o.push("Ongeldige naam."),!1):(r=r.join("'").toLowerCase().split("'"),!e.contains(r,t.toLowerCase())||(o.push("De map bestaat al."),!1)))},t.$inject=[function(){return new t}],t}()}).call(this,n(3))},function(e,t,n){"use strict";(function(e,i,r){n.d(t,"a",function(){return o});var o=function(){function t(e,t,n,i,r){this.$resource=e,this.resource=t,this.$q=n,this.currentUser=i,this.profielResource=r,this.resourceConfig=[{method:"GET",params:{persoonId:"@persoonId"},url:"api/personen/:persoonId/profiel"},{method:"POST",params:{persoonId:"@persoonId"},url:"api/personen/:persoonId/profiel"},{method:"POST",params:{persoonId:"@persoonId"},url:"api/personen/account/wachtwoordwijzigen"},{method:"GET",params:{persoonId:"@persoonId"},url:"api/personen/:persoonId/opleidinggegevensprofiel"},{method:"GET",params:{persoonId:"@persoonId"},url:"api/personen/:persoonId/adresprofiel"},{method:"GET",params:{persoonId:"@persoonId"},url:"api/personen/:persoonId/mentorprofiel"}]}return t.prototype.parseToDate=function(t){return e.isUndefined(t)||null===t||""===t?null:i(t,"YYYY-MM-DD").toDate()},t.prototype.getInschrijvingen=function(e){var t=this,n=(globalSettings?globalSettings.apiHost:"")+"api/leerlingen/"+e+"/inschrijvingen";return this.$resource(n).get().$promise.then(function(e){return r.each(e.items,function(e){e.begin=t.parseToDate(e.begin),e.einde=t.parseToDate(e.einde),e.geplandEinde=t.parseToDate(e.geplandEinde)}),e.items})},t.prototype.getOvereenkomsten=function(e){var t=this;return this.$resource(e).get().$promise.then(function(e){return r.each(e.items,function(e){e.begin=t.parseToDate(e.begin),e.einde=t.parseToDate(e.einde),e.afgedruktOp=t.parseToDate(e.afgedruktOp),e.ingeleverdOp=t.parseToDate(e.ingeleverdOp),e.ondertekendOp=t.parseToDate(e.ondertekendOp)}),e.items})},t.prototype.getAutorisatie=function(e){return this.profielResource.get(e)},t.prototype.saveAutorisatie=function(e,t){return this.profielResource.put(e,t)},t.prototype.getProfiel=function(e){this.$q.defer();return this.getResource(this.resourceConfig[0],this.getDefaultProfielParams(e))},t.prototype.setProfiel=function(e,t){var n={persoonId:this.currentUser.person.id};this.putResource(this.resourceConfig[1],n,e).then(function(e){},function(e){})},t.prototype.getOpleiding=function(e){return this.getResource(this.resourceConfig[3],this.getDefaultProfielParams(e))},t.prototype.getMentoren=function(e){return this.getResource(this.resourceConfig[5],this.getDefaultProfielParams(e))},t.prototype.getWoonGegevens=function(e){return this.getResource(this.resourceConfig[4],this.getDefaultProfielParams(e))},t.prototype.getOfficieleGegevens=function(e){var t={links:[{rel:"self",href:"/api/personen/"+this.getDefaultProfielParams(e).persoonId+"/officielegegevens"}]};return this.resource.get(t)},t.prototype.getPersoonId=function(e){return e||this.currentUser.person.id},t.prototype.getDefaultProfielParams=function(e){return{persoonId:this.getPersoonId(e)}},t.prototype.setWachtwoord=function(e){var t={persoonId:this.currentUser.person.id};return r.extend(e,{PersoonId:this.currentUser.person.id}),this.postResource(this.resourceConfig[2],t,e)},t.prototype.setContactGegevens=function(e,t){return this.putResource(this.resourceConfig[1],this.getDefaultProfielParams(t),e)},t.prototype.oneDriveForBusinessGekoppeld=function(e){void 0===e&&(e=!1);return this.serviceGekoppeld(e,{url:"api/oauth/onedriveforbusiness"})},t.prototype.serviceGekoppeld=function(e,t){var n=null;return e&&(n={nocache:(new Date).getTime().toString()}),this.getResource(t,n)},t.prototype.oneDriveForBusinessKoppelingVerwijderen=function(){return this.serviceKoppelingVerwijderen("api/oauth/onedriveforbusiness")},t.prototype.serviceKoppelingVerwijderen=function(e){return this.$resource(globalSettings.apiHost+e,{},{verwijderKoppeling:{method:"DELETE"}}).verwijderKoppeling().$promise},t.prototype.getResource=function(e,t){var n="";globalSettings&&(n=globalSettings.apiHost);var i=n+e.url;return this.$resource(i,e.params).get(t).$promise},t.prototype.putResource=function(e,t,n){var i="";globalSettings&&(i=globalSettings.apiHost);var r=i+e.url;return this.$resource(r,e.params,{put:{method:"PUT"}}).put(t,n).$promise},t.prototype.postResource=function(e,t,n){var i="";globalSettings&&(i=globalSettings.apiHost);var r=i+e.url;return this.$resource(r,e.params).save(t,n).$promise},t.$inject=["$resource","hateOsResource","$q","currentUser","profielResource",t],t}()}).call(this,n(1),n(15),n(3))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=function(){function t(e,t,n){this.$q=e,this.$resource=t,this.$http=n}return t.prototype.getPersoonlijkeMentor=function(e){var t=this,n=this.$q.defer();return this.getResource("api/aanmeldingen/:aanmeldingId",{aanmeldingId:e},"GET",!1).then(function(i){i.persoonlijkeMentor?n.resolve(t.getResource("api/aanmeldingen/:aanmeldingId/mentor",{aanmeldingId:e},"GET",!1)):n.reject()}),n.promise},t.prototype.getLeerlingAanmeldingen=function(e){var t=(new Date).getFullYear(),n=t-10+"-01-01",r=t+1+"-01-01";return this.$http.get("/api/leerlingen/"+e+"/aanmeldingen?begin="+n+"&einde="+r).then(function(e){return e.data.items.map(function(e){return i({},e,{omschrijving:e.profielen.map(function(e){return e.code}).join("/")})})})},t.prototype.getLeerlingAanmelding=function(t){var n=this,r=this.$q.defer();return this.$http.get(t.links.self.href).then(function(o){var a=i({},e.copy(o.data),{id:t.id,isExamen:!1,heeftCombinatieCijfer:!1});return a.links.examengegevens&&(a.isExamen=!0,n.$http.get(a.links.examengegevens.href).then(function(e){e.data.links.combinatiecijfer&&(a.heeftCombinatieCijfer=!0)})),r.resolve(a)}),r.promise},t.prototype.getResource=function(e,t,n,i){var r=t,o=globalSettings.apiHost+e;return this.$resource(o,r,{get:{isArray:i,method:n}}).get().$promise},t.$inject=["$q","$resource","$http",t],t}()}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return o});var r=n(4),o=function(){function t(e,t,n,i,r){this.$rootScope=e,this.$window=t,this.instellingService=n,this.currentUser=i,this.loggingService=r,this.appTitle="Magister"}return t.prototype.performRun=function(){var t=this;kendo.culture("nl-NL"),e.lang("nl"),this.addConnectionChecking(),this.$rootScope.pageTitle=this.appTitle,this.$rootScope.$on("$routeChangeSuccess",function(e,n){return t.onRouteChangeSuccess(e,n)}),this.currentUser?this.initializeAuthenticatedRootScope():window.location.href="/"},t.prototype.initializeAuthenticatedRootScope=function(){i.isUndefined(this.$rootScope.menuExpanded)&&"desktop"===globalSettings.deviceType&&(this.$rootScope.menuExpanded=!0,this.$rootScope.isProductswitchVisible=!1,this.currentUser.noConsentWithBerichten?(this.$rootScope.vandaagUrl=globalSettings.applicationLoUrl+"/#/berichten",this.$rootScope.showPersoonKiezer=!1):(this.$rootScope.vandaagUrl=globalSettings.applicationLoUrl+"/#/vandaag",this.$rootScope.showPersoonKiezer=this.currentUser.isInRole(r.a.Ouder)))},t.prototype.addConnectionChecking=function(){var e=this;this.$rootScope.online=!0,this.$window.addEventListener("offline",function(){e.$rootScope.$apply(function(){e.$rootScope.online=!1}),e.$rootScope.$broadcast("connection-status",!1)},!1),this.$window.addEventListener("online",function(){e.$rootScope.$apply(function(){e.$rootScope.online=!0}),e.$rootScope.$broadcast("connection-status",!0)},!1)},t.prototype.onRouteChangeSuccess=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0],o=t[1];if(i.isDefined(r)){var a=this.appTitle;i.isString(r.pageTitle)&&(a=r.pageTitle+" - "+this.appTitle),this.$rootScope.pageTitle=a}this.loggingService.logRouteChange(r.pageTitle,r.originalPath,0),this.$rootScope.$broadcast("routeChanged",r,o)},t.$inject=["$rootScope","$window","instellingService","currentUser","loggingService",function(e,n,i,r,o){new t(e,n,i,r,o).performRun()}],t}()}).call(this,n(15),n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var i=n(372),r=n(374),o=n(376),a=n(378),s=n(380),l=n(382),d=n(384),c=n(386),u=n(388),h=n(390),p=e.module("Magister.Web.Toestemming",["Magister.Core"]);p.component("mgToestemmingsAntwoorden",l.a).component("mgToestemmingsControl",d.a).component("mgToestemmingWijzigen",s.a).component("mgToestemmingsEditor",c.a).component("mgAntwoordenOpslaanFeedbackDialog",i.a).component("mgConfirmationDialog",r.a).component("mgReminderDialog",o.a).component("mgToestemmingsWizard",u.a).component("mgToestemmingProgress",a.a),p.service("toestemmingsService",h.a),p.config(["$routeProvider",function(e){e.when("/toestemming/wijzigen",{template:"<mg-toestemming-wijzigen></mg-toestemming-wijzigen>"})}])}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=function(){function e(){}return e.prototype.onClose=function(){this.dialogRef.close()},e}(),r={template:n(373),transclude:!0,controller:i,bindings:{data:"<",dialogRef:"<?"}}},function(e,t){e.exports='<div class="icl-dialog-wrapper" ng-switch="$ctrl.data.saveState.state">\n    <div ng-switch-when="SUCCESS" class="icl-dialog icl-dialog-notify-success standard-width">\n        <i class="icl-dialog-header far fa-check-circle"></i>\n        <ng-transclude></ng-transclude>\n        <h1 class="icl-dialog-title">Het is gelukt!</h1>\n        <div class="icl-dialog-body center-text">\n            {{ $ctrl.data.messages.SUCCESS_MESSAGE }}\n        </div>     \n        <div class="icl-dialog-footer">\n            <button type="button" class="icl-btn icl-btn-primary" ng-click="$ctrl.onClose()">\n                {{ $ctrl.data.messages.CLOSE_BUTTON }}\n            </button>\n        </div>\n    </div>\n    <div ng-switch-when="ERROR" class="icl-dialog icl-dialog-notify-danger standard-width">\n        <i class="icl-dialog-header far fa-times-circle"></i>\n        <h1 class="icl-dialog-title">Sorry!</h1>\n        <div class="icl-dialog-body center-text">\n            {{ $ctrl.data.messages.ERROR_MESSAGE }}\n        </div>     \n        <div class="icl-dialog-footer">\n            <button type="button" class="icl-btn icl-btn-primary" ng-click="$ctrl.onClose()">Sluiten</button>\n        </div>\n    </div>\n    <div ng-switch-when="PENDING" class="icl-dialog icl-dialog-notify standard-width">\n        <div class="icl-dialog-header">\n            <icl-like-spinner class="spinner"></icl-like-spinner>\n        </div>\n        <h1 class="icl-dialog-title">Aan het opslaan...</h1>\n        <div class="icl-dialog-body center-text">\n            {{ $ctrl.data.messages.PENDING_MESSAGE }}\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=function(){function e(){}return e.prototype.onAnswer=function(e){this.dialogRef.close(e)},e}(),r={template:n(375),controller:i,bindings:{dialogRef:"<",data:"<"}}},function(e,t){e.exports='<div class="icl-dialog icl-dialog-confirm">\n    <h1 class="icl-dialog-title">{{ $ctrl.data.specification.header }}</h1>\n    <p class="icl-dialog-body">{{ $ctrl.data.specification.message }}</p>\n    <div class="icl-dialog-footer">\n        <button class="icl-btn icl-btn-link-primary" ng-click="$ctrl.onAnswer(false)">\n            {{ $ctrl.data.specification.labels.cancel }}\n        </button>\n        <button class="icl-btn icl-btn-primary" ng-click="$ctrl.onAnswer(true)">\n            {{ $ctrl.data.specification.labels.confirm }}\n        </button>\n    </div>\n</div>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i="modal_toestemming_open_1st_time",r="modal_toestemming_close_1st_time",o="modal_toestemming_continue_1st_time",a="modal_toestemming_geven_close",s=function(){function e(e,t,n,i){this.currentUser=e,this.toestemmingsService=t,this.$location=n,this.loggingService=i,this.continueOnToWizard=!1}return e.prototype.$onInit=function(){this.logPiwikEvent(i),this.currentUserIsOuder=this.currentUser.isInRole(2),this.promptReason=this.data.toBeChecked[0].controle.reden},e.prototype.onClose=function(){this.logPiwikEvent(r),this.toestemmingsService.skipReminder=!0,this.dialogRef.close()},e.prototype.onContinue=function(){this.logPiwikEvent(o),this.toestemmingsService.skipReminder=!0,this.continueOnToWizard=!0},e.prototype.onCloseWizard=function(e){this.logPiwikEvent(a),this.dialogRef.close(),e&&this.$location.url(e)},e.prototype.logPiwikEvent=function(e){this.loggingService.logToPiwik(e,"toestemming_module","toestemming_module")},e.$inject=["currentUser","toestemmingsService","$location","loggingService"],e}(),l={template:n(377),controller:s,bindings:{dialogRef:"<",data:"<"}}},function(e,t){e.exports='<ng-container ng-switch="$ctrl.continueOnToWizard">\n    <mg-toestemmings-wizard ng-switch-when="true"\n        close="$ctrl.onCloseWizard(navigateTo)"\n        entry-point-collection="$ctrl.data.toBeChecked">\n    </mg-toestemmings-wizard>\n    <div class="icl-dialog icl-dialog-confirm standard-width" ng-switch-when="false">\n        <h1 class="icl-dialog-title">{{ $ctrl.currentUserIsOuder ? \'Uw\' : \'Jouw\' }} toestemming</h1>\n        <p class="icl-dialog-body">{{ $ctrl.promptReason }}</p>\n        <div class="icl-dialog-footer">\n            <button class="icl-btn icl-btn-link-primary" ng-click="$ctrl.onClose()">\n                Nu Niet\n            </button>\n            <button class="icl-btn icl-btn-primary" ng-click="$ctrl.onContinue()">\n                Doorgaan\n            </button>\n        </div>\n    </div>\n</ng-container>\n'},function(e,t,n){"use strict";var i=function(){function e(){this.allCompleted=!1,this.isSaving=!1}return e.prototype.$onChanges=function(e){e.entryPointCollection&&e.entryPointCollection.currentValue&&(this.allCompleted=e.entryPointCollection.currentValue.every(function(e){return e.completed})),e.saveState&&e.saveState.currentValue&&(this.isSaving="PENDING"===e.saveState.currentValue.state)},e}(),r={template:n(379),controller:i,bindings:{entryPointCollection:"<",saveState:"<",currentLeerling:"<"}};t.a=r},function(e,t){e.exports='<div class="toestemming-progress" ng-if="$ctrl.entryPointCollection && $ctrl.entryPointCollection.length && !$ctrl.isSaving">\n    <ng-container ng-repeat="child in $ctrl.entryPointCollection" class="progress-child"\n        ng-class="{ \'progress-bar\' : $ctrl.entryPointCollection.length > 6 } ">\n        <div class="progress-student" ng-class="{\n            \'active\' : $ctrl.currentLeerling.id === child.user.id,\n            \'completed\' : child.completed }">\n            <figure ng-if="!child.completed">\n                <img class="student-foto" alt="{{child.user.fullName}}" mg-http-src="{{ child.user.imageUrl }}">\n                <i class="far fa-user"></i>\n            </figure>\n            <i class="far fa-check-circle" ng-if="child.completed"></i>\n            <span class="student-name"> {{ child.user.firstName }}</span>\n        </div>\n\n    </ng-container>\n    <div class="progress-student all-done progress-child" ng-class="{ \'active\' : $ctrl.allCompleted }"\n        ng-if="$ctrl.entryPointCollection.length > 1">Klaar</div>\n</div>\n\n<div class="toestemming-saving" ng-if="$ctrl.isSaving">\n    <span>De toestemming wordt opgeslagen. Het volgende scherm wordt geladen.</span>\n    <div class="progress-spinner">\n        <icl-like-spinner class="spinner"></icl-like-spinner>\n    </div>\n</div>\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(134),r="toestemming_edit_mijn_instellingen",o=function(){function t(e,t,n,i,r,o){this.$rootScope=e,this.$location=t,this.toestemmingsService=n,this.currentUser=i,this.modalService=r,this.loggingService=o,this.toestemmingsEntrypointData={status:"PENDING"},this.feedbackData=null,this.editorIsDirty=!1}return t.prototype.$onInit=function(){this.currentUserIsOuder=this.currentUser.isInRole(2),this.currentUserIsOuder?(this.feedbackMessages=i.b,this.indexLeerling=this.currentUser.relatedPersons.current):(this.feedbackMessages=i.a,this.indexLeerling=this.currentUser.person),this.logPiwikEvent(r),this.fetchEntrypoint(),this.registerLocationChangeListener()},t.prototype.$onDestroy=function(){this.unregisterLocationChangeListener()},t.prototype.onCancel=function(e){this.tryBackNavigation(e)},t.prototype.onGoBack=function(){this.tryBackNavigation(this.editorIsDirty)},t.prototype.onNewSaveState=function(e){this.feedbackData?this.feedbackData.saveState=e:this.openFeedbackDialogForState(e)},t.prototype.onDirtyStateEmission=function(e){this.editorIsDirty=e},t.prototype.openFeedbackDialogForState=function(e){var t=this;this.feedbackData={saveState:e,messages:this.feedbackMessages},this.modalService.openFromComponent("mg-antwoorden-opslaan-feedback-dialog",this.feedbackData).afterClosed.then(function(){t.onCloseFeedbackDialog()})},t.prototype.onCloseFeedbackDialog=function(){this.feedbackData&&"SUCCESS"===this.feedbackData.saveState.state&&this.navigateToPersonalInformationPage(),this.feedbackData=null},t.prototype.navigateToPersonalInformationPage=function(){this.currentUserIsOuder?this.navigateToLocation("/leerling-gegevens"):this.navigateToLocation("/mijn-instellingen")},t.prototype.navigateToLocation=function(e){this.unregisterLocationChangeListener(),this.$location.url(e)},t.prototype.fetchEntrypoint=function(){var t=this;this.toestemmingsService.getEntrypointCollection().then(function(n){var i;if(!(i=e.find(n.items,function(e){return e.persoonId===t.indexLeerling.id})))throw new Error("ToestemmingsModule: No entrypoint was returned for leerling with id "+t.indexLeerling.id);t.toestemmingsEntrypointData={status:"SUCCESS",entrypoint:i}}).catch(function(){t.toestemmingsEntrypointData={status:"ERROR"}})},t.prototype.tryBackNavigation=function(e){var t=this;e?this.modalService.openFromComponent("mg-confirmation-dialog",{specification:i.c}).afterClosed.then(function(e){e&&t.navigateToPersonalInformationPage()}):this.navigateToPersonalInformationPage()},t.prototype.shouldPreventNavigation=function(){return this.editorIsDirty},t.prototype.registerLocationChangeListener=function(){var e=this;this.unregisterLocationChangeListener=this.$rootScope.$on("$locationChangeStart",function(t){if(e.shouldPreventNavigation()){t.preventDefault();var n=e.$location.url();e.modalService.openFromComponent("mg-confirmation-dialog",{specification:i.c}).afterClosed.then(function(t){t&&e.navigateToLocation(n)})}})},t.prototype.logPiwikEvent=function(e){var t="toestemming_module";this.loggingService.logToPiwik(e,t,t)},t.$inject=["$rootScope","$location","toestemmingsService","currentUser","modalService","loggingService"],t}(),a={template:n(381),controller:o}}).call(this,n(3))},function(e,t){e.exports='<div class="head-bar">\n    <h1>\n        <a ng-click="$ctrl.onGoBack()">\n            <i class="far fa-chevron-circle-left"></i>\n        </a>\n        <spab>Toestemming</spab>\n    </h1>\n</div>\n<section class="main">\n    <div class="content-container toestemmings-container" ng-switch="$ctrl.toestemmingsEntrypointData.status">\n        <ng-container ng-switch-when="SUCCESS" ng-switch="$ctrl.toestemmingsEntrypointData.entrypoint.enabled">\n            <ng-container ng-switch-when="true">\n                <div class="icl-card" ng-if="::$ctrl.toestemmingsEntrypointData.entrypoint.links.antwoordenOpslaan">\n                    <div class="icl-card-header">\n                        <figure>\n                            <img class="student-foto" alt="{{$ctrl.indexLeerling.fullName}}" mg-http-src="{{ $ctrl.indexLeerling.imageUrl }}">\n                            <i class="far fa-user"></i>\n                        </figure>\n                        <div class="toestemming-header-text">Toestemming opgeven voor {{ $ctrl.indexLeerling.fullName }}</div>\n                    </div>\n                    <ng-container ng-switch="$ctrl.currentUserIsOuder">\n                        <div ng-switch-when="true" class="explanatory-text">Geef voor {{ $ctrl.indexLeerling.fullName }} per onderdeel aan of de gegevens gebruikt mogen worden.</div>\n                        <div ng-switch-when="false" class="explanatory-text">Geef per onderdeel aan of jouw gegevens gebruikt mogen worden.</div>\n                    </ng-container>\n                    <mg-toestemmings-editor\n                        entrypoint="$ctrl.toestemmingsEntrypointData.entrypoint"\n                        button-config="{\n                            save: \'Opslaan\',\n                            cancel: \'Annuleren\'\n                        }"\n                        save-state="$ctrl.onNewSaveState(newState)"\n                        cancel="$ctrl.onCancel(isDirty)"\n                        dirty-state="$ctrl.onDirtyStateEmission(isDirty)">\n                    </mg-toestemmings-editor>\n                </div>\n                <div ng-if="::!$ctrl.toestemmingsEntrypointData.entrypoint.links.antwoordenOpslaan" class="entrypoint-error"><div>{{ $ctrl.currentUserIsOuder ? \'U heeft\' : \'Je hebt\' }} onvoldoende bevoegdheden voor het wijzigen van de toestemmingsopgave.</div></div>\n            </ng-container>\n            <div ng-switch-when="false" class="entrypoint-error"><div>De toestemmingsmodule is niet geactiveerd.</div></div>\n        </ng-container>\n        <div ng-switch-when="ERROR" class="entrypoint-error"><div>Er kan geen toegang tot de toestemmingsmodule worden verkregen. Probeer het later nog eens.</div></div>\n    </div>\n</section>\n'},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r=n(106),o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a=function(){function t(e,t,n){this.$filter=e,this.toestemmingsService=t,this.speechBubbleService=n,this._toestemmingsAntwoordenData={status:"PENDING"}}return Object.defineProperty(t.prototype,"toestemmingsAntwoordenData",{get:function(){return this._toestemmingsAntwoordenData},set:function(t){t.antwoorden?(this._toestemmingsAntwoordenData=o({},t,{antwoorden:o({},t.antwoorden,{items:e.sortBy(t.antwoorden.items,"volgnummer")})}),this.setLastModifiedMessage(t.antwoorden.items)):this._toestemmingsAntwoordenData=t},enumerable:!0,configurable:!0}),t.prototype.$onInit=function(){var e=this;this.toestemmingsService.getToestemmingsAntwoorden(this.entrypoint.links.antwoorden.href).then(function(t){e.toestemmingsAntwoordenData={status:"SUCCESS",antwoorden:t}}).catch(function(){e.toestemmingsAntwoordenData={status:"ERROR"}})},t.prototype.onDisplayToestemmingsUitleg=function(e,t){var n=i(e.currentTarget);this.speechBubbleService.showSpeechBubble("<div>"+t.uitleg+"</div>",{preferredPosition:r.a.above,bubbleWidth:172,stopClickEvents:!0,style:{background:"#fff",border:"#ccc",textColor:"#333333"}},n)},t.prototype.setLastModifiedMessage=function(e){var t=null;e.forEach(function(e){e.datumAangepast&&(!t||e.datumAangepast>t)&&(t=e.datumAangepast)}),this.lastModifiedMessage=t?this.$filter("date")(t,"d MMMM yyyy"):"Nooit"},t.$inject=["$filter","toestemmingsService","speechBubbleService"],t}(),s={template:n(383),controller:a,bindings:{entrypoint:"<",edit:"&"}}}).call(this,n(3),n(10))},function(e,t){e.exports='<div class="block" ng-switch="$ctrl.toestemmingsAntwoordenData.status">\n    <h3><b>Toestemming gebruik gegevens</b></h3>\n    <ng-container ng-switch-when="SUCCESS">\n        <div class="icl-card-placeholder answer-list">\n            <div ng-repeat="antwoord in $ctrl.toestemmingsAntwoordenData.antwoorden.items"\n                class="answer-entry">\n                <i class="answer-icon far" ng-class="{ \'fa-check-circle\': antwoord.toestemming, \'fa-times-circle\': !antwoord.toestemming, \'indeterminate\': antwoord.toestemming === null }"></i>\n                <div class="permission-type">{{ antwoord.omschrijving }}</div>\n                <i class="answer-icon far fa-info-circle"\n                    ng-mouseover="$ctrl.onDisplayToestemmingsUitleg($event, antwoord)"\n                    ng-mouseleave="$ctrl.speechBubbleService.hideSpeechBubble()">\n                </i>\n            </div>\n            <div class="icl-card-footer">\n                <div class="last-modified-message">Laatst gewijzigd: {{ $ctrl.lastModifiedMessage }}</div>\n                <button class="icl-btn icl-btn-primary" ng-if="$ctrl.entrypoint.links.antwoordenOpslaan"\n                    ng-click="$ctrl.edit()">\n                    Wijzigen\n                </button>\n            </div>\n        </div>\n    </ng-container>\n    <div class="fixed-card-body" ng-switch-when="PENDING">\n        <icl-like-spinner class="spinner"></icl-like-spinner>\n    </div>\n    <div class="fixed-card-body" ng-switch-when="ERROR">\n        <span class="error-message">Ophalen van toestemmingsgegevens mislukt.</span>\n    </div>\n</div>\n'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(106),r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o=function(){function t(e){this.speechBubbleService=e}return t.prototype.onChangeAntwoord=function(e){this.toestemmingsAntwoord.toestemming!==e&&this.antwoordChanged({antwoord:r({},this.toestemmingsAntwoord,{toestemming:e})})},t.prototype.onDisplayToestemmingsUitleg=function(t){var n=e(t.currentTarget);this.speechBubbleService.showSpeechBubble("<div>"+this.toestemmingsAntwoord.uitleg+"</div>",{preferredPosition:i.a.above,bubbleWidth:172,stopClickEvents:!0,style:{background:"#fff",border:"#ccc",textColor:"#333333"}},n)},t.$inject=["speechBubbleService"],t}(),a={template:n(385),controller:o,bindings:{toestemmingsAntwoord:"<",antwoordChanged:"&"}}}).call(this,n(10))},function(e,t){e.exports='<div class="answer-container">\n    <i class="answer-icon fa-check-circle"\n        ng-click="$ctrl.onChangeAntwoord(true)"\n        ng-class="{ \'fal\': $ctrl.toestemmingsAntwoord.toestemming !== true, \'fas\': $ctrl.toestemmingsAntwoord.toestemming === true }">\n    </i>\n    <i class="answer-icon fa-times-circle"\n        ng-click="$ctrl.onChangeAntwoord(false)"\n        ng-class="{ \'fal\': $ctrl.toestemmingsAntwoord.toestemming !== false, \'fas\': $ctrl.toestemmingsAntwoord.toestemming === false }">\n    </i>\n    <div class="permission-type">{{ $ctrl.toestemmingsAntwoord.omschrijving }}</div>\n    <i class="far fa-info-circle"\n        ng-mouseover="$ctrl.onDisplayToestemmingsUitleg($event)"\n        ng-mouseleave="$ctrl.speechBubbleService.hideSpeechBubble()">\n    </i>\n</div>\n'},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r="toestemming_geven_save",o="toestemming_geven_cancel",a=function(){function t(e,t,n,i,r){this.toestemmingsService=e,this.$timeout=t,this.$element=n,this.currentUser=i,this.loggingService=r,this.isSaving=!1}return Object.defineProperty(t.prototype,"editableAntwoorden",{get:function(){return this._editableAntwoorden},set:function(e){this._editableAntwoorden=e,this.allAreAnswered=this.allQuestionsAreAnswered(e),this.emitDirtyState()},enumerable:!0,configurable:!0}),t.prototype.$onInit=function(){this.toestemmingsAntwoordenServerState={status:"PENDING"},this.editableAntwoorden=null,this.submitCount=0,this.currentUserIsOuder=this.currentUser.isInRole(2),this.fetchToestemmingsAntwoorden()},t.prototype.$onChanges=function(e){e.entrypoint&&!e.entrypoint.isFirstChange()&&this.$onInit()},t.prototype.onAntwoordChanged=function(e,t){var n=this.editableAntwoorden.slice();n[t]=e,this.editableAntwoorden=n},t.prototype.onCancel=function(){this.logPiwikEvent(o),this.cancel({isDirty:this.antwoordenHaveChanged()})},t.prototype.onBack=function(){this.logPiwikEvent(o),this.back({isDirty:this.antwoordenHaveChanged()})},t.prototype.onSave=function(){this.submitCount++,this.allAreAnswered&&(this.logPiwikEvent(r),this.saveAntwoorden())},t.prototype.fetchToestemmingsAntwoorden=function(){var t=this;this.toestemmingsService.getToestemmingsAntwoorden(this.entrypoint.links.antwoorden.href).then(function(n){n.items=e.sortBy(n.items,"volgnummer"),t.toestemmingsAntwoordenServerState={status:"SUCCESS",antwoorden:n},t.editableAntwoorden=i.copy(n.items),t.fadeInOnLoad()}).catch(function(){t.toestemmingsAntwoordenServerState={status:"ERROR"}})},t.prototype.antwoordenHaveChanged=function(){if(!this.editableAntwoorden)return!1;for(var e=0;e<this.editableAntwoorden.length;e++)if(this.editableAntwoorden[e].toestemming!==this.toestemmingsAntwoordenServerState.antwoorden.items[e].toestemming)return!0;return!1},t.prototype.allQuestionsAreAnswered=function(e){if(e)return e.every(function(e){return!0===e.toestemming||!1===e.toestemming})},t.prototype.saveAntwoorden=function(){var e=this;this.isSaving=!0,this.saveState({newState:{state:"PENDING"}}),this.toestemmingsService.submitToestemmingsAntwoordenSet(this.entrypoint.links.antwoordenOpslaan.href,this.editableAntwoorden).then(function(){e.saveState({newState:{state:"SUCCESS"}})}).catch(function(){e.saveState({newState:{state:"ERROR"}})}).finally(function(){return e.isSaving=!1})},t.prototype.emitDirtyState=function(){this.dirtyState({isDirty:this.antwoordenHaveChanged()})},t.prototype.fadeInOnLoad=function(){var e=this;return this.$timeout(function(){var t=e.$element.find(".control-container")[0];return t.classList.remove("fixed-height"),e.$timeout(function(){t.classList.add("is-opaque")},0)},150)},t.prototype.logPiwikEvent=function(e){var t="toestemming_module_geven";this.loggingService.logToPiwik(e,t,t)},t.$inject=["toestemmingsService","$timeout","$element","currentUser","loggingService"],t}(),s={template:n(387),controller:a,bindings:{entrypoint:"<",buttonConfig:"<",saveState:"&",cancel:"&?",back:"&?",dirtyState:"&"}}}).call(this,n(3),n(1))},function(e,t){e.exports='<ng-container ng-switch="$ctrl.toestemmingsAntwoordenServerState.status">\n    <div class="editor-body" ng-switch-when="SUCCESS">\n        <div class="control-container fixed-height">\n            <div class="toestemmings-control-group" ng-if="$ctrl.editableAntwoorden">\n                <mg-toestemmings-control ng-repeat="toestemmingsAntwoord in $ctrl.editableAntwoorden track by toestemmingsAntwoord.vraagId"\n                    ng-class="{ \'unanswered\': toestemmingsAntwoord.toestemming === null && $ctrl.submitCount > 1 }"\n                    toestemmings-antwoord="toestemmingsAntwoord"\n                    antwoord-changed="$ctrl.onAntwoordChanged(antwoord, $index)">\n                </mg-toestemmings-control>\n            </div>\n        </div>\n        <div ng-if="!$ctrl.allAreAnswered && $ctrl.submitCount > 0" class="icl-form-error">Maak eerst bij elk onderdeel een selectie.</div>\n        <div class="icl-card-footer">\n            <div class="left-btns">\n                <button class="icl-btn icl-btn-link-primary" ng-if="$ctrl.buttonConfig.back"\n                    ng-disabled="$ctrl.isSaving"\n                    ng-click="$ctrl.onBack()">\n                    <i class="fas fa-chevron-left"></i><span>{{ $ctrl.buttonConfig.back }}</span>\n                </button>\n            </div>\n            <div class="right-btns">\n                <button ng-if="$ctrl.buttonConfig.cancel"\n                    class="icl-btn icl-btn-link-primary"\n                    ng-disabled="$ctrl.isSaving"\n                    ng-click="$ctrl.onCancel()">\n                    {{ $ctrl.buttonConfig.cancel }}\n                </button>\n                <button class="icl-btn icl-btn-primary"\n                    ng-disabled="$ctrl.isSaving"\n                    ng-click="$ctrl.onSave()">\n                    {{ $ctrl.buttonConfig.save }}\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="fixed-card-body" ng-switch-when="PENDING">\n        <icl-like-spinner class="editor-spinner"></icl-like-spinner>\n    </div>\n    <div class="fixed-card-body" ng-switch-when="ERROR">\n        <span class="error-message">Ophalen van toestemmingsgegevens mislukt.</span>\n    </div>\n</ng-container>\n'},function(e,t,n){"use strict";(function(e){var i=n(134),r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o=function(){function t(e,t){this.currentUser=e,this.modalService=t,this.toestemmingsEntrypointData={status:"PENDING"},this.saveState=null,this.currentUserIsOuder=!1,this.feedbackDialogConfig=null,this.editorIsDirty=!1}return t.prototype.$onInit=function(){var t=this;this.currentUserIsOuder=this.currentUser.isInRole(2),this.allEntryPoints=this.joinEntrypointsOnPersonInfo(),this.currentUserIsOuder?this.indexLeerling=this.allEntryPoints[0].user:this.indexLeerling=this.currentUser.person;var n=e.find(this.allEntryPoints,function(e){return e.persoonId===t.indexLeerling.id});if(!n)throw new Error("ToestemmingsModule: No entrypoint was returned for leerling with id "+this.indexLeerling.id);this.selectChild(n)},t.prototype.onNewSaveState=function(t){var n=this;if(this.saveState=t,"SUCCESS"===t.state){var i=e.find(this.allEntryPoints,function(e){return e.persoonId===n.indexLeerling.id});i&&(i.completed=!0,this.nextChild())}else"ERROR"===t.state&&(this.toestemmingsEntrypointData={status:"ERROR"})},t.prototype.onPreviousChild=function(){var e=this;this.confirmThenExecute(function(){return e.editorIsDirty},function(){return e.previousChild()},i.c)},t.prototype.onCancel=function(e){var t=this;this.confirmThenExecute(function(){return e},function(){return t.close({navigateTo:null})},i.c)},t.prototype.onCloseFeedbackDialog=function(){this.navigateOnCompletion()},t.prototype.onDirtyStateEmission=function(e){this.editorIsDirty=e},t.prototype.confirmThenExecute=function(e,t,n){e()?this.modalService.openFromComponent("mg-confirmation-dialog",{specification:n}).afterClosed.then(function(e){e&&t()}):t()},t.prototype.selectChild=function(e){this.indexLeerling=e.user,this.toestemmingsEntrypointData={status:"SUCCESS",entrypoint:e},this.getButtonConfig()},t.prototype.previousChild=function(){if(this.currentUserIsOuder){var e=this.getPreviousChild();e&&this.selectChild(e),this.getButtonConfig()}},t.prototype.nextChild=function(){var t=this;if(this.currentUserIsOuder){var n=this.getNextChild();if(!n&&e.every(this.allEntryPoints,function(e){return e.enabled&&e.completed}))return this.signalCompletion(),void(this.indexLeerling=void 0);this.selectChild(n),this.getButtonConfig()}else e.find(this.allEntryPoints,function(e){return e.persoonId===t.indexLeerling.id&&e.completed})&&this.signalCompletion()},t.prototype.getNextChild=function(){var t=this,n=e.indexOf(this.allEntryPoints,e.find(this.allEntryPoints,function(e){return e.persoonId===t.indexLeerling.id})),i=this.allEntryPoints[n+1];if(i)return i},t.prototype.getPreviousChild=function(){var t=this,n=e.indexOf(this.allEntryPoints,e.find(this.allEntryPoints,function(e){return e.persoonId===t.indexLeerling.id})),i=this.allEntryPoints[n-1];if(i)return i},t.prototype.getButtonConfig=function(){var e=this.getNextChild(),t=this.getPreviousChild();this.buttonConfig={back:t?"Terug naar "+t.user.firstName:null,save:e?"Opslaan en naar "+e.user.firstName:"Opslaan"}},t.prototype.joinEntrypointsOnPersonInfo=function(){var t=this;return this.entryPointCollection.map(function(n){var i;return i=t.currentUserIsOuder?e.find(t.currentUser.relatedPersons.persons,function(e){return e.id===n.persoonId}):t.currentUser.person,r({},n,{user:i,completed:!1})})},t.prototype.navigateOnCompletion=function(){this.currentUserIsOuder?this.close({navigateTo:null}):this.close({navigateTo:"/mijn-instellingen"})},t.prototype.signalCompletion=function(){var e=this;this.feedbackDialogConfig={data:{messages:this.currentUserIsOuder?r({},i.b,{CLOSE_BUTTON:"Sluiten"}):r({},i.a,{CLOSE_BUTTON:"Naar mijn gegevens"}),saveState:this.saveState},dialogRef:{close:function(){return e.onCloseFeedbackDialog()}}}},t.$inject=["currentUser","modalService"],t}(),a={template:n(389),bindings:{entryPointCollection:"<",close:"&"},controller:o};t.a=a}).call(this,n(3))},function(e,t){e.exports='<ng-container ng-switch="!!$ctrl.feedbackDialogConfig">\n    <div class="icl-dialog icl-dialog-confirm toestemming-wizard" ng-switch-when="false">\n        <h1 class="icl-dialog-title">Toestemming geven</h1> \n        <span class="icl-close-dialog" ng-click="$ctrl.onCancel($ctrl.editorIsDirty)">\n            <i class="far fa-times"></i>\n        </span>\n        <div class="icl-dialog-body">\n            <div class="toestemmings-container" ng-switch="$ctrl.toestemmingsEntrypointData.status">\n                <ng-container ng-switch-when="SUCCESS" ng-switch="$ctrl.toestemmingsEntrypointData.entrypoint.enabled">\n                    <div class="icl-card" ng-switch-when="true">\n                        <div class="icl-card-header">\n                            <mg-toestemming-progress save-state="$ctrl.saveState"\n                                current-leerling="$ctrl.indexLeerling"\n                                entry-point-collection="$ctrl.allEntryPoints">\n                            </mg-toestemming-progress>\n                        </div>\n                        <ng-container ng-switch="$ctrl.currentUserIsOuder">\n                            <div ng-switch-when="true" class="explanatory-text">Geef voor {{ $ctrl.indexLeerling.fullName }} per onderdeel aan of de gegevens gebruikt mogen worden.</div>\n                            <div ng-switch-when="false" class="explanatory-text">Geef per onderdeel aan of jouw gegevens gebruikt mogen worden.</div>\n                        </ng-container>\n                        <mg-toestemmings-editor entrypoint="$ctrl.toestemmingsEntrypointData.entrypoint"\n                            button-config="$ctrl.buttonConfig"\n                            save-state="$ctrl.onNewSaveState(newState)"\n                            dirty-state="$ctrl.onDirtyStateEmission(isDirty)"\n                            cancel="$ctrl.onCancel(isDirty)"\n                            back="$ctrl.onPreviousChild()">\n                        </mg-toestemmings-editor>\n                    </div>\n                    <div ng-switch-when="false" class="entrypoint-error">\n                        <div>De toestemmingsmodule is niet geactiveerd.</div>\n                    </div>\n                </ng-container>\n                <div ng-switch-when="ERROR" class="entrypoint-error">\n                    <div>Er is helaas iets fout gegaan bij het opslaan van de toestemmingen. Probeer het later nog eens.</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <ng-container ng-switch-when="true">\n        <mg-antwoorden-opslaan-feedback-dialog\n            class="wizard-opslaan-feedback"\n            dialog-ref="$ctrl.feedbackDialogConfig.dialogRef"\n            data="$ctrl.feedbackDialogConfig.data">\n                <mg-toestemming-progress ng-if="$ctrl.allEntryPoints.length > 1"\n                    save-state="$ctrl.saveState"\n                    current-leerling="$ctrl.indexLeerling"\n                    entry-point-collection="$ctrl.allEntryPoints">\n                </mg-toestemming-progress>\n        </mg-antwoorden-opslaan-feedback-dialog>\n    </ng-container>\n</ng-container>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=function(){function e(e,t){this.$http=e,this.$cookieStore=t}return Object.defineProperty(e.prototype,"skipReminder",{get:function(){return this.$cookieStore.get(e.SKIP_REMINDER_KEY)===e.SKIP_REMINDER_VALUE},set:function(t){t?this.$cookieStore.put(e.SKIP_REMINDER_KEY,e.SKIP_REMINDER_VALUE):this.$cookieStore.remove(e.SKIP_REMINDER_KEY)},enumerable:!0,configurable:!0}),e.prototype.getEntrypointCollection=function(){return this.$http.get(e.ENTRYPOINT).then(function(e){if(e.data)return e.data;throw new Error("No entrypoint returned.")})},e.prototype.getToestemmingsAntwoorden=function(e){return this.$http.get(e).then(function(e){var t=e.data;return i({},t,{items:t.items.map(function(e){return i({},e,{datumAangepast:null===e.datumAangepast?null:new Date(e.datumAangepast)})}),links:t.links})})},e.prototype.submitToestemmingsAntwoordenSet=function(e,t){return this.$http.post(e,t.map(function(e){return{vraagId:e.vraagId,toestemming:e.toestemming}}))},e.$inject=["$http","$cookieStore"],e.ENTRYPOINT="/api/toestemmingen",e.SKIP_REMINDER_KEY="skip-toestemmings-reminder",e.SKIP_REMINDER_VALUE="skip-it",e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(8),r=function(){function t(e,t,n){this.$q=e,this.$resource=t,this.currentUser=n,this.STUDIE_PROFIEL_KEUZE_URI=globalSettings.apiHost+"api/personen/:persoonId/vakkenpakketkeuze/studies",this.MAG_VAKKENPAKKET_KIEZEN_URI=globalSettings.apiHost+"api/personen/:persoonId/vakkenpakketkeuze/kanvakkenpakketkiezen"}return t.prototype.showItem=function(){var t=this,n=this.$q.defer();return this.getVakkenPakketPermissie().then(function(r){r.HeeftToestemming&&t.getStudiesEnPakketten().then(function(t){e.some(t.Items,function(e){return 0!==e.AanmeldingId})?n.resolve(i.i.SHOW):n.resolve(i.i.HIGHLIGHT)})}),n.promise},t.prototype.getVakkenPakketPermissie=function(){var e=this.$q.defer(),t=this.currentUser.relatedPersons.current.id;return this.$resource(this.MAG_VAKKENPAKKET_KIEZEN_URI,{persoonId:t}).get(function(t){e.resolve(t)}),e.promise},t.prototype.getStudiesEnPakketten=function(){var e=this.$q.defer(),t=this.currentUser.relatedPersons.current.id;return this.$resource(this.STUDIE_PROFIEL_KEUZE_URI,{persoonId:t}).get(function(t){e.resolve(t)}),e.promise},t.$inject=["$q","$resource","currentUser",t],t}()}).call(this,n(3))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=e.module("Magister.Web.VakkenPakketKeuze",["ngRoute","ngResource","Magister.Core"]);i.config(["$routeProvider",function(e){e.when("/vakkenpakketkeuze",{pageTitle:"Vakkenpakketkeuze",controller:"VakkenPakketKeuzeController",resolve:{module:["$ocLazyLoad",function(e){return n.e(21).then(n.bind(null,612)).then(function(t){var n=t.vakkenPakketKeuzeAMD;return e.load(n)})}]},template:n(393)})}])}).call(this,n(1))},function(e,t){e.exports='<div data-sm-check-dirty="isDirty()"\r\n     data-dirty-message="De vakkenpakketkeuze is nog niet voltooid."\r\n     data-dirty-yes-button="LeavePage"\r\n     data-dirty-cancel-button="Continue">\r\n</div>\r\n\r\n<sm-workflow data-title="Vakkenpakketkeuze">\r\n    <wf-button data-is-enabled="isVoltooienToegestaan()" data-on-click="onFinish()" data-title="opslaan" data-finish-button="true"></wf-button>\r\n    <wf-button data-is-enabled="isNextStepAvailable()" data-on-click="nextStep()" data-title="volgende" data-forward-button="true"></wf-button>\r\n    <wf-button data-is-enabled="isPrevStepAvailable()" data-on-click="prevStep()" data-title="vorige" data-previous-button="true"></wf-button>\r\n    <wf-button data-is-enabled="true" data-ng-show="false" data-on-click="onClose()" data-title="annuleren" data-cancel-button="true"></wf-button>\r\n\r\n    <step title="Studie en profiel" id="studieprofielkeuzestep" data-step-controller="StudiePakketKeuzeStepController">\r\n        <studie-profiel-step></studie-profiel-step>\r\n    </step>\r\n    <step title="Vakkenpakketkeuze" id="vakkenkeuzeoverzichtstep" data-step-controller="VakkenKeuzeStepController">\r\n        <vak-keuze-step></vak-keuze-step>\r\n    </step>\r\n    <step title="Samenvatting" id="vakkenpakketoverzichtstep" data-step-controller="OverzichtStepController">\r\n        <overzicht-step></overzicht-step>\r\n    </step>\r\n</sm-workflow>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var i,r=n(4),o=n(5),a=n(6),s=n(98),l=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(t){function i(e,i,r){var o=t.call(this)||this;return o.applicationService=e,o.berichtenService=i,o.currentUser=r,o.template=n(395),o.replace=!0,o.link=function(e,t,n){return o.linkFn(e,t,n)},o}return l(i,t),i.prototype.linkFn=function(e,n,i){var s=this;t.prototype.linkFn.call(this,e,n,i);var l=this.currentUser.relatedPersons.current.id;e.titel=this.applicationService.getLocalizedString("WIDGET_MEDEDELINGEN_TITEL"),e.onBackClick=function(){return s.onBackClick(e)},e.onBerichtClick=function(t){return s.onBerichtClick(e,t)},e.heeftPrivileges=!0,this.currentUser.isInRole(r.a.Leerling)&&(e.heeftPrivileges=this.currentUser.hasPrivilege(o.a.Berichten,a.a.Read)),e.heeftPrivileges&&this.berichtenService.getWidgetMededelingen(l).then(function(t){e.berichten=t.Items})},i.prototype.onBackClick=function(t){null!==t.berichtDetail&&e.isDefined(t.berichtDetail)&&(t.toonBerichtDetail=!t.toonBerichtDetail,t.berichtDetail=null)},i.prototype.onBerichtClick=function(e,t){var n=this.currentUser.relatedPersons.current.id;this.berichtenService.getBerichtDetails(n,t.Id,t.Soort).then(function(t){e.berichtDetail=t,e.toonBerichtDetail=!0})},i.$inject=["applicationService","berichtenService","currentUser",function(e,t,n){return new i(e,t,n)}],i}(s.a)}).call(this,n(1))},function(e,t){e.exports='<div id="berichten-widget" class="widget" data-ng-show="heeftPrivileges">\n    <div class="block msg-widget"\n        data-sm-loading-indicator="{domain: \'berichten\', hideEvent: \'NG_REPEAT_FINISHED\', overlay: false, timeout: 1000}">\n\n        <h3 data-ng-click="onBackClick();"\n            data-ng-class="{\'detail\': toonBerichtDetail, \'pointerCursor\': toonBerichtDetail, \'no-data\': berichten.length == 0}">\n            <div data-loading-indicator=\'\'></div>\n            <span href="" class="msg-back icon-back left" data-ng-show="toonBerichtDetail"\n                data-ng-click="onBackClick();"></span>\n            <span data-widget-resize-button data-widget-name="berichten-widget"></span>\n            <b data-ng-bind="titel"></b>\n        </h3>\n\n        <div class="content" data-sm-scrollbar="scrollbar" data-horizontal-scroll="false">\n            <ul class="list msg-list" data-ng-hide="toonBerichtDetail || !berichten[0]">\n                <li data-ng-repeat="bericht in berichten" data-ng-click="onBerichtClick(bericht)"\n                    data-ng-class="{\'unread\': !bericht.IsGelezen}" class="alert" data-sm-notify-complete="berichten">\n                    <a>\n                        <span class="date">\n                            <span data-ng-bind="bericht.Einde | date:\'dd-MM\'"></span>\n                        </span>\n                        <span class="from" data-ng-bind-html="bericht.Afzender.Naam"></span>\n                        <span class="msg" data-ng-bind="bericht.Onderwerp"></span>\n                        <span class="label" data-ng-bind="bericht.Soort | berichtSoort"></span>\n                        <span data-ng-class="{\'glyph attachment\' : bericht.HeeftBijlagen}"></span>\n                        <span data-ng-class="{\'glyph important\' : bericht.HeeftPrioriteit}"></span>\n                    </a>\n                </li>\n            </ul>\n            <p class="empty-message" data-ng-show="berichten.length === 0">Geen mededelingen</p>\n            <div class="msg-detail" data-ng-hide="!toonBerichtDetail">\n                <span class="from" data-ng-bind-html="berichtDetail.Afzender.Naam"></span>\n                <span class="date" data-ng-bind="berichtDetail.VerstuurdOp | date:\'dd-MM HH:mm\'"></span>\n                <div class="message" data-ng-bind-html="berichtDetail.Inhoud | parseUrl"></div>\n            </div>\n        </div>\n\n        <footer class="endlink"></footer>\n    </div>\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var i=n(397),r=n(399),o=n(133),a=n(400),s=n(402),l=n(403),d=n(404),c=n(405),u=n(406),h=n(407),p=n(408),f=e.module("Magister.Web.Vandaag",["Magister.Web.Cijfers"]);f.service("notificatieService",u.a.$inject).service("vakkenService",o.a.$inject),f.component("oudersToestemmingDialog",a.a),f.controller("contactGegevensGevalideerdController",s.a.$inject),f.directive("fallbackSrc",r.a.$inject).directive("smLoggedInUser",i.a.$inject).directive("widget",d.a.$inject).directive("loadingIndicator",l.a.$inject).directive("smMagisterTour",p.a.$inject).directive("widgetResizeButton",c.a.$inject),f.constant("vandaagDefaults",{vandaagSchermAlgemeen:h.a}),f.config(["$routeProvider",function(e){e.when("/vandaag",{pageTitle:"Vandaag",controller:"vandaagController",resolve:{module:["$ocLazyLoad",function(e){return n.e(22).then(n.bind(null,627)).then(function(t){var n=t.vandaagAMD;return e.load(n)})}]},template:n(411)}).when("/contactgegevens-gevalideerd",{template:n(412),controller:"contactGegevensGevalideerdController",controllerAs:"$ctrl"}).when("/",{redirectTo:"/vandaag"}).otherwise({redirectTo:"/vandaag"})}]),f.filter("parseUrl",function(){var e=/^(<p>)?(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?(<\/p>)?/gm;return function(t){if(t)return t.replace(e,function(e){if(e.startsWith("<p>")){var t=e.replace("<p>","");return(t=t.replace("</p>","")).startsWith("http")?'<p> <a href="'+t+'" target="_blank">'+e+"</a> </p>":'<p> <a href="http://'+t+'" target="_blank">'+e+"</a> </p>"}return'<a href="'+e+'">'+e+"</a>"})}})}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=n(5),o=n(6),a=function(){function e(e,t){var i=this;this.currentUser=e,this.unreadMessageService=t,this.template=n(398),this.replace=!0,this.link=function(e){return i.linkFn(e)}}return e.prototype.linkFn=function(e){var t=this;Object(i.w)(this.currentUser.person)||(e.showBerichten=this.currentUser.hasPrivilege(r.a.Berichten,o.a.Read),e.showBerichten&&(this.unreadMessageService.fetchUnreadMessages(),e.$watch(function(){return t.unreadMessageService.unread},function(n){void 0!==n&&(e.unread=t.unreadMessageService.unread)})))},e.$inject=["currentUser","unreadMessageService",function(t,n){return new e(t,n)}],e}()},function(e,t){e.exports='<div>\r\n    <a id="menu-berichten-new" href="#/berichten"">\r\n        <i class="ico far fa-envelope"></i>\r\n        <em class="fa-layers-counter" ng-if="unread !== 0" ng-bind="unread">\r\n            {{ unread }}\r\n        </em>\r\n        <span>Berichten</span>\r\n    </a>\r\n</div>'},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(){var e=this;this.scope=!1,this.link=function(t,n,i){return e.linkFn(t,n,i)}}return t.prototype.linkFn=function(t,n,i){n.bind("error",function(){!0===i.fallbackProperty||"true"===i.fallbackProperty?(t.$evalAsync(function(e){e.fallback={},e.fallback[i.fallbackSrc]=!0}),e.element(this).remove()):e.element(this).attr("src",i.fallbackSrc)})},t.$inject=[function(){return new t}],t}()}).call(this,n(1))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(8),r=function(){function t(e,t,n,i){this.currentUser=e,this.profielResource=t,this.applicationService=n,this.instellingService=i}return t.prototype.updateToestemming=function(){var e=this;this.toestemming&&this.profielResource.put(this.currentUser.person.id,{oudersMogenGegevensZien:this.toestemming}).then(function(){e.applicationService.showMessage("De instellingen zijn aangepast",i.j.INFORMATION,i.f)}),this.setToestemmingOudersMaanden(),this.closeDialog()},t.prototype.setToestemmingOudersMaanden=function(){var t,n=e(this.currentUser.person.birthday).add("years",18).diff(e(),"months");if(this.toestemming)t=[!0,!0,!0];else if(n>-1&&n<3){t=[!1,!1,!1];for(var i=n;i<3;i++)t[i]=!0}this.instellingService.set(this.currentUser.person.id,"toestemmingOudersMaanden",t)},t.prototype.onChecked=function(){this.toestemming=!this.toestemming},t.$inject=["currentUser","profielResource","applicationService","instellingService"],t}(),o={template:n(401),bindings:{closeDialog:"&"},controller:r}}).call(this,n(15))},function(e,t){e.exports='<link rel="stylesheet" type="text/css" href="/css/desktop/tour.css" />\r\n<div class="tour-overlay"></div>\r\n<div class="dialog">\r\n    <div class="content-pane">\r\n        <h2 class="title indent">18 jaar</h2>\r\n        <div class="content">\r\n            <div>Je wordt binnenkort 18 jaar. Je kunt nu aangeven of jouw ouders je gegevens mogen zien en zich bijvoorbeeld kunnen inschrijven voor een ouderavond.</div>\r\n            <br><br><br><br>\r\n            <span class="check" data-ng-cloak="cloak">\r\n                <input type="checkbox" class="checkbox" name="Toestemming" data-ng-model="$ctrl.toestemming" />\r\n                <label for="Toestemming">\r\n                    <span data-ng-click="$ctrl.onChecked()"></span>\r\n                    Mijn ouders mogen mijn gegevens zien\r\n                </label>\r\n            </span>\r\n            <div class="buttons" style="margin-bottom: -30px; padding-top: 5px; border-top: 1px solid #cccccc; width: 300px; margin-left: -25px">\r\n                <a class="btn-primary2" style="margin-right: 25px" ng-click="$ctrl.updateToestemming()" tabindex="2">doorgaan</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.$location=e,this.resourceService=t,this.isValid=!1,this.validate()}return e.prototype.validate=function(){var e=this,t=this.$location.search();t.guid&&this.resourceService.post("/accounts/emailadresverificatie/"+t.guid,null).then(function(){return e.isValid=!0},function(){return e.isValid=!1})},e.prototype.onOk=function(){this.$location.path("/vandaag")},e.$inject=["$location","resourceService",e],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var i=function(){function t(){var e=this;this.scope={image:"@"},this.template='<span class="forward-container"><img class="forward" ng-src="{{image}}" /></span>',this.replace=!0,this.link=function(t,n,i){return e.linkFn(t,n,i)}}return t.prototype.linkFn=function(e,n,i){var r=this;n.hide();var o=e;o.degree=0,e.$on("START-LOADING",function(i,r){t.startLoading(e,n),void 0===r&&(r=5e3),setTimeout(function(){clearTimeout(o.timer),n.hide()},r)}),e.$on("START-LOADING-FOREVER",function(){t.startLoading(e,n)}),e.$on("STOP-LOADING",function(){r.stopLoading(e,n)})},t.startLoading=function(n,i){var r=e(i).find(".forward"),o=n;i.show(),r.css({WebkitTransform:"rotate("+o.degree+"deg)"}),r.css({"-moz-transform":"rotate("+o.degree+"deg)"}),o.timer=setTimeout(function(){o.degree+=2,t.startLoading(n,i)},0)},t.prototype.stopLoading=function(e,t){clearTimeout(e.timer),t.hide()},t.$inject=[function(){return new t}],t}()}).call(this,n(10))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(0),r=function(){function t(e){var t=this;this.$compile=e,this.scope={widgetSettings:"&",widgetNaam:"="},this.replace=!0,this.link=function(e,n,i){return t.linkFn(e,n,i)}}return t.prototype.linkFn=function(t,n,r){var o,a=t.widgetSettings();o=Object(i.w)(a)?"<div "+t.widgetNaam+" ></div>":Object(i.h)('<div {0} {1} data-ng-init="widgetHigh = {2}"></div>',a.Naam,a.widgetHigh?'class="widget-high"':"",a.widgetHigh);var s=e.element(o);this.$compile(s)(t),n.replaceWith(s)},t.$inject=["$compile",function(e){return new t(e)}],t}()}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){var e=this;this.template='<span class="iconic resize-button" data-ng-click="resize()"></span>',this.scope=!0,this.replace=!0,this.link=function(t,n,i){return e.linkFn(t,n,i)}}return e.prototype.linkFn=function(e,t,n){e.resize=function(){t.parentsUntil(".draggable-overlay",".widget").toggleClass("widget-high"),e.$emit("widgetResized",n.widgetName)}},e.$inject=[function(){return new e}],e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(5),r=n(6),o=function(){function t(e,t,n){this.$resource=e,this.applicationService=t,this.currentUser=n}return t.prototype.getNotificatieItems=function(t,n){var o={notificatieItems:[]};return this.currentUser.hasPrivilege(i.a.EloOpdracht,r.a.Read)&&(o.notificatieItems.push(this.opdrachtOpenstaand(t,n)),o.notificatieItems.push(this.opdrachtBeoordeeld()),o.notificatieItems.push(this.opdrachtOpenWeek(e().format("YYYY-MM-DD"),e().add(7,"days").format("YYYY-MM-DD")))),this.currentUser.hasPrivilege(i.a.Activiteiten,r.a.Read)&&o.notificatieItems.push(this.activiteitenNogInTeSchrijven()),this.currentUser.hasPrivilege(i.a.Logboeken,r.a.Read)&&o.notificatieItems.push(this.ongelezenLogboeken()),o},t.prototype.opdrachtOpenstaand=function(e,t){var n=this.$resource("/api/personen/:persoonId/opdrachten?status=openstaand&count=true&startdatum=:startPeriode&einddatum=:eindPeriode"),i={persoonId:this.currentUser.relatedPersons.current.id,startPeriode:e,eindPeriode:t},r={count:"?",countDescription:"?",name:"",link:"#/elo/opdrachten/filter/openstaand",index:1,resourceName:"opdrachtOpenstaand"};return this.setValues(r,n.get(i).$promise),r},t.prototype.opdrachtBeoordeeld=function(){var e=this.$resource("/api/personen/:persoonId/opdrachten?status=beoordeeld&count=true"),t={persoonId:this.currentUser.relatedPersons.current.id},n={count:"?",countDescription:"?",name:"",link:"#/elo/opdrachten/filter/beoordeeld",index:1,resourceName:"opdrachtBeoordeeld"};return this.setValues(n,e.get(t).$promise),n},t.prototype.opdrachtOpenWeek=function(e,t){var n=this.$resource("/api/personen/:persoonId/opdrachten?status=openstaand&count=true"),i={persoonId:this.currentUser.relatedPersons.current.id,startdatum:e,einddatum:t},r={count:"?",countDescription:"?",name:"",link:"#/elo/opdrachten/filter/openstaand",index:1,resourceName:"opdrachtOpenWeek"};return this.setValues(r,n.get(i).$promise),r},t.prototype.activiteitenNogInTeSchrijven=function(){var e=this.$resource("/api/personen/:persoonId/activiteiten?status=NogNietAanEisVoldaan&count=true"),t={persoonId:this.currentUser.relatedPersons.current.id},n={count:"?",countDescription:"?",name:"",link:"#/elo/activiteiten",index:1,resourceName:"activiteitenNogInTeSchrijven"};return this.setValues(n,e.get(t).$promise),n},t.prototype.ongelezenLogboeken=function(){var e=this.$resource("/api/leerlingen/:persoonId/logboeken/count?alleenongelezen=true"),t={persoonId:this.currentUser.relatedPersons.current.id},n={count:"?",countDescription:"?",name:"",link:"#/lvs?ongelezen=true",index:1,resourceName:"logboeken"};return this.setOngelezenLogboekValues(n,e.get(t).$promise),n},t.prototype.setOngelezenLogboekValues=function(e,t){var n=this;t.then(function(t){e.count=t.count,e.countDescription=e.count>0?""+e.count:"geen";var i=e.resourceName+(1===e.count?"_SINGULAR":"_PLURAL");e.name=n.getNotificatieItemNaam(i)})},t.prototype.setValues=function(e,t){var n=this;t.then(function(t){e.count=t.TotalCount,e.countDescription=e.count>0?""+e.count:"geen";var i=e.resourceName+(1===e.count?"_SINGULAR":"_PLURAL");e.name=n.getNotificatieItemNaam(i)})},t.prototype.getNotificatieItemNaam=function(e){var t="WIDGET_NOTIFICATIE_"+e.toUpperCase();return this.applicationService.getLocalizedString(t)},t.$inject=["$resource","applicationService","currentUser",t],t}()}).call(this,n(15))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(5),r=n(4),o=[{Titel:"Agenda",Naam:"agenda-widget",Directive:"AgendaDirective",Privilege:i.a.Afspraken,Positie:{Kolom:0,Volgnummer:0},icon:"icon-calendar",Draggable:!0,roles:[r.a.Leerling,r.a.Ouder],widgetHigh:!0},{Titel:"Laatste cijfers",Naam:"cijfers-leerling",Directive:"LaatsteCijfersDirective",Privilege:i.a.Cijfers,Positie:{Kolom:0,Volgnummer:1},icon:"icon-grades",Draggable:!0,roles:[r.a.Ouder],widgetHigh:!1},{Titel:"Cijfers",Naam:"cijfers-ouder",Directive:"CijfersOuderDirective",Privilege:i.a.Cijfers,Positie:{Kolom:2,Volgnummer:1},icon:"icon-grades",Draggable:!0,roles:[r.a.Ouder],widgetHigh:!0},{Titel:"Laatste cijfers",Naam:"cijfers-leerling",Directive:"CijfersLeerlingDirective",Privilege:i.a.Cijfers,Positie:{Kolom:0,Volgnummer:1,VolledigeHoogte:!1},icon:"icon-grades",Draggable:!0,roles:[r.a.Leerling],widgetHigh:!1},{Titel:"Berichten",Naam:"berichten-widget",Directive:"BerichtenDirective",Privilege:i.a.Berichten,Positie:{Kolom:1,Volgnummer:0},icon:"icon-email",Draggable:!0,roles:[r.a.Leerling,r.a.Ouder],widgetHigh:!0},{Titel:"Notificaties",Naam:"notificatie-widget",Directive:"NotificatieDirective",Privilege:i.a.NoPrivilege,Positie:{Kolom:2,Volgnummer:0},icon:"icon-paper",Draggable:!0,roles:[r.a.Leerling,r.a.Ouder],widgetHigh:!0}]},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var i,r=n(409),o=n(0),a=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=[{index:0,title:"Welkom, ontdek het verfriste Magister",description:"Zoals je ziet zijn er een paar dingen veranderd, kijk snel!",imageUrl:"assets/images/tour1.png"},{index:1,title:"Makkelijker navigeren",description:"Alles staat nu gegroepeerd aan de linkerkant. Daar vind je jouw berichten en je profielgedeelte waar je ook mee uitlogt. Ook als het menu is ingeklapt, blijft de donkerblauwe balk aan de linkerkant van het menu altijd zichtbaar.",imageUrl:"assets/images/tour2.png"},{index:2,title:"Makkelijk switchen tussen Magister producten",description:"Gebruikt jouw school naast Magister ook het product Magister.me? Dan kan je vanaf hier makkelijk switchen tussen deze twee producten.",imageUrl:"assets/images/tour3.png"},{index:3,title:"Veel succes dit schooljaar!",description:"iets met een link",imageUrl:"assets/images/tour4.png"}],l=function(){function t(e,t,n){var i=this;this.$scope=e,this.$routeParams=t,this.currentUser=n,e.slides=s,e.currentSlide=s[0],e.onKeyUp=function(e){return i.onKeyUp(e)},e.moveNext=function(){return i.moveNext()},e.movePrevious=function(){return i.movePrevious()},e.toggleTourShowNextTime=function(){return i.toggleTourShowNextTime()},e.navigateTo=function(e){return i.navigateTo(e)},e.cancelTour=function(){return i.cancelTour()},e.noConsentWithBerichten=this.currentUser.noConsentWithBerichten}return t.prototype.initElement=function(t){var n=this;this.tourElement=t;var i=this.$scope.$watch("hideTourNextTime",function(e,t){Object(o.w)(e)||(!0===e&&n.tourElement.hide(),i())});this.$scope.$watch("isLoaded",function(e){!Object(o.w)(e)&&e&&i()}),e.isDefined(this.$routeParams.showTour)&&"true"===this.$routeParams.showTour&&this.tourElement.show(),e.element(".tour-dialog").focus()},t.prototype.onKeyUp=function(e){27===e.keyCode&&this.cancelTour()},t.prototype.moveNext=function(){this.$scope.currentSlide=s[this.$scope.currentSlide.index+1]},t.prototype.movePrevious=function(){this.$scope.currentSlide=s[this.$scope.currentSlide.index-1]},t.prototype.navigateTo=function(e){this.$scope.currentSlide=s[e]},t.prototype.cancelTour=function(){this.$scope.hideTourNextTime=!0,this.tourElement.hide(),this.$scope.hideTour=!0},t.prototype.toggleTourShowNextTime=function(){this.$scope.hideTourNextTime=!this.$scope.hideTourNextTime},t}(),d=function(e){function t(){var t=e.call(this)||this;return t.scope={hideTour:"=",hideTourNextTime:"=",isLoaded:"="},t.template=n(410),t.controller=["$scope","$routeParams","currentUser",l],t.replace=!0,t.link=function(e,n,i,r){return t.linkFn(e,n,i,r)},t}return a(t,e),t.prototype.linkFn=function(e,t,n,i){i.initElement(t),this.fixIsolatedScopeBinding(e,"hideTourNextTime",n),this.fixIsolatedScopeBinding(e,"hideTour",n),e.$watch("hideTour",function(){!0===e.hideTour&&t.hide()})},t.$inject=[function(){return new t}],t}(r.a)}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.prototype.fixIsolatedScopeBinding=function(e,t,n){e.$watch(t,function(i,r){if(i!==r)for(var o=n[t],a=e.$parent.$parent;null!=a;){if(a.hasOwnProperty(o))return void(a[o]=e[t]);a=a.$parent}})},e}()},function(e,t){e.exports='<div data-ng-show="isLoaded" data-ng-cloak>\n    <div class="tour-overlay"></div>\n    <div class="tour-dialog" ng-keyup="onKeyUp($event)" tabindex="0">\n        <div data-ng-switch="currentSlide.index" class="my-switch-container">\n\n            <div class="my-switch-animation" data-ng-show="noConsentWithBerichten">\n                <svg width="122" height="122" aria-hidden="true" viewBox="0 0 32 32"\n                    style="fill: #0096db; margin-top: 50px">\n                    <path\n                        d="M13.714 2.286q3.732 0 6.884 1.839t4.991 4.991 1.839 6.884-1.839 6.884-4.991 4.991-6.884 1.839-6.884-1.839-4.991-4.991-1.839-6.884 1.839-6.884 4.991-4.991 6.884-1.839zM16 24.554v-3.393q0-0.25-0.161-0.42t-0.393-0.17h-3.429q-0.232 0-0.411 0.179t-0.179 0.411v3.393q0 0.232 0.179 0.411t0.411 0.179h3.429q0.232 0 0.393-0.17t0.161-0.42zM15.964 18.411l0.321-11.089q0-0.214-0.179-0.321-0.179-0.143-0.429-0.143h-3.929q-0.25 0-0.429 0.143-0.179 0.107-0.179 0.321l0.304 11.089q0 0.179 0.179 0.313t0.429 0.134h3.304q0.25 0 0.42-0.134t0.188-0.313z">\n                    </path>\n                </svg>\n                <h3 style="margin-top: 100px;">\n                    Uw meerderjarige kind heeft u geen toestemming gegeven om zijn/haar gegevens te bekijken. Daarom\n                    heeft u alleen toegang tot de Berichten module.\n                </h3>\n                <div class="footer-navigation">\n                    <button class="primary-button" data-ng-click="cancelTour()">Sluiten</button>\n                </div>\n            </div>\n\n            <div class="my-switch-animation" data-ng-show="!noConsentWithBerichten">\n                <div class="top-slide">\n                    <button data-ng-click="cancelTour();" class="close-button">\n                        <i class="far fa-times"></i>\n                    </button>\n                    <img data-ng-src="{{currentSlide.imageUrl}}" class="carousel-image" />\n                </div>\n\n                <div class="bottom-slide">\n                    <div class="carousel-slide">\n                        <button ng-if="currentSlide.index !== 0" class="previous-button" ng-click="movePrevious()">\n                            <i class="far fa-chevron-left"></i>\n                        </button>\n                        <div ng-if="currentSlide.index === 0" class="place-holder-button"></div>\n\n                        <div class="middle-slide">\n                            <div class="carousel-text-wrapper">\n                                <h1 class="carousel-title">{{ currentSlide.title }} </h1>\n                                <p ng-if="currentSlide.index !== 3" class="carousel-description">{{ currentSlide.description }} </p>\n                                <p ng-if="currentSlide.index === 3" class="carousel-description">\n                                    Benieuwd naar wat er nog meer aankomt? <br>\n                                    Ga naar <a href="http://www.magister.nl/design">www.magister.nl/design.</a>\n                                </p>\n                            </div>\n                            <div class="carousel-dots" ng-if="slides.length > 1">\n                                <div ng-repeat="slide in slides track by $index"\n                                    ng-class="{\'carousel-dot-active\': currentSlide.index === $index}" class="carousel-dot">\n                                </div>\n                            </div>\n                        </div>\n\n                        <button ng-if="currentSlide.index < slides.length - 1" class="next-button" ng-click="moveNext()"\n                            title="volgende">\n                            <i class="far fa-chevron-right"></i>\n                        </button>\n                        <div ng-if="currentSlide.index === slides.length - 1" class="place-holder-button"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports='<div id="vandaag-container" class="container" data-ng-init="editMode=false"\r\n    data-ng-class="{\'sidecolumn\': editMode, \'aside-toggle\': !tabState.tabContainerVisible && editMode}">\r\n    <div class="head-bar" data-ng-click="headBarClick();">\r\n        <h1 data-sm-datum="datum"></h1>\r\n        <div class="edit-layout" data-ng-click="toggleEditMode()">\r\n            <a href="" title="{{editButtonTitle}}">\r\n                <i class="fa fa-th" aria-hidden="true" ng-if="editButtonTitle === \'Schermindeling\'"></i>\r\n                <i class="far fa-check-circle" aria-hidden="true" ng-if="editButtonTitle === \'Opslaan\'"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <section class="main">\r\n        <div class="content-container no-border" data-sm-scrollbar="scrollbar">\r\n            <div id="vandaagschermtop"></div>\r\n            <div data-ng-repeat="column in columns" id="{{column.name}}" class="widget-column">\r\n                <div id="drop-{{column.order}}-0" class="droppable" data-sm-drag-drop="{drop: true}"\r\n                    data-drag-enabled="editMode" data-drop="handleDrop" data-ng-show="editMode">\r\n                </div>\r\n                <div data-ng-repeat="widget in columnedWidgets[column.order] | orderBy:\'Positie.Volgnummer\'">\r\n                    <div id="drag-{{column.order}}-{{$index}}" data-sm-drag-drop="{drag: true}"\r\n                        data-drag-enabled="editMode" data-hint-element="createHintElement"\r\n                        data-start-drag="dragStartExistingWidget(widget)" data-drag-end="dragEndExistingWidget()">\r\n                        <div ng-class="{\'draggable-overlay draggable\': editMode}">\r\n                            <div data-widget="widget" data-widget-settings="widget"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div id="drop-{{column.order}}-{{$index + 1}}" class="droppable" data-sm-drag-drop="{drop: true}"\r\n                        data-drag-enabled="editMode" data-drop="handleDrop" data-ng-show="editMode">\r\n                    </div>\r\n                </div>\r\n                <div class="widget spacer" data-ng-hide="columnedWidgets[column.order]">&nbsp;</div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <sm-tab-container class="ng-hide" ng-show="editMode">\r\n        <sm-tab title="Widgets" id="idWidgets">\r\n            <div data-dragstart="dragStartNewWidget" data-dragend="dragend" data-drop-trashcan="dropTrash"\r\n                data-sm-available-widget="sm-available-widget" data-can-delete="canDelete"\r\n                data-widgets="availableWidgets"></div>\r\n        </sm-tab>\r\n    </sm-tab-container>\r\n    <div ng-switch="hideTourNextTimeSetting">\r\n        <div ng-switch-when="false" data-sm-magister-tour="magister tour" data-hide-tour-next-time="hideTourNextTime" data-hide-tour="hideTour" data-is-loaded="areSettingsLoaded"></div>\r\n    </div>\r\n\r\n    <mg-kennisnet-login></mg-kennisnet-login>\r\n\r\n    <ouders-toestemming-dialog close-dialog="closeOudersToestemmingDialog()" ng-if="toonOudersToestemmingDialog">\r\n    </ouders-toestemming-dialog>\r\n</div>'},function(e,t){e.exports='<div class="dialog-overlay">\r\n    <div class="dialog" style="position:fixed">\r\n        <div class="content-pane">\r\n            <h2 class="title indent">Contactgegevens valideren</h2>\r\n            <div class="content" style="padding-bottom:77px">\r\n                <div ng-if="$ctrl.isValid">\r\n                    <p>De contactgegevens zijn succesvol geverifieerd.</p>\r\n                </div>\r\n                <div ng-if="!$ctrl.isValid">\r\n                    <p>Er is een fout opgetreden bij het verifi&euml;ren van je e-mailadres.</p>\r\n                </div>\r\n            </div>\r\n            <footer class="footer" style="margin-bottom:4px">\r\n                <a class="primary-button" ng-click="$ctrl.onOk()">\r\n                    <span>ok</span>\r\n                </a>\r\n            </footer>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"ORDER_HEADER",function(){return o}),n.d(i,"UNKNOWN_ERROR_OCCURRED",function(){return a}),n.d(i,"CLOSE_BROWSER_WARNING",function(){return s}),n.d(i,"PARENT_ORDER_INSTRUCTION",function(){return l}),n.d(i,"NO_LEVERANCIERS_REGISTERED",function(){return d}),n.d(i,"LOADING_LEVERANCIERS_FAILED",function(){return c}),n.d(i,"UNAUTHORIZED_HEADER",function(){return u}),n.d(i,"UNAUTHORIZED_MESSAGE",function(){return h}),n.d(i,"AUTHORIZATION_FAILURE",function(){return p}),n.d(i,"ORDER_PRODUCTS_FOR",function(){return f}),n.d(i,"CHOOSE_LEVERANCIER_MESSAGE",function(){return g}),n.d(i,"CURRENT_SCHOOLYEAR",function(){return m}),n.d(i,"NEXT_SCHOOLYEAR",function(){return v}),n.d(i,"WARNING",function(){return b}),n.d(i,"APOLOGY",function(){return _});var r,o="Leermiddelen bestellen",a="Er is een onbekende fout opgetreden.",s="Als op dezelfde computer voor meerdere kinderen leermiddelen worden besteld, moeten vr elke bestelling eerst alle browservensters worden afgesloten en moet er opnieuw worden ingelogd. Dit voorkomt dat de verkeerde gegevens worden gebruikt voor de bestelling.",l="U kunt leermiddelen bestellen via het Magister-account van uw kind(eren). Vraag uw kind in te loggen in Magister en navigeer dan naar 'Leermiddelen bestellen' via het menu.",d="Er is door de school geen leverancier opgegeven. Neem contact op met de beheerder van je school en informeer over dit probleem.",c="Het is helaas niet gelukt om de links naar de leermiddelenleveranciers te laden:",u="Bestellen niet toegestaan",h="Je bent niet geautoriseerd om via Magister te bestellen.",p="Het is helaas niet gelukt om te bepalen of je via Magister mag bestellen.",f="Leermiddelen bestellen voor",g="Kies een leverancier bij het schooljaar waarvoor je leermiddelen wilt bestellen:",m="Huidig schooljaar",v="Volgend schooljaar",b="Let op!",_="Sorry!";n.d(t,"a",function(){return w}),function(e){e.UNFETCHED="UNFETCHED",e.PENDING="PENDING",e.SUCCESS="SUCCESS",e.ERROR="ERROR"}(r||(r={}));var k=function(){function e(e,t,n,i){this.$scope=e,this.bestellenService=t,this.currentUser=n,this.$window=i,this.currentUserIsParent=!1,this.entrypointData={status:r.UNFETCHED},this.leveranciersData={status:r.UNFETCHED}}return e.prototype.onSelectLeverancier=function(e){this.$window.open(e.url,"_blank")},e.prototype.$onInit=function(){var e=this;this.$scope.$ctrl=this,this.$scope.strings=i,this.currentUserIsParent=this.currentUser.isInRole(2),this.fetchEntrypoint().then(function(){if(!e.currentUserIsParent&&e.entrypointData.entrypoint&&e.entrypointData.entrypoint.kanBestellen&&e.entrypointData.entrypoint.links.leveranciers)return e.fetchLeveranciers(e.entrypointData.entrypoint.links.leveranciers.href)})},e.prototype.fetchEntrypoint=function(){var e=this;return this.entrypointData.status=r.PENDING,this.bestellenService.getBestelInfo().then(function(t){e.entrypointData.status=r.SUCCESS,e.entrypointData.entrypoint=t}).catch(function(){e.entrypointData.status=r.ERROR})},e.prototype.fetchLeveranciers=function(e){var t=this;return this.leveranciersData.status=r.PENDING,this.bestellenService.getLeveranciers(e).then(function(e){t.leveranciersData.status=r.SUCCESS,t.leveranciersData.leveranciers=e}).catch(function(e){t.leveranciersData.status=r.ERROR,t.leveranciersData.error=e.data&&e.data.message?e.data.message:a})},e.$inject=["$scope","bestellenService","currentUser","$window"],e}(),w={template:n(173),controller:k}},function(e,t,n){"use strict";var i=function(){function e(e,t,n,i,r){this.$window=t,this.$timeout=n,this.$scope=i,this.selector=r,this.beforeOpenedDeferred=e.defer(),this.afterOpenedDeferred=e.defer(),this.beforeClosedDeferred=e.defer(),this.afterClosedDeferred=e.defer()}return Object.defineProperty(e.prototype,"beforeOpened",{get:function(){return this.beforeOpenedDeferred.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterOpened",{get:function(){return this.afterOpenedDeferred.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beforeClosed",{get:function(){return this.beforeClosedDeferred.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterClosed",{get:function(){return this.afterClosedDeferred.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{set:function(e){if(this._element)throw new Error("Element already set.");this._element=e,this.openDialog()},enumerable:!0,configurable:!0}),e.prototype.close=function(e){var t=this;this.beforeClosedDeferred.resolve(e),this._element.querySelector(".icl-overlay-backdrop").classList.remove("is-opaque"),this._element.querySelector(this.selector).classList.remove("is-opaque"),this.$timeout(function(){t.$scope.$destroy(),t.$window.document.body.removeChild(t._element),t.afterClosedDeferred.resolve(e)},450)},e.prototype.openDialog=function(){var e=this;this.beforeOpenedDeferred.resolve(),this.$window.document.body.appendChild(this._element),this.reflowElement(this._element),this._element.querySelector(".icl-overlay-backdrop").classList.add("is-opaque"),this._element.querySelector(this.selector).classList.add("is-opaque"),this.$timeout(function(){return e.afterOpenedDeferred.resolve()},450)},e.prototype.reflowElement=function(e){return e.offsetHeight},e}();n.d(t,"a",function(){return o});var r={template:' <div class="icl-dialog-container">\n                    <div class="icl-overlay-backdrop fade-transition"></div>\n                    <div class="icl-dialog-wrapper">\n                        <SELECTOR\n                            class="fade-transition"\n                            dialog-ref="modalDialogRef"\n                            data="modalData">\n                        </SELECTOR>\n                    </div>\n                </div>'},o=function(){function e(e,t,n,i,r){this.$q=e,this.$window=t,this.$timeout=n,this.$rootScope=i,this.$compile=r}return e.prototype.openFromComponent=function(e,t){var n=this.$rootScope.$new(),o=new i(this.$q,this.$window,this.$timeout,n,e);return n.modalData=t,n.modalDialogRef=o,o.element=this.$compile(r.template.replace("SELECTOR",e))(n)[0],o},e.$inject=["$q","$window","$timeout","$rootScope","$compile"],e}()}])]);